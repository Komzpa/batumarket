<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="9793pt" height="5016pt"
 viewBox="0.00 0.00 9793.00 5015.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5011.5)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5011.5 9789,-5011.5 9789,4 -4,4"/>
<!-- log_utils._extract_tb_lineno -->
<g id="node1" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node1"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7406.5,-4953.5 7175.5,-4953.5 7175.5,-4917.5 7406.5,-4917.5 7406.5,-4953.5"/>
<text text-anchor="middle" x="7291" y="-4931.46" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node2" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node2"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6350.5,-5007.5 6067.5,-5007.5 6067.5,-4971.5 6350.5,-4971.5 6350.5,-5007.5"/>
<text text-anchor="middle" x="6209" y="-4983.91" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge1" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6350.64,-4982.47C6563.13,-4971.84 6962.67,-4951.87 7165.32,-4941.73"/>
<polygon fill="black" stroke="black" points="7165.61,-4945.22 7175.42,-4941.23 7165.26,-4938.23 7165.61,-4945.22"/>
</g>
<!-- log_utils.init_logger -->
<g id="node3" class="node">
<title>log_utils.init_logger</title>
<g id="a_node3"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6556.5,-4899.5 5861.5,-4899.5 5861.5,-4817.5 6556.5,-4817.5 6556.5,-4899.5"/>
<text text-anchor="middle" x="6209" y="-4841.52" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge2" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6556.55,-4883.21C6764.9,-4898.06 7017.52,-4916.07 7165.35,-4926.61"/>
<polygon fill="black" stroke="black" points="7165.15,-4930.11 7175.37,-4927.33 7165.65,-4923.13 7165.15,-4930.11"/>
</g>
<!-- log_utils.get_logger -->
<g id="node4" class="node">
<title>log_utils.get_logger</title>
<g id="a_node4"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7359.5,-4876.5 7222.5,-4876.5 7222.5,-4840.5 7359.5,-4840.5 7359.5,-4876.5"/>
<text text-anchor="middle" x="7291" y="-4855.26" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge3" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6556.55,-4852.15C6788.92,-4851.15 7076.38,-4852.03 7212.08,-4854.79"/>
<polygon fill="black" stroke="black" points="7212.3,-4858.3 7222.38,-4855.01 7212.45,-4851.3 7212.3,-4858.3"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge4" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7222.38,-4861.99C7093.25,-4864.88 6803.34,-4865.85 6566.71,-4864.89"/>
<polygon fill="black" stroke="black" points="6566.56,-4861.39 6556.55,-4864.85 6566.53,-4868.39 6566.56,-4861.39"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node5" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node5"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6395.5,-4953.5 6022.5,-4953.5 6022.5,-4917.5 6395.5,-4917.5 6395.5,-4953.5"/>
<text text-anchor="middle" x="6209" y="-4929.34" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge5" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6395.66,-4935.5C6615.51,-4935.5 6975.67,-4935.5 7164.89,-4935.5"/>
<polygon fill="black" stroke="black" points="7165.16,-4939 7175.16,-4935.5 7165.16,-4932 7165.16,-4939"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node6" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node6"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8430.5,-4237.5 8131.5,-4237.5 8131.5,-4201.5 8430.5,-4201.5 8430.5,-4237.5"/>
<text text-anchor="middle" x="8281" y="-4214.71" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node7" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node7"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7503.5,-3737.5 7078.5,-3737.5 7078.5,-3701.5 7503.5,-3701.5 7503.5,-3737.5"/>
<text text-anchor="middle" x="7291" y="-3713.62" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge6" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7503.61,-3703.42C7618.18,-3706.9 7752.9,-3732.91 7836,-3822.5 7933.33,-3927.43 7774.64,-4037.6 7872,-4142.5 7934.26,-4209.58 8035.13,-4229.07 8120.99,-4231.66"/>
<polygon fill="black" stroke="black" points="8121.04,-4235.16 8131.12,-4231.89 8121.2,-4228.16 8121.04,-4235.16"/>
</g>
<!-- caption_io.read_caption -->
<g id="node8" class="node">
<title>caption_io.read_caption</title>
<g id="a_node8"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8446.5,-3490 8115.5,-3490 8115.5,-3453 8446.5,-3453 8446.5,-3490"/>
<text text-anchor="middle" x="8281" y="-3465.06" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge7" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7351.38,-3737.55C7461.68,-3767.04 7699.36,-3811.08 7836,-3691.5 7901.66,-3634.04 7806.76,-3556.44 7872,-3498.5 7906.41,-3467.94 8010.61,-3461.41 8105.09,-3462.41"/>
<polygon fill="black" stroke="black" points="8105.33,-3465.91 8115.38,-3462.55 8105.42,-3458.91 8105.33,-3465.91"/>
</g>
<!-- post_io.read_post -->
<g id="node9" class="node">
<title>post_io.read_post</title>
<g id="a_node9"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8560,-3082.5 8002,-3082.5 8002,-3006.5 8560,-3006.5 8560,-3082.5"/>
<text text-anchor="middle" x="8281" y="-3029.33" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge8" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7503.74,-3736.47C7636.04,-3741.97 7789.79,-3737.32 7836,-3691.5 7930.85,-3597.45 7780.17,-3188.5 7872,-3091.5 7904.14,-3057.55 7946.58,-3037.91 7991.93,-3027.47"/>
<polygon fill="black" stroke="black" points="7992.92,-3030.84 8001.96,-3025.32 7991.45,-3024 7992.92,-3030.84"/>
</g>
<!-- notes_utils.load_json -->
<g id="node11" class="node">
<title>notes_utils.load_json</title>
<g id="a_node11"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9145,-2226.5 8897,-2226.5 8897,-2190.5 9145,-2190.5 9145,-2226.5"/>
<text text-anchor="middle" x="9021" y="-2202.8" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge116" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8404,-3452.9C8499,-3431.42 8625.25,-3386.03 8690,-3291.5 8739.34,-3219.46 8691.02,-2586.5 8726,-2506.5 8781.46,-2379.68 8917.11,-2276.63 8982.95,-2232.17"/>
<polygon fill="black" stroke="black" points="8985.01,-2235 8991.38,-2226.53 8981.12,-2229.18 8985.01,-2235"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node33" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node33"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9117.5,-3630.5 8924.5,-3630.5 8924.5,-3594.5 9117.5,-3594.5 9117.5,-3630.5"/>
<text text-anchor="middle" x="9021" y="-3609.26" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge113" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8446.61,-3472.43C8521.49,-3475.4 8610.85,-3482.51 8690,-3498.5 8792.29,-3519.17 8906.24,-3563.59 8969.91,-3590.48"/>
<polygon fill="black" stroke="black" points="8968.74,-3593.78 8979.31,-3594.47 8971.48,-3587.34 8968.74,-3593.78"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node76" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node76"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9114.5,-3909.5 8927.5,-3909.5 8927.5,-3873.5 9114.5,-3873.5 9114.5,-3909.5"/>
<text text-anchor="middle" x="9021" y="-3888.26" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge114" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8446.64,-3462.52C8543.73,-3460.93 8654.37,-3466.79 8690,-3498.5 8755.84,-3557.09 8677.68,-3619.8 8726,-3693.5 8783.6,-3781.36 8895.13,-3840.09 8963.04,-3869.47"/>
<polygon fill="black" stroke="black" points="8961.75,-3872.73 8972.32,-3873.42 8964.49,-3866.29 8961.75,-3872.73"/>
</g>
<!-- caption_io._get_langs -->
<g id="node83" class="node">
<title>caption_io._get_langs</title>
<g id="a_node83"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9130,-3684.5 8912,-3684.5 8912,-3648.5 9130,-3648.5 9130,-3684.5"/>
<text text-anchor="middle" x="9021" y="-3661.72" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge112" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8355.41,-3452.95C8445.08,-3435.01 8596.37,-3420.68 8690,-3498.5 8739.74,-3539.84 8676.79,-3597.53 8726,-3639.5 8774.75,-3681.08 8846,-3688.49 8906.15,-3685.19"/>
<polygon fill="black" stroke="black" points="8906.72,-3688.66 8916.47,-3684.51 8906.27,-3681.67 8906.72,-3688.66"/>
</g>
<!-- notes_utils.read_md -->
<g id="node85" class="node">
<title>notes_utils.read_md</title>
<g id="a_node85"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9091,-3117.5 8951,-3117.5 8951,-3081.5 9091,-3081.5 9091,-3117.5"/>
<text text-anchor="middle" x="9021" y="-3096.26" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge115" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8386.96,-3452.95C8480.52,-3430.81 8614.07,-3384.43 8690,-3291.5 8737.49,-3233.38 8669.76,-3176.21 8726,-3126.5 8783.69,-3075.51 8874.91,-3075.07 8940.44,-3083.4"/>
<polygon fill="black" stroke="black" points="8940.34,-3086.92 8950.72,-3084.81 8941.29,-3079.99 8940.34,-3086.92"/>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge252" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8560.22,-3065.23C8696.31,-3075.38 8849.97,-3086.83 8940.71,-3093.59"/>
<polygon fill="black" stroke="black" points="8940.68,-3097.1 8950.92,-3094.35 8941.21,-3090.12 8940.68,-3097.1"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node154" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node154"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9190,-3063 8852,-3063 8852,-3026 9190,-3026 9190,-3063"/>
<text text-anchor="middle" x="9021" y="-3038.06" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge253" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8560.22,-3044.5C8654.52,-3044.5 8757.27,-3044.5 8841.66,-3044.5"/>
<polygon fill="black" stroke="black" points="8841.86,-3048 8851.86,-3044.5 8841.86,-3041 8841.86,-3048"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node10" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node10"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8537,-1050.5 8025,-1050.5 8025,-1008.5 8537,-1008.5 8537,-1050.5"/>
<text text-anchor="middle" x="8281" y="-1021.41" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge9" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8512.05,-1050.53C8579.76,-1068.53 8647.11,-1100.46 8690,-1156.5 8754.94,-1241.35 8660.99,-2032.7 8726,-2117.5 8763.8,-2166.81 8827.91,-2190.09 8886.64,-2200.83"/>
<polygon fill="black" stroke="black" points="8886.32,-2204.33 8896.77,-2202.57 8887.5,-2197.43 8886.32,-2204.33"/>
</g>
<!-- notes_utils.read_text -->
<g id="node65" class="node">
<title>notes_utils.read_text</title>
<g id="a_node65"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="9675.5,-1296.5 9461.5,-1296.5 9461.5,-1260.5 9675.5,-1260.5 9675.5,-1296.5"/>
<text text-anchor="middle" x="9568.5" y="-1273.72" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge264" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9145.29,-2197.15C9204.01,-2185.69 9271.05,-2162.85 9316,-2117.5 9553.21,-1878.16 9568.2,-1424.5 9567.95,-1306.91"/>
<polygon fill="black" stroke="black" points="9571.44,-1306.57 9567.88,-1296.6 9564.44,-1306.62 9571.44,-1306.57"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node12" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node12"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7407.5,-463.5 7174.5,-463.5 7174.5,-427.5 7407.5,-427.5 7407.5,-463.5"/>
<text text-anchor="middle" x="7291" y="-440.71" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._format_vector -->
<g id="node13" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node13"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8409.5,-1201.5 8152.5,-1201.5 8152.5,-1165.5 8409.5,-1165.5 8409.5,-1201.5"/>
<text text-anchor="middle" x="8281" y="-1179.34" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- similar_utils._similar_path -->
<g id="node14" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node14"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8383,-2377.5 8179,-2377.5 8179,-2341.5 8383,-2341.5 8383,-2377.5"/>
<text text-anchor="middle" x="8281" y="-2355.8" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar -->
<g id="node15" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node15"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="8530,-990.5 8032,-990.5 8032,-942.5 8530,-942.5 8530,-990.5"/>
<text text-anchor="middle" x="8281" y="-957.38" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge10" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8530.05,-959.94C8601.23,-963.65 8666.1,-974.42 8690,-999.5 8775.73,-1089.49 8650.64,-2018.66 8726,-2117.5 8763.67,-2166.9 8827.77,-2190.2 8886.52,-2200.92"/>
<polygon fill="black" stroke="black" points="8886.21,-2204.42 8896.66,-2202.65 8887.39,-2197.52 8886.21,-2204.42"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node16" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node16"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7439,-2381.5 7143,-2381.5 7143,-2345.5 7439,-2345.5 7439,-2381.5"/>
<text text-anchor="middle" x="7291" y="-2358.2" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge11" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7439.11,-2362.9C7638.38,-2362.1 7989.67,-2360.68 8168.56,-2359.95"/>
<polygon fill="black" stroke="black" points="8168.79,-2363.45 8178.78,-2359.91 8168.76,-2356.45 8168.79,-2363.45"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node17" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node17"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8357.5,-2323.5 8204.5,-2323.5 8204.5,-2287.5 8357.5,-2287.5 8357.5,-2323.5"/>
<text text-anchor="middle" x="8281" y="-2301.8" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge12" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7439.06,-2358.63C7548.61,-2354.42 7701.8,-2347.28 7836,-2336.5 7852.05,-2335.21 7855.96,-2333.92 7872,-2332.5 7983.15,-2322.65 8111.64,-2314.72 8194.26,-2310.06"/>
<polygon fill="black" stroke="black" points="8194.56,-2313.55 8204.35,-2309.49 8194.17,-2306.56 8194.56,-2313.55"/>
</g>
<!-- notes_utils.write_json -->
<g id="node18" class="node">
<title>notes_utils.write_json</title>
<g id="a_node18"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9115,-4489.5 8927,-4489.5 8927,-4453.5 9115,-4453.5 9115,-4489.5"/>
<text text-anchor="middle" x="9021" y="-4467.46" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge13" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7439.19,-2349.38C7581.39,-2339.37 7782.86,-2336 7836,-2390.5 7893.23,-2449.19 7819.09,-3802.89 7872,-3865.5 8111.05,-4148.38 8435.75,-3755.2 8690,-4024.5 8771.9,-4111.25 8660.95,-4190.5 8726,-4290.5 8779.46,-4372.68 8884.61,-4423.73 8953.59,-4449.89"/>
<polygon fill="black" stroke="black" points="8952.48,-4453.21 8963.07,-4453.41 8954.92,-4446.65 8952.48,-4453.21"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node120" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node120"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9146,-2551.5 8896,-2551.5 8896,-2515.5 9146,-2515.5 9146,-2551.5"/>
<text text-anchor="middle" x="9021" y="-2527.34" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge175" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8357.68,-2299.91C8441.12,-2296.15 8578.33,-2297.15 8690,-2332.5 8812.27,-2371.21 8935.97,-2464.2 8990.76,-2508.81"/>
<polygon fill="black" stroke="black" points="8988.7,-2511.65 8998.65,-2515.29 8993.14,-2506.24 8988.7,-2511.65"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node19" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node19"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="8522,-659.5 8040,-659.5 8040,-619.5 8522,-619.5 8522,-659.5"/>
<text text-anchor="middle" x="8281" y="-632.43" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node20" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node20"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="6348,-857.5 6070,-857.5 6070,-821.5 6348,-821.5 6348,-857.5"/>
<text text-anchor="middle" x="6209" y="-834.72" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node21" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node21"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="7748,-677 6834,-677 6834,-602 7748,-602 7748,-677"/>
<text text-anchor="middle" x="7291" y="-624.5" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge14" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M7748.04,-639.5C7844.99,-639.5 7943.9,-639.5 8029.71,-639.5"/>
<polygon fill="black" stroke="black" points="8029.84,-643 8039.84,-639.5 8029.84,-636 8029.84,-643"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node22" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node22"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="8519.5,-597.5 8042.5,-597.5 8042.5,-557.5 8519.5,-557.5 8519.5,-597.5"/>
<text text-anchor="middle" x="8281" y="-570.43" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node23" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node23"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="6517.5,-609.5 5900.5,-609.5 5900.5,-557.5 6517.5,-557.5 6517.5,-609.5"/>
<text text-anchor="middle" x="6209" y="-573.36" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge15" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6413.77,-557.46C6634.66,-529.24 6980.21,-485.08 7164.43,-461.54"/>
<polygon fill="black" stroke="black" points="7164.96,-465.01 7174.44,-460.27 7164.07,-458.06 7164.96,-465.01"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node24" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node24"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6667,-3253 5751,-3253 5751,-3182 6667,-3182 6667,-3253"/>
<text text-anchor="middle" x="6209" y="-3202.86" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge16" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6386.34,-3181.98C6494.53,-3171.22 6627.67,-3179.67 6710,-3262.5 6777.44,-3330.35 6677.27,-3624.95 6746,-3691.5 6791.52,-3735.58 6938.46,-3741.18 7068.15,-3736.51"/>
<polygon fill="black" stroke="black" points="7068.39,-3740.01 7078.25,-3736.13 7068.12,-3733.01 7068.39,-3740.01"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge19" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6667.19,-3201.53C7143.71,-3184.5 7823.4,-3158.98 7836,-3151.5 7862.75,-3135.63 7845.86,-3108.35 7872,-3091.5 7907.93,-3068.34 7949.41,-3053.45 7991.87,-3044.23"/>
<polygon fill="black" stroke="black" points="7992.72,-3047.63 8001.81,-3042.17 7991.31,-3040.77 7992.72,-3047.63"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node25" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node25"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7509,-4295.5 7073,-4295.5 7073,-4251.5 7509,-4251.5 7509,-4295.5"/>
<text text-anchor="middle" x="7291" y="-4265.18" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge17" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6375.91,-3181.99C6486.64,-3168.9 6626.7,-3174.68 6710,-3262.5 6784.6,-3341.15 6670.47,-4159.73 6746,-4237.5 6789.66,-4282.46 6933.72,-4290.54 7062.62,-4287.86"/>
<polygon fill="black" stroke="black" points="7062.75,-4291.36 7072.66,-4287.63 7062.59,-4284.36 7062.75,-4291.36"/>
</g>
<!-- lot_io.read_lots -->
<g id="node26" class="node">
<title>lot_io.read_lots</title>
<g id="a_node26"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8387,-2779.5 8175,-2779.5 8175,-2743.5 8387,-2743.5 8387,-2779.5"/>
<text text-anchor="middle" x="8281" y="-2755.34" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge18" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6456.45,-3181.96C6547.32,-3169.74 6651.2,-3156.81 6746,-3147.5 6866.79,-3135.64 7735.97,-3144.25 7836,-3075.5 7867.47,-3053.87 7846.27,-3025.71 7872,-2997.5 7970.86,-2889.1 8131.35,-2816.79 8218.67,-2783.18"/>
<polygon fill="black" stroke="black" points="8220.07,-2786.39 8228.17,-2779.56 8217.58,-2779.85 8220.07,-2786.39"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node27" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node27"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8357.5,-1662.5 8204.5,-1662.5 8204.5,-1626.5 8357.5,-1626.5 8357.5,-1662.5"/>
<text text-anchor="middle" x="8281" y="-1641.26" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge20" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6654.01,-3181.96C6674.67,-3168.98 6693.59,-3153.32 6710,-3134.5 6803.16,-3027.7 6646.12,-1960.04 6746,-1859.5 6831.41,-1773.53 7742.16,-1898.17 7836,-1821.5 7889.09,-1778.12 7819.59,-1715.7 7872,-1671.5 7962.88,-1594.85 8109.46,-1606.93 8199.97,-1624.45"/>
<polygon fill="black" stroke="black" points="8199.42,-1627.91 8209.91,-1626.44 8200.79,-1621.05 8199.42,-1627.91"/>
</g>
<!-- lot_io.get_seller -->
<g id="node43" class="node">
<title>lot_io.get_seller</title>
<g id="a_node43"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8381.5,-4340.5 8180.5,-4340.5 8180.5,-4304.5 8381.5,-4304.5 8381.5,-4340.5"/>
<text text-anchor="middle" x="8281" y="-4316.91" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge36" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7509.13,-4284.27C7713.42,-4294.4 8011.01,-4309.16 8170.07,-4317.05"/>
<polygon fill="black" stroke="black" points="8170.18,-4320.56 8180.34,-4317.56 8170.53,-4313.57 8170.18,-4320.56"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge170" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8348.08,-2779.58C8437.7,-2799.71 8597.22,-2819.24 8690,-2734.5 8765.75,-2665.32 8679.76,-2598.08 8726,-2506.5 8788.42,-2382.89 8920.79,-2278.2 8984.4,-2232.74"/>
<polygon fill="black" stroke="black" points="8986.77,-2235.36 8992.91,-2226.73 8982.72,-2229.64 8986.77,-2235.36"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node116" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node116"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9078.5,-4281.5 8963.5,-4281.5 8963.5,-4245.5 9078.5,-4245.5 9078.5,-4281.5"/>
<text text-anchor="middle" x="9021" y="-4260.26" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge169" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8353.32,-2779.56C8449.02,-2808 8615.56,-2873.25 8690,-2997.5 8752.05,-3101.07 8665.25,-3979.17 8726,-4083.5 8775.69,-4168.83 8883.45,-4218.94 8953.79,-4243.78"/>
<polygon fill="black" stroke="black" points="8952.86,-4247.16 8963.45,-4247.12 8955.14,-4240.55 8952.86,-4247.16"/>
</g>
<!-- scan_ontology.main -->
<g id="node28" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5624,-4818 5169,-4818 5169,-4761 5624,-4761 5624,-4818"/>
<text text-anchor="middle" x="5396.5" y="-4778.61" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge21" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5455.63,-4818.1C5516.8,-4846.66 5616.67,-4889.04 5708,-4908.5 5806.95,-4929.59 5919.28,-4937.08 6012.36,-4938.98"/>
<polygon fill="black" stroke="black" points="6012.39,-4942.49 6022.46,-4939.17 6012.52,-4935.49 6012.39,-4942.49"/>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge23" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5624.04,-4792.63C6345.04,-4801.99 8547.57,-4825.9 8690,-4770.5 8835.59,-4713.87 8956.94,-4560.36 9001.61,-4498.18"/>
<polygon fill="black" stroke="black" points="9004.71,-4499.88 9007.64,-4489.7 8999,-4495.82 9004.71,-4499.88"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge22" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5492.3,-4760.92C5555.11,-4736.56 5632.89,-4694.75 5672,-4628.5 5710.6,-4563.13 5656.05,-3317.85 5708,-3262.5 5788.83,-3176.38 5924.2,-3168.82 6033.71,-3180.79"/>
<polygon fill="black" stroke="black" points="6033.56,-3184.3 6043.89,-3181.97 6034.36,-3177.34 6033.56,-3184.3"/>
</g>
<!-- caption._identify_size -->
<g id="node29" class="node">
<title>caption._identify_size</title>
<g id="a_node29"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9149.5,-4074.5 8892.5,-4074.5 8892.5,-4038.5 9149.5,-4038.5 9149.5,-4074.5"/>
<text text-anchor="middle" x="9021" y="-4050.8" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node30" class="node">
<title>caption._prepare_image</title>
<g id="a_node30"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8498,-4079.5 8064,-4079.5 8064,-4033.5 8498,-4033.5 8498,-4079.5"/>
<text text-anchor="middle" x="8281" y="-4048.06" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge24" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8498.44,-4056.5C8622.46,-4056.5 8774.38,-4056.5 8882.2,-4056.5"/>
<polygon fill="black" stroke="black" points="8882.5,-4060 8892.5,-4056.5 8882.5,-4053 8882.5,-4060"/>
</g>
<!-- caption._guess_chat -->
<g id="node31" class="node">
<title>caption._guess_chat</title>
<g id="a_node31"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9117,-3985.5 8925,-3985.5 8925,-3949.5 9117,-3949.5 9117,-3985.5"/>
<text text-anchor="middle" x="9021" y="-3963.34" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node32" class="node">
<title>caption.caption_file</title>
<g id="a_node32"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="7594,-4043 6988,-4043 6988,-3970 7594,-3970 7594,-4043"/>
<text text-anchor="middle" x="7291" y="-3991.51" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge30" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7594.24,-4024.38C7684.39,-4013.53 7775.24,-3983.52 7836,-3915.5 7886.25,-3859.24 7818.48,-3290.67 7872,-3237.5 7936.55,-3173.38 8625.49,-3263.66 8690,-3199.5 8744.67,-3145.13 8694.89,-2577.05 8726,-2506.5 8781.84,-2379.85 8917.31,-2276.71 8983.03,-2232.2"/>
<polygon fill="black" stroke="black" points="8985.08,-2235.03 8991.44,-2226.56 8981.19,-2229.22 8985.08,-2235.03"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge25" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M7594.14,-4021.79C7742.08,-4029.28 7917.2,-4038.14 8053.46,-4045.04"/>
<polygon fill="black" stroke="black" points="8053.45,-4048.54 8063.62,-4045.55 8053.81,-4041.55 8053.45,-4048.54"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge26" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M7594.48,-3999.67C7988.39,-3990.78 8657.01,-3975.69 8914.54,-3969.88"/>
<polygon fill="black" stroke="black" points="8914.72,-3973.38 8924.64,-3969.65 8914.56,-3966.38 8914.72,-3973.38"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge27" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7594.29,-4042.32C7681.51,-4036.96 7770.66,-4014.06 7836,-3955.5 7895.13,-3902.51 7811.7,-3832.16 7872,-3780.5 7941.1,-3721.3 8616.94,-3794.74 8690,-3740.5 8728.26,-3712.09 8688.35,-3668.72 8726,-3639.5 8778.55,-3598.72 8853.37,-3592.34 8914.38,-3595.97"/>
<polygon fill="black" stroke="black" points="8914.22,-3599.47 8924.44,-3596.67 8914.7,-3592.49 8914.22,-3599.47"/>
</g>
<!-- caption_io.has_caption -->
<g id="node34" class="node">
<title>caption_io.has_caption</title>
<g id="a_node34"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8358.5,-4133.5 8203.5,-4133.5 8203.5,-4097.5 8358.5,-4097.5 8358.5,-4133.5"/>
<text text-anchor="middle" x="8281" y="-4112.26" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge28" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7594.11,-4001.89C7675.16,-4009.38 7761.04,-4025.61 7836,-4057.5 7855.43,-4065.77 7852.46,-4080.5 7872,-4088.5 7976.33,-4131.2 8108.21,-4131.32 8193.32,-4125.25"/>
<polygon fill="black" stroke="black" points="8193.76,-4128.72 8203.47,-4124.48 8193.23,-4121.74 8193.76,-4128.72"/>
</g>
<!-- caption_io.write_caption -->
<g id="node35" class="node">
<title>caption_io.write_caption</title>
<g id="a_node35"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8447.5,-3825.5 8114.5,-3825.5 8114.5,-3789.5 8447.5,-3789.5 8447.5,-3825.5"/>
<text text-anchor="middle" x="8281" y="-3801.34" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge29" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M7594.2,-3990.51C7673.42,-3982.96 7758.38,-3971.85 7836,-3955.5 7981.16,-3924.92 8145.11,-3862.68 8227.21,-3829.49"/>
<polygon fill="black" stroke="black" points="8228.86,-3832.6 8236.81,-3825.59 8226.22,-3826.11 8228.86,-3832.6"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge110" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8344.85,-4133.59C8434.73,-4155.18 8599.15,-4178.1 8690,-4088.5 8761.27,-4018.21 8655.63,-3710.69 8726,-3639.5 8777.5,-3587.4 8863.12,-3585.06 8928.72,-3593.15"/>
<polygon fill="black" stroke="black" points="8928.28,-3596.63 8938.66,-3594.48 8929.21,-3589.69 8928.28,-3596.63"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge111" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8352.05,-4133.51C8441.39,-4151.94 8595.59,-4167.88 8690,-4088.5 8741.81,-4044.93 8676.41,-3986.58 8726,-3940.5 8776.54,-3893.54 8854.18,-3882.2 8916.99,-3882.12"/>
<polygon fill="black" stroke="black" points="8917.3,-3885.62 8927.33,-3882.21 8917.36,-3878.63 8917.3,-3885.62"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge119" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8447.73,-3810.17C8533.8,-3802.02 8632.69,-3775.83 8690,-3704.5 8773.4,-3600.68 8673.61,-2628.93 8726,-2506.5 8780.32,-2379.57 8915.92,-2276.92 8982.25,-2232.42"/>
<polygon fill="black" stroke="black" points="8984.36,-2235.22 8990.76,-2226.77 8980.49,-2229.39 8984.36,-2235.22"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge120" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8389.58,-3825.6C8484.61,-3847.6 8618.82,-3894.58 8690,-3991.5 8769.23,-4099.38 8653.84,-4177.77 8726,-4290.5 8778.77,-4372.95 8883.87,-4423.86 8953.05,-4449.93"/>
<polygon fill="black" stroke="black" points="8951.97,-4453.26 8962.56,-4453.44 8954.39,-4446.69 8951.97,-4453.26"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge118" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8358.99,-3825.5C8449.08,-3841.69 8597.65,-3852.52 8690,-3775.5 8738.02,-3735.45 8678.25,-3679.87 8726,-3639.5 8777.08,-3596.32 8852.47,-3590.14 8914.12,-3594.47"/>
<polygon fill="black" stroke="black" points="8914.03,-3597.97 8924.28,-3595.28 8914.59,-3590.99 8914.03,-3597.97"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge117" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8447.52,-3803.56C8522.18,-3799.47 8611.12,-3791.38 8690,-3775.5 8790.43,-3755.28 8902.8,-3713.94 8967.1,-3688.38"/>
<polygon fill="black" stroke="black" points="8968.62,-3691.54 8976.61,-3684.58 8966.02,-3685.04 8968.62,-3691.54"/>
</g>
<!-- caption.main -->
<g id="node36" class="node">
<title>caption.main</title>
<g id="a_node36"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6301.5,-4024.5 6116.5,-4024.5 6116.5,-3988.5 6301.5,-3988.5 6301.5,-4024.5"/>
<text text-anchor="middle" x="6209" y="-4000.34" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge31" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6301.61,-4006.5C6449.48,-4006.5 6747.43,-4006.5 6977.72,-4006.5"/>
<polygon fill="black" stroke="black" points="6977.95,-4010 6987.95,-4006.5 6977.95,-4003 6977.95,-4010"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node37" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node37"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="9712.5,-3176.5 9424.5,-3176.5 9424.5,-3140.5 9712.5,-3140.5 9712.5,-3176.5"/>
<text text-anchor="middle" x="9568.5" y="-3153.72" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node38" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node38"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="9692.5,-2641.5 9444.5,-2641.5 9444.5,-2605.5 9692.5,-2605.5 9692.5,-2641.5"/>
<text text-anchor="middle" x="9568.5" y="-2619.46" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason -->
<g id="node39" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node39"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9316,-3181 8726,-3181 8726,-3136 9316,-3136 9316,-3181"/>
<text text-anchor="middle" x="9021" y="-3150.12" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge32" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9316.3,-3158.5C9349.99,-3158.5 9383.23,-3158.5 9413.96,-3158.5"/>
<polygon fill="black" stroke="black" points="9414.28,-3162 9424.28,-3158.5 9414.28,-3155 9414.28,-3162"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge33" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9301.01,-3135.91C9306.15,-3133.01 9311.15,-3129.87 9316,-3126.5 9486.42,-3007.95 9547.25,-2739.32 9562.96,-2651.71"/>
<polygon fill="black" stroke="black" points="9566.44,-2652.17 9564.7,-2641.72 9559.54,-2650.97 9566.44,-2652.17"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node40" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node40"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8448,-3136.5 8114,-3136.5 8114,-3100.5 8448,-3100.5 8448,-3136.5"/>
<text text-anchor="middle" x="8281" y="-3113.72" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge34" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8448.08,-3127.5C8527.13,-3131.79 8624.21,-3137.05 8715.79,-3142.01"/>
<polygon fill="black" stroke="black" points="8715.61,-3145.51 8725.78,-3142.55 8715.98,-3138.52 8715.61,-3145.51"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node41" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node41"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9197.5,-2706.5 8844.5,-2706.5 8844.5,-2670.5 9197.5,-2670.5 9197.5,-2706.5"/>
<text text-anchor="middle" x="9021" y="-2682.62" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node42" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node42"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8419,-2725.5 8143,-2725.5 8143,-2689.5 8419,-2689.5 8419,-2725.5"/>
<text text-anchor="middle" x="8281" y="-2702.72" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge35" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8419.08,-2703.97C8535.98,-2700.96 8705.11,-2696.61 8834.18,-2693.28"/>
<polygon fill="black" stroke="black" points="8834.27,-2696.78 8844.18,-2693.03 8834.09,-2689.79 8834.27,-2696.78"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node44" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node44"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7547,-2735.5 7035,-2735.5 7035,-2689.5 7547,-2689.5 7547,-2735.5"/>
<text text-anchor="middle" x="7291" y="-2704.06" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge40" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7547.07,-2691.19C7641.8,-2693.03 7747.64,-2707.18 7836,-2749.5 7857.28,-2759.69 7853.85,-2773.43 7872,-2788.5 7976.4,-2875.17 8112.36,-2954.81 8197.94,-3001.52"/>
<polygon fill="black" stroke="black" points="8196.37,-3004.66 8206.83,-3006.36 8199.72,-2998.51 8196.37,-3004.66"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge39" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7547.08,-2725.15C7746.47,-2735.04 8014.27,-2748.32 8164.78,-2755.79"/>
<polygon fill="black" stroke="black" points="8164.8,-2759.29 8174.97,-2756.29 8165.15,-2752.3 8164.8,-2759.29"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge41" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7547.21,-2726.37C7652.34,-2717.65 7765.74,-2686.79 7836,-2604.5 7903.36,-2525.6 7799.66,-1745.86 7872,-1671.5 7958.57,-1582.52 8117.26,-1602.51 8209.13,-1624.11"/>
<polygon fill="black" stroke="black" points="8208.36,-1627.52 8218.91,-1626.47 8210.01,-1620.72 8208.36,-1627.52"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge37" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7414.32,-2689.5C7538.53,-2673.88 7727.58,-2672.77 7836,-2782.5 7933.18,-2880.85 7771.83,-2996.2 7872,-3091.5 7905.28,-3123.16 8009.19,-3129.71 8103.81,-3128.45"/>
<polygon fill="black" stroke="black" points="8103.87,-3131.95 8113.81,-3128.28 8103.76,-3124.95 8103.87,-3131.95"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge38" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7547.08,-2711.21C7732.96,-2710.27 7978.3,-2709.03 8132.63,-2708.25"/>
<polygon fill="black" stroke="black" points="8132.68,-2711.75 8142.67,-2708.2 8132.65,-2704.75 8132.68,-2711.75"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node45" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node45"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7497,-2829.5 7085,-2829.5 7085,-2791.5 7497,-2791.5 7497,-2829.5"/>
<text text-anchor="middle" x="7291" y="-2803.77" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._mark_activity -->
<g id="node46" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node46"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4933.5,-1490.5 4747.5,-1490.5 4747.5,-1454.5 4933.5,-1454.5 4933.5,-1490.5"/>
<text text-anchor="middle" x="4840.5" y="-1468.8" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node47" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node47"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-1341.5 1260.5,-1341.5 1260.5,-1305.5 1490.5,-1305.5 1490.5,-1341.5"/>
<text text-anchor="middle" x="1375.5" y="-1318.2" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node48" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node48"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5024,-2583 4657,-2583 4657,-2546 5024,-2546 5024,-2583"/>
<text text-anchor="middle" x="4840.5" y="-2558.06" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node49" class="node">
<title>tg_client._write_md</title>
<g id="a_node49"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5465,-2880.5 5328,-2880.5 5328,-2844.5 5465,-2844.5 5465,-2880.5"/>
<text text-anchor="middle" x="5396.5" y="-2859.26" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node50" class="node">
<title>post_io.write_post</title>
<g id="a_node50"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6375,-2995.5 6043,-2995.5 6043,-2949.5 6375,-2949.5 6375,-2995.5"/>
<text text-anchor="middle" x="6209" y="-2964.06" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge42" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5465.09,-2861.3C5522.94,-2862.89 5606.94,-2871.57 5672,-2904.5 5692.19,-2914.72 5687.38,-2931.18 5708,-2940.5 5808.95,-2986.15 5933.23,-2994.29 6032.63,-2990.95"/>
<polygon fill="black" stroke="black" points="6032.92,-2994.45 6042.78,-2990.57 6032.65,-2987.45 6032.92,-2994.45"/>
</g>
<!-- post_io.get_contact -->
<g id="node72" class="node">
<title>post_io.get_contact</title>
<g id="a_node72"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7390.5,-3033.5 7191.5,-3033.5 7191.5,-2997.5 7390.5,-2997.5 7390.5,-3033.5"/>
<text text-anchor="middle" x="7291" y="-3010.72" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge254" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6375.2,-2979.08C6598.74,-2987.98 6991.34,-3003.61 7181.15,-3011.17"/>
<polygon fill="black" stroke="black" points="7181.29,-3014.67 7191.42,-3011.58 7181.57,-3007.68 7181.29,-3014.67"/>
</g>
<!-- post_io.get_timestamp -->
<g id="node153" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node153"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7462.5,-2979.5 7119.5,-2979.5 7119.5,-2939.5 7462.5,-2939.5 7462.5,-2979.5"/>
<text text-anchor="middle" x="7291" y="-2952.43" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge255" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6375.2,-2970.51C6573.36,-2968.13 6904.37,-2964.14 7109.2,-2961.68"/>
<polygon fill="black" stroke="black" points="7109.51,-2965.17 7119.46,-2961.55 7109.42,-2958.17 7109.51,-2965.17"/>
</g>
<!-- notes_utils.write_md -->
<g id="node155" class="node">
<title>notes_utils.write_md</title>
<g id="a_node155"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7404,-2921.5 7178,-2921.5 7178,-2885.5 7404,-2885.5 7404,-2921.5"/>
<text text-anchor="middle" x="7291" y="-2898.71" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge256" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6375.1,-2970.5C6473.02,-2967.19 6599.25,-2959.22 6710,-2940.5 6726.37,-2937.73 6729.61,-2933.15 6746,-2930.5 6889.48,-2907.31 7056.77,-2902.23 7167.56,-2901.88"/>
<polygon fill="black" stroke="black" points="7167.77,-2905.38 7177.76,-2901.86 7167.76,-2898.38 7167.77,-2905.38"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node51" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node51"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7530.5,-1574 7051.5,-1574 7051.5,-1531 7530.5,-1531 7530.5,-1574"/>
<text text-anchor="middle" x="7291" y="-1544.35" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge43" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7530.57,-1565.21C7625.7,-1571.08 7736.13,-1578.91 7836,-1588.5 7960.92,-1600.5 8104.96,-1619.65 8194.26,-1632.15"/>
<polygon fill="black" stroke="black" points="8193.95,-1635.64 8204.34,-1633.57 8194.92,-1628.71 8193.95,-1635.64"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node52" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node52"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6342,-1601.5 6076,-1601.5 6076,-1565.5 6342,-1565.5 6342,-1601.5"/>
<text text-anchor="middle" x="6209" y="-1578.72" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge44" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6342.16,-1579.71C6515.55,-1574.73 6823.31,-1565.9 7041.05,-1559.65"/>
<polygon fill="black" stroke="black" points="7041.45,-1563.14 7051.34,-1559.35 7041.25,-1556.14 7041.45,-1563.14"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node53" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node53"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3225,-1612.5 2986,-1612.5 2986,-1576.5 3225,-1576.5 3225,-1612.5"/>
<text text-anchor="middle" x="3105.5" y="-1590.46" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge45" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3225.09,-1591.26C3680.54,-1578.98 5361.23,-1535.39 6746,-1521.5 7230.42,-1516.64 7355.97,-1456.24 7836,-1521.5 7977.8,-1540.78 8138.27,-1593.19 8222.05,-1623"/>
<polygon fill="black" stroke="black" points="8221.04,-1626.36 8231.63,-1626.44 8223.4,-1619.77 8221.04,-1626.36"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node54" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node54"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5085,-1666 4596,-1666 4596,-1623 5085,-1623 5085,-1666"/>
<text text-anchor="middle" x="4840.5" y="-1636.35" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node55" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node55"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5608.5,-3070 5184.5,-3070 5184.5,-3025 5608.5,-3025 5608.5,-3070"/>
<text text-anchor="middle" x="5396.5" y="-3039.12" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node56" class="node">
<title>tg_client._extract_author</title>
<g id="a_node56"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6572,-2839.5 5846,-2839.5 5846,-2769.5 6572,-2769.5 6572,-2839.5"/>
<text text-anchor="middle" x="6209" y="-2790.7" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge46" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6572.25,-2806.51C6738.94,-2807.44 6931.07,-2808.51 7074.57,-2809.3"/>
<polygon fill="black" stroke="black" points="7074.8,-2812.8 7084.82,-2809.36 7074.84,-2805.8 7074.8,-2812.8"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node57" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node57"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5535.5,-2010.5 5257.5,-2010.5 5257.5,-1974.5 5535.5,-1974.5 5535.5,-2010.5"/>
<text text-anchor="middle" x="5396.5" y="-1987.72" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node58" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node58"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8429,-4443.5 8133,-4443.5 8133,-4407.5 8429,-4407.5 8429,-4443.5"/>
<text text-anchor="middle" x="8281" y="-4419.8" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node59" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node59"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5083,-3637 4598,-3637 4598,-3588 5083,-3588 5083,-3637"/>
<text text-anchor="middle" x="4840.5" y="-3602.87" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge49" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4845.96,-3637.27C4862.98,-3723.57 4932.68,-4011.86 5121,-4123.5 5256.62,-4203.9 7698.15,-4133.38 8192.96,-4118.22"/>
<polygon fill="black" stroke="black" points="8193.36,-4121.71 8203.25,-4117.91 8193.15,-4114.71 8193.36,-4121.71"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge47" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4885.93,-3587.92C4939.81,-3559.36 5034.19,-3513.26 5121,-3490.5 5823.21,-3306.42 6021.63,-3373.18 6746,-3325.5 6806.45,-3321.52 7788.91,-3330.62 7836,-3292.5 7888.28,-3250.18 7820.48,-3188.75 7872,-3145.5 7906.98,-3116.13 8009.89,-3109.47 8103.6,-3110.1"/>
<polygon fill="black" stroke="black" points="8103.77,-3113.6 8113.8,-3110.2 8103.83,-3106.6 8103.77,-3113.6"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node60" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node60"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5529.5,-4363.5 5263.5,-4363.5 5263.5,-4327.5 5529.5,-4327.5 5529.5,-4363.5"/>
<text text-anchor="middle" x="5396.5" y="-4341.34" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge48" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4850.06,-3637.38C4890.73,-3754.94 5064.76,-4251.04 5121,-4296.5 5157.92,-4326.34 5206.83,-4340.51 5253.12,-4346.63"/>
<polygon fill="black" stroke="black" points="5252.92,-4350.13 5263.27,-4347.86 5253.76,-4343.19 5252.92,-4350.13"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node61" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node61"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6334.5,-4440.5 6083.5,-4440.5 6083.5,-4404.5 6334.5,-4404.5 6334.5,-4440.5"/>
<text text-anchor="middle" x="6209" y="-4417.71" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge50" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5529.52,-4358.04C5679.27,-4372.27 5922.18,-4395.35 6073.1,-4409.68"/>
<polygon fill="black" stroke="black" points="6073.07,-4413.2 6083.36,-4410.66 6073.73,-4406.23 6073.07,-4413.2"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node62" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node62"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7472.5,-4517.5 7109.5,-4517.5 7109.5,-4481.5 7472.5,-4481.5 7472.5,-4517.5"/>
<text text-anchor="middle" x="7291" y="-4493.8" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge53" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6334.6,-4427.98C6436.09,-4433.57 6582.87,-4444.25 6710,-4463.5 6726.21,-4465.95 6729.76,-4469.29 6746,-4471.5 6862.65,-4487.35 6994.49,-4494.41 7099.16,-4497.47"/>
<polygon fill="black" stroke="black" points="7099.11,-4500.97 7109.2,-4497.76 7099.3,-4493.98 7099.11,-4500.97"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge52" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7472.65,-4514.11C7610.27,-4520.98 7784.56,-4519.13 7836,-4471.5 7927.74,-4386.56 7786.2,-4283.44 7872,-4192.5 7953.73,-4105.87 8099.92,-4098.99 8193.32,-4105"/>
<polygon fill="black" stroke="black" points="8193.09,-4108.49 8203.31,-4105.71 8193.58,-4101.51 8193.09,-4108.49"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge51" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7472.74,-4504.54C7579.51,-4503.98 7716.72,-4497.07 7836,-4471.5 7852.79,-4467.9 7855.26,-4461.32 7872,-4457.5 7953.37,-4438.91 8045.98,-4430.65 8122.37,-4427.14"/>
<polygon fill="black" stroke="black" points="8122.72,-4430.63 8132.56,-4426.7 8122.42,-4423.64 8122.72,-4430.63"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node63" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node63"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="4170,-4357 3734,-4357 3734,-4316 4170,-4316 4170,-4357"/>
<text text-anchor="middle" x="3952" y="-4329.26" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge54" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M4170.09,-4346.03C4285.87,-4351.41 4430.72,-4358.63 4560,-4366.5 5070.61,-4397.57 5197.13,-4422.97 5708,-4449.5 6209.81,-4475.56 6801.91,-4489.9 7099.27,-4495.97"/>
<polygon fill="black" stroke="black" points="7099.22,-4499.47 7109.29,-4496.17 7099.36,-4492.47 7099.22,-4499.47"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node64" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node64"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7463,-1167 7119,-1167 7119,-1126 7463,-1126 7463,-1167"/>
<text text-anchor="middle" x="7291" y="-1139.26" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge55" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7463.17,-1135.7C7600.2,-1130.63 7778.65,-1133.16 7836,-1175.5 7873.33,-1203.06 7846.09,-1235.01 7872,-1273.5 7978.17,-1431.23 8165.15,-1567.51 8243.67,-1620.7"/>
<polygon fill="black" stroke="black" points="8242,-1623.79 8252.26,-1626.47 8245.91,-1617.98 8242,-1623.79"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge56" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7455.67,-1125.99C7567.41,-1118.85 7716.31,-1123.15 7836,-1175.5 7856.45,-1184.44 7851.5,-1201.69 7872,-1210.5 8015.98,-1272.34 9091.82,-1278.36 9451.08,-1278.63"/>
<polygon fill="black" stroke="black" points="9451.24,-1282.13 9461.25,-1278.63 9451.25,-1275.13 9451.24,-1282.13"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge260" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9469.72,-1296.65C9454.53,-1306.04 9487.45,-1314.5 9568.5,-1314.5 9619.15,-1314.5 9651.01,-1311.19 9664.07,-1306.42"/>
<polygon fill="black" stroke="black" points="9667.48,-1307.25 9667.28,-1296.65 9660.83,-1305.06 9667.48,-1307.25"/>
</g>
<!-- tg_client._load_progress -->
<g id="node66" class="node">
<title>tg_client._load_progress</title>
<g id="a_node66"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2098,-878.5 1768,-878.5 1768,-842.5 2098,-842.5 2098,-878.5"/>
<text text-anchor="middle" x="1933" y="-854.34" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge57" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1970.35,-842.45C2111.92,-773.9 2641.37,-533.5 3104.5,-533.5 3104.5,-533.5 3104.5,-533.5 4841.5,-533.5 5929.72,-533.5 6201.78,-529.5 7290,-529.5 7290,-529.5 7290,-529.5 8282,-529.5 8754.18,-529.5 8963.17,-459.71 9316,-773.5 9470.76,-911.13 9541.45,-1165.95 9561.36,-1250.45"/>
<polygon fill="black" stroke="black" points="9557.99,-1251.38 9563.64,-1260.34 9564.81,-1249.81 9557.99,-1251.38"/>
</g>
<!-- tg_client._save_progress -->
<g id="node67" class="node">
<title>tg_client._save_progress</title>
<g id="a_node67"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2615,-1460.5 2386,-1460.5 2386,-1424.5 2615,-1424.5 2615,-1460.5"/>
<text text-anchor="middle" x="2500.5" y="-1438.34" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node68" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node68"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3239,-1322.5 2972,-1322.5 2972,-1286.5 3239,-1286.5 3239,-1322.5"/>
<text text-anchor="middle" x="3105.5" y="-1298.62" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge58" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3239.04,-1302.31C3959.04,-1290.99 7384.44,-1244.37 7836,-1374.5 8010.16,-1424.69 8184.42,-1562.4 8251.36,-1619.34"/>
<polygon fill="black" stroke="black" points="8249.48,-1622.34 8259.35,-1626.19 8254.04,-1617.03 8249.48,-1622.34"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node69" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node69"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2063.5,-1414.5 1802.5,-1414.5 1802.5,-1378.5 2063.5,-1378.5 2063.5,-1414.5"/>
<text text-anchor="middle" x="1933" y="-1390.62" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge59" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2063.66,-1398.43C2520.09,-1405.07 4095.14,-1426.5 5395.5,-1426.5 5395.5,-1426.5 5395.5,-1426.5 6210,-1426.5 6571.36,-1426.5 7483.03,-1369.09 7836,-1446.5 7995.63,-1481.51 8167.79,-1576.83 8242.2,-1621.2"/>
<polygon fill="black" stroke="black" points="8240.41,-1624.21 8250.79,-1626.35 8244.01,-1618.21 8240.41,-1624.21"/>
</g>
<!-- tg_client._save_message -->
<g id="node70" class="node">
<title>tg_client._save_message</title>
<g id="a_node70"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4560,-2734 3344,-2734 3344,-2619 4560,-2619 4560,-2734"/>
<text text-anchor="middle" x="3952" y="-2652.38" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge72" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4560.02,-2692.59C5649.79,-2721.55 7826.29,-2779.7 7836,-2782.5 7990.26,-2826.89 8146.29,-2937.67 8225.9,-3000.03"/>
<polygon fill="black" stroke="black" points="8223.81,-3002.84 8233.83,-3006.28 8228.14,-2997.34 8223.81,-3002.84"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge73" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4021.29,-2618.9C4244.8,-2434.69 4981.87,-1860.89 5708,-1670.5 5936.77,-1610.51 7599.57,-1615.38 7836,-1621.5 7960.63,-1624.73 8104.75,-1633.04 8194.15,-1638.73"/>
<polygon fill="black" stroke="black" points="8194.03,-1642.23 8204.23,-1639.38 8194.48,-1635.25 8194.03,-1642.23"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge60" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4560.12,-2668.69C4898.07,-2664.48 5326.37,-2659.37 5708,-2655.5 7168.69,-2640.71 8940.38,-2627.9 9434.18,-2624.43"/>
<polygon fill="black" stroke="black" points="9434.22,-2627.93 9444.19,-2624.36 9434.17,-2620.93 9434.22,-2627.93"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge61" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M3972.32,-2618.73C4034.61,-2440.49 4246.72,-1892.35 4596,-1580.5 4643.07,-1538.47 4709.15,-1510.56 4760.59,-1493.66"/>
<polygon fill="black" stroke="black" points="4761.89,-1496.92 4770.35,-1490.53 4759.75,-1490.26 4761.89,-1496.92"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge62" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4408.26,-2618.98C4507.08,-2606.5 4605.09,-2594.11 4682.65,-2584.32"/>
<polygon fill="black" stroke="black" points="4683.49,-2587.74 4692.97,-2583.01 4682.61,-2580.79 4683.49,-2587.74"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge63" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4199.05,-2734.03C4318.3,-2759.91 4463.96,-2788.6 4596,-2806.5 4859.24,-2842.18 5174.51,-2855.79 5317.8,-2860.4"/>
<polygon fill="black" stroke="black" points="5317.71,-2863.9 5327.81,-2860.72 5317.93,-2856.9 5317.71,-2863.9"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge64" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M3966.86,-2618.98C4015.24,-2432.61 4195.83,-1844.06 4596,-1613.5 4659.05,-1577.17 5683.51,-1580.07 6065.71,-1582.44"/>
<polygon fill="black" stroke="black" points="6065.71,-1585.94 6075.73,-1582.5 6065.75,-1578.94 6065.71,-1585.94"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge65" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M3971.05,-2618.97C4029.17,-2444.14 4229.37,-1916.61 4596,-1680.5 4601.73,-1676.81 4607.7,-1673.44 4613.84,-1670.36"/>
<polygon fill="black" stroke="black" points="4615.41,-1673.49 4622.97,-1666.06 4612.43,-1667.16 4615.41,-1673.49"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge66" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4037.5,-2734.09C4156.18,-2811.46 4381.78,-2945.89 4596,-3003.5 4786.49,-3054.73 5011.46,-3062.69 5174.15,-3059.6"/>
<polygon fill="black" stroke="black" points="5174.36,-3063.1 5184.28,-3059.39 5174.21,-3056.1 5174.36,-3063.1"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge67" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4375.71,-2734.04C4449.05,-2742.42 4524.65,-2750.04 4596,-2755.5 5020.14,-2787.93 5508.6,-2799.13 5835.65,-2802.87"/>
<polygon fill="black" stroke="black" points="5835.73,-2806.37 5845.77,-2802.98 5835.81,-2799.37 5835.73,-2806.37"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge68" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4007.79,-2734.34C4175.8,-2911.74 4680.23,-3444.33 4809.2,-3580.51"/>
<polygon fill="black" stroke="black" points="4806.69,-3582.95 4816.11,-3587.81 4811.78,-3578.14 4806.69,-3582.95"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge69" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3802.09,-2734.11C3821.06,-2744.62 3871.04,-2752 3952,-2752 4022.21,-2752 4069.12,-2746.45 4092.71,-2738.12"/>
<polygon fill="black" stroke="black" points="4094.15,-2741.31 4101.91,-2734.11 4091.35,-2734.9 4094.15,-2741.31"/>
</g>
<!-- tg_client._save_media -->
<g id="node71" class="node">
<title>tg_client._save_media</title>
<g id="a_node71"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5081.5,-3125.5 4599.5,-3125.5 4599.5,-3071.5 5081.5,-3071.5 5081.5,-3125.5"/>
<text text-anchor="middle" x="4840.5" y="-3087.9" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge70" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4028.96,-2734.31C4144.7,-2819.31 4375.14,-2976.66 4596,-3057.5 4607.44,-3061.69 4619.33,-3065.45 4631.44,-3068.83"/>
<polygon fill="black" stroke="black" points="4630.64,-3072.23 4641.2,-3071.46 4632.46,-3065.47 4630.64,-3072.23"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge71" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4142.2,-2734.04C4269.36,-2770.56 4441.35,-2815.8 4596,-2842.5 4826.85,-2882.36 4887.64,-2868.89 5121,-2889.5 5243.43,-2900.31 5569.35,-2869.91 5672,-2937.5 5700.23,-2956.09 5679.05,-2987.05 5708,-3004.5 5770.93,-3042.42 6834.28,-3024.63 7181.38,-3017.77"/>
<polygon fill="black" stroke="black" points="7181.51,-3021.27 7191.44,-3017.57 7181.37,-3014.27 7181.51,-3021.27"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge75" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M4848.85,-3125.7C4872.38,-3206.8 4954.25,-3447.24 5121,-3544.5 5538.74,-3788.15 5724.4,-3593.5 6208,-3593.5 6208,-3593.5 6208,-3593.5 7292,-3593.5 7906.63,-3593.5 8644.17,-3605.67 8914.28,-3610.53"/>
<polygon fill="black" stroke="black" points="8914.41,-3614.03 8924.47,-3610.71 8914.53,-3607.03 8914.41,-3614.03"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge76" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4860.12,-3125.59C4907.58,-3196.27 5033,-3393.65 5085,-3578.5 5098.73,-3627.32 5084.33,-3998.47 5121,-4033.5 5235.11,-4142.5 7696.42,-4121.8 8193.1,-4116.5"/>
<polygon fill="black" stroke="black" points="8193.46,-4119.99 8203.43,-4116.39 8193.39,-4113 8193.46,-4119.99"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge74" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M4988.9,-3071.4C5026.08,-3057.33 5061.94,-3035.96 5085,-3003.5 5148.36,-2914.31 5046.05,-2099.2 5121,-2019.5 5165.34,-1972.34 5239.4,-1967.46 5299.42,-1973.35"/>
<polygon fill="black" stroke="black" points="5299.36,-1976.87 5309.69,-1974.48 5300.13,-1969.91 5299.36,-1976.87"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node73" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node73"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6326.5,-2931.5 6091.5,-2931.5 6091.5,-2895.5 6326.5,-2895.5 6326.5,-2931.5"/>
<text text-anchor="middle" x="6209" y="-2909.46" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge77" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5081.53,-3123.64C5294.01,-3140.47 5583.71,-3148.43 5672,-3078.5 5721.69,-3039.15 5658.9,-2980.59 5708,-2940.5 5763.07,-2895.53 5951.89,-2897 6081.06,-2903.93"/>
<polygon fill="black" stroke="black" points="6081.24,-2907.45 6091.42,-2904.5 6081.63,-2900.46 6081.24,-2907.45"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge259" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6326.61,-2912.42C6532.41,-2910.51 6958.1,-2906.57 7167.81,-2904.63"/>
<polygon fill="black" stroke="black" points="7167.97,-2908.13 7177.94,-2904.54 7167.91,-2901.13 7167.97,-2908.13"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node74" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node74"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3308,-1689.5 2903,-1689.5 2903,-1647.5 3308,-1647.5 3308,-1689.5"/>
<text text-anchor="middle" x="3105.5" y="-1660.41" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge78" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3124.14,-1689.55C3224.76,-1809.66 3727.67,-2409.93 3896,-2610.85"/>
<polygon fill="black" stroke="black" points="3893.46,-2613.27 3902.57,-2618.69 3898.83,-2608.78 3893.46,-2613.27"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node75" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node75"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7576,-3875.5 7006,-3875.5 7006,-3831.5 7576,-3831.5 7576,-3875.5"/>
<text text-anchor="middle" x="7291" y="-3845.18" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge81" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7576.15,-3864.31C7672.37,-3852.54 7771.66,-3820.5 7836,-3746.5 7931.65,-3636.5 7772.05,-3197.61 7872,-3091.5 7904.05,-3057.47 7946.45,-3037.79 7991.79,-3027.34"/>
<polygon fill="black" stroke="black" points="7992.77,-3030.71 8001.81,-3025.18 7991.3,-3023.86 7992.77,-3030.71"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge79" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7576.18,-3858.26C7663.53,-3849.77 7757.31,-3829.93 7836,-3788.5 7857.46,-3777.2 7850.18,-3758.08 7872,-3747.5 8035.8,-3668.1 8535.66,-3801 8690,-3704.5 8718,-3686.99 8698.35,-3657.55 8726,-3639.5 8780.88,-3603.68 8854.27,-3596.9 8914,-3599.1"/>
<polygon fill="black" stroke="black" points="8914.07,-3602.6 8924.22,-3599.56 8914.39,-3595.61 8914.07,-3602.6"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge80" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7488.35,-3875.5C7600.55,-3886.97 7743.99,-3899.77 7872,-3905.5 8235.19,-3921.75 8326.53,-3913.21 8690,-3905.5 8766.05,-3903.89 8851.89,-3900.19 8916.96,-3897"/>
<polygon fill="black" stroke="black" points="8917.4,-3900.48 8927.22,-3896.49 8917.06,-3893.49 8917.4,-3900.48"/>
</g>
<!-- tg_client._download_messages -->
<g id="node77" class="node">
<title>tg_client._download_messages</title>
<g id="a_node77"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2855.5,-1574 2145.5,-1574 2145.5,-1517 2855.5,-1517 2855.5,-1574"/>
<text text-anchor="middle" x="2500.5" y="-1534.16" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge82" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2848.68,-1574.06C2854.89,-1576.7 2861.01,-1579.51 2867,-1582.5 2888.1,-1593.04 2882.61,-1609.63 2903,-1621.5 2919.13,-1630.89 2937,-1638.4 2955.26,-1644.42"/>
<polygon fill="black" stroke="black" points="2954.24,-1647.77 2964.83,-1647.43 2956.34,-1641.09 2954.24,-1647.77"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node78" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node78"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2671.5,-505.5 2329.5,-505.5 2329.5,-469.5 2671.5,-469.5 2671.5,-505.5"/>
<text text-anchor="middle" x="2500.5" y="-481.8" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node79" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node79"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2867,-1657 2134,-1657 2134,-1592 2867,-1592 2867,-1657"/>
<text text-anchor="middle" x="2500.5" y="-1611.45" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge86" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2513.07,-1657.14C2593.89,-1878.73 3096,-3153.5 3951,-3153.5 3951,-3153.5 3951,-3153.5 5397.5,-3153.5 5980.89,-3153.5 6126.98,-3155.42 6710,-3134.5 7157.88,-3118.43 7676.92,-3085.96 7991.7,-3064.73"/>
<polygon fill="black" stroke="black" points="7992.14,-3068.21 8001.88,-3064.05 7991.67,-3061.23 7992.14,-3068.21"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge88" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2846.93,-1591.85C2853.75,-1588.94 2860.45,-1585.83 2867,-1582.5 2888.03,-1571.82 2881.67,-1553.58 2903,-1543.5 3584.4,-1221.38 3843.07,-1479.72 4596,-1445.5 5315.43,-1412.8 7122.73,-1275 7836,-1374.5 8226.84,-1429.02 8441.03,-1311.33 8690,-1617.5 8760.28,-1703.93 8656.71,-2030.27 8726,-2117.5 8764.48,-2165.95 8828.31,-2189.19 8886.67,-2200.11"/>
<polygon fill="black" stroke="black" points="8886.29,-2203.59 8896.74,-2201.88 8887.5,-2196.7 8886.29,-2203.59"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge89" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2501.19,-1657.28C2500.85,-1844.9 2518.81,-2796.17 2903,-3423.5 3035.88,-3640.47 3125.57,-3658.04 3344,-3788.5 3859.55,-4096.43 4016.4,-4139.45 4596,-4296.5 4823.56,-4358.16 4887.45,-4340.28 5121,-4372.5 5381.65,-4408.46 5446.25,-4422.65 5708,-4449.5 5943.36,-4473.65 7617.41,-4617.04 7836,-4526.5 7856.91,-4517.84 7851.17,-4499.33 7872,-4490.5 7966.51,-4450.43 8652.26,-4462.55 8916.54,-4468.81"/>
<polygon fill="black" stroke="black" points="8916.82,-4472.31 8926.9,-4469.05 8916.99,-4465.32 8916.82,-4472.31"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge87" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2826.73,-1591.94C2840.39,-1589.06 2853.86,-1585.92 2867,-1582.5 2883.77,-1578.13 2886.05,-1571.13 2903,-1567.5 3094.72,-1526.44 3147.98,-1560.13 3344,-1555.5 4855.88,-1519.82 5233.77,-1502.61 6746,-1487.5 7230.42,-1482.66 7358.53,-1405.57 7836,-1487.5 7986.8,-1513.38 8154.4,-1585.32 8233.64,-1622.15"/>
<polygon fill="black" stroke="black" points="8232.32,-1625.4 8242.86,-1626.46 8235.29,-1619.06 8232.32,-1625.4"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge83" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2867.04,-1606.31C2905.6,-1604.4 2942.68,-1602.55 2975.62,-1600.91"/>
<polygon fill="black" stroke="black" points="2975.9,-1604.4 2985.71,-1600.41 2975.55,-1597.41 2975.9,-1604.4"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge84" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2867.04,-1651.17C2875.66,-1651.8 2884.2,-1652.43 2892.64,-1653.04"/>
<polygon fill="black" stroke="black" points="2892.65,-1656.55 2902.88,-1653.79 2893.16,-1649.57 2892.65,-1656.55"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge85" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2501.64,-1657.16C2503.95,-1830.54 2534.62,-2654.63 2903,-3167.5 3227.76,-3619.64 3394.31,-3853.5 3951,-3853.5 3951,-3853.5 3951,-3853.5 5397.5,-3853.5 5963.01,-3853.5 6623.58,-3853.5 6995.74,-3853.5"/>
<polygon fill="black" stroke="black" points="6995.85,-3857 7005.85,-3853.5 6995.85,-3850 6995.85,-3857"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node80" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node80"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-1433.5 1019,-1433.5 1019,-1359.5 1732,-1359.5 1732,-1433.5"/>
<text text-anchor="middle" x="1375.5" y="-1381.68" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge96" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1732.01,-1371.32C1744.15,-1370.67 1756.18,-1370.06 1768,-1369.5 2092.86,-1354.09 2174.28,-1350.5 2499.5,-1350.5 2499.5,-1350.5 2499.5,-1350.5 3953,-1350.5 4060.87,-1350.5 7749.17,-1338.49 7836,-1402.5 7877.74,-1433.28 7835.27,-1476.88 7872,-1513.5 7958.7,-1599.95 8102.56,-1629.39 8194.24,-1639.39"/>
<polygon fill="black" stroke="black" points="8194.02,-1642.88 8204.33,-1640.43 8194.74,-1635.92 8194.02,-1642.88"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge90" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1717.66,-1359.28C1722.54,-1356.51 1727.32,-1353.58 1732,-1350.5 1758.28,-1333.16 1741.1,-1305.85 1768,-1289.5 2046.24,-1120.39 2173.9,-1249.5 2499.5,-1249.5 2499.5,-1249.5 2499.5,-1249.5 5397.5,-1249.5 5689.27,-1249.5 6444.31,-1335.07 6710,-1214.5 6731.48,-1204.75 6724.65,-1185.53 6746,-1175.5 6869.6,-1117.42 7026.83,-1115.63 7140.44,-1125.11"/>
<polygon fill="black" stroke="black" points="7140.34,-1128.61 7150.6,-1126 7140.95,-1121.64 7140.34,-1128.61"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge91" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1720.62,-1359.37C1724.51,-1356.55 1728.31,-1353.6 1732,-1350.5 1773.03,-1316.08 1749.24,-1285.66 1768,-1235.5 1817.62,-1102.79 1889.44,-949.31 1918.77,-887.93"/>
<polygon fill="black" stroke="black" points="1922.1,-889.08 1923.26,-878.55 1915.79,-886.06 1922.1,-889.08"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge92" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1732.01,-1421.68C1744.15,-1422.33 1756.18,-1422.94 1768,-1423.5 1981.3,-1433.62 2229.86,-1438.64 2375.42,-1440.9"/>
<polygon fill="black" stroke="black" points="2375.67,-1444.4 2385.72,-1441.06 2375.78,-1437.4 2375.67,-1444.4"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge93" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1693.67,-1359.44C1706.67,-1356.67 1719.49,-1353.69 1732,-1350.5 1748.63,-1346.26 1751.17,-1339.87 1768,-1336.5 2195.63,-1250.97 2715.51,-1273.75 2961.86,-1291.93"/>
<polygon fill="black" stroke="black" points="2961.71,-1295.43 2971.94,-1292.68 2962.23,-1288.45 2961.71,-1295.43"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge94" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1732.24,-1396.5C1753.08,-1396.5 1773.28,-1396.5 1792.33,-1396.5"/>
<polygon fill="black" stroke="black" points="1792.48,-1400 1802.48,-1396.5 1792.48,-1393 1792.48,-1400"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge95" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1655.54,-1433.52C1846.48,-1458.86 2096.35,-1492.01 2274.55,-1515.65"/>
<polygon fill="black" stroke="black" points="2274.21,-1519.14 2284.58,-1516.98 2275.13,-1512.2 2274.21,-1519.14"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node81" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node81"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7607.5,-3683 6974.5,-3683 6974.5,-3622 7607.5,-3622 7607.5,-3683"/>
<text text-anchor="middle" x="7291" y="-3640.25" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge99" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7607.63,-3649.01C7693.4,-3632.07 7778.4,-3597.61 7836,-3531.5 7900.45,-3457.54 7803.79,-3162.01 7872,-3091.5 7904.33,-3058.08 7946.67,-3038.64 7991.81,-3028.22"/>
<polygon fill="black" stroke="black" points="7992.76,-3031.6 8001.79,-3026.07 7991.28,-3024.76 7992.76,-3031.6"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge100" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7607.79,-3631.89C7695.05,-3609.98 7780.83,-3569.99 7836,-3498.5 7898.03,-3418.13 7801.9,-1744.93 7872,-1671.5 7957.96,-1581.46 8117.6,-1602.1 8209.64,-1624.05"/>
<polygon fill="black" stroke="black" points="8208.88,-1627.46 8219.43,-1626.44 8210.55,-1620.66 8208.88,-1627.46"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge97" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7607.69,-3645.19C8002.92,-3636.04 8659.04,-3620.86 8914.06,-3614.95"/>
<polygon fill="black" stroke="black" points="8914.52,-3618.44 8924.43,-3614.71 8914.36,-3611.44 8914.52,-3618.44"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge98" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7421.86,-3622C7543.85,-3601.62 7723.93,-3594.08 7836,-3692.5 7895.66,-3744.9 7810.98,-3816.69 7872,-3867.5 7911.77,-3900.62 8642.71,-3895.8 8917.09,-3892.8"/>
<polygon fill="black" stroke="black" points="8917.48,-3896.29 8927.44,-3892.68 8917.41,-3889.29 8917.48,-3896.29"/>
</g>
<!-- tg_client.main -->
<g id="node82" class="node">
<title>tg_client.main</title>
<g id="a_node82"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-1591.5 366.5,-1591.5 366.5,-1499.5 934.5,-1499.5 934.5,-1591.5"/>
<text text-anchor="middle" x="650.5" y="-1526.46" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge101" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M934.65,-1537.17C1232.97,-1528.65 1716.5,-1515.55 2134,-1507.5 3149.27,-1487.92 4379.06,-1476.45 4737.14,-1473.36"/>
<polygon fill="black" stroke="black" points="4737.26,-1476.86 4747.23,-1473.27 4737.2,-1469.86 4737.26,-1476.86"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge102" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M717.97,-1499.31C788.93,-1452.7 906.43,-1383.09 1019,-1350.5 1093.8,-1328.84 1180.94,-1321.95 1250.23,-1320.54"/>
<polygon fill="black" stroke="black" points="1250.38,-1324.04 1260.32,-1320.37 1250.26,-1317.04 1250.38,-1324.04"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge103" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M651.78,-1591.87C654.57,-1894.27 685.11,-3584.31 1019,-3943.5 1302.42,-4248.39 1515.73,-4152.5 1932,-4152.5 1932,-4152.5 1932,-4152.5 2501.5,-4152.5 3008.53,-4152.5 3607.44,-4264.67 3845.66,-4313.85"/>
<polygon fill="black" stroke="black" points="3845.2,-4317.33 3855.7,-4315.93 3846.62,-4310.47 3845.2,-4317.33"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge104" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M934.73,-1581.76C963.18,-1584.93 991.64,-1587.91 1019,-1590.5 1513.46,-1637.37 1637.63,-1648.06 2134,-1665.5 2395.09,-1674.68 2695.93,-1673.84 2892.59,-1671.75"/>
<polygon fill="black" stroke="black" points="2892.79,-1675.25 2902.75,-1671.64 2892.72,-1668.25 2892.79,-1675.25"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge105" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M697.67,-1499.41C869.12,-1331.61 1492.54,-751.01 2134,-519.5 2192.17,-498.5 2258.8,-488.83 2319.09,-484.91"/>
<polygon fill="black" stroke="black" points="2319.33,-488.41 2329.1,-484.31 2318.91,-481.42 2319.33,-488.41"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge106" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M934.69,-1557.61C1253.14,-1571.22 1771.66,-1593.39 2123.78,-1608.44"/>
<polygon fill="black" stroke="black" points="2123.75,-1611.94 2133.89,-1608.87 2124.05,-1604.95 2123.75,-1611.94"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge107" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M874.82,-1499.48C974.07,-1479.02 1089.69,-1455.19 1184.7,-1435.61"/>
<polygon fill="black" stroke="black" points="1185.62,-1439 1194.71,-1433.55 1184.21,-1432.14 1185.62,-1439"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge108" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M653.68,-1591.52C672,-1922.72 828.52,-3929.5 1932,-3929.5 1932,-3929.5 1932,-3929.5 2501.5,-3929.5 3375.12,-3929.5 6033.47,-3743.42 6964.07,-3676.29"/>
<polygon fill="black" stroke="black" points="6964.54,-3679.76 6974.26,-3675.55 6964.04,-3672.78 6964.54,-3679.76"/>
</g>
<!-- config_utils.load_config -->
<g id="node84" class="node">
<title>config_utils.load_config</title>
<g id="a_node84"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="9785,-3569 9352,-3569 9352,-3522 9785,-3522 9785,-3569"/>
<text text-anchor="middle" x="9568.5" y="-3537" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge109" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9130.26,-3663.44C9186.27,-3660.13 9255.41,-3653.34 9316,-3639.5 9383.45,-3624.09 9457.24,-3594.95 9507.33,-3573.18"/>
<polygon fill="black" stroke="black" points="9508.96,-3576.29 9516.71,-3569.07 9506.15,-3569.87 9508.96,-3576.29"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge261" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9091.1,-3115.4C9158.39,-3126.37 9258.64,-3129.97 9316,-3071.5 9353.06,-3033.71 9345.72,-2649.06 9352,-2596.5 9414.23,-2075.39 9534.89,-1445.4 9562,-1306.47"/>
<polygon fill="black" stroke="black" points="9565.44,-1307.11 9563.93,-1296.62 9558.57,-1305.76 9565.44,-1307.11"/>
</g>
<!-- telegram_bot._t -->
<g id="node86" class="node">
<title>telegram_bot._t</title>
<g id="a_node86"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5500.5,-121.5 5292.5,-121.5 5292.5,-85.5 5500.5,-85.5 5500.5,-121.5"/>
<text text-anchor="middle" x="5396.5" y="-97.62" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node87" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node87"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5547.5,-67.5 5245.5,-67.5 5245.5,-31.5 5547.5,-31.5 5547.5,-67.5"/>
<text text-anchor="middle" x="5396.5" y="-44.71" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node88" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node88"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6313,-67.5 6105,-67.5 6105,-31.5 6313,-31.5 6313,-67.5"/>
<text text-anchor="middle" x="6209" y="-45.8" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge121" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5547.58,-49.5C5705.88,-49.5 5951.77,-49.5 6094.61,-49.5"/>
<polygon fill="black" stroke="black" points="6094.72,-53 6104.72,-49.5 6094.72,-46 6094.72,-53"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node89" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node89"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5547.5,-323.5 5245.5,-323.5 5245.5,-287.5 5547.5,-287.5 5547.5,-323.5"/>
<text text-anchor="middle" x="5396.5" y="-300.2" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge122" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5469.7,-287.42C5529.84,-269.29 5614.63,-236.22 5672,-182.5 5696.96,-159.13 5678.81,-132.31 5708,-114.5 5783.03,-68.71 7202.1,-95.5 7290,-95.5 7290,-95.5 7290,-95.5 8282,-95.5 8748.54,-95.5 8979.88,47.05 9316,-276.5 9463.33,-418.32 9547.75,-1102.58 9564.43,-1250.33"/>
<polygon fill="black" stroke="black" points="9560.96,-1250.85 9565.55,-1260.4 9567.92,-1250.08 9560.96,-1250.85"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node90" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node90"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="5540,-505.5 5253,-505.5 5253,-469.5 5540,-469.5 5540,-505.5"/>
<text text-anchor="middle" x="5396.5" y="-481.8" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge123" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5540.24,-488.01C5855.76,-489.08 6636.37,-491.5 7290,-491.5 7290,-491.5 7290,-491.5 8282,-491.5 8511.84,-491.5 9131.34,-378.65 9316,-515.5 9441.62,-608.6 9540.12,-1123.91 9562.64,-1250.44"/>
<polygon fill="black" stroke="black" points="9559.23,-1251.25 9564.42,-1260.49 9566.12,-1250.04 9559.23,-1251.25"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node91" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6293,-1205.5 6125,-1205.5 6125,-1169.5 6293,-1169.5 6293,-1205.5"/>
<text text-anchor="middle" x="6209" y="-1184.26" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node92" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node92"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7437,-1031.5 7145,-1031.5 7145,-995.5 7437,-995.5 7437,-1031.5"/>
<text text-anchor="middle" x="7291" y="-1009.34" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge124" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7437.25,-1015.85C7588.68,-1018.3 7829.33,-1022.2 8014.77,-1025.2"/>
<polygon fill="black" stroke="black" points="8014.9,-1028.71 8024.95,-1025.37 8015.01,-1021.71 8014.9,-1028.71"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node93" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6370.5,-444.5 6047.5,-444.5 6047.5,-408.5 6370.5,-408.5 6370.5,-444.5"/>
<text text-anchor="middle" x="6209" y="-421.71" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge125" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6370.52,-429.32C6586.82,-433.13 6967.37,-439.82 7164.19,-443.29"/>
<polygon fill="black" stroke="black" points="7164.23,-446.79 7174.29,-443.46 7164.35,-439.79 7164.23,-446.79"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node94" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5635,-381.5 5158,-381.5 5158,-341.5 5635,-341.5 5635,-381.5"/>
<text text-anchor="middle" x="5396.5" y="-354.43" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge126" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5635.22,-357.61C5648.58,-351.11 5661.02,-342.86 5672,-332.5 5743.44,-265.12 5637.38,-182.73 5708,-114.5 5811.58,-14.42 5988.55,-16.14 6101.79,-30.14"/>
<polygon fill="black" stroke="black" points="6101.5,-33.63 6111.87,-31.44 6102.4,-26.69 6101.5,-33.63"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge127" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5635.2,-380.56C5764.1,-390.9 5920.45,-403.44 6037.21,-412.8"/>
<polygon fill="black" stroke="black" points="6037.07,-416.3 6047.32,-413.61 6037.63,-409.33 6037.07,-416.3"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node95" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node95"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5672,-451.5 5121,-451.5 5121,-399.5 5672,-399.5 5672,-451.5"/>
<text text-anchor="middle" x="5396.5" y="-415.8" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge128" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5662.18,-399.38C5665.58,-396.59 5668.85,-393.64 5672,-390.5 5759.6,-303.15 5620.51,-201.95 5708,-114.5 5811.22,-11.33 5992.05,-14.97 6105.64,-30.06"/>
<polygon fill="black" stroke="black" points="6105.35,-33.55 6115.73,-31.45 6106.31,-26.62 6105.35,-33.55"/>
</g>
<!-- lot_io.get_lot -->
<g id="node96" class="node">
<title>lot_io.get_lot</title>
<g id="a_node96"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7363.5,-2595.5 7218.5,-2595.5 7218.5,-2559.5 7363.5,-2559.5 7363.5,-2595.5"/>
<text text-anchor="middle" x="7291" y="-2572.71" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge129" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5663.2,-451.63C5666.26,-454.42 5669.19,-457.37 5672,-460.5 5741.97,-538.44 5640.32,-2265.56 5708,-2345.5 5903.33,-2576.2 6911.32,-2582.28 7207.85,-2578.96"/>
<polygon fill="black" stroke="black" points="7208.14,-2582.45 7218.1,-2578.83 7208.06,-2575.45 7208.14,-2582.45"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge176" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7363.7,-2574.16C7474.37,-2572.47 7689.34,-2583.37 7836,-2680.5 7860.05,-2696.43 7847.03,-2720.06 7872,-2734.5 7960.37,-2785.62 8078.2,-2787.82 8164.51,-2779.94"/>
<polygon fill="black" stroke="black" points="8165,-2783.41 8174.61,-2778.96 8164.32,-2776.44 8165,-2783.41"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge177" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7363.7,-2578.09C7569.92,-2579.46 8182.29,-2581.16 8690,-2558.5 8754.43,-2555.62 8825.81,-2550.46 8885.65,-2545.57"/>
<polygon fill="black" stroke="black" points="8886.24,-2549.04 8895.92,-2544.73 8885.67,-2542.06 8886.24,-2549.04"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node97" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node97"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5005.5,-354.5 4675.5,-354.5 4675.5,-318.5 5005.5,-318.5 5005.5,-354.5"/>
<text text-anchor="middle" x="4840.5" y="-330.34" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge130" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5005.84,-327.3C5078.36,-323.25 5163.29,-318.49 5235.31,-314.46"/>
<polygon fill="black" stroke="black" points="5235.6,-317.95 5245.39,-313.9 5235.21,-310.96 5235.6,-317.95"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node98" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node98"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="4952.5,-95.5 4728.5,-95.5 4728.5,-59.5 4952.5,-59.5 4952.5,-95.5"/>
<text text-anchor="middle" x="4840.5" y="-73.34" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge131" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4952.61,-82.71C5048.25,-87.2 5185.66,-93.65 5281.99,-98.17"/>
<polygon fill="black" stroke="black" points="5281.91,-101.67 5292.06,-98.65 5282.24,-94.68 5281.91,-101.67"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge132" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4952.61,-71.88C5033.67,-67.79 5144.74,-62.17 5235.37,-57.59"/>
<polygon fill="black" stroke="black" points="5235.66,-61.08 5245.47,-57.08 5235.31,-54.09 5235.66,-61.08"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node99" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node99"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5015,-153 4666,-153 4666,-114 5015,-114 5015,-153"/>
<text text-anchor="middle" x="4840.5" y="-126.6" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge133" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5015.27,-124.09C5102.28,-119.38 5205.14,-113.81 5281.92,-109.65"/>
<polygon fill="black" stroke="black" points="5282.31,-113.13 5292.11,-109.1 5281.93,-106.14 5282.31,-113.13"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge134" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5015.09,-124.58C5039.11,-119.99 5063.05,-113.52 5085,-104.5 5103.75,-96.8 5102.17,-84.01 5121,-76.5 5156.52,-62.33 5196.6,-54.37 5234.92,-50.13"/>
<polygon fill="black" stroke="black" points="5235.56,-53.59 5245.15,-49.08 5234.85,-46.62 5235.56,-53.59"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge135" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4910.89,-153.03C5059.88,-190.93 5417.52,-259.89 5672,-130.5 5696.09,-118.25 5684.29,-94.47 5708,-81.5 5827.58,-16.09 5988.1,-18.77 6094.64,-30.68"/>
<polygon fill="black" stroke="black" points="6094.44,-34.18 6104.78,-31.86 6095.25,-27.23 6094.44,-34.18"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node100" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node100"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5055.5,-41 4625.5,-41 4625.5,0 5055.5,0 5055.5,-41"/>
<text text-anchor="middle" x="4840.5" y="-13.26" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge136" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5055.54,-40.56C5065.61,-43.47 5075.48,-46.76 5085,-50.5 5103.37,-57.71 5102.54,-69.51 5121,-76.5 5171.8,-95.73 5231.48,-103.21 5282.2,-105.59"/>
<polygon fill="black" stroke="black" points="5282.08,-109.09 5292.21,-106 5282.36,-102.1 5282.08,-109.09"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge137" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5055.69,-31.71C5115.44,-34.84 5179.3,-38.18 5235.34,-41.12"/>
<polygon fill="black" stroke="black" points="5235.18,-44.61 5245.35,-41.64 5235.55,-37.62 5235.18,-44.61"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge138" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5055.77,-18.2C5223.5,-17.08 5462.64,-16.98 5672,-22.5 5817.95,-26.35 5986.04,-35.6 6094.5,-42.2"/>
<polygon fill="black" stroke="black" points="6094.61,-45.71 6104.8,-42.83 6095.03,-38.73 6094.61,-45.71"/>
</g>
<!-- telegram_bot.main -->
<g id="node101" class="node">
<title>telegram_bot.main</title>
<g id="a_node101"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5006,-447.5 4675,-447.5 4675,-403.5 5006,-403.5 5006,-447.5"/>
<text text-anchor="middle" x="4840.5" y="-417.18" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge139" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4974.16,-403.43C5011.31,-394.17 5050.86,-381.28 5085,-363.5 5103.73,-353.75 5101.59,-340.81 5121,-332.5 5156.36,-317.36 5196.55,-309.07 5235.07,-304.81"/>
<polygon fill="black" stroke="black" points="5235.75,-308.26 5245.35,-303.76 5235.04,-301.29 5235.75,-308.26"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge140" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5006.2,-446.86C5043.9,-451.55 5083.82,-456.34 5121,-460.5 5160.48,-464.91 5203.21,-469.3 5242.93,-473.22"/>
<polygon fill="black" stroke="black" points="5242.66,-476.71 5252.95,-474.2 5243.34,-469.74 5242.66,-476.71"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge141" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M4867.17,-447.58C4918.43,-493.35 5033.04,-604.38 5085,-724.5 5132.89,-835.21 5041.71,-902.6 5121,-993.5 5374.51,-1284.13 5900.88,-1237.78 6114.69,-1204.6"/>
<polygon fill="black" stroke="black" points="6115.3,-1208.05 6124.63,-1203.03 6114.21,-1201.14 6115.3,-1208.05"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge142" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4862.06,-447.57C4906.16,-495.57 5011.79,-614 5085,-724.5 5103.89,-753.01 5094.07,-771.43 5121,-792.5 5332.75,-958.14 5442.01,-899.5 5708,-938.5 5980.01,-978.38 6792.32,-1001.72 7134.89,-1010.03"/>
<polygon fill="black" stroke="black" points="7134.81,-1013.52 7144.89,-1010.27 7134.98,-1006.53 7134.81,-1013.52"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge143" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5006.23,-404.34C5043.92,-399.64 5083.84,-394.79 5121,-390.5 5143.81,-387.87 5167.69,-385.2 5191.45,-382.62"/>
<polygon fill="black" stroke="black" points="5192.06,-386.07 5201.62,-381.51 5191.3,-379.11 5192.06,-386.07"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge144" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5006.22,-425.5C5039.31,-425.5 5074.97,-425.5 5110.81,-425.5"/>
<polygon fill="black" stroke="black" points="5110.92,-429 5120.92,-425.5 5110.92,-422 5110.92,-429"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node102" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node102"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="7405,-4349.5 7177,-4349.5 7177,-4313.5 7405,-4313.5 7405,-4349.5"/>
<text text-anchor="middle" x="7291" y="-4326.2" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node103" class="node">
<title>chop.process_message</title>
<g id="a_node103"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6710,-4320.5 5708,-4320.5 5708,-4218.5 6710,-4218.5 6710,-4320.5"/>
<text text-anchor="middle" x="6209" y="-4248.18" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge145" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6605.73,-4320.51C6641.2,-4327.59 6676.39,-4335.56 6710,-4344.5 6726.59,-4348.91 6729.13,-4355.33 6746,-4358.5 6865.03,-4380.83 7731.25,-4419.29 7836,-4358.5 7863.89,-4342.31 7845.71,-4314.18 7872,-4295.5 7943.81,-4244.46 8040.1,-4224.84 8121.1,-4218.27"/>
<polygon fill="black" stroke="black" points="8121.69,-4221.73 8131.4,-4217.49 8121.17,-4214.75 8121.69,-4221.73"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge148" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6387.67,-4218.48C6491.99,-4181.15 6620.5,-4121.48 6710,-4033.5 6735.8,-4008.14 6715.66,-3980.2 6746,-3960.5 6847.65,-3894.48 7748.33,-4001.2 7836,-3917.5 7903.59,-3852.96 7805.27,-3563.93 7872,-3498.5 7905.01,-3466.13 8010.07,-3459.71 8105.31,-3461.21"/>
<polygon fill="black" stroke="black" points="8105.31,-3464.72 8115.38,-3461.4 8105.44,-3457.72 8105.31,-3464.72"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge152" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6433.83,-4218.44C6534.76,-4183.54 6645.55,-4126.2 6710,-4033.5 6763.6,-3956.41 6680.24,-3679.52 6746,-3612.5 6916.58,-3438.67 7665.17,-3672.08 7836,-3498.5 7899.69,-3433.79 7808.65,-3156.55 7872,-3091.5 7904.44,-3058.19 7946.83,-3038.8 7992,-3028.4"/>
<polygon fill="black" stroke="black" points="7992.94,-3031.78 8001.98,-3026.25 7991.47,-3024.93 7992.94,-3031.78"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge147" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6710.31,-4241.06C7032.06,-4221.58 7458.96,-4193.54 7836,-4161.5 7960.35,-4150.93 8103.96,-4135.46 8193.38,-4125.43"/>
<polygon fill="black" stroke="black" points="8193.93,-4128.89 8203.48,-4124.3 8193.15,-4121.93 8193.93,-4128.89"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge146" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6423.48,-4218.46C6525.42,-4183.19 6640.13,-4125.53 6710,-4033.5 6767.53,-3957.73 6675.47,-3886.34 6746,-3822.5 6926.01,-3659.55 7665.15,-3919.03 7836,-3746.5 7930.14,-3651.43 7777.69,-3240.4 7872,-3145.5 7904.47,-3112.83 8008.88,-3106.34 8103.94,-3107.89"/>
<polygon fill="black" stroke="black" points="8103.93,-3111.39 8113.99,-3108.08 8104.06,-3104.39 8103.93,-3111.39"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge149" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6710.35,-4302.42C6722.35,-4303.13 6734.25,-4303.82 6746,-4304.5 6890.42,-4312.8 7056.49,-4320.82 7166.76,-4325.93"/>
<polygon fill="black" stroke="black" points="7166.78,-4329.44 7176.93,-4326.4 7167.1,-4322.44 7166.78,-4329.44"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node104" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node104"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="8383,-4761.5 8179,-4761.5 8179,-4725.5 8383,-4725.5 8383,-4761.5"/>
<text text-anchor="middle" x="8281" y="-4737.62" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge150" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6608.81,-4320.61C6647,-4339.19 6681.89,-4363.6 6710,-4395.5 6797.9,-4495.26 6647.96,-4602.68 6746,-4692.5 6772.2,-4716.51 7820.62,-4735.93 8168.86,-4741.73"/>
<polygon fill="black" stroke="black" points="8168.9,-4745.23 8178.95,-4741.89 8169.01,-4738.23 8168.9,-4745.23"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node105" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node105"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8370.5,-3190.5 8191.5,-3190.5 8191.5,-3154.5 8370.5,-3154.5 8370.5,-3190.5"/>
<text text-anchor="middle" x="8281" y="-3168.46" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge151" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6407.27,-4218.4C6510.49,-4182.35 6631.38,-4123.98 6710,-4033.5 6745.41,-3992.75 6703.03,-3950.17 6746,-3917.5 6842.45,-3844.16 7749.36,-3969.2 7836,-3884.5 7890.1,-3831.61 7819.18,-3258.68 7872,-3204.5 7913.38,-3162.05 8074.17,-3161.35 8181.11,-3166"/>
<polygon fill="black" stroke="black" points="8181.14,-3169.5 8191.29,-3166.47 8181.46,-3162.51 8181.14,-3169.5"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node106" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node106"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="9139,-4845.5 8903,-4845.5 8903,-4809.5 9139,-4809.5 9139,-4845.5"/>
<text text-anchor="middle" x="9021" y="-4823.46" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge153" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6609.81,-4320.55C6647.69,-4339.16 6682.24,-4363.59 6710,-4395.5 6758.71,-4451.49 6691.87,-4676.73 6746,-4727.5 6824.71,-4801.32 8424.93,-4821.97 8892.66,-4826.44"/>
<polygon fill="black" stroke="black" points="8892.8,-4829.94 8902.83,-4826.54 8892.86,-4822.94 8892.8,-4829.94"/>
</g>
<!-- embed.embed_file -->
<g id="node107" class="node">
<title>embed.embed_file</title>
<g id="a_node107"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7496,-4629 7086,-4629 7086,-4574 7496,-4574 7496,-4629"/>
<text text-anchor="middle" x="7291" y="-4590.95" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge154" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6594.37,-4320.52C6637.13,-4338.88 6677.05,-4363.25 6710,-4395.5 6753.15,-4437.74 6700.6,-4486.69 6746,-4526.5 6834.72,-4604.28 6964.8,-4624.39 7075.52,-4624.4"/>
<polygon fill="black" stroke="black" points="7075.85,-4627.9 7085.83,-4624.35 7075.81,-4620.9 7075.85,-4627.9"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge267" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7496.11,-4604.44C7769.24,-4605.81 8268.15,-4599.32 8690,-4544.5 8778.42,-4533.01 8878.13,-4509.44 8944.59,-4492.18"/>
<polygon fill="black" stroke="black" points="8945.76,-4495.49 8954.55,-4489.58 8943.99,-4488.72 8945.76,-4495.49"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge265" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7451.55,-4629.01C7575.75,-4640.34 7742.28,-4631.5 7836,-4526.5 7892.58,-4463.11 7828.68,-3070.6 7872,-2997.5 7943.29,-2877.2 8101.2,-2812.35 8198.32,-2782.52"/>
<polygon fill="black" stroke="black" points="8199.54,-2785.81 8208.11,-2779.57 8197.52,-2779.11 8199.54,-2785.81"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node119" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node119"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8373.5,-4535.5 8188.5,-4535.5 8188.5,-4499.5 8373.5,-4499.5 8373.5,-4535.5"/>
<text text-anchor="middle" x="8281" y="-4512.72" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge266" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7496.29,-4595.11C7598.84,-4589.53 7724.63,-4579.08 7836,-4559.5 7852.36,-4556.63 7855.65,-4552.38 7872,-4549.5 7975.27,-4531.28 8095.08,-4523.43 8178.03,-4520.05"/>
<polygon fill="black" stroke="black" points="8178.36,-4523.54 8188.22,-4519.65 8178.09,-4516.55 8178.36,-4523.54"/>
</g>
<!-- chop.main -->
<g id="node108" class="node">
<title>chop.main</title>
<g id="a_node108"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5472,-4287.5 5321,-4287.5 5321,-4251.5 5472,-4251.5 5472,-4287.5"/>
<text text-anchor="middle" x="5396.5" y="-4263.34" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge155" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5472.3,-4269.5C5527.86,-4269.5 5609.07,-4269.5 5697.46,-4269.5"/>
<polygon fill="black" stroke="black" points="5697.71,-4273 5707.71,-4269.5 5697.71,-4266 5697.71,-4273"/>
</g>
<!-- clean_data._parse_date -->
<g id="node109" class="node">
<title>clean_data._parse_date</title>
<g id="a_node109"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8420.5,-1716.5 8141.5,-1716.5 8141.5,-1680.5 8420.5,-1680.5 8420.5,-1716.5"/>
<text text-anchor="middle" x="8281" y="-1692.8" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge156" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8374.63,-1716.53C8462.94,-1728.5 8596.02,-1732.4 8690,-1671.5 8718.7,-1652.9 8700.43,-1626.21 8726,-1603.5 8939.36,-1414 9275.31,-1329.61 9451.25,-1296.71"/>
<polygon fill="black" stroke="black" points="9452.11,-1300.11 9461.31,-1294.85 9450.84,-1293.22 9452.11,-1300.11"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node110" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node110"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7444.5,-1720.5 7137.5,-1720.5 7137.5,-1684.5 7444.5,-1684.5 7444.5,-1720.5"/>
<text text-anchor="middle" x="7291" y="-1696.34" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge158" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7444.58,-1697.42C7553.72,-1693.18 7704.04,-1686.1 7836,-1675.5 7852.05,-1674.21 7855.96,-1672.92 7872,-1671.5 7983.15,-1661.65 8111.64,-1653.72 8194.26,-1649.06"/>
<polygon fill="black" stroke="black" points="8194.56,-1652.55 8204.35,-1648.49 8194.17,-1645.56 8194.56,-1652.55"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge157" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7444.75,-1701.88C7631.7,-1701.12 7946.17,-1699.85 8131.27,-1699.1"/>
<polygon fill="black" stroke="black" points="8131.37,-1702.6 8141.35,-1699.06 8131.34,-1695.6 8131.37,-1702.6"/>
</g>
<!-- clean_data._clean_media -->
<g id="node111" class="node">
<title>clean_data._clean_media</title>
<g id="a_node111"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7481,-1908.5 7101,-1908.5 7101,-1868.5 7481,-1868.5 7481,-1908.5"/>
<text text-anchor="middle" x="7291" y="-1881.43" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge159" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7481.27,-1886.37C7619.14,-1889.33 7789.54,-1903.86 7836,-1955.5 7915.26,-2043.61 7790.28,-4002.66 7872,-4088.5 7957.83,-4178.66 8117.52,-4157.97 8209.6,-4135.99"/>
<polygon fill="black" stroke="black" points="8210.52,-4139.37 8219.39,-4133.59 8208.85,-4132.57 8210.52,-4139.37"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge160" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7481.11,-1899.24C7616.1,-1902.81 7782.81,-1897.56 7836,-1854.5 7882.26,-1817.05 7825.8,-1763.04 7872,-1725.5 7910.92,-1693.88 8031.13,-1688.93 8131.06,-1690.85"/>
<polygon fill="black" stroke="black" points="8131.21,-1694.36 8141.29,-1691.08 8131.36,-1687.36 8131.21,-1694.36"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node112" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node112"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7493,-2265.5 7089,-2265.5 7089,-2219.5 7493,-2219.5 7493,-2265.5"/>
<text text-anchor="middle" x="7291" y="-2234.06" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge162" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7493.16,-2227.82C7627.62,-2222.81 7788.3,-2227.71 7836,-2274.5 7909.2,-2346.3 7799.06,-2662.43 7872,-2734.5 7959.7,-2821.15 8116.18,-2802.66 8207.76,-2781.8"/>
<polygon fill="black" stroke="black" points="8208.57,-2785.21 8217.51,-2779.52 8206.97,-2778.39 8208.57,-2785.21"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge163" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7493.35,-2256.95C7627.89,-2261.77 7788.6,-2256.6 7836,-2209.5 7920.99,-2125.04 7787.24,-1756.2 7872,-1671.5 7959.33,-1584.23 8116.3,-1603.08 8207.99,-1624.13"/>
<polygon fill="black" stroke="black" points="8207.21,-1627.54 8217.75,-1626.44 8208.82,-1620.73 8207.21,-1627.54"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge161" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7493.33,-2227.31C7628.12,-2222.03 7789.13,-2226.8 7836,-2274.5 7903.89,-2343.59 7804.36,-3076.17 7872,-3145.5 7913.36,-3187.9 8074.15,-3186.49 8181.1,-3180.38"/>
<polygon fill="black" stroke="black" points="8181.5,-3183.86 8191.28,-3179.77 8181.09,-3176.87 8181.5,-3183.86"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node113" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node113"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7499,-1812.5 7083,-1812.5 7083,-1776.5 7499,-1776.5 7499,-1812.5"/>
<text text-anchor="middle" x="7291" y="-1788.34" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node114" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node114"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8494.5,-1770.5 8067.5,-1770.5 8067.5,-1734.5 8494.5,-1734.5 8494.5,-1770.5"/>
<text text-anchor="middle" x="8281" y="-1746.34" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node115" class="node">
<title>clean_data.main</title>
<g id="a_node115"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6305,-1859.5 6113,-1859.5 6113,-1823.5 6305,-1823.5 6305,-1859.5"/>
<text text-anchor="middle" x="6209" y="-1836.2" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge164" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6283.6,-1823.44C6386.41,-1798.99 6579.18,-1755.95 6746,-1734.5 6873.51,-1718.1 7018.92,-1710.1 7127.31,-1706.19"/>
<polygon fill="black" stroke="black" points="7127.48,-1709.69 7137.35,-1705.84 7127.23,-1702.69 7127.48,-1709.69"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge165" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6305.37,-1845.65C6480.61,-1853.28 6857.21,-1869.67 7090.53,-1879.82"/>
<polygon fill="black" stroke="black" points="7090.69,-1883.33 7100.84,-1880.27 7091,-1876.34 7090.69,-1883.33"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge166" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6228.28,-1859.84C6292.36,-1922.75 6515.43,-2130.24 6746,-2209.5 6851.75,-2245.86 6975.81,-2255.68 7078.73,-2255.71"/>
<polygon fill="black" stroke="black" points="7078.95,-2259.21 7088.94,-2255.69 7078.93,-2252.21 7078.95,-2259.21"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge167" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6305.37,-1837.35C6476.25,-1829.91 6838.59,-1814.14 7072.85,-1803.95"/>
<polygon fill="black" stroke="black" points="7073.03,-1807.45 7082.87,-1803.51 7072.72,-1800.45 7073.03,-1807.45"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge168" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6305.47,-1824.57C6412.36,-1806.5 6590.95,-1778.91 6746,-1767.5 7211.51,-1733.23 7758.6,-1738.85 8057.4,-1745.81"/>
<polygon fill="black" stroke="black" points="8057.4,-1749.31 8067.48,-1746.05 8057.57,-1742.31 8057.4,-1749.31"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node117" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node117"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8440,-4669.5 8122,-4669.5 8122,-4629.5 8440,-4629.5 8440,-4669.5"/>
<text text-anchor="middle" x="8281" y="-4642.43" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node118" class="node">
<title>lot_io.write_lots</title>
<g id="a_node118"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7392.5,-4683.5 7189.5,-4683.5 7189.5,-4647.5 7392.5,-4647.5 7392.5,-4683.5"/>
<text text-anchor="middle" x="7291" y="-4659.91" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge174" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7392.59,-4669.75C7692.39,-4681.94 8566.63,-4713.99 8690,-4678.5 8815.5,-4642.4 8939.42,-4542.99 8992.74,-4496.32"/>
<polygon fill="black" stroke="black" points="8995.21,-4498.81 9000.39,-4489.56 8990.58,-4493.56 8995.21,-4498.81"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge172" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7392.72,-4675.03C7531.96,-4685.86 7773.22,-4695.34 7836,-4638.5 7915.96,-4566.11 7797.09,-4476.1 7872,-4398.5 7947.97,-4319.8 8077.31,-4307.72 8170.01,-4310.91"/>
<polygon fill="black" stroke="black" points="8170.14,-4314.42 8180.28,-4311.33 8170.43,-4307.43 8170.14,-4314.42"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge171" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7392.64,-4672.73C7503.27,-4677.87 7685.31,-4678.04 7836,-4638.5 7853.3,-4633.96 7854.8,-4625.41 7872,-4620.5 8047.54,-4570.37 8545.66,-4656.28 8690,-4544.5 8727.35,-4515.58 8696.22,-4481.16 8726,-4444.5 8789.31,-4366.57 8895.65,-4313.13 8961.6,-4285.49"/>
<polygon fill="black" stroke="black" points="8963.11,-4288.65 8971.02,-4281.6 8960.44,-4282.18 8963.11,-4288.65"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge173" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7392.63,-4663.87C7561.9,-4661.13 7905.3,-4655.57 8111.75,-4652.22"/>
<polygon fill="black" stroke="black" points="8111.84,-4655.72 8121.78,-4652.06 8111.72,-4648.72 8111.84,-4655.72"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node121" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node121"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="6315.5,-3125.5 6102.5,-3125.5 6102.5,-3089.5 6315.5,-3089.5 6315.5,-3125.5"/>
<text text-anchor="middle" x="6209" y="-3103.34" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node122" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node122"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8409.5,-2190 8152.5,-2190 8152.5,-2153 8409.5,-2153 8409.5,-2190"/>
<text text-anchor="middle" x="8281" y="-2165.06" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- debug_dump.parse_url -->
<g id="node123" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node123"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7440.5,-2503.5 7141.5,-2503.5 7141.5,-2467.5 7440.5,-2467.5 7440.5,-2503.5"/>
<text text-anchor="middle" x="7291" y="-2479.62" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node124" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node124"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8502,-2549.5 8060,-2549.5 8060,-2513.5 8502,-2513.5 8502,-2549.5"/>
<text text-anchor="middle" x="8281" y="-2525.91" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node125" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node125"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7545,-2126 7037,-2126 7037,-2083 7545,-2083 7545,-2126"/>
<text text-anchor="middle" x="7291" y="-2096.35" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge179" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7545.11,-2098.93C7825.83,-2095.69 8291.7,-2099.03 8690,-2143.5 8774.87,-2152.98 8870.46,-2172.84 8936.84,-2188.13"/>
<polygon fill="black" stroke="black" points="8936.29,-2191.59 8946.82,-2190.44 8937.87,-2184.77 8936.29,-2191.59"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge178" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7392.57,-2082.97C7508.68,-2063.87 7700.99,-2050.47 7836,-2134.5 7863.71,-2151.75 7846.17,-2178.56 7872,-2198.5 7966.19,-2271.21 8105.18,-2294.73 8194.15,-2302.21"/>
<polygon fill="black" stroke="black" points="8193.97,-2305.7 8204.21,-2303 8194.52,-2298.72 8193.97,-2305.7"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node126" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node126"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9247,-1656.5 8795,-1656.5 8795,-1612.5 9247,-1612.5 9247,-1656.5"/>
<text text-anchor="middle" x="9021" y="-1626.18" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge180" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9062.73,-1612.41C9120.23,-1580.83 9227.98,-1520.23 9316,-1462.5 9397.94,-1408.76 9489.83,-1338.96 9536.57,-1302.72"/>
<polygon fill="black" stroke="black" points="9538.74,-1305.47 9544.49,-1296.57 9534.45,-1299.94 9538.74,-1305.47"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node127" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node127"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7538,-2449 7044,-2449 7044,-2400 7538,-2400 7538,-2449"/>
<text text-anchor="middle" x="7291" y="-2415.32" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge183" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7538.13,-2408.92C7661.89,-2406.97 7794.32,-2415.87 7836,-2458.5 7906.27,-2530.38 7809.2,-3284.01 7872,-3362.5 7927.35,-3431.68 8021.35,-3459.84 8105.18,-3470.28"/>
<polygon fill="black" stroke="black" points="8105.01,-3473.79 8115.35,-3471.47 8105.82,-3466.84 8105.01,-3473.79"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge187" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7538.21,-2424C7909.84,-2422.31 8582.31,-2415.25 8690,-2386.5 8808.44,-2354.87 8931.22,-2273.45 8987.85,-2232.61"/>
<polygon fill="black" stroke="black" points="8990.01,-2235.36 8996.03,-2226.65 8985.89,-2229.7 8990.01,-2235.36"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge184" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7429.29,-2449.01C7545.85,-2462.48 7713.26,-2463.89 7836,-2390.5 7862.04,-2374.93 7845.99,-2348.12 7872,-2332.5 7970.21,-2273.54 8106.71,-2278.18 8194.21,-2289.67"/>
<polygon fill="black" stroke="black" points="8193.99,-2293.17 8204.37,-2291.06 8194.94,-2286.23 8193.99,-2293.17"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge185" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7538.33,-2439.92C7661.93,-2441.8 7794.15,-2432.87 7836,-2390.5 7892.21,-2333.59 7815.9,-1728.51 7872,-1671.5 7958.83,-1583.26 8116.7,-1602.71 8208.53,-1624.08"/>
<polygon fill="black" stroke="black" points="8207.76,-1627.5 8218.3,-1626.42 8209.38,-1620.69 8207.76,-1627.5"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge181" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7538.1,-2408.95C7661.85,-2407.01 7794.29,-2415.91 7836,-2458.5 7903.38,-2527.31 7807.49,-3252.99 7872,-3324.5 7995.04,-3460.9 8515,-3387.66 8690,-3443.5 8803.15,-3479.61 8924.64,-3551.47 8983.66,-3588.78"/>
<polygon fill="black" stroke="black" points="8981.93,-3591.83 8992.24,-3594.24 8985.68,-3585.92 8981.93,-3591.83"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge182" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7538.06,-2408.64C7662.01,-2406.58 7794.66,-2415.46 7836,-2458.5 7898.74,-2523.83 7809.38,-4023.06 7872,-4088.5 7958.07,-4178.44 8117.67,-4157.83 8209.67,-4135.92"/>
<polygon fill="black" stroke="black" points="8210.57,-4139.31 8219.46,-4133.53 8208.91,-4132.51 8210.57,-4139.31"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge186" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7538.32,-2439.3C8023.25,-2462.62 9075.59,-2482.6 9316,-2235.5 9452.02,-2095.7 9544.62,-1450.9 9563.8,-1307.02"/>
<polygon fill="black" stroke="black" points="9567.31,-1307.19 9565.15,-1296.81 9560.37,-1306.27 9567.31,-1307.19"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node128" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node128"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7506.5,-2327.5 7075.5,-2327.5 7075.5,-2283.5 7506.5,-2283.5 7506.5,-2327.5"/>
<text text-anchor="middle" x="7291" y="-2297.18" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge192" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7506.92,-2293.44C7868.65,-2273.13 8588.71,-2232.71 8886.41,-2216"/>
<polygon fill="black" stroke="black" points="8887.03,-2219.47 8896.82,-2215.41 8886.64,-2212.48 8887.03,-2219.47"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge190" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7506.69,-2305.5C7721.83,-2305.5 8042.25,-2305.5 8194.16,-2305.5"/>
<polygon fill="black" stroke="black" points="8194.36,-2309 8204.36,-2305.5 8194.36,-2302 8194.36,-2309"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge191" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7506.7,-2321.33C7638.38,-2325.89 7790.24,-2320.13 7836,-2274.5 7931.05,-2179.71 7777.39,-1766.73 7872,-1671.5 7959.14,-1583.8 8116.54,-1602.93 8208.28,-1624.12"/>
<polygon fill="black" stroke="black" points="8207.5,-1627.53 8218.04,-1626.44 8209.12,-1620.72 8207.5,-1627.53"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge188" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7506.67,-2289.36C7638.57,-2284.64 7790.71,-2290.33 7836,-2336.5 7910.36,-2412.3 7797.01,-3216.32 7872,-3291.5 7936.24,-3355.91 8605.49,-3290.85 8690,-3324.5 8832.08,-3381.07 8954.58,-3526.5 9000.59,-3586.26"/>
<polygon fill="black" stroke="black" points="8997.97,-3588.6 9006.81,-3594.43 9003.54,-3584.36 8997.97,-3588.6"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge189" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7506.51,-2289.17C7638.59,-2284.34 7790.98,-2289.97 7836,-2336.5 7893.89,-2396.32 7813.62,-3775.16 7872,-3834.5 7903.9,-3866.92 8644.59,-3864.93 8690,-3867.5 8766.08,-3871.8 8851.92,-3878.09 8916.98,-3883.15"/>
<polygon fill="black" stroke="black" points="8917,-3886.66 8927.24,-3883.95 8917.54,-3879.68 8917,-3886.66"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node129" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node129"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9293.5,-2109 8748.5,-2109 8748.5,-2064 9293.5,-2064 9293.5,-2109"/>
<text text-anchor="middle" x="9021" y="-2078.12" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge193" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9160.73,-2109.07C9213.64,-2123.05 9271.79,-2145.53 9316,-2181.5 9458.59,-2297.52 9535.6,-2517.19 9559.38,-2595.17"/>
<polygon fill="black" stroke="black" points="9556.17,-2596.63 9562.39,-2605.2 9562.87,-2594.62 9556.17,-2596.63"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node130" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node130"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9175,-2013.5 8867,-2013.5 8867,-1977.5 9175,-1977.5 9175,-2013.5"/>
<text text-anchor="middle" x="9021" y="-1989.91" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node131" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node131"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7737.5,-2026.5 6844.5,-2026.5 6844.5,-1964.5 7737.5,-1964.5 7737.5,-2026.5"/>
<text text-anchor="middle" x="7291" y="-1983.3" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge197" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7737.7,-2004.68C7774.65,-2020.85 7808.36,-2043.19 7836,-2073.5 7889.6,-2132.28 7831.76,-2719.88 7872,-2788.5 7934.22,-2894.61 8059.65,-2963.3 8155.1,-3002.54"/>
<polygon fill="black" stroke="black" points="8153.95,-3005.85 8164.54,-3006.36 8156.58,-2999.37 8153.95,-3005.85"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge199" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7737.68,-2016.73C7771.27,-2023.08 7804.38,-2030.9 7836,-2040.5 7853.51,-2045.82 7854.38,-2055.53 7872,-2060.5 8047.11,-2109.89 8515.95,-2042.49 8690,-2095.5 8707.94,-2100.96 8708.91,-2109.78 8726,-2117.5 8793.57,-2148.03 8874.28,-2172.2 8934.02,-2187.94"/>
<polygon fill="black" stroke="black" points="8933.24,-2191.35 8943.8,-2190.49 8935.01,-2184.58 8933.24,-2191.35"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge194" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7737.51,-2014.32C7773.32,-2028.83 7806.86,-2048.13 7836,-2073.5 7879.6,-2111.46 7830.63,-2158.11 7872,-2198.5 7958.23,-2282.69 8102.22,-2302.86 8194.06,-2306.52"/>
<polygon fill="black" stroke="black" points="8194.05,-2310.02 8204.16,-2306.87 8194.29,-2303.03 8194.05,-2310.02"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge198" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7737.72,-1982.29C7774.12,-1966.78 7807.71,-1945.71 7836,-1917.5 7914.25,-1839.48 7790.83,-1746.48 7872,-1671.5 7961.21,-1589.09 8113.41,-1604.77 8204.56,-1624.24"/>
<polygon fill="black" stroke="black" points="8204.03,-1627.71 8214.55,-1626.44 8205.53,-1620.87 8204.03,-1627.71"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge195" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7737.51,-2017.01C8012.14,-2030.55 8371.53,-2048.76 8690,-2066.5 8705.66,-2067.37 8721.74,-2068.29 8737.97,-2069.22"/>
<polygon fill="black" stroke="black" points="8737.9,-2072.72 8748.09,-2069.81 8738.31,-2065.74 8737.9,-2072.72"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge196" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7737.56,-1995.5C8104.04,-1995.5 8602.93,-1995.5 8856.91,-1995.5"/>
<polygon fill="black" stroke="black" points="8856.96,-1999 8866.96,-1995.5 8856.96,-1992 8856.96,-1999"/>
</g>
<!-- debug_dump.main -->
<g id="node132" class="node">
<title>debug_dump.main</title>
<g id="a_node132"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6447,-2336.5 5971,-2336.5 5971,-2274.5 6447,-2274.5 6447,-2336.5"/>
<text text-anchor="middle" x="6209" y="-2293.3" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge200" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6296.37,-2336.51C6401.18,-2372.62 6584.01,-2430.71 6746,-2457.5 6874.48,-2478.75 7022.14,-2485.24 7131.17,-2486.7"/>
<polygon fill="black" stroke="black" points="7131.22,-2490.2 7141.27,-2486.82 7131.31,-2483.2 7131.22,-2490.2"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge201" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6431.15,-2336.51C6524.3,-2358.06 6629.52,-2394.39 6710,-2455.5 6733.86,-2473.62 6719.85,-2497.87 6746,-2512.5 6801.74,-2543.67 7635.18,-2538.8 8049.59,-2534.39"/>
<polygon fill="black" stroke="black" points="8049.64,-2537.89 8059.6,-2534.29 8049.57,-2530.89 8049.64,-2537.89"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge202" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6286.09,-2274.44C6388.6,-2234.18 6577.65,-2165.48 6746,-2134.5 6836.67,-2117.82 6937.16,-2109.49 7026.85,-2105.57"/>
<polygon fill="black" stroke="black" points="7027.04,-2109.07 7036.89,-2105.15 7026.75,-2102.07 7027.04,-2109.07"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge203" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6242.92,-2274.4C6321.98,-2202.01 6531.98,-2023.27 6746,-1955.5 6861.53,-1918.92 7715.39,-1929.3 7836,-1917.5 8218.65,-1880.06 8321.26,-1888.37 8690,-1779.5 8793.25,-1749.01 8906.76,-1694.02 8970.11,-1661.22"/>
<polygon fill="black" stroke="black" points="8971.83,-1664.27 8979.09,-1656.55 8968.6,-1658.06 8971.83,-1664.27"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge204" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6379.03,-2336.52C6484.26,-2354.78 6622.62,-2376.89 6746,-2390.5 6839.61,-2400.82 6942.65,-2408.26 7033.64,-2413.49"/>
<polygon fill="black" stroke="black" points="7033.64,-2417 7043.82,-2414.07 7034.03,-2410.01 7033.64,-2417"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge205" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6447.01,-2305.5C6630.9,-2305.5 6884.1,-2305.5 7064.9,-2305.5"/>
<polygon fill="black" stroke="black" points="7065.08,-2309 7075.08,-2305.5 7065.08,-2302 7065.08,-2309"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge206" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6267.6,-2274.45C6363.8,-2224.02 6564.51,-2124.8 6746,-2073.5 6815.06,-2053.98 6890.49,-2039.2 6962.6,-2028.06"/>
<polygon fill="black" stroke="black" points="6963.39,-2031.48 6972.75,-2026.51 6962.33,-2024.56 6963.39,-2031.48"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node133" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node133"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="8460.5,-189.5 8101.5,-189.5 8101.5,-153.5 8460.5,-153.5 8460.5,-189.5"/>
<text text-anchor="middle" x="8281" y="-165.8" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node134" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node134"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="7608.5,-825 6973.5,-825 6973.5,-772 7608.5,-772 7608.5,-825"/>
<text text-anchor="middle" x="7291" y="-788.3" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node135" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node135"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="7836,-277 6746,-277 6746,-200 7836,-200 7836,-277"/>
<text text-anchor="middle" x="7291" y="-222.6" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge207" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7836.22,-201.59C7927.7,-195.39 8016.86,-189.34 8090.98,-184.32"/>
<polygon fill="black" stroke="black" points="8091.6,-187.78 8101.34,-183.62 8091.12,-180.8 8091.6,-187.78"/>
</g>
<!-- price_utils.predict_price -->
<g id="node136" class="node">
<title>price_utils.predict_price</title>
<g id="a_node136"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="8486,-377 8076,-377 8076,-334 8486,-334 8486,-377"/>
<text text-anchor="middle" x="8281" y="-347.35" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node137" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node137"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="9214.5,-325 8827.5,-325 8827.5,-286 9214.5,-286 9214.5,-325"/>
<text text-anchor="middle" x="9021" y="-298.6" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node138" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node138"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="8548.5,-445.5 8013.5,-445.5 8013.5,-395.5 8548.5,-395.5 8548.5,-445.5"/>
<text text-anchor="middle" x="8281" y="-410.81" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node139" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node139"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="7547.5,-409.5 7034.5,-409.5 7034.5,-371.5 7547.5,-371.5 7547.5,-409.5"/>
<text text-anchor="middle" x="7291" y="-383.77" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge208" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M7547.72,-398.26C7687.31,-402.5 7860.28,-407.76 8003.05,-412.09"/>
<polygon fill="black" stroke="black" points="8003.18,-415.6 8013.28,-412.4 8003.39,-408.6 8003.18,-415.6"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node140" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node140"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6524,-370 5894,-370 5894,-317 6524,-317 6524,-370"/>
<text text-anchor="middle" x="6209" y="-333.3" font-family="Times,serif" font-size="40.88">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge209" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6482.88,-316.97C6604.35,-305.16 6749.92,-291.01 6883.79,-277.99"/>
<polygon fill="black" stroke="black" points="6884.21,-281.47 6893.82,-277.02 6883.53,-274.5 6884.21,-281.47"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge210" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6524.11,-345.32C6949.83,-347.79 7698.84,-352.13 8065.53,-354.26"/>
<polygon fill="black" stroke="black" points="8065.71,-357.76 8075.73,-354.32 8065.76,-350.76 8065.71,-357.76"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge211" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6524.16,-339.25C7105.23,-331.39 8332.68,-314.79 8817.17,-308.24"/>
<polygon fill="black" stroke="black" points="8817.47,-311.74 8827.42,-308.1 8817.38,-304.74 8817.47,-311.74"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge212" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6524.19,-357.17C6682.63,-364.07 6872.69,-372.34 7023.83,-378.92"/>
<polygon fill="black" stroke="black" points="7024.04,-382.43 7034.18,-379.37 7024.34,-375.44 7024.04,-382.43"/>
</g>
<!-- build_site._load_ontology -->
<g id="node141" class="node">
<title>build_site._load_ontology</title>
<g id="a_node141"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8437.5,-924.5 8124.5,-924.5 8124.5,-888.5 8437.5,-888.5 8437.5,-924.5"/>
<text text-anchor="middle" x="8281" y="-900.91" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge213" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8437.76,-896.03C8537.98,-893.07 8655.68,-897.93 8690,-933.5 8781.39,-1028.21 8646.29,-2012.76 8726,-2117.5 8763.7,-2167.04 8827.98,-2190.33 8886.84,-2201.01"/>
<polygon fill="black" stroke="black" points="8886.55,-2204.51 8896.99,-2202.74 8887.72,-2197.61 8886.55,-2204.51"/>
</g>
<!-- build_site._compile_locale -->
<g id="node142" class="node">
<title>build_site._compile_locale</title>
<g id="a_node142"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="9188,-872.5 8854,-872.5 8854,-836.5 9188,-836.5 9188,-872.5"/>
<text text-anchor="middle" x="9021" y="-848.62" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node143" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node143"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="8469.5,-870 8092.5,-870 8092.5,-829 8469.5,-829 8469.5,-870"/>
<text text-anchor="middle" x="8281" y="-842.26" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge214" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M8469.66,-850.77C8584.69,-851.55 8731.02,-852.54 8843.87,-853.31"/>
<polygon fill="black" stroke="black" points="8843.97,-856.81 8853.99,-853.38 8844.01,-849.81 8843.97,-856.81"/>
</g>
<!-- build_site._iter_lots -->
<g id="node144" class="node">
<title>build_site._iter_lots</title>
<g id="a_node144"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7517,-2201 7065,-2201 7065,-2144 7517,-2144 7517,-2201"/>
<text text-anchor="middle" x="7291" y="-2161.61" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge219" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7517.36,-2159.44C7646.55,-2157.3 7791.65,-2165.81 7836,-2210.5 7926.66,-2301.84 7806.24,-2677.88 7872,-2788.5 7934.96,-2894.41 8060.6,-2963.21 8155.92,-3002.53"/>
<polygon fill="black" stroke="black" points="8154.75,-3005.84 8165.33,-3006.36 8157.39,-2999.35 8154.75,-3005.84"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge217" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7517.26,-2159.54C7646.41,-2157.44 7791.51,-2165.96 7836,-2210.5 7918.49,-2293.08 7789.36,-2652.07 7872,-2734.5 7959.41,-2821.69 8116.35,-2802.87 8208.01,-2781.85"/>
<polygon fill="black" stroke="black" points="8208.84,-2785.25 8217.77,-2779.54 8207.23,-2778.43 8208.84,-2785.25"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge220" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7517.12,-2185.32C7646.22,-2187.37 7791.31,-2178.84 7836,-2134.5 7909.26,-2061.81 7798.61,-1744.05 7872,-1671.5 7959.68,-1584.83 8116.17,-1603.33 8207.75,-1624.19"/>
<polygon fill="black" stroke="black" points="8206.97,-1627.6 8217.5,-1626.47 8208.56,-1620.78 8206.97,-1627.6"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge215" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7517.32,-2159.12C7646.74,-2156.83 7792.09,-2165.3 7836,-2210.5 7904.27,-2280.77 7803.6,-3021.36 7872,-3091.5 7904.16,-3124.48 8008.57,-3130.96 8103.71,-3129.33"/>
<polygon fill="black" stroke="black" points="8103.85,-3132.83 8113.78,-3129.13 8103.71,-3125.83 8103.85,-3132.83"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge216" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7517.09,-2160.07C7645.95,-2158.2 7790.79,-2166.77 7836,-2210.5 7891.88,-2264.55 7824.22,-2497.17 7872,-2558.5 7934.09,-2638.2 8042.94,-2675.29 8132.6,-2692.54"/>
<polygon fill="black" stroke="black" points="8132.13,-2696.01 8142.6,-2694.39 8133.41,-2689.13 8132.13,-2696.01"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge218" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7517.12,-2172.27C7709.56,-2172.08 7980.3,-2171.8 8142.15,-2171.64"/>
<polygon fill="black" stroke="black" points="8142.17,-2175.14 8152.17,-2171.63 8142.16,-2168.14 8142.17,-2175.14"/>
</g>
<!-- build_site._copy_images -->
<g id="node145" class="node">
<title>build_site._copy_images</title>
<g id="a_node145"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="9184.5,-818.5 8857.5,-818.5 8857.5,-782.5 9184.5,-782.5 9184.5,-818.5"/>
<text text-anchor="middle" x="9021" y="-794.34" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node146" class="node">
<title>build_site._copy_static</title>
<g id="a_node146"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="8409,-723.5 8153,-723.5 8153,-687.5 8409,-687.5 8409,-723.5"/>
<text text-anchor="middle" x="8281" y="-700.2" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._convert_prices -->
<g id="node147" class="node">
<title>build_site._convert_prices</title>
<g id="a_node147"><a xlink:title="Add `_display_price` and `_price_class` fields converted to `cur`.">
<polygon fill="none" stroke="black" points="6464.5,-173 5953.5,-173 5953.5,-124 6464.5,-124 6464.5,-173"/>
<text text-anchor="middle" x="6209" y="-138.87" font-family="Times,serif" font-size="37.66">build_site._convert_prices</text>
</a>
</g>
</g>
<!-- build_site._convert_prices&#45;&gt;price_utils.canonical_currency -->
<g id="edge221" class="edge">
<title>build_site._convert_prices&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M6464.55,-147.86C6784.65,-147.54 7351.06,-148.51 7836,-157.5 7919.74,-159.05 8012.34,-161.81 8091.21,-164.46"/>
<polygon fill="black" stroke="black" points="8091.14,-167.96 8101.25,-164.8 8091.38,-160.97 8091.14,-167.96"/>
</g>
<!-- build_site._load_state -->
<g id="node148" class="node">
<title>build_site._load_state</title>
<g id="a_node148"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="6348.5,-929.5 6069.5,-929.5 6069.5,-893.5 6348.5,-893.5 6348.5,-929.5"/>
<text text-anchor="middle" x="6209" y="-905.62" font-family="Times,serif" font-size="24.22">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge222" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6348.7,-924.2C6456.85,-933.66 6610.85,-946.16 6746,-953.5 6987.98,-966.64 7597.95,-941.11 7836,-986.5 7852.71,-989.69 7855.36,-995.95 7872,-999.5 7917.72,-1009.24 7966.9,-1015.96 8014.74,-1020.56"/>
<polygon fill="black" stroke="black" points="8014.64,-1024.07 8024.93,-1021.51 8015.29,-1017.1 8014.64,-1024.07"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge223" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6348.67,-914.92C6629.41,-921.88 7285.2,-938.32 7836,-953.5 7896.15,-955.16 7960.89,-957.01 8021.82,-958.79"/>
<polygon fill="black" stroke="black" points="8021.86,-962.29 8031.96,-959.09 8022.07,-955.3 8021.86,-962.29"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge224" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6348.63,-911.17C6716.64,-910.28 7717.15,-907.86 8114.3,-906.9"/>
<polygon fill="black" stroke="black" points="8114.44,-910.4 8124.44,-906.88 8114.43,-903.4 8114.44,-910.4"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge225" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6348.63,-897.03C6464.18,-893.48 6623.39,-910.04 6710,-1012.5 6790.52,-1107.76 6659.48,-2044.66 6746,-2134.5 6788.6,-2178.74 6927.74,-2187.9 7054.62,-2186.17"/>
<polygon fill="black" stroke="black" points="7054.96,-2189.66 7064.9,-2186.01 7054.85,-2182.67 7054.96,-2189.66"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge226" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6348.8,-910.57C6688.39,-907.38 7553.94,-893.45 7836,-833.5 7852.79,-829.93 7855.15,-822.8 7872,-819.5 8212.67,-752.67 8621.14,-767.98 8847.49,-784.59"/>
<polygon fill="black" stroke="black" points="8847.23,-788.08 8857.46,-785.34 8847.75,-781.1 8847.23,-788.08"/>
</g>
<!-- build_site._categorise -->
<g id="node149" class="node">
<title>build_site._categorise</title>
<g id="a_node149"><a xlink:title="Return category info and recent lot list.">
<polygon fill="none" stroke="black" points="7545.5,-4463 7036.5,-4463 7036.5,-4406 7545.5,-4406 7545.5,-4463"/>
<text text-anchor="middle" x="7291" y="-4423.16" font-family="Times,serif" font-size="44.80">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge227" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7545.63,-4418.43C7637.28,-4411.57 7741.43,-4402.57 7836,-4391.5 7950.45,-4378.1 8080.64,-4357.19 8170.31,-4341.9"/>
<polygon fill="black" stroke="black" points="8170.96,-4345.34 8180.22,-4340.21 8169.77,-4338.44 8170.96,-4345.34"/>
</g>
<!-- build_site._render_site -->
<g id="node150" class="node">
<title>build_site._render_site</title>
<g id="a_node150"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.">
<polygon fill="none" stroke="black" points="6646.5,-1113 5771.5,-1113 5771.5,-1022 6646.5,-1022 6646.5,-1113"/>
<text text-anchor="middle" x="6209" y="-1048.97" font-family="Times,serif" font-size="75.04">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge228" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6646.63,-1074.77C7048.29,-1082.53 7614.14,-1096.49 7836,-1116.5 7951.81,-1126.94 8083.39,-1147.96 8173.06,-1163.69"/>
<polygon fill="black" stroke="black" points="8172.51,-1167.15 8182.96,-1165.43 8173.72,-1160.25 8172.51,-1167.15"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge229" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6646.72,-1106.85C6670.35,-1121.22 6691.81,-1138.88 6710,-1160.5 6813.44,-1283.39 6641.92,-3929.16 6746,-4051.5 6905.34,-4238.81 7593.88,-4199.47 7836,-4242.5 7950.28,-4262.81 8081.04,-4286.41 8170.9,-4302.69"/>
<polygon fill="black" stroke="black" points="8170.37,-4306.15 8180.83,-4304.49 8171.62,-4299.26 8170.37,-4306.15"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge231" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6646.8,-1058.09C6974.33,-1053.71 7433.54,-1053.24 7836,-1073.5 8216.86,-1092.67 8311.29,-1111.79 8690,-1156.5 8963.37,-1188.77 9283.38,-1235.55 9451.22,-1260.78"/>
<polygon fill="black" stroke="black" points="9450.9,-1264.27 9461.31,-1262.29 9451.94,-1257.35 9450.9,-1264.27"/>
</g>
<!-- build_site.build_page -->
<g id="node151" class="node">
<title>build_site.build_page</title>
<g id="a_node151"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="7745,-1284 6837,-1284 6837,-1185 7745,-1185 7745,-1284"/>
<text text-anchor="middle" x="7291" y="-1213.47" font-family="Times,serif" font-size="83.16">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge230" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6646.65,-1097.79C6668.66,-1106.1 6689.93,-1115.92 6710,-1127.5 6733.1,-1140.83 6722.83,-1162.3 6746,-1175.5 6771.59,-1190.07 6798.95,-1201.98 6827.29,-1211.65"/>
<polygon fill="black" stroke="black" points="6826.35,-1215.03 6836.94,-1214.85 6828.55,-1208.38 6826.35,-1215.03"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge233" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7490.98,-1284.02C7613.16,-1325.71 7760.3,-1398.82 7836,-1521.5 7887.65,-1605.2 7817.46,-3209.65 7872,-3291.5 7932.95,-3382.97 8051.79,-3428.34 8145.56,-3450.62"/>
<polygon fill="black" stroke="black" points="8144.88,-3454.06 8155.41,-3452.9 8146.46,-3447.24 8144.88,-3454.06"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge235" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7490.31,-1284.11C7612.42,-1325.87 7759.74,-1399.01 7836,-1521.5 7910.44,-1641.06 7802.09,-2666.24 7872,-2788.5 7932.86,-2894.93 8057.84,-2963.42 8153.53,-3002.52"/>
<polygon fill="black" stroke="black" points="8152.4,-3005.84 8162.98,-3006.33 8155.01,-2999.35 8152.4,-3005.84"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge232" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7745.16,-1211.11C7889.3,-1203.67 8038.12,-1195.99 8142.07,-1190.62"/>
<polygon fill="black" stroke="black" points="8142.49,-1194.1 8152.3,-1190.09 8142.13,-1187.11 8142.49,-1194.1"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge236" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7670.43,-1284.07C7727.08,-1297.58 7783.91,-1314.73 7836,-1336.5 8011.5,-1409.86 8187.52,-1560.22 8253.15,-1619.59"/>
<polygon fill="black" stroke="black" points="8250.84,-1622.23 8260.6,-1626.37 8255.56,-1617.05 8250.84,-1622.23"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge234" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M7745.13,-1235.29C7778.67,-1220.99 7809.63,-1201.53 7836,-1175.5 7930.32,-1082.4 7776.09,-970.95 7872,-879.5 7955.94,-799.46 8098.81,-809.33 8191.27,-826.97"/>
<polygon fill="black" stroke="black" points="8190.68,-830.42 8201.17,-828.92 8192.04,-823.55 8190.68,-830.42"/>
</g>
<!-- build_site.main -->
<g id="node152" class="node">
<title>build_site.main</title>
<g id="a_node152"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5601.5,-783.5 5191.5,-783.5 5191.5,-719.5 5601.5,-719.5 5601.5,-783.5"/>
<text text-anchor="middle" x="5396.5" y="-738.73" font-family="Times,serif" font-size="50.96">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge237" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M5450.85,-783.66C5513.2,-824 5615.09,-899 5672,-989.5 5704.37,-1040.98 5660.4,-1083.66 5708,-1121.5 5795.21,-1190.84 6631.54,-1081.39 6710,-1160.5 6802.05,-1253.32 6654.44,-2243.19 6746,-2336.5 6798.06,-2389.56 6991.37,-2387.63 7132.79,-2378.24"/>
<polygon fill="black" stroke="black" points="7133.14,-2381.72 7142.88,-2377.55 7132.67,-2374.74 7133.14,-2381.72"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge238" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M5554.93,-783.5C5603.81,-792.46 5657.98,-801.41 5708,-807.5 5825.81,-821.85 5960.07,-829.99 6059.78,-834.47"/>
<polygon fill="black" stroke="black" points="6059.78,-837.97 6069.93,-834.92 6060.09,-830.98 6059.78,-837.97"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge239" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M5564.56,-719.49C5610.85,-711.72 5661.24,-704.28 5708,-699.5 5916.09,-678.22 6436.01,-661.03 6823.37,-650.59"/>
<polygon fill="black" stroke="black" points="6823.74,-654.09 6833.65,-650.32 6823.56,-647.09 6823.74,-654.09"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge240" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5476.05,-719.46C5537.92,-695.89 5626.96,-665.6 5708,-651.5 5927.49,-613.32 6499.18,-690.52 6710,-618.5 6728.68,-612.12 6727.25,-598.66 6746,-592.5 6864.36,-553.59 7629.27,-563.55 8032.31,-571.72"/>
<polygon fill="black" stroke="black" points="8032.29,-575.22 8042.36,-571.93 8032.43,-568.22 8032.29,-575.22"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge241" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M5458.91,-719.47C5520.21,-689.13 5617.99,-645.09 5708,-623.5 5766.16,-609.55 5829.09,-600.21 5890.06,-594"/>
<polygon fill="black" stroke="black" points="5890.62,-597.46 5900.22,-592.99 5889.93,-590.5 5890.62,-597.46"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge242" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5407.3,-783.92C5449.01,-923.58 5612.29,-1488.43 5672,-1965.5 5681.32,-2040 5655.33,-3262.99 5708,-3316.5 5766.16,-3375.59 8607.35,-3436.95 8690,-3443.5 8931.96,-3462.69 9210.11,-3497.13 9387.24,-3520.64"/>
<polygon fill="black" stroke="black" points="9386.8,-3524.11 9397.18,-3521.96 9387.73,-3517.17 9386.8,-3524.11"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge243" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5454.03,-719.36C5517.94,-679.84 5619.87,-606.53 5672,-514.5 5718.02,-433.25 5640.02,-371.52 5708,-307.5 5876.98,-148.35 6514.32,-204.96 6746,-190.5 7230.04,-160.3 7801.6,-163.45 8091.28,-167.78"/>
<polygon fill="black" stroke="black" points="8091.41,-171.29 8101.47,-167.94 8091.52,-164.29 8091.41,-171.29"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge244" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5601.66,-761.41C5637.11,-762.93 5673.62,-764.37 5708,-765.5 6141.9,-779.81 6642.97,-789.02 6962.92,-793.99"/>
<polygon fill="black" stroke="black" points="6963.22,-797.49 6973.28,-794.15 6963.33,-790.49 6963.22,-797.49"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge245" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5450.01,-719.34C5511.78,-678.91 5613.34,-603.84 5672,-514.5 5701.39,-469.73 5666.68,-433.57 5708,-399.5 5757.58,-358.62 5819.95,-336.62 5883.67,-326.01"/>
<polygon fill="black" stroke="black" points="5884.57,-329.41 5893.91,-324.4 5883.49,-322.49 5884.57,-329.41"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge246" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5601.89,-750.21C6148.48,-747.06 7617.26,-740.77 7836,-762.5 7959.93,-774.81 8100.67,-805.25 8189.85,-826.63"/>
<polygon fill="black" stroke="black" points="8189.12,-830.05 8199.66,-829 8190.76,-823.25 8189.12,-830.05"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge247" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5601.65,-741.35C5637.1,-739.85 5673.61,-738.49 5708,-737.5 6638.26,-710.75 7758.42,-706.35 8142.8,-705.63"/>
<polygon fill="black" stroke="black" points="8142.86,-709.13 8152.85,-705.61 8142.84,-702.13 8142.86,-709.13"/>
</g>
<!-- build_site.main&#45;&gt;build_site._convert_prices -->
<g id="edge248" class="edge">
<title>build_site.main&#45;&gt;build_site._convert_prices</title>
<path fill="none" stroke="black" d="M5455.93,-719.4C5520.85,-680.28 5622.99,-607.7 5672,-514.5 5706.03,-449.8 5655.49,-238.36 5708,-187.5 5742.88,-153.72 5842.27,-141.97 5943.35,-139.47"/>
<polygon fill="black" stroke="black" points="5943.53,-142.96 5953.45,-139.25 5943.38,-135.96 5943.53,-142.96"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge249" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5467.71,-783.61C5529.6,-810.43 5622.91,-847.27 5708,-866.5 5824.2,-892.76 5958.85,-903.8 6059.12,-908.4"/>
<polygon fill="black" stroke="black" points="6059.18,-911.9 6069.33,-908.85 6059.49,-904.91 6059.18,-911.9"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge250" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5407.44,-783.9C5449.73,-923.49 5615.02,-1488.1 5672,-1965.5 5679.78,-2030.71 5662.75,-4281.9 5708,-4329.5 5784.88,-4410.36 6598.67,-4388.09 6710,-4395.5 6813.32,-4402.38 6926.99,-4410.01 7026.11,-4416.68"/>
<polygon fill="black" stroke="black" points="7026.06,-4420.18 7036.27,-4417.36 7026.53,-4413.2 7026.06,-4420.18"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge251" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5441.59,-783.73C5499.88,-824.97 5607.03,-896.14 5708,-938.5 5789.01,-972.49 5881.26,-999.36 5964.28,-1019.58"/>
<polygon fill="black" stroke="black" points="5963.56,-1023.01 5974.1,-1021.95 5965.2,-1016.2 5963.56,-1023.01"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node156" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node156"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7436,-1666.5 7146,-1666.5 7146,-1630.5 7436,-1630.5 7436,-1666.5"/>
<text text-anchor="middle" x="7291" y="-1644.34" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge257" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7436.19,-1647.92C7644.83,-1647.07 8024.44,-1645.53 8194.09,-1644.85"/>
<polygon fill="black" stroke="black" points="8194.23,-1648.35 8204.22,-1644.81 8194.2,-1641.35 8194.23,-1648.35"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node157" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node157"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7405.5,-3489.5 7176.5,-3489.5 7176.5,-3453.5 7405.5,-3453.5 7405.5,-3489.5"/>
<text text-anchor="middle" x="7291" y="-3467.46" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node158" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node158"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8364.5,-3282.5 8197.5,-3282.5 8197.5,-3246.5 8364.5,-3246.5 8364.5,-3282.5"/>
<text text-anchor="middle" x="8281" y="-3260.8" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge258" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7405.69,-3475.17C7516.75,-3476.35 7689.91,-3471.72 7836,-3439.5 7988.97,-3405.76 8158.17,-3326.4 8236.18,-3287.21"/>
<polygon fill="black" stroke="black" points="8237.89,-3290.27 8245.24,-3282.64 8234.74,-3284.03 8237.89,-3290.27"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge262" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8364.52,-3282.46C8454.28,-3296.93 8597.31,-3304.56 8690,-3232.5 8729.28,-3201.96 8686.92,-3157.3 8726,-3126.5 8786.09,-3079.14 8876.05,-3077.83 8940.63,-3084.97"/>
<polygon fill="black" stroke="black" points="8940.42,-3088.47 8950.77,-3086.18 8941.25,-3081.52 8940.42,-3088.47"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge263" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8356.7,-3282.57C8446.98,-3299.61 8598.17,-3312.05 8690,-3232.5 8745.09,-3184.77 8671.31,-3120.68 8726,-3072.5 8772.64,-3031.41 8841.04,-3022.96 8900.14,-3025.45"/>
<polygon fill="black" stroke="black" points="8900.12,-3028.95 8910.29,-3025.98 8900.49,-3021.96 8900.12,-3028.95"/>
</g>
<!-- embed.main -->
<g id="node159" class="node">
<title>embed.main</title>
<g id="a_node159"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6297,-4619.5 6121,-4619.5 6121,-4583.5 6297,-4583.5 6297,-4619.5"/>
<text text-anchor="middle" x="6209" y="-4595.34" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge268" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6297.01,-4601.5C6464.81,-4601.5 6837.55,-4601.5 7075.59,-4601.5"/>
<polygon fill="black" stroke="black" points="7075.77,-4605 7085.77,-4601.5 7075.77,-4598 7075.77,-4605"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node160" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node160"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-4411.5 0,-4411.5 0,-4375.5 282,-4375.5 282,-4411.5"/>
<text text-anchor="middle" x="141" y="-4389.46" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- scan_ontology:cli -->
<g id="node161" class="node">
<title>scan_ontology:cli</title>
<g id="a_node161"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4393.5" rx="44.19" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4391.9" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;scan_ontology:cli -->
<!-- caption:cli -->
<g id="node169" class="node">
<title>caption:cli</title>
<g id="a_node169"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4393.5" rx="30.28" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4391.9" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;caption:cli -->
<!-- check_translations.parse_po -->
<g id="node162" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-4481.5 1083.5,-4481.5 1083.5,-4429.5 1667.5,-4429.5 1667.5,-4481.5"/>
<text text-anchor="middle" x="1375.5" y="-4445.8" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node163" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-4478 318,-4478 318,-4433 983,-4433 983,-4478"/>
<text text-anchor="middle" x="650.5" y="-4447.12" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge270" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-4455.5C1013.14,-4455.5 1043.45,-4455.5 1073.19,-4455.5"/>
<polygon fill="black" stroke="black" points="1073.26,-4459 1083.26,-4455.5 1073.26,-4452 1073.26,-4459"/>
</g>
<!-- pending_chop.main -->
<g id="node164" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7454.5,-3283.5 7127.5,-3283.5 7127.5,-3241.5 7454.5,-3241.5 7454.5,-3283.5"/>
<text text-anchor="middle" x="7291" y="-3254.41" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge272" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7454.78,-3272.28C7593.68,-3277.06 7779.62,-3273.86 7836,-3227.5 7884.3,-3187.79 7824.72,-3132.42 7872,-3091.5 7905.96,-3062.11 7947.91,-3044.34 7991.86,-3034.25"/>
<polygon fill="black" stroke="black" points="7992.82,-3037.62 8001.86,-3032.09 7991.35,-3030.78 7992.82,-3037.62"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge271" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7454.5,-3270.18C7592.16,-3273.45 7776.4,-3269.22 7836,-3227.5 7868.61,-3204.68 7839.41,-3168.35 7872,-3145.5 7909.19,-3119.42 8011.14,-3112.67 8103.82,-3112.44"/>
<polygon fill="black" stroke="black" points="8103.91,-3115.94 8113.91,-3112.44 8103.91,-3108.94 8103.91,-3115.94"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node165" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node165"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8431.5,-3695.5 8130.5,-3695.5 8130.5,-3659.5 8431.5,-3659.5 8431.5,-3695.5"/>
<text text-anchor="middle" x="8281" y="-3673.46" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node166" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6443,-3543.5 5975,-3543.5 5975,-3491.5 6443,-3491.5 6443,-3543.5"/>
<text text-anchor="middle" x="6209" y="-3507.36" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge275" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6351.26,-3491.5C6461.39,-3464.64 6611.66,-3412.64 6710,-3316.5 6739.04,-3288.11 6712.54,-3255.52 6746,-3232.5 6845.85,-3163.8 7738,-3260.82 7836,-3189.5 7873.52,-3162.2 7835.54,-3120.2 7872,-3091.5 7906.71,-3064.19 7948.5,-3047.34 7991.93,-3037.49"/>
<polygon fill="black" stroke="black" points="7992.76,-3040.9 8001.81,-3035.38 7991.3,-3034.05 7992.76,-3040.9"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge274" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6246.23,-3543.56C6334.8,-3608.69 6565.54,-3787.2 6710,-3979.5 6731.49,-4008.11 6715.95,-4032.08 6746,-4051.5 6796.9,-4084.4 7775.45,-4092.91 7836,-4095.5 7960.15,-4100.8 8103.81,-4107.35 8193.3,-4111.47"/>
<polygon fill="black" stroke="black" points="8193.25,-4114.98 8203.4,-4111.94 8193.57,-4107.98 8193.25,-4114.98"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge273" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6443.25,-3530.14C6530.06,-3526.9 6627.47,-3513.46 6710,-3477.5 6729.9,-3468.83 6726.23,-3453.46 6746,-3444.5 6967.95,-3343.96 7656.24,-3489.99 7836,-3325.5 7896.19,-3270.42 7810.65,-3199.28 7872,-3145.5 7906.41,-3115.33 8009.65,-3108.7 8103.65,-3109.56"/>
<polygon fill="black" stroke="black" points="8103.85,-3113.06 8113.89,-3109.68 8103.93,-3106.06 8103.85,-3113.06"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge276" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6443.01,-3507.58C6664.89,-3498.13 6990.3,-3484.27 7166.18,-3476.77"/>
<polygon fill="black" stroke="black" points="7166.41,-3480.27 7176.25,-3476.34 7166.11,-3473.27 7166.41,-3480.27"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge277" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6253.87,-3543.57C6342.88,-3594.77 6552.68,-3706.93 6746,-3746.5 6983.3,-3795.07 7612.86,-3840.72 7836,-3746.5 7857.14,-3737.57 7851.23,-3719.25 7872,-3709.5 7948.33,-3673.69 8041.57,-3664.2 8119.64,-3664.33"/>
<polygon fill="black" stroke="black" points="8120.03,-3667.83 8130.06,-3664.4 8120.08,-3660.83 8120.03,-3667.83"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node167" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node167"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="8690,-3565 7872,-3565 7872,-3508 8690,-3508 8690,-3565"/>
<text text-anchor="middle" x="8281" y="-3525.16" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge278" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8417.7,-3565.04C8508.05,-3575.38 8622.21,-3570.24 8690,-3498.5 8765.75,-3418.33 8682.29,-2607.77 8726,-2506.5 8780.71,-2379.74 8916.12,-2277.01 8982.33,-2232.45"/>
<polygon fill="black" stroke="black" points="8984.43,-2235.26 8990.82,-2226.8 8980.55,-2229.43 8984.43,-2235.26"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge279" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8561.21,-3565.03C8610.84,-3582.63 8657.1,-3609.59 8690,-3650.5 8779.27,-3761.51 8653.06,-4168.14 8726,-4290.5 8775.76,-4373.97 8880.41,-4424.31 8950.47,-4450.01"/>
<polygon fill="black" stroke="black" points="8949.52,-4453.38 8960.11,-4453.47 8951.88,-4446.8 8949.52,-4453.38"/>
</g>
<!-- pending_embed.main -->
<g id="node168" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="5658.5,-3006.5 5134.5,-3006.5 5134.5,-2946.5 5658.5,-2946.5 5658.5,-3006.5"/>
<text text-anchor="middle" x="5396.5" y="-2964.98" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge285" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5478.52,-2946.42C5540.4,-2925.07 5628.32,-2898.21 5708,-2886.5 5941.94,-2852.13 7603.41,-2833.97 7836,-2876.5 7966.57,-2900.38 8108.58,-2960.7 8195.96,-3002.16"/>
<polygon fill="black" stroke="black" points="8194.49,-3005.34 8205.03,-3006.49 8197.51,-2999.03 8194.49,-3005.34"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge282" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M5644.14,-3006.53C5653.62,-3009.26 5662.94,-3012.25 5672,-3015.5 5689.65,-3021.84 5689.96,-3032.38 5708,-3037.5 5748.11,-3048.89 7830.78,-3045.01 7836,-3042.5 7859.08,-3031.4 7852.58,-3014.2 7872,-2997.5 7986.02,-2899.45 8146.6,-2820.55 8228.13,-2783.84"/>
<polygon fill="black" stroke="black" points="8229.97,-2786.85 8237.67,-2779.57 8227.12,-2780.46 8229.97,-2786.85"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge280" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M5658.68,-3003.56C5663.34,-3007.22 5667.79,-3011.2 5672,-3015.5 5766.21,-3111.82 5607.23,-3227.07 5708,-3316.5 5777.39,-3378.09 8180.08,-3393.74 8690,-3291.5 8793.76,-3270.7 8906.44,-3218.17 8969.63,-3185.7"/>
<polygon fill="black" stroke="black" points="8971.32,-3188.77 8978.59,-3181.06 8968.1,-3182.55 8971.32,-3188.77"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge281" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M5587.87,-2946.41C5619.77,-2933.55 5649.69,-2915.32 5672,-2889.5 5737.07,-2814.2 5632.18,-2732.96 5708,-2668.5 5730.39,-2649.46 7440.54,-2661.57 8690,-2680.5 8736.81,-2681.21 8787.35,-2682.28 8834.47,-2683.41"/>
<polygon fill="black" stroke="black" points="8834.39,-2686.91 8844.47,-2683.65 8834.56,-2679.91 8834.39,-2686.91"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge283" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M5657.13,-3006.55C5662.22,-3009.33 5667.19,-3012.31 5672,-3015.5 5697.91,-3032.69 5681.44,-3059.32 5708,-3075.5 5829.26,-3149.37 5999.17,-3142.05 6106.39,-3127.04"/>
<polygon fill="black" stroke="black" points="6107.17,-3130.46 6116.56,-3125.56 6106.16,-3123.53 6107.17,-3130.46"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge284" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M5594.25,-2946.47C5624.33,-2933.53 5651.98,-2915.25 5672,-2889.5 5757.24,-2779.84 5616.13,-2369.67 5708,-2265.5 6018.33,-1913.64 6278.8,-2116.35 6746,-2073.5 6987.21,-2051.38 7600.88,-2015.26 7836,-2073.5 7853.56,-2077.85 7854.93,-2086.49 7872,-2092.5 7959.45,-2123.28 8061.92,-2143.07 8142.28,-2155.14"/>
<polygon fill="black" stroke="black" points="8142.06,-2158.64 8152.47,-2156.65 8143.09,-2151.72 8142.06,-2158.64"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge286" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M5595.8,-2946.42C5625.43,-2933.47 5652.52,-2915.2 5672,-2889.5 5744.2,-2794.26 5627.81,-1903.11 5708,-1814.5 5802.77,-1709.78 6756.31,-1666.42 7135.6,-1653.23"/>
<polygon fill="black" stroke="black" points="7135.95,-1656.72 7145.82,-1652.87 7135.71,-1649.72 7135.95,-1656.72"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge287" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M5658.56,-3003.19C5663.27,-3006.96 5667.77,-3011.06 5672,-3015.5 5731.43,-3077.87 5646.71,-3340.96 5708,-3401.5 5866.93,-3558.49 6493.52,-3427.35 6710,-3482.5 6726.97,-3486.82 6728.92,-3494.65 6746,-3498.5 7150.13,-3589.51 7629.29,-3583.98 7943.22,-3565.61"/>
<polygon fill="black" stroke="black" points="7943.61,-3569.09 7953.39,-3565 7943.2,-3562.1 7943.61,-3569.09"/>
</g>
<!-- moderation:cli -->
<g id="node170" class="node">
<title>moderation:cli</title>
<g id="a_node170"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1933" cy="-4393.5" rx="38.53" ry="18"/>
<text text-anchor="middle" x="1933" y="-4391.9" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;moderation:cli -->
<!-- tg_client:cli -->
<g id="node171" class="node">
<title>tg_client:cli</title>
<g id="a_node171"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2500.5" cy="-4393.5" rx="32.86" ry="18"/>
<text text-anchor="middle" x="2500.5" y="-4391.9" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;tg_client:cli -->
<!-- telegram_bot:cli -->
<g id="node172" class="node">
<title>telegram_bot:cli</title>
<g id="a_node172"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3105.5" cy="-4393.5" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="3105.5" y="-4389.34" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;telegram_bot:cli -->
<!-- chop:cli -->
<g id="node173" class="node">
<title>chop:cli</title>
<g id="a_node173"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3952" cy="-4393.5" rx="27" ry="18"/>
<text text-anchor="middle" x="3952" y="-4391.9" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;chop:cli -->
<!-- clean_data:cli -->
<g id="node174" class="node">
<title>clean_data:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4517.5" rx="37.29" ry="18"/>
<text text-anchor="middle" x="141" y="-4515.9" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli -->
<g id="node175" class="node">
<title>debug_dump:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4517.5" rx="41.11" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4515.9" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;debug_dump:cli -->
<!-- build_site:cli -->
<g id="node176" class="node">
<title>build_site:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4517.5" rx="34.71" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4515.9" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;build_site:cli -->
<!-- embed:cli -->
<g id="node177" class="node">
<title>embed:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1933" cy="-4517.5" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1933" y="-4515.9" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;embed:cli -->
<!-- check_translations:cli -->
<g id="node178" class="node">
<title>check_translations:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2500.5" cy="-4517.5" rx="53.05" ry="18"/>
<text text-anchor="middle" x="2500.5" y="-4515.9" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;check_translations:cli -->
<!-- pending_chop:cli -->
<g id="node179" class="node">
<title>pending_chop:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3105.5" cy="-4517.5" rx="42.96" ry="18"/>
<text text-anchor="middle" x="3105.5" y="-4515.9" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- pending_caption:cli -->
<g id="node180" class="node">
<title>pending_caption:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3952" cy="-4517.5" rx="48.62" ry="18"/>
<text text-anchor="middle" x="3952" y="-4515.9" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_caption:cli -->
<!-- pending_embed:cli -->
<g id="node181" class="node">
<title>pending_embed:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4571.5" rx="47.39" ry="18"/>
<text text-anchor="middle" x="141" y="-4569.9" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- build_site -->
<g id="node182" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-751.5" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-747.8" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge299" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4896.65,-751.5C4962.93,-751.5 5078.12,-751.5 5181.12,-751.5"/>
<polygon fill="black" stroke="black" points="5181.37,-755 5191.37,-751.5 5181.37,-748 5181.37,-755"/>
</g>
<!-- caption -->
<g id="node183" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-4006.5" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-4002.8" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge300" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5441.36,-4006.5C5566.56,-4006.5 5928,-4006.5 6106.2,-4006.5"/>
<polygon fill="black" stroke="black" points="6106.37,-4010 6116.37,-4006.5 6106.37,-4003 6106.37,-4010"/>
</g>
<!-- check_translations -->
<g id="node184" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4455.5" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-4451.8" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge301" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-4455.5C259.3,-4455.5 282.99,-4455.5 307.97,-4455.5"/>
<polygon fill="black" stroke="black" points="307.99,-4459 317.99,-4455.5 307.99,-4452 307.99,-4459"/>
</g>
<!-- chop -->
<g id="node185" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-4269.5" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-4265.8" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge302" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4873.28,-4269.5C4956.91,-4269.5 5185.32,-4269.5 5310.56,-4269.5"/>
<polygon fill="black" stroke="black" points="5310.88,-4273 5320.88,-4269.5 5310.88,-4266 5310.88,-4273"/>
</g>
<!-- clean_data -->
<g id="node186" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-2046.5" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-2042.8" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge303" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5456.18,-2044.51C5512.15,-2041.72 5598.58,-2035.1 5672,-2019.5 5853.98,-1980.84 6060.64,-1901.71 6155.43,-1863.33"/>
<polygon fill="black" stroke="black" points="6156.85,-1866.54 6164.8,-1859.53 6154.21,-1860.05 6156.85,-1866.54"/>
</g>
<!-- debug_dump -->
<g id="node187" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-2305.5" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-2301.8" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge304" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5466.95,-2305.5C5575.4,-2305.5 5790.21,-2305.5 5960.75,-2305.5"/>
<polygon fill="black" stroke="black" points="5960.89,-2309 5970.89,-2305.5 5960.89,-2302 5960.89,-2309"/>
</g>
<!-- embed -->
<g id="node188" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-4601.5" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-4597.8" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge305" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5438.81,-4601.5C5562.62,-4601.5 5933.03,-4601.5 6110.76,-4601.5"/>
<polygon fill="black" stroke="black" points="6110.89,-4605 6120.89,-4601.5 6110.89,-4598 6110.89,-4605"/>
</g>
<!-- moderation -->
<g id="node189" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6209" cy="-2695.5" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6209" y="-2691.8" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge306" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6272.73,-2696.49C6415.94,-2698.74 6773.85,-2704.38 7024.41,-2708.32"/>
<polygon fill="black" stroke="black" points="7024.71,-2711.82 7034.76,-2708.48 7024.82,-2704.83 7024.71,-2711.82"/>
</g>
<!-- pending_caption -->
<g id="node190" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-3517.5" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-3513.8" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge307" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5483.85,-3517.5C5597.52,-3517.5 5801.97,-3517.5 5964.71,-3517.5"/>
<polygon fill="black" stroke="black" points="5964.87,-3521 5974.87,-3517.5 5964.87,-3514 5964.87,-3521"/>
</g>
<!-- pending_chop -->
<g id="node191" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6209" cy="-3289.5" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6209" y="-3285.8" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge308" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6283.38,-3287.67C6453.17,-3283.42 6876.85,-3272.83 7116.93,-3266.83"/>
<polygon fill="black" stroke="black" points="7117.25,-3270.32 7127.16,-3266.57 7117.08,-3263.32 7117.25,-3270.32"/>
</g>
<!-- pending_embed -->
<g id="node192" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-2976.5" rx="83.69" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-2972.8" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge309" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M4924.44,-2976.5C4978.13,-2976.5 5051.38,-2976.5 5124.11,-2976.5"/>
<polygon fill="black" stroke="black" points="5124.36,-2980 5134.36,-2976.5 5124.36,-2973 5124.36,-2980"/>
</g>
<!-- scan_ontology -->
<g id="node193" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-4789.5" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-4785.8" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge310" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4916.79,-4789.5C4979.32,-4789.5 5071.8,-4789.5 5158.85,-4789.5"/>
<polygon fill="black" stroke="black" points="5158.88,-4793 5168.88,-4789.5 5158.88,-4786 5158.88,-4793"/>
</g>
<!-- telegram_bot -->
<g id="node194" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="3952" cy="-381.5" rx="72.29" ry="18"/>
<text text-anchor="middle" x="3952" y="-377.8" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge311" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4022.93,-377.95C4160.37,-370.97 4469.33,-355.29 4665.34,-345.34"/>
<polygon fill="black" stroke="black" points="4665.65,-348.83 4675.46,-344.83 4665.29,-341.84 4665.65,-348.83"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge312" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4022.93,-384.97C4160.17,-391.78 4468.43,-407.08 4664.48,-416.81"/>
<polygon fill="black" stroke="black" points="4664.44,-420.32 4674.6,-417.32 4664.79,-413.32 4664.44,-420.32"/>
</g>
<!-- tg_client -->
<g id="node195" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-1545.5" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-1541.8" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge313" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-1545.5C232.34,-1545.5 292.58,-1545.5 356.22,-1545.5"/>
<polygon fill="black" stroke="black" points="356.46,-1549 366.46,-1545.5 356.46,-1542 356.46,-1549"/>
</g>
</g>
</svg>
