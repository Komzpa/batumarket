<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="4174pt" height="4002pt"
 viewBox="0.00 0.00 4174.39 4002.32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 3998.32)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-3998.32 4170.39,-3998.32 4170.39,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_cli</title>
<polygon fill="none" stroke="black" points="76.5,-450 76.5,-579 1397.39,-579 1397.39,-450 76.5,-450"/>
<text text-anchor="middle" x="736.94" y="-563.8" font-family="Times,serif" font-size="14.00">CLI entrypoints</text>
</g>
<!-- chop:cli -->
<g id="node1" class="node">
<title>chop:cli</title>
<g id="a_node1"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="613.5,-494 542.5,-494 542.5,-458 613.5,-458 613.5,-494"/>
<text text-anchor="middle" x="578" y="-472.3" font-family="Times,serif" font-size="14.00">chop:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli -->
<g id="node2" class="node">
<title>tg_client:cli</title>
<g id="a_node2"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="797,-494 698,-494 698,-458 797,-458 797,-494"/>
<text text-anchor="middle" x="747.5" y="-472.3" font-family="Times,serif" font-size="14.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;tg_client:cli -->
<!-- moderation:cli -->
<g id="node3" class="node">
<title>moderation:cli</title>
<g id="a_node3"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="977.69,-494 858.69,-494 858.69,-458 977.69,-458 977.69,-494"/>
<text text-anchor="middle" x="918.19" y="-472.3" font-family="Times,serif" font-size="14.00">moderation:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;moderation:cli -->
<!-- telegram_bot:cli -->
<g id="node4" class="node">
<title>telegram_bot:cli</title>
<g id="a_node4"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1180.89,-494 1048.89,-494 1048.89,-458 1180.89,-458 1180.89,-494"/>
<text text-anchor="middle" x="1114.89" y="-472.3" font-family="Times,serif" font-size="14.00">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;telegram_bot:cli -->
<!-- build_site:cli -->
<g id="node5" class="node">
<title>build_site:cli</title>
<g id="a_node5"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1389.39,-494 1282.39,-494 1282.39,-458 1389.39,-458 1389.39,-494"/>
<text text-anchor="middle" x="1335.89" y="-472.3" font-family="Times,serif" font-size="14.00">build_site:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;build_site:cli -->
<!-- caption:cli -->
<g id="node6" class="node">
<title>caption:cli</title>
<g id="a_node6"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="174.5,-548 84.5,-548 84.5,-512 174.5,-512 174.5,-548"/>
<text text-anchor="middle" x="129.5" y="-526.3" font-family="Times,serif" font-size="14.00">caption:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node7" class="node">
<title>clean_data:cli</title>
<g id="a_node7"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="440.5,-548 327.5,-548 327.5,-512 440.5,-512 440.5,-548"/>
<text text-anchor="middle" x="384" y="-526.3" font-family="Times,serif" font-size="14.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;clean_data:cli -->
<!-- scan_ontology:cli -->
<g id="node8" class="node">
<title>scan_ontology:cli</title>
<g id="a_node8"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="647,-548 509,-548 509,-512 647,-512 647,-548"/>
<text text-anchor="middle" x="578" y="-526.3" font-family="Times,serif" font-size="14.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;scan_ontology:cli -->
<!-- debug_dump:cli -->
<g id="node9" class="node">
<title>debug_dump:cli</title>
<g id="a_node9"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="812,-548 683,-548 683,-512 812,-512 812,-548"/>
<text text-anchor="middle" x="747.5" y="-526.3" font-family="Times,serif" font-size="14.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;debug_dump:cli -->
<!-- embed:cli -->
<g id="node10" class="node">
<title>embed:cli</title>
<g id="a_node10"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="961.19,-548 875.19,-548 875.19,-512 961.19,-512 961.19,-548"/>
<text text-anchor="middle" x="918.19" y="-526.3" font-family="Times,serif" font-size="14.00">embed:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;embed:cli -->
<!-- testing_mode.apply_testing_mode -->
<g id="node11" class="node">
<title>testing_mode.apply_testing_mode</title>
<polygon fill="none" stroke="black" points="259,-442 0,-442 0,-406 259,-406 259,-442"/>
<text text-anchor="middle" x="129.5" y="-420.3" font-family="Times,serif" font-size="14.00">testing_mode.apply_testing_mode</text>
</g>
<!-- lot_io.embedding_path -->
<g id="node12" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node12"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="473,-442 295,-442 295,-406 473,-406 473,-442"/>
<text text-anchor="middle" x="384" y="-420.3" font-family="Times,serif" font-size="14.00">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;lot_io.embedding_path -->
<!-- lot_io.embedding_path&#45;&gt;chop:cli -->
<!-- token_utils.estimate_tokens -->
<g id="node13" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node13"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="3277.89,-1461 3062.89,-1461 3062.89,-1425 3277.89,-1425 3277.89,-1461"/>
<text text-anchor="middle" x="3170.39" y="-1439.3" font-family="Times,serif" font-size="14.00">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node14" class="node">
<title>chop.process_message</title>
<polygon fill="none" stroke="black" points="2969.89,-1484 2790.89,-1484 2790.89,-1448 2969.89,-1448 2969.89,-1484"/>
<text text-anchor="middle" x="2880.39" y="-1462.3" font-family="Times,serif" font-size="14.00">chop.process_message</text>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge2" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M2970.15,-1458.91C2996.2,-1456.83 3025.1,-1454.52 3052.62,-1452.33"/>
<polygon fill="black" stroke="black" points="3053,-1455.81 3062.69,-1451.52 3052.44,-1448.83 3053,-1455.81"/>
</g>
<!-- caption_io.has_caption -->
<g id="node15" class="node">
<title>caption_io.has_caption</title>
<g id="a_node15"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="3565.89,-3089 3388.89,-3089 3388.89,-3053 3565.89,-3053 3565.89,-3089"/>
<text text-anchor="middle" x="3477.39" y="-3067.3" font-family="Times,serif" font-size="14.00">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge3" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2901.23,-1484.37C2929.43,-1511.94 2979.97,-1567.13 3000.39,-1626 3023.66,-1693.11 2989.07,-2851.03 3036.39,-2904 3116.53,-2993.72 3196.76,-2888.26 3304.39,-2942 3324.63,-2952.11 3322.97,-2963.55 3340.39,-2978 3371.57,-3003.87 3409.89,-3029.59 3437.9,-3047.4"/>
<polygon fill="black" stroke="black" points="3436.28,-3050.52 3446.61,-3052.9 3440.02,-3044.6 3436.28,-3050.52"/>
</g>
<!-- caption_io.read_caption -->
<g id="node16" class="node">
<title>caption_io.read_caption</title>
<g id="a_node16"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="3569.89,-2043 3384.89,-2043 3384.89,-2007 3569.89,-2007 3569.89,-2043"/>
<text text-anchor="middle" x="3477.39" y="-2021.3" font-family="Times,serif" font-size="14.00">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge4" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M2900.26,-1484.09C2927.73,-1511.75 2977.91,-1567.51 3000.39,-1626 3030.82,-1705.17 2974.89,-1947.58 3036.39,-2006 3083.2,-2050.47 3259.78,-2044.53 3374.51,-2035.34"/>
<polygon fill="black" stroke="black" points="3375.04,-2038.81 3384.72,-2034.5 3374.47,-2031.83 3375.04,-2038.81"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node17" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node17"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="3585.89,-1924 3368.89,-1924 3368.89,-1888 3585.89,-1888 3585.89,-1924"/>
<text text-anchor="middle" x="3477.39" y="-1902.3" font-family="Times,serif" font-size="14.00">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge5" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M2909.51,-1484.13C2940.03,-1503.36 2990.53,-1533.96 3036.39,-1556 3151.54,-1611.36 3221.8,-1562.52 3304.39,-1660 3355.16,-1719.92 3293.38,-1770.08 3340.39,-1833 3357.45,-1855.84 3383.83,-1872.31 3408.83,-1883.75"/>
<polygon fill="black" stroke="black" points="3407.75,-1887.1 3418.32,-1887.89 3410.55,-1880.69 3407.75,-1887.1"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node18" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node18"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="3604.89,-780 3349.89,-780 3349.89,-744 3604.89,-744 3604.89,-780"/>
<text text-anchor="middle" x="3477.39" y="-758.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge6" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2894.75,-1447.94C2920.49,-1412.03 2976.52,-1328.17 3000.39,-1248 3029.27,-1151 2964.59,-865.33 3036.39,-794 3132.12,-698.89 3304.51,-719.54 3402.69,-741.66"/>
<polygon fill="black" stroke="black" points="3402,-745.1 3412.53,-743.94 3403.58,-738.28 3402,-745.1"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node19" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node19"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="3540.89,-1323 3413.89,-1323 3413.89,-1287 3540.89,-1287 3540.89,-1323"/>
<text text-anchor="middle" x="3477.39" y="-1301.3" font-family="Times,serif" font-size="14.00">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge7" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M2894.21,-1447.84C2917.97,-1415.89 2972.32,-1350.52 3036.39,-1324 3157.48,-1273.89 3313.65,-1282.36 3403.65,-1293.43"/>
<polygon fill="black" stroke="black" points="3403.4,-1296.93 3413.76,-1294.72 3404.28,-1289.98 3403.4,-1296.93"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node20" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node20"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="3559.39,-1499 3395.39,-1499 3395.39,-1463 3559.39,-1463 3559.39,-1499"/>
<text text-anchor="middle" x="3477.39" y="-1477.3" font-family="Times,serif" font-size="14.00">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge8" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M2969.91,-1468.3C2991.65,-1468.86 3014.86,-1469.45 3036.39,-1470 3157.02,-1473.06 3296.25,-1476.53 3385.23,-1478.74"/>
<polygon fill="black" stroke="black" points="3385.21,-1482.24 3395.29,-1478.99 3385.38,-1475.25 3385.21,-1482.24"/>
</g>
<!-- post_io.read_post -->
<g id="node21" class="node">
<title>post_io.read_post</title>
<g id="a_node21"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="3547.89,-1824 3406.89,-1824 3406.89,-1788 3547.89,-1788 3547.89,-1824"/>
<text text-anchor="middle" x="3477.39" y="-1802.3" font-family="Times,serif" font-size="14.00">post_io.read_post</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge9" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2970.01,-1480.62C3080.31,-1500.63 3259.64,-1539.75 3304.39,-1589 3362.18,-1652.61 3279.88,-1717.96 3340.39,-1779 3355.24,-1793.99 3375.87,-1801.87 3396.57,-1805.77"/>
<polygon fill="black" stroke="black" points="3396.3,-1809.27 3406.72,-1807.37 3397.39,-1802.35 3396.3,-1809.27"/>
</g>
<!-- embed.embed_file -->
<g id="node22" class="node">
<title>embed.embed_file</title>
<g id="a_node22"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="3243.39,-839 3097.39,-839 3097.39,-803 3243.39,-803 3243.39,-839"/>
<text text-anchor="middle" x="3170.39" y="-817.3" font-family="Times,serif" font-size="14.00">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge10" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M2894.67,-1447.92C2920.28,-1411.96 2976.09,-1328.04 3000.39,-1248 3026.31,-1162.6 2976.86,-914.5 3036.39,-848 3049.44,-833.42 3068.01,-825.46 3087.15,-821.36"/>
<polygon fill="black" stroke="black" points="3087.97,-824.77 3097.19,-819.55 3086.73,-817.88 3087.97,-824.77"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node31" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node31"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="3888.89,-2929 3667.89,-2929 3667.89,-2893 3888.89,-2893 3888.89,-2929"/>
<text text-anchor="middle" x="3778.39" y="-2907.3" font-family="Times,serif" font-size="14.00">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge18" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3565.93,-3056.34C3582.47,-3051.92 3599.31,-3046.26 3614.39,-3039 3668.86,-3012.8 3722.03,-2965.87 3752.15,-2936.69"/>
<polygon fill="black" stroke="black" points="3754.97,-2938.83 3759.66,-2929.33 3750.07,-2933.83 3754.97,-2938.83"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node32" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node32"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="3885.39,-3089 3671.39,-3089 3671.39,-3053 3885.39,-3053 3885.39,-3089"/>
<text text-anchor="middle" x="3778.39" y="-3067.3" font-family="Times,serif" font-size="14.00">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge19" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3566.08,-3071C3595.78,-3071 3629.42,-3071 3661,-3071"/>
<polygon fill="black" stroke="black" points="3661.17,-3074.5 3671.17,-3071 3661.17,-3067.5 3661.17,-3074.5"/>
</g>
<!-- caption_io._get_langs -->
<g id="node29" class="node">
<title>caption_io._get_langs</title>
<g id="a_node29"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="3862.39,-1997 3694.39,-1997 3694.39,-1961 3862.39,-1961 3862.39,-1997"/>
<text text-anchor="middle" x="3778.39" y="-1975.3" font-family="Times,serif" font-size="14.00">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge20" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3570.13,-2010.89C3606.3,-2005.32 3647.8,-1998.94 3684.11,-1993.35"/>
<polygon fill="black" stroke="black" points="3684.86,-1996.78 3694.21,-1991.8 3683.79,-1989.86 3684.86,-1996.78"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge21" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3544.43,-2043.12C3570.67,-2053.81 3598.37,-2070.26 3614.39,-2095 3695.07,-2219.59 3595.34,-2624.14 3650.39,-2762 3670.81,-2813.14 3716.25,-2859.23 3746.86,-2886.18"/>
<polygon fill="black" stroke="black" points="3744.83,-2889.05 3754.69,-2892.94 3749.41,-2883.75 3744.83,-2889.05"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge22" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3504.94,-2043.02C3537.49,-2066.83 3591.16,-2112.12 3614.39,-2166 3682.37,-2323.71 3582.8,-2780.12 3650.39,-2938 3669.91,-2983.61 3712.53,-3022.85 3743.01,-3046.65"/>
<polygon fill="black" stroke="black" points="3741.18,-3049.66 3751.25,-3052.95 3745.43,-3044.1 3741.18,-3049.66"/>
</g>
<!-- serde_utils.read_md -->
<g id="node33" class="node">
<title>serde_utils.read_md</title>
<g id="a_node33"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="3858.89,-1797 3697.89,-1797 3697.89,-1761 3858.89,-1761 3858.89,-1797"/>
<text text-anchor="middle" x="3778.39" y="-1775.3" font-family="Times,serif" font-size="14.00">serde_utils.read_md</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.read_md -->
<g id="edge23" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3519.57,-2006.84C3550.03,-1991.39 3590.25,-1966.38 3614.39,-1933 3648.77,-1885.46 3607.54,-1846.08 3650.39,-1806 3660.95,-1796.12 3674.21,-1789.49 3688.13,-1785.11"/>
<polygon fill="black" stroke="black" points="3689.15,-1788.46 3697.86,-1782.43 3687.29,-1781.72 3689.15,-1788.46"/>
</g>
<!-- serde_utils.load_json -->
<g id="node34" class="node">
<title>serde_utils.load_json</title>
<g id="a_node34"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3860.89,-2265 3695.89,-2265 3695.89,-2229 3860.89,-2229 3860.89,-2265"/>
<text text-anchor="middle" x="3778.39" y="-2243.3" font-family="Times,serif" font-size="14.00">serde_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.load_json -->
<g id="edge24" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3570.04,-2038.18C3585.52,-2042.71 3600.92,-2048.81 3614.39,-2057 3682.57,-2098.47 3736.8,-2178.19 3762.01,-2219.96"/>
<polygon fill="black" stroke="black" points="3759.12,-2221.94 3767.23,-2228.76 3765.14,-2218.37 3759.12,-2221.94"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node89" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node89"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="3906.39,-903 3650.39,-903 3650.39,-867 3906.39,-867 3906.39,-903"/>
<text text-anchor="middle" x="3778.39" y="-881.3" font-family="Times,serif" font-size="14.00">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge108" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M3586.61,-780C3596.12,-782.63 3605.5,-785.61 3614.39,-789 3662.36,-807.28 3712.51,-839.03 3744.3,-860.98"/>
<polygon fill="black" stroke="black" points="3742.57,-864.03 3752.77,-866.89 3746.57,-858.3 3742.57,-864.03"/>
</g>
<!-- post_io.read_post&#45;&gt;serde_utils.read_md -->
<g id="edge225" class="edge">
<title>post_io.read_post&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3548.11,-1799.7C3589.74,-1795.94 3643.05,-1791.13 3687.78,-1787.09"/>
<polygon fill="black" stroke="black" points="3688.13,-1790.57 3697.77,-1786.19 3687.5,-1783.6 3688.13,-1790.57"/>
</g>
<!-- post_io._parse_block -->
<g id="node153" class="node">
<title>post_io._parse_block</title>
<g id="a_node153"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="3859.39,-1851 3697.39,-1851 3697.39,-1815 3859.39,-1815 3859.39,-1851"/>
<text text-anchor="middle" x="3778.39" y="-1829.3" font-family="Times,serif" font-size="14.00">post_io._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;post_io._parse_block -->
<g id="edge226" class="edge">
<title>post_io.read_post&#45;&gt;post_io._parse_block</title>
<path fill="none" stroke="black" d="M3548.11,-1812.3C3589.58,-1816.04 3642.64,-1820.83 3687.26,-1824.86"/>
<polygon fill="black" stroke="black" points="3686.96,-1828.35 3697.23,-1825.76 3687.59,-1821.38 3686.96,-1828.35"/>
</g>
<!-- serde_utils.write_json -->
<g id="node36" class="node">
<title>serde_utils.write_json</title>
<g id="a_node36"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="3563.89,-1212 3390.89,-1212 3390.89,-1176 3563.89,-1176 3563.89,-1212"/>
<text text-anchor="middle" x="3477.39" y="-1190.3" font-family="Times,serif" font-size="14.00">serde_utils.write_json</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;serde_utils.write_json -->
<g id="edge263" class="edge">
<title>embed.embed_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3243.71,-819.8C3266.12,-823.19 3288.95,-831.14 3304.39,-848 3400.75,-953.22 3243.8,-1061.98 3340.39,-1167 3351.25,-1178.81 3365.68,-1186.3 3381.08,-1190.92"/>
<polygon fill="black" stroke="black" points="3380.21,-1194.31 3390.77,-1193.44 3381.97,-1187.54 3380.21,-1194.31"/>
</g>
<!-- lot_io.read_lots -->
<g id="node93" class="node">
<title>lot_io.read_lots</title>
<g id="a_node93"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3539.89,-1050 3414.89,-1050 3414.89,-1014 3539.89,-1014 3539.89,-1050"/>
<text text-anchor="middle" x="3477.39" y="-1028.3" font-family="Times,serif" font-size="14.00">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge261" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3243.67,-821.01C3265.68,-824.54 3288.28,-832.29 3304.39,-848 3355.64,-897.98 3289.03,-955.13 3340.39,-1005 3357.39,-1021.51 3381.42,-1029.31 3404.57,-1032.67"/>
<polygon fill="black" stroke="black" points="3404.41,-1036.17 3414.76,-1033.88 3405.24,-1029.22 3404.41,-1036.17"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node98" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node98"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="3548.89,-888 3405.89,-888 3405.89,-852 3548.89,-852 3548.89,-888"/>
<text text-anchor="middle" x="3477.39" y="-866.3" font-family="Times,serif" font-size="14.00">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge262" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M3243.67,-832.61C3289.39,-839.96 3348.56,-849.46 3395.79,-857.05"/>
<polygon fill="black" stroke="black" points="3395.25,-860.51 3405.68,-858.64 3396.36,-853.6 3395.25,-860.51"/>
</g>
<!-- chop.main -->
<g id="node23" class="node">
<title>chop.main</title>
<g id="a_node23"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="2145.89,-1331 2055.89,-1331 2055.89,-1295 2145.89,-1295 2145.89,-1331"/>
<text text-anchor="middle" x="2100.89" y="-1309.3" font-family="Times,serif" font-size="14.00">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge11" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M2145.92,-1321.66C2267.57,-1345.6 2610.54,-1413.1 2780.87,-1446.61"/>
<polygon fill="black" stroke="black" points="2780.35,-1450.08 2790.84,-1448.58 2781.71,-1443.21 2780.35,-1450.08"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node24" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node24"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="3275.89,-2219 3064.89,-2219 3064.89,-2183 3275.89,-2183 3275.89,-2219"/>
<text text-anchor="middle" x="3170.39" y="-2197.3" font-family="Times,serif" font-size="14.00">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node25" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node25"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="2969.39,-2173 2791.39,-2173 2791.39,-2137 2969.39,-2137 2969.39,-2173"/>
<text text-anchor="middle" x="2880.39" y="-2151.3" font-family="Times,serif" font-size="14.00">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge12" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2969.75,-2169.11C2996.6,-2173.4 3026.49,-2178.18 3054.8,-2182.7"/>
<polygon fill="black" stroke="black" points="3054.32,-2186.16 3064.74,-2184.29 3055.42,-2179.25 3054.32,-2186.16"/>
</g>
<!-- log_utils.init_logger -->
<g id="node26" class="node">
<title>log_utils.init_logger</title>
<g id="a_node26"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="2959.39,-1974 2801.39,-1974 2801.39,-1938 2959.39,-1938 2959.39,-1974"/>
<text text-anchor="middle" x="2880.39" y="-1952.3" font-family="Times,serif" font-size="14.00">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge13" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2917.11,-1974.03C2943.77,-1989.23 2979.13,-2013.4 3000.39,-2044 3033.38,-2091.48 2994.61,-2129.03 3036.39,-2169 3042.12,-2174.48 3048.62,-2179.08 3055.59,-2182.93"/>
<polygon fill="black" stroke="black" points="3054.13,-2186.11 3064.65,-2187.41 3057.24,-2179.84 3054.13,-2186.11"/>
</g>
<!-- log_utils.get_logger -->
<g id="node27" class="node">
<title>log_utils.get_logger</title>
<g id="a_node27"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="3248.89,-1889 3091.89,-1889 3091.89,-1853 3248.89,-1853 3248.89,-1889"/>
<text text-anchor="middle" x="3170.39" y="-1867.3" font-family="Times,serif" font-size="14.00">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge14" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M2948.84,-1937.98C2966.22,-1933.67 2984.5,-1928.01 3000.39,-1920 3019.24,-1910.49 3017.43,-1898.29 3036.39,-1889 3050.36,-1882.15 3065.97,-1877.04 3081.45,-1873.38"/>
<polygon fill="black" stroke="black" points="3082.55,-1876.73 3091.58,-1871.18 3081.07,-1869.88 3082.55,-1876.73"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge15" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M3091.58,-1888.62C3072.89,-1892.89 3053.42,-1898.65 3036.39,-1907 3017.43,-1916.29 3019.24,-1928.49 3000.39,-1938 2990.68,-1942.89 2980.09,-1946.91 2969.36,-1950.13"/>
<polygon fill="black" stroke="black" points="2968.18,-1946.82 2959.48,-1952.87 2970.05,-1953.57 2968.18,-1946.82"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node28" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node28"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="2986.89,-2089 2773.89,-2089 2773.89,-2053 2986.89,-2053 2986.89,-2089"/>
<text text-anchor="middle" x="2880.39" y="-2067.3" font-family="Times,serif" font-size="14.00">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge16" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2930.23,-2089.1C2952.79,-2098.74 2979.21,-2111.95 3000.39,-2128 3019.71,-2142.65 3015.63,-2156.47 3036.39,-2169 3042.68,-2172.8 3049.39,-2176.14 3056.33,-2179.09"/>
<polygon fill="black" stroke="black" points="3055.33,-2182.46 3065.92,-2182.88 3057.9,-2175.95 3055.33,-2182.46"/>
</g>
<!-- config_utils.load_config -->
<g id="node30" class="node">
<title>config_utils.load_config</title>
<g id="a_node30"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="4145.39,-1496 3963.39,-1496 3963.39,-1460 4145.39,-1460 4145.39,-1496"/>
<text text-anchor="middle" x="4054.39" y="-1474.3" font-family="Times,serif" font-size="14.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge17" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M3804.8,-1960.84C3833.02,-1939.52 3878.29,-1901.73 3906.39,-1860 3986.47,-1741.07 4031.63,-1572.32 4047.17,-1506.16"/>
<polygon fill="black" stroke="black" points="4050.66,-1506.62 4049.49,-1496.09 4043.84,-1505.04 4050.66,-1506.62"/>
</g>
<!-- serde_utils.read_text -->
<g id="node70" class="node">
<title>serde_utils.read_text</title>
<g id="a_node70"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="4137.89,-2433 3970.89,-2433 3970.89,-2397 4137.89,-2397 4137.89,-2433"/>
<text text-anchor="middle" x="4054.39" y="-2411.3" font-family="Times,serif" font-size="14.00">serde_utils.read_text</text>
</a>
</g>
</g>
<!-- serde_utils.read_md&#45;&gt;serde_utils.read_text -->
<g id="edge126" class="edge">
<title>serde_utils.read_md&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3858.94,-1781.98C3876.43,-1786.16 3893.54,-1793.5 3906.39,-1806 3992.02,-1889.32 4038.94,-2278.18 4050.52,-2386.77"/>
<polygon fill="black" stroke="black" points="4047.07,-2387.36 4051.59,-2396.94 4054.03,-2386.63 4047.07,-2387.36"/>
</g>
<!-- serde_utils.load_json&#45;&gt;serde_utils.read_text -->
<g id="edge128" class="edge">
<title>serde_utils.load_json&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3860.93,-2261.12C3876.56,-2265.59 3892.39,-2271.42 3906.39,-2279 3958.58,-2307.29 4006.54,-2358.34 4032.7,-2389.21"/>
<polygon fill="black" stroke="black" points="4030.08,-2391.53 4039.18,-2396.97 4035.46,-2387.05 4030.08,-2391.53"/>
</g>
<!-- caption_io.write_caption -->
<g id="node35" class="node">
<title>caption_io.write_caption</title>
<g id="a_node35"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="3265.39,-2089 3075.39,-2089 3075.39,-2053 3265.39,-2053 3265.39,-2089"/>
<text text-anchor="middle" x="3170.39" y="-2067.3" font-family="Times,serif" font-size="14.00">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge25" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3203.52,-2052.89C3236.66,-2035.26 3290.39,-2009.47 3340.39,-1998 3456.56,-1971.34 3594.54,-1970.23 3683.92,-1973.36"/>
<polygon fill="black" stroke="black" points="3683.91,-1976.86 3694.04,-1973.74 3684.18,-1969.87 3683.91,-1976.86"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge26" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3261.13,-2089.07C3275.79,-2093.02 3290.67,-2097.65 3304.39,-2103 3321.44,-2109.65 3323.08,-2117.05 3340.39,-2123 3398.67,-2143.05 3572.93,-2120.39 3614.39,-2166 3659.01,-2215.09 3625.59,-2700.47 3650.39,-2762 3670.97,-2813.08 3716.37,-2859.19 3746.93,-2886.15"/>
<polygon fill="black" stroke="black" points="3744.89,-2889.01 3754.74,-2892.91 3749.47,-2883.72 3744.89,-2889.01"/>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.load_json -->
<g id="edge27" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3265.8,-2071.54C3357.76,-2074.96 3500.02,-2088.02 3614.39,-2133 3667.49,-2153.88 3719.95,-2195.3 3750.47,-2222.05"/>
<polygon fill="black" stroke="black" points="3748.31,-2224.81 3758.11,-2228.84 3752.97,-2219.58 3748.31,-2224.81"/>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.write_json -->
<g id="edge28" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3241.2,-2052.95C3265.25,-2043.11 3289.79,-2028.23 3304.39,-2006 3352.19,-1933.2 3284.06,-1289.42 3340.39,-1223 3350.93,-1210.57 3365.36,-1202.68 3380.9,-1197.8"/>
<polygon fill="black" stroke="black" points="3381.97,-1201.14 3390.7,-1195.14 3380.13,-1194.38 3381.97,-1201.14"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node37" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node37"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="3596.89,-2265 3357.89,-2265 3357.89,-2229 3596.89,-2229 3596.89,-2265"/>
<text text-anchor="middle" x="3477.39" y="-2243.3" font-family="Times,serif" font-size="14.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;serde_utils.load_json -->
<g id="edge29" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3596.99,-2247C3626.47,-2247 3657.62,-2247 3685.59,-2247"/>
<polygon fill="black" stroke="black" points="3685.74,-2250.5 3695.74,-2247 3685.74,-2243.5 3685.74,-2250.5"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node38" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node38"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="3562.89,-1268 3391.89,-1268 3391.89,-1232 3562.89,-1232 3562.89,-1268"/>
<text text-anchor="middle" x="3477.39" y="-1246.3" font-family="Times,serif" font-size="14.00">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._format_vector -->
<g id="node39" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node39"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="3584.89,-834 3369.89,-834 3369.89,-798 3584.89,-798 3584.89,-834"/>
<text text-anchor="middle" x="3477.39" y="-812.3" font-family="Times,serif" font-size="14.00">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- similar_utils._similar_path -->
<g id="node40" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node40"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="3579.39,-1158 3375.39,-1158 3375.39,-1122 3579.39,-1122 3579.39,-1158"/>
<text text-anchor="middle" x="3477.39" y="-1136.3" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar -->
<g id="node41" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node41"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="3578.39,-1770 3376.39,-1770 3376.39,-1734 3578.39,-1734 3578.39,-1770"/>
<text text-anchor="middle" x="3477.39" y="-1748.3" font-family="Times,serif" font-size="14.00">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar&#45;&gt;serde_utils.load_json -->
<g id="edge30" class="edge">
<title>similar_utils._load_similar&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3578.55,-1757.18C3592.01,-1761.81 3604.54,-1768.76 3614.39,-1779 3685.21,-1852.61 3618.14,-1909.07 3650.39,-2006 3677.91,-2088.75 3731.67,-2177.32 3759.59,-2220.4"/>
<polygon fill="black" stroke="black" points="3756.74,-2222.43 3765.14,-2228.88 3762.6,-2218.6 3756.74,-2222.43"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node42" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node42"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="3272.39,-1147 3068.39,-1147 3068.39,-1111 3272.39,-1111 3272.39,-1147"/>
<text text-anchor="middle" x="3170.39" y="-1125.3" font-family="Times,serif" font-size="14.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;serde_utils.write_json -->
<g id="edge33" class="edge">
<title>similar_utils._save_similar&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3249.55,-1147.01C3278.1,-1153.47 3310.67,-1160.71 3340.39,-1167 3353.46,-1169.77 3367.26,-1172.6 3380.86,-1175.35"/>
<polygon fill="black" stroke="black" points="3380.22,-1178.79 3390.71,-1177.33 3381.6,-1171.93 3380.22,-1178.79"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge31" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M3272.52,-1132.65C3302.2,-1133.72 3334.82,-1134.89 3365.09,-1135.99"/>
<polygon fill="black" stroke="black" points="3365.14,-1139.49 3375.26,-1136.35 3365.4,-1132.49 3365.14,-1139.49"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node43" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node43"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="3553.89,-2601 3400.89,-2601 3400.89,-2565 3553.89,-2565 3553.89,-2601"/>
<text text-anchor="middle" x="3477.39" y="-2579.3" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge32" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3241.74,-1147.06C3265.7,-1156.89 3290.04,-1171.76 3304.39,-1194 3377.31,-1307.02 3295.57,-2277.18 3340.39,-2404 3362.6,-2466.85 3415.72,-2525.52 3448.61,-2557.61"/>
<polygon fill="black" stroke="black" points="3446.46,-2560.4 3456.1,-2564.8 3451.31,-2555.35 3446.46,-2560.4"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node99" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node99"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="3850.89,-2433 3705.89,-2433 3705.89,-2397 3850.89,-2397 3850.89,-2433"/>
<text text-anchor="middle" x="3778.39" y="-2411.3" font-family="Times,serif" font-size="14.00">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge121" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3553.97,-2571.74C3574.25,-2566.99 3595.73,-2560.32 3614.39,-2551 3670.92,-2522.76 3724.85,-2471.34 3754.3,-2440.46"/>
<polygon fill="black" stroke="black" points="3756.94,-2442.76 3761.25,-2433.07 3751.84,-2437.96 3756.94,-2442.76"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node44" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node44"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="3598.89,-36 3355.89,-36 3355.89,0 3598.89,0 3598.89,-36"/>
<text text-anchor="middle" x="3477.39" y="-14.3" font-family="Times,serif" font-size="14.00">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node45" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node45"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="2987.39,-236 2773.39,-236 2773.39,-200 2987.39,-200 2987.39,-236"/>
<text text-anchor="middle" x="2880.39" y="-214.3" font-family="Times,serif" font-size="14.00">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node46" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node46"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="3282.39,-40 3058.39,-40 3058.39,-4 3282.39,-4 3282.39,-40"/>
<text text-anchor="middle" x="3170.39" y="-18.3" font-family="Times,serif" font-size="14.00">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge34" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M3282.79,-20.54C3303.19,-20.27 3324.66,-19.99 3345.56,-19.72"/>
<polygon fill="black" stroke="black" points="3345.82,-23.21 3355.77,-19.58 3345.73,-16.21 3345.82,-23.21"/>
</g>
<!-- notes_utils.collect_notes -->
<g id="node47" class="node">
<title>notes_utils.collect_notes</title>
<g id="a_node47"><a xlink:title="Return combined notes if ``notes/`` exists.">
<polygon fill="none" stroke="black" points="3572.89,-1678 3381.89,-1678 3381.89,-1642 3572.89,-1642 3572.89,-1678"/>
<text text-anchor="middle" x="3477.39" y="-1656.3" font-family="Times,serif" font-size="14.00">notes_utils.collect_notes</text>
</a>
</g>
</g>
<!-- notes_utils.collect_notes&#45;&gt;serde_utils.read_md -->
<g id="edge35" class="edge">
<title>notes_utils.collect_notes&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3569.72,-1678.04C3584.84,-1682 3600.2,-1686.65 3614.39,-1692 3659.65,-1709.07 3708.16,-1736.23 3740.38,-1755.66"/>
<polygon fill="black" stroke="black" points="3738.65,-1758.7 3749.01,-1760.92 3742.29,-1752.73 3738.65,-1758.7"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node48" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node48"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="3297.39,-1997 3043.39,-1997 3043.39,-1961 3297.39,-1961 3297.39,-1997"/>
<text text-anchor="middle" x="3170.39" y="-1975.3" font-family="Times,serif" font-size="14.00">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge36" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3291.06,-1997.05C3318.58,-2001.2 3347.6,-2005.58 3374.3,-2009.6"/>
<polygon fill="black" stroke="black" points="3374.01,-2013.1 3384.42,-2011.13 3375.05,-2006.18 3374.01,-2013.1"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge37" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M3263.84,-1960.99C3277.47,-1958.11 3291.31,-1955.07 3304.39,-1952 3336.83,-1944.38 3372.46,-1935.01 3402.84,-1926.73"/>
<polygon fill="black" stroke="black" points="3403.78,-1930.1 3412.5,-1924.08 3401.93,-1923.35 3403.78,-1930.1"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge38" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3290.69,-1960.83C3295.5,-1958.24 3300.09,-1955.31 3304.39,-1952 3333.04,-1929.92 3315.25,-1905.02 3340.39,-1879 3361.53,-1857.12 3390.68,-1840.28 3416.56,-1828.33"/>
<polygon fill="black" stroke="black" points="3418.23,-1831.41 3425.93,-1824.14 3415.38,-1825.02 3418.23,-1831.41"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node49" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node49"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="2448.89,-3277 2262.89,-3277 2262.89,-3241 2448.89,-3241 2448.89,-3277"/>
<text text-anchor="middle" x="2355.89" y="-3255.3" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node50" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node50"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1194.39,-3442 1035.39,-3442 1035.39,-3406 1194.39,-3406 1194.39,-3442"/>
<text text-anchor="middle" x="1114.89" y="-3420.3" font-family="Times,serif" font-size="14.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node51" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node51"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="2458.39,-3657 2253.39,-3657 2253.39,-3621 2458.39,-3621 2458.39,-3657"/>
<text text-anchor="middle" x="2355.89" y="-3635.3" font-family="Times,serif" font-size="14.00">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node52" class="node">
<title>tg_client._write_md</title>
<g id="a_node52"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="2691.89,-3591 2535.89,-3591 2535.89,-3555 2691.89,-3555 2691.89,-3591"/>
<text text-anchor="middle" x="2613.89" y="-3569.3" font-family="Times,serif" font-size="14.00">tg_client._write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node53" class="node">
<title>post_io.write_post</title>
<g id="a_node53"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="2953.39,-3576 2807.39,-3576 2807.39,-3540 2953.39,-3540 2953.39,-3576"/>
<text text-anchor="middle" x="2880.39" y="-3554.3" font-family="Times,serif" font-size="14.00">post_io.write_post</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge39" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M2692.1,-3568.62C2724.99,-3566.76 2763.41,-3564.58 2796.86,-3562.68"/>
<polygon fill="black" stroke="black" points="2797.28,-3566.16 2807.07,-3562.1 2796.88,-3559.17 2797.28,-3566.16"/>
</g>
<!-- post_io.get_contact -->
<g id="node78" class="node">
<title>post_io.get_contact</title>
<g id="a_node78"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3247.39,-3615 3093.39,-3615 3093.39,-3579 3247.39,-3579 3247.39,-3615"/>
<text text-anchor="middle" x="3170.39" y="-3593.3" font-family="Times,serif" font-size="14.00">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge228" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M2953.69,-3567.79C2993.02,-3573.12 3041.93,-3579.74 3083.23,-3585.33"/>
<polygon fill="black" stroke="black" points="3082.9,-3588.82 3093.28,-3586.69 3083.84,-3581.88 3082.9,-3588.82"/>
</g>
<!-- serde_utils.write_md -->
<g id="node102" class="node">
<title>serde_utils.write_md</title>
<g id="a_node102"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="3253.39,-3507 3087.39,-3507 3087.39,-3471 3253.39,-3471 3253.39,-3507"/>
<text text-anchor="middle" x="3170.39" y="-3485.3" font-family="Times,serif" font-size="14.00">serde_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;serde_utils.write_md -->
<g id="edge227" class="edge">
<title>post_io.write_post&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M2944.5,-3539.91C2972.54,-3532.13 3006,-3523.19 3036.39,-3516 3049.58,-3512.88 3063.56,-3509.79 3077.31,-3506.89"/>
<polygon fill="black" stroke="black" points="3078.19,-3510.28 3087.26,-3504.81 3076.76,-3503.43 3078.19,-3510.28"/>
</g>
<!-- post_io.get_timestamp -->
<g id="node154" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node154"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3259.39,-3561 3081.39,-3561 3081.39,-3525 3259.39,-3525 3259.39,-3561"/>
<text text-anchor="middle" x="3170.39" y="-3539.3" font-family="Times,serif" font-size="14.00">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge229" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M2953.69,-3554.23C2989.25,-3552.38 3032.65,-3550.12 3071.16,-3548.12"/>
<polygon fill="black" stroke="black" points="3071.56,-3551.6 3081.36,-3547.58 3071.2,-3544.61 3071.56,-3551.6"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node54" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node54"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="3279.39,-3815 3061.39,-3815 3061.39,-3779 3279.39,-3779 3279.39,-3815"/>
<text text-anchor="middle" x="3170.39" y="-3793.3" font-family="Times,serif" font-size="14.00">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path -->
<g id="node55" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node55"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="3564.89,-3333 3389.89,-3333 3389.89,-3297 3564.89,-3297 3564.89,-3333"/>
<text text-anchor="middle" x="3477.39" y="-3311.3" font-family="Times,serif" font-size="14.00">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge40" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3279.53,-3786.45C3288.67,-3782.31 3297.16,-3776.93 3304.39,-3770 3352.61,-3723.73 3318.85,-3687.27 3340.39,-3624 3376.94,-3516.66 3435.91,-3395.09 3462.55,-3342.1"/>
<polygon fill="black" stroke="black" points="3465.75,-3343.52 3467.13,-3333.02 3459.5,-3340.37 3465.75,-3343.52"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node56" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node56"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="2982.39,-3815 2778.39,-3815 2778.39,-3779 2982.39,-3779 2982.39,-3815"/>
<text text-anchor="middle" x="2880.39" y="-3793.3" font-family="Times,serif" font-size="14.00">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge41" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M2982.52,-3797C3004.69,-3797 3028.34,-3797 3051.11,-3797"/>
<polygon fill="black" stroke="black" points="3051.16,-3800.5 3061.16,-3797 3051.16,-3793.5 3051.16,-3800.5"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node57" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node57"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="1957.39,-2860 1736.39,-2860 1736.39,-2824 1957.39,-2824 1957.39,-2860"/>
<text text-anchor="middle" x="1846.89" y="-2838.3" font-family="Times,serif" font-size="14.00">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge42" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1909.19,-2860.07C2081.98,-2911.26 2570.36,-3057.72 2724.39,-3123 2869.2,-3184.37 2884.98,-3247.43 3036.39,-3290 3151.1,-3322.26 3289.1,-3324.52 3379.58,-3321.34"/>
<polygon fill="black" stroke="black" points="3379.97,-3324.83 3389.83,-3320.95 3379.7,-3317.83 3379.97,-3324.83"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node58" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node58"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="2467.39,-3749 2244.39,-3749 2244.39,-3713 2467.39,-3713 2467.39,-3749"/>
<text text-anchor="middle" x="2355.89" y="-3727.3" font-family="Times,serif" font-size="14.00">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node59" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node59"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="2706.89,-3331 2520.89,-3331 2520.89,-3295 2706.89,-3295 2706.89,-3331"/>
<text text-anchor="middle" x="2613.89" y="-3309.3" font-family="Times,serif" font-size="14.00">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node60" class="node">
<title>tg_client._extract_author</title>
<g id="a_node60"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="2977.39,-3453 2783.39,-3453 2783.39,-3417 2977.39,-3417 2977.39,-3453"/>
<text text-anchor="middle" x="2880.39" y="-3431.3" font-family="Times,serif" font-size="14.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node61" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node61"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="3280.89,-3453 3059.89,-3453 3059.89,-3417 3280.89,-3417 3280.89,-3453"/>
<text text-anchor="middle" x="3170.39" y="-3431.3" font-family="Times,serif" font-size="14.00">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge43" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M2977.69,-3435C3000.72,-3435 3025.6,-3435 3049.55,-3435"/>
<polygon fill="black" stroke="black" points="3049.75,-3438.5 3059.75,-3435 3049.75,-3431.5 3049.75,-3438.5"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node62" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node62"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="2719.89,-3461 2507.89,-3461 2507.89,-3425 2719.89,-3425 2719.89,-3461"/>
<text text-anchor="middle" x="2613.89" y="-3439.3" font-family="Times,serif" font-size="14.00">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node63" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node63"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="3573.89,-3669 3380.89,-3669 3380.89,-3633 3573.89,-3633 3573.89,-3669"/>
<text text-anchor="middle" x="3477.39" y="-3647.3" font-family="Times,serif" font-size="14.00">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node64" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node64"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="2451.39,-3331 2260.39,-3331 2260.39,-3295 2451.39,-3295 2451.39,-3331"/>
<text text-anchor="middle" x="2355.89" y="-3309.3" font-family="Times,serif" font-size="14.00">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge44" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2451.57,-3295.1C2457.13,-3292.47 2462.45,-3289.46 2467.39,-3286 2491.01,-3269.45 2479.65,-3248.39 2503.39,-3232 2574.98,-3182.58 3146.1,-3110.16 3378.52,-3082.4"/>
<polygon fill="black" stroke="black" points="3379.15,-3085.85 3388.66,-3081.2 3378.32,-3078.9 3379.15,-3085.85"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge46" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2451.59,-3299.73C2457.55,-3296.06 2462.94,-3291.54 2467.39,-3286 2524.69,-3214.63 2478.73,-1727.14 2503.39,-1639 2510.06,-1615.14 3029.4,-723.02 3036.39,-719 3139.62,-659.59 3186.17,-704.45 3304.39,-719 3323.32,-721.33 3364.23,-731.48 3401.4,-741.33"/>
<polygon fill="black" stroke="black" points="3400.69,-744.77 3411.26,-743.96 3402.5,-738 3400.69,-744.77"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node65" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node65"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="2724.39,-3277 2503.39,-3277 2503.39,-3241 2724.39,-3241 2724.39,-3277"/>
<text text-anchor="middle" x="2613.89" y="-3255.3" font-family="Times,serif" font-size="14.00">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge45" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M2442.49,-3294.94C2466.51,-3289.88 2492.77,-3284.34 2517.33,-3279.16"/>
<polygon fill="black" stroke="black" points="2518.31,-3282.53 2527.37,-3277.04 2516.86,-3275.68 2518.31,-3282.53"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node66" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node66"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="2970.39,-3683 2790.39,-3683 2790.39,-3647 2970.39,-3647 2970.39,-3683"/>
<text text-anchor="middle" x="2880.39" y="-3661.3" font-family="Times,serif" font-size="14.00">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge47" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M2714.48,-3277C2718.07,-3279.64 2721.4,-3282.63 2724.39,-3286 2813.09,-3386.24 2690.5,-3470.85 2760.39,-3585 2775.72,-3610.04 2802.18,-3628.99 2826.26,-3642.14"/>
<polygon fill="black" stroke="black" points="2824.86,-3645.36 2835.35,-3646.9 2828.11,-3639.16 2824.86,-3645.36"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node67" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node67"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="3287.89,-3669 3052.89,-3669 3052.89,-3633 3287.89,-3633 3287.89,-3669"/>
<text text-anchor="middle" x="3170.39" y="-3647.3" font-family="Times,serif" font-size="14.00">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge50" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2970.54,-3660.67C2993.41,-3659.55 3018.45,-3658.34 3042.81,-3657.15"/>
<polygon fill="black" stroke="black" points="3043.02,-3660.65 3052.83,-3656.67 3042.68,-3653.66 3043.02,-3660.65"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge48" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3287.91,-3637.43C3293.98,-3633.74 3299.55,-3629.31 3304.39,-3624 3354.95,-3568.48 3315.82,-3358.96 3340.39,-3288 3366.49,-3212.61 3422.81,-3136.3 3454.17,-3097.39"/>
<polygon fill="black" stroke="black" points="3457.22,-3099.19 3460.83,-3089.23 3451.8,-3094.76 3457.22,-3099.19"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge49" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M3288,-3651C3315.14,-3651 3343.89,-3651 3370.53,-3651"/>
<polygon fill="black" stroke="black" points="3370.63,-3654.5 3380.63,-3651 3370.63,-3647.5 3370.63,-3654.5"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node68" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node68"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2208.39,-3863 1993.39,-3863 1993.39,-3827 2208.39,-3827 2208.39,-3863"/>
<text text-anchor="middle" x="2100.89" y="-3841.3" font-family="Times,serif" font-size="14.00">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge51" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2208.43,-3827.91C2412.2,-3795.04 2850.27,-3723.5 3000.39,-3692 3016.53,-3688.61 3020.37,-3686.93 3036.39,-3683 3051.76,-3679.23 3068.15,-3675.25 3083.98,-3671.43"/>
<polygon fill="black" stroke="black" points="3084.85,-3674.82 3093.75,-3669.08 3083.21,-3668.02 3084.85,-3674.82"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node69" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node69"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="3255.89,-3945 3084.89,-3945 3084.89,-3909 3255.89,-3909 3255.89,-3945"/>
<text text-anchor="middle" x="3170.39" y="-3923.3" font-family="Times,serif" font-size="14.00">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge53" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3256.2,-3922.25C3274.36,-3917.32 3291.83,-3908.94 3304.39,-3895 3345.05,-3849.87 3323.99,-3682.5 3340.39,-3624 3370.92,-3515.09 3432.71,-3394.78 3461.28,-3342.15"/>
<polygon fill="black" stroke="black" points="3464.48,-3343.58 3466.21,-3333.13 3458.34,-3340.22 3464.48,-3343.58"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;serde_utils.read_text -->
<g id="edge52" class="edge">
<title>tg_client._get_id_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3255.99,-3911.69C3272.42,-3907.32 3289.23,-3901.83 3304.39,-3895 3652.23,-3738.23 3776.68,-3641.81 3906.39,-3283 3953.98,-3151.33 3908.29,-2789.79 3942.39,-2654 3962.89,-2572.35 4011.26,-2484.61 4036.85,-2441.71"/>
<polygon fill="black" stroke="black" points="4039.93,-2443.38 4042.09,-2433.01 4033.93,-2439.77 4039.93,-2443.38"/>
</g>
<!-- serde_utils.read_text&#45;&gt;serde_utils.read_text -->
<g id="edge125" class="edge">
<title>serde_utils.read_text&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M4004.46,-2433.15C3996.78,-2442.54 4013.42,-2451 4054.39,-2451 4079.67,-2451 4095.69,-2447.78 4102.45,-2443.1"/>
<polygon fill="black" stroke="black" points="4105.91,-2443.63 4104.32,-2433.15 4099.03,-2442.33 4105.91,-2443.63"/>
</g>
<!-- tg_client._load_progress -->
<g id="node71" class="node">
<title>tg_client._load_progress</title>
<g id="a_node71"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="1430.39,-3160 1241.39,-3160 1241.39,-3124 1430.39,-3124 1430.39,-3160"/>
<text text-anchor="middle" x="1335.89" y="-3138.3" font-family="Times,serif" font-size="14.00">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;serde_utils.read_text -->
<g id="edge54" class="edge">
<title>tg_client._load_progress&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1395.9,-3123.94C1565.8,-3073.01 2071.55,-2928.75 2503.39,-2880 2613.14,-2867.61 2911.55,-2813.38 3000.39,-2879 3044.15,-2911.32 2995.01,-2960.68 3036.39,-2996 3127.89,-3074.1 3210.95,-2958.22 3304.39,-3034 3340.75,-3063.49 3302.04,-3106.14 3340.39,-3133 3546.82,-3277.59 3731.62,-3279.6 3906.39,-3098 3975.03,-3026.67 3917.14,-2749.72 3942.39,-2654 3963.85,-2572.6 4011.8,-2484.75 4037.08,-2441.77"/>
<polygon fill="black" stroke="black" points="4040.16,-2443.44 4042.26,-2433.05 4034.14,-2439.86 4040.16,-2443.44"/>
</g>
<!-- tg_client._save_progress -->
<g id="node72" class="node">
<title>tg_client._save_progress</title>
<g id="a_node72"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="1678.89,-3388 1487.89,-3388 1487.89,-3352 1678.89,-3352 1678.89,-3388"/>
<text text-anchor="middle" x="1583.39" y="-3366.3" font-family="Times,serif" font-size="14.00">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node73" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node73"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1927.89,-3706 1765.89,-3706 1765.89,-3670 1927.89,-3670 1927.89,-3706"/>
<text text-anchor="middle" x="1846.89" y="-3684.3" font-family="Times,serif" font-size="14.00">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge55" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1926.34,-3706.03C2005.94,-3723.34 2132.97,-3748.24 2244.39,-3758 2343.12,-3766.65 2368.32,-3760.88 2467.39,-3758 2704.58,-3751.11 2766.82,-3768.86 3000.39,-3727 3016.86,-3724.05 3020.06,-3719.63 3036.39,-3716 3153.82,-3689.9 3207.51,-3749.32 3304.39,-3678 3334.01,-3656.19 3431.63,-3423.79 3465.05,-3342.71"/>
<polygon fill="black" stroke="black" points="3468.41,-3343.75 3468.97,-3333.17 3461.93,-3341.08 3468.41,-3343.75"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node74" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node74"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1415.39,-3231 1256.39,-3231 1256.39,-3195 1415.39,-3195 1415.39,-3231"/>
<text text-anchor="middle" x="1335.89" y="-3209.3" font-family="Times,serif" font-size="14.00">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge56" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1415.8,-3213C1515.86,-3213 1693.67,-3213 1845.89,-3213 1845.89,-3213 1845.89,-3213 2356.89,-3213 2520.44,-3213 2580.42,-3154.39 2724.39,-3232 2748.17,-3244.82 2737.69,-3266.33 2760.39,-3281 2865.73,-3349.1 2911.64,-3326.82 3036.39,-3340 3154.84,-3352.52 3185.59,-3348.59 3304.39,-3340 3328.86,-3338.23 3355.13,-3335.06 3379.59,-3331.57"/>
<polygon fill="black" stroke="black" points="3380.21,-3335.01 3389.59,-3330.1 3379.19,-3328.09 3380.21,-3335.01"/>
</g>
<!-- tg_client._save_message -->
<g id="node75" class="node">
<title>tg_client._save_message</title>
<g id="a_node75"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="2196.39,-3516 2005.39,-3516 2005.39,-3480 2196.39,-3480 2196.39,-3516"/>
<text text-anchor="middle" x="2100.89" y="-3494.3" font-family="Times,serif" font-size="14.00">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge69" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2102.51,-3479.79C2107.4,-3343.73 2142.04,-2484.73 2244.39,-2249 2343.82,-2019.99 2363.22,-1825 2612.89,-1825 2612.89,-1825 2612.89,-1825 2881.39,-1825 3065.98,-1825 3282.63,-1815.75 3396.74,-1810.16"/>
<polygon fill="black" stroke="black" points="3396.98,-1813.65 3406.79,-1809.66 3396.63,-1806.66 3396.98,-1813.65"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge57" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M2108.67,-3479.91C2125.13,-3438.61 2171.29,-3337.01 2244.39,-3286 2247.31,-3283.96 2250.37,-3282.07 2253.53,-3280.33"/>
<polygon fill="black" stroke="black" points="2255.29,-3283.36 2262.69,-3275.78 2252.18,-3277.09 2255.29,-3283.36"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge58" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M2120.6,-3516.04C2146.45,-3540.04 2195.45,-3582.3 2244.39,-3607 2252.16,-3610.92 2260.49,-3614.44 2268.96,-3617.57"/>
<polygon fill="black" stroke="black" points="2267.97,-3620.93 2278.56,-3620.94 2270.29,-3614.33 2267.97,-3620.93"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge59" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M2196.53,-3506.53C2270.54,-3513.83 2375.87,-3525.59 2467.39,-3541 2487.02,-3544.31 2508.01,-3548.52 2527.76,-3552.79"/>
<polygon fill="black" stroke="black" points="2527.13,-3556.24 2537.65,-3554.96 2528.63,-3549.4 2527.13,-3556.24"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge70" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2111.42,-3516.05C2131.08,-3551.32 2179.76,-3629.16 2244.39,-3666 2331.73,-3715.79 2370.73,-3676.34 2467.39,-3704 2602.68,-3742.72 2622.32,-3796.82 2760.39,-3824 2879,-3847.35 3211.64,-3901.54 3304.39,-3824 3373.68,-3766.07 3314.01,-3710.38 3340.39,-3624 3373.42,-3515.82 3433.94,-3395.14 3461.73,-3342.28"/>
<polygon fill="black" stroke="black" points="3464.94,-3343.7 3466.52,-3333.22 3458.75,-3340.42 3464.94,-3343.7"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge60" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M2131.98,-3516.02C2160.13,-3532.13 2203.81,-3555.26 2244.39,-3569 2340,-3601.36 2372.9,-3576.51 2467.39,-3612 2484.73,-3618.51 2486.87,-3624.62 2503.39,-3633 2614.61,-3689.45 2749.63,-3745.42 2823.83,-3775.15"/>
<polygon fill="black" stroke="black" points="2822.87,-3778.53 2833.45,-3778.99 2825.46,-3772.03 2822.87,-3778.53"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge61" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M2109.62,-3516.12C2127.38,-3555.58 2175.01,-3649.68 2244.39,-3699 2249.52,-3702.65 2255.05,-3705.88 2260.83,-3708.74"/>
<polygon fill="black" stroke="black" points="2259.51,-3711.99 2270.06,-3712.95 2262.41,-3705.62 2259.51,-3711.99"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge62" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M2124.74,-3479.86C2151.83,-3459.19 2199.02,-3425.73 2244.39,-3406 2293.06,-3384.83 2426.1,-3353.54 2518.24,-3333.21"/>
<polygon fill="black" stroke="black" points="2519.13,-3336.6 2528.14,-3331.03 2517.63,-3329.76 2519.13,-3336.6"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge63" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M2196.47,-3498.94C2318.88,-3498.96 2538.5,-3494.97 2724.39,-3470 2725.36,-3469.87 2756.08,-3462.94 2789.92,-3455.29"/>
<polygon fill="black" stroke="black" points="2791.02,-3458.62 2800,-3453 2789.48,-3451.8 2791.02,-3458.62"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge64" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M2113.7,-3479.94C2135.6,-3447.91 2185.64,-3381.13 2244.39,-3345 2250.53,-3341.22 2257.13,-3337.88 2263.95,-3334.91"/>
<polygon fill="black" stroke="black" points="2265.4,-3338.1 2273.35,-3331.1 2262.77,-3331.61 2265.4,-3338.1"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge65" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M2054.94,-3516.15C2047.87,-3525.54 2063.18,-3534 2100.89,-3534 2124.16,-3534 2138.9,-3530.78 2145.12,-3526.1"/>
<polygon fill="black" stroke="black" points="2148.58,-3526.6 2146.84,-3516.15 2141.68,-3525.41 2148.58,-3526.6"/>
</g>
<!-- tg_client._save_media -->
<g id="node76" class="node">
<title>tg_client._save_media</title>
<g id="a_node76"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="2441.89,-3451 2269.89,-3451 2269.89,-3415 2441.89,-3415 2441.89,-3451"/>
<text text-anchor="middle" x="2355.89" y="-3429.3" font-family="Times,serif" font-size="14.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge66" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M2172.03,-3479.98C2203.83,-3471.81 2241.62,-3462.1 2274.56,-3453.64"/>
<polygon fill="black" stroke="black" points="2275.8,-3456.93 2284.61,-3451.05 2274.06,-3450.15 2275.8,-3456.93"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node77" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node77"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="4166.39,-2699 3942.39,-2699 3942.39,-2663 4166.39,-2663 4166.39,-2699"/>
<text text-anchor="middle" x="4054.39" y="-2677.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge67" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M2106.36,-3516.13C2119.09,-3563.75 2160.16,-3693.16 2244.39,-3758 2578.85,-4015.45 2747.32,-3973 3169.39,-3973 3169.39,-3973 3169.39,-3973 3478.39,-3973 3761.24,-3973 3781.48,-3755.78 3906.39,-3502 4046.57,-3217.19 4054.46,-2818.12 4053.84,-2709.33"/>
<polygon fill="black" stroke="black" points="4057.34,-2709.14 4053.75,-2699.17 4050.34,-2709.2 4057.34,-2709.14"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge68" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M2155.85,-3516.08C2182.28,-3524.38 2214.74,-3533.74 2244.39,-3540 2342.18,-3560.64 2376.13,-3528.24 2467.39,-3569 2486.67,-3577.61 2483.59,-3592.65 2503.39,-3600 2595.47,-3634.18 2626.17,-3600.33 2724.39,-3600 2848.99,-3599.58 2993.22,-3598.5 3082.89,-3597.76"/>
<polygon fill="black" stroke="black" points="3083.04,-3601.25 3093.01,-3597.67 3082.98,-3594.25 3083.04,-3601.25"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge72" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2404.55,-3414.89C2432.95,-3404.56 2469.89,-3391.93 2503.39,-3383 2600.07,-3357.22 2640.37,-3394.35 2724.39,-3340 2747.68,-3324.93 2738.87,-3306.51 2760.39,-3289 2864.13,-3204.57 2908.22,-3207.26 3036.39,-3169 3152.19,-3134.44 3190.39,-3163.14 3304.39,-3123 3321.65,-3116.92 3323.32,-3109.6 3340.39,-3103 3352.56,-3098.29 3365.61,-3094.15 3378.65,-3090.55"/>
<polygon fill="black" stroke="black" points="3379.84,-3093.85 3388.6,-3087.89 3378.04,-3087.09 3379.84,-3093.85"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge71" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2442.19,-3422.29C2533.79,-3410.31 2673.08,-3390.53 2724.39,-3375 2853.63,-3335.88 2894.46,-3331.75 3000.39,-3248 3020.75,-3231.9 3014,-3215.15 3036.39,-3202 3140.34,-3140.94 3194.14,-3208.81 3304.39,-3160 3323.17,-3151.68 3321.46,-3138.98 3340.39,-3131 3453.41,-3083.35 3509.9,-3162.25 3614.39,-3098 3638.96,-3082.89 3632.36,-3066.52 3650.39,-3044 3682.17,-3004.3 3723.57,-2962.52 3750.31,-2936.61"/>
<polygon fill="black" stroke="black" points="3753,-2938.88 3757.78,-2929.42 3748.15,-2933.84 3753,-2938.88"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge73" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M2442.13,-3436.33C2459.89,-3437.02 2478.88,-3437.77 2497.51,-3438.49"/>
<polygon fill="black" stroke="black" points="2497.39,-3441.99 2507.52,-3438.88 2497.66,-3435 2497.39,-3441.99"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node79" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node79"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="2987.89,-3507 2772.89,-3507 2772.89,-3471 2987.89,-3471 2987.89,-3507"/>
<text text-anchor="middle" x="2880.39" y="-3485.3" font-family="Times,serif" font-size="14.00">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge74" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M2416.93,-3451.01C2443.22,-3458.15 2474.59,-3465.68 2503.39,-3470 2589.51,-3482.92 2687.83,-3487.54 2762.33,-3489"/>
<polygon fill="black" stroke="black" points="2762.62,-3492.5 2772.68,-3489.18 2762.74,-3485.5 2762.62,-3492.5"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;serde_utils.write_md -->
<g id="edge202" class="edge">
<title>image_io.write_image_meta&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M2988.22,-3489C3017.3,-3489 3048.56,-3489 3076.78,-3489"/>
<polygon fill="black" stroke="black" points="3077.04,-3492.5 3087.04,-3489 3077.04,-3485.5 3077.04,-3492.5"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node80" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node80"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="1941.89,-3490 1751.89,-3490 1751.89,-3454 1941.89,-3454 1941.89,-3490"/>
<text text-anchor="middle" x="1846.89" y="-3468.3" font-family="Times,serif" font-size="14.00">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge75" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M1942.08,-3481.72C1959.26,-3483.49 1977.28,-3485.35 1994.76,-3487.15"/>
<polygon fill="black" stroke="black" points="1994.66,-3490.66 2004.97,-3488.21 1995.38,-3483.7 1994.66,-3490.66"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node81" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node81"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="3295.89,-2895 3044.89,-2895 3044.89,-2859 3295.89,-2859 3295.89,-2895"/>
<text text-anchor="middle" x="3170.39" y="-2873.3" font-family="Times,serif" font-size="14.00">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge78" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3241.64,-2858.87C3265.59,-2849.03 3289.94,-2834.18 3304.39,-2812 3361.01,-2725.07 3285.42,-1966.99 3340.39,-1879 3354.93,-1855.72 3379.6,-1839.39 3403.97,-1828.16"/>
<polygon fill="black" stroke="black" points="3405.51,-1831.31 3413.28,-1824.11 3402.71,-1824.9 3405.51,-1831.31"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge76" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3295.93,-2888.69C3310.91,-2889.91 3325.99,-2891.05 3340.39,-2892 3447.64,-2899.09 3569.89,-2904.15 3657.76,-2907.25"/>
<polygon fill="black" stroke="black" points="3657.64,-2910.75 3667.76,-2907.6 3657.89,-2903.76 3657.64,-2910.75"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge77" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3251.89,-2895.08C3269.28,-2899.35 3287.51,-2904.09 3304.39,-2909 3456.22,-2953.16 3631.48,-3016.51 3719.94,-3049.37"/>
<polygon fill="black" stroke="black" points="3718.93,-3052.73 3729.52,-3052.93 3721.37,-3046.17 3718.93,-3052.73"/>
</g>
<!-- tg_client._download_messages -->
<g id="node82" class="node">
<title>tg_client._download_messages</title>
<g id="a_node82"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="1700.39,-3474 1466.39,-3474 1466.39,-3438 1700.39,-3438 1700.39,-3474"/>
<text text-anchor="middle" x="1583.39" y="-3452.3" font-family="Times,serif" font-size="14.00">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge79" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1700.61,-3463.11C1714.2,-3463.94 1727.99,-3464.79 1741.41,-3465.61"/>
<polygon fill="black" stroke="black" points="1741.39,-3469.11 1751.58,-3466.23 1741.81,-3462.13 1741.39,-3469.11"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node83" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node83"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="1694.39,-2806 1472.39,-2806 1472.39,-2770 1694.39,-2770 1694.39,-2806"/>
<text text-anchor="middle" x="1583.39" y="-2784.3" font-family="Times,serif" font-size="14.00">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node84" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node84"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="1688.39,-2860 1478.39,-2860 1478.39,-2824 1688.39,-2824 1688.39,-2860"/>
<text text-anchor="middle" x="1583.39" y="-2838.3" font-family="Times,serif" font-size="14.00">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge85" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1688.56,-2825.26C1692.86,-2822.31 1696.85,-2818.91 1700.39,-2815 1742.04,-2768.98 1718.64,-2597.48 1736.39,-2538 1842.43,-2182.66 1729.07,-1787 2099.89,-1787 2099.89,-1787 2099.89,-1787 2881.39,-1787 3065.98,-1787 3282.63,-1796.25 3396.74,-1801.84"/>
<polygon fill="black" stroke="black" points="3396.63,-1805.34 3406.79,-1802.34 3396.98,-1798.35 3396.63,-1805.34"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;serde_utils.load_json -->
<g id="edge83" class="edge">
<title>tg_client.refetch_messages&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1675.93,-2823.93C1684.33,-2821.31 1692.6,-2818.34 1700.39,-2815 1749.22,-2794.04 2046.74,-2552 2099.89,-2552 2099.89,-2552 2099.89,-2552 2614.89,-2552 2768.9,-2552 3169.13,-2555.65 3304.39,-2482 3326.88,-2469.75 3318.01,-2449.46 3340.39,-2437 3447.56,-2377.34 3503.58,-2456.61 3614.39,-2404 3677.64,-2373.97 3731.82,-2309.67 3758.91,-2273.36"/>
<polygon fill="black" stroke="black" points="3761.8,-2275.33 3764.89,-2265.2 3756.15,-2271.19 3761.8,-2275.33"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;serde_utils.write_json -->
<g id="edge84" class="edge">
<title>tg_client.refetch_messages&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1688.79,-2825.85C1693.07,-2822.75 1696.98,-2819.16 1700.39,-2815 1783.03,-2714.14 1663.35,-1750.02 1736.39,-1642 1875.51,-1436.24 2517.27,-1244.86 2760.39,-1194 2978.35,-1148.41 3241.88,-1166.62 3380.47,-1181.67"/>
<polygon fill="black" stroke="black" points="3380.31,-1185.17 3390.63,-1182.79 3381.08,-1178.22 3380.31,-1185.17"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge86" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1600.64,-2860.01C1660.32,-2924.06 1875.61,-3137 2099.89,-3137 2099.89,-3137 2099.89,-3137 2356.89,-3137 2522.53,-3137 2569.83,-3139.44 2724.39,-3199 2742.1,-3205.83 2743.33,-3213.66 2760.39,-3222 2877.32,-3279.19 2908.11,-3297.9 3036.39,-3320 3153.1,-3340.11 3289.81,-3334.03 3379.5,-3326.1"/>
<polygon fill="black" stroke="black" points="3380.01,-3329.57 3389.66,-3325.18 3379.38,-3322.6 3380.01,-3329.57"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge80" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M1688.49,-2842C1700.85,-2842 1713.55,-2842 1726.11,-2842"/>
<polygon fill="black" stroke="black" points="1726.14,-2845.5 1736.14,-2842 1726.14,-2838.5 1726.14,-2845.5"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge81" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1591.93,-2860.18C1628.76,-2948.91 1789.71,-3336.66 1834.36,-3444.23"/>
<polygon fill="black" stroke="black" points="1831.25,-3445.86 1838.31,-3453.75 1837.71,-3443.17 1831.25,-3445.86"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge82" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M1675.35,-2823.95C1695.39,-2820.51 1716.55,-2817.27 1736.39,-2815 1897.11,-2796.6 1938.11,-2796 2099.89,-2796 2099.89,-2796 2099.89,-2796 2614.89,-2796 2782.58,-2796 2975.84,-2832.72 3084.21,-2856.71"/>
<polygon fill="black" stroke="black" points="3083.59,-2860.16 3094.11,-2858.92 3085.11,-2853.33 3083.59,-2860.16"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node85" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node85"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1205.39,-3388 1024.39,-3388 1024.39,-3352 1205.39,-3352 1205.39,-3388"/>
<text text-anchor="middle" x="1114.89" y="-3366.3" font-family="Times,serif" font-size="14.00">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge93" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1193.14,-3388.07C1197.53,-3390.66 1201.66,-3393.62 1205.39,-3397 1236.66,-3425.42 1212.85,-3453.84 1241.39,-3485 1303.46,-3552.77 1691.12,-3798.84 1993.39,-3872 2039.62,-3883.19 3241.6,-3912.57 3304.39,-3858 3344.1,-3823.49 3325.66,-3674.51 3340.39,-3624 3372.04,-3515.41 3433.26,-3394.93 3461.48,-3342.21"/>
<polygon fill="black" stroke="black" points="3464.69,-3343.63 3466.35,-3333.17 3458.52,-3340.31 3464.69,-3343.63"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge87" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1196.37,-3388.28C1199.69,-3390.83 1202.73,-3393.72 1205.39,-3397 1264.67,-3470.1 1177.35,-3750.02 1241.39,-3819 1504.32,-4102.22 1713.43,-3957 2099.89,-3957 2099.89,-3957 2099.89,-3957 2356.89,-3957 2616.64,-3957 2922.79,-3941.5 3074.42,-3932.78"/>
<polygon fill="black" stroke="black" points="3074.84,-3936.26 3084.62,-3932.19 3074.44,-3929.27 3074.84,-3936.26"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge88" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1124.1,-3351.97C1141.23,-3316.07 1184.01,-3234.92 1241.39,-3186 1251.19,-3177.64 1262.85,-3170.51 1274.55,-3164.58"/>
<polygon fill="black" stroke="black" points="1276.42,-3167.56 1283.91,-3160.07 1273.39,-3161.25 1276.42,-3167.56"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge89" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1205.56,-3370C1283.3,-3370 1395.88,-3370 1477.72,-3370"/>
<polygon fill="black" stroke="black" points="1477.8,-3373.5 1487.8,-3370 1477.8,-3366.5 1477.8,-3373.5"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge90" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1184.78,-3388.07C1191.88,-3390.73 1198.87,-3393.7 1205.39,-3397 1223.23,-3406.03 1224.11,-3413.93 1241.39,-3424 1429.83,-3533.81 1672.45,-3626.35 1784.35,-3666.54"/>
<polygon fill="black" stroke="black" points="1783.2,-3669.84 1793.79,-3669.92 1785.56,-3663.25 1783.2,-3669.84"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge91" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1141.01,-3351.99C1180.51,-3323.67 1257.17,-3268.71 1301.34,-3237.05"/>
<polygon fill="black" stroke="black" points="1303.63,-3239.71 1309.72,-3231.04 1299.56,-3234.02 1303.63,-3239.71"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge92" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1205.56,-3386.53C1282.21,-3400.66 1392.71,-3421.03 1474.25,-3436.06"/>
<polygon fill="black" stroke="black" points="1474.08,-3439.59 1484.55,-3437.96 1475.35,-3432.71 1474.08,-3439.59"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node86" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node86"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="3268.39,-3247 3072.39,-3247 3072.39,-3211 3268.39,-3211 3268.39,-3247"/>
<text text-anchor="middle" x="3170.39" y="-3225.3" font-family="Times,serif" font-size="14.00">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge96" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3197.51,-3210.9C3229.5,-3187 3282.16,-3141.62 3304.39,-3088 3355.85,-2963.85 3269.69,-1993.29 3340.39,-1879 3354.83,-1855.66 3379.48,-1839.31 3403.86,-1828.1"/>
<polygon fill="black" stroke="black" points="3405.4,-1831.24 3413.17,-1824.04 3402.61,-1824.82 3405.4,-1831.24"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge94" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3268.44,-3212.43C3390.67,-3190.81 3587.99,-3153.15 3614.39,-3131 3646.44,-3104.1 3627.55,-3079.06 3650.39,-3044 3677.94,-3001.7 3719.91,-2960.91 3747.98,-2935.9"/>
<polygon fill="black" stroke="black" points="3750.31,-2938.52 3755.5,-2929.28 3745.68,-2933.26 3750.31,-2938.52"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge95" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3268.82,-3241.45C3361.12,-3249.31 3501.96,-3250.93 3614.39,-3207 3673.88,-3183.75 3727.53,-3129.65 3755.98,-3097.12"/>
<polygon fill="black" stroke="black" points="3758.79,-3099.22 3762.66,-3089.35 3753.48,-3094.66 3758.79,-3099.22"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge97" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3263.09,-3247.07C3277.16,-3250.98 3291.33,-3255.6 3304.39,-3261 3321.71,-3268.17 3323.04,-3275.87 3340.39,-3283 3352.94,-3288.16 3366.49,-3292.59 3380.02,-3296.36"/>
<polygon fill="black" stroke="black" points="3379.28,-3299.79 3389.84,-3299 3381.09,-3293.03 3379.28,-3299.79"/>
</g>
<!-- tg_client.main -->
<g id="node87" class="node">
<title>tg_client.main</title>
<polygon fill="none" stroke="black" points="977.19,-3277 859.19,-3277 859.19,-3241 977.19,-3241 977.19,-3277"/>
<text text-anchor="middle" x="918.19" y="-3255.3" font-family="Times,serif" font-size="14.00">tg_client.main</text>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge98" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M977.37,-3259C1057.75,-3259 1207.33,-3259 1334.89,-3259 1334.89,-3259 1334.89,-3259 1847.89,-3259 1988.23,-3259 2150.42,-3259 2252.81,-3259"/>
<polygon fill="black" stroke="black" points="2252.83,-3262.5 2262.83,-3259 2252.83,-3255.5 2252.83,-3262.5"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge99" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M928.16,-3277.15C943.67,-3306.69 978.34,-3365.07 1024.39,-3397 1026.49,-3398.46 1028.67,-3399.84 1030.91,-3401.14"/>
<polygon fill="black" stroke="black" points="1029.36,-3404.28 1039.84,-3405.83 1032.61,-3398.08 1029.36,-3404.28"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge100" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M921.45,-3277.34C935.7,-3383.94 1022.75,-3919 1334.89,-3919 1334.89,-3919 1334.89,-3919 1584.39,-3919 1736.42,-3919 1911.14,-3887.07 2013.14,-3865.16"/>
<polygon fill="black" stroke="black" points="2014.06,-3868.55 2023.09,-3863.01 2012.58,-3861.7 2014.06,-3868.55"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge101" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M923.05,-3277.24C932.48,-3316.78 960.75,-3410.13 1024.39,-3451 1262.16,-3603.71 1623.78,-3532.68 1775.26,-3492.72"/>
<polygon fill="black" stroke="black" points="1776.61,-3495.98 1785.37,-3490.02 1774.8,-3489.22 1776.61,-3495.98"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge102" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M920.06,-3240.78C923.54,-3188.04 940.73,-3033.6 1024.39,-2948 1139.69,-2830.02 1335.68,-2797.5 1462.03,-2789.39"/>
<polygon fill="black" stroke="black" points="1462.37,-2792.87 1472.14,-2788.78 1461.95,-2785.89 1462.37,-2792.87"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge103" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M924.63,-3240.77C936.69,-3203.23 969.05,-3116.61 1024.39,-3066 1152.36,-2948.97 1349.22,-2889.5 1471.67,-2862.17"/>
<polygon fill="black" stroke="black" points="1472.44,-2865.58 1481.46,-2860.02 1470.94,-2858.74 1472.44,-2865.58"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge104" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M950.91,-3277.08C984.28,-3296.11 1036.93,-3326.12 1073.31,-3346.87"/>
<polygon fill="black" stroke="black" points="1071.77,-3350.01 1082.19,-3351.93 1075.23,-3343.93 1071.77,-3350.01"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge105" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M942.49,-3240.85C1003.32,-3195.34 1173.41,-3080 1334.89,-3080 1334.89,-3080 1334.89,-3080 2101.89,-3080 2379.67,-3080 2449.64,-3095.07 2724.39,-3136 2851.74,-3154.97 2997.49,-3187.53 3086.47,-3208.65"/>
<polygon fill="black" stroke="black" points="3085.7,-3212.07 3096.24,-3210.98 3087.32,-3205.26 3085.7,-3212.07"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node88" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node88"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="4164.89,-903 3943.89,-903 3943.89,-867 4164.89,-867 4164.89,-903"/>
<text text-anchor="middle" x="4054.39" y="-881.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge107" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3844.07,-903.12C3867.82,-913.21 3892.32,-928.44 3906.39,-951 3950.77,-1022.15 3922.08,-2378.64 3942.39,-2460 3961.19,-2535.33 4008.81,-2614.5 4035.16,-2654.51"/>
<polygon fill="black" stroke="black" points="4032.29,-2656.51 4040.75,-2662.89 4038.11,-2652.63 4032.29,-2656.51"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge106" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M3906.76,-885C3915.6,-885 3924.49,-885 3933.29,-885"/>
<polygon fill="black" stroke="black" points="3933.57,-888.5 3943.57,-885 3933.57,-881.5 3933.57,-888.5"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node90" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node90"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3884.39,-996 3672.39,-996 3672.39,-960 3884.39,-960 3884.39,-996"/>
<text text-anchor="middle" x="3778.39" y="-974.3" font-family="Times,serif" font-size="14.00">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node91" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node91"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="3583.39,-996 3371.39,-996 3371.39,-960 3583.39,-960 3583.39,-996"/>
<text text-anchor="middle" x="3477.39" y="-974.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge109" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M3583.8,-978C3609.11,-978 3636.27,-978 3662,-978"/>
<polygon fill="black" stroke="black" points="3662.17,-981.5 3672.17,-978 3662.17,-974.5 3662.17,-981.5"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node92" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node92"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="3280.39,-947 3060.39,-947 3060.39,-911 3280.39,-911 3280.39,-947"/>
<text text-anchor="middle" x="3170.39" y="-925.3" font-family="Times,serif" font-size="14.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge110" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3280.68,-917.21C3289.3,-913.28 3297.37,-908.29 3304.39,-902 3343.62,-866.8 3301.08,-824.12 3340.39,-789 3341.54,-787.97 3342.72,-786.98 3343.92,-786.02"/>
<polygon fill="black" stroke="black" points="3346.06,-788.79 3352.21,-780.16 3342.02,-783.08 3346.06,-788.79"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge113" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3241.2,-947.05C3265.25,-956.88 3289.79,-971.77 3304.39,-994 3352.31,-1066.99 3283.45,-1712.8 3340.39,-1779 3354.48,-1795.39 3375.42,-1803.6 3396.66,-1807.36"/>
<polygon fill="black" stroke="black" points="3396.35,-1810.85 3406.75,-1808.82 3397.36,-1803.92 3396.35,-1810.85"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge114" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3242.24,-947.11C3266.11,-956.93 3290.25,-971.77 3304.39,-994 3367.14,-1092.63 3307.13,-2985.92 3340.39,-3098 3363.18,-3174.8 3421.26,-3250.99 3453.66,-3289.38"/>
<polygon fill="black" stroke="black" points="3451.01,-3291.66 3460.17,-3296.99 3456.33,-3287.11 3451.01,-3291.66"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge111" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3280.64,-946.55C3306.78,-950.75 3334.78,-955.25 3361.18,-959.49"/>
<polygon fill="black" stroke="black" points="3360.79,-962.97 3371.22,-961.1 3361.9,-956.06 3360.79,-962.97"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge112" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3275.74,-947.06C3285.8,-950.85 3295.54,-955.44 3304.39,-961 3325.79,-974.43 3318.72,-992 3340.39,-1005 3359.63,-1016.55 3382.89,-1023.27 3404.69,-1027.14"/>
<polygon fill="black" stroke="black" points="3404.16,-1030.6 3414.59,-1028.73 3405.27,-1023.69 3404.16,-1030.6"/>
</g>
<!-- lot_io.read_lots&#45;&gt;serde_utils.load_json -->
<g id="edge116" class="edge">
<title>lot_io.read_lots&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3540.01,-1028.36C3566.89,-1030.29 3596.34,-1037.85 3614.39,-1059 3682.74,-1139.1 3623.17,-1904.28 3650.39,-2006 3672.87,-2090.03 3728.6,-2177.71 3758.2,-2220.42"/>
<polygon fill="black" stroke="black" points="3755.49,-2222.66 3764.1,-2228.84 3761.22,-2218.64 3755.49,-2222.66"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node94" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node94"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="3842.89,-772 3713.89,-772 3713.89,-736 3842.89,-736 3842.89,-772"/>
<text text-anchor="middle" x="3778.39" y="-750.3" font-family="Times,serif" font-size="14.00">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge115" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3539.89,-1033.74C3565.93,-1031.27 3594.73,-1023.8 3614.39,-1005 3662.99,-958.5 3614.52,-914.9 3650.39,-858 3671.8,-824.03 3708.12,-795.94 3736.45,-777.56"/>
<polygon fill="black" stroke="black" points="3738.39,-780.47 3744.96,-772.17 3734.64,-774.56 3738.39,-780.47"/>
</g>
<!-- lot_io.get_seller -->
<g id="node95" class="node">
<title>lot_io.get_seller</title>
<g id="a_node95"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3842.89,-543 3713.89,-543 3713.89,-507 3842.89,-507 3842.89,-543"/>
<text text-anchor="middle" x="3778.39" y="-521.3" font-family="Times,serif" font-size="14.00">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node96" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node96"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3560.39,-650 3394.39,-650 3394.39,-614 3560.39,-614 3560.39,-650"/>
<text text-anchor="middle" x="3477.39" y="-628.3" font-family="Times,serif" font-size="14.00">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node97" class="node">
<title>lot_io.write_lots</title>
<g id="a_node97"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="3235.39,-671 3105.39,-671 3105.39,-635 3235.39,-635 3235.39,-671"/>
<text text-anchor="middle" x="3170.39" y="-649.3" font-family="Times,serif" font-size="14.00">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;serde_utils.write_json -->
<g id="edge120" class="edge">
<title>lot_io.write_lots&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3196.67,-671.14C3228.04,-695.24 3280.32,-740.99 3304.39,-794 3338.82,-869.82 3284.51,-1105.25 3340.39,-1167 3351.15,-1178.9 3365.54,-1186.43 3380.92,-1191.07"/>
<polygon fill="black" stroke="black" points="3380.05,-1194.45 3390.61,-1193.59 3381.81,-1187.68 3380.05,-1194.45"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge117" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3235.72,-669.21C3267.15,-676.78 3305.6,-685.53 3340.39,-692 3467.39,-715.62 3616.62,-735.02 3703.74,-745.51"/>
<polygon fill="black" stroke="black" points="3703.44,-749 3713.79,-746.71 3704.27,-742.05 3703.44,-749"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge118" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3235.67,-667.55C3323.97,-684.53 3486.4,-704.85 3614.39,-659 3674.16,-637.59 3727.71,-583.75 3756.06,-551.21"/>
<polygon fill="black" stroke="black" points="3758.88,-553.3 3762.72,-543.42 3753.56,-548.75 3758.88,-553.3"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge119" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M3235.7,-648.57C3278.77,-645.61 3336.15,-641.66 3384.08,-638.36"/>
<polygon fill="black" stroke="black" points="3384.42,-641.84 3394.16,-637.66 3383.94,-634.86 3384.42,-641.84"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node100" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node100"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="3550.39,-942 3404.39,-942 3404.39,-906 3550.39,-906 3550.39,-942"/>
<text text-anchor="middle" x="3477.39" y="-920.3" font-family="Times,serif" font-size="14.00">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node101" class="node">
<title>lot_io.get_lot</title>
<g id="a_node101"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3224.39,-2365 3116.39,-2365 3116.39,-2329 3224.39,-2329 3224.39,-2365"/>
<text text-anchor="middle" x="3170.39" y="-2343.3" font-family="Times,serif" font-size="14.00">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge123" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3224.52,-2335.23C3253.31,-2325.9 3286.56,-2309.65 3304.39,-2282 3378.07,-2167.75 3252.59,-1162.79 3340.39,-1059 3356.1,-1040.43 3380.6,-1032.31 3404.5,-1029.29"/>
<polygon fill="black" stroke="black" points="3405.07,-1032.75 3414.68,-1028.29 3404.39,-1025.78 3405.07,-1032.75"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge124" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3224.53,-2341.07C3308.32,-2333.12 3475.88,-2322.91 3614.39,-2350 3656.57,-2358.25 3701.76,-2377.14 3733.83,-2392.45"/>
<polygon fill="black" stroke="black" points="3732.41,-2395.65 3742.93,-2396.86 3735.46,-2389.35 3732.41,-2395.65"/>
</g>
<!-- serde_utils.parse_md -->
<g id="node103" class="node">
<title>serde_utils.parse_md</title>
<g id="a_node103"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="3561.39,-1104 3393.39,-1104 3393.39,-1068 3561.39,-1068 3561.39,-1104"/>
<text text-anchor="middle" x="3477.39" y="-1082.3" font-family="Times,serif" font-size="14.00">serde_utils.parse_md</text>
</a>
</g>
</g>
<!-- serde_utils.parse_md&#45;&gt;serde_utils.read_md -->
<g id="edge127" class="edge">
<title>serde_utils.parse_md&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3561.53,-1086.03C3581.35,-1090.09 3600.7,-1098.12 3614.39,-1113 3662.68,-1165.51 3634.01,-1362.57 3650.39,-1432 3679.34,-1554.77 3738.74,-1693.65 3764.73,-1751.47"/>
<polygon fill="black" stroke="black" points="3761.59,-1753.01 3768.9,-1760.67 3767.96,-1750.12 3761.59,-1753.01"/>
</g>
<!-- telegram_bot._t -->
<g id="node104" class="node">
<title>telegram_bot._t</title>
<g id="a_node104"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="2944.39,-2979 2816.39,-2979 2816.39,-2943 2944.39,-2943 2944.39,-2979"/>
<text text-anchor="middle" x="2880.39" y="-2957.3" font-family="Times,serif" font-size="14.00">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node105" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node105"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="2988.89,-3033 2771.89,-3033 2771.89,-2997 2988.89,-2997 2988.89,-3033"/>
<text text-anchor="middle" x="2880.39" y="-3011.3" font-family="Times,serif" font-size="14.00">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node106" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node106"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="3274.39,-3079 3066.39,-3079 3066.39,-3043 3274.39,-3043 3274.39,-3079"/>
<text text-anchor="middle" x="3170.39" y="-3057.3" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge129" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2989.04,-3032.19C3010.93,-3035.69 3034.02,-3039.38 3056.1,-3042.91"/>
<polygon fill="black" stroke="black" points="3055.74,-3046.39 3066.16,-3044.51 3056.84,-3039.48 3055.74,-3046.39"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node107" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node107"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="2716.89,-2411 2510.89,-2411 2510.89,-2375 2716.89,-2375 2716.89,-2411"/>
<text text-anchor="middle" x="2613.89" y="-2389.3" font-family="Times,serif" font-size="14.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;serde_utils.read_text -->
<g id="edge130" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2679.57,-2411.05C2761.73,-2432.95 2908.26,-2468.62 3036.39,-2482 3421.37,-2522.2 3522.28,-2489.87 3906.39,-2442 3924.09,-2439.79 3942.89,-2436.82 3960.92,-2433.66"/>
<polygon fill="black" stroke="black" points="3961.62,-2437.09 3970.85,-2431.89 3960.39,-2430.2 3961.62,-2437.09"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node108" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node108"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="2707.89,-2319 2519.89,-2319 2519.89,-2283 2707.89,-2283 2707.89,-2319"/>
<text text-anchor="middle" x="2613.89" y="-2297.3" font-family="Times,serif" font-size="14.00">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;serde_utils.read_text -->
<g id="edge131" class="edge">
<title>telegram_bot.load_state&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2708.11,-2299.82C2885.12,-2298.4 3281.92,-2299.13 3614.39,-2328 3745.07,-2339.35 3778.33,-2342.56 3906.39,-2371 3934.17,-2377.17 3964.37,-2385.86 3990.13,-2393.88"/>
<polygon fill="black" stroke="black" points="3989.18,-2397.25 3999.77,-2396.92 3991.29,-2390.57 3989.18,-2397.25"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node109" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="2975.89,-1920 2784.89,-1920 2784.89,-1884 2975.89,-1884 2975.89,-1920"/>
<text text-anchor="middle" x="2880.39" y="-1898.3" font-family="Times,serif" font-size="14.00">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node110" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node110"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="3291.39,-2273 3049.39,-2273 3049.39,-2237 3291.39,-2237 3291.39,-2273"/>
<text text-anchor="middle" x="3170.39" y="-2251.3" font-family="Times,serif" font-size="14.00">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge132" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M3291.49,-2251.85C3309.78,-2251.37 3328.72,-2250.87 3347.18,-2250.39"/>
<polygon fill="black" stroke="black" points="3347.49,-2253.88 3357.39,-2250.12 3347.3,-2246.88 3347.49,-2253.88"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node111" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="3286.89,-1943 3053.89,-1943 3053.89,-1907 3286.89,-1907 3286.89,-1943"/>
<text text-anchor="middle" x="3170.39" y="-1921.3" font-family="Times,serif" font-size="14.00">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge133" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3287.03,-1912.42C3293.49,-1908.54 3299.37,-1903.79 3304.39,-1898 3394.79,-1793.72 3250.13,-1382.4 3340.39,-1278 3351.16,-1265.54 3365.87,-1257.74 3381.64,-1252.99"/>
<polygon fill="black" stroke="black" points="3382.78,-1256.31 3391.58,-1250.42 3381.02,-1249.54 3382.78,-1256.31"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node112" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="3000.39,-2227 2760.39,-2227 2760.39,-2191 3000.39,-2191 3000.39,-2227"/>
<text text-anchor="middle" x="2880.39" y="-2205.3" font-family="Times,serif" font-size="14.00">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge134" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2911.24,-2227.02C2939.82,-2246.13 2981.33,-2279.17 3000.39,-2320 3064.01,-2456.32 2953.35,-2870.56 3036.39,-2996 3049.18,-3015.32 3069.45,-3029.1 3090.36,-3038.83"/>
<polygon fill="black" stroke="black" points="3089.09,-3042.1 3099.66,-3042.9 3091.9,-3035.69 3089.09,-3042.1"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge135" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M2990.18,-2190.92C2993.85,-2188.29 2997.28,-2185.33 3000.39,-2182 3071.03,-2106.4 2964.89,-2026.79 3036.39,-1952 3039.11,-1949.15 3042.05,-1946.56 3045.16,-1944.2"/>
<polygon fill="black" stroke="black" points="3047.36,-1946.94 3053.77,-1938.5 3043.5,-1941.1 3047.36,-1946.94"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node113" class="node">
<title>telegram_bot._send_queue</title>
<polygon fill="none" stroke="black" points="2983.39,-2365 2777.39,-2365 2777.39,-2329 2983.39,-2329 2983.39,-2365"/>
<text text-anchor="middle" x="2880.39" y="-2343.3" font-family="Times,serif" font-size="14.00">telegram_bot._send_queue</text>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge136" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M2983.74,-2347C3024.5,-2347 3070.13,-2347 3105.95,-2347"/>
<polygon fill="black" stroke="black" points="3106.26,-2350.5 3116.26,-2347 3106.26,-2343.5 3106.26,-2350.5"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge137" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2888.74,-2365.05C2909.66,-2417.24 2970.03,-2573.12 3000.39,-2708 3014.55,-2770.92 2998.9,-2943.52 3036.39,-2996 3050.12,-3015.22 3071.13,-3029.02 3092.42,-3038.81"/>
<polygon fill="black" stroke="black" points="3091.31,-3042.14 3101.88,-3042.89 3094.09,-3035.71 3091.31,-3042.14"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node114" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node114"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="2450.89,-2369 2260.89,-2369 2260.89,-2333 2450.89,-2333 2450.89,-2369"/>
<text text-anchor="middle" x="2355.89" y="-2347.3" font-family="Times,serif" font-size="14.00">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge138" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2451.12,-2366.46C2467.18,-2369.09 2484,-2371.85 2500.47,-2374.56"/>
<polygon fill="black" stroke="black" points="2500.23,-2378.06 2510.67,-2376.23 2501.37,-2371.16 2500.23,-2378.06"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node115" class="node">
<title>telegram_bot.start_cmd</title>
<polygon fill="none" stroke="black" points="2707.39,-2979 2520.39,-2979 2520.39,-2943 2707.39,-2943 2707.39,-2979"/>
<text text-anchor="middle" x="2613.89" y="-2957.3" font-family="Times,serif" font-size="14.00">telegram_bot.start_cmd</text>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge139" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2707.4,-2961C2739.65,-2961 2775.39,-2961 2805.89,-2961"/>
<polygon fill="black" stroke="black" points="2806.02,-2964.5 2816.02,-2961 2806.02,-2957.5 2806.02,-2964.5"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge140" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2703.33,-2979.06C2728.26,-2984.14 2755.52,-2989.71 2780.99,-2994.91"/>
<polygon fill="black" stroke="black" points="2780.53,-2998.39 2791.03,-2996.96 2781.93,-2991.53 2780.53,-2998.39"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node116" class="node">
<title>telegram_bot.lang_cmd</title>
<polygon fill="none" stroke="black" points="2705.39,-3033 2522.39,-3033 2522.39,-2997 2705.39,-2997 2705.39,-3033"/>
<text text-anchor="middle" x="2613.89" y="-3011.3" font-family="Times,serif" font-size="14.00">telegram_bot.lang_cmd</text>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge141" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2703.33,-2996.94C2736.67,-2990.14 2774.19,-2982.48 2806,-2975.98"/>
<polygon fill="black" stroke="black" points="2807.02,-2979.35 2816.12,-2973.92 2805.62,-2972.49 2807.02,-2979.35"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge142" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2705.54,-3015C2723.54,-3015 2742.69,-3015 2761.45,-3015"/>
<polygon fill="black" stroke="black" points="2761.51,-3018.5 2771.51,-3015 2761.51,-3011.5 2761.51,-3018.5"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge143" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2701.15,-3033.02C2720.56,-3036.51 2741.12,-3039.78 2760.39,-3042 2859.87,-3053.49 2973.71,-3058.08 3055.99,-3059.9"/>
<polygon fill="black" stroke="black" points="3056.05,-3063.4 3066.12,-3060.11 3056.19,-3056.4 3056.05,-3063.4"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node117" class="node">
<title>telegram_bot.vote_callback</title>
<polygon fill="none" stroke="black" points="2719.39,-2925 2508.39,-2925 2508.39,-2889 2719.39,-2889 2719.39,-2925"/>
<text text-anchor="middle" x="2613.89" y="-2903.3" font-family="Times,serif" font-size="14.00">telegram_bot.vote_callback</text>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge144" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2703.33,-2925.06C2736.67,-2931.86 2774.19,-2939.52 2806,-2946.02"/>
<polygon fill="black" stroke="black" points="2805.62,-2949.51 2816.12,-2948.08 2807.02,-2942.65 2805.62,-2949.51"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge145" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2708.99,-2925.08C2714.4,-2927.67 2719.58,-2930.62 2724.39,-2934 2747.99,-2950.58 2736.63,-2971.64 2760.39,-2988 2762.53,-2989.47 2764.73,-2990.86 2766.99,-2992.18"/>
<polygon fill="black" stroke="black" points="2765.49,-2995.35 2775.97,-2996.9 2768.75,-2989.15 2765.49,-2995.35"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge146" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2697.76,-2888.96C2782.36,-2875.55 2913.3,-2869.26 3000.39,-2934 3036.62,-2960.94 3002.51,-2999.15 3036.39,-3029 3042.53,-3034.41 3049.42,-3038.94 3056.76,-3042.74"/>
<polygon fill="black" stroke="black" points="3055.72,-3046.12 3066.27,-3047.16 3058.67,-3039.77 3055.72,-3046.12"/>
</g>
<!-- telegram_bot.main -->
<g id="node118" class="node">
<title>telegram_bot.main</title>
<polygon fill="none" stroke="black" points="2431.39,-2294 2280.39,-2294 2280.39,-2258 2431.39,-2258 2431.39,-2294"/>
<text text-anchor="middle" x="2355.89" y="-2272.3" font-family="Times,serif" font-size="14.00">telegram_bot.main</text>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge147" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2409.68,-2294.05C2428.73,-2301.79 2449.83,-2311.88 2467.39,-2324 2486.27,-2337.04 2483.73,-2349.17 2503.39,-2361 2509.69,-2364.79 2516.46,-2368.16 2523.44,-2371.14"/>
<polygon fill="black" stroke="black" points="2522.48,-2374.52 2533.07,-2374.97 2525.07,-2368.02 2522.48,-2374.52"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge148" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M2431.62,-2283.3C2456.09,-2285.69 2483.73,-2288.39 2509.91,-2290.94"/>
<polygon fill="black" stroke="black" points="2509.57,-2294.43 2519.86,-2291.92 2510.25,-2287.46 2509.57,-2294.43"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge149" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M2371.99,-2257.82C2421.25,-2199.82 2584.22,-2017.75 2760.39,-1929 2765.06,-1926.65 2769.93,-1924.5 2774.93,-1922.53"/>
<polygon fill="black" stroke="black" points="2776.47,-1925.7 2784.67,-1918.98 2774.08,-1919.12 2776.47,-1925.7"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge150" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M2431.51,-2274.07C2569.69,-2270.5 2866.97,-2262.82 3039.05,-2258.37"/>
<polygon fill="black" stroke="black" points="3039.27,-2261.86 3049.18,-2258.11 3039.09,-2254.87 3039.27,-2261.86"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge151" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M2423.19,-2257.94C2448.17,-2251.72 2476.93,-2245.26 2503.39,-2241 2584.93,-2227.87 2677.35,-2219.91 2750.15,-2215.21"/>
<polygon fill="black" stroke="black" points="2750.53,-2218.69 2760.29,-2214.57 2750.09,-2211.71 2750.53,-2218.69"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge152" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M2397.66,-2294.08C2426.56,-2306 2466.59,-2320.7 2503.39,-2328 2590.64,-2345.3 2691.39,-2349.58 2766.63,-2349.79"/>
<polygon fill="black" stroke="black" points="2767.07,-2353.29 2777.07,-2349.79 2767.07,-2346.29 2767.07,-2353.29"/>
</g>
<!-- build_site._load_ontology -->
<g id="node119" class="node">
<title>build_site._load_ontology</title>
<polygon fill="none" stroke="black" points="3574.89,-2211 3379.89,-2211 3379.89,-2175 3574.89,-2175 3574.89,-2211"/>
<text text-anchor="middle" x="3477.39" y="-2189.3" font-family="Times,serif" font-size="14.00">build_site._load_ontology</text>
</g>
<!-- build_site._load_ontology&#45;&gt;serde_utils.load_json -->
<g id="edge153" class="edge">
<title>build_site._load_ontology&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3575.05,-2210.46C3610.46,-2216.85 3650.4,-2224.07 3685.39,-2230.38"/>
<polygon fill="black" stroke="black" points="3685.13,-2233.9 3695.59,-2232.23 3686.38,-2227.01 3685.13,-2233.9"/>
</g>
<!-- build_site._compile_locale -->
<g id="node120" class="node">
<title>build_site._compile_locale</title>
<polygon fill="none" stroke="black" points="3878.39,-320 3678.39,-320 3678.39,-284 3878.39,-284 3878.39,-320"/>
<text text-anchor="middle" x="3778.39" y="-298.3" font-family="Times,serif" font-size="14.00">build_site._compile_locale</text>
</g>
<!-- build_site._env_for_lang -->
<g id="node121" class="node">
<title>build_site._env_for_lang</title>
<polygon fill="none" stroke="black" points="3570.89,-320 3383.89,-320 3383.89,-284 3570.89,-284 3570.89,-320"/>
<text text-anchor="middle" x="3477.39" y="-298.3" font-family="Times,serif" font-size="14.00">build_site._env_for_lang</text>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge154" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M3570.95,-302C3601.67,-302 3636.16,-302 3668.02,-302"/>
<polygon fill="black" stroke="black" points="3668.27,-305.5 3678.27,-302 3668.27,-298.5 3668.27,-305.5"/>
</g>
<!-- build_site._iter_lots -->
<g id="node122" class="node">
<title>build_site._iter_lots</title>
<g id="a_node122"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="3247.89,-893 3092.89,-893 3092.89,-857 3247.89,-857 3247.89,-893"/>
<text text-anchor="middle" x="3170.39" y="-871.3" font-family="Times,serif" font-size="14.00">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge155" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3248.19,-870.35C3267.82,-866.34 3287.99,-859.5 3304.39,-848 3329.54,-830.36 3315.2,-806.58 3340.39,-789 3342.5,-787.52 3344.68,-786.12 3346.91,-784.79"/>
<polygon fill="black" stroke="black" points="3348.61,-787.85 3355.75,-780.02 3345.29,-781.69 3348.61,-787.85"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge159" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3247.89,-873.73C3269.2,-877.37 3290.33,-885.5 3304.39,-902 3367.65,-976.23 3276.97,-1704.91 3340.39,-1779 3354.44,-1795.42 3375.36,-1803.64 3396.61,-1807.4"/>
<polygon fill="black" stroke="black" points="3396.3,-1810.89 3406.7,-1808.86 3397.31,-1803.96 3396.3,-1810.89"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge160" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3248.14,-873.52C3269.46,-877.15 3290.53,-885.33 3304.39,-902 3343.38,-948.92 3323.05,-3039.51 3340.39,-3098 3363.15,-3174.81 3421.24,-3251 3453.66,-3289.39"/>
<polygon fill="black" stroke="black" points="3451,-3291.67 3460.16,-3296.99 3456.32,-3287.12 3451,-3291.67"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge156" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3247.9,-880.68C3267.42,-884.69 3287.61,-891.28 3304.39,-902 3327.16,-916.55 3317.59,-936.5 3340.39,-951 3347.03,-955.22 3354.19,-958.81 3361.63,-961.85"/>
<polygon fill="black" stroke="black" points="3360.6,-965.2 3371.19,-965.42 3363.05,-958.64 3360.6,-965.2"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge157" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3248.21,-877.08C3268.4,-881 3288.85,-888.45 3304.39,-902 3340.93,-933.88 3303.78,-973.2 3340.39,-1005 3358.04,-1020.33 3381.87,-1027.92 3404.66,-1031.43"/>
<polygon fill="black" stroke="black" points="3404.31,-1034.91 3414.68,-1032.73 3405.21,-1027.97 3404.31,-1034.91"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge158" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M3247.96,-887.3C3292.5,-894.46 3348.64,-903.48 3394.12,-910.78"/>
<polygon fill="black" stroke="black" points="3393.82,-914.28 3404.25,-912.41 3394.93,-907.37 3393.82,-914.28"/>
</g>
<!-- build_site._copy_images -->
<g id="node123" class="node">
<title>build_site._copy_images</title>
<polygon fill="none" stroke="black" points="3872.39,-474 3684.39,-474 3684.39,-438 3872.39,-438 3872.39,-474"/>
<text text-anchor="middle" x="3778.39" y="-452.3" font-family="Times,serif" font-size="14.00">build_site._copy_images</text>
</g>
<!-- build_site._copy_static -->
<g id="node124" class="node">
<title>build_site._copy_static</title>
<g id="a_node124"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="3565.39,-428 3389.39,-428 3389.39,-392 3565.39,-392 3565.39,-428"/>
<text text-anchor="middle" x="3477.39" y="-406.3" font-family="Times,serif" font-size="14.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node125" class="node">
<title>build_site._load_state</title>
<g id="a_node125"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="2965.39,-1239 2795.39,-1239 2795.39,-1203 2965.39,-1203 2965.39,-1239"/>
<text text-anchor="middle" x="2880.39" y="-1217.3" font-family="Times,serif" font-size="14.00">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge161" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M2894.94,-1239C2921.02,-1274.82 2977.61,-1358.51 3000.39,-1439 3021.41,-1513.3 2984.58,-2075.74 3036.39,-2133 3117.23,-2222.36 3200.38,-2113.16 3304.39,-2174 3326.8,-2187.11 3318.27,-2206.4 3340.39,-2220 3343.02,-2221.62 3345.73,-2223.14 3348.5,-2224.58"/>
<polygon fill="black" stroke="black" points="3347.02,-2227.75 3357.56,-2228.87 3350.02,-2221.42 3347.02,-2227.75"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge162" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M2893.11,-1239.07C2916.07,-1272.78 2970.53,-1344.85 3036.39,-1378 3143.84,-1432.09 3220.3,-1329.96 3304.39,-1416 3399.48,-1513.3 3249.78,-1618.51 3340.39,-1720 3347.81,-1728.31 3356.94,-1734.67 3366.94,-1739.51"/>
<polygon fill="black" stroke="black" points="3365.77,-1742.82 3376.34,-1743.54 3368.53,-1736.38 3365.77,-1742.82"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge163" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M2894.92,-1239.01C2920.96,-1274.83 2977.5,-1358.54 3000.39,-1439 3020.45,-1509.53 2987.31,-2043.51 3036.39,-2098 3076.75,-2142.82 3246.77,-2123.17 3304.39,-2141 3321.29,-2146.23 3323.75,-2151.99 3340.39,-2158 3354.87,-2163.23 3370.49,-2168.01 3385.8,-2172.24"/>
<polygon fill="black" stroke="black" points="3385.23,-2175.72 3395.8,-2174.95 3387.05,-2168.96 3385.23,-2175.72"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge164" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M2884.48,-1202.67C2894.81,-1147.47 2933.46,-981.78 3036.39,-902 3049.85,-891.56 3066.32,-884.87 3083.02,-880.63"/>
<polygon fill="black" stroke="black" points="3083.88,-884.03 3092.86,-878.41 3082.34,-877.2 3083.88,-884.03"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge165" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M2883.26,-1202.74C2893.33,-1108.1 2944.05,-674.23 3036.39,-583 3124.83,-495.61 3492.06,-467.95 3674.12,-459.52"/>
<polygon fill="black" stroke="black" points="3674.41,-463.01 3684.24,-459.07 3674.09,-456.02 3674.41,-463.01"/>
</g>
<!-- build_site._sync_embeddings -->
<g id="node126" class="node">
<title>build_site._sync_embeddings</title>
<g id="a_node126"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="2991.89,-474 2768.89,-474 2768.89,-438 2991.89,-438 2991.89,-474"/>
<text text-anchor="middle" x="2880.39" y="-452.3" font-family="Times,serif" font-size="14.00">build_site._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model -->
<g id="node127" class="node">
<title>build_site._apply_price_model</title>
<g id="a_node127"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="2994.89,-182 2765.89,-182 2765.89,-146 2994.89,-146 2994.89,-182"/>
<text text-anchor="middle" x="2880.39" y="-160.3" font-family="Times,serif" font-size="14.00">build_site._apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node128" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node128"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="3297.89,-144 3042.89,-144 3042.89,-108 3297.89,-108 3297.89,-144"/>
<text text-anchor="middle" x="3170.39" y="-122.3" font-family="Times,serif" font-size="14.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge166" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M2995.21,-148.98C3007.5,-147.36 3020.08,-145.7 3032.6,-144.05"/>
<polygon fill="black" stroke="black" points="3033.16,-147.51 3042.61,-142.73 3032.24,-140.57 3033.16,-147.51"/>
</g>
<!-- price_utils.predict_price -->
<g id="node129" class="node">
<title>price_utils.predict_price</title>
<g id="a_node129"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="3571.89,-90 3382.89,-90 3382.89,-54 3571.89,-54 3571.89,-90"/>
<text text-anchor="middle" x="3477.39" y="-68.3" font-family="Times,serif" font-size="14.00">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge167" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M2915.06,-145.98C2945.73,-130.52 2992.77,-109.18 3036.39,-99 3149.24,-72.67 3282.52,-68.04 3372.59,-68.66"/>
<polygon fill="black" stroke="black" points="3372.77,-72.16 3382.8,-68.75 3372.83,-65.16 3372.77,-72.16"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node130" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node130"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="3879.39,-190 3677.39,-190 3677.39,-154 3879.39,-154 3879.39,-190"/>
<text text-anchor="middle" x="3778.39" y="-168.3" font-family="Times,serif" font-size="14.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge168" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M2995.32,-165.02C3168.62,-166.56 3496.33,-169.49 3667.31,-171.02"/>
<polygon fill="black" stroke="black" points="3667.3,-174.52 3677.34,-171.11 3667.37,-167.52 3667.3,-174.52"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node131" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node131"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="3273.39,-236 3067.39,-236 3067.39,-200 3273.39,-200 3273.39,-236"/>
<text text-anchor="middle" x="3170.39" y="-214.3" font-family="Times,serif" font-size="14.00">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.guess_currency -->
<g id="edge169" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M2977.69,-182.06C3005.07,-187.19 3035.04,-192.81 3062.98,-198.05"/>
<polygon fill="black" stroke="black" points="3062.7,-201.56 3073.18,-199.96 3063.99,-194.68 3062.7,-201.56"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node166" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node166"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="3593.39,-144 3361.39,-144 3361.39,-108 3593.39,-108 3593.39,-144"/>
<text text-anchor="middle" x="3477.39" y="-122.3" font-family="Times,serif" font-size="14.00">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge260" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M3298.09,-126C3315.6,-126 3333.58,-126 3351.07,-126"/>
<polygon fill="black" stroke="black" points="3351.3,-129.5 3361.3,-126 3351.3,-122.5 3351.3,-129.5"/>
</g>
<!-- build_site._similar_by_user -->
<g id="node132" class="node">
<title>build_site._similar_by_user</title>
<g id="a_node132"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="3274.89,-1239 3065.89,-1239 3065.89,-1203 3274.89,-1203 3274.89,-1239"/>
<text text-anchor="middle" x="3170.39" y="-1217.3" font-family="Times,serif" font-size="14.00">build_site._similar_by_user</text>
</a>
</g>
</g>
<!-- build_site._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge170" class="edge">
<title>build_site._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3275.07,-1230.86C3309.5,-1234.13 3347.65,-1237.76 3381.39,-1240.97"/>
<polygon fill="black" stroke="black" points="3381.42,-1244.49 3391.71,-1241.95 3382.09,-1237.52 3381.42,-1244.49"/>
</g>
<!-- build_site._categorise -->
<g id="node133" class="node">
<title>build_site._categorise</title>
<g id="a_node133"><a xlink:title="Return category info and recent lot list.">
<polygon fill="none" stroke="black" points="3562.89,-374 3391.89,-374 3391.89,-338 3562.89,-338 3562.89,-374"/>
<text text-anchor="middle" x="3477.39" y="-352.3" font-family="Times,serif" font-size="14.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge171" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3563.21,-359.16C3581.74,-363.37 3600.06,-370.67 3614.39,-383 3650.19,-413.81 3616.55,-450.04 3650.39,-483 3665.04,-497.28 3684.66,-506.7 3704.08,-512.92"/>
<polygon fill="black" stroke="black" points="3703.3,-516.34 3713.88,-515.81 3705.28,-509.63 3703.3,-516.34"/>
</g>
<!-- build_site._render_site -->
<g id="node134" class="node">
<title>build_site._render_site</title>
<polygon fill="none" stroke="black" points="2969.39,-549 2791.39,-549 2791.39,-513 2969.39,-513 2969.39,-549"/>
<text text-anchor="middle" x="2880.39" y="-527.3" font-family="Times,serif" font-size="14.00">build_site._render_site</text>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge172" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M2895.76,-549.13C2921.11,-580 2976.75,-643.02 3036.39,-680 3136.38,-741.99 3266.78,-777.65 3359.6,-796.77"/>
<polygon fill="black" stroke="black" points="3359.1,-800.23 3369.6,-798.79 3360.49,-793.37 3359.1,-800.23"/>
</g>
<!-- build_site._render_site&#45;&gt;serde_utils.read_text -->
<g id="edge174" class="edge">
<title>build_site._render_site&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2969.48,-538.43C3150.65,-553.91 3553.21,-589.5 3614.39,-605 3750.73,-639.55 3825.74,-611.77 3906.39,-727 3956.01,-797.9 3935.14,-1418.77 3942.39,-1505 3971.69,-1853.8 4032.57,-2274.91 4049.14,-2386.66"/>
<polygon fill="black" stroke="black" points="4045.71,-2387.41 4050.65,-2396.78 4052.64,-2386.38 4045.71,-2387.41"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge173" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2969.42,-521.86C2991.28,-519.92 3014.67,-518.12 3036.39,-517 3292.94,-503.75 3357.67,-503.56 3614.39,-513 3643.56,-514.07 3675.6,-516.22 3703.5,-518.41"/>
<polygon fill="black" stroke="black" points="3703.34,-521.9 3713.58,-519.21 3703.89,-514.93 3703.34,-521.9"/>
</g>
<!-- build_site.build_page -->
<g id="node135" class="node">
<title>build_site.build_page</title>
<g id="a_node135"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="3253.89,-1093 3086.89,-1093 3086.89,-1057 3253.89,-1057 3253.89,-1093"/>
<text text-anchor="middle" x="3170.39" y="-1071.3" font-family="Times,serif" font-size="14.00">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge175" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M2890.76,-549.33C2913.26,-594.13 2970.68,-713.27 3000.39,-819 3028.25,-918.19 2965.17,-973.55 3036.39,-1048 3047.28,-1059.38 3061.55,-1066.66 3076.69,-1071.2"/>
<polygon fill="black" stroke="black" points="3076.19,-1074.69 3086.75,-1073.81 3077.94,-1067.91 3076.19,-1074.69"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge176" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3254.11,-1074.95C3273.24,-1079.06 3291.69,-1087.13 3304.39,-1102 3364.41,-1172.27 3295.3,-1852.33 3340.39,-1933 3357.96,-1964.43 3391.3,-1987.25 3420.58,-2002.29"/>
<polygon fill="black" stroke="black" points="3419.4,-2005.62 3429.92,-2006.91 3422.5,-1999.34 3419.4,-2005.62"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge179" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3254.01,-1075.04C3273.14,-1079.15 3291.61,-1087.19 3304.39,-1102 3402.8,-1216.07 3241.73,-1665.14 3340.39,-1779 3354.54,-1795.33 3375.49,-1803.53 3396.74,-1807.29"/>
<polygon fill="black" stroke="black" points="3396.43,-1810.78 3406.83,-1808.76 3397.43,-1803.86 3396.43,-1810.78"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge177" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M3254.2,-1073.57C3272.87,-1069.4 3291.07,-1061.67 3304.39,-1048 3368.93,-981.73 3275.7,-909.13 3340.39,-843 3346.19,-837.07 3352.89,-832.25 3360.14,-828.34"/>
<polygon fill="black" stroke="black" points="3362.06,-831.31 3369.61,-823.87 3359.07,-824.98 3362.06,-831.31"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge180" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3254.02,-1074.66C3273.27,-1078.75 3291.8,-1086.88 3304.39,-1102 3375.35,-1187.23 3308.79,-2991.69 3340.39,-3098 3363.21,-3174.79 3421.28,-3250.98 3453.67,-3289.38"/>
<polygon fill="black" stroke="black" points="3451.02,-3291.66 3460.17,-3296.99 3456.34,-3287.11 3451.02,-3291.66"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge178" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M3254.04,-1074.99C3273.17,-1070.88 3291.64,-1062.83 3304.39,-1048 3408.7,-926.71 3235.82,-450.07 3340.39,-329 3349.44,-318.52 3361.29,-311.38 3374.23,-306.62"/>
<polygon fill="black" stroke="black" points="3375.36,-309.94 3383.82,-303.56 3373.23,-303.27 3375.36,-309.94"/>
</g>
<!-- build_site.main -->
<g id="node136" class="node">
<title>build_site.main</title>
<polygon fill="none" stroke="black" points="2676.39,-428 2551.39,-428 2551.39,-392 2676.39,-392 2676.39,-428"/>
<text text-anchor="middle" x="2613.89" y="-406.3" font-family="Times,serif" font-size="14.00">build_site.main</text>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge192" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M2649.78,-391.87C2678.66,-377.67 2721.16,-358.6 2760.39,-348 2883.56,-314.7 3813.66,-187.36 3906.39,-275 3957.91,-323.69 3933.55,-841.66 3942.39,-912 3968.59,-1120.45 4026.4,-1367.39 4046.41,-1449.72"/>
<polygon fill="black" stroke="black" points="4043.04,-1450.7 4048.82,-1459.58 4049.84,-1449.04 4043.04,-1450.7"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge181" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M2633.31,-428.43C2703.64,-499.21 2953.63,-754.71 3000.39,-857 3046.15,-957.1 2960.71,-1022.09 3036.39,-1102 3042.87,-1108.85 3050.58,-1114.21 3058.97,-1118.39"/>
<polygon fill="black" stroke="black" points="3057.75,-1121.68 3068.32,-1122.48 3060.55,-1115.27 3057.75,-1121.68"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge182" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M2626.25,-391.78C2648.04,-358.4 2699.01,-287.44 2760.39,-250 2766.6,-246.21 2773.27,-242.86 2780.16,-239.9"/>
<polygon fill="black" stroke="black" points="2781.67,-243.07 2789.66,-236.11 2779.08,-236.56 2781.67,-243.07"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge183" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M2619.23,-391.84C2631.9,-342.83 2673.57,-206.87 2760.39,-137 2842.42,-70.99 2960.14,-42.84 3048.24,-30.85"/>
<polygon fill="black" stroke="black" points="3048.83,-34.3 3058.29,-29.53 3047.92,-27.36 3048.83,-34.3"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge184" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M2676.68,-397.53C2702.48,-392.59 2732.82,-387.11 2760.39,-383 2977.81,-350.57 3234.12,-324.5 3373.47,-311.33"/>
<polygon fill="black" stroke="black" points="3374.09,-314.79 3383.71,-310.37 3373.43,-307.82 3374.09,-314.79"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge185" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M2676.5,-410C2824.4,-410 3200.46,-410 3379.2,-410"/>
<polygon fill="black" stroke="black" points="3379.38,-413.5 3389.38,-410 3379.38,-406.5 3379.38,-413.5"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge186" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M2620.16,-428.21C2638.56,-491.56 2702,-708.09 2760.39,-885 2798.45,-1000.31 2848.07,-1136.25 2869.18,-1193.45"/>
<polygon fill="black" stroke="black" points="2865.91,-1194.72 2872.66,-1202.88 2872.48,-1192.29 2865.91,-1194.72"/>
</g>
<!-- build_site.main&#45;&gt;build_site._sync_embeddings -->
<g id="edge187" class="edge">
<title>build_site.main&#45;&gt;build_site._sync_embeddings</title>
<path fill="none" stroke="black" d="M2676.57,-420.73C2703.22,-425.36 2735.28,-430.94 2765.96,-436.27"/>
<polygon fill="black" stroke="black" points="2765.42,-439.73 2775.87,-438 2766.62,-432.84 2765.42,-439.73"/>
</g>
<!-- build_site.main&#45;&gt;build_site._apply_price_model -->
<g id="edge188" class="edge">
<title>build_site.main&#45;&gt;build_site._apply_price_model</title>
<path fill="none" stroke="black" d="M2621.45,-391.87C2637.77,-349.44 2684.48,-243.35 2760.39,-191 2762.52,-189.53 2764.73,-188.13 2766.99,-186.81"/>
<polygon fill="black" stroke="black" points="2768.75,-189.84 2775.97,-182.09 2765.49,-183.65 2768.75,-189.84"/>
</g>
<!-- build_site.main&#45;&gt;build_site._similar_by_user -->
<g id="edge189" class="edge">
<title>build_site.main&#45;&gt;build_site._similar_by_user</title>
<path fill="none" stroke="black" d="M2620.28,-428.2C2648.16,-519.45 2784.56,-931.59 3036.39,-1156 3056.8,-1174.19 3083.21,-1188.49 3107.12,-1198.98"/>
<polygon fill="black" stroke="black" points="3105.91,-1202.27 3116.48,-1202.96 3108.65,-1195.83 3105.91,-1202.27"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge190" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M2676.5,-406.14C2825.06,-396.83 3203.83,-373.08 3381.58,-361.94"/>
<polygon fill="black" stroke="black" points="3381.94,-365.43 3391.7,-361.31 3381.5,-358.44 3381.94,-365.43"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge191" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M2648.9,-428.06C2678.15,-443.34 2721.62,-465.49 2760.39,-483 2780.45,-492.06 2802.76,-501.28 2822.59,-509.18"/>
<polygon fill="black" stroke="black" points="2821.52,-512.52 2832.1,-512.95 2824.09,-506.02 2821.52,-512.52"/>
</g>
<!-- caption._identify_size -->
<g id="node137" class="node">
<title>caption._identify_size</title>
<g id="a_node137"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="3863.39,-1423 3693.39,-1423 3693.39,-1387 3863.39,-1387 3863.39,-1423"/>
<text text-anchor="middle" x="3778.39" y="-1401.3" font-family="Times,serif" font-size="14.00">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node138" class="node">
<title>caption._prepare_image</title>
<g id="a_node138"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="3570.89,-1419 3383.89,-1419 3383.89,-1383 3570.89,-1383 3570.89,-1419"/>
<text text-anchor="middle" x="3477.39" y="-1397.3" font-family="Times,serif" font-size="14.00">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge193" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M3570.95,-1402.24C3606.46,-1402.71 3647.01,-1403.26 3682.72,-1403.73"/>
<polygon fill="black" stroke="black" points="3683.1,-1407.24 3693.14,-1403.87 3683.19,-1400.24 3683.1,-1407.24"/>
</g>
<!-- caption._guess_chat -->
<g id="node139" class="node">
<title>caption._guess_chat</title>
<g id="a_node139"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="3857.89,-1369 3698.89,-1369 3698.89,-1333 3857.89,-1333 3857.89,-1369"/>
<text text-anchor="middle" x="3778.39" y="-1347.3" font-family="Times,serif" font-size="14.00">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node140" class="node">
<title>caption.caption_file</title>
<g id="a_node140"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="3247.89,-1369 3092.89,-1369 3092.89,-1333 3247.89,-1333 3247.89,-1369"/>
<text text-anchor="middle" x="3170.39" y="-1347.3" font-family="Times,serif" font-size="14.00">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge195" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3241.81,-1369.02C3265.77,-1378.84 3290.1,-1393.72 3304.39,-1416 3348.67,-1485.04 3313.26,-2814.59 3340.39,-2892 3362.43,-2954.91 3415.6,-3013.56 3448.55,-3045.63"/>
<polygon fill="black" stroke="black" points="3446.42,-3048.43 3456.06,-3052.81 3451.26,-3043.37 3446.42,-3048.43"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge194" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3241.08,-1369.13C3265.11,-1378.98 3289.67,-1393.84 3304.39,-1416 3382.72,-1533.91 3250.62,-1942.54 3340.39,-2052 3420.16,-2149.27 3534.63,-2025.72 3614.39,-2123 3659.48,-2177.99 3623.94,-2695.99 3650.39,-2762 3670.87,-2813.12 3716.3,-2859.22 3746.89,-2886.17"/>
<polygon fill="black" stroke="black" points="3744.85,-2889.04 3754.71,-2892.93 3749.43,-2883.74 3744.85,-2889.04"/>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.load_json -->
<g id="edge196" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3248.01,-1348.08C3268.94,-1351.19 3289.82,-1358.59 3304.39,-1374 3400.55,-1475.78 3242.53,-1586.84 3340.39,-1687 3426.3,-1774.94 3527.91,-1637.62 3614.39,-1725 3658.67,-1769.75 3631.41,-1945.97 3650.39,-2006 3676.67,-2089.15 3730.98,-2177.54 3759.3,-2220.49"/>
<polygon fill="black" stroke="black" points="3756.48,-2222.57 3764.93,-2228.95 3762.31,-2218.69 3756.48,-2222.57"/>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.write_json -->
<g id="edge197" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3219.88,-1332.93C3246.96,-1321.13 3280.04,-1303.67 3304.39,-1281 3326.59,-1260.32 3315.57,-1240.45 3340.39,-1223 3352.42,-1214.54 3366.43,-1208.46 3380.8,-1204.12"/>
<polygon fill="black" stroke="black" points="3382.07,-1207.4 3390.78,-1201.38 3380.21,-1200.65 3382.07,-1207.4"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge198" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M3247.96,-1363.55C3286.02,-1369.79 3332.56,-1377.42 3373.68,-1384.16"/>
<polygon fill="black" stroke="black" points="3373.29,-1387.65 3383.73,-1385.81 3374.43,-1380.74 3373.29,-1387.65"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge199" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M3248.14,-1351C3360.63,-1351 3569.79,-1351 3688.7,-1351"/>
<polygon fill="black" stroke="black" points="3688.86,-1354.5 3698.86,-1351 3688.86,-1347.5 3688.86,-1354.5"/>
</g>
<!-- caption.main -->
<g id="node141" class="node">
<title>caption.main</title>
<polygon fill="none" stroke="black" points="802,-1285 693,-1285 693,-1249 802,-1249 802,-1285"/>
<text text-anchor="middle" x="747.5" y="-1263.3" font-family="Times,serif" font-size="14.00">caption.main</text>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge200" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M802.06,-1267C873.26,-1267 1003.03,-1267 1113.89,-1267 1113.89,-1267 1113.89,-1267 2614.89,-1267 2784.37,-1267 2979.73,-1305.84 3087.43,-1330.69"/>
<polygon fill="black" stroke="black" points="3086.72,-1334.12 3097.25,-1332.98 3088.31,-1327.31 3086.72,-1334.12"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node142" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node142"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="3274.89,-1039 3065.89,-1039 3065.89,-1003 3274.89,-1003 3274.89,-1039"/>
<text text-anchor="middle" x="3170.39" y="-1017.3" font-family="Times,serif" font-size="14.00">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;serde_utils.parse_md -->
<g id="edge201" class="edge">
<title>image_io.read_image_meta&#45;&gt;serde_utils.parse_md</title>
<path fill="none" stroke="black" d="M3266.1,-1039.06C3279.01,-1041.86 3292.06,-1044.87 3304.39,-1048 3320.6,-1052.11 3324.16,-1054.92 3340.39,-1059 3354.23,-1062.48 3368.97,-1065.8 3383.43,-1068.84"/>
<polygon fill="black" stroke="black" points="3382.88,-1072.3 3393.38,-1070.9 3384.3,-1065.45 3382.88,-1072.3"/>
</g>
<!-- clean_data._parse_date -->
<g id="node143" class="node">
<title>clean_data._parse_date</title>
<g id="a_node143"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="3568.39,-2395 3386.39,-2395 3386.39,-2359 3568.39,-2359 3568.39,-2395"/>
<text text-anchor="middle" x="3477.39" y="-2373.3" font-family="Times,serif" font-size="14.00">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;serde_utils.read_text -->
<g id="edge203" class="edge">
<title>clean_data._parse_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3568.41,-2375.25C3655.21,-2374.52 3790.13,-2375.9 3906.39,-2388 3924.03,-2389.84 3942.72,-2392.61 3960.66,-2395.7"/>
<polygon fill="black" stroke="black" points="3960.07,-2399.15 3970.53,-2397.45 3961.29,-2392.26 3960.07,-2399.15"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node144" class="node">
<title>clean_data._clean_raw</title>
<polygon fill="none" stroke="black" points="3257.89,-2473 3082.89,-2473 3082.89,-2437 3257.89,-2437 3257.89,-2473"/>
<text text-anchor="middle" x="3170.39" y="-2451.3" font-family="Times,serif" font-size="14.00">clean_data._clean_raw</text>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge205" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3209.7,-2473.12C3241.12,-2490.23 3283.66,-2519.07 3304.39,-2558 3360.9,-2664.16 3303.33,-2983.58 3340.39,-3098 3364.97,-3173.9 3421.9,-3250 3453.76,-3288.74"/>
<polygon fill="black" stroke="black" points="3451.45,-3291.43 3460.54,-3296.87 3456.82,-3286.95 3451.45,-3291.43"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge204" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3258.22,-2441.1C3273.81,-2437.56 3289.74,-2433.23 3304.39,-2428 3321.43,-2421.92 3323.45,-2415.35 3340.39,-2409 3351.86,-2404.7 3364.1,-2400.86 3376.35,-2397.45"/>
<polygon fill="black" stroke="black" points="3377.42,-2400.79 3386.17,-2394.81 3375.6,-2394.03 3377.42,-2400.79"/>
</g>
<!-- clean_data._clean_media -->
<g id="node145" class="node">
<title>clean_data._clean_media</title>
<polygon fill="none" stroke="black" points="3265.89,-2419 3074.89,-2419 3074.89,-2383 3265.89,-2383 3265.89,-2419"/>
<text text-anchor="middle" x="3170.39" y="-2397.3" font-family="Times,serif" font-size="14.00">clean_data._clean_media</text>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge206" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3266.08,-2404.5C3280.68,-2409.14 3294.24,-2416.53 3304.39,-2428 3372.89,-2505.48 3303.61,-2795.34 3340.39,-2892 3364.16,-2954.47 3417,-3013.47 3449.37,-3045.69"/>
<polygon fill="black" stroke="black" points="3447.14,-3048.4 3456.73,-3052.9 3452.04,-3043.4 3447.14,-3048.4"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge207" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3266.22,-2393.54C3301.08,-2390.8 3340.64,-2387.68 3375.98,-2384.9"/>
<polygon fill="black" stroke="black" points="3376.61,-2388.36 3386.31,-2384.09 3376.06,-2381.38 3376.61,-2388.36"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node146" class="node">
<title>clean_data._clean_lots</title>
<polygon fill="none" stroke="black" points="3257.39,-1759 3083.39,-1759 3083.39,-1723 3257.39,-1723 3257.39,-1759"/>
<text text-anchor="middle" x="3170.39" y="-1737.3" font-family="Times,serif" font-size="14.00">clean_data._clean_lots</text>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge208" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M3257.66,-1738.76C3275.1,-1734.43 3291.9,-1726.83 3304.39,-1714 3369.21,-1647.39 3275.43,-1574.47 3340.39,-1508 3352.48,-1495.62 3368.51,-1488.07 3385.31,-1483.6"/>
<polygon fill="black" stroke="black" points="3386.3,-1486.97 3395.26,-1481.32 3384.73,-1480.15 3386.3,-1486.97"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge210" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3210.39,-1759.1C3242.01,-1776.11 3284.47,-1804.82 3304.39,-1844 3367.55,-1968.26 3299.96,-2964.6 3340.39,-3098 3363.53,-3174.35 3421.04,-3250.27 3453.38,-3288.86"/>
<polygon fill="black" stroke="black" points="3451.11,-3291.61 3460.25,-3296.96 3456.45,-3287.08 3451.11,-3291.61"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge209" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3257.44,-1740.16C3275.33,-1735.84 3292.37,-1727.9 3304.39,-1714 3399.71,-1603.71 3244.83,-1169.09 3340.39,-1059 3356.27,-1040.71 3380.67,-1032.62 3404.45,-1029.55"/>
<polygon fill="black" stroke="black" points="3404.98,-1033.01 3414.58,-1028.52 3404.28,-1026.05 3404.98,-1033.01"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node147" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node147"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="3287.89,-1705 3052.89,-1705 3052.89,-1669 3287.89,-1669 3287.89,-1705"/>
<text text-anchor="middle" x="3170.39" y="-1683.3" font-family="Times,serif" font-size="14.00">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node148" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node148"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="3598.89,-1553 3355.89,-1553 3355.89,-1517 3598.89,-1517 3598.89,-1553"/>
<text text-anchor="middle" x="3477.39" y="-1531.3" font-family="Times,serif" font-size="14.00">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node149" class="node">
<title>clean_data.main</title>
<polygon fill="none" stroke="black" points="2946.39,-1748 2814.39,-1748 2814.39,-1712 2946.39,-1712 2946.39,-1748"/>
<text text-anchor="middle" x="2880.39" y="-1726.3" font-family="Times,serif" font-size="14.00">clean_data.main</text>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge211" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M2902.82,-1748.01C2930.98,-1773.15 2979.33,-1821.69 3000.39,-1875 3045.62,-1989.54 2955.39,-2335.23 3036.39,-2428 3046.08,-2439.1 3058.98,-2446.39 3072.94,-2451.07"/>
<polygon fill="black" stroke="black" points="3072.17,-2454.49 3082.75,-2453.9 3074.11,-2447.76 3072.17,-2454.49"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge212" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M2902.77,-1748.03C2930.87,-1773.19 2979.15,-1821.76 3000.39,-1875 3041.59,-1978.26 2962.97,-2290.51 3036.39,-2374 3044.29,-2382.99 3054.29,-2389.47 3065.24,-2394.09"/>
<polygon fill="black" stroke="black" points="3064.05,-2397.38 3074.64,-2397.54 3066.47,-2390.81 3064.05,-2397.38"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge213" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M2946.74,-1732.5C2984.07,-1733.92 3031.58,-1735.74 3073.11,-1737.32"/>
<polygon fill="black" stroke="black" points="3073.13,-1740.83 3083.26,-1737.71 3073.4,-1733.83 3073.13,-1740.83"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge214" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M2946.74,-1720.24C2975.17,-1716 3009.49,-1710.87 3042.58,-1705.93"/>
<polygon fill="black" stroke="black" points="3043.43,-1709.34 3052.81,-1704.41 3042.4,-1702.42 3043.43,-1709.34"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge215" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M2927.68,-1711.92C2949.92,-1702.89 2976.81,-1691.46 3000.39,-1680 3016.85,-1672 3019.47,-1666.99 3036.39,-1660 3151.51,-1612.41 3290.76,-1576.21 3381.34,-1555.31"/>
<polygon fill="black" stroke="black" points="3382.35,-1558.67 3391.32,-1553.02 3380.79,-1551.84 3382.35,-1558.67"/>
</g>
<!-- scan_ontology._is_misparsed -->
<g id="node150" class="node">
<title>scan_ontology._is_misparsed</title>
<g id="a_node150"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="3586.89,-558 3367.89,-558 3367.89,-522 3586.89,-522 3586.89,-558"/>
<text text-anchor="middle" x="3477.39" y="-536.3" font-family="Times,serif" font-size="14.00">scan_ontology._is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge216" class="edge">
<title>scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3587.18,-534.54C3625.78,-532.61 3668.3,-530.47 3703.33,-528.72"/>
<polygon fill="black" stroke="black" points="3703.66,-532.2 3713.48,-528.21 3703.31,-525.21 3703.66,-532.2"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node151" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node151"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="2997.39,-1671 2763.39,-1671 2763.39,-1635 2997.39,-1635 2997.39,-1671"/>
<text text-anchor="middle" x="2880.39" y="-1649.3" font-family="Times,serif" font-size="14.00">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge220" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2937.71,-1634.92C3025.67,-1610.49 3196.69,-1578.67 3304.39,-1660 3348.48,-1693.3 3299.45,-1741.88 3340.39,-1779 3355.79,-1792.96 3376.28,-1800.58 3396.67,-1804.54"/>
<polygon fill="black" stroke="black" points="3396.21,-1808.01 3406.65,-1806.2 3397.36,-1801.11 3396.21,-1808.01"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge217" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M2956.62,-1671.02C2973.29,-1678.36 2989.28,-1688.64 3000.39,-1703 3068.79,-1791.45 2959.59,-1870.72 3036.39,-1952 3037.18,-1952.83 3037.98,-1953.65 3038.81,-1954.44"/>
<polygon fill="black" stroke="black" points="3036.74,-1957.28 3046.66,-1961 3041.23,-1951.9 3036.74,-1957.28"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge221" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2960.01,-1671.09C2975.84,-1678.4 2990.61,-1688.65 3000.39,-1703 3048.98,-1774.32 2978.81,-3191.71 3036.39,-3256 3047.76,-3268.7 3253.65,-3292.03 3379.7,-3305.23"/>
<polygon fill="black" stroke="black" points="3379.46,-3308.72 3389.76,-3306.28 3380.18,-3301.76 3379.46,-3308.72"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge218" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2900.42,-1634.97C2928.11,-1607.4 2978.56,-1551.74 3000.39,-1493 3019.75,-1440.89 2995.69,-1031.87 3036.39,-994 3079.99,-953.43 3245.49,-985.2 3304.39,-994 3320.93,-996.47 3324.16,-1000.92 3340.39,-1005 3361.15,-1010.22 3383.91,-1015.07 3404.76,-1019.18"/>
<polygon fill="black" stroke="black" points="3404.34,-1022.67 3414.83,-1021.14 3405.68,-1015.79 3404.34,-1022.67"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed -->
<g id="edge219" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed</title>
<path fill="none" stroke="black" d="M2901.12,-1634.6C2929.2,-1606.98 2979.58,-1551.74 3000.39,-1493 3032.59,-1402.12 2972.33,-698.07 3036.39,-626 3076.46,-580.92 3245.3,-595.1 3304.39,-583 3335.81,-576.56 3370.16,-568.24 3399.84,-560.63"/>
<polygon fill="black" stroke="black" points="3400.9,-563.97 3409.71,-558.09 3399.16,-557.2 3400.9,-563.97"/>
</g>
<!-- scan_ontology.main -->
<g id="node152" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="2691.39,-1684 2536.39,-1684 2536.39,-1648 2691.39,-1648 2691.39,-1684"/>
<text text-anchor="middle" x="2613.89" y="-1662.3" font-family="Times,serif" font-size="14.00">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge222" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M2619.73,-1684.2C2634.11,-1735.64 2680.59,-1884.76 2760.39,-1983 2781.84,-2009.4 2812.93,-2032.03 2837.95,-2047.73"/>
<polygon fill="black" stroke="black" points="2836.17,-2050.74 2846.52,-2052.99 2839.83,-2044.78 2836.17,-2050.74"/>
</g>
<!-- scan_ontology.main&#45;&gt;serde_utils.write_json -->
<g id="edge223" class="edge">
<title>scan_ontology.main&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2622.85,-1647.74C2641.65,-1606.29 2692.38,-1503.68 2760.39,-1439 2862.8,-1341.59 2902.27,-1325.63 3036.39,-1281 3150.26,-1243.11 3192.27,-1290.81 3304.39,-1248 3322.59,-1241.05 3322.51,-1230.74 3340.39,-1223 3353.05,-1217.52 3366.83,-1213.04 3380.6,-1209.39"/>
<polygon fill="black" stroke="black" points="3381.77,-1212.71 3390.61,-1206.88 3380.06,-1205.92 3381.77,-1212.71"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge224" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M2691.39,-1662.24C2710.75,-1661.29 2732.07,-1660.24 2753.17,-1659.2"/>
<polygon fill="black" stroke="black" points="2753.36,-1662.7 2763.18,-1658.71 2753.02,-1655.71 2753.36,-1662.7"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node155" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node155"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3290.89,-3761 3049.89,-3761 3049.89,-3725 3290.89,-3725 3290.89,-3761"/>
<text text-anchor="middle" x="3170.39" y="-3739.3" font-family="Times,serif" font-size="14.00">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge230" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3283.16,-3724.87C3290.79,-3721.05 3297.98,-3716.48 3304.39,-3711 3336.2,-3683.81 3323.96,-3662.49 3340.39,-3624 3385.01,-3519.46 3440.07,-3395.98 3464.15,-3342.25"/>
<polygon fill="black" stroke="black" points="3467.38,-3343.61 3468.28,-3333.05 3460.99,-3340.74 3467.38,-3343.61"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node156" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node156"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="3259.89,-2657 3080.89,-2657 3080.89,-2621 3259.89,-2621 3259.89,-2657"/>
<text text-anchor="middle" x="3170.39" y="-2635.3" font-family="Times,serif" font-size="14.00">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node157" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node157"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="3614.39,-2883 3340.39,-2883 3340.39,-2847 3614.39,-2847 3614.39,-2883"/>
<text text-anchor="middle" x="3477.39" y="-2861.3" font-family="Times,serif" font-size="14.00">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node158" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node158"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="3285.39,-2603 3055.39,-2603 3055.39,-2567 3285.39,-2567 3285.39,-2603"/>
<text text-anchor="middle" x="3170.39" y="-2581.3" font-family="Times,serif" font-size="14.00">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;serde_utils.load_json -->
<g id="edge232" class="edge">
<title>debug_dump.load_source_info&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3218.89,-2566.89C3252.64,-2554.19 3299.11,-2537.04 3340.39,-2523 3461.22,-2481.9 3510.56,-2511.23 3614.39,-2437 3636.37,-2421.28 3633.32,-2408.95 3650.39,-2388 3684.42,-2346.2 3726.83,-2300.24 3753.01,-2272.5"/>
<polygon fill="black" stroke="black" points="3755.6,-2274.85 3759.94,-2265.18 3750.52,-2270.04 3755.6,-2274.85"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge231" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3285.39,-2584.25C3320.05,-2584.03 3357.55,-2583.78 3390.06,-2583.57"/>
<polygon fill="black" stroke="black" points="3390.46,-2587.06 3400.43,-2583.5 3390.41,-2580.06 3390.46,-2587.06"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node159" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node159"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="3879.39,-2753 3677.39,-2753 3677.39,-2717 3879.39,-2717 3879.39,-2753"/>
<text text-anchor="middle" x="3778.39" y="-2731.3" font-family="Times,serif" font-size="14.00">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text -->
<g id="edge233" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3879.63,-2722.85C3889.23,-2719.05 3898.36,-2714.2 3906.39,-2708 3929.52,-2690.14 4010.16,-2512.32 4041.14,-2442.72"/>
<polygon fill="black" stroke="black" points="4044.48,-2443.83 4045.34,-2433.27 4038.08,-2440.99 4044.48,-2443.83"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node160" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node160"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="3267.89,-2803 3072.89,-2803 3072.89,-2767 3267.89,-2767 3267.89,-2803"/>
<text text-anchor="middle" x="3170.39" y="-2781.3" font-family="Times,serif" font-size="14.00">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge235" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3221.27,-2803C3247.67,-2814.03 3279.65,-2829.91 3304.39,-2850 3313.81,-2857.65 3413.24,-2987.91 3456.49,-3044.78"/>
<polygon fill="black" stroke="black" points="3453.85,-3047.09 3462.68,-3052.94 3459.42,-3042.86 3453.85,-3047.09"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge236" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3240.63,-2766.95C3264.76,-2757.09 3289.5,-2742.2 3304.39,-2720 3373.08,-2617.52 3290.52,-2278.84 3340.39,-2166 3362.16,-2116.74 3409.03,-2074.47 3441.62,-2049.39"/>
<polygon fill="black" stroke="black" points="3444.11,-2051.9 3449.99,-2043.09 3439.9,-2046.31 3444.11,-2051.9"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge234" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3268.25,-2793.15C3378.45,-2803.03 3551.31,-2820.54 3614.39,-2838 3657.36,-2849.9 3703.49,-2871.46 3735.67,-2888.08"/>
<polygon fill="black" stroke="black" points="3734.29,-2891.31 3744.77,-2892.84 3737.53,-2885.11 3734.29,-2891.31"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.load_json -->
<g id="edge239" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3268.03,-2774.53C3370.5,-2758.01 3529.1,-2715.97 3614.39,-2610 3677.06,-2532.13 3607.18,-2478.14 3650.39,-2388 3673.1,-2340.61 3716.81,-2297.54 3746.54,-2271.8"/>
<polygon fill="black" stroke="black" points="3749.17,-2274.15 3754.52,-2265.01 3744.64,-2268.82 3749.17,-2274.15"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge237" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3226.94,-2766.9C3252.82,-2756.35 3282.63,-2740.94 3304.39,-2720 3328.75,-2696.56 3316.27,-2676.69 3340.39,-2653 3361.39,-2632.36 3389.72,-2616.47 3415.08,-2605.09"/>
<polygon fill="black" stroke="black" points="3416.49,-2608.29 3424.27,-2601.09 3413.7,-2601.87 3416.49,-2608.29"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge240" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3238.33,-2803.13C3262.77,-2813.06 3288.33,-2827.99 3304.39,-2850 3370.02,-2939.98 3301.99,-2993.45 3340.39,-3098 3367.96,-3173.08 3423.94,-3249.8 3454.79,-3288.77"/>
<polygon fill="black" stroke="black" points="3452.35,-3291.33 3461.33,-3296.95 3457.82,-3286.96 3452.35,-3291.33"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.read_text -->
<g id="edge238" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3268.19,-2788.04C3456.14,-2793.06 3856.47,-2799.18 3906.39,-2762 3946.97,-2731.78 3923.7,-2701.02 3942.39,-2654 3973.49,-2575.74 4017.25,-2486.45 4039.39,-2442.46"/>
<polygon fill="black" stroke="black" points="4042.64,-2443.79 4044.03,-2433.28 4036.4,-2440.63 4042.64,-2443.79"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node161" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node161"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="3266.89,-2987 3073.89,-2987 3073.89,-2951 3266.89,-2951 3266.89,-2987"/>
<text text-anchor="middle" x="3170.39" y="-2965.3" font-family="Times,serif" font-size="14.00">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge241" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3267.15,-2975.78C3357.36,-2980.27 3495.95,-2982.26 3614.39,-2963 3651.72,-2956.93 3692.24,-2944.03 3723.54,-2932.6"/>
<polygon fill="black" stroke="black" points="3724.79,-2935.87 3732.94,-2929.11 3722.35,-2929.31 3724.79,-2935.87"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge242" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3267.15,-2979.92C3280.76,-2984.76 3293.73,-2991.54 3304.39,-3001 3338.78,-3031.52 3302.64,-3071.74 3340.39,-3098 3457.98,-3179.79 3639.23,-3126.54 3726.71,-3092.74"/>
<polygon fill="black" stroke="black" points="3728.12,-3095.95 3736.14,-3089.03 3725.56,-3089.43 3728.12,-3095.95"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;serde_utils.load_json -->
<g id="edge244" class="edge">
<title>debug_dump.delete_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3267.12,-2965.74C3383.25,-2959.59 3569.17,-2942.02 3614.39,-2892 3689.69,-2808.7 3606.43,-2491.32 3650.39,-2388 3670.93,-2339.72 3715.07,-2296.94 3745.49,-2271.5"/>
<polygon fill="black" stroke="black" points="3747.78,-2274.15 3753.29,-2265.11 3743.34,-2268.74 3747.78,-2274.15"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge243" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3226.96,-2950.91C3252.84,-2940.36 3282.64,-2924.95 3304.39,-2904 3305.88,-2902.56 3420.68,-2687.44 3461.88,-2610.21"/>
<polygon fill="black" stroke="black" points="3465.13,-2611.55 3466.74,-2601.08 3458.95,-2608.26 3465.13,-2611.55"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge245" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3234.3,-2987.01C3259.35,-2997.1 3286.43,-3012.17 3304.39,-3034 3343.84,-3081.95 3310.33,-3114.66 3340.39,-3169 3367.55,-3218.11 3414.81,-3263.54 3445.84,-3290.27"/>
<polygon fill="black" stroke="black" points="3443.86,-3293.18 3453.75,-3296.98 3448.39,-3287.84 3443.86,-3293.18"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node162" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node162"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="3896.39,-2699 3660.39,-2699 3660.39,-2663 3896.39,-2663 3896.39,-2699"/>
<text text-anchor="middle" x="3778.39" y="-2677.3" font-family="Times,serif" font-size="14.00">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge246" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3896.78,-2681C3908.46,-2681 3920.34,-2681 3932.06,-2681"/>
<polygon fill="black" stroke="black" points="3932.32,-2684.5 3942.32,-2681 3932.32,-2677.5 3932.32,-2684.5"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node163" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node163"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="3874.89,-2645 3681.89,-2645 3681.89,-2609 3874.89,-2609 3874.89,-2645"/>
<text text-anchor="middle" x="3778.39" y="-2623.3" font-family="Times,serif" font-size="14.00">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node164" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node164"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="3304.39,-2711 3036.39,-2711 3036.39,-2675 3304.39,-2675 3304.39,-2711"/>
<text text-anchor="middle" x="3170.39" y="-2689.3" font-family="Times,serif" font-size="14.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge249" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3295.08,-2674.95C3298.43,-2672.28 3301.55,-2669.31 3304.39,-2666 3361.32,-2599.51 3293.75,-1953.07 3340.39,-1879 3355.07,-1855.67 3379.91,-1839.31 3404.38,-1828.07"/>
<polygon fill="black" stroke="black" points="3405.94,-1831.21 3413.71,-1824.02 3403.15,-1824.79 3405.94,-1831.21"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;serde_utils.load_json -->
<g id="edge248" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3292.51,-2674.83C3296.71,-2672.22 3300.69,-2669.29 3304.39,-2666 3342.81,-2631.8 3302.35,-2590.63 3340.39,-2556 3432.71,-2471.95 3521.59,-2577.54 3614.39,-2494 3651.36,-2460.71 3625.22,-2430.92 3650.39,-2388 3677.19,-2342.28 3720.46,-2298.34 3748.92,-2272"/>
<polygon fill="black" stroke="black" points="3751.5,-2274.38 3756.52,-2265.05 3746.78,-2269.21 3751.5,-2274.38"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge247" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3288.13,-2674.89C3293.8,-2672.29 3299.26,-2669.35 3304.39,-2666 3327.62,-2650.84 3317.39,-2630.52 3340.39,-2615 3355.4,-2604.87 3373.23,-2597.93 3390.95,-2593.17"/>
<polygon fill="black" stroke="black" points="3391.89,-2596.54 3400.76,-2590.75 3390.22,-2589.75 3391.89,-2596.54"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge250" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3239.46,-2711.09C3263.75,-2720.99 3288.91,-2735.89 3304.39,-2758 3347.97,-2820.24 3315.58,-3026.19 3340.39,-3098 3366.44,-3173.4 3422.78,-3249.71 3454.16,-3288.61"/>
<polygon fill="black" stroke="black" points="3451.79,-3291.24 3460.82,-3296.78 3457.21,-3286.82 3451.79,-3291.24"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge251" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M3304.75,-2690.36C3407.51,-2688.32 3548.67,-2685.53 3649.92,-2683.52"/>
<polygon fill="black" stroke="black" points="3650.28,-2687.02 3660.21,-2683.32 3650.14,-2680.02 3650.28,-2687.02"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge252" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M3304.75,-2678.48C3415.03,-2666.46 3569.55,-2649.64 3671.49,-2638.53"/>
<polygon fill="black" stroke="black" points="3671.93,-2642.01 3681.49,-2637.44 3671.17,-2635.05 3671.93,-2642.01"/>
</g>
<!-- debug_dump.main -->
<g id="node165" class="node">
<title>debug_dump.main</title>
<polygon fill="none" stroke="black" points="2954.39,-2753 2806.39,-2753 2806.39,-2717 2954.39,-2717 2954.39,-2753"/>
<text text-anchor="middle" x="2880.39" y="-2731.3" font-family="Times,serif" font-size="14.00">debug_dump.main</text>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge253" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M2915.93,-2716.99C2946.79,-2701.55 2993.6,-2679.68 3036.39,-2666 3047.43,-2662.47 3059.15,-2659.29 3070.87,-2656.47"/>
<polygon fill="black" stroke="black" points="3071.75,-2659.86 3080.69,-2654.19 3070.16,-2653.05 3071.75,-2659.86"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge254" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M2937.61,-2753.01C2958.05,-2760.63 2980.9,-2770.44 3000.39,-2782 3018.3,-2792.63 3017.26,-2803.75 3036.39,-2812 3063.18,-2823.56 3212.73,-2840.03 3330.14,-2851.53"/>
<polygon fill="black" stroke="black" points="3330.03,-2855.04 3340.32,-2852.53 3330.71,-2848.07 3330.03,-2855.04"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge255" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M2898.54,-2716.72C2925.27,-2689.42 2979.7,-2638.38 3036.39,-2612 3040.7,-2609.99 3045.16,-2608.14 3049.72,-2606.41"/>
<polygon fill="black" stroke="black" points="3050.92,-2609.7 3059.19,-2603.07 3048.59,-2603.1 3050.92,-2609.7"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge256" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M2954.71,-2735C3111.79,-2735 3481.55,-2735 3667.11,-2735"/>
<polygon fill="black" stroke="black" points="3667.16,-2738.5 3677.16,-2735 3667.16,-2731.5 3667.16,-2738.5"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge257" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M2954.43,-2747.68C2987.26,-2753.38 3026.64,-2760.22 3062.68,-2766.47"/>
<polygon fill="black" stroke="black" points="3062.3,-2769.96 3072.75,-2768.22 3063.5,-2763.06 3062.3,-2769.96"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge258" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M2905.18,-2753.25C2931.41,-2774.38 2973.45,-2811.4 3000.39,-2851 3023.69,-2885.26 3004.84,-2910.14 3036.39,-2937 3044.63,-2944.01 3054.14,-2949.54 3064.22,-2953.9"/>
<polygon fill="black" stroke="black" points="3063.03,-2957.19 3073.62,-2957.57 3065.58,-2950.67 3063.03,-2957.19"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge259" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M2954.43,-2724.35C2979.15,-2720.74 3007.57,-2716.6 3035.49,-2712.53"/>
<polygon fill="black" stroke="black" points="3036.36,-2715.94 3045.75,-2711.03 3035.35,-2709.01 3036.36,-2715.94"/>
</g>
<!-- embed.main -->
<g id="node167" class="node">
<title>embed.main</title>
<g id="a_node167"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="799.5,-813 695.5,-813 695.5,-777 799.5,-777 799.5,-813"/>
<text text-anchor="middle" x="747.5" y="-791.3" font-family="Times,serif" font-size="14.00">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge264" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M799.63,-795C870.29,-795 1001.77,-795 1113.89,-795 1113.89,-795 1113.89,-795 2614.89,-795 2782.7,-795 2978.78,-807.03 3087.02,-814.72"/>
<polygon fill="black" stroke="black" points="3086.99,-818.23 3097.22,-815.45 3087.49,-811.25 3086.99,-818.23"/>
</g>
<!-- build_site -->
<g id="node168" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="129.5" cy="-624" rx="55.79" ry="18"/>
<text text-anchor="middle" x="129.5" y="-620.3" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge265" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M184.78,-621.2C268.81,-617.11 435.46,-610 577,-610 577,-610 577,-610 2101.89,-610 2293.15,-610 2498.7,-487 2578.5,-433.92"/>
<polygon fill="black" stroke="black" points="2580.8,-436.58 2587.15,-428.1 2576.9,-430.77 2580.8,-436.58"/>
</g>
<!-- embed -->
<g id="node169" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="384" cy="-795" rx="42.49" ry="18"/>
<text text-anchor="middle" x="384" y="-791.3" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- build_site&#45;&gt;embed -->
<!-- embed&#45;&gt;embed.main -->
<g id="edge267" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M426.47,-795C489.97,-795 611.66,-795 685.32,-795"/>
<polygon fill="black" stroke="black" points="685.38,-798.5 695.38,-795 685.38,-791.5 685.38,-798.5"/>
</g>
<!-- caption -->
<g id="node170" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="578" cy="-1267" rx="44.69" ry="18"/>
<text text-anchor="middle" x="578" y="-1263.3" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- embed&#45;&gt;caption -->
<!-- caption&#45;&gt;caption.main -->
<g id="edge269" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M623.01,-1267C641.25,-1267 662.77,-1267 682.68,-1267"/>
<polygon fill="black" stroke="black" points="682.93,-1270.5 692.93,-1267 682.93,-1263.5 682.93,-1270.5"/>
</g>
<!-- tg_client -->
<g id="node171" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="747.5" cy="-2136" rx="50.89" ry="18"/>
<text text-anchor="middle" x="747.5" y="-2132.3" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- caption&#45;&gt;tg_client -->
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge271" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M751.22,-2154.09C770.69,-2283.71 888.87,-3070.42 912.92,-3230.56"/>
<polygon fill="black" stroke="black" points="909.48,-3231.22 914.43,-3240.59 916.4,-3230.18 909.48,-3231.22"/>
</g>
<!-- debug_dump -->
<g id="node172" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="918.19" cy="-2136" rx="70.39" ry="18"/>
<text text-anchor="middle" x="918.19" y="-2132.3" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- tg_client&#45;&gt;debug_dump -->
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge273" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M928.65,-2153.99C967.88,-2225.93 1125.65,-2489 1334.89,-2489 1334.89,-2489 1334.89,-2489 2356.89,-2489 2563,-2489 2775.03,-2647.64 2850.55,-2710.13"/>
<polygon fill="black" stroke="black" points="2848.75,-2713.18 2858.67,-2716.91 2853.24,-2707.81 2848.75,-2713.18"/>
</g>
<!-- chop -->
<g id="node173" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="1114.89" cy="-1693" rx="32.49" ry="18"/>
<text text-anchor="middle" x="1114.89" y="-1689.3" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- debug_dump&#45;&gt;chop -->
<!-- chop&#45;&gt;chop.main -->
<g id="edge275" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M1134.83,-1678.29C1207.58,-1622.74 1477.94,-1424.8 1736.39,-1345 1842.26,-1312.31 1973.13,-1309.35 2045.43,-1310.76"/>
<polygon fill="black" stroke="black" points="2045.59,-1314.26 2055.66,-1310.99 2045.75,-1307.26 2045.59,-1314.26"/>
</g>
<!-- clean_data -->
<g id="node174" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="1335.89" cy="-1693" rx="59.59" ry="18"/>
<text text-anchor="middle" x="1335.89" y="-1689.3" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- chop&#45;&gt;clean_data -->
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge277" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M1394.1,-1697.27C1488.25,-1703.92 1681.8,-1716 1845.89,-1716 1845.89,-1716 1845.89,-1716 2356.89,-1716 2516.12,-1716 2702.55,-1722.58 2804.08,-1726.72"/>
<polygon fill="black" stroke="black" points="2804.1,-1730.22 2814.24,-1727.13 2804.39,-1723.23 2804.1,-1730.22"/>
</g>
<!-- moderation -->
<g id="node175" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="1583.39" cy="-1669" rx="63.89" ry="18"/>
<text text-anchor="middle" x="1583.39" y="-1665.3" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- clean_data&#45;&gt;moderation -->
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge279" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M1587.25,-1650.96C1606.63,-1535.87 1729.21,-909 2099.89,-909 2099.89,-909 2099.89,-909 2614.89,-909 2765.08,-909 2938.02,-916.42 3050.27,-922.22"/>
<polygon fill="black" stroke="black" points="3050.1,-925.72 3060.27,-922.74 3050.47,-918.73 3050.1,-925.72"/>
</g>
<!-- scan_ontology -->
<g id="node176" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="1846.89" cy="-1669" rx="76.09" ry="18"/>
<text text-anchor="middle" x="1846.89" y="-1665.3" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- moderation&#45;&gt;scan_ontology -->
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge281" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M1922.98,-1668.71C2065.58,-1668.15 2374.81,-1666.93 2526.05,-1666.34"/>
<polygon fill="black" stroke="black" points="2526.24,-1669.84 2536.22,-1666.3 2526.21,-1662.84 2526.24,-1669.84"/>
</g>
<!-- telegram_bot -->
<g id="node177" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="2100.89" cy="-2276" rx="72.29" ry="18"/>
<text text-anchor="middle" x="2100.89" y="-2272.3" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- scan_ontology&#45;&gt;telegram_bot -->
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge283" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M2148,-2289.67C2186.03,-2300.94 2240.61,-2317.12 2284.16,-2330.03"/>
<polygon fill="black" stroke="black" points="2283.26,-2333.42 2293.84,-2332.9 2285.25,-2326.7 2283.26,-2333.42"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge284" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M2173.04,-2276C2203.24,-2276 2238.68,-2276 2270.22,-2276"/>
<polygon fill="black" stroke="black" points="2270.31,-2279.5 2280.31,-2276 2270.31,-2272.5 2270.31,-2279.5"/>
</g>
</g>
</svg>
