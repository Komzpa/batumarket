<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10054pt" height="5083pt"
 viewBox="0.00 0.00 10054.00 5082.78" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5078.78)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5078.78 10050,-5078.78 10050,4 -4,4"/>
<!-- scan_ontology.collect_ontology -->
<g id="node1" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node1"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="7180,-1865.78 6264,-1865.78 6264,-1794.78 7180,-1794.78 7180,-1865.78"/>
<text text-anchor="middle" x="6722" y="-1815.64" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node2" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node2"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7981.5,-2192.28 7556.5,-2192.28 7556.5,-2156.28 7981.5,-2156.28 7981.5,-2192.28"/>
<text text-anchor="middle" x="7769" y="-2168.41" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge1" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M7065.8,-1865.85C7140,-1888.02 7212.46,-1922.87 7267,-1977.28 7310.05,-2020.23 7257.35,-2069.11 7303,-2109.28 7388.72,-2184.73 7519.86,-2197.07 7621.05,-2192.77"/>
<polygon fill="black" stroke="black" points="7621.24,-2196.27 7631.06,-2192.29 7620.9,-2189.28 7621.24,-2196.27"/>
</g>
<!-- post_io.read_post -->
<g id="node3" class="node">
<title>post_io.read_post</title>
<g id="a_node3"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8959,-1996.28 8401,-1996.28 8401,-1920.28 8959,-1920.28 8959,-1996.28"/>
<text text-anchor="middle" x="8680" y="-1943.12" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge2" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7180.05,-1812.19C7480.9,-1806.5 7882.77,-1810.75 8235,-1854.28 8338.46,-1867.07 8452.95,-1894.22 8539.76,-1917.57"/>
<polygon fill="black" stroke="black" points="8539.11,-1921.02 8549.67,-1920.25 8540.93,-1914.26 8539.11,-1921.02"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node4" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node4"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8756.5,-3084.28 8603.5,-3084.28 8603.5,-3048.28 8756.5,-3048.28 8756.5,-3084.28"/>
<text text-anchor="middle" x="8680" y="-3063.04" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge3" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7100.71,-1865.84C7164.99,-1888.82 7224.58,-1923.99 7267,-1977.28 7332.86,-2060.01 7228.74,-2853.01 7303,-2928.28 7375.82,-3002.1 8132.13,-2963.28 8235,-2976.28 8362.54,-2992.4 8508.22,-3024.63 8596.88,-3045.82"/>
<polygon fill="black" stroke="black" points="8596.33,-3049.29 8606.87,-3048.22 8597.96,-3042.48 8596.33,-3049.29"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node5" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node5"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7987,-1342.28 7551,-1342.28 7551,-1298.28 7987,-1298.28 7987,-1342.28"/>
<text text-anchor="middle" x="7769" y="-1311.96" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge4" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M7180.19,-1799.49C7212.53,-1783.23 7242.12,-1762.22 7267,-1735.28 7325.15,-1672.32 7241.59,-1411.07 7303,-1351.28 7337.51,-1317.69 7440.46,-1308.64 7540.75,-1308.57"/>
<polygon fill="black" stroke="black" points="7540.75,-1312.07 7550.75,-1308.59 7540.76,-1305.07 7540.75,-1312.07"/>
</g>
<!-- lot_io.read_lots -->
<g id="node6" class="node">
<title>lot_io.read_lots</title>
<g id="a_node6"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8786,-1620.28 8574,-1620.28 8574,-1584.28 8786,-1584.28 8786,-1620.28"/>
<text text-anchor="middle" x="8680" y="-1596.12" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge5" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7068.6,-1794.75C7375.26,-1762.59 7835.31,-1712.8 8235,-1663.28 8346.83,-1649.43 8474.22,-1631.73 8563.78,-1618.97"/>
<polygon fill="black" stroke="black" points="8564.29,-1622.43 8573.69,-1617.55 8563.3,-1615.5 8564.29,-1622.43"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge62" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7981.79,-2182.48C8085.22,-2182.05 8195.73,-2173.58 8235,-2142.28 8278.21,-2107.85 8229.37,-2059.62 8271,-2023.28 8305.11,-1993.52 8347.2,-1974.48 8391.27,-1962.68"/>
<polygon fill="black" stroke="black" points="8392.17,-1966.07 8401,-1960.2 8390.44,-1959.28 8392.17,-1966.07"/>
</g>
<!-- caption_io.read_caption -->
<g id="node30" class="node">
<title>caption_io.read_caption</title>
<g id="a_node30"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8845.5,-2461.78 8514.5,-2461.78 8514.5,-2424.78 8845.5,-2424.78 8845.5,-2461.78"/>
<text text-anchor="middle" x="8680" y="-2436.84" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge61" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7870.35,-2192.3C7965.23,-2210.33 8111.12,-2240.6 8235,-2277.28 8379.07,-2319.94 8543.48,-2386.19 8625.94,-2420.68"/>
<polygon fill="black" stroke="black" points="8625,-2424.08 8635.58,-2424.73 8627.71,-2417.63 8625,-2424.08"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node51" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node51"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8829.5,-2522.28 8530.5,-2522.28 8530.5,-2486.28 8829.5,-2486.28 8829.5,-2522.28"/>
<text text-anchor="middle" x="8680" y="-2499.49" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge60" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7981.79,-2171.85C8071.4,-2182.05 8169.91,-2209.97 8235,-2277.28 8295.66,-2340.01 8206.26,-2411.79 8271,-2470.28 8358.18,-2549.05 8502.89,-2540.27 8594.48,-2524.17"/>
<polygon fill="black" stroke="black" points="8595.34,-2527.57 8604.55,-2522.33 8594.09,-2520.68 8595.34,-2527.57"/>
</g>
<!-- notes_utils.read_md -->
<g id="node78" class="node">
<title>notes_utils.read_md</title>
<g id="a_node78"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9421,-2070.28 9281,-2070.28 9281,-2034.28 9421,-2034.28 9421,-2070.28"/>
<text text-anchor="middle" x="9351" y="-2049.04" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge129" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8951.66,-1996.31C9066.47,-2012.45 9191.69,-2030.04 9270.5,-2041.11"/>
<polygon fill="black" stroke="black" points="9270.44,-2044.64 9280.83,-2042.57 9271.41,-2037.71 9270.44,-2044.64"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node97" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node97"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9520,-2001.78 9182,-2001.78 9182,-1964.78 9520,-1964.78 9520,-2001.78"/>
<text text-anchor="middle" x="9351" y="-1976.84" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge130" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8959.39,-1968.69C9031.07,-1971.37 9106.3,-1974.18 9171.38,-1976.61"/>
<polygon fill="black" stroke="black" points="9171.61,-1980.12 9181.74,-1977 9171.87,-1973.13 9171.61,-1980.12"/>
</g>
<!-- lot_io.get_seller -->
<g id="node25" class="node">
<title>lot_io.get_seller</title>
<g id="a_node25"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8780.5,-704.28 8579.5,-704.28 8579.5,-668.28 8780.5,-668.28 8780.5,-704.28"/>
<text text-anchor="middle" x="8680" y="-680.69" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge139" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7987.15,-1331.88C8090.49,-1332.38 8199.23,-1323.87 8235,-1289.28 8292.48,-1233.71 8228.18,-998.81 8271,-931.28 8348.53,-809.01 8511.09,-739.34 8605.94,-707.55"/>
<polygon fill="black" stroke="black" points="8607.07,-710.86 8615.47,-704.4 8604.88,-704.21 8607.07,-710.86"/>
</g>
<!-- notes_utils.load_json -->
<g id="node12" class="node">
<title>notes_utils.load_json</title>
<g id="a_node12"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9475,-3321.28 9227,-3321.28 9227,-3285.28 9475,-3285.28 9475,-3321.28"/>
<text text-anchor="middle" x="9351" y="-3297.59" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge146" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8725.14,-1620.42C8812.66,-1659.02 9006.82,-1758.49 9089,-1911.28 9147.96,-2020.91 9104.67,-2347.48 9125,-2470.28 9178.45,-2793.17 9304.54,-3171.63 9340.36,-3275.65"/>
<polygon fill="black" stroke="black" points="9337.06,-3276.81 9343.63,-3285.12 9343.67,-3274.52 9337.06,-3276.81"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node105" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node105"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9408.5,-571.28 9293.5,-571.28 9293.5,-535.28 9408.5,-535.28 9408.5,-571.28"/>
<text text-anchor="middle" x="9351" y="-550.04" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge145" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8786.06,-1585.44C8882.45,-1563.93 9020.35,-1516.54 9089,-1415.28 9177.66,-1284.53 9047.37,-842.88 9125,-705.28 9161.16,-641.18 9236.9,-598.73 9290.5,-575.37"/>
<polygon fill="black" stroke="black" points="9292.07,-578.5 9299.9,-571.37 9289.33,-572.06 9292.07,-578.5"/>
</g>
<!-- scan_ontology.main -->
<g id="node7" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5911.5,-1858.78 5456.5,-1858.78 5456.5,-1801.78 5911.5,-1801.78 5911.5,-1858.78"/>
<text text-anchor="middle" x="5684" y="-1819.39" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge6" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5911.71,-1830.28C6012.43,-1830.28 6134.9,-1830.28 6253.78,-1830.28"/>
<polygon fill="black" stroke="black" points="6253.8,-1833.78 6263.8,-1830.28 6253.8,-1826.78 6253.8,-1833.78"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node8" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node8"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6908.5,-4705.28 6535.5,-4705.28 6535.5,-4669.28 6908.5,-4669.28 6908.5,-4705.28"/>
<text text-anchor="middle" x="6722" y="-4681.12" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge7" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5911.71,-1849.76C5997.64,-1869.43 6087.55,-1907.48 6141,-1980.28 6185.06,-2040.3 6125.32,-4606.7 6177,-4660.28 6224.07,-4709.09 6389.12,-4711.69 6525.2,-4704.53"/>
<polygon fill="black" stroke="black" points="6525.56,-4708.02 6535.36,-4703.98 6525.18,-4701.03 6525.56,-4708.02"/>
</g>
<!-- notes_utils.write_json -->
<g id="node9" class="node">
<title>notes_utils.write_json</title>
<g id="a_node9"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9445,-750.28 9257,-750.28 9257,-714.28 9445,-714.28 9445,-750.28"/>
<text text-anchor="middle" x="9351" y="-728.24" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge8" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5911.61,-1835.6C5996.18,-1825.1 6085.14,-1796.75 6141,-1730.28 6201.03,-1658.85 6111.91,-958.14 6177,-891.28 6261.69,-804.3 7152.85,-856.63 7267,-815.28 7285.56,-808.56 7284.31,-795.62 7303,-789.28 7487.51,-726.77 8856.61,-729.52 9246.6,-731.6"/>
<polygon fill="black" stroke="black" points="9246.73,-735.1 9256.75,-731.66 9246.76,-728.1 9246.73,-735.1"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node91" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node91"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7884.5,-4843.28 7653.5,-4843.28 7653.5,-4807.28 7884.5,-4807.28 7884.5,-4843.28"/>
<text text-anchor="middle" x="7769" y="-4821.24" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge128" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6882.92,-4705.29C6991.37,-4717.78 7137.94,-4735.17 7267,-4752.28 7395.39,-4769.31 7541.95,-4790.92 7643.24,-4806.19"/>
<polygon fill="black" stroke="black" points="7642.79,-4809.67 7653.2,-4807.7 7643.84,-4802.75 7642.79,-4809.67"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node10" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node10"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7975,-4084.28 7563,-4084.28 7563,-4046.28 7975,-4046.28 7975,-4084.28"/>
<text text-anchor="middle" x="7769" y="-4058.56" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- build_site._load_ontology -->
<g id="node11" class="node">
<title>build_site._load_ontology</title>
<g id="a_node11"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="6878.5,-2723.28 6565.5,-2723.28 6565.5,-2687.28 6878.5,-2687.28 6878.5,-2723.28"/>
<text text-anchor="middle" x="6722" y="-2699.69" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge9" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6878.65,-2716.45C6995.39,-2724.59 7159.16,-2735.51 7303,-2743.28 7501.33,-2754 8920.65,-2713.88 9089,-2819.28 9260.86,-2926.88 9327.2,-3189.09 9344.82,-3275.3"/>
<polygon fill="black" stroke="black" points="9341.39,-3276.02 9346.77,-3285.15 9348.26,-3274.66 9341.39,-3276.02"/>
</g>
<!-- notes_utils.read_text -->
<g id="node29" class="node">
<title>notes_utils.read_text</title>
<g id="a_node29"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="9936.5,-4329.28 9722.5,-4329.28 9722.5,-4293.28 9936.5,-4293.28 9936.5,-4329.28"/>
<text text-anchor="middle" x="9829.5" y="-4306.5" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge269" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9475.15,-3292.78C9511.66,-3295.85 9549.26,-3305.97 9577,-3330.28 9727.6,-3462.28 9809.32,-4136.14 9825.5,-4283"/>
<polygon fill="black" stroke="black" points="9822.03,-4283.46 9826.59,-4293.02 9828.99,-4282.7 9822.03,-4283.46"/>
</g>
<!-- build_site._compile_locale -->
<g id="node13" class="node">
<title>build_site._compile_locale</title>
<g id="a_node13"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="9518,-247.28 9184,-247.28 9184,-211.28 9518,-211.28 9518,-247.28"/>
<text text-anchor="middle" x="9351" y="-223.41" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node14" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node14"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="8868.5,-249.78 8491.5,-249.78 8491.5,-208.78 8868.5,-208.78 8868.5,-249.78"/>
<text text-anchor="middle" x="8680" y="-222.04" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge10" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M8868.69,-229.28C8964.25,-229.28 9079.75,-229.28 9173.66,-229.28"/>
<polygon fill="black" stroke="black" points="9173.83,-232.78 9183.83,-229.28 9173.83,-225.78 9173.83,-232.78"/>
</g>
<!-- build_site._iter_lots -->
<g id="node15" class="node">
<title>build_site._iter_lots</title>
<g id="a_node15"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="6948,-1661.78 6496,-1661.78 6496,-1604.78 6948,-1604.78 6948,-1661.78"/>
<text text-anchor="middle" x="6722" y="-1622.39" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge11" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6948.32,-1642.2C7362.28,-1658.76 8204.61,-1693.4 8235,-1702.28 8387.14,-1746.74 8542.53,-1853.28 8622.98,-1913.98"/>
<polygon fill="black" stroke="black" points="8620.92,-1916.81 8631,-1920.06 8625.15,-1911.23 8620.92,-1916.81"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge12" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6824.84,-1604.77C6948.45,-1577.08 7154.28,-1554.42 7267,-1671.28 7349.73,-1757.07 7218.81,-2658.94 7303,-2743.28 7376.2,-2816.62 8152.11,-2714.1 8235,-2776.28 8275.81,-2806.9 8236.75,-2847.48 8271,-2885.28 8356.84,-2980.03 8501.5,-3027.83 8593.51,-3049.85"/>
<polygon fill="black" stroke="black" points="8592.82,-3053.28 8603.36,-3052.15 8594.42,-3046.46 8592.82,-3053.28"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge15" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6795.67,-1604.67C6904.08,-1563.67 7115.52,-1490.19 7303,-1463.28 7508.01,-1433.86 8030.27,-1431.99 8235,-1463.28 8381.16,-1485.63 8545.32,-1547.09 8627,-1580.3"/>
<polygon fill="black" stroke="black" points="8625.97,-1583.66 8636.55,-1584.21 8628.62,-1577.18 8625.97,-1583.66"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node16" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node16"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="7936,-2046.28 7602,-2046.28 7602,-2010.28 7936,-2010.28 7936,-2046.28"/>
<text text-anchor="middle" x="7769" y="-2023.5" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge13" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6833.08,-1604.75C6955.54,-1580.25 7151.32,-1563.85 7267,-1671.28 7348.93,-1747.38 7227.35,-1837.94 7303,-1920.28 7375.37,-1999.05 7492.96,-2025.85 7591.78,-2033.06"/>
<polygon fill="black" stroke="black" points="7591.69,-2036.56 7601.9,-2033.73 7592.15,-2029.57 7591.69,-2036.56"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node17" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node17"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="7907,-1280.28 7631,-1280.28 7631,-1244.28 7907,-1244.28 7907,-1280.28"/>
<text text-anchor="middle" x="7769" y="-1257.5" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge14" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M6898.09,-1604.72C7017.84,-1576.33 7171.59,-1521.05 7267,-1415.28 7306.01,-1372.04 7257.54,-1325.69 7303,-1289.28 7350.53,-1251.22 7503.08,-1248.6 7620.63,-1252.89"/>
<polygon fill="black" stroke="black" points="7620.69,-1256.4 7630.82,-1253.28 7620.96,-1249.4 7620.69,-1256.4"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node18" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node18"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="7897.5,-1225.78 7640.5,-1225.78 7640.5,-1188.78 7897.5,-1188.78 7897.5,-1225.78"/>
<text text-anchor="middle" x="7769" y="-1200.84" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge16" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6910.9,-1604.71C7030.27,-1576.67 7178.46,-1521.79 7267,-1415.28 7319.15,-1352.55 7241.49,-1288.88 7303,-1235.28 7350.25,-1194.11 7510.72,-1192.53 7630,-1197.69"/>
<polygon fill="black" stroke="black" points="7630.17,-1201.2 7640.32,-1198.16 7630.49,-1194.21 7630.17,-1201.2"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node102" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node102"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="8975,-2131.78 8385,-2131.78 8385,-2086.78 8975,-2086.78 8975,-2131.78"/>
<text text-anchor="middle" x="8680" y="-2100.9" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge137" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M7936.25,-2018.54C8026.54,-2018.02 8139.01,-2025.25 8235,-2055.28 8252.9,-2060.88 8253.16,-2071.5 8271,-2077.28 8304.05,-2088 8339.37,-2095.78 8374.87,-2101.37"/>
<polygon fill="black" stroke="black" points="8374.48,-2104.85 8384.89,-2102.89 8375.52,-2097.93 8374.48,-2104.85"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node103" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node103"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="8856.5,-1272.28 8503.5,-1272.28 8503.5,-1236.28 8856.5,-1236.28 8856.5,-1272.28"/>
<text text-anchor="middle" x="8680" y="-1248.41" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge138" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M7907.07,-1261.08C8063.25,-1259.7 8319.3,-1257.45 8493.3,-1255.92"/>
<polygon fill="black" stroke="black" points="8493.37,-1259.42 8503.34,-1255.83 8493.31,-1252.42 8493.37,-1259.42"/>
</g>
<!-- build_site._copy_images -->
<g id="node19" class="node">
<title>build_site._copy_images</title>
<g id="a_node19"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="7932.5,-980.28 7605.5,-980.28 7605.5,-944.28 7932.5,-944.28 7932.5,-980.28"/>
<text text-anchor="middle" x="7769" y="-956.12" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node20" class="node">
<title>build_site._copy_static</title>
<g id="a_node20"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="5812,-567.28 5556,-567.28 5556,-531.28 5812,-531.28 5812,-567.28"/>
<text text-anchor="middle" x="5684" y="-543.98" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node21" class="node">
<title>build_site._load_state</title>
<g id="a_node21"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="5823.5,-2222.28 5544.5,-2222.28 5544.5,-2186.28 5823.5,-2186.28 5823.5,-2222.28"/>
<text text-anchor="middle" x="5684" y="-2198.41" font-family="Times,serif" font-size="24.22">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge17" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M5728.91,-2222.3C5818.25,-2261.01 6022.69,-2360.34 6141,-2503.28 6167.68,-2535.52 6144.82,-2563.54 6177,-2590.28 6282.14,-2677.66 6437.44,-2703.56 6555.22,-2709.26"/>
<polygon fill="black" stroke="black" points="6555.28,-2712.76 6565.42,-2709.7 6555.59,-2705.77 6555.28,-2712.76"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge18" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M5823.52,-2215.75C5926.91,-2216.02 6063.22,-2197.3 6141,-2109.28 6205.67,-2036.1 6107.52,-1739.92 6177,-1671.28 6288.16,-1561.48 6482.07,-1577.46 6605.85,-1602.68"/>
<polygon fill="black" stroke="black" points="6605.24,-1606.12 6615.75,-1604.74 6606.68,-1599.27 6605.24,-1606.12"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge19" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M5823.63,-2216.76C5927.79,-2217.73 6065.07,-2199.43 6141,-2109.28 6215.63,-2020.68 6095.74,-1149.85 6177,-1067.28 6262.06,-980.86 7152.96,-1053.52 7267,-1012.28 7285.81,-1005.48 7284.19,-992.08 7303,-985.28 7395.7,-951.82 7505.58,-945.01 7595.25,-947.07"/>
<polygon fill="black" stroke="black" points="7595.15,-950.56 7605.24,-947.33 7595.34,-943.57 7595.15,-950.56"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node22" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node22"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8936,-3324.28 8424,-3324.28 8424,-3282.28 8936,-3282.28 8936,-3324.28"/>
<text text-anchor="middle" x="8680" y="-3295.2" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge20" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5738.99,-2222.36C5837.51,-2258.45 6045.1,-2349.44 6141,-2503.28 6209.24,-2612.76 6097.42,-2689.76 6177,-2791.28 6507.57,-3213.02 6779.16,-3109.44 7303,-3222.28 7507.53,-3266.34 8074.61,-3288 8413.55,-3297.31"/>
<polygon fill="black" stroke="black" points="8413.67,-3300.81 8423.76,-3297.59 8413.86,-3293.82 8413.67,-3300.81"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node23" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node23"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="8929,-2876.28 8431,-2876.28 8431,-2828.28 8929,-2828.28 8929,-2876.28"/>
<text text-anchor="middle" x="8680" y="-2843.16" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge21" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M5737.77,-2222.37C5835.21,-2258.74 6042.43,-2350.57 6141,-2503.28 6196.87,-2589.85 6100.32,-2663.47 6177,-2732.28 6259.5,-2806.33 7798.27,-2838.55 8420.82,-2848.6"/>
<polygon fill="black" stroke="black" points="8420.77,-2852.1 8430.82,-2848.76 8420.88,-2845.1 8420.77,-2852.1"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge154" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8936.31,-3303.28C9031.87,-3303.28 9136.58,-3303.28 9216.74,-3303.28"/>
<polygon fill="black" stroke="black" points="9216.89,-3306.78 9226.89,-3303.28 9216.89,-3299.78 9216.89,-3306.78"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge155" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8929.04,-2839.69C8984.8,-2846.28 9041.47,-2861.14 9089,-2890.28 9239.55,-2982.6 9317.86,-3197.94 9341.85,-3275.13"/>
<polygon fill="black" stroke="black" points="9338.62,-3276.53 9344.87,-3285.08 9345.31,-3274.49 9338.62,-3276.53"/>
</g>
<!-- build_site._categorise -->
<g id="node24" class="node">
<title>build_site._categorise</title>
<g id="a_node24"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="7160,-806.28 6284,-806.28 6284,-712.28 7160,-712.28 7160,-806.28"/>
<text text-anchor="middle" x="6722" y="-739.9" font-family="Times,serif" font-size="77.98">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge22" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7160.31,-726.15C7208.44,-723.17 7256.74,-720.46 7303,-718.28 7773.68,-696.19 8335.68,-689.15 8569.04,-687.08"/>
<polygon fill="black" stroke="black" points="8569.26,-690.57 8579.23,-686.99 8569.2,-683.57 8569.26,-690.57"/>
</g>
<!-- build_site._render_site -->
<g id="node26" class="node">
<title>build_site._render_site</title>
<g id="a_node26"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD. &#160;The values&#10;are embedded into the pages so the front&#45;end can convert prices on the fly.">
<polygon fill="none" stroke="black" points="7225.5,-1003.78 6218.5,-1003.78 6218.5,-900.78 7225.5,-900.78 7225.5,-1003.78"/>
<text text-anchor="middle" x="6722" y="-930.57" font-family="Times,serif" font-size="86.52">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge24" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7013.05,-900.71C7097.23,-880.08 7187.77,-852.21 7267,-815.28 7284.89,-806.95 7284.46,-796.05 7303,-789.28 7304.86,-788.61 8242.99,-718.73 8568.96,-694.47"/>
<polygon fill="black" stroke="black" points="8569.65,-697.93 8579.36,-693.7 8569.13,-690.95 8569.65,-697.93"/>
</g>
<!-- build_site.build_page -->
<g id="node27" class="node">
<title>build_site.build_page</title>
<g id="a_node27"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion.">
<polygon fill="none" stroke="black" points="8235,-1574.28 7303,-1574.28 7303,-1472.28 8235,-1472.28 8235,-1574.28"/>
<text text-anchor="middle" x="7769" y="-1502.19" font-family="Times,serif" font-size="85.12">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge23" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M7186.32,-1003.8C7216.34,-1020.56 7243.79,-1041.42 7267,-1067.28 7373.52,-1185.96 7196.56,-1305.53 7303,-1424.28 7317.75,-1440.74 7334.5,-1454.84 7352.67,-1466.89"/>
<polygon fill="black" stroke="black" points="7350.81,-1469.85 7361.12,-1472.28 7354.58,-1463.95 7350.81,-1469.85"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node28" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node28"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8808.5,-1210.28 8551.5,-1210.28 8551.5,-1174.28 8808.5,-1174.28 8808.5,-1210.28"/>
<text text-anchor="middle" x="8680" y="-1188.12" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge25" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7225.58,-936.65C7251.77,-936.12 7277.69,-935.66 7303,-935.28 7406.54,-933.77 8155.91,-868.44 8235,-935.28 8308.33,-997.26 8201.11,-1082.46 8271,-1148.28 8353.19,-1225.69 8489.98,-1224.12 8582.26,-1211.69"/>
<polygon fill="black" stroke="black" points="8582.76,-1215.16 8592.17,-1210.29 8581.78,-1208.23 8582.76,-1215.16"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge26" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7225.82,-905.35C7251.91,-903.77 7277.75,-902.39 7303,-901.28 7501.28,-892.58 8923.05,-822.42 9089,-931.28 9510.54,-1207.82 9439.84,-1470.15 9577,-1955.28 9709.82,-2425.06 9812.55,-4049.06 9826.81,-4283.1"/>
<polygon fill="black" stroke="black" points="9823.32,-4283.41 9827.42,-4293.18 9830.31,-4282.99 9823.32,-4283.41"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge29" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8086.42,-1574.35C8137.31,-1587.92 8188.5,-1604.96 8235,-1626.28 8396.76,-1700.48 8556.47,-1840.69 8632.71,-1912.85"/>
<polygon fill="black" stroke="black" points="8630.61,-1915.68 8640.27,-1920.04 8635.44,-1910.61 8630.61,-1915.68"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge30" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7847.3,-1574.36C7956.77,-1651.74 8152.78,-1810.11 8235,-2001.28 8273.84,-2091.59 8215.74,-2803.98 8271,-2885.28 8344.1,-2992.83 8496.68,-3037.16 8593.13,-3054.93"/>
<polygon fill="black" stroke="black" points="8592.69,-3058.41 8603.15,-3056.72 8593.92,-3051.52 8592.69,-3058.41"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge27" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M8180.73,-1472.14C8200.89,-1458.93 8219.26,-1443.13 8235,-1424.28 8318.03,-1324.9 8181.39,-352.78 8271,-259.28 8353.03,-173.69 8501.54,-186.96 8594.97,-206.56"/>
<polygon fill="black" stroke="black" points="8594.44,-210.03 8604.96,-208.72 8595.92,-203.19 8594.44,-210.03"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge31" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M8172.48,-1472.21C8195.36,-1459.11 8216.52,-1443.3 8235,-1424.28 8297.02,-1360.44 8205.14,-1287.16 8271,-1227.28 8357.7,-1148.46 8501.89,-1156.63 8593.59,-1172.44"/>
<polygon fill="black" stroke="black" points="8593.22,-1175.93 8603.68,-1174.25 8594.45,-1169.04 8593.22,-1175.93"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge28" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7842.79,-1574.32C7948.48,-1652.81 8141.94,-1813.85 8235,-2001.28 8282.58,-2097.1 8208.09,-2152.75 8271,-2239.28 8345.55,-2341.83 8486.41,-2395.89 8581.49,-2422.02"/>
<polygon fill="black" stroke="black" points="8580.84,-2425.47 8591.41,-2424.69 8582.66,-2418.71 8580.84,-2425.47"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge265" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9743.03,-4329.44C9729.72,-4338.82 9758.55,-4347.28 9829.5,-4347.28 9873.85,-4347.28 9901.73,-4343.98 9913.17,-4339.21"/>
<polygon fill="black" stroke="black" points="9916.58,-4340.01 9915.97,-4329.44 9909.85,-4338.08 9916.58,-4340.01"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge105" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8768.4,-2424.73C8858.68,-2410.93 8998.75,-2405.2 9089,-2477.28 9221.3,-2582.95 9322.79,-3141.76 9345.31,-3274.83"/>
<polygon fill="black" stroke="black" points="9341.92,-3275.74 9347.02,-3285.02 9348.82,-3274.58 9341.92,-3275.74"/>
</g>
<!-- caption_io._get_langs -->
<g id="node75" class="node">
<title>caption_io._get_langs</title>
<g id="a_node75"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9460,-3375.28 9242,-3375.28 9242,-3339.28 9460,-3339.28 9460,-3375.28"/>
<text text-anchor="middle" x="9351" y="-3352.5" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge101" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8750.25,-2424.73C8842.01,-2404.81 9002.37,-2387.03 9089,-2477.28 9154.69,-2545.72 9060.56,-3260.67 9125,-3330.28 9151.8,-3359.24 9192.13,-3369.65 9231.28,-3371.61"/>
<polygon fill="black" stroke="black" points="9231.64,-3375.12 9241.74,-3371.94 9231.85,-3368.12 9231.64,-3375.12"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node76" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node76"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9447.5,-3997.28 9254.5,-3997.28 9254.5,-3961.28 9447.5,-3961.28 9447.5,-3997.28"/>
<text text-anchor="middle" x="9351" y="-3976.04" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge102" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8749.89,-2424.78C8841.63,-2404.79 9002.36,-2386.8 9089,-2477.28 9123.87,-2513.71 9114.95,-3334.87 9125,-3384.28 9171.46,-3612.79 9294.34,-3869.11 9335.97,-3951.93"/>
<polygon fill="black" stroke="black" points="9332.89,-3953.59 9340.53,-3960.93 9339.14,-3950.43 9332.89,-3953.59"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node77" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node77"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9444.5,-2461.28 9257.5,-2461.28 9257.5,-2425.28 9444.5,-2425.28 9444.5,-2461.28"/>
<text text-anchor="middle" x="9351" y="-2440.04" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge103" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8845.51,-2443.28C8971.07,-2443.28 9140.14,-2443.28 9247.12,-2443.28"/>
<polygon fill="black" stroke="black" points="9247.28,-2446.78 9257.28,-2443.28 9247.28,-2439.78 9247.28,-2446.78"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge104" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8762.92,-2424.73C8856.31,-2399.21 9006.65,-2344.03 9089,-2239.28 9133.25,-2183.01 9072.08,-2130.5 9125,-2082.28 9163.68,-2047.03 9222.78,-2040.28 9270.71,-2041.95"/>
<polygon fill="black" stroke="black" points="9270.6,-2045.45 9280.75,-2042.43 9270.93,-2038.46 9270.6,-2045.45"/>
</g>
<!-- build_site.main -->
<g id="node31" class="node">
<title>build_site.main</title>
<g id="a_node31"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5156.5,-582.28 4736.5,-582.28 4736.5,-516.28 5156.5,-516.28 5156.5,-582.28"/>
<text text-anchor="middle" x="4946.5" y="-536.4" font-family="Times,serif" font-size="52.36">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge32" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M4980.39,-516.1C5029.2,-469.38 5125.96,-386.15 5227,-352.28 5334.52,-316.25 7153.68,-289.39 7267,-285.28 7700.35,-269.58 8208.41,-248.86 8481.43,-237.54"/>
<polygon fill="black" stroke="black" points="8481.6,-241.04 8491.44,-237.13 8481.31,-234.05 8481.6,-241.04"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge33" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5156.79,-549.28C5281.56,-549.28 5436.43,-549.28 5545.75,-549.28"/>
<polygon fill="black" stroke="black" points="5545.86,-552.78 5555.86,-549.28 5545.86,-545.78 5545.86,-552.78"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge34" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M4954.91,-582.55C4986.9,-727.08 5115,-1315.16 5191,-1803.28 5201.53,-1870.94 5180.77,-2058.78 5227,-2109.28 5303.49,-2192.84 5432.81,-2213.4 5534.24,-2214.89"/>
<polygon fill="black" stroke="black" points="5534.25,-2218.39 5544.28,-2214.97 5534.31,-2211.39 5534.25,-2218.39"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge35" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M4986.91,-582.34C5038.32,-623.18 5132.87,-690.64 5227,-718.28 5567.94,-818.41 5971.64,-823.14 6273.39,-805.89"/>
<polygon fill="black" stroke="black" points="6273.85,-809.37 6283.63,-805.3 6273.44,-802.38 6273.85,-809.37"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge36" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M4963.02,-582.49C4998.26,-653.5 5091.89,-819.13 5227,-886.28 5394.21,-969.39 5845.18,-979.95 6208.25,-973.24"/>
<polygon fill="black" stroke="black" points="6208.49,-976.73 6218.42,-973.04 6208.36,-969.74 6208.49,-976.73"/>
</g>
<!-- config_utils.load_config -->
<g id="node32" class="node">
<title>config_utils.load_config</title>
<g id="a_node32"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10046,-1748.78 9613,-1748.78 9613,-1701.78 10046,-1701.78 10046,-1748.78"/>
<text text-anchor="middle" x="9829.5" y="-1716.78" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge37" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M4955.95,-516.02C4980.33,-427.87 5060.02,-188.48 5227,-93.28 5515.45,71.17 6388.96,-70.28 6721,-70.28 6721,-70.28 6721,-70.28 8681,-70.28 9083.52,-70.28 9289.91,79.86 9577,-202.28 9797.99,-419.47 9824.95,-1486.92 9828.1,-1691.39"/>
<polygon fill="black" stroke="black" points="9824.6,-1691.58 9828.25,-1701.53 9831.6,-1691.48 9824.6,-1691.58"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node33" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node33"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7917,-352.28 7621,-352.28 7621,-316.28 7917,-316.28 7917,-352.28"/>
<text text-anchor="middle" x="7769" y="-328.98" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge38" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M5013.7,-516.28C5069.2,-490.26 5151.29,-455.59 5227,-438.28 5683.75,-333.87 7129.65,-331.1 7610.66,-333.21"/>
<polygon fill="black" stroke="black" points="7610.78,-336.71 7620.8,-333.25 7610.82,-329.71 7610.78,-336.71"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node34" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node34"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7908,-134.28 7630,-134.28 7630,-98.28 7908,-98.28 7908,-134.28"/>
<text text-anchor="middle" x="7769" y="-111.5" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge39" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M4960.02,-516.04C4991.22,-438.62 5080.6,-247.1 5227,-171.28 5439.01,-61.48 7108.86,-98.03 7619.9,-111.95"/>
<polygon fill="black" stroke="black" points="7619.82,-115.45 7629.92,-112.23 7620.02,-108.45 7619.82,-115.45"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node35" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node35"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="6141,-293.78 5227,-293.78 5227,-218.78 6141,-218.78 6141,-293.78"/>
<text text-anchor="middle" x="5684" y="-241.29" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge40" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M4973.91,-516.23C5019.22,-462.21 5117.53,-356.2 5227,-308.28 5236.03,-304.33 5245.26,-300.64 5254.64,-297.19"/>
<polygon fill="black" stroke="black" points="5255.82,-300.48 5264.06,-293.82 5253.47,-293.89 5255.82,-300.48"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node36" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node36"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="6960.5,-218.28 6483.5,-218.28 6483.5,-178.28 6960.5,-178.28 6960.5,-218.28"/>
<text text-anchor="middle" x="6722" y="-191.21" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge41" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M4962.36,-516.23C4996.76,-444.31 5089.58,-274.83 5227,-209.28 5336.02,-157.28 6077.35,-175.13 6473.12,-188.71"/>
<polygon fill="black" stroke="black" points="6473.16,-192.22 6483.27,-189.06 6473.4,-185.22 6473.16,-192.22"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node37" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node37"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="8077.5,-850.28 7460.5,-850.28 7460.5,-798.28 8077.5,-798.28 8077.5,-850.28"/>
<text text-anchor="middle" x="7769" y="-814.14" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge42" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M4974.22,-582.31C5019.61,-635.56 5117.57,-738.63 5227,-780.28 5623.92,-931.39 6860.93,-880.11 7449.99,-845.38"/>
<polygon fill="black" stroke="black" points="7450.56,-848.85 7460.34,-844.77 7450.15,-841.87 7450.56,-848.85"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node38" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node38"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="7948.5,-666.28 7589.5,-666.28 7589.5,-630.28 7948.5,-630.28 7948.5,-666.28"/>
<text text-anchor="middle" x="7769" y="-642.59" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge43" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5156.84,-571.14C5180.49,-573.13 5204.25,-574.9 5227,-576.28 6132.28,-631.26 6360.56,-596.96 7267,-627.28 7370.26,-630.74 7485.44,-635.5 7579.31,-639.62"/>
<polygon fill="black" stroke="black" points="7579.34,-643.13 7589.49,-640.07 7579.65,-636.13 7579.34,-643.13"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node39" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node39"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6001.5,-680.78 5366.5,-680.78 5366.5,-627.78 6001.5,-627.78 6001.5,-680.78"/>
<text text-anchor="middle" x="5684" y="-644.08" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge44" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5075.15,-582.34C5122.56,-593.61 5176.97,-605.35 5227,-613.28 5268.7,-619.9 5312.72,-625.54 5356.31,-630.32"/>
<polygon fill="black" stroke="black" points="5356.17,-633.82 5366.48,-631.42 5356.92,-626.86 5356.17,-633.82"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node40" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node40"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="5999,-500.78 5369,-500.78 5369,-447.78 5999,-447.78 5999,-500.78"/>
<text text-anchor="middle" x="5684" y="-464.08" font-family="Times,serif" font-size="40.88">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge45" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5156.79,-527.94C5236.44,-519.82 5328.36,-510.45 5412.86,-501.83"/>
<polygon fill="black" stroke="black" points="5413.27,-505.31 5422.86,-500.81 5412.56,-498.34 5413.27,-505.31"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node41" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node41"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="7092,-694.28 6352,-694.28 6352,-636.28 7092,-636.28 7092,-694.28"/>
<text text-anchor="middle" x="6722" y="-654" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge46" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M4996.29,-582.6C5050.04,-617.11 5140.38,-668.8 5227,-689.28 5430.42,-737.38 5969.78,-715.41 6341.52,-692.53"/>
<polygon fill="black" stroke="black" points="6341.87,-696.02 6351.64,-691.91 6341.44,-689.03 6341.87,-696.02"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge158" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7917.02,-331.15C8251.79,-324.69 9045.36,-313.48 9089,-351.28 9166.87,-418.74 9069.72,-493.34 9125,-580.28 9164.96,-643.14 9241.31,-686.31 9293.91,-710.15"/>
<polygon fill="black" stroke="black" points="9292.55,-713.38 9303.11,-714.24 9295.39,-706.98 9292.55,-713.38"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node109" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node109"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8756.5,-4253.28 8603.5,-4253.28 8603.5,-4217.28 8756.5,-4217.28 8756.5,-4253.28"/>
<text text-anchor="middle" x="8680" y="-4231.58" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge156" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7860.26,-316.25C7967.46,-300.71 8143.27,-294.87 8235,-399.28 8302.67,-476.31 8211.46,-4006.81 8271,-4090.28 8344.25,-4192.99 8496.78,-4223.35 8593.18,-4232.08"/>
<polygon fill="black" stroke="black" points="8592.94,-4235.57 8603.2,-4232.93 8593.53,-4228.6 8592.94,-4235.57"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node111" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node111"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8782,-304.28 8578,-304.28 8578,-268.28 8782,-268.28 8782,-304.28"/>
<text text-anchor="middle" x="8680" y="-282.58" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge157" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7917.06,-326.52C8098.91,-316.92 8404.4,-300.78 8567.86,-292.15"/>
<polygon fill="black" stroke="black" points="8568.13,-295.64 8577.93,-291.62 8567.76,-288.65 8568.13,-295.64"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node112" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node112"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="6963,-276.28 6481,-276.28 6481,-236.28 6963,-236.28 6963,-276.28"/>
<text text-anchor="middle" x="6722" y="-249.21" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge159" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M6141.29,-256.28C6254.48,-256.28 6371.66,-256.28 6470.79,-256.28"/>
<polygon fill="black" stroke="black" points="6470.94,-259.78 6480.94,-256.28 6470.94,-252.78 6470.94,-259.78"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node60" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node60"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="8796.5,-976.28 8563.5,-976.28 8563.5,-940.28 8796.5,-940.28 8796.5,-976.28"/>
<text text-anchor="middle" x="8680" y="-953.49" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge160" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M7946.61,-850.32C8124.85,-876.6 8395.64,-916.51 8553.17,-939.74"/>
<polygon fill="black" stroke="black" points="8552.98,-943.24 8563.38,-941.24 8554,-936.32 8552.98,-943.24"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node147" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node147"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="7267,-579.78 6177,-579.78 6177,-502.78 7267,-502.78 7267,-579.78"/>
<text text-anchor="middle" x="6722" y="-525.38" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge231" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M5999.35,-494.61C6052.57,-498.06 6109.2,-501.72 6166.43,-505.42"/>
<polygon fill="black" stroke="black" points="6166.54,-508.93 6176.75,-506.09 6167,-501.95 6166.54,-508.93"/>
</g>
<!-- price_utils.predict_price -->
<g id="node148" class="node">
<title>price_utils.predict_price</title>
<g id="a_node148"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7974,-611.78 7564,-611.78 7564,-568.78 7974,-568.78 7974,-611.78"/>
<text text-anchor="middle" x="7769" y="-582.14" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge232" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M5999.08,-469.97C6444.97,-465.01 7213.75,-461.24 7267,-493.28 7295.63,-510.51 7274.85,-541.28 7303,-559.28 7403.33,-623.45 7542.01,-624.08 7641.78,-613.02"/>
<polygon fill="black" stroke="black" points="7642.39,-616.47 7651.91,-611.84 7641.58,-609.52 7642.39,-616.47"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node149" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node149"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8873.5,-399.78 8486.5,-399.78 8486.5,-360.78 8873.5,-360.78 8873.5,-399.78"/>
<text text-anchor="middle" x="8680" y="-373.38" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge233" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M5823.29,-447.77C5921.55,-430.26 6056.85,-408.85 6177,-399.28 6621.55,-363.9 7962.5,-373.05 8475.96,-378.06"/>
<polygon fill="black" stroke="black" points="8476.03,-381.56 8486.07,-378.16 8476.1,-374.56 8476.03,-381.56"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node151" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node151"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="6978.5,-446.28 6465.5,-446.28 6465.5,-408.28 6978.5,-408.28 6978.5,-446.28"/>
<text text-anchor="middle" x="6722" y="-420.56" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge234" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M5999.35,-460.02C6144.86,-453.42 6315.88,-445.66 6454.9,-439.36"/>
<polygon fill="black" stroke="black" points="6455.44,-442.84 6465.27,-438.89 6455.12,-435.84 6455.44,-442.84"/>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge235" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7092.16,-659.28C7256.77,-656.6 7443.65,-653.56 7579.11,-651.36"/>
<polygon fill="black" stroke="black" points="7579.24,-654.86 7589.18,-651.19 7579.13,-647.86 7579.24,-654.86"/>
</g>
<!-- clean_data._parse_date -->
<g id="node42" class="node">
<title>clean_data._parse_date</title>
<g id="a_node42"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8819.5,-4081.28 8540.5,-4081.28 8540.5,-4045.28 8819.5,-4045.28 8819.5,-4081.28"/>
<text text-anchor="middle" x="8680" y="-4057.59" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge47" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8766.46,-4045.23C8930.6,-4014.67 9298.38,-3966.36 9577,-4078.28 9684.29,-4121.39 9773.57,-4233.24 9810.39,-4284.69"/>
<polygon fill="black" stroke="black" points="9807.62,-4286.83 9816.25,-4292.98 9813.34,-4282.8 9807.62,-4286.83"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node43" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node43"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7922.5,-3878.28 7615.5,-3878.28 7615.5,-3842.28 7922.5,-3842.28 7922.5,-3878.28"/>
<text text-anchor="middle" x="7769" y="-3854.12" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge49" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7922.51,-3872.29C8041,-3877.94 8192.16,-3875.86 8235,-3833.28 8323.45,-3745.38 8202.38,-3377.4 8271,-3273.28 8344.43,-3161.88 8497.16,-3107.55 8593.51,-3083.36"/>
<polygon fill="black" stroke="black" points="8594.36,-3086.76 8603.23,-3080.97 8592.69,-3079.96 8594.36,-3086.76"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge48" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7922.51,-3843.21C8022.06,-3840.52 8149.03,-3854.17 8235,-3925.28 8273.34,-3957 8231.72,-4000.75 8271,-4031.28 8360.21,-4100.64 8496.04,-4096.17 8586.14,-4082.84"/>
<polygon fill="black" stroke="black" points="8586.73,-4086.29 8596.07,-4081.31 8585.66,-4079.37 8586.73,-4086.29"/>
</g>
<!-- clean_data._clean_media -->
<g id="node44" class="node">
<title>clean_data._clean_media</title>
<g id="a_node44"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7959,-3974.28 7579,-3974.28 7579,-3934.28 7959,-3934.28 7959,-3974.28"/>
<text text-anchor="middle" x="7769" y="-3947.21" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge50" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7900.78,-3934.28C7998.64,-3925.72 8132.67,-3928.07 8235,-3983.28 8258.47,-3995.95 8247.63,-4018.43 8271,-4031.28 8349.06,-4074.21 8448.54,-4082.77 8529.72,-4080.32"/>
<polygon fill="black" stroke="black" points="8530.16,-4083.81 8540.03,-4079.95 8529.91,-4076.81 8530.16,-4083.81"/>
</g>
<!-- caption_io.has_caption -->
<g id="node45" class="node">
<title>caption_io.has_caption</title>
<g id="a_node45"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8757.5,-3523.28 8602.5,-3523.28 8602.5,-3487.28 8757.5,-3487.28 8757.5,-3523.28"/>
<text text-anchor="middle" x="8680" y="-3502.04" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge51" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7894.09,-3974.29C8000.14,-3983.67 8148.85,-3977.14 8235,-3887.28 8289.88,-3830.05 8213.96,-3587.36 8271,-3532.28 8359.23,-3447.09 8514.2,-3464.59 8605.65,-3484.98"/>
<polygon fill="black" stroke="black" points="8605.13,-3488.45 8615.66,-3487.28 8606.69,-3481.63 8605.13,-3488.45"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge99" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8757.71,-3490.24C8844.85,-3477.44 8988.04,-3469.8 9089,-3532.28 9249.52,-3631.63 9322.35,-3868.92 9343.31,-3950.87"/>
<polygon fill="black" stroke="black" points="9340.01,-3952.09 9345.82,-3960.95 9346.8,-3950.4 9340.01,-3952.09"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge100" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8757.53,-3493.35C8849.29,-3475.03 9001.61,-3431.22 9089,-3333.28 9149.99,-3264.94 9308.77,-2614.89 9343.31,-2471.27"/>
<polygon fill="black" stroke="black" points="9346.73,-2472 9345.66,-2461.46 9339.93,-2470.37 9346.73,-2472"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node46" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node46"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7971,-2680.28 7567,-2680.28 7567,-2634.28 7971,-2634.28 7971,-2680.28"/>
<text text-anchor="middle" x="7769" y="-2648.84" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge52" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7971.03,-2647.43C8078.3,-2646.67 8196.07,-2654.52 8235,-2689.28 8301.06,-2748.28 8216.18,-2815.72 8271,-2885.28 8350.72,-2986.43 8498.88,-3032.53 8593.03,-3052.43"/>
<polygon fill="black" stroke="black" points="8592.6,-3055.92 8603.1,-3054.5 8594.01,-3049.06 8592.6,-3055.92"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge54" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7971.04,-2645.25C8066.18,-2628.45 8172.42,-2591.38 8235,-2511.28 8317.24,-2406.03 8207.99,-2029.06 8271,-1911.28 8350.05,-1763.54 8534.03,-1665.79 8625.45,-1624.55"/>
<polygon fill="black" stroke="black" points="8627.09,-1627.65 8634.8,-1620.39 8624.24,-1621.26 8627.09,-1627.65"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node47" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node47"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8769.5,-2657.28 8590.5,-2657.28 8590.5,-2621.28 8769.5,-2621.28 8769.5,-2657.28"/>
<text text-anchor="middle" x="8680" y="-2635.24" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge53" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7971.17,-2653.3C8160,-2649.56 8434.54,-2644.13 8579.98,-2641.25"/>
<polygon fill="black" stroke="black" points="8580.29,-2644.74 8590.22,-2641.04 8580.16,-2637.74 8580.29,-2644.74"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node48" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node48"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7977,-3824.28 7561,-3824.28 7561,-3788.28 7977,-3788.28 7977,-3824.28"/>
<text text-anchor="middle" x="7769" y="-3800.12" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node49" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node49"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8893.5,-3577.28 8466.5,-3577.28 8466.5,-3541.28 8893.5,-3541.28 8893.5,-3577.28"/>
<text text-anchor="middle" x="8680" y="-3553.12" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node50" class="node">
<title>clean_data.main</title>
<g id="a_node50"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6818,-3878.28 6626,-3878.28 6626,-3842.28 6818,-3842.28 6818,-3878.28"/>
<text text-anchor="middle" x="6722" y="-3854.98" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge55" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6818.04,-3860.28C6996.68,-3860.28 7384.37,-3860.28 7605.28,-3860.28"/>
<polygon fill="black" stroke="black" points="7605.34,-3863.78 7615.34,-3860.28 7605.34,-3856.78 7605.34,-3863.78"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge56" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6818.11,-3871.01C6932.93,-3883.75 7131.95,-3905.19 7303,-3920.28 7390.08,-3927.97 7486.44,-3935.22 7568.76,-3941.04"/>
<polygon fill="black" stroke="black" points="7568.76,-3944.55 7578.98,-3941.76 7569.25,-3937.56 7568.76,-3944.55"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge57" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6818.21,-3851.99C6944.61,-3835.36 7163.84,-3785.69 7267,-3638.28 7327.5,-3551.83 7229.54,-2765.04 7303,-2689.28 7338.4,-2652.77 7451.14,-2644.4 7556.74,-2645.34"/>
<polygon fill="black" stroke="black" points="7556.89,-2648.84 7566.93,-2645.46 7556.97,-2641.84 7556.89,-2648.84"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge58" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6818.04,-3855.37C6982.68,-3846.87 7324.89,-3829.18 7550.45,-3817.53"/>
<polygon fill="black" stroke="black" points="7550.96,-3821 7560.77,-3816.99 7550.6,-3814.01 7550.96,-3821"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge59" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6818.15,-3866.07C6933.01,-3872.75 7132.06,-3883.31 7303,-3887.28 7406.53,-3889.69 8157.55,-3956.02 8235,-3887.28 8335.77,-3797.85 8173.24,-3679 8271,-3586.28 8298.88,-3559.85 8376.13,-3550.94 8456.01,-3549.46"/>
<polygon fill="black" stroke="black" points="8456.32,-3552.96 8466.27,-3549.31 8456.22,-3545.96 8456.32,-3552.96"/>
</g>
<!-- telegram_bot._t -->
<g id="node52" class="node">
<title>telegram_bot._t</title>
<g id="a_node52"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5788,-5043.28 5580,-5043.28 5580,-5007.28 5788,-5007.28 5788,-5043.28"/>
<text text-anchor="middle" x="5684" y="-5019.41" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node53" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node53"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5835,-4989.28 5533,-4989.28 5533,-4953.28 5835,-4953.28 5835,-4989.28"/>
<text text-anchor="middle" x="5684" y="-4966.49" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node54" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node54"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6826,-4989.28 6618,-4989.28 6618,-4953.28 6826,-4953.28 6826,-4989.28"/>
<text text-anchor="middle" x="6722" y="-4967.58" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge63" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5835.09,-4971.28C6044.61,-4971.28 6420.1,-4971.28 6607.76,-4971.28"/>
<polygon fill="black" stroke="black" points="6607.93,-4974.78 6617.93,-4971.28 6607.93,-4967.78 6607.93,-4974.78"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node55" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node55"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5835,-4157.28 5533,-4157.28 5533,-4121.28 5835,-4121.28 5835,-4157.28"/>
<text text-anchor="middle" x="5684" y="-4133.98" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge64" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5788.95,-4157.3C5891.55,-4180.26 6046.4,-4229.59 6141,-4329.28 6173.8,-4363.85 6138.2,-4402.61 6177,-4430.28 6195.75,-4443.65 8345.69,-4450.15 9125,-4452.28 9325.89,-4452.84 9382.63,-4503.05 9577,-4452.28 9663.68,-4429.64 9752.08,-4369.75 9797.43,-4335.75"/>
<polygon fill="black" stroke="black" points="9799.8,-4338.35 9805.65,-4329.52 9795.57,-4332.77 9799.8,-4338.35"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node56" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node56"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9494.5,-4794.28 9207.5,-4794.28 9207.5,-4758.28 9494.5,-4758.28 9494.5,-4794.28"/>
<text text-anchor="middle" x="9351" y="-4770.59" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge65" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9494.73,-4776.22C9523.75,-4771 9552.77,-4761.55 9577,-4745.28 9728.19,-4643.78 9800.19,-4418.52 9821.5,-4339.41"/>
<polygon fill="black" stroke="black" points="9824.9,-4340.23 9824.06,-4329.67 9818.13,-4338.45 9824.9,-4340.23"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node57" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6806,-3432.28 6638,-3432.28 6638,-3396.28 6806,-3396.28 6806,-3432.28"/>
<text text-anchor="middle" x="6722" y="-3411.04" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node58" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node58"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7915,-3344.28 7623,-3344.28 7623,-3308.28 7915,-3308.28 7915,-3344.28"/>
<text text-anchor="middle" x="7769" y="-3322.12" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge66" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7915.04,-3322.61C8048.83,-3319.23 8250.74,-3314.12 8413.4,-3310"/>
<polygon fill="black" stroke="black" points="8413.65,-3313.5 8423.56,-3309.75 8413.47,-3306.5 8413.65,-3313.5"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node59" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6883.5,-1112.28 6560.5,-1112.28 6560.5,-1076.28 6883.5,-1076.28 6883.5,-1112.28"/>
<text text-anchor="middle" x="6722" y="-1089.49" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge67" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6883.77,-1091.99C6993.07,-1087.54 7140.28,-1075.88 7267,-1046.28 7283.72,-1042.38 7286.2,-1035.84 7303,-1032.28 7505.84,-989.37 8028.02,-1001.28 8235,-989.28 8342.33,-983.06 8464.15,-974.45 8553,-967.88"/>
<polygon fill="black" stroke="black" points="8553.41,-971.36 8563.13,-967.13 8552.89,-964.38 8553.41,-971.36"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node61" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5922.5,-3995.28 5445.5,-3995.28 5445.5,-3955.28 5922.5,-3955.28 5922.5,-3995.28"/>
<text text-anchor="middle" x="5684" y="-3968.21" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge68" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5922.65,-3962.3C6016.55,-3962.75 6109.58,-3972.11 6141,-4004.28 6211.08,-4076.04 6108.93,-4832.61 6177,-4906.28 6292.36,-5031.15 6511.8,-5013.35 6633.76,-4991.22"/>
<polygon fill="black" stroke="black" points="6634.62,-4994.62 6643.81,-4989.35 6633.34,-4987.74 6634.62,-4994.62"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge69" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5922.8,-3987.56C6016.9,-3986.79 6110.05,-3976.99 6141,-3944.28 6247.63,-3831.62 6072.55,-1266.97 6177,-1152.28 6293.64,-1024.22 6520.17,-1049.19 6640.83,-1074.14"/>
<polygon fill="black" stroke="black" points="6640.24,-1077.59 6650.75,-1076.24 6641.7,-1070.74 6640.24,-1077.59"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node62" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node62"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5959.5,-4065.28 5408.5,-4065.28 5408.5,-4013.28 5959.5,-4013.28 5959.5,-4065.28"/>
<text text-anchor="middle" x="5684" y="-4029.59" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge70" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5959.56,-4024.91C6027.98,-4035.51 6094.89,-4060.62 6141,-4112.28 6199.81,-4178.17 6116.89,-4841.58 6177,-4906.28 6292.54,-5030.66 6511.4,-5013.2 6633.35,-4991.23"/>
<polygon fill="black" stroke="black" points="6634.21,-4994.63 6643.4,-4989.37 6632.93,-4987.75 6634.21,-4994.63"/>
</g>
<!-- lot_io.get_lot -->
<g id="node63" class="node">
<title>lot_io.get_lot</title>
<g id="a_node63"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7841.5,-3770.28 7696.5,-3770.28 7696.5,-3734.28 7841.5,-3734.28 7841.5,-3770.28"/>
<text text-anchor="middle" x="7769" y="-3747.49" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge71" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5799.71,-4065.29C5901.78,-4081.17 6048.77,-4085.17 6141,-4004.28 6199.39,-3953.08 6117.95,-3883.74 6177,-3833.28 6292.26,-3734.8 7377.18,-3745.6 7686.22,-3750.73"/>
<polygon fill="black" stroke="black" points="7686.39,-3754.23 7696.45,-3750.9 7686.51,-3747.23 7686.39,-3754.23"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge152" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7841.56,-3767.3C7945.68,-3784.46 8137.18,-3797.46 8235,-3687.28 8300.52,-3613.49 8226.18,-1999.21 8271,-1911.28 8346.98,-1762.23 8531.9,-1665.28 8624.41,-1624.42"/>
<polygon fill="black" stroke="black" points="8625.84,-1627.62 8633.61,-1620.41 8623.04,-1621.2 8625.84,-1627.62"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node108" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node108"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9476,-4123.28 9226,-4123.28 9226,-4087.28 9476,-4087.28 9476,-4123.28"/>
<text text-anchor="middle" x="9351" y="-4099.12" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge153" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7841.8,-3746.04C7957.73,-3737.62 8178.86,-3728.94 8235,-3779.28 8306.8,-3843.68 8199.02,-3929.09 8271,-3993.28 8338.92,-4053.87 8999.08,-4022.19 9089,-4036.28 9157.08,-4046.96 9233.05,-4068.13 9285.39,-4084.22"/>
<polygon fill="black" stroke="black" points="9284.62,-4087.65 9295.21,-4087.26 9286.69,-4080.96 9284.62,-4087.65"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node64" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node64"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5111.5,-4157.28 4781.5,-4157.28 4781.5,-4121.28 5111.5,-4121.28 5111.5,-4157.28"/>
<text text-anchor="middle" x="4946.5" y="-4133.12" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge72" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5111.65,-4139.28C5234.26,-4139.28 5400.97,-4139.28 5522.66,-4139.28"/>
<polygon fill="black" stroke="black" points="5522.81,-4142.78 5532.81,-4139.28 5522.81,-4135.78 5522.81,-4142.78"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node65" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node65"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5058.5,-5015.28 4834.5,-5015.28 4834.5,-4979.28 5058.5,-4979.28 5058.5,-5015.28"/>
<text text-anchor="middle" x="4946.5" y="-4993.12" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge73" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5058.81,-5001.52C5196.81,-5006.78 5430.76,-5015.68 5569.69,-5020.97"/>
<polygon fill="black" stroke="black" points="5569.81,-5024.48 5579.93,-5021.36 5570.08,-5017.48 5569.81,-5024.48"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge74" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5058.81,-4993.35C5182.24,-4988.99 5382.44,-4981.91 5522.74,-4976.95"/>
<polygon fill="black" stroke="black" points="5522.86,-4980.45 5532.73,-4976.6 5522.62,-4973.45 5522.86,-4980.45"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node66" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node66"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5121,-4960.78 4772,-4960.78 4772,-4921.78 5121,-4921.78 5121,-4960.78"/>
<text text-anchor="middle" x="4946.5" y="-4934.38" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge75" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5121.09,-4950.2C5145.11,-4954.8 5169.05,-4961.27 5191,-4970.28 5209.75,-4977.99 5208.03,-4991.14 5227,-4998.28 5338,-5040.08 5474.93,-5042.25 5569.61,-5036.84"/>
<polygon fill="black" stroke="black" points="5570.02,-5040.32 5579.79,-5036.22 5569.6,-5033.33 5570.02,-5040.32"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge76" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5121.34,-4948.38C5242.88,-4953.33 5404.01,-4959.9 5522.51,-4964.74"/>
<polygon fill="black" stroke="black" points="5522.63,-4968.25 5532.76,-4965.16 5522.91,-4961.25 5522.63,-4968.25"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge77" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5121.47,-4939.33C5353.88,-4937.26 5778.5,-4935.4 6141,-4944.28 6303.3,-4948.26 6490.95,-4957.92 6607.81,-4964.54"/>
<polygon fill="black" stroke="black" points="6607.67,-4968.04 6617.85,-4965.11 6608.06,-4961.05 6607.67,-4968.04"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node67" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node67"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5161.5,-5074.78 4731.5,-5074.78 4731.5,-5033.78 5161.5,-5033.78 5161.5,-5074.78"/>
<text text-anchor="middle" x="4946.5" y="-5047.04" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge78" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5161.72,-5045.84C5295.03,-5040.58 5461.15,-5034.03 5569.54,-5029.76"/>
<polygon fill="black" stroke="black" points="5569.99,-5033.24 5579.84,-5029.35 5569.71,-5026.25 5569.99,-5033.24"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge79" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5161.54,-5034.23C5171.61,-5031.32 5181.48,-5028.02 5191,-5024.28 5209.37,-5017.07 5208.41,-5004.91 5227,-4998.28 5321.14,-4964.74 5433.1,-4957.68 5522.51,-4959.15"/>
<polygon fill="black" stroke="black" points="5522.68,-4962.66 5532.75,-4959.36 5522.82,-4955.66 5522.68,-4962.66"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge80" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5161.53,-5062.74C5400.63,-5070.14 5799.05,-5076.33 6141,-5052.28 6306.19,-5040.67 6495.97,-5011.04 6612.17,-4991.03"/>
<polygon fill="black" stroke="black" points="6612.89,-4994.46 6622.14,-4989.3 6611.69,-4987.56 6612.89,-4994.46"/>
</g>
<!-- telegram_bot.main -->
<g id="node68" class="node">
<title>telegram_bot.main</title>
<g id="a_node68"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5112,-4061.28 4781,-4061.28 4781,-4017.28 5112,-4017.28 5112,-4061.28"/>
<text text-anchor="middle" x="4946.5" y="-4030.96" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge81" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5109.36,-4061.29C5238.26,-4078.82 5416.94,-4103.11 5540.47,-4119.91"/>
<polygon fill="black" stroke="black" points="5540.01,-4123.38 5550.39,-4121.25 5540.95,-4116.44 5540.01,-4123.38"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge82" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5112.12,-4059.23C5142.5,-4070.32 5170.93,-4087.08 5191,-4112.28 5267.03,-4207.75 5140.32,-4574.37 5227,-4660.28 5298.86,-4731.51 8459.13,-4767.4 9197.07,-4774.82"/>
<polygon fill="black" stroke="black" points="9197.19,-4778.32 9207.23,-4774.92 9197.26,-4771.32 9197.19,-4778.32"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge83" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M4976.47,-4017.1C5029.3,-3974.8 5140.51,-3876.93 5191,-3766.28 5217.04,-3709.21 5180.91,-3528.84 5227,-3486.28 5329.69,-3391.47 6316.41,-3405.21 6627.53,-3411.98"/>
<polygon fill="black" stroke="black" points="6627.79,-3415.48 6637.86,-3412.2 6627.94,-3408.48 6627.79,-3415.48"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge84" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4976.77,-4017.23C5030.11,-3975.16 5142.1,-3877.64 5191,-3766.28 5223.5,-3692.26 5167.91,-3459.46 5227,-3404.28 5314.37,-3322.7 7074.19,-3323.34 7612.75,-3325.47"/>
<polygon fill="black" stroke="black" points="7612.91,-3328.97 7622.92,-3325.51 7612.94,-3321.97 7612.91,-3328.97"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge85" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5109.89,-4017.25C5148.24,-4012.51 5189.02,-4007.87 5227,-4004.28 5294.33,-3997.93 5367.38,-3992.6 5434.88,-3988.3"/>
<polygon fill="black" stroke="black" points="5435.47,-3991.77 5445.23,-3987.65 5435.03,-3984.79 5435.47,-3991.77"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge86" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5112.1,-4039.28C5196.35,-4039.28 5301.33,-4039.28 5398.21,-4039.28"/>
<polygon fill="black" stroke="black" points="5398.46,-4042.78 5408.46,-4039.28 5398.46,-4035.78 5398.46,-4042.78"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node69" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node69"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="7883,-2502.28 7655,-2502.28 7655,-2466.28 7883,-2466.28 7883,-2502.28"/>
<text text-anchor="middle" x="7769" y="-2478.98" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node70" class="node">
<title>chop.process_message</title>
<g id="a_node70"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="7223,-2581.28 6221,-2581.28 6221,-2479.28 7223,-2479.28 7223,-2581.28"/>
<text text-anchor="middle" x="6722" y="-2508.96" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge92" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7223.08,-2501.01C7238.77,-2490.71 7253.51,-2478.86 7267,-2465.28 7367.26,-2364.4 7198.87,-2244.18 7303,-2147.28 7378.88,-2076.68 8149.91,-2168.45 8235,-2109.28 8269.02,-2085.63 8238.42,-2048.89 8271,-2023.28 8305.86,-1995.88 8347.68,-1977.92 8391.07,-1966.44"/>
<polygon fill="black" stroke="black" points="8392.1,-1969.79 8400.93,-1963.95 8390.38,-1963.01 8392.1,-1969.79"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge93" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7223.22,-2501.63C7238.91,-2491.17 7253.6,-2479.12 7267,-2465.28 7330.65,-2399.61 7237.38,-2118.99 7303,-2055.28 7343.44,-2016.02 7477.75,-2011.51 7591.69,-2015.55"/>
<polygon fill="black" stroke="black" points="7591.82,-2019.06 7601.95,-2015.94 7592.09,-2012.07 7591.82,-2019.06"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge90" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7178.74,-2479.23C7208.65,-2474.83 7238.28,-2470.18 7267,-2465.28 7283.16,-2462.53 7286.72,-2459.16 7303,-2457.28 7732.34,-2407.94 8241.97,-2421.34 8504.05,-2433.45"/>
<polygon fill="black" stroke="black" points="8504.27,-2436.97 8514.42,-2433.94 8504.6,-2429.97 8504.27,-2436.97"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge89" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7136.01,-2581.37C7186.44,-2603.95 7232.31,-2635.21 7267,-2678.28 7316.41,-2739.63 7247.17,-3330.72 7303,-3386.28 7339.74,-3422.85 8183.47,-3423.71 8235,-3429.28 8360.02,-3442.82 8503.17,-3469.33 8592.34,-3487.19"/>
<polygon fill="black" stroke="black" points="8591.91,-3490.67 8602.4,-3489.21 8593.29,-3483.81 8591.91,-3490.67"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge95" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7223.25,-2560.68C7250.22,-2562.25 7276.94,-2563.8 7303,-2565.28 7781.69,-2592.6 8354.23,-2622.5 8580.27,-2634.2"/>
<polygon fill="black" stroke="black" points="8580.28,-2637.7 8590.45,-2634.72 8580.64,-2630.71 8580.28,-2637.7"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge87" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7223.13,-2524.4C7517.68,-2520.84 7897.53,-2516.06 8235,-2511.28 8329.63,-2509.94 8435.6,-2508.28 8520.28,-2506.91"/>
<polygon fill="black" stroke="black" points="8520.55,-2510.41 8530.5,-2506.74 8520.44,-2503.41 8520.55,-2510.41"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge88" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M7223.31,-2508.26C7380,-2501.36 7539.35,-2494.35 7644.87,-2489.7"/>
<polygon fill="black" stroke="black" points="7645.08,-2493.2 7654.91,-2489.26 7644.77,-2486.21 7645.08,-2493.2"/>
</g>
<!-- embed.embed_file -->
<g id="node71" class="node">
<title>embed.embed_file</title>
<g id="a_node71"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7974,-1415.78 7564,-1415.78 7564,-1360.78 7974,-1360.78 7974,-1415.78"/>
<text text-anchor="middle" x="7769" y="-1377.74" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge91" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6839.69,-2479.23C6969.7,-2415.37 7173.84,-2292.7 7267,-2117.28 7301.14,-2053.01 7254.31,-1517.37 7303,-1463.28 7365.09,-1394.31 7463.53,-1371.75 7553.87,-1368.01"/>
<polygon fill="black" stroke="black" points="7554.12,-1371.5 7564,-1367.67 7553.88,-1364.51 7554.12,-1371.5"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node72" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node72"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="8782,-2586.28 8578,-2586.28 8578,-2550.28 8782,-2550.28 8782,-2586.28"/>
<text text-anchor="middle" x="8680" y="-2562.41" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge94" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M7223.23,-2540C7677.05,-2548.82 8312.83,-2561.17 8567.29,-2566.11"/>
<polygon fill="black" stroke="black" points="8567.58,-2569.62 8577.65,-2566.32 8567.72,-2562.62 8567.58,-2569.62"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node73" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node73"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="9469,-2276.28 9233,-2276.28 9233,-2240.28 9469,-2240.28 9469,-2276.28"/>
<text text-anchor="middle" x="9351" y="-2254.24" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge96" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M7223.27,-2498.74C7238.77,-2489.03 7253.43,-2477.93 7267,-2465.28 7329.23,-2407.28 7237.68,-2331.79 7303,-2277.28 7376.77,-2215.72 8787.18,-2244.62 9222.89,-2255.07"/>
<polygon fill="black" stroke="black" points="9222.91,-2258.57 9233,-2255.31 9223.08,-2251.57 9222.91,-2258.57"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge110" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7974.24,-1394.38C8056.13,-1400.02 8150.84,-1410.59 8235,-1430.28 8386.21,-1465.66 8554.6,-1541.74 8633.52,-1579.74"/>
<polygon fill="black" stroke="black" points="8632.17,-1582.97 8642.69,-1584.17 8635.22,-1576.67 8632.17,-1582.97"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge112" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7974.25,-1377.06C8333.25,-1356.59 9043.91,-1312.42 9089,-1281.28 9275.48,-1152.5 9332.76,-853.46 9346.38,-760.42"/>
<polygon fill="black" stroke="black" points="9349.87,-760.76 9347.8,-750.37 9342.94,-759.78 9349.87,-760.76"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node80" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node80"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8772.5,-1406.28 8587.5,-1406.28 8587.5,-1370.28 8772.5,-1370.28 8772.5,-1406.28"/>
<text text-anchor="middle" x="8680" y="-1383.5" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge111" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7974.28,-1388.28C8161.77,-1388.28 8431.79,-1388.28 8577.14,-1388.28"/>
<polygon fill="black" stroke="black" points="8577.39,-1391.78 8587.39,-1388.28 8577.39,-1384.78 8577.39,-1391.78"/>
</g>
<!-- chop.main -->
<g id="node74" class="node">
<title>chop.main</title>
<g id="a_node74"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5759.5,-2548.28 5608.5,-2548.28 5608.5,-2512.28 5759.5,-2512.28 5759.5,-2548.28"/>
<text text-anchor="middle" x="5684" y="-2524.12" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge97" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5759.51,-2530.28C5856.38,-2530.28 6034.15,-2530.28 6210.73,-2530.28"/>
<polygon fill="black" stroke="black" points="6210.74,-2533.78 6220.74,-2530.28 6210.74,-2526.78 6210.74,-2533.78"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge98" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9460.28,-3370.22C9501.8,-3369.15 9546.49,-3359.72 9577,-3330.28 9812.44,-3103.17 9827.7,-1969.85 9828.49,-1759.06"/>
<polygon fill="black" stroke="black" points="9831.99,-1758.92 9828.52,-1748.91 9824.99,-1758.9 9831.99,-1758.92"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge266" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9421.23,-2041.17C9471.51,-2037.36 9537.42,-2041.9 9577,-2082.28 9739.33,-2247.93 9817.32,-4035.33 9827.38,-4282.9"/>
<polygon fill="black" stroke="black" points="9823.89,-4283.36 9827.79,-4293.21 9830.89,-4283.08 9823.89,-4283.36"/>
</g>
<!-- caption_io.write_caption -->
<g id="node79" class="node">
<title>caption_io.write_caption</title>
<g id="a_node79"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8846.5,-3913.28 8513.5,-3913.28 8513.5,-3877.28 8846.5,-3877.28 8846.5,-3913.28"/>
<text text-anchor="middle" x="8680" y="-3889.12" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge109" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8743.57,-3877.2C8837.92,-3846.18 9013.58,-3773 9089,-3640.28 9135.26,-3558.88 9115.5,-2048.43 9125,-1955.28 9174.33,-1471.71 9310.93,-892.73 9343.14,-760.21"/>
<polygon fill="black" stroke="black" points="9346.55,-760.99 9345.52,-750.44 9339.75,-759.33 9346.55,-760.99"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge108" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8846.77,-3903.46C8944.48,-3904.36 9055.4,-3897.25 9089,-3863.28 9172.49,-3778.89 9043.27,-3416.38 9125,-3330.28 9148.73,-3305.29 9182.57,-3294.24 9216.81,-3290.52"/>
<polygon fill="black" stroke="black" points="9217.3,-3293.99 9226.96,-3289.62 9216.69,-3287.01 9217.3,-3293.99"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge106" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8783.76,-3913.32C8872.08,-3923.12 8999.05,-3923.05 9089,-3863.28 9264.26,-3746.84 9328.52,-3474.18 9345.2,-3385.62"/>
<polygon fill="black" stroke="black" points="9348.69,-3385.98 9347.04,-3375.52 9341.8,-3384.73 9348.69,-3385.98"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge107" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8846.74,-3903.82C8921.05,-3908.79 9009.65,-3916.31 9089,-3927.28 9147.14,-3935.33 9211.84,-3948.19 9262.29,-3959.11"/>
<polygon fill="black" stroke="black" points="9261.66,-3962.56 9272.18,-3961.27 9263.15,-3955.72 9261.66,-3962.56"/>
</g>
<!-- embed.main -->
<g id="node81" class="node">
<title>embed.main</title>
<g id="a_node81"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6810,-1406.28 6634,-1406.28 6634,-1370.28 6810,-1370.28 6810,-1406.28"/>
<text text-anchor="middle" x="6722" y="-1382.12" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge113" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6810.3,-1388.28C6972.52,-1388.28 7324.74,-1388.28 7553.83,-1388.28"/>
<polygon fill="black" stroke="black" points="7553.97,-1391.78 7563.97,-1388.28 7553.97,-1384.78 7553.97,-1391.78"/>
</g>
<!-- caption._identify_size -->
<g id="node82" class="node">
<title>caption._identify_size</title>
<g id="a_node82"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9479.5,-4613.28 9222.5,-4613.28 9222.5,-4577.28 9479.5,-4577.28 9479.5,-4613.28"/>
<text text-anchor="middle" x="9351" y="-4589.59" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node83" class="node">
<title>caption._prepare_image</title>
<g id="a_node83"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8897,-4621.28 8463,-4621.28 8463,-4575.28 8897,-4575.28 8897,-4621.28"/>
<text text-anchor="middle" x="8680" y="-4589.84" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge114" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8897.28,-4597.31C9000.68,-4596.85 9121.37,-4596.31 9212.12,-4595.9"/>
<polygon fill="black" stroke="black" points="9212.22,-4599.4 9222.2,-4595.86 9212.19,-4592.4 9212.22,-4599.4"/>
</g>
<!-- caption._guess_chat -->
<g id="node84" class="node">
<title>caption._guess_chat</title>
<g id="a_node84"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9447,-4667.28 9255,-4667.28 9255,-4631.28 9447,-4631.28 9447,-4667.28"/>
<text text-anchor="middle" x="9351" y="-4645.12" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node85" class="node">
<title>caption.caption_file</title>
<g id="a_node85"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="8072,-4674.78 7466,-4674.78 7466,-4601.78 8072,-4601.78 8072,-4674.78"/>
<text text-anchor="middle" x="7769" y="-4623.3" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge120" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8072.12,-4668.44C8133.46,-4659.42 8192.2,-4637.23 8235,-4592.28 8290.54,-4533.96 8214.13,-3925.32 8271,-3868.28 8335.27,-3803.84 9024,-3888.99 9089,-3825.28 9167.77,-3748.08 9048.86,-3410.08 9125,-3330.28 9148.73,-3305.41 9182.47,-3294.38 9216.63,-3290.62"/>
<polygon fill="black" stroke="black" points="9217.1,-3294.1 9226.75,-3289.72 9216.48,-3287.12 9217.1,-3294.1"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge116" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M8072.05,-4669.02C8133.58,-4660.03 8192.42,-4637.71 8235,-4592.28 8315.59,-4506.31 8189.02,-3616.94 8271,-3532.28 8357.36,-3443.1 8516.13,-3463.16 8608.07,-3484.83"/>
<polygon fill="black" stroke="black" points="8607.31,-3488.25 8617.85,-3487.2 8608.96,-3481.45 8607.31,-3488.25"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge115" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8072.08,-4631.7C8127.47,-4624 8183.89,-4611.64 8235,-4592.28 8253.46,-4585.29 8253.04,-4574.47 8271,-4566.28 8610.75,-4411.52 8839.75,-4653.23 9089,-4375.28 9177.77,-4276.29 9045.76,-4185.06 9125,-4078.28 9154.32,-4038.77 9202.87,-4014.77 9247.38,-4000.32"/>
<polygon fill="black" stroke="black" points="9248.59,-4003.61 9257.1,-3997.29 9246.51,-3996.93 9248.59,-4003.61"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge117" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M8072.23,-4667.88C8133.38,-4658.82 8192.01,-4636.76 8235,-4592.28 8321.05,-4503.26 8195.94,-4134.75 8271,-4036.28 8325.85,-3964.34 8419.7,-3928.89 8503.57,-3911.52"/>
<polygon fill="black" stroke="black" points="8504.36,-3914.93 8513.48,-3909.54 8502.99,-3908.06 8504.36,-3914.93"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge118" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M8072.05,-4624.99C8196.3,-4619.53 8337.73,-4613.3 8452.8,-4608.24"/>
<polygon fill="black" stroke="black" points="8452.95,-4611.73 8462.79,-4607.8 8452.65,-4604.74 8452.95,-4611.73"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge119" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M8072.3,-4640.39C8430.48,-4642.88 9008.37,-4646.91 9244.43,-4648.55"/>
<polygon fill="black" stroke="black" points="9244.71,-4652.05 9254.73,-4648.62 9244.75,-4645.05 9244.71,-4652.05"/>
</g>
<!-- caption.main -->
<g id="node86" class="node">
<title>caption.main</title>
<g id="a_node86"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6814.5,-4651.28 6629.5,-4651.28 6629.5,-4615.28 6814.5,-4615.28 6814.5,-4651.28"/>
<text text-anchor="middle" x="6722" y="-4627.12" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge121" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6814.82,-4633.72C6956.76,-4634.4 7236.02,-4635.74 7455.74,-4636.79"/>
<polygon fill="black" stroke="black" points="7455.81,-4640.29 7465.83,-4636.84 7455.84,-4633.29 7455.81,-4640.29"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node87" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node87"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7883.5,-2100.28 7654.5,-2100.28 7654.5,-2064.28 7883.5,-2064.28 7883.5,-2100.28"/>
<text text-anchor="middle" x="7769" y="-2078.24" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node88" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node88"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8763.5,-2068.28 8596.5,-2068.28 8596.5,-2032.28 8763.5,-2032.28 8763.5,-2068.28"/>
<text text-anchor="middle" x="8680" y="-2046.58" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge122" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7883.75,-2078.28C8065.7,-2071.87 8418.74,-2059.45 8586.35,-2053.55"/>
<polygon fill="black" stroke="black" points="8586.52,-2057.04 8596.39,-2053.19 8586.27,-2050.05 8586.52,-2057.04"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge267" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8763.7,-2050.53C8893.39,-2050.92 9142.92,-2051.67 9270.56,-2052.05"/>
<polygon fill="black" stroke="black" points="9270.64,-2055.55 9280.65,-2052.08 9270.67,-2048.55 9270.64,-2055.55"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge268" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8763.7,-2042C8864.98,-2031.86 9039.36,-2014.4 9171.68,-2001.14"/>
<polygon fill="black" stroke="black" points="9172.34,-2004.6 9181.94,-2000.12 9171.64,-1997.63 9172.34,-2004.6"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node89" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node89"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6839.5,-3565.28 6604.5,-3565.28 6604.5,-3529.28 6839.5,-3529.28 6839.5,-3565.28"/>
<text text-anchor="middle" x="6722" y="-3543.24" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.write_md -->
<g id="node90" class="node">
<title>notes_utils.write_md</title>
<g id="a_node90"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7882,-3566.28 7656,-3566.28 7656,-3530.28 7882,-3530.28 7882,-3566.28"/>
<text text-anchor="middle" x="7769" y="-3543.49" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge123" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6839.58,-3547.4C7038.76,-3547.59 7442.68,-3547.97 7645.7,-3548.17"/>
<polygon fill="black" stroke="black" points="7645.81,-3551.67 7655.81,-3548.18 7645.81,-3544.67 7645.81,-3551.67"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node92" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node92"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6863.5,-4797.28 6580.5,-4797.28 6580.5,-4761.28 6863.5,-4761.28 6863.5,-4797.28"/>
<text text-anchor="middle" x="6722" y="-4773.69" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge124" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6863.66,-4785.48C7068.92,-4794.51 7447.33,-4811.17 7643.21,-4819.79"/>
<polygon fill="black" stroke="black" points="7643.11,-4823.29 7653.26,-4820.23 7643.42,-4816.3 7643.11,-4823.29"/>
</g>
<!-- log_utils.init_logger -->
<g id="node93" class="node">
<title>log_utils.init_logger</title>
<g id="a_node93"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="7069.5,-4897.28 6374.5,-4897.28 6374.5,-4815.28 7069.5,-4815.28 7069.5,-4897.28"/>
<text text-anchor="middle" x="6722" y="-4839.3" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge125" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M7069.52,-4846C7266.88,-4840.15 7502.16,-4833.17 7643.09,-4828.99"/>
<polygon fill="black" stroke="black" points="7643.6,-4832.48 7653.49,-4828.68 7643.39,-4825.48 7643.6,-4832.48"/>
</g>
<!-- log_utils.get_logger -->
<g id="node94" class="node">
<title>log_utils.get_logger</title>
<g id="a_node94"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7837.5,-4897.28 7700.5,-4897.28 7700.5,-4861.28 7837.5,-4861.28 7837.5,-4897.28"/>
<text text-anchor="middle" x="7769" y="-4876.04" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge126" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M7069.52,-4857.51C7290.78,-4861.46 7559.71,-4868.26 7689.9,-4873.8"/>
<polygon fill="black" stroke="black" points="7690.02,-4877.31 7700.17,-4874.25 7690.33,-4870.32 7690.02,-4877.31"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge127" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7700.17,-4881.33C7576.15,-4881.41 7304.87,-4876.4 7079.54,-4870.57"/>
<polygon fill="black" stroke="black" points="7079.61,-4867.07 7069.52,-4870.31 7079.42,-4874.07 7079.61,-4867.07"/>
</g>
<!-- post_io.get_contact -->
<g id="node95" class="node">
<title>post_io.get_contact</title>
<g id="a_node95"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7868.5,-3678.28 7669.5,-3678.28 7669.5,-3642.28 7868.5,-3642.28 7868.5,-3678.28"/>
<text text-anchor="middle" x="7769" y="-3655.5" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node96" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node96"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7940.5,-3624.28 7597.5,-3624.28 7597.5,-3584.28 7940.5,-3584.28 7940.5,-3624.28"/>
<text text-anchor="middle" x="7769" y="-3597.21" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node98" class="node">
<title>post_io.write_post</title>
<g id="a_node98"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6888,-3629.28 6556,-3629.28 6556,-3583.28 6888,-3583.28 6888,-3629.28"/>
<text text-anchor="middle" x="6722" y="-3597.84" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge133" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6888.01,-3597.13C7098.52,-3585.44 7457.77,-3565.5 7645.52,-3555.08"/>
<polygon fill="black" stroke="black" points="7645.91,-3558.57 7655.7,-3554.52 7645.52,-3551.58 7645.91,-3558.57"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge131" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6888.01,-3614.81C7103.78,-3625.96 7475.81,-3645.19 7659.26,-3654.67"/>
<polygon fill="black" stroke="black" points="7659.29,-3658.17 7669.46,-3655.19 7659.65,-3651.18 7659.29,-3658.17"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge132" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6888.01,-3605.97C7078.38,-3605.6 7390.38,-3605.01 7587.2,-3604.63"/>
<polygon fill="black" stroke="black" points="7587.36,-3608.13 7597.36,-3604.61 7587.35,-3601.13 7587.36,-3608.13"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node99" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node99"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7914,-2734.28 7624,-2734.28 7624,-2698.28 7914,-2698.28 7914,-2734.28"/>
<text text-anchor="middle" x="7769" y="-2712.12" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge134" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7914.12,-2708.43C8032.32,-2705.14 8187.58,-2709.05 8235,-2748.28 8283.5,-2788.42 8230.2,-2837.34 8271,-2885.28 8354.1,-2982.93 8500.24,-3029.97 8593.2,-3051.02"/>
<polygon fill="black" stroke="black" points="8592.62,-3054.48 8603.14,-3053.22 8594.13,-3047.64 8592.62,-3054.48"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node100" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node100"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="9495,-2127.28 9207,-2127.28 9207,-2091.28 9495,-2091.28 9495,-2127.28"/>
<text text-anchor="middle" x="9351" y="-2104.5" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node101" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node101"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="9475,-4362.28 9227,-4362.28 9227,-4326.28 9475,-4326.28 9475,-4362.28"/>
<text text-anchor="middle" x="9351" y="-4340.24" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge135" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M8975.41,-2109.28C9051.76,-2109.28 9130.95,-2109.28 9196.74,-2109.28"/>
<polygon fill="black" stroke="black" points="9196.76,-2112.78 9206.76,-2109.28 9196.76,-2105.78 9196.76,-2112.78"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge136" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M8975.22,-2114.1C9018.96,-2127.83 9059.26,-2150.16 9089,-2185.28 9158.91,-2267.85 9081.2,-4033.36 9125,-4132.28 9163.39,-4218.98 9255.95,-4286.98 9309.63,-4320.8"/>
<polygon fill="black" stroke="black" points="9307.87,-4323.83 9318.21,-4326.13 9311.56,-4317.88 9307.87,-4323.83"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node104" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node104"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="6978,-1726.28 6466,-1726.28 6466,-1680.28 6978,-1680.28 6978,-1726.28"/>
<text text-anchor="middle" x="6722" y="-1694.84" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge140" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6978.15,-1703.56C7377.47,-1704.9 8116.85,-1711.32 8235,-1740.28 8378.58,-1775.49 8529.85,-1861.93 8613.53,-1914.78"/>
<polygon fill="black" stroke="black" points="8611.83,-1917.85 8622.15,-1920.26 8615.59,-1911.94 8611.83,-1917.85"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge141" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6860.55,-1680.28C6986.32,-1667.96 7167.46,-1673.77 7267,-1785.28 7340.38,-1867.48 7230.12,-2693.65 7303,-2776.28 7441.8,-2933.67 8030.75,-2880.14 8235,-2928.28 8374.81,-2961.24 8534.79,-3015.06 8619.35,-3044.82"/>
<polygon fill="black" stroke="black" points="8618.43,-3048.21 8629.03,-3048.23 8620.76,-3041.6 8618.43,-3048.21"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge144" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6978.21,-1690.11C7407.04,-1667.96 8255.48,-1624.15 8563.68,-1608.24"/>
<polygon fill="black" stroke="black" points="8564.16,-1611.72 8573.97,-1607.71 8563.8,-1604.73 8564.16,-1611.72"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge142" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6978.02,-1684.66C7079.02,-1690.64 7189.33,-1715.79 7267,-1785.28 7313.28,-1826.69 7258.39,-1877.09 7303,-1920.28 7378.98,-1993.85 7494.76,-2020.91 7591.77,-2029.55"/>
<polygon fill="black" stroke="black" points="7591.74,-2033.06 7602,-2030.4 7592.32,-2026.08 7591.74,-2033.06"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge143" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M6978.16,-1718.58C7098.73,-1719.88 7225.3,-1710.61 7267,-1670.28 7328.14,-1611.17 7241.79,-1348.32 7303,-1289.28 7347.04,-1246.81 7501.52,-1245.12 7620.47,-1250.83"/>
<polygon fill="black" stroke="black" points="7620.61,-1254.34 7630.78,-1251.35 7620.97,-1247.35 7620.61,-1254.34"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node106" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node106"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8839,-496.28 8521,-496.28 8521,-456.28 8839,-456.28 8839,-496.28"/>
<text text-anchor="middle" x="8680" y="-469.21" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node107" class="node">
<title>lot_io.write_lots</title>
<g id="a_node107"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7870.5,-444.28 7667.5,-444.28 7667.5,-408.28 7870.5,-408.28 7870.5,-444.28"/>
<text text-anchor="middle" x="7769" y="-420.69" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge150" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7870.87,-410.36C7969.73,-399.8 8121.65,-397.4 8235,-458.28 8258.18,-470.74 8247.72,-493.02 8271,-505.28 8432.05,-590.12 8920.61,-479.15 9089,-548.28 9108.8,-556.41 9108.09,-567.15 9125,-580.28 9188.17,-629.35 9266.46,-680.15 9312.06,-708.83"/>
<polygon fill="black" stroke="black" points="9310.4,-711.92 9320.73,-714.27 9314.12,-705.99 9310.4,-711.92"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge148" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7870.53,-419.11C7969.82,-416.67 8122.69,-425.78 8235,-491.28 8257.73,-504.54 8249.78,-522.73 8271,-538.28 8362.58,-605.42 8487.71,-644.8 8575.17,-665.84"/>
<polygon fill="black" stroke="black" points="8574.57,-669.29 8585.11,-668.19 8576.18,-662.48 8574.57,-669.29"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge147" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7870.94,-423.1C8137.69,-415.45 8856.73,-399.99 9089,-447.28 9169.98,-463.77 9257.78,-504.68 9308.1,-530.58"/>
<polygon fill="black" stroke="black" points="9306.57,-533.73 9317.05,-535.24 9309.8,-527.52 9306.57,-533.73"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge149" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7870.75,-431.83C8025.3,-440.33 8322.67,-456.68 8510.43,-467.01"/>
<polygon fill="black" stroke="black" points="8510.5,-470.52 8520.68,-467.58 8510.88,-463.53 8510.5,-470.52"/>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge151" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8756.76,-4235.66C8839.39,-4234.61 8975.08,-4228.61 9089,-4203.28 9166.39,-4186.08 9251.61,-4150.77 9302.94,-4127.57"/>
<polygon fill="black" stroke="black" points="9304.48,-4130.71 9312.12,-4123.38 9301.57,-4124.34 9304.48,-4130.71"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node110" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node110"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8786.5,-1064.28 8573.5,-1064.28 8573.5,-1028.28 8786.5,-1028.28 8786.5,-1064.28"/>
<text text-anchor="middle" x="8680" y="-1042.12" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- tg_client._mark_activity -->
<g id="node113" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node113"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="5039.5,-4370.28 4853.5,-4370.28 4853.5,-4334.28 5039.5,-4334.28 5039.5,-4370.28"/>
<text text-anchor="middle" x="4946.5" y="-4348.58" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node114" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node114"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-4458.28 1260.5,-4458.28 1260.5,-4422.28 1490.5,-4422.28 1490.5,-4458.28"/>
<text text-anchor="middle" x="1375.5" y="-4434.98" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node115" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node115"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5130,-3522.78 4763,-3522.78 4763,-3485.78 5130,-3485.78 5130,-3522.78"/>
<text text-anchor="middle" x="4946.5" y="-3497.84" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node116" class="node">
<title>tg_client._write_md</title>
<g id="a_node116"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5752.5,-3603.28 5615.5,-3603.28 5615.5,-3567.28 5752.5,-3567.28 5752.5,-3603.28"/>
<text text-anchor="middle" x="5684" y="-3582.04" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge161" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5752.58,-3586.65C5911.39,-3589.87 6312.54,-3598 6545.69,-3602.73"/>
<polygon fill="black" stroke="black" points="6545.9,-3606.24 6555.97,-3602.94 6546.05,-3599.24 6545.9,-3606.24"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node117" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node117"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="8008.5,-3213.78 7529.5,-3213.78 7529.5,-3170.78 8008.5,-3170.78 8008.5,-3213.78"/>
<text text-anchor="middle" x="7769" y="-3184.14" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge162" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M8008.66,-3179.45C8081.51,-3174.02 8161.72,-3166.51 8235,-3156.28 8361.33,-3138.66 8505.78,-3107.25 8594.7,-3086.59"/>
<polygon fill="black" stroke="black" points="8595.51,-3089.99 8604.46,-3084.31 8593.92,-3083.18 8595.51,-3089.99"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node118" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node118"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6855,-3267.28 6589,-3267.28 6589,-3231.28 6855,-3231.28 6855,-3267.28"/>
<text text-anchor="middle" x="6722" y="-3244.5" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge163" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6855.09,-3242.08C7021.51,-3233 7310.91,-3217.22 7519.31,-3205.85"/>
<polygon fill="black" stroke="black" points="7519.69,-3209.33 7529.49,-3205.29 7519.31,-3202.34 7519.69,-3209.33"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node119" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node119"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3331,-2974.28 3092,-2974.28 3092,-2938.28 3331,-2938.28 3331,-2974.28"/>
<text text-anchor="middle" x="3211.5" y="-2952.24" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge164" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3331.14,-2964.61C3611.68,-2983.57 4337.98,-3028.28 4945.5,-3028.28 4945.5,-3028.28 4945.5,-3028.28 6723,-3028.28 7446.49,-3028.28 8320.22,-3054.59 8593.26,-3063.43"/>
<polygon fill="black" stroke="black" points="8593.38,-3066.94 8603.49,-3063.76 8593.61,-3059.94 8593.38,-3066.94"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node120" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node120"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5191,-3467.78 4702,-3467.78 4702,-3424.78 5191,-3424.78 5191,-3467.78"/>
<text text-anchor="middle" x="4946.5" y="-3438.14" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node121" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node121"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5896,-3704.78 5472,-3704.78 5472,-3659.78 5896,-3659.78 5896,-3704.78"/>
<text text-anchor="middle" x="5684" y="-3673.9" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node122" class="node">
<title>tg_client._extract_author</title>
<g id="a_node122"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="7085,-4307.28 6359,-4307.28 6359,-4237.28 7085,-4237.28 7085,-4307.28"/>
<text text-anchor="middle" x="6722" y="-4258.48" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge165" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M7085.09,-4299.84C7151.35,-4289.06 7215.66,-4266.11 7267,-4223.28 7313.04,-4184.88 7256.4,-4131 7303,-4093.28 7341.6,-4062.05 7450.14,-4054.33 7552.66,-4054.77"/>
<polygon fill="black" stroke="black" points="7552.85,-4058.27 7562.87,-4054.83 7552.9,-4051.27 7552.85,-4058.27"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node123" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node123"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="7908,-3474.28 7630,-3474.28 7630,-3438.28 7908,-3438.28 7908,-3474.28"/>
<text text-anchor="middle" x="7769" y="-3451.5" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node124" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node124"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8828,-3631.28 8532,-3631.28 8532,-3595.28 8828,-3595.28 8828,-3631.28"/>
<text text-anchor="middle" x="8680" y="-3607.59" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node125" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node125"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5189,-3757.78 4704,-3757.78 4704,-3708.78 5189,-3708.78 5189,-3757.78"/>
<text text-anchor="middle" x="4946.5" y="-3723.66" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge167" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4993.54,-3708.65C5049.79,-3675.99 5143.32,-3612.84 5191,-3531.28 5236.14,-3454.07 5182.3,-3410.75 5227,-3333.28 5493.33,-2871.73 5827.22,-2987.99 6141,-2557.28 6165.64,-2523.46 6146.26,-2498.68 6177,-2470.28 6551.03,-2124.74 6870.72,-2437.06 7267,-2117.28 7291.8,-2097.27 7275.86,-2071.98 7303,-2055.28 7350.34,-2026.17 7480.91,-2020.54 7591.68,-2021.56"/>
<polygon fill="black" stroke="black" points="7591.95,-2025.07 7601.99,-2021.68 7592.03,-2018.07 7591.95,-2025.07"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge166" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5189.1,-3731.86C5943.24,-3727.18 8205.38,-3711.16 8235,-3687.28 8290.07,-3642.91 8217.11,-3578.08 8271,-3532.28 8361.86,-3455.08 8509.11,-3467.56 8599.65,-3485.27"/>
<polygon fill="black" stroke="black" points="8599.1,-3488.73 8609.59,-3487.28 8600.48,-3481.87 8599.1,-3488.73"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node126" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node126"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5817,-3935.28 5551,-3935.28 5551,-3899.28 5817,-3899.28 5817,-3935.28"/>
<text text-anchor="middle" x="5684" y="-3913.12" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge168" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4980.63,-3757.94C5030.89,-3793.8 5130.76,-3859.12 5227,-3887.28 5329.02,-3917.13 5449.15,-3923.96 5540.49,-3923.68"/>
<polygon fill="black" stroke="black" points="5540.66,-3927.18 5550.64,-3923.62 5540.62,-3920.18 5540.66,-3927.18"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node127" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node127"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6847.5,-3980.28 6596.5,-3980.28 6596.5,-3944.28 6847.5,-3944.28 6847.5,-3980.28"/>
<text text-anchor="middle" x="6722" y="-3957.49" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge169" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5817.26,-3923.03C6015.24,-3931.63 6386.66,-3947.76 6586.14,-3956.43"/>
<polygon fill="black" stroke="black" points="6586.25,-3959.93 6596.39,-3956.87 6586.55,-3952.94 6586.25,-3959.93"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node128" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node128"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7950.5,-4028.28 7587.5,-4028.28 7587.5,-3992.28 7950.5,-3992.28 7950.5,-4028.28"/>
<text text-anchor="middle" x="7769" y="-4004.59" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge172" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6847.75,-3968.01C7028.58,-3976.32 7365.01,-3991.77 7577.14,-4001.52"/>
<polygon fill="black" stroke="black" points="7577,-4005.01 7587.15,-4001.98 7577.32,-3998.02 7577,-4005.01"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge170" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7950.51,-4023.26C8063.59,-4027.09 8195.19,-4022.24 8235,-3983.28 8306.86,-3912.97 8199.43,-3602.89 8271,-3532.28 8358.77,-3445.7 8515.23,-3464.17 8606.78,-3485"/>
<polygon fill="black" stroke="black" points="8605.99,-3488.41 8616.53,-3487.28 8607.59,-3481.6 8605.99,-3488.41"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge171" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7950.79,-4022.94C8063.6,-4026.58 8194.75,-4021.64 8235,-3983.28 8289.68,-3931.17 8216.85,-3697.95 8271,-3645.28 8306.21,-3611.04 8422.38,-3604.45 8521.8,-3605.63"/>
<polygon fill="black" stroke="black" points="8521.93,-3609.14 8531.98,-3605.78 8522.03,-3602.14 8521.93,-3609.14"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node129" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node129"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2204,-4425.78 1768,-4425.78 1768,-4384.78 2204,-4384.78 2204,-4425.78"/>
<text text-anchor="middle" x="1986" y="-4398.04" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge173" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2204.14,-4403.29C2448.74,-4401.22 2858.15,-4398.28 3210.5,-4398.28 3210.5,-4398.28 3210.5,-4398.28 4059,-4398.28 4562.18,-4398.28 4745.09,-4612.44 5191,-4379.28 5215.27,-4366.6 5203.56,-4343.44 5227,-4329.28 5326.7,-4269.08 7187.1,-4048.78 7303,-4037.28 7392.99,-4028.36 7493.09,-4022.08 7577.3,-4017.84"/>
<polygon fill="black" stroke="black" points="7577.67,-4021.32 7587.49,-4017.33 7577.32,-4014.33 7577.67,-4021.32"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node130" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node130"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7941,-4583.78 7597,-4583.78 7597,-4542.78 7941,-4542.78 7941,-4583.78"/>
<text text-anchor="middle" x="7769" y="-4556.04" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge174" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7941.14,-4557.5C8043.58,-4544.21 8166.76,-4508.87 8235,-4419.28 8312.19,-4317.94 8202.65,-3380.79 8271,-3273.28 8342.79,-3160.37 8496.78,-3106.42 8593.7,-3082.73"/>
<polygon fill="black" stroke="black" points="8594.56,-3086.13 8603.47,-3080.4 8592.93,-3079.32 8594.56,-3086.13"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge175" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7941.1,-4561.3C8362.03,-4555.64 9424.78,-4536.44 9577,-4485.28 9670.34,-4453.92 9760.43,-4376.68 9803,-4336.49"/>
<polygon fill="black" stroke="black" points="9805.57,-4338.88 9810.38,-4329.44 9800.73,-4333.82 9805.57,-4338.88"/>
</g>
<!-- tg_client._load_progress -->
<g id="node131" class="node">
<title>tg_client._load_progress</title>
<g id="a_node131"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2151,-4328.28 1821,-4328.28 1821,-4292.28 2151,-4292.28 2151,-4328.28"/>
<text text-anchor="middle" x="1986" y="-4304.12" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge176" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2151.27,-4308.68C2573.32,-4307.58 3728.36,-4323.75 4666,-4514.28 4923.83,-4566.68 4973.27,-4633.68 5227,-4703.28 5643.37,-4817.5 5747.91,-4858.36 6177,-4906.28 6528.4,-4945.53 7414.42,-4925.28 7768,-4925.28 7768,-4925.28 7768,-4925.28 8681,-4925.28 9082.9,-4925.28 9249.16,-5035.75 9577,-4803.28 9742.85,-4685.69 9806.47,-4425.6 9823.45,-4339.54"/>
<polygon fill="black" stroke="black" points="9826.94,-4339.96 9825.38,-4329.48 9820.06,-4338.65 9826.94,-4339.96"/>
</g>
<!-- tg_client._save_progress -->
<g id="node132" class="node">
<title>tg_client._save_progress</title>
<g id="a_node132"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2721,-3226.28 2492,-3226.28 2492,-3190.28 2721,-3190.28 2721,-3226.28"/>
<text text-anchor="middle" x="2606.5" y="-3204.12" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node133" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node133"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3345,-3088.28 3078,-3088.28 3078,-3052.28 3345,-3052.28 3345,-3088.28"/>
<text text-anchor="middle" x="3211.5" y="-3064.41" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge177" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3345.12,-3069.77C3635.28,-3068.69 4348.28,-3066.28 4945.5,-3066.28 4945.5,-3066.28 4945.5,-3066.28 6723,-3066.28 7446.35,-3066.28 8320.17,-3066.28 8593.25,-3066.28"/>
<polygon fill="black" stroke="black" points="8593.48,-3069.78 8603.48,-3066.28 8593.48,-3062.78 8593.48,-3069.78"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node134" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node134"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2116.5,-3180.28 1855.5,-3180.28 1855.5,-3144.28 2116.5,-3144.28 2116.5,-3180.28"/>
<text text-anchor="middle" x="1986" y="-3156.41" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge178" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2116.75,-3163.31C2897.97,-3169.19 6983.66,-3195.73 8235,-3118.28 8360.12,-3110.54 8504.11,-3091.87 8593.34,-3079.14"/>
<polygon fill="black" stroke="black" points="8594.01,-3082.58 8603.41,-3077.7 8593.02,-3075.65 8594.01,-3082.58"/>
</g>
<!-- tg_client._save_message -->
<g id="node135" class="node">
<title>tg_client._save_message</title>
<g id="a_node135"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4666,-3627.78 3450,-3627.78 3450,-3512.78 4666,-3512.78 4666,-3627.78"/>
<text text-anchor="middle" x="4058" y="-3546.17" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge180" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4077.13,-3512.62C4159.24,-3263.24 4523.1,-2276.83 5227,-1980.28 5514.18,-1859.3 7613.32,-1920.38 8390.59,-1947.55"/>
<polygon fill="black" stroke="black" points="8390.69,-1951.05 8400.8,-1947.91 8390.93,-1944.06 8390.69,-1951.05"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge181" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4271.13,-3512.74C4503.6,-3453.09 4888.57,-3364.32 5227,-3333.28 5893.11,-3272.21 7579.01,-3353.08 8235,-3222.28 8383.6,-3192.66 8549.92,-3124.08 8630.29,-3088.54"/>
<polygon fill="black" stroke="black" points="8631.95,-3091.64 8639.66,-3084.38 8629.1,-3085.24 8631.95,-3091.64"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge179" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4666.31,-3593.11C4846.75,-3599.63 5044.85,-3606.52 5227,-3612.28 5649.17,-3625.65 5754.71,-3629.59 6177,-3638.28 6734.35,-3649.76 7401.65,-3656.82 7659.21,-3659.29"/>
<polygon fill="black" stroke="black" points="7659.28,-3662.79 7669.31,-3659.38 7659.35,-3655.79 7659.28,-3662.79"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge182" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4160.77,-3627.81C4294.78,-3708.46 4529.34,-3867.35 4666,-4062.28 4694.08,-4102.34 4667.09,-4132.03 4702,-4166.28 4865.12,-4326.35 5011.14,-4184.3 5191,-4325.28 5214.88,-4344 5200.86,-4367.88 5227,-4383.28 5515.02,-4552.96 7900.97,-4455.37 8235,-4442.28 8615.43,-4427.38 8710.11,-4412.63 9089,-4375.28 9130.64,-4371.18 9175.93,-4366.04 9216.92,-4361.13"/>
<polygon fill="black" stroke="black" points="9217.45,-4364.59 9226.96,-4359.92 9216.62,-4357.64 9217.45,-4364.59"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge183" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4173.26,-3627.8C4314.64,-3705.54 4550.75,-3858.24 4666,-4062.28 4722.94,-4163.09 4619.81,-4238.74 4702,-4320.28 4738.39,-4356.38 4794.3,-4365.64 4843.37,-4365.29"/>
<polygon fill="black" stroke="black" points="4843.48,-4368.79 4853.41,-4365.09 4843.34,-4361.79 4843.48,-4368.79"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge184" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4666.22,-3525.08C4696.34,-3522.83 4725.28,-3520.68 4752.37,-3518.66"/>
<polygon fill="black" stroke="black" points="4752.94,-3522.13 4762.66,-3517.9 4752.42,-3515.15 4752.94,-3522.13"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge185" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4666.03,-3575.89C5022.94,-3579.19 5436.37,-3583.01 5605.19,-3584.57"/>
<polygon fill="black" stroke="black" points="5605.19,-3588.07 5615.23,-3584.66 5605.26,-3581.07 5605.19,-3588.07"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge186" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4153.83,-3512.75C4275.62,-3442.44 4495.93,-3327.18 4702,-3281.28 5059.81,-3201.6 6180.45,-3230.75 6578.76,-3244.1"/>
<polygon fill="black" stroke="black" points="6578.78,-3247.6 6588.89,-3244.44 6579.02,-3240.6 6578.78,-3247.6"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge187" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4442.59,-3512.76C4527.93,-3500.37 4618,-3487.6 4702,-3476.28 4719.8,-3473.89 4738.35,-3471.47 4756.9,-3469.09"/>
<polygon fill="black" stroke="black" points="4757.43,-3472.55 4766.91,-3467.82 4756.55,-3465.61 4757.43,-3472.55"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge188" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4513.47,-3627.79C4576.72,-3634.48 4640.93,-3640.58 4702,-3645.28 4962.35,-3665.35 5262.45,-3674.65 5461.46,-3678.88"/>
<polygon fill="black" stroke="black" points="5461.68,-3682.39 5471.75,-3679.1 5461.82,-3675.39 5461.68,-3682.39"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge189" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4108.83,-3628.16C4208.3,-3738.81 4444.17,-3977.61 4702,-4070.28 4852.53,-4124.39 5982.82,-4088.51 6141,-4112.28 6308.91,-4137.52 6497.44,-4195.22 6612.7,-4233.98"/>
<polygon fill="black" stroke="black" points="6611.65,-4237.32 6622.24,-4237.2 6613.89,-4230.69 6611.65,-4237.32"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge190" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4346.72,-3627.79C4457.61,-3649.42 4585.56,-3673.74 4702,-3694.28 4726.38,-3698.59 4752.17,-3702.93 4777.49,-3707.09"/>
<polygon fill="black" stroke="black" points="4777.11,-3710.57 4787.54,-3708.73 4778.24,-3703.66 4777.11,-3710.57"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge191" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3908.09,-3627.89C3927.06,-3638.41 3977.04,-3645.78 4058,-3645.78 4128.21,-3645.78 4175.12,-3640.24 4198.71,-3631.91"/>
<polygon fill="black" stroke="black" points="4200.15,-3635.1 4207.91,-3627.89 4197.35,-3628.68 4200.15,-3635.1"/>
</g>
<!-- tg_client._save_media -->
<g id="node136" class="node">
<title>tg_client._save_media</title>
<g id="a_node136"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5925,-3549.28 5443,-3549.28 5443,-3495.28 5925,-3495.28 5925,-3549.28"/>
<text text-anchor="middle" x="5684" y="-3511.68" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge192" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4666.03,-3552.34C4931.6,-3544.49 5228.46,-3535.72 5432.56,-3529.69"/>
<polygon fill="black" stroke="black" points="5432.93,-3533.18 5442.82,-3529.38 5432.72,-3526.18 5432.93,-3533.18"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge194" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5925.27,-3520.92C6548.42,-3517.38 8195.63,-3508.03 8592.21,-3505.78"/>
<polygon fill="black" stroke="black" points="8592.49,-3509.28 8602.47,-3505.72 8592.45,-3502.28 8592.49,-3509.28"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge193" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5791.08,-3495.28C5895.73,-3475.7 6052.5,-3466.56 6141,-3558.28 6205.71,-3625.36 6110.36,-4331.13 6177,-4396.28 6217.88,-4436.25 8188.57,-4452.65 8235,-4419.28 8275.75,-4390 8231.17,-4342.8 8271,-4312.28 8415.58,-4201.54 8952,-4382.28 9089,-4262.28 9151.68,-4207.38 9072.94,-4143.35 9125,-4078.28 9156.42,-4039.01 9206.6,-4014.92 9251.6,-4000.35"/>
<polygon fill="black" stroke="black" points="9252.91,-4003.61 9261.41,-3997.29 9250.82,-3996.92 9252.91,-4003.61"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge195" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5925.28,-3528.08C6134.01,-3533.12 6428.15,-3540.22 6594.11,-3544.22"/>
<polygon fill="black" stroke="black" points="6594.28,-3547.73 6604.36,-3544.47 6594.45,-3540.73 6594.28,-3547.73"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge196" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5925.09,-3502.72C6005.16,-3496.85 6094.88,-3491 6177,-3487.28 6707.41,-3463.27 7338.11,-3457.84 7619.59,-3456.63"/>
<polygon fill="black" stroke="black" points="7619.87,-3460.12 7629.86,-3456.58 7619.85,-3453.12 7619.87,-3460.12"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node137" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node137"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3414,-3034.28 3009,-3034.28 3009,-2992.28 3414,-2992.28 3414,-3034.28"/>
<text text-anchor="middle" x="3211.5" y="-3005.2" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge197" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3390.67,-3034.32C3398.67,-3036.98 3406.48,-3039.95 3414,-3043.28 3664.24,-3154.19 3896.59,-3389.98 4000.23,-3504.77"/>
<polygon fill="black" stroke="black" points="3997.88,-3507.39 4007.17,-3512.49 4003.09,-3502.71 3997.88,-3507.39"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node138" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node138"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="8054,-2410.28 7484,-2410.28 7484,-2366.28 8054,-2366.28 8054,-2410.28"/>
<text text-anchor="middle" x="7769" y="-2379.96" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge200" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8054.13,-2398C8134.05,-2394.53 8206.9,-2383.31 8235,-2356.28 8288.65,-2304.69 8219.71,-2077.22 8271,-2023.28 8303.36,-1989.26 8345.85,-1968.38 8391.18,-1956.16"/>
<polygon fill="black" stroke="black" points="8392.06,-1959.54 8400.89,-1953.68 8390.33,-1952.76 8392.06,-1959.54"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge198" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7907.9,-2366.27C8014.02,-2357.98 8155.55,-2367.39 8235,-2457.28 8290.13,-2519.66 8212.08,-3896.47 8271,-3955.28 8305.04,-3989.26 8978.81,-3984.17 9244.03,-3980.83"/>
<polygon fill="black" stroke="black" points="9244.11,-3984.33 9254.06,-3980.7 9244.02,-3977.33 9244.11,-3984.33"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge199" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8054.29,-2387.02C8321.62,-2387.51 8732.85,-2392.58 9089,-2415.28 9141.33,-2418.62 9199.35,-2424.61 9247.37,-2430.2"/>
<polygon fill="black" stroke="black" points="9247.12,-2433.7 9257.46,-2431.39 9247.93,-2426.75 9247.12,-2433.7"/>
</g>
<!-- tg_client._download_messages -->
<g id="node139" class="node">
<title>tg_client._download_messages</title>
<g id="a_node139"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2961.5,-3049.78 2251.5,-3049.78 2251.5,-2992.78 2961.5,-2992.78 2961.5,-3049.78"/>
<text text-anchor="middle" x="2606.5" y="-3009.94" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge201" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2961.76,-3016.58C2974.17,-3016.42 2986.47,-3016.26 2998.55,-3016.1"/>
<polygon fill="black" stroke="black" points="2998.7,-3019.59 3008.65,-3015.96 2998.6,-3012.6 2998.7,-3019.59"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node140" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node140"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2777.5,-4504.28 2435.5,-4504.28 2435.5,-4468.28 2777.5,-4468.28 2777.5,-4504.28"/>
<text text-anchor="middle" x="2606.5" y="-4480.59" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node141" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node141"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2973,-2919.78 2240,-2919.78 2240,-2854.78 2973,-2854.78 2973,-2919.78"/>
<text text-anchor="middle" x="2606.5" y="-2874.23" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge202" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2626.58,-2854.6C2737.76,-2668.83 3322.37,-1754.28 4057,-1754.28 4057,-1754.28 4057,-1754.28 6723,-1754.28 7059.2,-1754.28 7904.36,-1745.4 8235,-1806.28 8358.7,-1829.06 8494.67,-1879.64 8583.12,-1916.21"/>
<polygon fill="black" stroke="black" points="8582.02,-1919.54 8592.6,-1920.15 8584.71,-1913.08 8582.02,-1919.54"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge203" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2973.19,-2889.18C3870.31,-2895.44 6251.54,-2921.71 8235,-3029.28 8359.76,-3036.05 8503.84,-3049.01 8593.2,-3057.65"/>
<polygon fill="black" stroke="black" points="8592.99,-3061.15 8603.28,-3058.63 8593.66,-3054.18 8592.99,-3061.15"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge208" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2608.56,-2854.7C2620.48,-2543.88 2755.29,-114.28 4057,-114.28 4057,-114.28 4057,-114.28 4947.5,-114.28 5463.09,-114.28 6884.25,176.16 7267,-169.28 7361.45,-254.53 7209.28,-367.24 7303,-453.28 7379.35,-523.38 8143.74,-442.16 8235,-491.28 8259.11,-504.26 8247.58,-527.09 8271,-541.28 8585.1,-731.72 8729.6,-583.43 9089,-659.28 9156.15,-673.46 9231.5,-695.17 9283.91,-711.24"/>
<polygon fill="black" stroke="black" points="9283.17,-714.67 9293.75,-714.27 9285.23,-707.98 9283.17,-714.67"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge207" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2973.11,-2881.41C3266.19,-2877.21 3688,-2872.28 4057,-2872.28 4057,-2872.28 4057,-2872.28 4947.5,-2872.28 6409.43,-2872.28 6775.16,-2904.17 8235,-2982.28 8614.86,-3002.61 8743.05,-2881.09 9089,-3039.28 9204.76,-3092.22 9297.26,-3220.61 9333.48,-3276.52"/>
<polygon fill="black" stroke="black" points="9330.67,-3278.62 9339,-3285.16 9336.56,-3274.85 9330.67,-3278.62"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge204" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2891.78,-2919.81C2958.3,-2927.43 3025.93,-2935.16 3081.69,-2941.54"/>
<polygon fill="black" stroke="black" points="3081.62,-2945.06 3091.95,-2942.72 3082.42,-2938.11 3081.62,-2945.06"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge205" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2892.47,-2919.79C2920.39,-2927.86 2947.71,-2937.87 2973,-2950.28 2992.48,-2959.85 2989.41,-2973.94 3009,-2983.28 3012.91,-2985.15 3016.9,-2986.9 3020.96,-2988.55"/>
<polygon fill="black" stroke="black" points="3019.97,-2991.92 3030.56,-2992.21 3022.46,-2985.38 3019.97,-2991.92"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge206" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2656.74,-2854.61C2836.07,-2738.86 3474.3,-2355.28 4057,-2355.28 4057,-2355.28 4057,-2355.28 5685,-2355.28 6322.77,-2355.28 7070.24,-2370.94 7473.69,-2380.69"/>
<polygon fill="black" stroke="black" points="7473.66,-2384.19 7483.74,-2380.93 7473.83,-2377.19 7473.66,-2384.19"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node142" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node142"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-3222.28 1019,-3222.28 1019,-3148.28 1732,-3148.28 1732,-3222.28"/>
<text text-anchor="middle" x="1375.5" y="-3170.46" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge209" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1631.68,-3148.26C1677,-3142.95 1723.82,-3138.28 1768,-3135.28 2484.93,-3086.63 7516.56,-3094.66 8235,-3080.28 8359.55,-3077.79 8503.68,-3072.87 8593.11,-3069.58"/>
<polygon fill="black" stroke="black" points="8593.34,-3073.07 8603.2,-3069.21 8593.08,-3066.08 8593.34,-3073.07"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge210" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1444.6,-3222.43C1700.34,-3360.47 2630.56,-3849.69 3450,-4116.28 4988.23,-4616.73 6982.36,-4592.23 7586.68,-4571.24"/>
<polygon fill="black" stroke="black" points="7586.91,-4574.74 7596.78,-4570.89 7586.67,-4567.74 7586.91,-4574.74"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge211" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1377.05,-3222.46C1381.57,-3379.6 1421.54,-3994.3 1768,-4278.28 1780.8,-4288.78 1795.52,-4296.63 1811.12,-4302.44"/>
<polygon fill="black" stroke="black" points="1810.35,-4305.87 1820.95,-4305.8 1812.62,-4299.25 1810.35,-4305.87"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge212" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1732.39,-3191.94C1984.51,-3196.66 2307.68,-3202.71 2481.52,-3205.96"/>
<polygon fill="black" stroke="black" points="2481.67,-3209.47 2491.73,-3206.16 2481.8,-3202.47 2481.67,-3209.47"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge213" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1519.54,-3148.25C1593.22,-3130.89 1684.84,-3111.94 1768,-3102.28 2241.29,-3047.35 2807.6,-3056.38 3067.43,-3064.65"/>
<polygon fill="black" stroke="black" points="3067.57,-3068.16 3077.68,-3064.99 3067.79,-3061.16 3067.57,-3068.16"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge214" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1732.23,-3171.84C1772,-3170.34 1810.55,-3168.88 1845.08,-3167.57"/>
<polygon fill="black" stroke="black" points="1845.32,-3171.07 1855.18,-3167.19 1845.06,-3164.07 1845.32,-3171.07"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge215" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1472.58,-3148.23C1550.84,-3119.86 1664.85,-3082.58 1768,-3064.28 1921.62,-3037.04 2093.38,-3025.07 2241.18,-3020.36"/>
<polygon fill="black" stroke="black" points="2241.44,-3023.85 2251.33,-3020.05 2241.23,-3016.86 2241.44,-3023.85"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node143" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node143"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="8085.5,-2347.78 7452.5,-2347.78 7452.5,-2286.78 8085.5,-2286.78 8085.5,-2347.78"/>
<text text-anchor="middle" x="7769" y="-2305.03" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge218" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8085.67,-2289.33C8141.56,-2271.23 8194.68,-2243.46 8235,-2201.28 8290.78,-2142.94 8212.75,-2079.16 8271,-2023.28 8304.21,-1991.42 8346.41,-1971.45 8391,-1959.41"/>
<polygon fill="black" stroke="black" points="8392.03,-1962.76 8400.85,-1956.88 8390.3,-1955.98 8392.03,-1962.76"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge219" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7904.91,-2286.77C8009.87,-2271.74 8151.31,-2272.1 8235,-2357.28 8317.42,-2441.18 8203.56,-2788.93 8271,-2885.28 8345.46,-2991.67 8497.25,-3036.33 8593.24,-3054.49"/>
<polygon fill="black" stroke="black" points="8592.74,-3057.96 8603.21,-3056.32 8594.01,-3051.08 8592.74,-3057.96"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge216" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7899.3,-2286.77C8005.48,-2270.19 8151.52,-2268.39 8235,-2357.28 8294.53,-2420.68 8210.04,-3860.26 8271,-3922.28 8302.88,-3954.72 9043.62,-3952.28 9089,-3955.28 9140.19,-3958.67 9196.9,-3963.73 9244.35,-3968.33"/>
<polygon fill="black" stroke="black" points="9244.04,-3971.81 9254.33,-3969.3 9244.72,-3964.85 9244.04,-3971.81"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge217" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8085.52,-2318.77C8353.59,-2323.57 8748.05,-2338.94 9089,-2385.28 9151.87,-2393.83 9222.01,-2409.79 9273.74,-2422.8"/>
<polygon fill="black" stroke="black" points="9272.95,-2426.21 9283.5,-2425.28 9274.67,-2419.43 9272.95,-2426.21"/>
</g>
<!-- tg_client.main -->
<g id="node144" class="node">
<title>tg_client.main</title>
<g id="a_node144"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-3761.28 366.5,-3761.28 366.5,-3669.28 934.5,-3669.28 934.5,-3761.28"/>
<text text-anchor="middle" x="650.5" y="-3696.24" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge220" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M712.04,-3761.41C873.24,-3881.36 1330.5,-4203 1768,-4337.28 1860.55,-4365.69 1888.19,-4356.28 1985,-4356.28 1985,-4356.28 1985,-4356.28 3212.5,-4356.28 3831.85,-4356.28 4575.7,-4353.7 4843.35,-4352.68"/>
<polygon fill="black" stroke="black" points="4843.46,-4356.18 4853.44,-4352.65 4843.43,-4349.18 4843.46,-4356.18"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge221" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M660.24,-3761.31C687.24,-3889.41 782.22,-4250.95 1019,-4408.28 1086.29,-4452.99 1177.24,-4460.47 1250.3,-4457.03"/>
<polygon fill="black" stroke="black" points="1250.69,-4460.52 1260.48,-4456.48 1250.31,-4453.53 1250.69,-4460.52"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge222" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M661.2,-3761.73C690.04,-3886.56 788.04,-4229.36 1019,-4370.28 1080.33,-4407.7 1491.81,-4410.72 1757.58,-4408.62"/>
<polygon fill="black" stroke="black" points="1757.79,-4412.12 1767.76,-4408.54 1757.73,-4405.12 1757.79,-4412.12"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge223" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M666.08,-3669.28C704.04,-3557.64 817.29,-3271.88 1019,-3139.28 1383,-2900.01 2538.26,-2955.94 2973,-2983.28 3000.34,-2985 3029.34,-2987.83 3057.34,-2991.07"/>
<polygon fill="black" stroke="black" points="3057.26,-2994.59 3067.6,-2992.28 3058.08,-2987.63 3057.26,-2994.59"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge224" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M657.56,-3761.63C678.25,-3898.79 759.9,-4303.35 1019,-4467.28 1077.49,-4504.29 2022.21,-4494.9 2425.41,-4489.15"/>
<polygon fill="black" stroke="black" points="2425.47,-4492.65 2435.42,-4489.01 2425.37,-4485.65 2425.47,-4492.65"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge225" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M657.42,-3669C677.81,-3530.97 758.87,-3121.21 1019,-2950.28 1481.17,-2646.61 2193.3,-2780.21 2479.78,-2852.22"/>
<polygon fill="black" stroke="black" points="2479.24,-2855.69 2489.79,-2854.76 2480.95,-2848.91 2479.24,-2855.69"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge226" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M714.4,-3669.18C852.53,-3567.91 1180.81,-3327.27 1315.39,-3228.61"/>
<polygon fill="black" stroke="black" points="1317.59,-3231.34 1323.59,-3222.61 1313.45,-3225.7 1317.59,-3231.34"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge227" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M656.8,-3669.07C676.39,-3518.4 757.65,-3035.11 1019,-2757.28 1342.25,-2413.66 1513.23,-2317.28 1985,-2317.28 1985,-2317.28 1985,-2317.28 5685,-2317.28 6306.33,-2317.28 7031.9,-2317.28 7441.93,-2317.28"/>
<polygon fill="black" stroke="black" points="7442.16,-2320.78 7452.16,-2317.28 7442.16,-2313.78 7442.16,-2320.78"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node145" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node145"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-4559.28 0,-4559.28 0,-4523.28 282,-4523.28 282,-4559.28"/>
<text text-anchor="middle" x="141" y="-4537.24" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- scan_ontology:cli -->
<g id="node146" class="node">
<title>scan_ontology:cli</title>
<g id="a_node146"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4541.28" rx="44.19" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4539.68" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;scan_ontology:cli -->
<!-- build_site:cli -->
<g id="node169" class="node">
<title>build_site:cli</title>
<g id="a_node169"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4541.28" rx="34.71" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4539.68" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;build_site:cli -->
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge229" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7224.48,-579.85C7238.93,-584.24 7253.13,-589.04 7267,-594.28 7285.46,-601.26 7284.41,-613.65 7303,-620.28 7390.37,-651.47 7492.81,-660.33 7579.26,-660.61"/>
<polygon fill="black" stroke="black" points="7579.46,-664.11 7589.45,-660.6 7579.45,-657.11 7579.46,-664.11"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node150" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node150"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="8036.5,-550.28 7501.5,-550.28 7501.5,-500.28 8036.5,-500.28 8036.5,-550.28"/>
<text text-anchor="middle" x="7769" y="-515.6" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge230" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M6978.75,-413.52C7071.8,-416.05 7176.34,-427.9 7267,-460.28 7285.59,-466.92 7284.49,-479.43 7303,-486.28 7361.95,-508.11 7427.89,-520.29 7491.16,-526.66"/>
<polygon fill="black" stroke="black" points="7491.01,-530.16 7501.3,-527.64 7491.68,-523.19 7491.01,-530.16"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node152" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node152"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7918.5,-4410.28 7619.5,-4410.28 7619.5,-4374.28 7918.5,-4374.28 7918.5,-4410.28"/>
<text text-anchor="middle" x="7769" y="-4386.41" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node153" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node153"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8901,-4713.28 8459,-4713.28 8459,-4677.28 8901,-4677.28 8901,-4713.28"/>
<text text-anchor="middle" x="8680" y="-4689.69" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node154" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node154"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="8023,-4355.78 7515,-4355.78 7515,-4312.78 8023,-4312.78 8023,-4355.78"/>
<text text-anchor="middle" x="7769" y="-4326.14" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge237" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8023.2,-4346.04C8114.91,-4344.51 8203.7,-4334.27 8235,-4303.28 8309.13,-4229.91 8196.58,-3908.37 8271,-3835.28 8400.92,-3707.7 8958.96,-3914.75 9089,-3787.28 9161.75,-3715.98 9054.45,-3403.77 9125,-3330.28 9148.81,-3305.49 9182.57,-3294.47 9216.73,-3290.72"/>
<polygon fill="black" stroke="black" points="9217.19,-3294.19 9226.84,-3289.81 9216.57,-3287.22 9217.19,-3294.19"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge236" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M8023.24,-4341.18C8093.29,-4336.74 8168.35,-4325.91 8235,-4303.28 8253.21,-4297.1 8252.92,-4285.84 8271,-4279.28 8377.36,-4240.73 8508.76,-4233.08 8593.2,-4232.82"/>
<polygon fill="black" stroke="black" points="8593.26,-4236.32 8603.26,-4232.83 8593.27,-4229.32 8593.26,-4236.32"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node155" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node155"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9577,-4736.28 9125,-4736.28 9125,-4692.28 9577,-4692.28 9577,-4736.28"/>
<text text-anchor="middle" x="9351" y="-4705.96" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge238" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9546.14,-4692.2C9556.93,-4687.72 9567.31,-4682.46 9577,-4676.28 9709.99,-4591.53 9791.22,-4408.59 9818.34,-4338.96"/>
<polygon fill="black" stroke="black" points="9821.64,-4340.12 9821.95,-4329.53 9815.11,-4337.62 9821.64,-4340.12"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node156" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node156"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="8016,-4151.78 7522,-4151.78 7522,-4102.78 8016,-4102.78 8016,-4151.78"/>
<text text-anchor="middle" x="7769" y="-4118.1" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge242" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M8016.2,-4137.97C8110.67,-4136.35 8203.45,-4125.76 8235,-4093.28 8298.54,-4027.87 8221.59,-3349.94 8271,-3273.28 8343.39,-3160.98 8496.82,-3106.89 8593.53,-3082.99"/>
<polygon fill="black" stroke="black" points="8594.38,-3086.39 8603.28,-3080.64 8592.74,-3079.58 8594.38,-3086.39"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge245" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8016.04,-4137.16C8110.14,-4135.36 8202.68,-4124.85 8235,-4093.28 8294.41,-4035.25 8212.34,-3780.08 8271,-3721.28 8400.02,-3591.98 8958.75,-3768.35 9089,-3640.28 9187.9,-3543.04 9027.11,-3428.55 9125,-3330.28 9149.13,-3306.06 9182.82,-3295.17 9216.78,-3291.36"/>
<polygon fill="black" stroke="black" points="9217.21,-3294.83 9226.84,-3290.43 9216.56,-3287.86 9217.21,-3294.83"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge244" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8016.29,-4136.73C8281.59,-4148.24 8715.9,-4170.9 9089,-4208.28 9310.05,-4230.43 9566.57,-4269.09 9711.99,-4292.23"/>
<polygon fill="black" stroke="black" points="9711.84,-4295.75 9722.27,-4293.86 9712.94,-4288.83 9711.84,-4295.75"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge241" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M8016.22,-4138.3C8110.86,-4136.75 8203.77,-4126.14 8235,-4093.28 8296.87,-4028.2 8209.46,-2542.69 8271,-2477.28 8354.06,-2389 8507.52,-2403.25 8600.72,-2422.61"/>
<polygon fill="black" stroke="black" points="8600.15,-2426.06 8610.66,-2424.74 8601.61,-2419.22 8600.15,-2426.06"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge240" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M8016.21,-4137.66C8110.51,-4135.96 8203.16,-4125.41 8235,-4093.28 8322.94,-4004.56 8182.75,-3620.71 8271,-3532.28 8358.33,-3444.78 8515.66,-3463.84 8607.34,-3484.97"/>
<polygon fill="black" stroke="black" points="8606.55,-3488.38 8617.09,-3487.28 8608.17,-3481.57 8606.55,-3488.38"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge239" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8016.15,-4131.29C8340.13,-4134.67 8891.63,-4133.4 9089,-4090.28 9110.65,-4085.55 9230.93,-4032.58 9300.41,-4001.56"/>
<polygon fill="black" stroke="black" points="9302.16,-4004.61 9309.86,-3997.33 9299.3,-3998.22 9302.16,-4004.61"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge243" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M8016.26,-4141.04C8087.01,-4146.14 8164.17,-4152.81 8235,-4161.28 8360.33,-4176.28 8504.27,-4201.81 8593.43,-4218.61"/>
<polygon fill="black" stroke="black" points="8593.02,-4222.1 8603.49,-4220.52 8594.32,-4215.22 8593.02,-4222.1"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node157" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node157"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7984.5,-4214.28 7553.5,-4214.28 7553.5,-4170.28 7984.5,-4170.28 7984.5,-4214.28"/>
<text text-anchor="middle" x="7769" y="-4183.96" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge248" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7984.55,-4204.22C8089.17,-4204.94 8199.92,-4196.36 8235,-4160.28 8303.76,-4089.56 8217.7,-3356.28 8271,-3273.28 8343.21,-3160.86 8496.69,-3106.8 8593.46,-3082.95"/>
<polygon fill="black" stroke="black" points="8594.32,-3086.34 8603.22,-3080.6 8592.68,-3079.54 8594.32,-3086.34"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge250" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7984.81,-4203.53C8088.94,-4203.99 8199.16,-4195.39 8235,-4160.28 8298.92,-4097.68 8206.76,-3821.56 8271,-3759.28 8401.73,-3632.53 8957.97,-3837.73 9089,-3711.28 9150.2,-3652.23 9065.63,-3391.17 9125,-3330.28 9148.94,-3305.74 9182.65,-3294.77 9216.71,-3290.99"/>
<polygon fill="black" stroke="black" points="9217.16,-3294.46 9226.8,-3290.07 9216.52,-3287.49 9217.16,-3294.46"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge246" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7984.83,-4191.45C8333.74,-4188.63 8994.32,-4176.62 9089,-4126.28 9112.55,-4113.77 9104.11,-4094.86 9125,-4078.28 9170.09,-4042.49 9230.14,-4016.93 9276.86,-4000.76"/>
<polygon fill="black" stroke="black" points="9278.28,-4003.97 9286.62,-3997.45 9276.03,-3997.35 9278.28,-4003.97"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge247" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7984.62,-4203.67C8088.89,-4204.19 8199.29,-4195.59 8235,-4160.28 8306.18,-4089.91 8200.45,-3782.3 8271,-3711.28 8399.59,-3581.84 8959.21,-3768.53 9089,-3640.28 9146.82,-3583.15 9110.35,-3356.24 9125,-3276.28 9183.92,-2954.69 9305.92,-2575.98 9340.61,-2471.3"/>
<polygon fill="black" stroke="black" points="9344.04,-2472.09 9343.87,-2461.49 9337.39,-2469.88 9344.04,-2472.09"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge249" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7984.56,-4202.43C8178.77,-4211.62 8454.93,-4224.69 8593.19,-4231.23"/>
<polygon fill="black" stroke="black" points="8593.15,-4234.73 8603.3,-4231.7 8593.48,-4227.73 8593.15,-4234.73"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node158" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node158"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="8952.5,-4366.78 8407.5,-4366.78 8407.5,-4321.78 8952.5,-4321.78 8952.5,-4366.78"/>
<text text-anchor="middle" x="8680" y="-4335.9" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge251" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M8952.63,-4344.28C9043.56,-4344.28 9140.93,-4344.28 9216.52,-4344.28"/>
<polygon fill="black" stroke="black" points="9216.57,-4347.78 9226.57,-4344.28 9216.57,-4340.78 9216.57,-4347.78"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node159" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node159"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9505,-4443.28 9197,-4443.28 9197,-4407.28 9505,-4407.28 9505,-4443.28"/>
<text text-anchor="middle" x="9351" y="-4419.69" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node160" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node160"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="8215.5,-4294.28 7322.5,-4294.28 7322.5,-4232.28 8215.5,-4232.28 8215.5,-4294.28"/>
<text text-anchor="middle" x="7769" y="-4251.08" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge252" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7901.84,-4294.31C8007.91,-4310.63 8152.44,-4311.79 8235,-4223.28 8318.38,-4133.9 8190.9,-2115.62 8271,-2023.28 8302.32,-1987.18 8344.98,-1965.47 8390.95,-1953.1"/>
<polygon fill="black" stroke="black" points="8391.98,-1956.45 8400.81,-1950.6 8390.26,-1949.67 8391.98,-1956.45"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge253" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7904.54,-4294.32C8010.01,-4309.89 8152.33,-4310.02 8235,-4223.28 8307.88,-4146.82 8214.04,-3362.24 8271,-3273.28 8343.06,-3160.76 8496.59,-3106.74 8593.41,-3082.92"/>
<polygon fill="black" stroke="black" points="8594.27,-3086.31 8603.18,-3080.57 8592.63,-3079.5 8594.27,-3086.31"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge257" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7910.98,-4294.32C8015.02,-4308.2 8152.34,-4306.07 8235,-4223.28 8302.13,-4156.06 8202.96,-3863.59 8271,-3797.28 8401.4,-3670.19 8958.51,-3876.29 9089,-3749.28 9155.97,-3684.1 9060.04,-3397.47 9125,-3330.28 9148.89,-3305.57 9182.69,-3294.58 9216.84,-3290.83"/>
<polygon fill="black" stroke="black" points="9217.31,-3294.3 9226.96,-3289.92 9216.68,-3287.33 9217.31,-3294.3"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge254" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M8215.51,-4249.56C8359.32,-4245.13 8504.32,-4240.67 8592.91,-4237.94"/>
<polygon fill="black" stroke="black" points="8593.28,-4241.43 8603.17,-4237.62 8593.06,-4234.43 8593.28,-4241.43"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge255" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M8133.02,-4294.29C8167.49,-4297.3 8201.91,-4300.33 8235,-4303.28 8297.58,-4308.87 8365.1,-4315.03 8428.15,-4320.84"/>
<polygon fill="black" stroke="black" points="8427.95,-4324.34 8438.23,-4321.77 8428.59,-4317.37 8427.95,-4324.34"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge256" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M8215.68,-4291.25C8222.27,-4295.01 8228.72,-4299.02 8235,-4303.28 8264.6,-4323.38 8241.01,-4355.78 8271,-4375.28 8417.57,-4470.63 8923.13,-4453.6 9186.92,-4437.32"/>
<polygon fill="black" stroke="black" points="9187.21,-4440.81 9196.97,-4436.69 9186.77,-4433.82 9187.21,-4440.81"/>
</g>
<!-- debug_dump.main -->
<g id="node161" class="node">
<title>debug_dump.main</title>
<g id="a_node161"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6960,-4387.28 6484,-4387.28 6484,-4325.28 6960,-4325.28 6960,-4387.28"/>
<text text-anchor="middle" x="6722" y="-4344.08" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge258" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6960.13,-4364.45C7158.66,-4371.29 7436.48,-4380.86 7609.16,-4386.81"/>
<polygon fill="black" stroke="black" points="7609.24,-4390.32 7619.35,-4387.16 7609.48,-4383.32 7609.24,-4390.32"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge259" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6850.61,-4387.3C6971.37,-4422.43 7150.96,-4490.44 7267,-4606.28 7294.02,-4633.26 7270.92,-4663.58 7303,-4684.28 7396.43,-4744.59 8081.85,-4722.99 8448.7,-4706.73"/>
<polygon fill="black" stroke="black" points="8449.09,-4710.22 8458.92,-4706.27 8448.78,-4703.22 8449.09,-4710.22"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge260" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6960.13,-4351.29C7122.26,-4347.88 7337.29,-4343.35 7504.74,-4339.83"/>
<polygon fill="black" stroke="black" points="7505.01,-4343.32 7514.94,-4339.61 7504.87,-4336.32 7505.01,-4343.32"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge261" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6864.71,-4387.33C6987.37,-4421.25 7161.24,-4487.35 7267,-4606.28 7301.46,-4645.04 7261.13,-4686.68 7303,-4717.28 7374.97,-4769.89 8591.87,-4738.18 9114.54,-4722.02"/>
<polygon fill="black" stroke="black" points="9114.97,-4725.5 9124.85,-4721.7 9114.75,-4718.51 9114.97,-4725.5"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge262" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6859.62,-4387.32C6981,-4406.31 7155.94,-4411.35 7267,-4316.28 7320.73,-4270.29 7249.26,-4207.26 7303,-4161.28 7335.86,-4133.16 7422.32,-4122.6 7511.91,-4119.83"/>
<polygon fill="black" stroke="black" points="7512.09,-4123.32 7521.99,-4119.55 7511.9,-4116.33 7512.09,-4123.32"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge263" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6887.5,-4387.3C7004.47,-4399.84 7159.31,-4396.03 7267,-4316.28 7302.62,-4289.91 7267.29,-4249.54 7303,-4223.28 7341.64,-4194.87 7444.22,-4186.13 7543.22,-4184.93"/>
<polygon fill="black" stroke="black" points="7543.44,-4188.43 7553.41,-4184.83 7543.38,-4181.43 7543.44,-4188.43"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge264" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6960.28,-4352.89C7056.34,-4347.88 7167.78,-4337.43 7267,-4316.28 7283.64,-4312.74 7286.38,-4306.93 7303,-4303.28 7314.52,-4300.76 7326.22,-4298.38 7338.07,-4296.16"/>
<polygon fill="black" stroke="black" points="7338.84,-4299.58 7348.05,-4294.33 7337.58,-4292.69 7338.84,-4299.58"/>
</g>
<!-- check_translations.parse_po -->
<g id="node162" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-4629.28 1083.5,-4629.28 1083.5,-4577.28 1667.5,-4577.28 1667.5,-4629.28"/>
<text text-anchor="middle" x="1375.5" y="-4593.59" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node163" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-4625.78 318,-4625.78 318,-4580.78 983,-4580.78 983,-4625.78"/>
<text text-anchor="middle" x="650.5" y="-4594.9" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge270" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-4603.28C1013.14,-4603.28 1043.45,-4603.28 1073.19,-4603.28"/>
<polygon fill="black" stroke="black" points="1073.26,-4606.78 1083.26,-4603.28 1073.26,-4599.78 1073.26,-4606.78"/>
</g>
<!-- pending_chop.main -->
<g id="node164" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="6885.5,-2028.28 6558.5,-2028.28 6558.5,-1986.28 6885.5,-1986.28 6885.5,-2028.28"/>
<text text-anchor="middle" x="6722" y="-1999.2" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge271" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6885.68,-1993.73C7001.87,-1984.69 7161.93,-1973.54 7303,-1968.28 7678.54,-1954.31 8112.11,-1953.73 8390.6,-1955.36"/>
<polygon fill="black" stroke="black" points="8390.83,-1958.87 8400.85,-1955.43 8390.87,-1951.87 8390.83,-1958.87"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge272" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6885.71,-2010.55C7077.28,-2014.4 7394.29,-2020.77 7591.61,-2024.74"/>
<polygon fill="black" stroke="black" points="7591.72,-2028.24 7601.79,-2024.94 7591.86,-2021.24 7591.72,-2028.24"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node165" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node165"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="9089,-1139.78 8271,-1139.78 8271,-1082.78 9089,-1082.78 9089,-1139.78"/>
<text text-anchor="middle" x="8680" y="-1099.94" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge274" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M9070.42,-1082.76C9076.73,-1079.8 9082.93,-1076.64 9089,-1073.28 9221.79,-999.84 9308.42,-827.6 9338.34,-760.11"/>
<polygon fill="black" stroke="black" points="9341.72,-761.14 9342.5,-750.57 9335.3,-758.34 9341.72,-761.14"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge273" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M9061.33,-1140.06C9071.24,-1147.49 9080.51,-1155.86 9089,-1165.28 9137.55,-1219.17 9114.47,-2398.53 9125,-2470.28 9172.51,-2794.09 9302.8,-3171.91 9339.98,-3275.71"/>
<polygon fill="black" stroke="black" points="9336.7,-3276.93 9343.37,-3285.16 9343.28,-3274.56 9336.7,-3276.93"/>
</g>
<!-- pending_embed.main -->
<g id="node166" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6984,-1221.28 6460,-1221.28 6460,-1161.28 6984,-1161.28 6984,-1221.28"/>
<text text-anchor="middle" x="6722" y="-1179.76" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge275" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6984.17,-1214.24C7086.48,-1236.59 7196.1,-1279.52 7267,-1361.28 7332.48,-1436.8 7229.39,-1515.66 7303,-1583.28 7455.96,-1723.81 8039.06,-1585.37 8235,-1654.28 8397.1,-1711.3 8555.47,-1843.32 8631.79,-1913.13"/>
<polygon fill="black" stroke="black" points="8629.63,-1915.9 8639.36,-1920.1 8634.37,-1910.75 8629.63,-1915.9"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge279" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6984.01,-1180.39C7404.18,-1164.1 8188.49,-1139.33 8235,-1179.28 8315.48,-1248.42 8207.11,-1330.58 8271,-1415.28 8342.6,-1510.21 8473.81,-1558.42 8568.13,-1581.87"/>
<polygon fill="black" stroke="black" points="8567.45,-1585.31 8578,-1584.27 8569.11,-1578.5 8567.45,-1585.31"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge281" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6984,-1195.28C7188.88,-1198.42 7466.03,-1202.66 7630.02,-1205.17"/>
<polygon fill="black" stroke="black" points="7630.11,-1208.67 7640.16,-1205.33 7630.22,-1201.67 7630.11,-1208.67"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge276" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6984.05,-1208.59C7088.92,-1229.79 7200.52,-1273.39 7267,-1361.28 7311.52,-1420.15 7251.62,-2636.3 7303,-2689.28 7344.88,-2732.48 7495.15,-2734.58 7613.68,-2728.77"/>
<polygon fill="black" stroke="black" points="7614.15,-2732.25 7623.96,-2728.24 7613.79,-2725.26 7614.15,-2732.25"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge277" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6984.3,-1213C7087.11,-1235.12 7197.06,-1278.21 7267,-1361.28 7345.53,-1454.57 7227.93,-1537.19 7303,-1633.28 7577.16,-1984.24 7909.83,-1696.99 8235,-2001.28 8262.29,-2026.82 8240.22,-2056.08 8271,-2077.28 8343.73,-2127.4 8442.04,-2136.39 8523.93,-2132.38"/>
<polygon fill="black" stroke="black" points="8524.3,-2135.86 8534.09,-2131.81 8523.91,-2128.87 8524.3,-2135.86"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge278" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6984.04,-1166.71C7083.75,-1158.46 7198.55,-1150.33 7303,-1146.28 7406.48,-1142.28 8147.06,-1091.6 8235,-1146.28 8265.72,-1165.39 8241.13,-1198.89 8271,-1219.28 8355.38,-1276.9 8473.6,-1280.86 8561.07,-1273.24"/>
<polygon fill="black" stroke="black" points="8561.41,-1276.73 8571.04,-1272.31 8560.76,-1269.76 8561.41,-1276.73"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge280" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6984.2,-1184.93C7076.21,-1175.68 7178.66,-1157.16 7267,-1121.28 7285.53,-1113.76 7284.14,-1100.94 7303,-1094.28 7533.78,-1012.86 8275.68,-1030.98 8563.42,-1041.5"/>
<polygon fill="black" stroke="black" points="8563.35,-1045 8573.47,-1041.87 8563.6,-1038 8563.35,-1045"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge282" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6953.29,-1161.24C7107.29,-1141.26 7284.96,-1118.47 7303,-1117.28 7623.82,-1096.2 7987.63,-1095.63 8260.55,-1099.82"/>
<polygon fill="black" stroke="black" points="8260.57,-1103.32 8270.63,-1099.98 8260.68,-1096.33 8260.57,-1103.32"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node167" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node167"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8830.5,-2230.28 8529.5,-2230.28 8529.5,-2194.28 8830.5,-2194.28 8830.5,-2230.28"/>
<text text-anchor="middle" x="8680" y="-2208.24" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node168" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6956,-2108.28 6488,-2108.28 6488,-2056.28 6956,-2056.28 6956,-2108.28"/>
<text text-anchor="middle" x="6722" y="-2072.14" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge285" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6956,-2097.92C7055.83,-2095.95 7171.24,-2081.66 7267,-2037.28 7287.53,-2027.77 7282.23,-2010.27 7303,-2001.28 7327.61,-1990.64 7994.32,-1973.78 8390.51,-1964.65"/>
<polygon fill="black" stroke="black" points="8390.77,-1968.15 8400.69,-1964.42 8390.61,-1961.15 8390.77,-1968.15"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge286" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6956.22,-2070.23C7148.44,-2060.3 7416.93,-2046.43 7591.61,-2037.4"/>
<polygon fill="black" stroke="black" points="7591.87,-2040.89 7601.68,-2036.88 7591.51,-2033.9 7591.87,-2040.89"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge283" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6793.84,-2108.48C6915.87,-2157.87 7162.66,-2277.45 7267,-2470.28 7313.73,-2556.64 7233.38,-3284.04 7303,-3353.28 7339.73,-3389.82 8183.76,-3378.61 8235,-3386.28 8374.31,-3407.14 8532.59,-3455.81 8617.46,-3484.02"/>
<polygon fill="black" stroke="black" points="8616.59,-3487.42 8627.19,-3487.28 8618.81,-3480.79 8616.59,-3487.42"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge284" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6956.22,-2082.28C7169.02,-2082.28 7475.32,-2082.28 7644.3,-2082.28"/>
<polygon fill="black" stroke="black" points="7644.49,-2085.78 7654.49,-2082.28 7644.49,-2078.78 7644.49,-2085.78"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge287" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6820.35,-2108.31C6934.85,-2137.5 7131.14,-2183.14 7303,-2201.28 7741.12,-2247.54 8262.06,-2232.86 8519.15,-2221.04"/>
<polygon fill="black" stroke="black" points="8519.49,-2224.52 8529.32,-2220.56 8519.16,-2217.53 8519.49,-2224.52"/>
</g>
<!-- clean_data:cli -->
<g id="node170" class="node">
<title>clean_data:cli</title>
<g id="a_node170"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-4541.28" rx="37.29" ry="18"/>
<text text-anchor="middle" x="1986" y="-4539.68" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;clean_data:cli -->
<!-- telegram_bot:cli -->
<g id="node171" class="node">
<title>telegram_bot:cli</title>
<g id="a_node171"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-4541.28" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="2606.5" y="-4537.12" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;telegram_bot:cli -->
<!-- chop:cli -->
<g id="node172" class="node">
<title>chop:cli</title>
<g id="a_node172"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-4541.28" rx="27" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-4539.68" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;chop:cli -->
<!-- embed:cli -->
<g id="node173" class="node">
<title>embed:cli</title>
<g id="a_node173"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-4541.28" rx="29.05" ry="18"/>
<text text-anchor="middle" x="4058" y="-4539.68" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;embed:cli -->
<!-- caption:cli -->
<g id="node174" class="node">
<title>caption:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4665.28" rx="30.28" ry="18"/>
<text text-anchor="middle" x="141" y="-4663.68" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- moderation:cli -->
<g id="node175" class="node">
<title>moderation:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4665.28" rx="38.53" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4663.68" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;moderation:cli -->
<!-- tg_client:cli -->
<g id="node176" class="node">
<title>tg_client:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4665.28" rx="32.86" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4663.68" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;tg_client:cli -->
<!-- debug_dump:cli -->
<g id="node177" class="node">
<title>debug_dump:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-4665.28" rx="41.11" ry="18"/>
<text text-anchor="middle" x="1986" y="-4663.68" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;debug_dump:cli -->
<!-- check_translations:cli -->
<g id="node178" class="node">
<title>check_translations:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-4665.28" rx="53.05" ry="18"/>
<text text-anchor="middle" x="2606.5" y="-4663.68" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;check_translations:cli -->
<!-- pending_chop:cli -->
<g id="node179" class="node">
<title>pending_chop:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-4665.28" rx="42.96" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-4663.68" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- pending_embed:cli -->
<g id="node180" class="node">
<title>pending_embed:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-4665.28" rx="47.39" ry="18"/>
<text text-anchor="middle" x="4058" y="-4663.68" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_embed:cli -->
<!-- pending_caption:cli -->
<g id="node181" class="node">
<title>pending_caption:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4719.28" rx="48.62" ry="18"/>
<text text-anchor="middle" x="141" y="-4717.68" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- build_site -->
<g id="node182" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-549.28" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4058" y="-545.58" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge299" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4114.12,-549.28C4233.72,-549.28 4522.63,-549.28 4726.14,-549.28"/>
<polygon fill="black" stroke="black" points="4726.37,-552.78 4736.37,-549.28 4726.37,-545.78 4726.37,-552.78"/>
</g>
<!-- caption -->
<g id="node183" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-4633.28" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5684" y="-4629.58" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge300" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5728.85,-4633.28C5882.3,-4633.28 6397.73,-4633.28 6618.85,-4633.28"/>
<polygon fill="black" stroke="black" points="6619.16,-4636.78 6629.16,-4633.28 6619.16,-4629.78 6619.16,-4636.78"/>
</g>
<!-- check_translations -->
<g id="node184" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4603.28" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-4599.58" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge301" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-4603.28C259.3,-4603.28 282.99,-4603.28 307.97,-4603.28"/>
<polygon fill="black" stroke="black" points="307.99,-4606.78 317.99,-4603.28 307.99,-4599.78 307.99,-4606.78"/>
</g>
<!-- chop -->
<g id="node185" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-2530.28" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-2526.58" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge302" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4979.1,-2530.28C5085.78,-2530.28 5434.98,-2530.28 5597.89,-2530.28"/>
<polygon fill="black" stroke="black" points="5598.34,-2533.78 5608.34,-2530.28 5598.34,-2526.78 5598.34,-2533.78"/>
</g>
<!-- clean_data -->
<g id="node186" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-3860.28" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5684" y="-3856.58" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge303" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5744.04,-3860.28C5912.96,-3860.28 6399.87,-3860.28 6615.77,-3860.28"/>
<polygon fill="black" stroke="black" points="6615.84,-3863.78 6625.84,-3860.28 6615.84,-3856.78 6615.84,-3863.78"/>
</g>
<!-- debug_dump -->
<g id="node187" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-4356.28" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5684" y="-4352.58" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge304" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5754.58,-4356.28C5899.21,-4356.28 6238.41,-4356.28 6473.8,-4356.28"/>
<polygon fill="black" stroke="black" points="6473.88,-4359.78 6483.88,-4356.28 6473.88,-4352.78 6473.88,-4359.78"/>
</g>
<!-- embed -->
<g id="node188" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-1388.28" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5684" y="-1384.58" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge305" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5726.25,-1388.28C5877.49,-1388.28 6404.15,-1388.28 6623.72,-1388.28"/>
<polygon fill="black" stroke="black" points="6623.94,-1391.78 6633.94,-1388.28 6623.94,-1384.78 6623.94,-1391.78"/>
</g>
<!-- moderation -->
<g id="node189" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-1703.28" rx="63.89" ry="18"/>
<text text-anchor="middle" x="5684" y="-1699.58" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge306" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M5747.86,-1703.28C5884.92,-1703.28 6217.43,-1703.28 6455.6,-1703.28"/>
<polygon fill="black" stroke="black" points="6455.81,-1706.78 6465.81,-1703.28 6455.81,-1699.78 6455.81,-1706.78"/>
</g>
<!-- pending_caption -->
<g id="node190" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-2082.28" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5684" y="-2078.58" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge307" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5771.1,-2082.28C5924.62,-2082.28 6250.77,-2082.28 6477.8,-2082.28"/>
<polygon fill="black" stroke="black" points="6477.86,-2085.78 6487.86,-2082.28 6477.86,-2078.78 6477.86,-2085.78"/>
</g>
<!-- pending_chop -->
<g id="node191" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-2007.28" rx="74.99" ry="18"/>
<text text-anchor="middle" x="5684" y="-2003.58" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge308" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M5759.09,-2007.28C5922.69,-2007.28 6318.42,-2007.28 6548.1,-2007.28"/>
<polygon fill="black" stroke="black" points="6548.23,-2010.78 6558.23,-2007.28 6548.23,-2003.78 6548.23,-2010.78"/>
</g>
<!-- pending_embed -->
<g id="node192" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5684" cy="-1191.28" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5684" y="-1187.58" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge309" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5768.03,-1191.28C5914.1,-1191.28 6223.05,-1191.28 6449.73,-1191.28"/>
<polygon fill="black" stroke="black" points="6449.79,-1194.78 6459.79,-1191.28 6449.79,-1187.78 6449.79,-1194.78"/>
</g>
<!-- scan_ontology -->
<g id="node193" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-1830.28" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-1826.58" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge310" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M5022.75,-1830.28C5121.62,-1830.28 5299.87,-1830.28 5446.26,-1830.28"/>
<polygon fill="black" stroke="black" points="5446.3,-1833.78 5456.3,-1830.28 5446.3,-1826.78 5446.3,-1833.78"/>
</g>
<!-- telegram_bot -->
<g id="node194" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-4089.28" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4058" y="-4085.58" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge311" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4128.56,-4093.21C4265.77,-4100.95 4574.96,-4118.39 4771.16,-4129.45"/>
<polygon fill="black" stroke="black" points="4771.11,-4132.95 4781.29,-4130.02 4771.5,-4125.96 4771.11,-4132.95"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge312" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4128.56,-4085.36C4265.67,-4077.63 4574.51,-4060.21 4770.73,-4049.14"/>
<polygon fill="black" stroke="black" points="4771.07,-4052.63 4780.86,-4048.57 4770.68,-4045.64 4771.07,-4052.63"/>
</g>
<!-- tg_client -->
<g id="node195" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-3715.28" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-3711.58" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge313" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-3715.28C232.34,-3715.28 292.58,-3715.28 356.22,-3715.28"/>
<polygon fill="black" stroke="black" points="356.46,-3718.78 366.46,-3715.28 356.46,-3711.78 356.46,-3718.78"/>
</g>
</g>
</svg>
