<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="9757pt" height="5023pt"
 viewBox="0.00 0.00 9757.00 5022.96" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5018.96)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5018.96 9753,-5018.96 9753,4 -4,4"/>
<!-- scan_ontology.collect_ontology -->
<g id="node1" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node1"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6901,-2016.46 5985,-2016.46 5985,-1945.46 6901,-1945.46 6901,-2016.46"/>
<text text-anchor="middle" x="6443" y="-1966.31" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- post_io.read_post -->
<g id="node2" class="node">
<title>post_io.read_post</title>
<g id="a_node2"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8662,-2150.96 8104,-2150.96 8104,-2074.96 8662,-2074.96 8662,-2150.96"/>
<text text-anchor="middle" x="8383" y="-2097.79" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge1" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6901.35,-1947.12C7273.56,-1927.61 7764.62,-1922.6 7938,-2014.96 7962.49,-2028 7950.14,-2051.8 7974,-2065.96 8010.41,-2087.56 8051.88,-2101.66 8094.1,-2110.59"/>
<polygon fill="black" stroke="black" points="8093.48,-2114.04 8103.98,-2112.59 8094.87,-2107.18 8093.48,-2114.04"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node3" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node3"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8459.5,-3078.96 8306.5,-3078.96 8306.5,-3042.96 8459.5,-3042.96 8459.5,-3078.96"/>
<text text-anchor="middle" x="8383" y="-3057.71" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge2" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6593.63,-1945.45C6717.5,-1925.84 6888.7,-1923.08 6988,-2025.96 7046.94,-2087.02 6963.98,-2728.95 7024,-2788.96 7095.89,-2860.84 7839.79,-2805.66 7938,-2831.96 8102.71,-2876.05 8276.28,-2987.47 8347.98,-3036.81"/>
<polygon fill="black" stroke="black" points="8346.39,-3039.97 8356.61,-3042.79 8350.38,-3034.22 8346.39,-3039.97"/>
</g>
<!-- lot_io.read_lots -->
<g id="node4" class="node">
<title>lot_io.read_lots</title>
<g id="a_node4"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8489,-1674.96 8277,-1674.96 8277,-1638.96 8489,-1638.96 8489,-1674.96"/>
<text text-anchor="middle" x="8383" y="-1650.8" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge3" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6822.39,-1945.42C6881.42,-1928.1 6939,-1903.29 6988,-1867.96 7013.84,-1849.32 6997.07,-1822.99 7024,-1805.96 7196.26,-1697.03 7736.5,-1760.58 7938,-1729.96 7954.2,-1727.49 7957.9,-1725.03 7974,-1721.96 8072.41,-1703.2 8184.89,-1685.56 8266.79,-1673.4"/>
<polygon fill="black" stroke="black" points="8267.5,-1676.84 8276.88,-1671.91 8266.47,-1669.91 8267.5,-1676.84"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node5" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node5"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7693.5,-2262.96 7268.5,-2262.96 7268.5,-2226.96 7693.5,-2226.96 7693.5,-2262.96"/>
<text text-anchor="middle" x="7481" y="-2239.08" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge4" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6901.12,-1976.74C6932.34,-1988.82 6961.76,-2004.9 6988,-2025.96 7030.1,-2059.74 6984.36,-2105.32 7024,-2141.96 7087.08,-2200.25 7175.92,-2227.95 7258.46,-2240.39"/>
<polygon fill="black" stroke="black" points="7258.09,-2243.87 7268.49,-2241.83 7259.09,-2236.94 7258.09,-2243.87"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node6" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node6"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7699,-462.96 7263,-462.96 7263,-418.96 7699,-418.96 7699,-462.96"/>
<text text-anchor="middle" x="7481" y="-432.64" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge5" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6886.1,-1945.39C6924.91,-1926.63 6960.01,-1901.45 6988,-1867.96 7084.74,-1752.23 6924.26,-624.1 7024,-510.96 7094.34,-431.16 7214.43,-415.32 7313.72,-418.55"/>
<polygon fill="black" stroke="black" points="7313.74,-422.05 7323.87,-418.95 7314.02,-415.06 7313.74,-422.05"/>
</g>
<!-- notes_utils.read_md -->
<g id="node34" class="node">
<title>notes_utils.read_md</title>
<g id="a_node34"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9124,-2330.96 8984,-2330.96 8984,-2294.96 9124,-2294.96 9124,-2330.96"/>
<text text-anchor="middle" x="9054" y="-2309.71" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge167" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8662.01,-2129.27C8706.17,-2136.33 8750.83,-2146.2 8792,-2159.96 8881.81,-2189.96 8974.56,-2253.58 9021.58,-2288.59"/>
<polygon fill="black" stroke="black" points="9019.72,-2291.57 9029.81,-2294.78 9023.92,-2285.98 9019.72,-2291.57"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node105" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node105"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9223,-2098.46 8885,-2098.46 8885,-2061.46 9223,-2061.46 9223,-2098.46"/>
<text text-anchor="middle" x="9054" y="-2073.51" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge168" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8662.39,-2099.22C8734.07,-2095.69 8809.3,-2091.98 8874.38,-2088.77"/>
<polygon fill="black" stroke="black" points="8874.92,-2092.25 8884.74,-2088.26 8874.58,-2085.25 8874.92,-2092.25"/>
</g>
<!-- notes_utils.load_json -->
<g id="node18" class="node">
<title>notes_utils.load_json</title>
<g id="a_node18"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9178,-2678.96 8930,-2678.96 8930,-2642.96 9178,-2642.96 9178,-2678.96"/>
<text text-anchor="middle" x="9054" y="-2655.26" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge175" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8489.12,-1640.87C8583.14,-1633.06 8717.29,-1639.39 8792,-1721.96 8838.15,-1772.96 8805.4,-2274.99 8828,-2339.96 8871.39,-2464.68 8978.27,-2584.75 9027.46,-2635.57"/>
<polygon fill="black" stroke="black" points="9025.07,-2638.13 9034.57,-2642.83 9030.08,-2633.24 9025.07,-2638.13"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node110" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node110"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9111.5,-382.96 8996.5,-382.96 8996.5,-346.96 9111.5,-346.96 9111.5,-382.96"/>
<text text-anchor="middle" x="9054" y="-361.71" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge174" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8445.58,-1674.99C8535.81,-1697.19 8702.86,-1721.52 8792,-1628.96 8881.99,-1535.51 8755.04,-569.22 8828,-461.96 8863.62,-409.58 8933.93,-385.32 8986.52,-374.18"/>
<polygon fill="black" stroke="black" points="8987.33,-377.59 8996.45,-372.19 8985.96,-370.73 8987.33,-377.59"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge238" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7592.94,-2262.99C7690.43,-2273.11 7832.75,-2273.51 7938,-2212.96 7962.68,-2198.76 7949.64,-2174.7 7974,-2159.96 8010.29,-2137.99 8051.74,-2123.69 8094,-2114.69"/>
<polygon fill="black" stroke="black" points="8094.79,-2118.1 8103.89,-2112.68 8093.39,-2111.24 8094.79,-2118.1"/>
</g>
<!-- caption_io.read_caption -->
<g id="node24" class="node">
<title>caption_io.read_caption</title>
<g id="a_node24"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8548.5,-2508.46 8217.5,-2508.46 8217.5,-2471.46 8548.5,-2471.46 8548.5,-2508.46"/>
<text text-anchor="middle" x="8383" y="-2483.51" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge237" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7568.34,-2263.03C7662.79,-2284.93 7816.87,-2327.06 7938,-2390.96 7955.93,-2400.41 7955.46,-2410.75 7974,-2418.96 8046.83,-2451.19 8133.03,-2468.82 8207.39,-2478.45"/>
<polygon fill="black" stroke="black" points="8206.97,-2481.93 8217.33,-2479.7 8207.84,-2474.98 8206.97,-2481.93"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node151" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node151"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8532.5,-2281.96 8233.5,-2281.96 8233.5,-2245.96 8532.5,-2245.96 8532.5,-2281.96"/>
<text text-anchor="middle" x="8383" y="-2259.16" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge239" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7693.58,-2249.42C7855.74,-2252.85 8075.99,-2257.5 8223.26,-2260.61"/>
<polygon fill="black" stroke="black" points="8223.22,-2264.11 8233.29,-2260.82 8223.37,-2257.11 8223.22,-2264.11"/>
</g>
<!-- lot_io.get_seller -->
<g id="node51" class="node">
<title>lot_io.get_seller</title>
<g id="a_node51"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8483.5,-405.96 8282.5,-405.96 8282.5,-369.96 8483.5,-369.96 8483.5,-405.96"/>
<text text-anchor="middle" x="8383" y="-382.36" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge244" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7699,-428.18C7879.97,-417.52 8130.35,-402.78 8272.26,-394.42"/>
<polygon fill="black" stroke="black" points="8272.51,-397.91 8282.29,-393.83 8272.1,-390.92 8272.51,-397.91"/>
</g>
<!-- scan_ontology.main -->
<g id="node7" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5772,-2009.46 5317,-2009.46 5317,-1952.46 5772,-1952.46 5772,-2009.46"/>
<text text-anchor="middle" x="5544.5" y="-1970.06" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge6" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5772.01,-1980.96C5834.19,-1980.96 5903.96,-1980.96 5974.38,-1980.96"/>
<polygon fill="black" stroke="black" points="5974.77,-1984.46 5984.77,-1980.96 5974.77,-1977.46 5974.77,-1984.46"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node8" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node8"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6629.5,-4652.96 6256.5,-4652.96 6256.5,-4616.96 6629.5,-4616.96 6629.5,-4652.96"/>
<text text-anchor="middle" x="6443" y="-4628.8" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge7" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5772.13,-1998.05C5806.95,-2010.67 5838.93,-2029.94 5862,-2058.96 5950.13,-2169.82 5799.65,-4506.05 5898,-4607.96 5945.09,-4656.75 6110.14,-4659.34 6246.21,-4652.19"/>
<polygon fill="black" stroke="black" points="6246.57,-4655.68 6256.37,-4651.64 6246.19,-4648.69 6246.57,-4655.68"/>
</g>
<!-- notes_utils.write_json -->
<g id="node9" class="node">
<title>notes_utils.write_json</title>
<g id="a_node9"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9148,-882.96 8960,-882.96 8960,-846.96 9148,-846.96 9148,-882.96"/>
<text text-anchor="middle" x="9054" y="-860.91" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge8" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5721.99,-1952.39C5775.47,-1934.74 5828.78,-1906.17 5862,-1859.96 5919.37,-1780.13 5827.54,-1044.5 5898,-975.96 5955.63,-919.9 8712.42,-949.41 8792,-937.96 8862.66,-927.79 8941.24,-904.03 8993.53,-886.36"/>
<polygon fill="black" stroke="black" points="8994.97,-889.57 9003.31,-883.03 8992.71,-882.95 8994.97,-889.57"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node10" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node10"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7596.5,-4782.96 7365.5,-4782.96 7365.5,-4746.96 7596.5,-4746.96 7596.5,-4782.96"/>
<text text-anchor="middle" x="7481" y="-4760.91" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge13" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6587.51,-4652.96C6791.49,-4678.56 7161.91,-4725.04 7355.14,-4749.29"/>
<polygon fill="black" stroke="black" points="7354.98,-4752.8 7365.34,-4750.57 7355.85,-4745.85 7354.98,-4752.8"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node11" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node11"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6584.5,-4782.96 6301.5,-4782.96 6301.5,-4746.96 6584.5,-4746.96 6584.5,-4782.96"/>
<text text-anchor="middle" x="6443" y="-4759.36" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge9" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6584.53,-4764.96C6787.85,-4764.96 7160.94,-4764.96 7355.12,-4764.96"/>
<polygon fill="black" stroke="black" points="7355.37,-4768.46 7365.37,-4764.96 7355.37,-4761.46 7355.37,-4768.46"/>
</g>
<!-- log_utils.init_logger -->
<g id="node12" class="node">
<title>log_utils.init_logger</title>
<g id="a_node12"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6790.5,-4882.96 6095.5,-4882.96 6095.5,-4800.96 6790.5,-4800.96 6790.5,-4882.96"/>
<text text-anchor="middle" x="6443" y="-4824.97" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge10" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6790.77,-4816.18C6985.28,-4801.73 7216.08,-4784.57 7355.13,-4774.24"/>
<polygon fill="black" stroke="black" points="7355.68,-4777.71 7365.4,-4773.47 7355.17,-4770.73 7355.68,-4777.71"/>
</g>
<!-- log_utils.get_logger -->
<g id="node13" class="node">
<title>log_utils.get_logger</title>
<g id="a_node13"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7549.5,-4859.96 7412.5,-4859.96 7412.5,-4823.96 7549.5,-4823.96 7549.5,-4859.96"/>
<text text-anchor="middle" x="7481" y="-4838.71" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge11" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6790.77,-4835.55C7009.23,-4834.65 7273.46,-4835.53 7402.08,-4838.18"/>
<polygon fill="black" stroke="black" points="7402.15,-4841.68 7412.23,-4838.4 7402.3,-4834.69 7402.15,-4841.68"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge12" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7412.23,-4845.51C7289.69,-4848.29 7023.37,-4849.26 6800.99,-4848.41"/>
<polygon fill="black" stroke="black" points="6800.79,-4844.91 6790.77,-4848.37 6800.76,-4851.91 6800.79,-4844.91"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node14" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node14"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7630.5,-4148.96 7331.5,-4148.96 7331.5,-4112.96 7630.5,-4112.96 7630.5,-4148.96"/>
<text text-anchor="middle" x="7481" y="-4125.08" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node15" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node15"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8604,-4148.96 8162,-4148.96 8162,-4112.96 8604,-4112.96 8604,-4148.96"/>
<text text-anchor="middle" x="8383" y="-4125.36" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node16" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node16"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7735,-3817.46 7227,-3817.46 7227,-3774.46 7735,-3774.46 7735,-3817.46"/>
<text text-anchor="middle" x="7481" y="-3787.81" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node17" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node17"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8459.5,-3750.96 8306.5,-3750.96 8306.5,-3714.96 8459.5,-3714.96 8459.5,-3750.96"/>
<text text-anchor="middle" x="8383" y="-3729.26" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge14" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7735.27,-3778.92C7801.27,-3774.43 7872.3,-3769.56 7938,-3764.96 8062.53,-3756.24 8206.67,-3745.78 8296.1,-3739.25"/>
<polygon fill="black" stroke="black" points="8296.48,-3742.73 8306.19,-3738.51 8295.97,-3735.75 8296.48,-3742.73"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge15" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7735.2,-3806.97C7823.36,-3805.06 7907.82,-3794.74 7938,-3764.96 8008.15,-3695.74 7903.45,-3391.76 7974,-3322.96 8104.34,-3195.84 8662.95,-3405.38 8792,-3276.96 8884.95,-3184.46 8738.02,-2783.35 8828,-2687.96 8851.65,-2662.89 8885.46,-2651.81 8919.71,-2648.09"/>
<polygon fill="black" stroke="black" points="8920.2,-2651.56 8929.85,-2647.2 8919.59,-2644.59 8920.2,-2651.56"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node116" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node116"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9179,-3733.96 8929,-3733.96 8929,-3697.96 9179,-3697.96 9179,-3733.96"/>
<text text-anchor="middle" x="9054" y="-3709.8" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge180" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8459.77,-3731.03C8571.15,-3728.2 8780.79,-3722.87 8918.66,-3719.37"/>
<polygon fill="black" stroke="black" points="8918.96,-3722.86 8928.87,-3719.11 8918.79,-3715.87 8918.96,-3722.86"/>
</g>
<!-- notes_utils.read_text -->
<g id="node20" class="node">
<title>notes_utils.read_text</title>
<g id="a_node20"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="9639.5,-3877.96 9425.5,-3877.96 9425.5,-3841.96 9639.5,-3841.96 9639.5,-3877.96"/>
<text text-anchor="middle" x="9532.5" y="-3855.17" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge258" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9178.15,-2649.75C9214.88,-2652.72 9252.6,-2662.97 9280,-2687.96 9456.99,-2849.37 9519.04,-3668.24 9529.75,-3831.59"/>
<polygon fill="black" stroke="black" points="9526.27,-3832.04 9530.4,-3841.79 9533.25,-3831.59 9526.27,-3832.04"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node19" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node19"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9280,-4542.96 8828,-4542.96 8828,-4498.96 9280,-4498.96 9280,-4542.96"/>
<text text-anchor="middle" x="9054" y="-4512.64" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge16" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9267.15,-4498.88C9271.59,-4496.15 9275.89,-4493.18 9280,-4489.96 9481.37,-4332.39 9522.07,-3988.95 9529.79,-3888.25"/>
<polygon fill="black" stroke="black" points="9533.31,-3888.19 9530.53,-3877.97 9526.32,-3887.69 9533.31,-3888.19"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge254" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9446.03,-3878.11C9432.72,-3887.5 9461.55,-3895.96 9532.5,-3895.96 9576.85,-3895.96 9604.73,-3892.65 9616.17,-3887.88"/>
<polygon fill="black" stroke="black" points="9619.58,-3888.69 9618.97,-3878.11 9612.85,-3886.75 9619.58,-3888.69"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node21" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node21"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7728,-3884.46 7234,-3884.46 7234,-3835.46 7728,-3835.46 7728,-3884.46"/>
<text text-anchor="middle" x="7481" y="-3850.78" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge20" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7728.03,-3869.9C7819.04,-3867.89 7907.52,-3857.22 7938,-3825.96 7994.7,-3767.82 7917.63,-3154.41 7974,-3095.96 8058.16,-3008.69 8211.25,-3022.15 8304.08,-3040.88"/>
<polygon fill="black" stroke="black" points="8303.48,-3044.32 8313.99,-3042.94 8304.91,-3037.47 8303.48,-3044.32"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge21" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7728.28,-3874.75C7798.83,-3870.34 7873.93,-3856.9 7938,-3825.96 7959.24,-3815.7 7953.06,-3797.82 7974,-3786.96 8075.74,-3734.19 8210.16,-3726.35 8296.36,-3727.85"/>
<polygon fill="black" stroke="black" points="8296.3,-3731.35 8306.37,-3728.07 8296.45,-3724.35 8296.3,-3731.35"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge23" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7728.24,-3869.48C7818.96,-3867.37 7907.16,-3856.73 7938,-3825.96 8012.14,-3751.96 7899,-3429.09 7974,-3355.96 8039.16,-3292.42 8727.45,-3378.11 8792,-3313.96 8890.83,-3215.73 8732.57,-2789.49 8828,-2687.96 8851.6,-2662.84 8885.4,-2651.75 8919.65,-2648.03"/>
<polygon fill="black" stroke="black" points="8920.14,-2651.5 8929.8,-2647.14 8919.53,-2644.53 8920.14,-2651.5"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge22" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7604.55,-3835.4C7703.36,-3822.68 7841.31,-3821.66 7938,-3888.96 7970.33,-3911.46 7940.97,-3948.49 7974,-3969.96 8126.42,-4069.01 8610.24,-3972.19 8792,-3969.96 9008.94,-3967.29 9067.29,-4000.65 9280,-3957.96 9355.75,-3942.75 9438.25,-3906.48 9487.38,-3882.59"/>
<polygon fill="black" stroke="black" points="9489.02,-3885.68 9496.45,-3878.13 9485.93,-3879.4 9489.02,-3885.68"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node22" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node22"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9150.5,-3948.96 8957.5,-3948.96 8957.5,-3912.96 9150.5,-3912.96 9150.5,-3948.96"/>
<text text-anchor="middle" x="9054" y="-3927.71" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge17" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7639.32,-3884.48C7727.37,-3898.71 7839.01,-3917.61 7938,-3936.96 7954.09,-3940.1 7957.71,-3943.17 7974,-3944.96 8335.38,-3984.63 8428.57,-3954.7 8792,-3944.96 8843.03,-3943.59 8899.61,-3940.72 8947.01,-3937.93"/>
<polygon fill="black" stroke="black" points="8947.52,-3941.41 8957.29,-3937.32 8947.1,-3934.42 8947.52,-3941.41"/>
</g>
<!-- caption_io.has_caption -->
<g id="node23" class="node">
<title>caption_io.has_caption</title>
<g id="a_node23"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8460.5,-4070.96 8305.5,-4070.96 8305.5,-4034.96 8460.5,-4034.96 8460.5,-4070.96"/>
<text text-anchor="middle" x="8383" y="-4049.71" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge18" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7728.04,-3857.46C7801.86,-3867.64 7878.84,-3890.42 7938,-3936.96 7969.92,-3962.07 7940.99,-3997.29 7974,-4020.96 8067.54,-4088.03 8206.09,-4083.03 8295.21,-4070.31"/>
<polygon fill="black" stroke="black" points="8295.92,-4073.74 8305.29,-4068.81 8294.89,-4066.82 8295.92,-4073.74"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge19" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7728.06,-3870.23C7819.23,-3868.29 7907.82,-3857.58 7938,-3825.96 8038.37,-3720.77 7873.32,-2622.85 7974,-2517.96 8006.08,-2484.53 8111.49,-2477.91 8207.12,-2479.45"/>
<polygon fill="black" stroke="black" points="8207.17,-2482.95 8217.23,-2479.64 8207.3,-2475.95 8207.17,-2482.95"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge44" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8460.81,-4040.41C8542.9,-4026.85 8676.82,-4004.31 8792,-3982.96 8846.19,-3972.91 8906.54,-3960.94 8955.55,-3951.01"/>
<polygon fill="black" stroke="black" points="8956.41,-3954.41 8965.52,-3948.99 8955.02,-3947.55 8956.41,-3954.41"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node26" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node26"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9147.5,-2943.96 8960.5,-2943.96 8960.5,-2907.96 9147.5,-2907.96 9147.5,-2943.96"/>
<text text-anchor="middle" x="9054" y="-2922.71" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge45" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8460.82,-4050.15C8555.11,-4042.21 8712.25,-4013.47 8792,-3911.96 8844.81,-3844.73 8808.89,-3612.28 8828,-3528.96 8880.85,-3298.48 9000.08,-3036.99 9039.82,-2953.26"/>
<polygon fill="black" stroke="black" points="9043.02,-2954.69 9044.16,-2944.16 9036.7,-2951.68 9043.02,-2954.69"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge50" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8548.65,-2485.22C8624.13,-2487.1 8713.98,-2495.11 8792,-2517.96 8880.69,-2543.93 8972.86,-2603.42 9020.35,-2636.91"/>
<polygon fill="black" stroke="black" points="9018.51,-2639.89 9028.69,-2642.84 9022.57,-2634.19 9018.51,-2639.89"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge47" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8548.75,-2479.66C8646.93,-2477.5 8758.75,-2483.38 8792,-2517.96 8839.19,-2567.03 8798.26,-3681.71 8828,-3742.96 8865.84,-3820.87 8952.78,-3878.27 9006.83,-3908"/>
<polygon fill="black" stroke="black" points="9005.4,-3911.21 9015.87,-3912.88 9008.73,-3905.05 9005.4,-3911.21"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge48" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8548.65,-2481.14C8645.91,-2479.67 8756.74,-2485.76 8792,-2517.96 8866.46,-2585.95 8777.69,-2654.57 8828,-2741.96 8870.84,-2816.37 8956.13,-2873.15 9008.52,-2902.87"/>
<polygon fill="black" stroke="black" points="9006.83,-2905.93 9017.26,-2907.75 9010.24,-2899.82 9006.83,-2905.93"/>
</g>
<!-- caption_io._get_langs -->
<g id="node32" class="node">
<title>caption_io._get_langs</title>
<g id="a_node32"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9163,-2732.96 8945,-2732.96 8945,-2696.96 9163,-2696.96 9163,-2732.96"/>
<text text-anchor="middle" x="9054" y="-2710.17" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge46" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8548.66,-2481.72C8645.58,-2480.53 8756.02,-2486.7 8792,-2517.96 8850.3,-2568.61 8771.01,-2635.84 8828,-2687.96 8856.58,-2714.1 8896.46,-2724.12 8934.71,-2726.57"/>
<polygon fill="black" stroke="black" points="8934.77,-2730.07 8944.92,-2727.05 8935.1,-2723.08 8934.77,-2730.07"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge49" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8535.91,-2471.4C8613.44,-2459.95 8708.71,-2442.82 8792,-2418.96 8869.46,-2396.76 8955.31,-2359.24 9006.68,-2335.3"/>
<polygon fill="black" stroke="black" points="9008.29,-2338.41 9015.86,-2331 9005.32,-2332.07 9008.29,-2338.41"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node25" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node25"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7696.5,-3755.96 7265.5,-3755.96 7265.5,-3711.96 7696.5,-3711.96 7696.5,-3755.96"/>
<text text-anchor="middle" x="7481" y="-3725.64" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge26" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7696.77,-3745.62C7797.9,-3746.05 7903.78,-3737.47 7938,-3702.96 8033.13,-3607 7879.72,-3192.76 7974,-3095.96 8058.35,-3009.35 8210.67,-3022.36 8303.44,-3040.86"/>
<polygon fill="black" stroke="black" points="8302.84,-3044.31 8313.34,-3042.9 8304.25,-3037.45 8302.84,-3044.31"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge27" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7696.71,-3733.72C7888.39,-3733.51 8159.31,-3733.2 8296,-3733.05"/>
<polygon fill="black" stroke="black" points="8296.41,-3736.55 8306.4,-3733.04 8296.4,-3729.55 8296.41,-3736.55"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge28" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7696.71,-3745.24C7797.64,-3745.56 7903.36,-3736.98 7938,-3702.96 8004.52,-3637.63 7907.06,-3349.85 7974,-3284.96 8104.71,-3158.23 8662.62,-3368.03 8792,-3239.96 8879.36,-3153.48 8743.47,-2777.21 8828,-2687.96 8851.7,-2662.93 8885.53,-2651.87 8919.78,-2648.15"/>
<polygon fill="black" stroke="black" points="8920.27,-2651.62 8929.92,-2647.26 8919.65,-2644.65 8920.27,-2651.62"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge24" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7696.8,-3724.94C7796.52,-3725.37 7901.11,-3733.93 7938,-3764.96 7989.48,-3808.25 7921.45,-3869.97 7974,-3911.96 8011.56,-3941.96 8682.54,-3936.07 8947.06,-3932.55"/>
<polygon fill="black" stroke="black" points="8947.49,-3936.04 8957.44,-3932.41 8947.39,-3929.05 8947.49,-3936.04"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge25" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7696.73,-3743.6C7796.78,-3743.38 7901.69,-3734.81 7938,-3702.96 7999,-3649.44 7914.92,-3579.59 7974,-3523.96 8241.23,-3272.3 8490.58,-3619.44 8792,-3409.96 8957.77,-3294.75 9027.76,-3039.64 9047.1,-2954.35"/>
<polygon fill="black" stroke="black" points="9050.57,-2954.89 9049.31,-2944.37 9043.73,-2953.38 9050.57,-2954.89"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node27" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node27"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="8655.5,-3578.46 8110.5,-3578.46 8110.5,-3533.46 8655.5,-3533.46 8655.5,-3578.46"/>
<text text-anchor="middle" x="8383" y="-3547.58" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node28" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node28"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="9178,-3573.96 8930,-3573.96 8930,-3537.96 9178,-3537.96 9178,-3573.96"/>
<text text-anchor="middle" x="9054" y="-3551.91" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge29" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M8655.63,-3555.96C8746.56,-3555.96 8843.93,-3555.96 8919.52,-3555.96"/>
<polygon fill="black" stroke="black" points="8919.57,-3559.46 8929.57,-3555.96 8919.57,-3552.46 8919.57,-3559.46"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node29" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node29"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9208,-3662.96 8900,-3662.96 8900,-3626.96 9208,-3626.96 9208,-3662.96"/>
<text text-anchor="middle" x="9054" y="-3639.36" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node30" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node30"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7927.5,-3585.96 7034.5,-3585.96 7034.5,-3523.96 7927.5,-3523.96 7927.5,-3585.96"/>
<text text-anchor="middle" x="7481" y="-3542.76" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge32" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7881.51,-3523.86C7902.49,-3511.29 7921.62,-3495.84 7938,-3476.96 8033.9,-3366.36 7875.11,-2267.89 7974,-2159.96 8005.82,-2125.23 8048.38,-2105.3 8094.02,-2094.83"/>
<polygon fill="black" stroke="black" points="8094.75,-2098.25 8103.8,-2092.74 8093.29,-2091.41 8094.75,-2098.25"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge33" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7877.75,-3523.88C7899.97,-3511.39 7920.39,-3495.95 7938,-3476.96 7995.83,-3414.6 7913.61,-3155.83 7974,-3095.96 8059.25,-3011.44 8209.53,-3023.19 8301.98,-3040.98"/>
<polygon fill="black" stroke="black" points="8301.35,-3044.42 8311.85,-3042.94 8302.72,-3037.56 8301.35,-3044.42"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge34" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7926,-3586.18C7930.08,-3588.98 7934.08,-3591.91 7938,-3594.96 7976.28,-3624.73 7935.69,-3668.22 7974,-3697.96 8065.75,-3769.18 8206.57,-3763.75 8296.45,-3750.5"/>
<polygon fill="black" stroke="black" points="8296.99,-3753.96 8306.34,-3748.98 8295.92,-3747.04 8296.99,-3753.96"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge35" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7922.41,-3523.62C7927.78,-3519.34 7932.99,-3514.79 7938,-3509.96 8022.98,-3428.12 7887.17,-3326.82 7974,-3246.96 8040.99,-3185.34 8727.09,-3267.76 8792,-3203.96 8873.97,-3123.38 8748.77,-2771.23 8828,-2687.96 8851.76,-2662.99 8885.6,-2651.95 8919.85,-2648.22"/>
<polygon fill="black" stroke="black" points="8920.34,-2651.69 8929.99,-2647.33 8919.72,-2644.72 8920.34,-2651.69"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge30" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7927.72,-3555.45C7986.42,-3555.52 8045.21,-3555.58 8100.11,-3555.64"/>
<polygon fill="black" stroke="black" points="8100.31,-3559.14 8110.32,-3555.65 8100.32,-3552.14 8100.31,-3559.14"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge31" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7927.82,-3584.18C7943.4,-3585.13 7958.83,-3586.06 7974,-3586.96 8298.51,-3606.23 8678.09,-3625.99 8889.5,-3636.74"/>
<polygon fill="black" stroke="black" points="8889.58,-3640.25 8899.75,-3637.26 8889.94,-3633.26 8889.58,-3640.25"/>
</g>
<!-- debug_dump.main -->
<g id="node31" class="node">
<title>debug_dump.main</title>
<g id="a_node31"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6681,-3846.96 6205,-3846.96 6205,-3784.96 6681,-3784.96 6681,-3846.96"/>
<text text-anchor="middle" x="6443" y="-3803.76" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge36" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6578.51,-3784.96C6701.44,-3765.26 6880.06,-3759.77 6988,-3860.96 7067.65,-3935.63 6943.48,-4030.22 7024,-4103.96 7066.4,-4142.79 7207.06,-4146.29 7321.07,-4142.03"/>
<polygon fill="black" stroke="black" points="7321.46,-4145.52 7331.31,-4141.62 7321.18,-4138.52 7321.46,-4145.52"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge37" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6637.76,-3846.99C6754.52,-3875.39 6897.64,-3928.97 6988,-4028.96 7027.91,-4073.12 6976.59,-4121.97 7024,-4157.96 7185.78,-4280.77 7734.98,-4164.12 7938,-4157.96 8007.53,-4155.84 8083.09,-4151.88 8151.84,-4147.62"/>
<polygon fill="black" stroke="black" points="8152.17,-4151.11 8161.93,-4146.99 8151.73,-4144.12 8152.17,-4151.11"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge38" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6681.03,-3811.38C6840.75,-3808.3 7051.56,-3804.23 7216.54,-3801.04"/>
<polygon fill="black" stroke="black" points="7216.91,-3804.54 7226.84,-3800.84 7216.78,-3797.54 7216.91,-3804.54"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge39" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6519.56,-3847.04C6640.67,-3901.16 6875.98,-4024.9 6988,-4209.96 7045.45,-4304.86 6941.56,-4382.73 7024,-4456.96 7089.64,-4516.05 8296.85,-4521.84 8817.37,-4521.57"/>
<polygon fill="black" stroke="black" points="8817.64,-4525.07 8827.64,-4521.56 8817.64,-4518.07 8817.64,-4525.07"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge40" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6681.03,-3826.02C6842.94,-3832.9 7057.37,-3842.01 7223.31,-3849.05"/>
<polygon fill="black" stroke="black" points="7223.53,-3852.57 7233.67,-3849.49 7223.83,-3845.57 7223.53,-3852.57"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge41" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6681.3,-3794.02C6786.28,-3784.59 6911.26,-3773.75 7024,-3764.96 7099.18,-3759.1 7181.38,-3753.32 7255.03,-3748.36"/>
<polygon fill="black" stroke="black" points="7255.62,-3751.83 7265.36,-3747.67 7255.15,-3744.85 7255.62,-3751.83"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge42" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6681.17,-3818.04C6786.4,-3807.1 6904.93,-3776.84 6988,-3702.96 7025.81,-3669.33 6984.29,-3626.31 7024,-3594.96 7025.22,-3593.99 7026.44,-3593.05 7027.68,-3592.11"/>
<polygon fill="black" stroke="black" points="7029.91,-3594.81 7035.93,-3586.1 7025.79,-3589.15 7029.91,-3594.81"/>
</g>
<!-- config_utils.load_config -->
<g id="node33" class="node">
<title>config_utils.load_config</title>
<g id="a_node33"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="9749,-1505.46 9316,-1505.46 9316,-1458.46 9749,-1458.46 9749,-1505.46"/>
<text text-anchor="middle" x="9532.5" y="-1473.46" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge43" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9163.12,-2727.09C9204.37,-2725.84 9248.91,-2716.48 9280,-2687.96 9459.84,-2522.98 9518.91,-1693.74 9529.61,-1515.67"/>
<polygon fill="black" stroke="black" points="9533.11,-1515.77 9530.21,-1505.58 9526.12,-1515.36 9533.11,-1515.77"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge255" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9071.97,-2331.18C9114.26,-2377.69 9224.93,-2506.14 9280,-2633.96 9474.21,-3084.69 9521.5,-3694.51 9529.94,-3831.76"/>
<polygon fill="black" stroke="black" points="9526.45,-3832.08 9530.54,-3841.86 9533.44,-3831.67 9526.45,-3832.08"/>
</g>
<!-- caption_io.write_caption -->
<g id="node35" class="node">
<title>caption_io.write_caption</title>
<g id="a_node35"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8549.5,-3400.96 8216.5,-3400.96 8216.5,-3364.96 8549.5,-3364.96 8549.5,-3400.96"/>
<text text-anchor="middle" x="8383" y="-3376.8" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge54" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8507.55,-3364.85C8602.77,-3343.76 8728.55,-3298.78 8792,-3203.96 8842.46,-3128.54 8813.07,-1660.46 8828,-1570.96 8873.54,-1297.94 9001.47,-985.14 9041.13,-892.28"/>
<polygon fill="black" stroke="black" points="9044.37,-893.59 9045.1,-883.02 9037.94,-890.83 9044.37,-893.59"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge53" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8549.65,-3391.28C8647.49,-3392.26 8758.59,-3385.18 8792,-3350.96 8895.07,-3245.38 8727.12,-2795.64 8828,-2687.96 8851.56,-2662.8 8885.35,-2651.71 8919.6,-2647.99"/>
<polygon fill="black" stroke="black" points="8920.09,-2651.46 8929.75,-2647.09 8919.48,-2644.48 8920.09,-2651.46"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge52" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8549.56,-3375.26C8647.02,-3374.57 8757.72,-3381.73 8792,-3414.96 8844.65,-3466 8793.36,-3678.33 8828,-3742.96 8869.15,-3819.72 8955.8,-3877.85 9008.75,-3907.97"/>
<polygon fill="black" stroke="black" points="9007.15,-3911.08 9017.59,-3912.91 9010.57,-3904.98 9007.15,-3911.08"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge51" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8549.63,-3390.99C8647.29,-3391.84 8758.19,-3384.72 8792,-3350.96 8863.29,-3279.75 8781.26,-2988.22 8828,-2898.96 8867.61,-2823.31 8953.16,-2767.28 9006.61,-2737.98"/>
<polygon fill="black" stroke="black" points="9008.41,-2740.99 9015.55,-2733.16 9005.09,-2734.83 9008.41,-2740.99"/>
</g>
<!-- build_site._load_ontology -->
<g id="node36" class="node">
<title>build_site._load_ontology</title>
<g id="a_node36"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="6599.5,-2313.96 6286.5,-2313.96 6286.5,-2277.96 6599.5,-2277.96 6599.5,-2313.96"/>
<text text-anchor="middle" x="6443" y="-2290.36" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge55" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6599.78,-2298.03C7116.26,-2305.12 8742.51,-2329.29 8792,-2352.96 8919.81,-2414.07 9008.5,-2570.68 9040.17,-2633.89"/>
<polygon fill="black" stroke="black" points="9037.03,-2635.44 9044.59,-2642.87 9043.31,-2632.35 9037.03,-2635.44"/>
</g>
<!-- build_site._compile_locale -->
<g id="node37" class="node">
<title>build_site._compile_locale</title>
<g id="a_node37"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="9221,-506.96 8887,-506.96 8887,-470.96 9221,-470.96 9221,-506.96"/>
<text text-anchor="middle" x="9054" y="-483.08" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node38" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node38"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="8571.5,-509.46 8194.5,-509.46 8194.5,-468.46 8571.5,-468.46 8571.5,-509.46"/>
<text text-anchor="middle" x="8383" y="-481.71" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge56" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M8571.69,-488.96C8667.25,-488.96 8782.75,-488.96 8876.66,-488.96"/>
<polygon fill="black" stroke="black" points="8876.83,-492.46 8886.83,-488.96 8876.83,-485.46 8876.83,-492.46"/>
</g>
<!-- build_site._iter_lots -->
<g id="node39" class="node">
<title>build_site._iter_lots</title>
<g id="a_node39"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="6669,-1609.46 6217,-1609.46 6217,-1552.46 6669,-1552.46 6669,-1609.46"/>
<text text-anchor="middle" x="6443" y="-1570.06" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge57" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6669.04,-1573.97C7063.96,-1564.01 7848.61,-1555.44 7938,-1640.96 8006.49,-1706.48 7908,-1997.93 7974,-2065.96 8006.38,-2099.33 8048.74,-2118.75 8093.89,-2129.16"/>
<polygon fill="black" stroke="black" points="8093.36,-2132.62 8103.88,-2131.31 8094.84,-2125.78 8093.36,-2132.62"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge58" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6552.33,-1552.42C6676.71,-1526.92 6877.75,-1509.31 6988,-1624.96 7071.84,-1712.91 6938.22,-2631.9 7024,-2717.96 7095.74,-2789.93 7850.29,-2699.63 7938,-2750.96 7964.51,-2766.47 7952.32,-2788.2 7974,-2809.96 8082.52,-2918.87 8247.08,-3001.38 8330.15,-3038.82"/>
<polygon fill="black" stroke="black" points="8328.82,-3042.06 8339.38,-3042.95 8331.68,-3035.67 8328.82,-3042.06"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge59" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6669.15,-1574.26C6776.57,-1571.39 6906.92,-1568.37 7024,-1566.96 7125.55,-1565.73 7849.99,-1516.29 7938,-1566.96 7965.61,-1582.85 7946.95,-1612.12 7974,-1628.96 8062.43,-1683.98 8183.48,-1685.14 8270.73,-1676.1"/>
<polygon fill="black" stroke="black" points="8271.38,-1679.55 8280.93,-1674.98 8270.61,-1672.59 8271.38,-1679.55"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node40" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node40"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="7609.5,-1460.46 7352.5,-1460.46 7352.5,-1423.46 7609.5,-1423.46 7609.5,-1460.46"/>
<text text-anchor="middle" x="7481" y="-1435.51" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge60" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6568.29,-1552.4C6685.23,-1526.66 6865.57,-1489.9 7024,-1469.96 7130.38,-1456.57 7251.56,-1449.51 7342.25,-1445.83"/>
<polygon fill="black" stroke="black" points="7342.47,-1449.33 7352.32,-1445.43 7342.19,-1442.33 7342.47,-1449.33"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node41" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node41"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="7648,-1720.96 7314,-1720.96 7314,-1684.96 7648,-1684.96 7648,-1720.96"/>
<text text-anchor="middle" x="7481" y="-1698.17" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge61" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6669.03,-1595.28C6767.16,-1602.52 6883.45,-1612.46 6988,-1624.96 7120,-1640.74 7270.88,-1665.69 7370.36,-1683.11"/>
<polygon fill="black" stroke="black" points="7369.97,-1686.59 7380.43,-1684.88 7371.18,-1679.7 7369.97,-1686.59"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node42" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node42"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="7619,-1514.96 7343,-1514.96 7343,-1478.96 7619,-1478.96 7619,-1514.96"/>
<text text-anchor="middle" x="7481" y="-1492.17" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge62" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M6669.08,-1559.76C6776.49,-1549.9 6906.85,-1538.32 7024,-1528.96 7127.02,-1520.72 7243.24,-1512.59 7332.56,-1506.58"/>
<polygon fill="black" stroke="black" points="7333.02,-1510.05 7342.76,-1505.89 7332.55,-1503.07 7333.02,-1510.05"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node153" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node153"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="8678,-1620.46 8088,-1620.46 8088,-1575.46 8678,-1575.46 8678,-1620.46"/>
<text text-anchor="middle" x="8383" y="-1589.58" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge242" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M7588.73,-1684.95C7688.2,-1668.68 7840.79,-1645.04 7974,-1629.96 8007.49,-1626.16 8042.59,-1622.68 8077.53,-1619.51"/>
<polygon fill="black" stroke="black" points="8078.23,-1622.97 8087.88,-1618.59 8077.6,-1615.99 8078.23,-1622.97"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node154" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node154"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="8559.5,-1420.96 8206.5,-1420.96 8206.5,-1384.96 8559.5,-1384.96 8559.5,-1420.96"/>
<text text-anchor="middle" x="8383" y="-1397.08" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge243" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M7619.19,-1491.62C7709.85,-1487.34 7831.21,-1480.15 7938,-1468.96 8050.8,-1457.13 8178.86,-1437.42 8268.36,-1422.61"/>
<polygon fill="black" stroke="black" points="8268.97,-1426.06 8278.26,-1420.97 8267.82,-1419.15 8268.97,-1426.06"/>
</g>
<!-- build_site._copy_images -->
<g id="node43" class="node">
<title>build_site._copy_images</title>
<g id="a_node43"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="7644.5,-1214.96 7317.5,-1214.96 7317.5,-1178.96 7644.5,-1178.96 7644.5,-1214.96"/>
<text text-anchor="middle" x="7481" y="-1190.8" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node44" class="node">
<title>build_site._copy_static</title>
<g id="a_node44"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="5672.5,-328.96 5416.5,-328.96 5416.5,-292.96 5672.5,-292.96 5672.5,-328.96"/>
<text text-anchor="middle" x="5544.5" y="-305.66" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._convert_prices -->
<g id="node45" class="node">
<title>build_site._convert_prices</title>
<g id="a_node45"><a xlink:title="Add `_display_price` and `_price_class` fields converted to `cur`.">
<polygon fill="none" stroke="black" points="6698.5,-458.46 6187.5,-458.46 6187.5,-409.46 6698.5,-409.46 6698.5,-458.46"/>
<text text-anchor="middle" x="6443" y="-424.33" font-family="Times,serif" font-size="37.66">build_site._convert_prices</text>
</a>
</g>
</g>
<!-- price_utils.canonical_currency -->
<g id="node46" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node46"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="7660.5,-609.96 7301.5,-609.96 7301.5,-573.96 7660.5,-573.96 7660.5,-609.96"/>
<text text-anchor="middle" x="7481" y="-586.26" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- build_site._convert_prices&#45;&gt;price_utils.canonical_currency -->
<g id="edge63" class="edge">
<title>build_site._convert_prices&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M6558.01,-409.43C6677.16,-390.66 6863.72,-381.44 6988,-472.96 7023.36,-498.99 6988.48,-539.14 7024,-564.96 7066.14,-595.59 7185.14,-601.89 7291,-600.76"/>
<polygon fill="black" stroke="black" points="7291.25,-604.26 7301.2,-600.63 7291.16,-597.26 7291.25,-604.26"/>
</g>
<!-- build_site._load_state -->
<g id="node47" class="node">
<title>build_site._load_state</title>
<g id="a_node47"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="5684,-2299.96 5405,-2299.96 5405,-2263.96 5684,-2263.96 5684,-2299.96"/>
<text text-anchor="middle" x="5544.5" y="-2276.08" font-family="Times,serif" font-size="24.22">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge64" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M5684.1,-2284.12C5843.73,-2286.61 6105.81,-2290.71 6276.13,-2293.37"/>
<polygon fill="black" stroke="black" points="6276.14,-2296.87 6286.2,-2293.52 6276.25,-2289.87 6276.14,-2296.87"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge65" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M5659.3,-2299.97C5727.98,-2303.86 5811.67,-2294.97 5862,-2240.96 5955.49,-2140.64 5802.13,-1722.99 5898,-1624.96 6006.04,-1514.48 6197.2,-1526.9 6321.73,-1550.48"/>
<polygon fill="black" stroke="black" points="6321.21,-1553.94 6331.69,-1552.41 6322.55,-1547.07 6321.21,-1553.94"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge66" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M5654.29,-2299.98C5724.09,-2304.78 5810.91,-2296.91 5862,-2240.96 5932.63,-2163.61 5824.91,-1373.98 5898,-1298.96 5994.61,-1199.79 6916.7,-1193.5 7306.93,-1195.35"/>
<polygon fill="black" stroke="black" points="7307.17,-1198.85 7317.19,-1195.4 7307.2,-1191.85 7307.17,-1198.85"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node48" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node48"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8639,-2681.96 8127,-2681.96 8127,-2639.96 8639,-2639.96 8639,-2681.96"/>
<text text-anchor="middle" x="8383" y="-2652.87" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge67" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5620.24,-2299.96C5691.45,-2316.87 5801.75,-2342.41 5898,-2361.96 6396.26,-2463.14 6518.61,-2508.38 7024,-2563.96 7428.14,-2608.4 7532.96,-2566.7 7938,-2601.96 8038.51,-2610.71 8151.2,-2625.74 8237.89,-2638.45"/>
<polygon fill="black" stroke="black" points="8237.39,-2641.91 8247.8,-2639.9 8238.41,-2634.98 8237.39,-2641.91"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node49" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node49"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="8632,-2409.96 8134,-2409.96 8134,-2361.96 8632,-2361.96 8632,-2409.96"/>
<text text-anchor="middle" x="8383" y="-2376.84" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge68" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M5675.81,-2299.96C5742.19,-2308.41 5824.25,-2317.74 5898,-2322.96 6708.88,-2380.28 7671.89,-2387.35 8123.72,-2387.09"/>
<polygon fill="black" stroke="black" points="8123.97,-2390.59 8133.97,-2387.08 8123.96,-2383.59 8123.97,-2390.59"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge209" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8639.31,-2660.96C8734.87,-2660.96 8839.58,-2660.96 8919.74,-2660.96"/>
<polygon fill="black" stroke="black" points="8919.89,-2664.46 8929.89,-2660.96 8919.89,-2657.46 8919.89,-2664.46"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge210" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8632.03,-2387.41C8686.41,-2394.42 8742.48,-2407.09 8792,-2428.96 8899.21,-2476.3 8993.34,-2584.44 9033,-2634.55"/>
<polygon fill="black" stroke="black" points="9030.41,-2636.93 9039.33,-2642.65 9035.93,-2632.61 9030.41,-2636.93"/>
</g>
<!-- build_site._categorise -->
<g id="node50" class="node">
<title>build_site._categorise</title>
<g id="a_node50"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="7907,-362.96 7055,-362.96 7055,-270.96 7907,-270.96 7907,-362.96"/>
<text text-anchor="middle" x="7481" y="-298.14" font-family="Times,serif" font-size="76.02">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge69" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7907.29,-350.51C8042.13,-361.14 8179.93,-372.02 8272.09,-379.29"/>
<polygon fill="black" stroke="black" points="8272.01,-382.79 8282.26,-380.09 8272.56,-375.81 8272.01,-382.79"/>
</g>
<!-- build_site._render_site -->
<g id="node52" class="node">
<title>build_site._render_site</title>
<g id="a_node52"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.">
<polygon fill="none" stroke="black" points="6880.5,-1076.46 6005.5,-1076.46 6005.5,-985.46 6880.5,-985.46 6880.5,-1076.46"/>
<text text-anchor="middle" x="6443" y="-1012.42" font-family="Times,serif" font-size="75.04">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge73" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6880.6,-1015.52C7511.93,-996.03 8622.99,-973.47 8792,-1048.96 9081.98,-1178.48 9147.43,-1282.35 9280,-1570.96 9477.94,-2001.89 9525,-3599.85 9530.83,-3831.81"/>
<polygon fill="black" stroke="black" points="9527.34,-3831.9 9531.08,-3841.81 9534.33,-3831.73 9527.34,-3831.9"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge71" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6880.7,-1004.19C6921.26,-986.17 6958.23,-961.46 6988,-927.96 7064.65,-841.71 6940.27,-489.35 7024,-409.96 7069,-367.29 7957.35,-379.9 8272.38,-385.74"/>
<polygon fill="black" stroke="black" points="8272.38,-389.24 8282.44,-385.93 8272.51,-382.24 8272.38,-389.24"/>
</g>
<!-- build_site.build_page -->
<g id="node53" class="node">
<title>build_site.build_page</title>
<g id="a_node53"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="7935,-1160.46 7027,-1160.46 7027,-1061.46 7935,-1061.46 7935,-1160.46"/>
<text text-anchor="middle" x="7481" y="-1089.93" font-family="Times,serif" font-size="83.16">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge70" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6880.73,-1064.68C6925.57,-1068.14 6971.24,-1071.67 7016.36,-1075.15"/>
<polygon fill="black" stroke="black" points="7016.35,-1078.66 7026.59,-1075.94 7016.89,-1071.68 7016.35,-1078.66"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node54" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node54"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8511.5,-1093.96 8254.5,-1093.96 8254.5,-1057.96 8511.5,-1057.96 8511.5,-1093.96"/>
<text text-anchor="middle" x="8383" y="-1071.79" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge72" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6880.89,-1032.5C7178.83,-1034.69 7582.34,-1039.85 7938,-1051.96 8040.7,-1055.45 8156.65,-1061.8 8244.3,-1067.09"/>
<polygon fill="black" stroke="black" points="8244.11,-1070.59 8254.31,-1067.7 8244.54,-1063.6 8244.11,-1070.59"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge76" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7928.86,-1160.57C7931.99,-1163.59 7935.04,-1166.72 7938,-1169.96 8005.27,-1243.46 7906.22,-1992.93 7974,-2065.96 8005.91,-2100.34 8048.38,-2120.16 8093.85,-2130.62"/>
<polygon fill="black" stroke="black" points="8093.4,-2134.1 8103.91,-2132.78 8094.87,-2127.26 8093.4,-2134.1"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge77" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7928.94,-1160.5C7932.04,-1163.54 7935.06,-1166.69 7938,-1169.96 7994.55,-1232.78 7938.85,-2614.09 7974,-2690.96 8052.07,-2861.66 8250.31,-2988.13 8338.52,-3037.83"/>
<polygon fill="black" stroke="black" points="8337.03,-3041 8347.47,-3042.81 8340.44,-3034.89 8337.03,-3041"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge74" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7928.92,-1160.52C7932.02,-1163.56 7935.05,-1166.7 7938,-1169.96 8031.15,-1272.91 7883.12,-2314 7974,-2418.96 8030.59,-2484.31 8124.02,-2503.93 8207.21,-2506.37"/>
<polygon fill="black" stroke="black" points="8207.23,-2509.87 8217.3,-2506.58 8207.38,-2502.87 8207.23,-2509.87"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge75" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M7754.47,-1061.4C7824.47,-1035.63 7892.72,-996.47 7938,-936.96 7989.36,-869.45 7916.18,-619.02 7974,-556.96 8027,-500.07 8108.14,-479.14 8184.14,-473.93"/>
<polygon fill="black" stroke="black" points="8184.57,-477.41 8194.35,-473.32 8184.15,-470.42 8184.57,-477.41"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge78" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7935.3,-1093.33C8047.91,-1088.95 8160.26,-1084.58 8244.11,-1081.32"/>
<polygon fill="black" stroke="black" points="8244.33,-1084.81 8254.19,-1080.93 8244.06,-1077.82 8244.33,-1084.81"/>
</g>
<!-- build_site.main -->
<g id="node55" class="node">
<title>build_site.main</title>
<g id="a_node55"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5155.5,-447.46 4737.5,-447.46 4737.5,-382.46 5155.5,-382.46 5155.5,-447.46"/>
<text text-anchor="middle" x="4946.5" y="-401.9" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge88" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M4983.43,-382.13C5033.63,-338.63 5129.57,-263.81 5227,-232.96 5484.57,-151.39 6171.82,-188.96 6442,-188.96 6442,-188.96 6442,-188.96 8384,-188.96 8787.69,-188.96 9000.89,-46.3 9280,-337.96 9439.67,-504.8 9513.99,-1276.1 9528.72,-1447.95"/>
<polygon fill="black" stroke="black" points="9525.25,-1448.5 9529.58,-1458.17 9532.23,-1447.91 9525.25,-1448.5"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge79" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M4998.85,-382.42C5053.12,-350.13 5142.39,-302.8 5227,-283.96 5502.47,-222.6 5579.85,-277.7 5862,-283.96 5924.6,-285.35 6939.31,-294.58 6988,-333.96 7037.29,-373.81 6974.08,-432.89 7024,-471.96 7068.81,-507.03 7818.42,-498.87 8184.27,-492.74"/>
<polygon fill="black" stroke="black" points="8184.51,-496.23 8194.44,-492.57 8184.39,-489.24 8184.51,-496.23"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge80" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5048.04,-382.44C5100.79,-366.61 5166.8,-348.72 5227,-337.96 5285.13,-327.56 5350.01,-321.14 5405.82,-317.18"/>
<polygon fill="black" stroke="black" points="5406.4,-320.65 5416.13,-316.47 5405.91,-313.67 5406.4,-320.65"/>
</g>
<!-- build_site.main&#45;&gt;build_site._convert_prices -->
<g id="edge81" class="edge">
<title>build_site.main&#45;&gt;build_site._convert_prices</title>
<path fill="none" stroke="black" d="M5155.79,-426.45C5179.8,-427.46 5203.93,-428.33 5227,-428.96 5554.18,-437.82 5931.09,-437.78 6177.26,-436.37"/>
<polygon fill="black" stroke="black" points="6177.44,-439.86 6187.42,-436.31 6177.4,-432.87 6177.44,-439.86"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge85" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5155.65,-441.5C5179.68,-443.98 5203.86,-446.21 5227,-447.96 5239.2,-448.88 6977.43,-499.79 6988,-505.96 7014.54,-521.43 6997.67,-549.14 7024,-564.96 7131.62,-629.62 7280.52,-624.63 7378.49,-611.41"/>
<polygon fill="black" stroke="black" points="7378.98,-614.87 7388.4,-610.02 7378.01,-607.94 7378.98,-614.87"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge82" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M4953.07,-447.66C4980.7,-610.21 5105.03,-1347.65 5191,-1953.96 5200.02,-2017.6 5181.64,-2195.41 5227,-2240.96 5270.15,-2284.28 5334.92,-2297.87 5394.65,-2299.31"/>
<polygon fill="black" stroke="black" points="5394.92,-2302.82 5404.96,-2299.44 5395.01,-2295.82 5394.92,-2302.82"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge83" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M4987.42,-382.12C5039,-342.02 5133.35,-276.4 5227,-250.96 5385.41,-207.91 6661.75,-275.36 6988,-289.96 7006.56,-290.79 7025.51,-291.67 7044.65,-292.59"/>
<polygon fill="black" stroke="black" points="7044.52,-296.09 7054.67,-293.08 7044.85,-289.1 7044.52,-296.09"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge84" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M4954.13,-447.75C4975,-541.56 5048.85,-811.68 5227,-927.96 5507.04,-1110.73 5904.11,-1107.16 6167.15,-1077.62"/>
<polygon fill="black" stroke="black" points="6167.69,-1081.08 6177.23,-1076.47 6166.9,-1074.12 6167.69,-1081.08"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node56" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node56"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="5862,-160.46 5227,-160.46 5227,-107.46 5862,-107.46 5862,-160.46"/>
<text text-anchor="middle" x="5544.5" y="-123.75" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge86" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M4974.02,-382.23C5019.5,-328.69 5118.04,-223.5 5227,-174.96 5236.2,-170.86 5245.7,-167.13 5255.4,-163.75"/>
<polygon fill="black" stroke="black" points="5256.79,-166.97 5265.16,-160.48 5254.56,-160.34 5256.79,-166.97"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node57" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node57"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="5859.5,-701.46 5229.5,-701.46 5229.5,-648.46 5859.5,-648.46 5859.5,-701.46"/>
<text text-anchor="middle" x="5544.5" y="-664.75" font-family="Times,serif" font-size="40.88">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge87" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5013.65,-447.5C5069.98,-474.9 5153.27,-514.67 5227,-546.96 5307.3,-582.12 5400.47,-619.38 5464.82,-644.58"/>
<polygon fill="black" stroke="black" points="5463.91,-647.98 5474.5,-648.36 5466.46,-641.46 5463.91,-647.98"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node58" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node58"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7629,-555.96 7333,-555.96 7333,-519.96 7629,-519.96 7629,-555.96"/>
<text text-anchor="middle" x="7481" y="-532.66" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge89" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M5155.62,-410.73C5348.19,-407.04 5642.41,-401.97 5898,-399.96 6140.21,-398.05 6790.9,-259.17 6988,-399.96 7028.14,-428.63 6984.92,-474.85 7024,-504.96 7069.55,-540.04 7209.59,-545.99 7322.58,-544.53"/>
<polygon fill="black" stroke="black" points="7322.79,-548.03 7332.73,-544.38 7322.68,-541.03 7322.79,-548.03"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node59" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node59"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="6582,-550.96 6304,-550.96 6304,-514.96 6582,-514.96 6582,-550.96"/>
<text text-anchor="middle" x="6443" y="-528.17" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge90" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M5027.59,-447.57C5082.66,-468.28 5158.01,-493.31 5227,-504.96 5607.02,-569.13 6063.3,-555.98 6293.55,-543.18"/>
<polygon fill="black" stroke="black" points="6293.88,-546.67 6303.66,-542.61 6293.48,-539.68 6293.88,-546.67"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node60" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node60"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="7938,-116.46 7024,-116.46 7024,-41.46 7938,-41.46 7938,-116.46"/>
<text text-anchor="middle" x="7481" y="-63.96" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge91" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M4963.96,-382.29C5000.4,-314.14 5095.18,-158.14 5227,-97.96 5538.16,44.11 6475.72,0.93 7038.56,-40.69"/>
<polygon fill="black" stroke="black" points="7038.66,-44.21 7048.89,-41.46 7039.18,-37.23 7038.66,-44.21"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node61" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node61"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="5783,-386.96 5306,-386.96 5306,-346.96 5783,-346.96 5783,-386.96"/>
<text text-anchor="middle" x="5544.5" y="-359.88" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge92" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5155.53,-398.2C5200.74,-394.56 5249,-390.68 5295.57,-386.92"/>
<polygon fill="black" stroke="black" points="5296.11,-390.39 5305.8,-386.1 5295.55,-383.41 5296.11,-390.39"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node62" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node62"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="6751.5,-3216.96 6134.5,-3216.96 6134.5,-3164.96 6751.5,-3164.96 6751.5,-3216.96"/>
<text text-anchor="middle" x="6443" y="-3180.81" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge93" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M4953.36,-447.62C4982.36,-609.99 5112.23,-1346.67 5191,-1953.96 5201.2,-2032.59 5187.47,-2240.22 5227,-2308.96 5499.42,-2782.57 6140.31,-3071.92 6363.62,-3161.23"/>
<polygon fill="black" stroke="black" points="6362.39,-3164.51 6372.98,-3164.95 6364.98,-3158 6362.39,-3164.51"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node63" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node63"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="6988,-646.46 5898,-646.46 5898,-569.46 6988,-569.46 6988,-646.46"/>
<text text-anchor="middle" x="6443" y="-592.06" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge96" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M5859.68,-651.48C5878.38,-650.08 5897.42,-648.66 5916.65,-647.22"/>
<polygon fill="black" stroke="black" points="5917.02,-650.7 5926.73,-646.47 5916.5,-643.72 5917.02,-650.7"/>
</g>
<!-- price_utils.predict_price -->
<g id="node64" class="node">
<title>price_utils.predict_price</title>
<g id="a_node64"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7686,-710.46 7276,-710.46 7276,-667.46 7686,-667.46 7686,-710.46"/>
<text text-anchor="middle" x="7481" y="-680.81" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge97" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M5859.71,-688.07C5872.64,-688.41 5885.45,-688.71 5898,-688.96 6387.07,-698.66 6961.35,-694.86 7265.55,-691.65"/>
<polygon fill="black" stroke="black" points="7265.85,-695.15 7275.82,-691.54 7265.78,-688.15 7265.85,-695.15"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node65" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node65"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8576.5,-659.46 8189.5,-659.46 8189.5,-620.46 8576.5,-620.46 8576.5,-659.46"/>
<text text-anchor="middle" x="8383" y="-633.06" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge98" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M5859.55,-671.08C6445.52,-663.85 7690.24,-648.49 8178.97,-642.46"/>
<polygon fill="black" stroke="black" points="8179.35,-645.96 8189.31,-642.33 8179.27,-638.96 8179.35,-645.96"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node67" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node67"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="6699.5,-778.96 6186.5,-778.96 6186.5,-740.96 6699.5,-740.96 6699.5,-778.96"/>
<text text-anchor="middle" x="6443" y="-753.23" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge99" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M5705.26,-701.49C5765.52,-710.72 5834.78,-720.39 5898,-726.96 5988.39,-736.35 6087.53,-743.34 6176.13,-748.41"/>
<polygon fill="black" stroke="black" points="6176.15,-751.91 6186.33,-748.98 6176.54,-744.92 6176.15,-751.91"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge213" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7629.07,-533.28C7949.3,-524.08 8689.29,-508.46 8792,-556.96 8920.1,-617.45 9008.62,-774.42 9040.21,-837.81"/>
<polygon fill="black" stroke="black" points="9037.07,-839.37 9044.62,-846.81 9043.36,-836.29 9037.07,-839.37"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge211" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7629.22,-525.95C7746.2,-520.03 7896.78,-521.74 7938,-564.96 7995.94,-625.7 7925.25,-3518.61 7974,-3586.96 8047.31,-3689.74 8199.82,-3720.51 8296.2,-3729.51"/>
<polygon fill="black" stroke="black" points="8295.95,-3733 8306.22,-3730.38 8296.56,-3726.03 8295.95,-3733"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node137" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node137"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8485,-601.96 8281,-601.96 8281,-565.96 8485,-565.96 8485,-601.96"/>
<text text-anchor="middle" x="8383" y="-580.26" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge212" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7629.11,-545.48C7808.7,-554.65 8108.42,-569.97 8270.23,-578.24"/>
<polygon fill="black" stroke="black" points="8270.52,-581.76 8280.68,-578.78 8270.87,-574.77 8270.52,-581.76"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node138" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node138"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="8624,-98.96 8142,-98.96 8142,-58.96 8624,-58.96 8624,-98.96"/>
<text text-anchor="middle" x="8383" y="-71.88" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge214" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M7938.26,-78.96C8004.96,-78.96 8071.48,-78.96 8131.96,-78.96"/>
<polygon fill="black" stroke="black" points="8132,-82.46 8142,-78.96 8132,-75.46 8132,-82.46"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node129" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node129"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7597.5,-3238.96 7364.5,-3238.96 7364.5,-3202.96 7597.5,-3202.96 7597.5,-3238.96"/>
<text text-anchor="middle" x="7481" y="-3216.16" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge215" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6751.68,-3199.87C6953.14,-3205.7 7205.73,-3213.01 7354.34,-3217.32"/>
<polygon fill="black" stroke="black" points="7354.32,-3220.82 7364.41,-3217.61 7354.52,-3213.82 7354.32,-3220.82"/>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge94" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M6988.17,-599.55C7097.13,-597.87 7204.55,-596.21 7291.06,-594.87"/>
<polygon fill="black" stroke="black" points="7291.29,-598.37 7301.24,-594.72 7291.18,-591.37 7291.29,-598.37"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node66" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node66"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="7748.5,-778.96 7213.5,-778.96 7213.5,-728.96 7748.5,-728.96 7748.5,-778.96"/>
<text text-anchor="middle" x="7481" y="-744.27" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge95" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M6699.76,-758.48C6852.49,-757.59 7046.54,-756.47 7202.91,-755.56"/>
<polygon fill="black" stroke="black" points="7203.17,-759.06 7213.15,-755.5 7203.13,-752.06 7203.17,-759.06"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node68" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node68"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7687,-4318.96 7275,-4318.96 7275,-4280.96 7687,-4280.96 7687,-4318.96"/>
<text text-anchor="middle" x="7481" y="-4293.23" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._mark_activity -->
<g id="node69" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node69"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="5039.5,-4690.96 4853.5,-4690.96 4853.5,-4654.96 5039.5,-4654.96 5039.5,-4690.96"/>
<text text-anchor="middle" x="4946.5" y="-4669.26" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node70" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node70"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-4736.96 1260.5,-4736.96 1260.5,-4700.96 1490.5,-4700.96 1490.5,-4736.96"/>
<text text-anchor="middle" x="1375.5" y="-4713.66" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node71" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node71"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5130,-4198.46 4763,-4198.46 4763,-4161.46 5130,-4161.46 5130,-4198.46"/>
<text text-anchor="middle" x="4946.5" y="-4173.51" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node72" class="node">
<title>tg_client._write_md</title>
<g id="a_node72"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5613,-4652.96 5476,-4652.96 5476,-4616.96 5613,-4616.96 5613,-4652.96"/>
<text text-anchor="middle" x="5544.5" y="-4631.71" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node73" class="node">
<title>post_io.write_post</title>
<g id="a_node73"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6609,-4598.96 6277,-4598.96 6277,-4552.96 6609,-4552.96 6609,-4598.96"/>
<text text-anchor="middle" x="6443" y="-4567.52" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge100" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5613.05,-4629.43C5683.99,-4623.7 5798.8,-4614.67 5898,-4607.96 6021.1,-4599.62 6159.96,-4591.47 6266.58,-4585.49"/>
<polygon fill="black" stroke="black" points="6267.01,-4588.97 6276.79,-4584.91 6266.61,-4581.98 6267.01,-4588.97"/>
</g>
<!-- post_io.get_contact -->
<g id="node94" class="node">
<title>post_io.get_contact</title>
<g id="a_node94"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7580.5,-4690.96 7381.5,-4690.96 7381.5,-4654.96 7580.5,-4654.96 7580.5,-4690.96"/>
<text text-anchor="middle" x="7481" y="-4668.17" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge169" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6609.05,-4554.95C6721.07,-4547.88 6869.74,-4552.92 6988,-4607.96 7009.09,-4617.77 7002.91,-4636.14 7024,-4645.96 7133.88,-4697.12 7275.1,-4696.82 7371.07,-4688.26"/>
<polygon fill="black" stroke="black" points="7371.45,-4691.74 7381.08,-4687.32 7370.8,-4684.77 7371.45,-4691.74"/>
</g>
<!-- post_io.get_timestamp -->
<g id="node104" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node104"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7652.5,-4636.96 7309.5,-4636.96 7309.5,-4596.96 7652.5,-4596.96 7652.5,-4636.96"/>
<text text-anchor="middle" x="7481" y="-4609.88" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge170" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6609.02,-4582.49C6797.34,-4589.94 7104.39,-4602.09 7299.1,-4609.8"/>
<polygon fill="black" stroke="black" points="7299.02,-4613.3 7309.16,-4610.2 7299.3,-4606.3 7299.02,-4613.3"/>
</g>
<!-- notes_utils.write_md -->
<g id="node106" class="node">
<title>notes_utils.write_md</title>
<g id="a_node106"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7594,-4578.96 7368,-4578.96 7368,-4542.96 7594,-4542.96 7594,-4578.96"/>
<text text-anchor="middle" x="7481" y="-4556.16" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge171" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6609.02,-4573.57C6817.62,-4570.55 7171.9,-4565.42 7357.81,-4562.73"/>
<polygon fill="black" stroke="black" points="7357.95,-4566.22 7367.9,-4562.58 7357.85,-4559.23 7357.95,-4566.22"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node74" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node74"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7720.5,-3300.46 7241.5,-3300.46 7241.5,-3257.46 7720.5,-3257.46 7720.5,-3300.46"/>
<text text-anchor="middle" x="7481" y="-3270.81" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge101" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7720.66,-3287.83C7812.79,-3286.19 7904.14,-3276.65 7938,-3247.96 7990.96,-3203.07 7921.44,-3141.31 7974,-3095.96 8062.33,-3019.74 8205.06,-3026.86 8296.16,-3041.78"/>
<polygon fill="black" stroke="black" points="8295.74,-3045.26 8306.18,-3043.49 8296.91,-3038.36 8295.74,-3045.26"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node75" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node75"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6576,-3308.96 6310,-3308.96 6310,-3272.96 6576,-3272.96 6576,-3308.96"/>
<text text-anchor="middle" x="6443" y="-3286.17" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge102" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6576.26,-3289.42C6740.9,-3287.52 7025.46,-3284.22 7231.36,-3281.84"/>
<polygon fill="black" stroke="black" points="7231.45,-3285.34 7241.41,-3281.72 7231.37,-3278.34 7231.45,-3285.34"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node76" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node76"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3331,-2956.96 3092,-2956.96 3092,-2920.96 3331,-2920.96 3331,-2956.96"/>
<text text-anchor="middle" x="3211.5" y="-2934.91" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge103" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3331.21,-2939.88C3611.9,-2941.99 4338.49,-2946.96 4945.5,-2946.96 4945.5,-2946.96 4945.5,-2946.96 5545.5,-2946.96 6077.35,-2946.96 7407.78,-2967.37 7938,-3008.96 8062.98,-3018.76 8207,-3036.89 8296.29,-3048.94"/>
<polygon fill="black" stroke="black" points="8295.98,-3052.43 8306.36,-3050.31 8296.92,-3045.5 8295.98,-3052.43"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node77" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node77"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5191,-4104.46 4702,-4104.46 4702,-4061.46 5191,-4061.46 5191,-4104.46"/>
<text text-anchor="middle" x="4946.5" y="-4074.81" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node78" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node78"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5756.5,-4598.46 5332.5,-4598.46 5332.5,-4553.46 5756.5,-4553.46 5756.5,-4598.46"/>
<text text-anchor="middle" x="5544.5" y="-4567.58" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node79" class="node">
<title>tg_client._extract_author</title>
<g id="a_node79"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6806,-4288.96 6080,-4288.96 6080,-4218.96 6806,-4218.96 6806,-4288.96"/>
<text text-anchor="middle" x="6443" y="-4240.16" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge104" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6806.34,-4270.05C6959.32,-4276.84 7132.26,-4284.52 7264.61,-4290.39"/>
<polygon fill="black" stroke="black" points="7264.73,-4293.9 7274.87,-4290.85 7265.04,-4286.91 7264.73,-4293.9"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node80" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node80"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5683.5,-4496.96 5405.5,-4496.96 5405.5,-4460.96 5683.5,-4460.96 5683.5,-4496.96"/>
<text text-anchor="middle" x="5544.5" y="-4474.17" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node81" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node81"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8531,-3140.96 8235,-3140.96 8235,-3104.96 8531,-3104.96 8531,-3140.96"/>
<text text-anchor="middle" x="8383" y="-3117.26" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node82" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node82"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5189,-3716.46 4704,-3716.46 4704,-3667.46 5189,-3667.46 5189,-3716.46"/>
<text text-anchor="middle" x="4946.5" y="-3682.33" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge105" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4981.61,-3716.53C5032.3,-3751.58 5131.81,-3814.78 5227,-3842.96 5498.49,-3923.3 5580.28,-3865.77 5862,-3893.96 6112.76,-3919.05 6796.72,-3864.88 6988,-4028.96 7033.18,-4067.71 6976.59,-4121.97 7024,-4157.96 7104.89,-4219.36 7848.46,-4205.88 7938,-4157.96 7963.43,-4144.35 7949.46,-4119.12 7974,-4103.96 8071.55,-4043.67 8207.32,-4038.96 8294.94,-4043.82"/>
<polygon fill="black" stroke="black" points="8294.93,-4047.32 8305.12,-4044.44 8295.35,-4040.34 8294.93,-4047.32"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge107" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4951.63,-3667.41C4976.19,-3520.95 5104.94,-2747.18 5191,-2112.96 5200.24,-2044.89 5176.73,-1852.77 5227,-1805.96 5377.51,-1665.78 6798.7,-1686.32 7303.32,-1698.19"/>
<polygon fill="black" stroke="black" points="7303.53,-1701.69 7313.61,-1698.43 7303.69,-1694.7 7303.53,-1701.69"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node83" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node83"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5677.5,-3535.96 5411.5,-3535.96 5411.5,-3499.96 5677.5,-3499.96 5677.5,-3535.96"/>
<text text-anchor="middle" x="5544.5" y="-3513.79" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge106" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4984.95,-3667.2C5036.89,-3634.25 5134.82,-3577 5227,-3549.96 5282.63,-3533.63 5345.85,-3525.32 5401.08,-3521.19"/>
<polygon fill="black" stroke="black" points="5401.57,-3524.66 5411.3,-3520.46 5401.08,-3517.68 5401.57,-3524.66"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node84" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node84"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6568.5,-3476.96 6317.5,-3476.96 6317.5,-3440.96 6568.5,-3440.96 6568.5,-3476.96"/>
<text text-anchor="middle" x="6443" y="-3454.16" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge108" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5677.78,-3509.25C5846.72,-3498.13 6137.47,-3479 6307.48,-3467.81"/>
<polygon fill="black" stroke="black" points="6307.74,-3471.3 6317.49,-3467.15 6307.28,-3464.32 6307.74,-3471.3"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node85" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node85"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7662.5,-3413.96 7299.5,-3413.96 7299.5,-3377.96 7662.5,-3377.96 7662.5,-3413.96"/>
<text text-anchor="middle" x="7481" y="-3390.26" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge111" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6568.73,-3451.11C6686.18,-3443.75 6867.03,-3432.48 7024,-3422.96 7111.02,-3417.68 7207.38,-3411.96 7289.02,-3407.14"/>
<polygon fill="black" stroke="black" points="7289.63,-3410.61 7299.41,-3406.53 7289.22,-3403.63 7289.63,-3410.61"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge109" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7662.73,-3383.26C7772.84,-3379.83 7899.52,-3385.03 7938,-3422.96 8015.6,-3499.45 7907.56,-3825.6 7974,-3911.96 8050.06,-4010.82 8199.67,-4040.73 8295.05,-4049.56"/>
<polygon fill="black" stroke="black" points="8294.99,-4053.07 8305.26,-4050.44 8295.6,-4046.09 8294.99,-4053.07"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge110" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7662.56,-3407.1C7772,-3409.73 7898,-3404.06 7938,-3367.96 8010.9,-3302.16 7901.26,-3215.93 7974,-3149.96 8010.25,-3117.08 8125.82,-3111.78 8224.75,-3113.9"/>
<polygon fill="black" stroke="black" points="8224.79,-3117.4 8234.88,-3114.14 8224.96,-3110.4 8224.79,-3117.4"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node86" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node86"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2204,-3428.46 1768,-3428.46 1768,-3387.46 2204,-3387.46 2204,-3428.46"/>
<text text-anchor="middle" x="1986" y="-3400.71" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge112" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2204.02,-3407.48C3093.2,-3405.54 6450.36,-3398.21 7289.16,-3396.37"/>
<polygon fill="black" stroke="black" points="7289.23,-3399.87 7299.22,-3396.35 7289.21,-3392.87 7289.23,-3399.87"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node87" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node87"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7653,-3359.46 7309,-3359.46 7309,-3318.46 7653,-3318.46 7653,-3359.46"/>
<text text-anchor="middle" x="7481" y="-3331.71" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge113" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7653.24,-3349C7764.74,-3351.64 7896.86,-3346.11 7938,-3308.96 8009.25,-3244.61 7903.39,-3161.01 7974,-3095.96 8060.56,-3016.21 8205.78,-3024.97 8297.6,-3041.11"/>
<polygon fill="black" stroke="black" points="8297.23,-3044.6 8307.7,-3042.95 8298.49,-3037.71 8297.23,-3044.6"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge114" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7653.02,-3319.88C7742.23,-3317.24 7850.65,-3325.9 7938,-3368.96 7959.75,-3379.68 7952.39,-3398.96 7974,-3409.96 8493.5,-3674.21 8770.17,-3246.48 9280,-3528.96 9408.2,-3599.99 9491.27,-3766.61 9520.13,-3832.47"/>
<polygon fill="black" stroke="black" points="9516.98,-3833.99 9524.15,-3841.79 9523.41,-3831.22 9516.98,-3833.99"/>
</g>
<!-- tg_client._load_progress -->
<g id="node88" class="node">
<title>tg_client._load_progress</title>
<g id="a_node88"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2151,-4063.96 1821,-4063.96 1821,-4027.96 2151,-4027.96 2151,-4063.96"/>
<text text-anchor="middle" x="1986" y="-4039.8" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge115" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2042.54,-4064.06C2322.86,-4154.43 3611.84,-4558.01 4702,-4699.96 5072.96,-4748.26 5169.4,-4718.96 5543.5,-4718.96 5543.5,-4718.96 5543.5,-4718.96 8384,-4718.96 8789.08,-4718.96 8971.02,-4813.92 9280,-4551.96 9493.06,-4371.32 9525.63,-3994.87 9530.61,-3888.5"/>
<polygon fill="black" stroke="black" points="9534.11,-3888.38 9531.04,-3878.24 9527.12,-3888.09 9534.11,-3888.38"/>
</g>
<!-- tg_client._save_progress -->
<g id="node89" class="node">
<title>tg_client._save_progress</title>
<g id="a_node89"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2721,-3330.96 2492,-3330.96 2492,-3294.96 2721,-3294.96 2721,-3330.96"/>
<text text-anchor="middle" x="2606.5" y="-3308.79" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node90" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node90"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3345,-3166.96 3078,-3166.96 3078,-3130.96 3345,-3130.96 3345,-3166.96"/>
<text text-anchor="middle" x="3211.5" y="-3143.08" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge116" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3345.12,-3147.41C3635.28,-3144.17 4348.26,-3136.96 4945.5,-3136.96 4945.5,-3136.96 4945.5,-3136.96 6444,-3136.96 6610.02,-3136.96 7776.3,-3150.58 7938,-3112.96 7955.23,-3108.95 7956.92,-3100.56 7974,-3095.96 8082.39,-3066.73 8212.31,-3060.24 8295.95,-3059.56"/>
<polygon fill="black" stroke="black" points="8296.19,-3063.06 8306.17,-3059.51 8296.15,-3056.06 8296.19,-3063.06"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node91" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node91"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2116.5,-3124.96 1855.5,-3124.96 1855.5,-3088.96 2116.5,-3088.96 2116.5,-3124.96"/>
<text text-anchor="middle" x="1986" y="-3101.08" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge117" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2116.92,-3105.55C2340.39,-3103.25 2811.95,-3098.96 3210.5,-3098.96 3210.5,-3098.96 3210.5,-3098.96 6444,-3098.96 7108.09,-3098.96 7274.1,-3090.76 7938,-3074.96 8062.54,-3071.99 8206.68,-3067.2 8296.11,-3064.06"/>
<polygon fill="black" stroke="black" points="8296.33,-3067.55 8306.2,-3063.7 8296.08,-3060.56 8296.33,-3067.55"/>
</g>
<!-- tg_client._save_message -->
<g id="node92" class="node">
<title>tg_client._save_message</title>
<g id="a_node92"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4666,-4214.46 3450,-4214.46 3450,-4099.46 4666,-4099.46 4666,-4214.46"/>
<text text-anchor="middle" x="4058" y="-4132.84" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge129" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4491.09,-4099.39C4558.69,-4071.84 4620.96,-4032.08 4666,-3974.96 4710.37,-3918.68 4684.75,-3400.52 4702,-3330.96 4836.63,-2787.97 4758.62,-2492.87 5227,-2186.96 5290.06,-2145.77 7862.75,-2145.04 7938,-2141.96 7988.39,-2139.89 8041.96,-2137 8093.81,-2133.83"/>
<polygon fill="black" stroke="black" points="8094.05,-2137.32 8103.81,-2133.21 8093.62,-2130.33 8094.05,-2137.32"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge130" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4489.4,-4099.43C4557.49,-4071.91 4620.37,-4032.15 4666,-3974.96 4740.17,-3881.98 4623.54,-3530.35 4702,-3440.96 4858.97,-3262.12 4991.79,-3372.02 5227,-3335.96 5523.47,-3290.5 5598.82,-3285.2 5898,-3263.96 6018.88,-3255.38 6875.49,-3270.99 6988,-3225.96 7007.87,-3218 7004.17,-3202.03 7024,-3193.96 7212.31,-3117.25 7761.45,-3251.84 7938,-3150.96 7963.37,-3136.46 7948.92,-3110.94 7974,-3095.96 8072.49,-3037.13 8208.92,-3038.56 8296.33,-3047.65"/>
<polygon fill="black" stroke="black" points="8296.15,-3051.15 8306.47,-3048.77 8296.92,-3044.2 8296.15,-3051.15"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge131" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4666.26,-4147.82C5097.26,-4140.31 5637.57,-4128.55 5862,-4113.96 6093.48,-4098.9 7727.99,-3991.49 7938,-3892.96 7958.2,-3883.48 7953.86,-3867.57 7974,-3857.96 8139.23,-3779.1 8654.47,-3880.8 8792,-3759.96 8840.91,-3716.98 8782.44,-3664.47 8828,-3617.96 8852.52,-3592.93 8886.14,-3577.74 8919.92,-3568.59"/>
<polygon fill="black" stroke="black" points="8921.09,-3571.9 8929.92,-3566.05 8919.37,-3565.12 8921.09,-3571.9"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge118" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4114.12,-4214.78C4218,-4319.69 4454.64,-4539.87 4702,-4640.96 4746.31,-4659.06 4798.58,-4667.44 4843.31,-4671.15"/>
<polygon fill="black" stroke="black" points="4843.09,-4674.64 4853.33,-4671.91 4843.62,-4667.66 4843.09,-4674.64"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge119" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4666.22,-4172.71C4696.34,-4173.49 4725.28,-4174.24 4752.37,-4174.95"/>
<polygon fill="black" stroke="black" points="4752.57,-4178.45 4762.66,-4175.21 4752.75,-4171.45 4752.57,-4178.45"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge120" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4140.96,-4214.79C4259.14,-4295.28 4486.88,-4439.76 4702,-4515.96 4925.22,-4595.02 4992.18,-4576.27 5227,-4606.96 5308.12,-4617.56 5401.48,-4625.27 5465.67,-4629.89"/>
<polygon fill="black" stroke="black" points="5465.49,-4633.38 5475.72,-4630.6 5465.99,-4626.4 5465.49,-4633.38"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge121" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4483.02,-4099.37C4552.94,-4071.95 4618.11,-4032.25 4666,-3974.96 4756.94,-3866.17 4611.97,-3767.5 4702,-3657.96 4905.3,-3410.6 5921.45,-3323.15 6299.78,-3298.87"/>
<polygon fill="black" stroke="black" points="6300.2,-3302.35 6309.96,-3298.22 6299.76,-3295.36 6300.2,-3302.35"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge122" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4666.22,-4106.27C4674.85,-4105.55 4683.37,-4104.84 4691.79,-4104.14"/>
<polygon fill="black" stroke="black" points="4692.32,-4107.6 4702,-4103.28 4691.74,-4100.63 4692.32,-4107.6"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge123" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4152.84,-4214.49C4274.7,-4286.33 4496.23,-4407.28 4702,-4468.96 4927.43,-4536.53 4993.5,-4508.6 5227,-4537.96 5264.43,-4542.66 5304.36,-4547.56 5342.81,-4552.2"/>
<polygon fill="black" stroke="black" points="5342.73,-4555.72 5353.08,-4553.44 5343.57,-4548.77 5342.73,-4555.72"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge124" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4666.02,-4204.99C4678.12,-4205.68 4690.12,-4206.33 4702,-4206.96 5173.34,-4231.63 5717.22,-4243.69 6069.68,-4249.35"/>
<polygon fill="black" stroke="black" points="6069.74,-4252.85 6079.79,-4249.51 6069.85,-4245.85 6069.74,-4252.85"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge125" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4433.9,-4099.43C4517.57,-4072.49 4600.72,-4032.96 4666,-3974.96 4696.06,-3948.25 4677.79,-3924.06 4702,-3891.96 4756.45,-3819.76 4842.11,-3757.41 4895.97,-3722.3"/>
<polygon fill="black" stroke="black" points="4898.15,-3725.05 4904.65,-3716.69 4894.35,-3719.17 4898.15,-3725.05"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge126" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3908.09,-4214.56C3927.06,-4225.08 3977.04,-4232.46 4058,-4232.46 4128.21,-4232.46 4175.12,-4226.91 4198.71,-4218.58"/>
<polygon fill="black" stroke="black" points="4200.15,-4221.77 4207.91,-4214.56 4197.35,-4215.35 4200.15,-4221.77"/>
</g>
<!-- tg_client._save_media -->
<g id="node93" class="node">
<title>tg_client._save_media</title>
<g id="a_node93"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5187.5,-4459.96 4705.5,-4459.96 4705.5,-4405.96 5187.5,-4405.96 5187.5,-4459.96"/>
<text text-anchor="middle" x="4946.5" y="-4422.36" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge127" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4243.76,-4214.48C4428.04,-4271.85 4703.94,-4357.75 4848.79,-4402.85"/>
<polygon fill="black" stroke="black" points="4847.97,-4406.26 4858.56,-4405.89 4850.05,-4399.57 4847.97,-4406.26"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge128" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4126.39,-4214.77C4237.94,-4307.01 4471.59,-4485.91 4702,-4572.96 4907.56,-4650.62 4980.01,-4584.55 5191,-4645.96 5207.81,-4650.85 5209.88,-4658.28 5227,-4661.96 5437.3,-4707.12 6949.55,-4682.79 7371.14,-4675.05"/>
<polygon fill="black" stroke="black" points="7371.26,-4678.55 7381.19,-4674.86 7371.13,-4671.55 7371.26,-4678.55"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge132" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5187.74,-4436.9C5886.49,-4448.1 7872.9,-4478.01 7938,-4456.96 7956.78,-4450.88 7955.82,-4438.64 7974,-4430.96 8314.02,-4287.25 8526.82,-4543.76 8792,-4286.96 8848.1,-4232.62 8787.46,-4181.71 8828,-4114.96 8872.73,-4041.31 8957.89,-3984.05 9009.64,-3954.08"/>
<polygon fill="black" stroke="black" points="9011.64,-3956.97 9018.59,-3948.98 9008.17,-3950.89 9011.64,-3956.97"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge133" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5029.61,-4405.86C5084.74,-4389.08 5159.4,-4369.04 5227,-4359.96 5301.64,-4349.92 7880.97,-4377.14 7938,-4327.96 8014.36,-4262.11 7901.46,-4174 7974,-4103.96 8058.39,-4022.47 8202.57,-4024.59 8295,-4036.55"/>
<polygon fill="black" stroke="black" points="8294.79,-4040.05 8305.17,-4037.93 8295.73,-4033.12 8294.79,-4040.05"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge134" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5187.77,-4451.5C5257.89,-4456.91 5332.45,-4462.67 5395.1,-4467.5"/>
<polygon fill="black" stroke="black" points="5395.21,-4471.02 5405.45,-4468.3 5395.75,-4464.04 5395.21,-4471.02"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node95" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node95"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6560.5,-4534.96 6325.5,-4534.96 6325.5,-4498.96 6560.5,-4498.96 6560.5,-4534.96"/>
<text text-anchor="middle" x="6443" y="-4512.91" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge135" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5029.29,-4460.02C5084.46,-4476.85 5159.26,-4496.95 5227,-4505.96 5621.11,-4558.39 6093.5,-4539.58 6315.27,-4526.01"/>
<polygon fill="black" stroke="black" points="6315.55,-4529.5 6325.31,-4525.39 6315.12,-4522.51 6315.55,-4529.5"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge184" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6560.58,-4521.91C6758.09,-4530.3 7156.61,-4547.22 7357.84,-4555.77"/>
<polygon fill="black" stroke="black" points="7357.72,-4559.27 7367.86,-4556.19 7358.02,-4552.27 7357.72,-4559.27"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node96" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node96"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3414,-3319.96 3009,-3319.96 3009,-3277.96 3414,-3277.96 3414,-3319.96"/>
<text text-anchor="middle" x="3211.5" y="-3290.87" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge136" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3213.32,-3320.21C3218.05,-3412.63 3249.34,-3783.43 3450,-3974.96 3508.19,-4030.5 3582.67,-4069.16 3659.37,-4096.06"/>
<polygon fill="black" stroke="black" points="3658.63,-4099.5 3669.22,-4099.44 3660.9,-4092.88 3658.63,-4099.5"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node97" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node97"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7766,-2654.96 7196,-2654.96 7196,-2610.96 7766,-2610.96 7766,-2654.96"/>
<text text-anchor="middle" x="7481" y="-2624.64" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge139" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7766.16,-2646.79C7830.64,-2635.83 7893.22,-2611.56 7938,-2563.96 7999.75,-2498.3 7911.09,-2224.51 7974,-2159.96 8006.45,-2126.66 8048.85,-2107.27 8094.02,-2096.87"/>
<polygon fill="black" stroke="black" points="8094.96,-2100.25 8104,-2094.73 8093.49,-2093.41 8094.96,-2100.25"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge137" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7766.12,-2622.44C7842.74,-2625.96 7911.75,-2637.19 7938,-2663.96 7996.1,-2723.21 7918.03,-3348.69 7974,-3409.96 8221.58,-3680.96 8529.29,-3267.59 8792,-3523.96 8862.6,-3592.85 8779.09,-3657.3 8828,-3742.96 8871.31,-3818.8 8957.63,-3877.43 9009.86,-3907.85"/>
<polygon fill="black" stroke="black" points="9008.15,-3910.9 9018.56,-3912.84 9011.63,-3904.83 9008.15,-3910.9"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge138" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7766.17,-2627.06C7824.32,-2632.79 7884.17,-2643.96 7938,-2663.96 7956.75,-2670.92 7955.81,-2682.64 7974,-2690.96 8310.52,-2844.88 8752.98,-2900.28 8950.32,-2918.23"/>
<polygon fill="black" stroke="black" points="8950.11,-2921.73 8960.39,-2919.14 8950.74,-2914.76 8950.11,-2921.73"/>
</g>
<!-- tg_client._download_messages -->
<g id="node98" class="node">
<title>tg_client._download_messages</title>
<g id="a_node98"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2961.5,-3276.46 2251.5,-3276.46 2251.5,-3219.46 2961.5,-3219.46 2961.5,-3276.46"/>
<text text-anchor="middle" x="2606.5" y="-3236.62" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge140" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2944.7,-3276.48C2962.94,-3278.02 2981.01,-3279.55 2998.63,-3281.04"/>
<polygon fill="black" stroke="black" points="2998.69,-3284.55 3008.95,-3281.91 2999.28,-3277.58 2998.69,-3284.55"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node99" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node99"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2777.5,-4782.96 2435.5,-4782.96 2435.5,-4746.96 2777.5,-4746.96 2777.5,-4782.96"/>
<text text-anchor="middle" x="2606.5" y="-4759.26" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node100" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node100"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2973,-2948.46 2240,-2948.46 2240,-2883.46 2973,-2883.46 2973,-2948.46"/>
<text text-anchor="middle" x="2606.5" y="-2902.9" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge144" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2627.38,-2883.17C2680.16,-2798.35 2831.99,-2568.59 3009,-2428.96 3416.01,-2107.9 3538.61,-1916.96 4057,-1916.96 4057,-1916.96 4057,-1916.96 6444,-1916.96 6527,-1916.96 7872.39,-1881.12 7938,-1931.96 7986.75,-1969.73 7927.29,-2025.69 7974,-2065.96 8008.01,-2095.28 8049.99,-2113.02 8093.95,-2123.1"/>
<polygon fill="black" stroke="black" points="8093.44,-2126.57 8103.95,-2125.26 8094.92,-2119.73 8093.44,-2126.57"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge145" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2834.55,-2948.48C2891.4,-2955.45 2952.33,-2961.93 3009,-2965.96 3473.68,-2999.01 3591.15,-2984.96 4057,-2984.96 4057,-2984.96 4057,-2984.96 5545.5,-2984.96 6631.84,-2984.96 7951.36,-3041.35 8296.25,-3056.98"/>
<polygon fill="black" stroke="black" points="8296.26,-3060.49 8306.41,-3057.44 8296.58,-3053.49 8296.26,-3060.49"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge147" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2612.8,-2883.25C2658.01,-2616.43 3003.49,-806.96 4057,-806.96 4057,-806.96 4057,-806.96 6444,-806.96 6574.45,-806.96 8662.76,-774.22 8792,-791.96 8862.94,-801.69 8941.78,-825.65 8994.05,-843.48"/>
<polygon fill="black" stroke="black" points="8993.22,-846.9 9003.82,-846.85 8995.5,-840.28 8993.22,-846.9"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge146" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2663.34,-2883.45C2852.32,-2776.58 3487.88,-2442.96 4057,-2442.96 4057,-2442.96 4057,-2442.96 7482,-2442.96 7627.57,-2442.96 8654.42,-2414.38 8792,-2461.96 8894.36,-2497.36 8988.61,-2589.9 9030.36,-2635.21"/>
<polygon fill="black" stroke="black" points="9027.98,-2637.8 9037.3,-2642.84 9033.16,-2633.09 9027.98,-2637.8"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge141" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2973.04,-2929.9C3011.6,-2931.37 3048.68,-2932.78 3081.62,-2934.04"/>
<polygon fill="black" stroke="black" points="3081.58,-2937.54 3091.71,-2934.43 3081.85,-2930.55 3081.58,-2937.54"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge142" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2656.99,-2948.61C2732.51,-2998.3 2881.23,-3095.61 3009,-3175.96 3062.98,-3209.9 3125.77,-3248.02 3166.73,-3272.7"/>
<polygon fill="black" stroke="black" points="3165.01,-3275.75 3175.38,-3277.91 3168.62,-3269.75 3165.01,-3275.75"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge143" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2973.1,-2906.95C3266.16,-2900.5 3687.97,-2892.96 4057,-2892.96 4057,-2892.96 4057,-2892.96 5545.5,-2892.96 6210.45,-2892.96 6363.13,-2737.46 7024,-2663.96 7076.25,-2658.15 7131.99,-2653.27 7185.93,-2649.22"/>
<polygon fill="black" stroke="black" points="7186.26,-2652.71 7195.97,-2648.48 7185.74,-2645.73 7186.26,-2652.71"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node101" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node101"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-3251.96 1019,-3251.96 1019,-3177.96 1732,-3177.96 1732,-3251.96"/>
<text text-anchor="middle" x="1375.5" y="-3200.13" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge154" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1508.05,-3177.88C1575.94,-3157.29 1659.51,-3129.65 1732,-3098.96 1748.66,-3091.9 1750.49,-3084.51 1768,-3079.96 2128.36,-2986.35 2233.18,-3060.96 2605.5,-3060.96 2605.5,-3060.96 2605.5,-3060.96 6444,-3060.96 7159.86,-3060.96 8024.47,-3060.96 8296.09,-3060.96"/>
<polygon fill="black" stroke="black" points="8296.27,-3064.46 8306.27,-3060.96 8296.27,-3057.46 8296.27,-3064.46"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge148" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1732.02,-3212.44C1887.91,-3211.45 2073.03,-3210.44 2240,-3209.96 2565.78,-3209.01 2647.28,-3203.95 2973,-3209.96 4273.66,-3233.96 4597.52,-3285.32 5898,-3317.96 6405.3,-3330.69 7004.31,-3335.98 7298.45,-3337.94"/>
<polygon fill="black" stroke="black" points="7298.77,-3341.44 7308.79,-3338.01 7298.81,-3334.44 7298.77,-3341.44"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge149" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1403.63,-3252.01C1507.24,-3393.51 1876.64,-3897.97 1965.62,-4019.49"/>
<polygon fill="black" stroke="black" points="1963.03,-4021.88 1971.76,-4027.88 1968.68,-4017.74 1963.03,-4021.88"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge150" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1732.26,-3244.15C1888.08,-3256.85 2073.1,-3271.8 2240,-3284.96 2320.43,-3291.3 2410.82,-3298.22 2481.59,-3303.6"/>
<polygon fill="black" stroke="black" points="2481.65,-3307.12 2491.89,-3304.38 2482.18,-3300.14 2481.65,-3307.12"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge151" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1732.22,-3179.24C1744.29,-3178.4 1756.24,-3177.64 1768,-3176.96 2243.33,-3149.32 2808.08,-3147.29 3067.39,-3148.07"/>
<polygon fill="black" stroke="black" points="3067.61,-3151.57 3077.62,-3148.11 3067.63,-3144.57 3067.61,-3151.57"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge152" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1557.95,-3177.96C1623.96,-3164.96 1699.24,-3150.69 1768,-3138.96 1793.21,-3134.65 1820.14,-3130.4 1846.13,-3126.48"/>
<polygon fill="black" stroke="black" points="1846.68,-3129.94 1856.05,-3124.99 1845.64,-3123.01 1846.68,-3129.94"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge153" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1732.39,-3224.51C1892.17,-3228.8 2080.49,-3233.86 2241.25,-3238.18"/>
<polygon fill="black" stroke="black" points="2241.22,-3241.68 2251.31,-3238.45 2241.41,-3234.68 2241.22,-3241.68"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node102" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node102"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7797.5,-2956.46 7164.5,-2956.46 7164.5,-2895.46 7797.5,-2895.46 7797.5,-2956.46"/>
<text text-anchor="middle" x="7481" y="-2913.7" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge157" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7617.91,-2956.48C7720.76,-2970.8 7857.6,-2969.47 7938,-2885.96 7994.02,-2827.77 7918.78,-2218.9 7974,-2159.96 8006.02,-2125.78 8048.46,-2106.05 8093.88,-2095.6"/>
<polygon fill="black" stroke="black" points="8094.88,-2098.96 8103.92,-2093.44 8093.41,-2092.12 8094.88,-2098.96"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge158" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7797.73,-2952.9C7844.85,-2958.14 7892.77,-2964.16 7938,-2970.96 8063.57,-2989.83 8207.35,-3020.69 8296.42,-3040.92"/>
<polygon fill="black" stroke="black" points="8295.68,-3044.34 8306.21,-3043.15 8297.24,-3037.51 8295.68,-3044.34"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge155" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7587.56,-2956.5C7695.37,-2993.71 7857.93,-3067.77 7938,-3193.96 7984.99,-3268.01 7913.66,-3523.32 7974,-3586.96 8226.79,-3853.54 8464.75,-3538.99 8792,-3705.96 8812.44,-3716.38 8811.17,-3727.36 8828,-3742.96 8894.46,-3804.57 8977.29,-3871.41 9021.59,-3906.41"/>
<polygon fill="black" stroke="black" points="9019.64,-3909.32 9029.66,-3912.77 9023.97,-3903.83 9019.64,-3909.32"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge156" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7797.55,-2925.96C8155.73,-2925.96 8720.05,-2925.96 8950.17,-2925.96"/>
<polygon fill="black" stroke="black" points="8950.21,-2929.46 8960.21,-2925.96 8950.21,-2922.46 8950.21,-2929.46"/>
</g>
<!-- tg_client.main -->
<g id="node103" class="node">
<title>tg_client.main</title>
<g id="a_node103"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-3424.96 366.5,-3424.96 366.5,-3332.96 934.5,-3332.96 934.5,-3424.96"/>
<text text-anchor="middle" x="650.5" y="-3359.92" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge159" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M670.77,-3425.01C770.6,-3655.52 1252.71,-4672.96 1985,-4672.96 1985,-4672.96 1985,-4672.96 3212.5,-4672.96 3831.85,-4672.96 4575.7,-4672.96 4843.35,-4672.96"/>
<polygon fill="black" stroke="black" points="4843.44,-4676.46 4853.44,-4672.96 4843.44,-4669.46 4843.44,-4676.46"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge160" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M657.48,-3425.1C685.97,-3637.44 815.13,-4517.55 1019,-4686.96 1088.9,-4745.04 1195.39,-4747.08 1273.61,-4738.22"/>
<polygon fill="black" stroke="black" points="1274.46,-4741.64 1283.96,-4736.96 1273.61,-4734.69 1274.46,-4741.64"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge161" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M934.71,-3385.12C1180.04,-3390.45 1530.35,-3398.07 1757.73,-3403.01"/>
<polygon fill="black" stroke="black" points="1757.71,-3406.51 1767.78,-3403.23 1757.86,-3399.52 1757.71,-3406.51"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge162" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M934.75,-3379.66C1464.36,-3380.06 2585.98,-3376.39 2973,-3339.96 3014.48,-3336.05 3059.61,-3328.98 3099.29,-3321.8"/>
<polygon fill="black" stroke="black" points="3100.05,-3325.22 3109.26,-3319.98 3098.79,-3318.34 3100.05,-3325.22"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge163" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M656.59,-3425.31C681.7,-3644.8 800.12,-4576.05 1019,-4745.96 1073.69,-4788.41 2021.15,-4775.9 2425.25,-4768.57"/>
<polygon fill="black" stroke="black" points="2425.35,-4772.07 2435.28,-4768.39 2425.22,-4765.07 2425.35,-4772.07"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge164" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M715.44,-3332.89C786.16,-3284.28 905.22,-3209.24 1019,-3168.96 1418.28,-3027.58 1902.14,-2964.9 2229.73,-2937.31"/>
<polygon fill="black" stroke="black" points="2230.18,-2940.78 2239.86,-2936.46 2229.6,-2933.81 2230.18,-2940.78"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge165" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M854.34,-3332.95C963.6,-3308.16 1096.97,-3277.91 1201.32,-3254.24"/>
<polygon fill="black" stroke="black" points="1202.34,-3257.6 1211.32,-3251.97 1200.79,-3250.77 1202.34,-3257.6"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge166" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M681.02,-3332.94C736.43,-3250.69 864.49,-3079.29 1019,-2995.96 1403.31,-2788.68 1548.36,-2816.96 1985,-2816.96 1985,-2816.96 1985,-2816.96 5545.5,-2816.96 5849.16,-2816.96 6686.67,-2871.17 7154.02,-2903.13"/>
<polygon fill="black" stroke="black" points="7154.08,-2906.64 7164.3,-2903.83 7154.56,-2899.66 7154.08,-2906.64"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node107" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node107"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7626,-2708.96 7336,-2708.96 7336,-2672.96 7626,-2672.96 7626,-2708.96"/>
<text text-anchor="middle" x="7481" y="-2686.79" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge172" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7580.72,-2672.91C7678.88,-2660.37 7830,-2656.17 7938,-2722.96 7964.77,-2739.51 7952.46,-2761 7974,-2783.96 8084.86,-2902.07 8254.72,-2996.9 8335.81,-3038.35"/>
<polygon fill="black" stroke="black" points="8334.28,-3041.5 8344.78,-3042.9 8337.45,-3035.25 8334.28,-3041.5"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node108" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node108"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-4836.96 0,-4836.96 0,-4800.96 282,-4800.96 282,-4836.96"/>
<text text-anchor="middle" x="141" y="-4814.91" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- scan_ontology:cli -->
<g id="node109" class="node">
<title>scan_ontology:cli</title>
<g id="a_node109"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4818.96" rx="44.19" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4817.36" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;scan_ontology:cli -->
<!-- debug_dump:cli -->
<g id="node169" class="node">
<title>debug_dump:cli</title>
<g id="a_node169"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4818.96" rx="41.11" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4817.36" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;debug_dump:cli -->
<!-- lot_io.valid_lots -->
<g id="node111" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node111"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="7583,-2132.96 7379,-2132.96 7379,-2096.96 7583,-2096.96 7583,-2132.96"/>
<text text-anchor="middle" x="7481" y="-2109.08" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node112" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node112"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8472.5,-2562.96 8293.5,-2562.96 8293.5,-2526.96 8472.5,-2526.96 8472.5,-2562.96"/>
<text text-anchor="middle" x="8383" y="-2540.91" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node113" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node113"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8542,-256.96 8224,-256.96 8224,-216.96 8542,-216.96 8542,-256.96"/>
<text text-anchor="middle" x="8383" y="-229.88" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node114" class="node">
<title>lot_io.write_lots</title>
<g id="a_node114"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7582.5,-252.96 7379.5,-252.96 7379.5,-216.96 7582.5,-216.96 7582.5,-252.96"/>
<text text-anchor="middle" x="7481" y="-229.36" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge179" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7582.66,-217.96C7679.57,-206.68 7827.33,-203.19 7938,-261.96 7961.24,-274.3 7950.79,-296.57 7974,-308.96 8134.68,-394.73 8653.04,-243.19 8792,-360.96 8845.95,-406.68 8800.43,-450.83 8828,-515.96 8883.33,-646.67 8986.65,-782.76 9031.4,-838.64"/>
<polygon fill="black" stroke="black" points="9028.82,-841.01 9037.82,-846.6 9034.27,-836.62 9028.82,-841.01"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge177" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7582.76,-228.76C7699.59,-223.64 7883.17,-222.58 7938,-261.96 7972.66,-286.85 7939.74,-325.53 7974,-350.96 8059.11,-414.11 8183.37,-416.28 8272.37,-407.07"/>
<polygon fill="black" stroke="black" points="8272.94,-410.52 8282.5,-405.95 8272.17,-403.57 8272.94,-410.52"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge176" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7582.63,-239.42C7675.1,-243.88 7815.91,-251.57 7938,-261.96 7954.04,-263.32 7957.97,-264.51 7974,-265.96 8336.96,-298.75 8429.95,-281.3 8792,-322.96 8858.5,-330.61 8933.94,-343.17 8986.56,-352.57"/>
<polygon fill="black" stroke="black" points="8985.97,-356.02 8996.43,-354.35 8987.21,-349.13 8985.97,-356.02"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge178" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7582.62,-235.18C7735.54,-235.52 8028.21,-236.17 8213.82,-236.58"/>
<polygon fill="black" stroke="black" points="8213.95,-240.08 8223.96,-236.61 8213.97,-233.08 8213.95,-240.08"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node115" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node115"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8475.5,-928.96 8290.5,-928.96 8290.5,-892.96 8475.5,-892.96 8475.5,-928.96"/>
<text text-anchor="middle" x="8383" y="-906.17" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.embedding_path -->
<g id="node117" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node117"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8489.5,-836.96 8276.5,-836.96 8276.5,-800.96 8489.5,-800.96 8489.5,-836.96"/>
<text text-anchor="middle" x="8383" y="-814.79" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node118" class="node">
<title>lot_io.get_lot</title>
<g id="a_node118"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7553.5,-3467.96 7408.5,-3467.96 7408.5,-3431.96 7553.5,-3431.96 7553.5,-3467.96"/>
<text text-anchor="middle" x="7481" y="-3445.16" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge181" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7553.7,-3456.88C7668.72,-3466.24 7886.78,-3476.16 7938,-3422.96 8003.56,-3354.86 7911.89,-1793.21 7974,-1721.96 8044.71,-1640.84 8172.68,-1632.48 8266.5,-1639.45"/>
<polygon fill="black" stroke="black" points="8266.37,-1642.95 8276.62,-1640.27 8266.93,-1635.98 8266.37,-1642.95"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge182" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7553.9,-3440.96C7650.61,-3432.81 7823.65,-3432.56 7938,-3514.96 7967.03,-3535.87 7944.74,-3566.37 7974,-3586.96 8049.89,-3640.34 8646.29,-3687.86 8918.43,-3707"/>
<polygon fill="black" stroke="black" points="8918.55,-3710.51 8928.77,-3707.72 8919.04,-3703.53 8918.55,-3710.51"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node119" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node119"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7595.5,-1850.96 7366.5,-1850.96 7366.5,-1814.96 7595.5,-1814.96 7595.5,-1850.96"/>
<text text-anchor="middle" x="7481" y="-1828.91" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node120" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node120"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8466.5,-2056.96 8299.5,-2056.96 8299.5,-2020.96 8466.5,-2020.96 8466.5,-2056.96"/>
<text text-anchor="middle" x="8383" y="-2035.26" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge183" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7595.82,-1831.44C7688.92,-1832.46 7823.42,-1839.12 7938,-1864.96 8090.5,-1899.34 8259.59,-1977.67 8337.83,-2016.4"/>
<polygon fill="black" stroke="black" points="8336.4,-2019.6 8346.91,-2020.93 8339.52,-2013.34 8336.4,-2019.6"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge256" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8466.51,-2026.67C8552.45,-2017.8 8688.7,-2015.01 8792,-2065.96 8813.75,-2076.68 8811.03,-2089.63 8828,-2106.96 8895.33,-2175.7 8980.43,-2250.63 9024.15,-2288.34"/>
<polygon fill="black" stroke="black" points="9021.96,-2291.07 9031.82,-2294.94 9026.52,-2285.76 9021.96,-2291.07"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge257" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8466.7,-2044.03C8567.98,-2050.23 8742.36,-2060.92 8874.68,-2069.03"/>
<polygon fill="black" stroke="black" points="8874.74,-2072.54 8884.94,-2069.66 8875.17,-2065.55 8874.74,-2072.54"/>
</g>
<!-- telegram_bot._t -->
<g id="node121" class="node">
<title>telegram_bot._t</title>
<g id="a_node121"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5648.5,-4882.96 5440.5,-4882.96 5440.5,-4846.96 5648.5,-4846.96 5648.5,-4882.96"/>
<text text-anchor="middle" x="5544.5" y="-4859.08" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node122" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node122"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5695.5,-4936.96 5393.5,-4936.96 5393.5,-4900.96 5695.5,-4900.96 5695.5,-4936.96"/>
<text text-anchor="middle" x="5544.5" y="-4914.16" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node123" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node123"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6547,-4936.96 6339,-4936.96 6339,-4900.96 6547,-4900.96 6547,-4936.96"/>
<text text-anchor="middle" x="6443" y="-4915.26" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge185" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5695.55,-4918.96C5873.95,-4918.96 6167.67,-4918.96 6328.32,-4918.96"/>
<polygon fill="black" stroke="black" points="6328.71,-4922.46 6338.71,-4918.96 6328.71,-4915.46 6328.71,-4922.46"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node124" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node124"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5695.5,-3938.96 5393.5,-3938.96 5393.5,-3902.96 5695.5,-3902.96 5695.5,-3938.96"/>
<text text-anchor="middle" x="5544.5" y="-3915.66" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge186" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5695.54,-3933.52C6154.1,-3969.7 7530.52,-4061.17 7938,-3892.96 7958.63,-3884.44 7953.32,-3866.35 7974,-3857.96 8310.85,-3721.2 8428.44,-3857.47 8792,-3857.96 9012.19,-3858.25 9269.26,-3859.05 9414.97,-3859.54"/>
<polygon fill="black" stroke="black" points="9415.25,-3863.05 9425.27,-3859.58 9415.28,-3856.05 9415.25,-3863.05"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node125" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node125"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9197.5,-4159.96 8910.5,-4159.96 8910.5,-4123.96 9197.5,-4123.96 9197.5,-4159.96"/>
<text text-anchor="middle" x="9054" y="-4136.26" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge187" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9090.53,-4123.91C9135.27,-4100.95 9214.23,-4059.62 9280,-4020.96 9358.68,-3974.71 9448.08,-3915.93 9496.25,-3883.73"/>
<polygon fill="black" stroke="black" points="9498.39,-3886.51 9504.75,-3878.03 9494.5,-3880.69 9498.39,-3886.51"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node126" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6527,-3547.96 6359,-3547.96 6359,-3511.96 6527,-3511.96 6527,-3547.96"/>
<text text-anchor="middle" x="6443" y="-3526.71" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node127" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node127"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7627,-2876.96 7335,-2876.96 7335,-2840.96 7627,-2840.96 7627,-2876.96"/>
<text text-anchor="middle" x="7481" y="-2854.79" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge188" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7563.86,-2840.95C7727.56,-2804.93 8095.14,-2724.07 8276.58,-2684.15"/>
<polygon fill="black" stroke="black" points="8277.39,-2687.55 8286.41,-2681.99 8275.89,-2680.72 8277.39,-2687.55"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node128" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6604.5,-3601.96 6281.5,-3601.96 6281.5,-3565.96 6604.5,-3565.96 6604.5,-3601.96"/>
<text text-anchor="middle" x="6443" y="-3579.16" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge189" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6604.53,-3597.95C6744.83,-3606.36 6934.27,-3607.23 6988,-3556.96 7088.96,-3462.49 6923.5,-3342.91 7024,-3247.96 7069.97,-3204.53 7235.63,-3204.73 7354.01,-3211.06"/>
<polygon fill="black" stroke="black" points="7354.06,-3214.56 7364.24,-3211.62 7354.45,-3207.58 7354.06,-3214.56"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node130" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5783,-3996.96 5306,-3996.96 5306,-3956.96 5783,-3956.96 5783,-3996.96"/>
<text text-anchor="middle" x="5544.5" y="-3969.88" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge190" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5783.25,-3990.72C5813.44,-4002.2 5841.05,-4019.2 5862,-4043.96 5922.92,-4115.95 5831.55,-4825.03 5898,-4891.96 6024.72,-5019.59 6263.45,-4972.47 6377.78,-4939.82"/>
<polygon fill="black" stroke="black" points="6378.83,-4943.15 6387.46,-4937 6376.88,-4936.43 6378.83,-4943.15"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge191" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5640.24,-3996.97C5710.99,-4005.91 5804.96,-4004.06 5862,-3947.96 5914.91,-3895.92 5844.25,-3667.12 5898,-3615.96 5950.02,-3566.44 6131.68,-3564.4 6270.91,-3570.94"/>
<polygon fill="black" stroke="black" points="6271.12,-3574.46 6281.28,-3571.45 6271.46,-3567.46 6271.12,-3574.46"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node131" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node131"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5820,-4104.96 5269,-4104.96 5269,-4052.96 5820,-4052.96 5820,-4104.96"/>
<text text-anchor="middle" x="5544.5" y="-4069.26" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge192" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5797.35,-4052.91C5821.79,-4041.52 5844.11,-4026.26 5862,-4005.96 5914.71,-3946.13 5839.8,-3703.46 5898,-3648.96 5986.46,-3566.12 6893.41,-3686.71 6988,-3610.96 7037.48,-3571.34 6974.83,-3512.96 7024,-3472.96 7079.36,-3427.92 7282.44,-3434.86 7398.05,-3442.94"/>
<polygon fill="black" stroke="black" points="7398.05,-3446.45 7408.27,-3443.67 7398.55,-3439.47 7398.05,-3446.45"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge193" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5593.58,-4105.02C5666.49,-4147.52 5802.77,-4239.24 5862,-4359.96 5914.2,-4466.33 5813.46,-4808.93 5898,-4891.96 6025.99,-5017.67 6263.05,-4971.88 6377.22,-4939.74"/>
<polygon fill="black" stroke="black" points="6378.24,-4943.09 6386.89,-4936.97 6376.31,-4936.36 6378.24,-4943.09"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node132" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node132"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5111.5,-3936.96 4781.5,-3936.96 4781.5,-3900.96 5111.5,-3900.96 5111.5,-3936.96"/>
<text text-anchor="middle" x="4946.5" y="-3912.8" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge194" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5111.54,-3919.51C5196.23,-3919.79 5299.14,-3920.14 5383.27,-3920.42"/>
<polygon fill="black" stroke="black" points="5383.42,-3923.92 5393.43,-3920.45 5383.44,-3916.92 5383.42,-3923.92"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node133" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node133"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5058.5,-4908.96 4834.5,-4908.96 4834.5,-4872.96 5058.5,-4872.96 5058.5,-4908.96"/>
<text text-anchor="middle" x="4946.5" y="-4886.79" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge195" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5058.55,-4886.11C5164.59,-4881.49 5323.59,-4874.55 5430.32,-4869.89"/>
<polygon fill="black" stroke="black" points="5430.65,-4873.38 5440.49,-4869.45 5430.34,-4866.39 5430.65,-4873.38"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge196" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5058.55,-4896.17C5149.9,-4900.47 5280.55,-4906.6 5383.23,-4911.43"/>
<polygon fill="black" stroke="black" points="5383.24,-4914.93 5393.39,-4911.9 5383.56,-4907.94 5383.24,-4914.93"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node134" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node134"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5121,-4854.46 4772,-4854.46 4772,-4815.46 5121,-4815.46 5121,-4854.46"/>
<text text-anchor="middle" x="4946.5" y="-4828.06" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge197" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5121.09,-4843.69C5220.59,-4848.7 5342.63,-4854.85 5429.91,-4859.24"/>
<polygon fill="black" stroke="black" points="5429.95,-4862.75 5440.11,-4859.75 5430.3,-4855.75 5429.95,-4862.75"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge198" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5121.09,-4843.87C5145.11,-4848.47 5169.05,-4854.94 5191,-4863.96 5209.75,-4871.66 5208.12,-4884.57 5227,-4891.96 5275.75,-4911.04 5331.86,-4919.68 5383.17,-4923"/>
<polygon fill="black" stroke="black" points="5383.18,-4926.51 5393.36,-4923.6 5383.59,-4919.52 5383.18,-4926.51"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge199" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5013.23,-4815.44C5170.91,-4772.58 5578.61,-4685.69 5862,-4837.96 5887.41,-4851.61 5872.91,-4877.72 5898,-4891.96 6037.9,-4971.35 6232.09,-4957.15 6346.64,-4938.69"/>
<polygon fill="black" stroke="black" points="6347.49,-4942.09 6356.79,-4937.01 6346.35,-4935.19 6347.49,-4942.09"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node135" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node135"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5161.5,-4968.46 4731.5,-4968.46 4731.5,-4927.46 5161.5,-4927.46 5161.5,-4968.46"/>
<text text-anchor="middle" x="4946.5" y="-4940.71" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge200" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5161.54,-4927.9C5171.61,-4924.99 5181.48,-4921.69 5191,-4917.96 5209.37,-4910.75 5208.5,-4898.82 5227,-4891.96 5291.53,-4868.01 5368.36,-4861 5430.16,-4860.1"/>
<polygon fill="black" stroke="black" points="5430.38,-4863.6 5440.34,-4860 5430.31,-4856.6 5430.38,-4863.6"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge201" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5161.83,-4937.53C5234.68,-4933.98 5314.79,-4930.09 5382.72,-4926.78"/>
<polygon fill="black" stroke="black" points="5383.27,-4930.26 5393.09,-4926.28 5382.93,-4923.27 5383.27,-4930.26"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge202" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5161.88,-4950.17C5347.23,-4951.44 5622.33,-4951.79 5862,-4945.96 6024.3,-4942 6211.95,-4932.34 6328.81,-4925.71"/>
<polygon fill="black" stroke="black" points="6329.06,-4929.2 6338.85,-4925.14 6328.67,-4922.21 6329.06,-4929.2"/>
</g>
<!-- telegram_bot.main -->
<g id="node136" class="node">
<title>telegram_bot.main</title>
<g id="a_node136"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5112,-3998.96 4781,-3998.96 4781,-3954.96 5112,-3954.96 5112,-3998.96"/>
<text text-anchor="middle" x="4946.5" y="-3968.64" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge203" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5112.24,-3959.36C5149.94,-3955.47 5189.85,-3951.47 5227,-3947.96 5277.72,-3943.16 5333.05,-3938.31 5383.06,-3934.07"/>
<polygon fill="black" stroke="black" points="5383.65,-3937.53 5393.32,-3933.2 5383.06,-3930.56 5383.65,-3937.53"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge204" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5112.18,-3995.25C5149.88,-3999.1 5189.8,-4002.92 5227,-4005.96 5508.79,-4029 5580.59,-4016.68 5862,-4043.96 6380.65,-4094.22 6504.08,-4165.21 7024,-4199.96 7429.32,-4227.04 7531.9,-4209.94 7938,-4199.96 8282.07,-4191.5 8685.23,-4166.87 8900,-4152.57"/>
<polygon fill="black" stroke="black" points="8900.34,-4156.06 8910.09,-4151.9 8899.88,-4149.08 8900.34,-4156.06"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge205" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5112.09,-3985.34C5141.64,-3979.27 5169.74,-3967.34 5191,-3945.96 5284.74,-3851.65 5133.72,-3743.71 5227,-3648.96 5305.31,-3569.41 6077.52,-3540.2 6348.56,-3532.35"/>
<polygon fill="black" stroke="black" points="6348.87,-3535.84 6358.76,-3532.05 6348.67,-3528.84 6348.87,-3535.84"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge206" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M5112.18,-3986.16C5141.9,-3980.08 5170.05,-3967.93 5191,-3945.96 5260.99,-3872.55 5170.29,-3575.05 5227,-3490.96 5413.38,-3214.61 5584.18,-3268.31 5898,-3155.96 6365.84,-2988.45 6525.85,-3089.58 6988,-2906.96 7005.23,-2900.15 7006.27,-2891.32 7024,-2885.96 7121.03,-2856.62 7234.85,-2849.85 7324.5,-2850.42"/>
<polygon fill="black" stroke="black" points="7324.73,-2853.92 7334.76,-2850.52 7324.79,-2846.92 7324.73,-2853.92"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge207" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5112.33,-3976.96C5169.04,-3976.96 5233.84,-3976.96 5295.68,-3976.96"/>
<polygon fill="black" stroke="black" points="5295.97,-3980.46 5305.97,-3976.96 5295.97,-3973.46 5295.97,-3980.46"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge208" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5036.77,-3998.97C5091.44,-4011.9 5162.97,-4027.83 5227,-4038.96 5252.88,-4043.45 5280.03,-4047.66 5307.1,-4051.52"/>
<polygon fill="black" stroke="black" points="5306.67,-4054.99 5317.06,-4052.93 5307.65,-4048.06 5306.67,-4054.99"/>
</g>
<!-- clean_data._parse_date -->
<g id="node139" class="node">
<title>clean_data._parse_date</title>
<g id="a_node139"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8522.5,-3902.96 8243.5,-3902.96 8243.5,-3866.96 8522.5,-3866.96 8522.5,-3902.96"/>
<text text-anchor="middle" x="8383" y="-3879.26" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge216" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8522.7,-3881.93C8751.11,-3876.96 9202.25,-3867.13 9415.12,-3862.49"/>
<polygon fill="black" stroke="black" points="9415.46,-3865.99 9425.38,-3862.27 9415.31,-3858.99 9415.46,-3865.99"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node140" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node140"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7634.5,-3639.96 7327.5,-3639.96 7327.5,-3603.96 7634.5,-3603.96 7634.5,-3639.96"/>
<text text-anchor="middle" x="7481" y="-3615.8" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge217" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7634.7,-3633.61C7750.35,-3638.77 7896.24,-3636.19 7938,-3594.96 8017.12,-3516.85 7895.92,-3175.1 7974,-3095.96 8058.66,-3010.14 8210.18,-3022.65 8302.84,-3040.89"/>
<polygon fill="black" stroke="black" points="8302.23,-3044.33 8312.73,-3042.9 8303.62,-3037.47 8302.23,-3044.33"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge218" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7634.53,-3613.08C7748.38,-3609.69 7891.89,-3613.3 7938,-3648.96 7979.03,-3680.68 7937.03,-3723.58 7974,-3759.96 8042.83,-3827.67 8147.34,-3858.84 8233.35,-3873.12"/>
<polygon fill="black" stroke="black" points="8233.05,-3876.62 8243.47,-3874.74 8234.15,-3869.7 8233.05,-3876.62"/>
</g>
<!-- clean_data._clean_media -->
<g id="node141" class="node">
<title>clean_data._clean_media</title>
<g id="a_node141"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7671,-4094.96 7291,-4094.96 7291,-4054.96 7671,-4054.96 7671,-4094.96"/>
<text text-anchor="middle" x="7481" y="-4067.88" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge219" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7671.22,-4070.33C7863.3,-4065.64 8152.19,-4058.57 8295.3,-4055.08"/>
<polygon fill="black" stroke="black" points="8295.43,-4058.57 8305.35,-4054.83 8295.26,-4051.58 8295.43,-4058.57"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge220" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7671.28,-4074.37C7754.09,-4070.66 7851.81,-4061.56 7938,-4040.96 7954.86,-4036.93 7957.8,-4032.12 7974,-4025.96 8093.8,-3980.35 8235.65,-3932.74 8316.61,-3906.17"/>
<polygon fill="black" stroke="black" points="8317.76,-3909.47 8326.17,-3903.03 8315.58,-3902.82 8317.76,-3909.47"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node142" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node142"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7683,-2554.96 7279,-2554.96 7279,-2508.96 7683,-2508.96 7683,-2554.96"/>
<text text-anchor="middle" x="7481" y="-2523.52" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge221" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7683.17,-2520.5C7769.64,-2525.53 7866.95,-2545.74 7938,-2601.96 7971.46,-2628.43 7949.58,-2655.97 7974,-2690.96 8082.68,-2846.69 8268.28,-2983.47 8346.05,-3036.98"/>
<polygon fill="black" stroke="black" points="8344.32,-3040.04 8354.55,-3042.79 8348.27,-3034.26 8344.32,-3040.04"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge223" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7571.63,-2508.84C7679.15,-2475.91 7855.24,-2404.27 7938,-2271.96 8002.96,-2168.12 7891.49,-1812.48 7974,-1721.96 8046.26,-1642.68 8173.33,-1633.84 8266.51,-1640.2"/>
<polygon fill="black" stroke="black" points="8266.33,-1643.7 8276.56,-1640.96 8266.85,-1636.72 8266.33,-1643.7"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge222" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7683.14,-2534.86C7869.71,-2537.56 8139.55,-2541.45 8283.24,-2543.53"/>
<polygon fill="black" stroke="black" points="8283.31,-2547.03 8293.36,-2543.68 8283.41,-2540.03 8283.31,-2547.03"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node143" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node143"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7689,-3693.96 7273,-3693.96 7273,-3657.96 7689,-3657.96 7689,-3693.96"/>
<text text-anchor="middle" x="7481" y="-3669.8" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node144" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node144"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8596.5,-3194.96 8169.5,-3194.96 8169.5,-3158.96 8596.5,-3158.96 8596.5,-3194.96"/>
<text text-anchor="middle" x="8383" y="-3170.8" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node145" class="node">
<title>clean_data.main</title>
<g id="a_node145"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6539,-3693.96 6347,-3693.96 6347,-3657.96 6539,-3657.96 6539,-3693.96"/>
<text text-anchor="middle" x="6443" y="-3670.66" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge224" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6539.15,-3671C6716.16,-3661.77 7097.95,-3641.87 7316.88,-3630.46"/>
<polygon fill="black" stroke="black" points="7317.37,-3633.94 7327.18,-3629.92 7317.01,-3626.95 7317.37,-3633.94"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge225" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6539.24,-3663.4C6661.33,-3653.14 6871.14,-3656.2 6988,-3775.96 7059.34,-3849.07 6951.74,-3930.75 7024,-4002.96 7090.19,-4069.1 7190.84,-4089.89 7280.77,-4092.93"/>
<polygon fill="black" stroke="black" points="7280.74,-4096.43 7290.83,-4093.2 7280.93,-4089.44 7280.74,-4096.43"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge226" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6520.77,-3693.99C6640.31,-3716.98 6869.5,-3739.75 6988,-3610.96 7063.95,-3528.4 6949.43,-2685.77 7024,-2601.96 7084.23,-2534.25 7180.29,-2512.72 7268.75,-2509.77"/>
<polygon fill="black" stroke="black" points="7269.03,-2513.27 7278.94,-2509.51 7268.85,-2506.27 7269.03,-2513.27"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge227" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6539.15,-3675.96C6702.33,-3675.96 7039.55,-3675.96 7262.76,-3675.96"/>
<polygon fill="black" stroke="black" points="7262.97,-3679.46 7272.97,-3675.96 7262.97,-3672.46 7262.97,-3679.46"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge228" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6509.45,-3694.02C6621.07,-3720.53 6849.55,-3755.62 6988,-3643.96 7034.33,-3606.59 6977.35,-3551.93 7024,-3514.96 7103.66,-3451.83 7862.9,-3545.45 7938,-3476.96 8026.8,-3395.97 7886.7,-3291.56 7974,-3208.96 8001.93,-3182.53 8079.19,-3172.73 8159.06,-3170.22"/>
<polygon fill="black" stroke="black" points="8159.42,-3173.71 8169.32,-3169.94 8159.23,-3166.71 8159.42,-3173.71"/>
</g>
<!-- caption._identify_size -->
<g id="node146" class="node">
<title>caption._identify_size</title>
<g id="a_node146"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9182.5,-4480.96 8925.5,-4480.96 8925.5,-4444.96 9182.5,-4444.96 9182.5,-4480.96"/>
<text text-anchor="middle" x="9054" y="-4457.26" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node147" class="node">
<title>caption._prepare_image</title>
<g id="a_node147"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8600,-4485.96 8166,-4485.96 8166,-4439.96 8600,-4439.96 8600,-4485.96"/>
<text text-anchor="middle" x="8383" y="-4454.52" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge229" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8600.28,-4462.96C8703.68,-4462.96 8824.37,-4462.96 8915.12,-4462.96"/>
<polygon fill="black" stroke="black" points="8915.2,-4466.46 8925.2,-4462.96 8915.2,-4459.46 8915.2,-4466.46"/>
</g>
<!-- caption._guess_chat -->
<g id="node148" class="node">
<title>caption._guess_chat</title>
<g id="a_node148"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9150,-4426.96 8958,-4426.96 8958,-4390.96 9150,-4390.96 9150,-4426.96"/>
<text text-anchor="middle" x="9054" y="-4404.79" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node149" class="node">
<title>caption.caption_file</title>
<g id="a_node149"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="7784,-4448.46 7178,-4448.46 7178,-4375.46 7784,-4375.46 7784,-4448.46"/>
<text text-anchor="middle" x="7481" y="-4396.97" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge235" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7784.24,-4430.51C7840.86,-4420.39 7895.52,-4399.49 7938,-4360.96 7995.2,-4309.07 7914.99,-4240.78 7974,-4190.96 8043.5,-4132.27 8728.19,-4222.78 8792,-4157.96 8849.31,-4099.74 8773.04,-2748.4 8828,-2687.96 8851.31,-2662.32 8885.2,-2651.13 8919.64,-2647.48"/>
<polygon fill="black" stroke="black" points="8920.18,-2650.94 8929.85,-2646.61 8919.59,-2643.97 8920.18,-2650.94"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge230" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7784.18,-4381.82C7835.61,-4375.65 7888.41,-4368.65 7938,-4360.96 8320.43,-4301.62 8486.86,-4428.99 8792,-4190.96 8821.47,-4167.97 8804.97,-4144.39 8828,-4114.96 8881.86,-4046.11 8965.84,-3986.19 9014.53,-3954.64"/>
<polygon fill="black" stroke="black" points="9016.67,-3957.42 9023.19,-3949.08 9012.89,-3951.53 9016.67,-3957.42"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge231" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7784,-4433.19C7841.32,-4423.07 7896.31,-4401.5 7938,-4360.96 8020.68,-4280.54 7891.84,-4184.91 7974,-4103.96 8057.77,-4021.42 8202.69,-4023.99 8295.37,-4036.31"/>
<polygon fill="black" stroke="black" points="8294.9,-4039.78 8305.28,-4037.7 8295.86,-4032.85 8294.9,-4039.78"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge232" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M7784.04,-4413.63C7842.78,-4399.54 7898.34,-4373.48 7938,-4327.96 7996.74,-4260.53 7920.5,-3595.61 7974,-3523.96 8028.24,-3451.32 8122.31,-3415.85 8206.47,-3398.63"/>
<polygon fill="black" stroke="black" points="8207.28,-3402.04 8216.41,-3396.67 8205.92,-3395.17 8207.28,-3402.04"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge233" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M7784.19,-4429.08C7905.64,-4435.96 8043.24,-4443.76 8155.79,-4450.14"/>
<polygon fill="black" stroke="black" points="8155.73,-4453.64 8165.91,-4450.71 8156.13,-4446.65 8155.73,-4453.64"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge234" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M7784.44,-4411.38C8140.41,-4410.7 8712.75,-4409.61 8947.43,-4409.16"/>
<polygon fill="black" stroke="black" points="8947.68,-4412.66 8957.67,-4409.14 8947.67,-4405.66 8947.68,-4412.66"/>
</g>
<!-- caption.main -->
<g id="node150" class="node">
<title>caption.main</title>
<g id="a_node150"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6535.5,-4418.96 6350.5,-4418.96 6350.5,-4382.96 6535.5,-4382.96 6535.5,-4418.96"/>
<text text-anchor="middle" x="6443" y="-4394.8" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge236" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6535.94,-4401.93C6676.33,-4403.42 6950.69,-4406.34 7167.62,-4408.64"/>
<polygon fill="black" stroke="black" points="7167.87,-4412.14 7177.91,-4408.75 7167.95,-4405.14 7167.87,-4412.14"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node152" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node152"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="9198,-1615.96 8910,-1615.96 8910,-1579.96 9198,-1579.96 9198,-1615.96"/>
<text text-anchor="middle" x="9054" y="-1593.17" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge241" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M8469.28,-1575.42C8562.88,-1556.42 8710.63,-1544.33 8792,-1629.96 8842.65,-1683.26 8813.96,-2880.78 8828,-2952.96 8873.16,-3185.06 8997.41,-3445.49 9039.13,-3528.8"/>
<polygon fill="black" stroke="black" points="9036.06,-3530.49 9043.69,-3537.85 9042.32,-3527.35 9036.06,-3530.49"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge240" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M8678.41,-1597.96C8754.76,-1597.96 8833.95,-1597.96 8899.74,-1597.96"/>
<polygon fill="black" stroke="black" points="8899.76,-1601.46 8909.76,-1597.96 8899.76,-1594.46 8899.76,-1601.46"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node155" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node155"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="6699,-1679.96 6187,-1679.96 6187,-1633.96 6699,-1633.96 6699,-1679.96"/>
<text text-anchor="middle" x="6443" y="-1648.52" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge245" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6699.31,-1651.43C7114.22,-1643.67 7893.38,-1634.75 7938,-1675.96 8001.94,-1735.01 7913.16,-2003.72 7974,-2065.96 8006.45,-2099.15 8048.78,-2118.5 8093.86,-2128.9"/>
<polygon fill="black" stroke="black" points="8093.31,-2132.36 8103.83,-2131.05 8094.79,-2125.52 8093.31,-2132.36"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge246" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6699.26,-1659.43C6805.05,-1674.6 6918.97,-1712.15 6988,-1797.96 7054.42,-1880.52 6949.21,-2675.89 7024,-2750.96 7095.74,-2822.97 7840.77,-2759.35 7938,-2788.96 7943.66,-2790.68 8237.71,-2971.93 8344.1,-3037.57"/>
<polygon fill="black" stroke="black" points="8342.27,-3040.55 8352.62,-3042.82 8345.94,-3034.59 8342.27,-3040.55"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge247" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6699.15,-1649.47C6800.28,-1646.85 6917.62,-1644.24 7024,-1642.96 7430.19,-1638.06 7531.83,-1636.55 7938,-1642.96 8049.56,-1644.72 8176.83,-1648.96 8266.43,-1652.31"/>
<polygon fill="black" stroke="black" points="8266.49,-1655.82 8276.61,-1652.7 8266.75,-1648.82 8266.49,-1655.82"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge248" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6699.09,-1668.28C6886.89,-1676.62 7137.41,-1687.75 7303.48,-1695.12"/>
<polygon fill="black" stroke="black" points="7303.65,-1698.63 7313.8,-1695.58 7303.97,-1691.64 7303.65,-1698.63"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge249" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M6699.27,-1653.13C6791.07,-1647.96 6894.91,-1637.71 6988,-1617.96 7004.64,-1614.43 7007.7,-1609.81 7024,-1604.96 7145.31,-1568.82 7287.59,-1536.71 7380.55,-1517.09"/>
<polygon fill="black" stroke="black" points="7381.44,-1520.48 7390.51,-1515 7380,-1513.63 7381.44,-1520.48"/>
</g>
<!-- embed.embed_file -->
<g id="node156" class="node">
<title>embed.embed_file</title>
<g id="a_node156"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7686,-928.46 7276,-928.46 7276,-873.46 7686,-873.46 7686,-928.46"/>
<text text-anchor="middle" x="7481" y="-890.41" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge250" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7686.05,-917.7C7777.64,-936.33 7878.31,-974.51 7938,-1051.96 8016.43,-1153.71 7883.44,-1537.83 7974,-1628.96 8060.92,-1716.42 8217.68,-1698.1 8309.52,-1677.27"/>
<polygon fill="black" stroke="black" points="8310.35,-1680.67 8319.29,-1674.99 8308.76,-1673.85 8310.35,-1680.67"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge252" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7686.04,-893.13C7774.54,-889.94 7879.38,-886.42 7974,-883.96 8332.34,-874.61 8757.74,-868.62 8949.81,-866.19"/>
<polygon fill="black" stroke="black" points="8949.94,-869.69 8959.9,-866.07 8949.85,-862.69 8949.94,-869.69"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge251" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7686.22,-903.23C7871.34,-905.28 8136.5,-908.23 8280.13,-909.82"/>
<polygon fill="black" stroke="black" points="8280.23,-913.33 8290.26,-909.94 8280.3,-906.33 8280.23,-913.33"/>
</g>
<!-- embed.main -->
<g id="node157" class="node">
<title>embed.main</title>
<g id="a_node157"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6531,-918.96 6355,-918.96 6355,-882.96 6531,-882.96 6531,-918.96"/>
<text text-anchor="middle" x="6443" y="-894.8" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge253" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6531.44,-900.96C6692.22,-900.96 7039.09,-900.96 7265.84,-900.96"/>
<polygon fill="black" stroke="black" points="7265.87,-904.46 7275.87,-900.96 7265.87,-897.46 7265.87,-904.46"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node158" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node158"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="8501,-2204.96 8265,-2204.96 8265,-2168.96 8501,-2168.96 8501,-2204.96"/>
<text text-anchor="middle" x="8383" y="-2182.91" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.has_misc_deal -->
<g id="node159" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node159"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="9168,-2010.96 8940,-2010.96 8940,-1974.96 9168,-1974.96 9168,-2010.96"/>
<text text-anchor="middle" x="9054" y="-1987.66" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node160" class="node">
<title>chop.process_message</title>
<g id="a_node160"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6944,-2136.96 5942,-2136.96 5942,-2034.96 6944,-2034.96 6944,-2136.96"/>
<text text-anchor="middle" x="6443" y="-2064.64" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge261" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6926.43,-2034.94C7220.37,-2014 7602.68,-2004.87 7938,-2054.96 7954.55,-2057.43 7957.62,-2062.54 7974,-2065.96 8012.53,-2073.99 8053.41,-2080.75 8093.84,-2086.4"/>
<polygon fill="black" stroke="black" points="8093.45,-2089.88 8103.83,-2087.78 8094.4,-2082.95 8093.45,-2089.88"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge259" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6935.99,-2137.16C6955.06,-2150.4 6972.58,-2165.89 6988,-2183.96 7052.24,-2259.24 6955.6,-3893.44 7024,-3964.96 7068.03,-4010.99 8001.89,-4041.92 8294.88,-4050.52"/>
<polygon fill="black" stroke="black" points="8294.93,-4054.03 8305.03,-4050.82 8295.13,-4047.03 8294.93,-4054.03"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge260" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6919.41,-2137.04C6944.01,-2150.05 6967.13,-2165.55 6988,-2183.96 7028.16,-2219.38 6983.16,-2264.31 7024,-2298.96 7112.9,-2374.38 7860.82,-2446.21 8207.2,-2475.78"/>
<polygon fill="black" stroke="black" points="8207.07,-2479.28 8217.33,-2476.65 8207.67,-2472.31 8207.07,-2479.28"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge265" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6944.02,-2059.02C6959.65,-2049.18 6974.39,-2037.88 6988,-2024.96 7059.51,-1957.02 6956.35,-1877.74 7024,-1805.96 7094.83,-1730.8 7207.91,-1704.91 7303.74,-1697.88"/>
<polygon fill="black" stroke="black" points="7304.1,-1701.36 7313.85,-1697.2 7303.63,-1694.38 7304.1,-1701.36"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge262" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6944.17,-2099.96C7103.59,-2104.42 7265.26,-2108.95 7368.7,-2111.84"/>
<polygon fill="black" stroke="black" points="7368.74,-2115.34 7378.83,-2112.12 7368.94,-2108.35 7368.74,-2115.34"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge263" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6927.56,-2137C6949.45,-2150.15 6969.81,-2165.67 6988,-2183.96 7053.55,-2249.85 6956.55,-2326.01 7024,-2389.96 7172.46,-2530.71 7741.42,-2443.33 7938,-2499.96 7955,-2504.85 7956.88,-2512.5 7974,-2516.96 8077.16,-2543.83 8199.66,-2548.81 8283.33,-2548.34"/>
<polygon fill="black" stroke="black" points="8283.37,-2551.84 8293.34,-2548.25 8283.31,-2544.84 8283.37,-2551.84"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge264" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6913.39,-2137.1C6939.99,-2150 6965.15,-2165.47 6988,-2183.96 7020.85,-2210.54 6988.92,-2248.4 7024,-2271.96 7108.32,-2328.56 7836.45,-2272.87 7938,-2271.96 8032.55,-2271.11 8138.4,-2269.23 8223.04,-2267.51"/>
<polygon fill="black" stroke="black" points="8223.32,-2271.01 8233.25,-2267.31 8223.18,-2264.01 8223.32,-2271.01"/>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge266" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6944.16,-2062.52C6959.95,-2051.77 6974.67,-2039.32 6988,-2024.96 7061.59,-1945.66 6959.05,-1138.47 7024,-1051.96 7080.77,-976.35 7176.69,-938.09 7265.95,-918.93"/>
<polygon fill="black" stroke="black" points="7266.88,-922.32 7275.96,-916.86 7265.46,-915.46 7266.88,-922.32"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge267" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6944.02,-2074.18C7361.58,-2066.31 7895.47,-2061.63 7938,-2087.96 7968.42,-2106.79 7944.2,-2140.15 7974,-2159.96 8064.94,-2220.4 8193.9,-2217.96 8282.36,-2206.37"/>
<polygon fill="black" stroke="black" points="8282.97,-2209.82 8292.4,-2205 8282.01,-2202.89 8282.97,-2209.82"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge268" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6932.79,-2034.93C6951.47,-2031.78 6969.92,-2028.46 6988,-2024.96 7004.3,-2021.8 7007.56,-2017.29 7024,-2014.96 7739.74,-1913.44 8611.76,-1960.54 8929.61,-1983.22"/>
<polygon fill="black" stroke="black" points="8929.54,-1986.73 8939.77,-1983.95 8930.04,-1979.75 8929.54,-1986.73"/>
</g>
<!-- chop.main -->
<g id="node161" class="node">
<title>chop.main</title>
<g id="a_node161"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5620,-2103.96 5469,-2103.96 5469,-2067.96 5620,-2067.96 5620,-2103.96"/>
<text text-anchor="middle" x="5544.5" y="-2079.8" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge269" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5620.01,-2085.96C5692.24,-2085.96 5808.65,-2085.96 5931.41,-2085.96"/>
<polygon fill="black" stroke="black" points="5931.78,-2089.46 5941.78,-2085.96 5931.78,-2082.46 5931.78,-2089.46"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node162" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node162"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8533.5,-1766.96 8232.5,-1766.96 8232.5,-1730.96 8533.5,-1730.96 8533.5,-1766.96"/>
<text text-anchor="middle" x="8383" y="-1744.91" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node163" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6677,-1858.96 6209,-1858.96 6209,-1806.96 6677,-1806.96 6677,-1858.96"/>
<text text-anchor="middle" x="6443" y="-1822.81" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge271" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6677.03,-1843.88C7097.08,-1863.56 7938,-1902.96 7938,-1902.96 7994.74,-1950.76 7918.92,-2016.26 7974,-2065.96 8007.66,-2096.33 8049.77,-2114.51 8094.06,-2124.69"/>
<polygon fill="black" stroke="black" points="8093.32,-2128.11 8103.84,-2126.8 8094.8,-2121.27 8093.32,-2128.11"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge270" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6677.09,-1814.59C6788.38,-1819.44 6913.29,-1847.44 6988,-1935.96 7058.14,-2019.05 6949.46,-3813.79 7024,-3892.96 7163.66,-4041.29 7763.15,-3860.38 7938,-3964.96 7963.39,-3980.14 7948.6,-4005.77 7974,-4020.96 8071.96,-4079.53 8207.63,-4077.19 8295.12,-4067.33"/>
<polygon fill="black" stroke="black" points="8295.76,-4070.77 8305.28,-4066.12 8294.93,-4063.82 8295.76,-4070.77"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge273" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6677.3,-1822.92C6775.57,-1813.09 6889.7,-1794.15 6988,-1757.96 7005.82,-1751.4 7005.97,-1740.92 7024,-1734.96 7113.24,-1705.45 7217.51,-1696.4 7303.8,-1695.19"/>
<polygon fill="black" stroke="black" points="7304,-1698.69 7313.96,-1695.08 7303.93,-1691.69 7304,-1698.69"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge272" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6677.14,-1832.96C6887.5,-1832.96 7188.83,-1832.96 7356.1,-1832.96"/>
<polygon fill="black" stroke="black" points="7356.19,-1836.46 7366.19,-1832.96 7356.19,-1829.46 7356.19,-1836.46"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge274" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6677.17,-1821.86C6783.02,-1816.88 6909.83,-1811.01 7024,-1805.96 7457.28,-1786.78 7968.39,-1765.76 8222.25,-1755.43"/>
<polygon fill="black" stroke="black" points="8222.43,-1758.92 8232.28,-1755.02 8222.15,-1751.93 8222.43,-1758.92"/>
</g>
<!-- check_translations.parse_po -->
<g id="node164" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-4906.96 1083.5,-4906.96 1083.5,-4854.96 1667.5,-4854.96 1667.5,-4906.96"/>
<text text-anchor="middle" x="1375.5" y="-4871.26" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node165" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-4903.46 318,-4903.46 318,-4858.46 983,-4858.46 983,-4903.46"/>
<text text-anchor="middle" x="650.5" y="-4872.58" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge275" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-4880.96C1013.14,-4880.96 1043.45,-4880.96 1073.19,-4880.96"/>
<polygon fill="black" stroke="black" points="1073.26,-4884.46 1083.26,-4880.96 1073.26,-4877.46 1073.26,-4884.46"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node166" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node166"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="8792,-1271.46 7974,-1271.46 7974,-1214.46 8792,-1214.46 8792,-1271.46"/>
<text text-anchor="middle" x="8383" y="-1231.62" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge277" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8508.85,-1214.36C8592.69,-1191.81 8703.58,-1155.35 8792,-1102.96 8893.24,-1042.97 8989.36,-939.18 9031.14,-890.97"/>
<polygon fill="black" stroke="black" points="9033.98,-893.04 9037.84,-883.18 9028.67,-888.48 9033.98,-893.04"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge276" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8627.89,-1271.51C8690.92,-1291.01 8752.17,-1323.18 8792,-1375.96 8856.57,-1461.51 8793.84,-2238.36 8828,-2339.96 8870.08,-2465.13 8977.64,-2584.97 9027.23,-2635.64"/>
<polygon fill="black" stroke="black" points="9024.88,-2638.24 9034.4,-2642.89 9029.86,-2633.32 9024.88,-2638.24"/>
</g>
<!-- pending_embed.main -->
<g id="node167" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6705,-1367.96 6181,-1367.96 6181,-1307.96 6705,-1307.96 6705,-1367.96"/>
<text text-anchor="middle" x="6443" y="-1326.44" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge278" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6705.19,-1357.61C6804.92,-1364.69 6919.69,-1372.31 7024,-1377.96 7074.74,-1380.71 7901.78,-1378.31 7938,-1413.96 8041.41,-1515.75 7874.49,-1960.34 7974,-2065.96 8006.06,-2099.98 8048.46,-2119.66 8093.8,-2130.11"/>
<polygon fill="black" stroke="black" points="8093.31,-2133.59 8103.82,-2132.27 8094.78,-2126.74 8093.31,-2133.59"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge280" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6705.32,-1341.24C7127.57,-1347.12 7915.34,-1360.77 7938,-1380.96 8021.17,-1455.04 7892.32,-1553.23 7974,-1628.96 8062.83,-1711.31 8214.46,-1696.33 8305.74,-1677.18"/>
<polygon fill="black" stroke="black" points="8306.71,-1680.55 8315.75,-1675.01 8305.23,-1673.71 8306.71,-1680.55"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge282" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6667.84,-1367.98C6775.41,-1381.74 6906.24,-1397.5 7024,-1408.96 7130.6,-1419.33 7251.52,-1427.94 7342.05,-1433.76"/>
<polygon fill="black" stroke="black" points="7341.89,-1437.26 7352.09,-1434.4 7342.34,-1430.27 7341.89,-1437.26"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge279" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6687.38,-1368.02C6797.68,-1394.99 6918.68,-1446.12 6988,-1542.96 7060.54,-1644.29 6937.08,-2574.65 7024,-2663.96 7064.81,-2705.89 7210.1,-2708.45 7325.86,-2703.1"/>
<polygon fill="black" stroke="black" points="7326.08,-2706.59 7335.9,-2702.61 7325.74,-2699.6 7326.08,-2706.59"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge281" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6597.72,-1307.88C6722.8,-1275.05 6893.56,-1209.58 6988,-1084.96 7048.11,-1005.64 6949.26,-929.67 7024,-863.96 7047.19,-843.56 7941.69,-826.41 8266.04,-820.85"/>
<polygon fill="black" stroke="black" points="8266.47,-824.35 8276.41,-820.68 8266.35,-817.35 8266.47,-824.35"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge283" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6705.12,-1331.38C7119.88,-1321.98 7887.85,-1309.32 7938,-1342.96 7972.75,-1366.27 7944.38,-1400.39 7974,-1429.96 8050.42,-1506.25 8166.39,-1549.46 8255.18,-1572.89"/>
<polygon fill="black" stroke="black" points="8254.49,-1576.33 8265.05,-1575.44 8256.25,-1569.55 8254.49,-1576.33"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge284" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6705.33,-1311.62C7004.26,-1286.26 7507.94,-1258.06 7938,-1304.96 8071.55,-1319.52 8223.77,-1358.03 8310.8,-1382.22"/>
<polygon fill="black" stroke="black" points="8310,-1385.62 8320.57,-1384.94 8311.88,-1378.88 8310,-1385.62"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge285" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6683.13,-1307.93C6787.61,-1295.96 6911.71,-1283.31 7024,-1275.96 7338.53,-1255.36 7694.8,-1247.27 7963.49,-1244.25"/>
<polygon fill="black" stroke="black" points="7963.85,-1247.75 7973.81,-1244.14 7963.77,-1240.75 7963.85,-1247.75"/>
</g>
<!-- pending_chop.main -->
<g id="node168" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="6606.5,-2234.96 6279.5,-2234.96 6279.5,-2192.96 6606.5,-2192.96 6606.5,-2234.96"/>
<text text-anchor="middle" x="6443" y="-2205.87" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge286" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6606.61,-2213.08C6966.95,-2210.65 7810.85,-2202.12 7938,-2174.96 7954.95,-2171.34 7957.23,-2164.32 7974,-2159.96 8012.33,-2149.98 8053.23,-2142.11 8093.79,-2135.92"/>
<polygon fill="black" stroke="black" points="8094.44,-2139.36 8103.81,-2134.42 8093.4,-2132.44 8094.44,-2139.36"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge287" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6547.2,-2234.99C6670.47,-2253.48 6874.25,-2261.87 6988,-2145.96 7041.22,-2091.73 6973.5,-1862.72 7024,-1805.96 7093.04,-1728.36 7207,-1702.6 7303.72,-1696.25"/>
<polygon fill="black" stroke="black" points="7304.15,-1699.73 7313.92,-1695.65 7303.74,-1692.74 7304.15,-1699.73"/>
</g>
<!-- build_site:cli -->
<g id="node170" class="node">
<title>build_site:cli</title>
<g id="a_node170"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-4818.96" rx="34.71" ry="18"/>
<text text-anchor="middle" x="1986" y="-4817.36" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;build_site:cli -->
<!-- tg_client:cli -->
<g id="node171" class="node">
<title>tg_client:cli</title>
<g id="a_node171"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-4818.96" rx="32.86" ry="18"/>
<text text-anchor="middle" x="2606.5" y="-4817.36" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;tg_client:cli -->
<!-- telegram_bot:cli -->
<g id="node172" class="node">
<title>telegram_bot:cli</title>
<g id="a_node172"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-4818.96" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="3211.5" y="-4814.79" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;telegram_bot:cli -->
<!-- clean_data:cli -->
<g id="node173" class="node">
<title>clean_data:cli</title>
<g id="a_node173"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-4818.96" rx="37.29" ry="18"/>
<text text-anchor="middle" x="4058" y="-4817.36" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;clean_data:cli -->
<!-- caption:cli -->
<g id="node174" class="node">
<title>caption:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4942.96" rx="30.28" ry="18"/>
<text text-anchor="middle" x="141" y="-4941.36" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- moderation:cli -->
<g id="node175" class="node">
<title>moderation:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4942.96" rx="38.53" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4941.36" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;moderation:cli -->
<!-- embed:cli -->
<g id="node176" class="node">
<title>embed:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4942.96" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4941.36" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;embed:cli -->
<!-- chop:cli -->
<g id="node177" class="node">
<title>chop:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-4942.96" rx="27" ry="18"/>
<text text-anchor="middle" x="1986" y="-4941.36" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;chop:cli -->
<!-- pending_caption:cli -->
<g id="node178" class="node">
<title>pending_caption:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-4942.96" rx="48.62" ry="18"/>
<text text-anchor="middle" x="2606.5" y="-4941.36" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;pending_caption:cli -->
<!-- check_translations:cli -->
<g id="node179" class="node">
<title>check_translations:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-4942.96" rx="53.05" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-4941.36" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;check_translations:cli -->
<!-- pending_embed:cli -->
<g id="node180" class="node">
<title>pending_embed:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-4942.96" rx="47.39" ry="18"/>
<text text-anchor="middle" x="4058" y="-4941.36" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_embed:cli -->
<!-- pending_chop:cli -->
<g id="node181" class="node">
<title>pending_chop:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4996.96" rx="42.96" ry="18"/>
<text text-anchor="middle" x="141" y="-4995.36" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- build_site -->
<g id="node182" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-414.96" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4058" y="-411.26" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge299" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4114.12,-414.96C4233.9,-414.96 4523.52,-414.96 4727.09,-414.96"/>
<polygon fill="black" stroke="black" points="4727.32,-418.46 4737.32,-414.96 4727.32,-411.46 4727.32,-418.46"/>
</g>
<!-- caption -->
<g id="node183" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-4386.96" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-4383.26" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge300" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5589.35,-4387.64C5725.68,-4389.77 6144.67,-4396.31 6339.9,-4399.36"/>
<polygon fill="black" stroke="black" points="6340.11,-4402.87 6350.17,-4399.52 6340.22,-4395.87 6340.11,-4402.87"/>
</g>
<!-- check_translations -->
<g id="node184" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4880.96" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-4877.26" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge301" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-4880.96C259.3,-4880.96 282.99,-4880.96 307.97,-4880.96"/>
<polygon fill="black" stroke="black" points="307.99,-4884.46 317.99,-4880.96 307.99,-4877.46 307.99,-4884.46"/>
</g>
<!-- chop -->
<g id="node185" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-2085.96" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-2082.26" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge302" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4979.12,-2085.96C5068.31,-2085.96 5324.07,-2085.96 5458.54,-2085.96"/>
<polygon fill="black" stroke="black" points="5458.8,-2089.46 5468.8,-2085.96 5458.8,-2082.46 5458.8,-2089.46"/>
</g>
<!-- clean_data -->
<g id="node186" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-3675.96" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-3672.26" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge303" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5604.32,-3675.96C5753.21,-3675.96 6146.63,-3675.96 6336.52,-3675.96"/>
<polygon fill="black" stroke="black" points="6336.79,-3679.46 6346.79,-3675.96 6336.79,-3672.46 6336.79,-3679.46"/>
</g>
<!-- debug_dump -->
<g id="node187" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-3815.96" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-3812.26" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge304" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5614.73,-3815.96C5737.35,-3815.96 5998.26,-3815.96 6194.49,-3815.96"/>
<polygon fill="black" stroke="black" points="6194.67,-3819.46 6204.67,-3815.96 6194.67,-3812.46 6194.67,-3819.46"/>
</g>
<!-- embed -->
<g id="node188" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-900.96" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-897.26" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge305" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5586.94,-900.96C5721.76,-900.96 6150.33,-900.96 6344.6,-900.96"/>
<polygon fill="black" stroke="black" points="6344.8,-904.46 6354.8,-900.96 6344.8,-897.46 6344.8,-904.46"/>
</g>
<!-- moderation -->
<g id="node189" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-1656.96" rx="63.89" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-1653.26" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge306" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M5608.54,-1656.96C5724.84,-1656.96 5979.3,-1656.96 6176.65,-1656.96"/>
<polygon fill="black" stroke="black" points="6176.9,-1660.46 6186.9,-1656.96 6176.9,-1653.46 6176.9,-1660.46"/>
</g>
<!-- pending_caption -->
<g id="node190" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-1832.96" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-1829.26" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge307" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5631.87,-1832.96C5761.42,-1832.96 6010.91,-1832.96 6198.96,-1832.96"/>
<polygon fill="black" stroke="black" points="6199,-1836.46 6209,-1832.96 6199,-1829.46 6199,-1836.46"/>
</g>
<!-- pending_chop -->
<g id="node191" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-2213.96" rx="74.99" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-2210.26" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge308" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M5619.25,-2213.96C5760.46,-2213.96 6072.43,-2213.96 6269.06,-2213.96"/>
<polygon fill="black" stroke="black" points="6269.21,-2217.46 6279.21,-2213.96 6269.21,-2210.46 6269.21,-2217.46"/>
</g>
<!-- pending_embed -->
<g id="node192" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-1337.96" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-1334.26" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge309" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5628.63,-1337.96C5750.86,-1337.96 5984.64,-1337.96 6170.31,-1337.96"/>
<polygon fill="black" stroke="black" points="6170.51,-1341.46 6180.51,-1337.96 6170.51,-1334.46 6170.51,-1341.46"/>
</g>
<!-- scan_ontology -->
<g id="node193" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-1980.96" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-1977.26" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge310" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M5022.68,-1980.96C5094.08,-1980.96 5205.26,-1980.96 5306.6,-1980.96"/>
<polygon fill="black" stroke="black" points="5306.69,-1984.46 5316.69,-1980.96 5306.69,-1977.46 5306.69,-1984.46"/>
</g>
<!-- telegram_bot -->
<g id="node194" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-3947.96" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4058" y="-3944.26" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge311" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4129.67,-3945.64C4267.46,-3941.14 4575.61,-3931.06 4771.27,-3924.66"/>
<polygon fill="black" stroke="black" points="4771.49,-3928.15 4781.37,-3924.33 4771.27,-3921.15 4771.49,-3928.15"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge312" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4129.67,-3950.27C4267.36,-3954.77 4575.16,-3964.84 4770.84,-3971.24"/>
<polygon fill="black" stroke="black" points="4770.84,-3974.74 4780.95,-3971.57 4771.07,-3967.75 4770.84,-3974.74"/>
</g>
<!-- tg_client -->
<g id="node195" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-3378.96" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-3375.26" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge313" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-3378.96C232.34,-3378.96 292.58,-3378.96 356.22,-3378.96"/>
<polygon fill="black" stroke="black" points="356.46,-3382.46 366.46,-3378.96 356.46,-3375.46 356.46,-3382.46"/>
</g>
</g>
</svg>
