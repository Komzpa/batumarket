<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10225pt" height="5822pt"
 viewBox="0.00 0.00 10225.00 5821.54" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5817.54)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5817.54 10221,-5817.54 10221,4 -4,4"/>
<!-- message_utils.build_prompt -->
<g id="node1" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node1"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8685.5,-2459.56 8386.5,-2459.56 8386.5,-2423.56 8685.5,-2423.56 8685.5,-2459.56"/>
<text text-anchor="middle" x="8536" y="-2436.77" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node2" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node2"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7710.5,-2342.56 7285.5,-2342.56 7285.5,-2306.56 7710.5,-2306.56 7710.5,-2342.56"/>
<text text-anchor="middle" x="7498" y="-2318.68" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge1" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7710.79,-2315.25C7838.91,-2313.39 7987.85,-2319.07 8043,-2351.56 8069.14,-2366.96 8053.02,-2393.89 8079,-2409.56 8182.54,-2472 8324.35,-2471.46 8422.21,-2460.78"/>
<polygon fill="black" stroke="black" points="8422.89,-2464.22 8432.43,-2459.61 8422.1,-2457.27 8422.89,-2464.22"/>
</g>
<!-- post_io.read_post -->
<g id="node3" class="node">
<title>post_io.read_post</title>
<g id="a_node3"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8815,-1941.56 8257,-1941.56 8257,-1865.56 8815,-1865.56 8815,-1941.56"/>
<text text-anchor="middle" x="8536" y="-1888.39" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge2" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7710.54,-2340.6C7842.28,-2345.64 7995.45,-2340.82 8043,-2296.56 8138.39,-2207.77 7991.43,-2102.07 8079,-2005.56 8122.75,-1957.35 8183.89,-1929.34 8247.21,-1913.6"/>
<polygon fill="black" stroke="black" points="8248.06,-1917 8256.97,-1911.28 8246.43,-1910.19 8248.06,-1917"/>
</g>
<!-- caption_io.read_caption -->
<g id="node4" class="node">
<title>caption_io.read_caption</title>
<g id="a_node4"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8701.5,-2367.06 8370.5,-2367.06 8370.5,-2330.06 8701.5,-2330.06 8701.5,-2367.06"/>
<text text-anchor="middle" x="8536" y="-2342.12" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge3" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7710.52,-2329.46C7902.05,-2333.9 8180.86,-2340.36 8360.1,-2344.51"/>
<polygon fill="black" stroke="black" points="8360.07,-2348.01 8370.15,-2344.74 8360.24,-2341.01 8360.07,-2348.01"/>
</g>
<!-- notes_utils.read_md -->
<g id="node7" class="node">
<title>notes_utils.read_md</title>
<g id="a_node7"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9407.5,-1987.56 9267.5,-1987.56 9267.5,-1951.56 9407.5,-1951.56 9407.5,-1987.56"/>
<text text-anchor="middle" x="9337.5" y="-1966.32" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge4" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8815.22,-1926.53C8971.23,-1939.41 9154.53,-1954.54 9256.93,-1962.99"/>
<polygon fill="black" stroke="black" points="9256.93,-1966.5 9267.19,-1963.84 9257.51,-1959.53 9256.93,-1966.5"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node8" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node8"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9506.5,-1469.06 9168.5,-1469.06 9168.5,-1432.06 9506.5,-1432.06 9506.5,-1469.06"/>
<text text-anchor="middle" x="9337.5" y="-1444.12" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge5" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8736.6,-1865.53C8819.42,-1844.51 8914.33,-1813.32 8993,-1768.56 9135,-1687.75 9265.82,-1537.74 9315.44,-1477.06"/>
<polygon fill="black" stroke="black" points="9318.31,-1479.08 9321.89,-1469.11 9312.87,-1474.67 9318.31,-1479.08"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge51" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8701.74,-2354.38C8799.4,-2348.67 8918.3,-2324.21 8993,-2247.56 9051.46,-2187.57 8972.85,-2124.72 9029,-2062.56 9086.82,-1998.56 9186.99,-1977.94 9257.25,-1971.65"/>
<polygon fill="black" stroke="black" points="9257.71,-1975.13 9267.39,-1970.83 9257.14,-1968.15 9257.71,-1975.13"/>
</g>
<!-- notes_utils.load_json -->
<g id="node14" class="node">
<title>notes_utils.load_json</title>
<g id="a_node14"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9461.5,-3695.56 9213.5,-3695.56 9213.5,-3659.56 9461.5,-3659.56 9461.5,-3695.56"/>
<text text-anchor="middle" x="9337.5" y="-3671.86" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge52" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8701.76,-2339.51C8814.82,-2337.09 8951.64,-2342.92 8993,-2381.56 9034.82,-2420.63 9016.86,-2580.63 9029,-2636.56 9117.94,-3046.35 9284.59,-3530.24 9326.66,-3649.82"/>
<polygon fill="black" stroke="black" points="9323.39,-3651.07 9330.01,-3659.34 9329.99,-3648.74 9323.39,-3651.07"/>
</g>
<!-- caption_io._get_langs -->
<g id="node42" class="node">
<title>caption_io._get_langs</title>
<g id="a_node42"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9446.5,-2396.56 9228.5,-2396.56 9228.5,-2360.56 9446.5,-2360.56 9446.5,-2396.56"/>
<text text-anchor="middle" x="9337.5" y="-2373.78" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge48" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8701.69,-2354.74C8855.54,-2360.51 9081.45,-2368.99 9218.19,-2374.12"/>
<polygon fill="black" stroke="black" points="9218.16,-2377.62 9228.28,-2374.5 9218.42,-2370.63 9218.16,-2377.62"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node43" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node43"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9434,-4460.56 9241,-4460.56 9241,-4424.56 9434,-4424.56 9434,-4460.56"/>
<text text-anchor="middle" x="9337.5" y="-4439.32" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge49" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8701.69,-2338.11C8815.77,-2334.88 8953.89,-2340.3 8993,-2381.56 9066.66,-2459.27 8969.49,-4219.54 9029,-4308.56 9074.05,-4375.95 9161.03,-4409.67 9231.02,-4426.42"/>
<polygon fill="black" stroke="black" points="9230.24,-4429.83 9240.77,-4428.67 9231.82,-4423.01 9230.24,-4429.83"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node44" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node44"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9431,-2342.56 9244,-2342.56 9244,-2306.56 9431,-2306.56 9431,-2342.56"/>
<text text-anchor="middle" x="9337.5" y="-2321.32" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge50" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8701.69,-2343.62C8861.4,-2338.82 9098.76,-2331.7 9233.41,-2327.65"/>
<polygon fill="black" stroke="black" points="9233.84,-2331.14 9243.73,-2327.35 9233.63,-2324.15 9233.84,-2331.14"/>
</g>
<!-- post_io.get_contact -->
<g id="node5" class="node">
<title>post_io.get_contact</title>
<g id="a_node5"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7597.5,-5130.56 7398.5,-5130.56 7398.5,-5094.56 7597.5,-5094.56 7597.5,-5130.56"/>
<text text-anchor="middle" x="7498" y="-5107.78" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node6" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node6"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7669.5,-5242.56 7326.5,-5242.56 7326.5,-5202.56 7669.5,-5202.56 7669.5,-5242.56"/>
<text text-anchor="middle" x="7498" y="-5215.49" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- notes_utils.read_text -->
<g id="node33" class="node">
<title>notes_utils.read_text</title>
<g id="a_node33"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="10056.5,-4525.56 9842.5,-4525.56 9842.5,-4489.56 10056.5,-4489.56 10056.5,-4525.56"/>
<text text-anchor="middle" x="9949.5" y="-4502.78" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge240" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9407.57,-1969.94C9478.78,-1974.34 9587.43,-1993.03 9646,-2062.56 9810.7,-2258.06 9931.59,-4220.66 9946.87,-4479.45"/>
<polygon fill="black" stroke="black" points="9943.38,-4479.76 9947.46,-4489.53 9950.37,-4479.35 9943.38,-4479.76"/>
</g>
<!-- post_io.write_post -->
<g id="node9" class="node">
<title>post_io.write_post</title>
<g id="a_node9"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6573.5,-5242.56 6241.5,-5242.56 6241.5,-5196.56 6573.5,-5196.56 6573.5,-5242.56"/>
<text text-anchor="middle" x="6407.5" y="-5211.12" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge6" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6573.66,-5242.3C6678.04,-5248.88 6812.46,-5242.45 6917,-5186.56 6940.2,-5174.15 6929.7,-5151.79 6953,-5139.56 7025.95,-5101.27 7251.66,-5102.6 7388.36,-5107.35"/>
<polygon fill="black" stroke="black" points="7388.33,-5110.85 7398.45,-5107.71 7388.58,-5103.85 7388.33,-5110.85"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge7" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6573.52,-5220.02C6773.58,-5220.57 7109.55,-5221.49 7316.37,-5222.06"/>
<polygon fill="black" stroke="black" points="7316.42,-5225.56 7326.43,-5222.09 7316.44,-5218.56 7316.42,-5225.56"/>
</g>
<!-- notes_utils.write_md -->
<g id="node10" class="node">
<title>notes_utils.write_md</title>
<g id="a_node10"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7611,-5184.56 7385,-5184.56 7385,-5148.56 7611,-5148.56 7611,-5184.56"/>
<text text-anchor="middle" x="7498" y="-5161.77" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge8" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6573.52,-5211.53C6793.83,-5200.8 7178.97,-5182.05 7374.95,-5172.5"/>
<polygon fill="black" stroke="black" points="7375.18,-5176 7385,-5172.01 7374.84,-5169 7375.18,-5176"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node11" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node11"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8612.5,-3869.56 8459.5,-3869.56 8459.5,-3833.56 8612.5,-3833.56 8612.5,-3869.56"/>
<text text-anchor="middle" x="8536" y="-3848.32" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node12" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node12"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7643,-3452.56 7353,-3452.56 7353,-3416.56 7643,-3416.56 7643,-3452.56"/>
<text text-anchor="middle" x="7498" y="-3430.4" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge9" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7643.11,-3423.55C7784.25,-3416.11 7986.16,-3415.43 8043,-3466.56 8115.68,-3531.94 8016.69,-3608.23 8079,-3683.56 8171.25,-3795.08 8344.61,-3832.58 8448.97,-3845.18"/>
<polygon fill="black" stroke="black" points="8448.82,-3848.69 8459.16,-3846.36 8449.62,-3841.73 8448.82,-3848.69"/>
</g>
<!-- build_site._load_ontology -->
<g id="node13" class="node">
<title>build_site._load_ontology</title>
<g id="a_node13"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="6564,-3135.56 6251,-3135.56 6251,-3099.56 6564,-3099.56 6564,-3135.56"/>
<text text-anchor="middle" x="6407.5" y="-3111.97" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge10" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6564.23,-3117.91C7090.12,-3120.14 8779.33,-3136.23 8993,-3250.56 9169.18,-3344.83 9287.47,-3571.81 9324.29,-3650.3"/>
<polygon fill="black" stroke="black" points="9321.18,-3651.93 9328.56,-3659.54 9327.54,-3648.99 9321.18,-3651.93"/>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge243" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9351.81,-3695.67C9430.58,-3802.85 9835.5,-4353.81 9929.15,-4481.23"/>
<polygon fill="black" stroke="black" points="9926.36,-4483.35 9935.11,-4489.34 9932,-4479.21 9926.36,-4483.35"/>
</g>
<!-- build_site._compile_locale -->
<g id="node15" class="node">
<title>build_site._compile_locale</title>
<g id="a_node15"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="6574.5,-706.56 6240.5,-706.56 6240.5,-670.56 6574.5,-670.56 6574.5,-706.56"/>
<text text-anchor="middle" x="6407.5" y="-682.68" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node16" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node16"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="5733,-709.06 5356,-709.06 5356,-668.06 5733,-668.06 5733,-709.06"/>
<text text-anchor="middle" x="5544.5" y="-681.32" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge11" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M5733.12,-688.56C5880.84,-688.56 6085.28,-688.56 6230.04,-688.56"/>
<polygon fill="black" stroke="black" points="6230.36,-692.06 6240.36,-688.56 6230.36,-685.06 6230.36,-692.06"/>
</g>
<!-- build_site._iter_lots -->
<g id="node17" class="node">
<title>build_site._iter_lots</title>
<g id="a_node17"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7724,-2027.06 7272,-2027.06 7272,-1970.06 7724,-1970.06 7724,-2027.06"/>
<text text-anchor="middle" x="7498" y="-1987.67" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge12" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7724.09,-1982.11C7822.1,-1974.6 7938.29,-1965.23 8043,-1955.56 8108.9,-1949.47 8179.69,-1942.34 8246.47,-1935.34"/>
<polygon fill="black" stroke="black" points="8247.14,-1938.79 8256.72,-1934.27 8246.41,-1931.83 8247.14,-1938.79"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge13" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7724.23,-1984.46C7853.84,-1981.79 7999.44,-1989.95 8043,-2035.56 8106.25,-2101.79 8025.8,-3609.02 8079,-3683.56 8163.87,-3802.48 8342.56,-3837.39 8449.32,-3847.53"/>
<polygon fill="black" stroke="black" points="8449.15,-3851.03 8459.42,-3848.43 8449.78,-3844.05 8449.15,-3851.03"/>
</g>
<!-- lot_io.read_lots -->
<g id="node18" class="node">
<title>lot_io.read_lots</title>
<g id="a_node18"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8642,-2238.56 8430,-2238.56 8430,-2202.56 8642,-2202.56 8642,-2238.56"/>
<text text-anchor="middle" x="8536" y="-2214.4" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge14" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7724.11,-1987.15C7824.24,-1988.79 7942.06,-2000.15 8043,-2035.56 8061.38,-2042.01 8061.65,-2051.7 8079,-2060.56 8204.8,-2124.81 8362.36,-2173.76 8455.5,-2199.74"/>
<polygon fill="black" stroke="black" points="8454.85,-2203.19 8465.42,-2202.48 8456.72,-2196.44 8454.85,-2203.19"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node19" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node19"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8664.5,-2052.06 8407.5,-2052.06 8407.5,-2015.06 8664.5,-2015.06 8664.5,-2052.06"/>
<text text-anchor="middle" x="8536" y="-2027.12" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge15" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7724.12,-2006.17C7929.09,-2013.09 8225.19,-2023.09 8397.09,-2028.9"/>
<polygon fill="black" stroke="black" points="8397.11,-2032.4 8407.22,-2029.24 8397.34,-2025.41 8397.11,-2032.4"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node20" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node20"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8703,-1218.56 8369,-1218.56 8369,-1182.56 8703,-1182.56 8703,-1218.56"/>
<text text-anchor="middle" x="8536" y="-1195.78" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge16" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7724.33,-2010.51C7836.73,-2003.57 7965.01,-1973.71 8043,-1884.56 8114.89,-1802.39 8015.48,-1483.36 8079,-1394.56 8151.98,-1292.54 8289.74,-1243.8 8394.82,-1220.74"/>
<polygon fill="black" stroke="black" points="8395.83,-1224.11 8404.88,-1218.59 8394.37,-1217.26 8395.83,-1224.11"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node21" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node21"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8674,-1759.56 8398,-1759.56 8398,-1723.56 8674,-1723.56 8674,-1759.56"/>
<text text-anchor="middle" x="8536" y="-1736.78" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge17" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7724.31,-1974.76C7825.17,-1958.28 7943.51,-1930.65 8043,-1884.56 8061.39,-1876.04 8060.78,-1865.45 8079,-1856.56 8179.17,-1807.67 8302.19,-1778.22 8395.2,-1761.38"/>
<polygon fill="black" stroke="black" points="8396.01,-1764.79 8405.24,-1759.59 8394.79,-1757.9 8396.01,-1764.79"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge231" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8642.18,-2211.64C8747.27,-2209.07 8905.44,-2223.54 8993,-2320.56 9040.35,-2373.03 9014.94,-2567.3 9029,-2636.56 9112.44,-3047.5 9283.15,-3530.54 9326.38,-3649.88"/>
<polygon fill="black" stroke="black" points="9323.12,-3651.17 9329.83,-3659.38 9329.7,-3648.78 9323.12,-3651.17"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node139" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node139"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9395,-2107.56 9280,-2107.56 9280,-2071.56 9395,-2071.56 9395,-2107.56"/>
<text text-anchor="middle" x="9337.5" y="-2086.32" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge230" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8642.34,-2203.3C8809.47,-2175.92 9130.64,-2123.29 9269.65,-2100.51"/>
<polygon fill="black" stroke="black" points="9270.44,-2103.93 9279.74,-2098.86 9269.3,-2097.02 9270.44,-2103.93"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node165" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node165"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9632.5,-1217.06 9042.5,-1217.06 9042.5,-1172.06 9632.5,-1172.06 9632.5,-1217.06"/>
<text text-anchor="middle" x="9337.5" y="-1186.18" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge276" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8703.14,-1199.31C8798.29,-1198.6 8920.64,-1197.68 9032.4,-1196.84"/>
<polygon fill="black" stroke="black" points="9032.52,-1200.34 9042.49,-1196.77 9032.46,-1193.34 9032.52,-1200.34"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node166" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node166"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9514,-1325.56 9161,-1325.56 9161,-1289.56 9514,-1289.56 9514,-1325.56"/>
<text text-anchor="middle" x="9337.5" y="-1301.68" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge277" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8674.13,-1748.93C8777.3,-1746.45 8913.97,-1724.59 8993,-1636.56 9083.3,-1535.97 8931.95,-1428.65 9029,-1334.56 9085.3,-1279.99 9177.68,-1278.97 9246.52,-1288.12"/>
<polygon fill="black" stroke="black" points="9246.1,-1291.6 9256.49,-1289.54 9247.09,-1284.67 9246.1,-1291.6"/>
</g>
<!-- build_site._copy_images -->
<g id="node22" class="node">
<title>build_site._copy_images</title>
<g id="a_node22"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="7661.5,-1875.56 7334.5,-1875.56 7334.5,-1839.56 7661.5,-1839.56 7661.5,-1875.56"/>
<text text-anchor="middle" x="7498" y="-1851.4" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node23" class="node">
<title>build_site._copy_static</title>
<g id="a_node23"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="6535.5,-425.56 6279.5,-425.56 6279.5,-389.56 6535.5,-389.56 6535.5,-425.56"/>
<text text-anchor="middle" x="6407.5" y="-402.26" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node24" class="node">
<title>build_site._load_state</title>
<g id="a_node24"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="5694,-3091.06 5395,-3091.06 5395,-3054.06 5694,-3054.06 5694,-3091.06"/>
<text text-anchor="middle" x="5544.5" y="-3066.12" font-family="Times,serif" font-size="26.18">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge18" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M5694,-3080.32C5846.16,-3088.27 6082.25,-3100.61 6240.49,-3108.88"/>
<polygon fill="black" stroke="black" points="6240.63,-3112.4 6250.8,-3109.42 6241,-3105.41 6240.63,-3112.4"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge19" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M5623.78,-3091.07C5696.23,-3103.08 5801.58,-3106.6 5862,-3044.56 5952.41,-2951.73 5811.47,-2559.01 5898,-2462.56 6204.87,-2120.52 6596.68,-2617.04 6917,-2287.56 6995.86,-2206.44 6870.1,-2112.55 6953,-2035.56 7066.04,-1930.59 7255.61,-1944.27 7378.46,-1968.07"/>
<polygon fill="black" stroke="black" points="7377.8,-1971.51 7388.29,-1970.03 7379.17,-1964.65 7377.8,-1971.51"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge20" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M5622.67,-3091.1C5695.34,-3103.48 5801.8,-3107.58 5862,-3044.56 5926.99,-2976.53 5839.84,-2272.52 5898,-2198.56 6199.64,-1814.99 6472.42,-1979.15 6953,-1894.56 7075.94,-1872.92 7216.58,-1863.76 7324.05,-1859.96"/>
<polygon fill="black" stroke="black" points="7324.47,-1863.45 7334.35,-1859.61 7324.23,-1856.45 7324.47,-1863.45"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node25" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node25"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8792,-3674.56 8280,-3674.56 8280,-3632.56 8792,-3632.56 8792,-3674.56"/>
<text text-anchor="middle" x="8536" y="-3645.47" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge21" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5605.17,-3091.1C5673.43,-3114.63 5785.6,-3160.64 5862,-3229.56 5884.25,-3249.63 5874.43,-3268.06 5898,-3286.56 6287.01,-3591.98 6465.22,-3558.85 6953,-3640.56 7198.01,-3681.6 7886.68,-3671.13 8269.67,-3661.46"/>
<polygon fill="black" stroke="black" points="8269.88,-3664.95 8279.79,-3661.2 8269.7,-3657.96 8269.88,-3664.95"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node26" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node26"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7747,-3280.56 7249,-3280.56 7249,-3232.56 7747,-3232.56 7747,-3280.56"/>
<text text-anchor="middle" x="7498" y="-3247.44" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge22" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M5622.03,-3091.11C5693.11,-3107.65 5802.11,-3131.23 5898,-3144.56 6149.35,-3179.5 6854.15,-3221.5 7238.72,-3242.77"/>
<polygon fill="black" stroke="black" points="7238.7,-3246.27 7248.87,-3243.33 7239.08,-3239.28 7238.7,-3246.27"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node27" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node27"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8795,-3026.06 8277,-3026.06 8277,-2981.06 8795,-2981.06 8795,-3026.06"/>
<text text-anchor="middle" x="8536" y="-2995.18" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge23" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M5694.13,-3075.73C6081.27,-3083 7152.59,-3096.92 8043,-3050.56 8137.47,-3045.64 8241.83,-3036.24 8330.03,-3027.13"/>
<polygon fill="black" stroke="black" points="8330.57,-3030.6 8340.15,-3026.08 8329.84,-3023.63 8330.57,-3030.6"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge142" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8792.16,-3661.22C8928.77,-3665.32 9091.4,-3670.2 9203.11,-3673.56"/>
<polygon fill="black" stroke="black" points="9203.32,-3677.06 9213.42,-3673.87 9203.53,-3670.07 9203.32,-3677.06"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge143" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7747.37,-3252.46C8113.02,-3249.82 8776.31,-3258.94 8993,-3353.56 9146.19,-3420.46 9273.27,-3586.34 9318.65,-3651.08"/>
<polygon fill="black" stroke="black" points="9315.93,-3653.3 9324.5,-3659.53 9321.68,-3649.32 9315.93,-3653.3"/>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge144" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8689.07,-2981.05C8783.81,-2974.99 8904.14,-2982.52 8993,-3040.56 9222.36,-3190.37 9310.2,-3547.07 9331.21,-3649.57"/>
<polygon fill="black" stroke="black" points="9327.8,-3650.36 9333.19,-3659.48 9334.66,-3648.98 9327.8,-3650.36"/>
</g>
<!-- build_site._categorise -->
<g id="node28" class="node">
<title>build_site._categorise</title>
<g id="a_node28"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="7937,-723.56 7059,-723.56 7059,-629.56 7937,-629.56 7937,-723.56"/>
<text text-anchor="middle" x="7498" y="-656.95" font-family="Times,serif" font-size="78.26">build_site._categorise</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node29" class="node">
<title>lot_io.get_seller</title>
<g id="a_node29"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8636.5,-912.56 8435.5,-912.56 8435.5,-876.56 8636.5,-876.56 8636.5,-912.56"/>
<text text-anchor="middle" x="8536" y="-888.97" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge24" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7774.95,-723.62C7861.01,-739.14 7956.13,-757.17 8043,-775.56 8189.7,-806.62 8359.43,-849.15 8456.31,-874.05"/>
<polygon fill="black" stroke="black" points="8455.47,-877.45 8466.03,-876.56 8457.22,-870.67 8455.47,-877.45"/>
</g>
<!-- build_site._render_site -->
<g id="node30" class="node">
<title>build_site._render_site</title>
<g id="a_node30"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="6917,-1265.56 5898,-1265.56 5898,-1161.56 6917,-1161.56 6917,-1265.56"/>
<text text-anchor="middle" x="6407.5" y="-1191.67" font-family="Times,serif" font-size="87.36">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge27" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6907.79,-1161.19C6910.92,-1158.4 6913.99,-1155.53 6917,-1152.56 7002.58,-1068.18 6862.54,-963.68 6953,-884.56 7044.16,-804.83 7921.9,-883.33 8043,-884.56 8174.32,-885.89 8325.33,-889.23 8425.04,-891.69"/>
<polygon fill="black" stroke="black" points="8425.04,-895.19 8435.12,-891.94 8425.21,-888.19 8425.04,-895.19"/>
</g>
<!-- build_site.build_page -->
<g id="node31" class="node">
<title>build_site.build_page</title>
<g id="a_node31"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="7967.5,-1669.56 7028.5,-1669.56 7028.5,-1567.56 7967.5,-1567.56 7967.5,-1669.56"/>
<text text-anchor="middle" x="7498" y="-1597.02" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge25" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6907.82,-1265.9C6910.94,-1268.7 6914,-1271.58 6917,-1274.56 7007.27,-1364.23 6862.31,-1469.33 6953,-1558.56 6972.83,-1578.07 6995.24,-1593.91 7019.38,-1606.65"/>
<polygon fill="black" stroke="black" points="7017.85,-1609.79 7028.35,-1611.2 7021.02,-1603.55 7017.85,-1609.79"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node32" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node32"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8664.5,-1627.56 8407.5,-1627.56 8407.5,-1591.56 8664.5,-1591.56 8664.5,-1627.56"/>
<text text-anchor="middle" x="8536" y="-1605.4" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge26" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6906.29,-1265.6C6909.93,-1268.49 6913.5,-1271.47 6917,-1274.56 6966.48,-1318.19 6901.81,-1376.94 6953,-1418.56 7047.05,-1495.02 7946.48,-1388.25 8043,-1461.56 8084.64,-1493.19 8037.99,-1541.12 8079,-1573.56 8183.02,-1655.85 8345.4,-1646.09 8445.72,-1629.36"/>
<polygon fill="black" stroke="black" points="8446.57,-1632.77 8455.83,-1627.62 8445.38,-1625.87 8446.57,-1632.77"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge28" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6907.86,-1161.26C6910.97,-1158.45 6914.02,-1155.55 6917,-1152.56 7014.01,-1055.29 6850.36,-936.87 6953,-845.56 7122.36,-694.9 8769.77,-828.15 8993,-867.56 9294.73,-920.83 9462.06,-843.52 9646,-1088.56 9673.68,-1125.43 9678.64,-1871.58 9682,-1917.56 9759.42,-2976.64 9919.17,-4273.02 9944.95,-4479.32"/>
<polygon fill="black" stroke="black" points="9941.49,-4479.85 9946.21,-4489.33 9948.44,-4478.98 9941.49,-4479.85"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge29" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7967.69,-1640.44C7994.42,-1651.93 8019.81,-1666.13 8043,-1683.56 8075.8,-1708.21 8048.4,-1741.23 8079,-1768.56 8128.49,-1812.76 8191.86,-1842.52 8255.5,-1862.54"/>
<polygon fill="black" stroke="black" points="8254.72,-1865.96 8265.31,-1865.55 8256.77,-1859.27 8254.72,-1865.96"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge31" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7794.71,-1669.56C7888.36,-1700.58 7983.01,-1750.43 8043,-1830.56 8098.74,-1905.02 8017.71,-2177.6 8079,-2247.56 8147.83,-2326.12 8262.85,-2351.2 8360.15,-2356.72"/>
<polygon fill="black" stroke="black" points="8360.25,-2360.23 8370.41,-2357.23 8360.6,-2353.23 8360.25,-2360.23"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge30" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7804.54,-1669.61C7896.18,-1700.61 7987.09,-1750.45 8043,-1830.56 8101.93,-1915 8019.29,-3599.68 8079,-3683.56 8163.72,-3802.58 8342.47,-3837.45 8449.28,-3847.56"/>
<polygon fill="black" stroke="black" points="8449.11,-3851.06 8459.38,-3848.46 8449.73,-3844.09 8449.11,-3851.06"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge32" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7967.74,-1614.49C8124.01,-1613.13 8286.31,-1611.72 8397.06,-1610.76"/>
<polygon fill="black" stroke="black" points="8397.31,-1614.26 8407.28,-1610.67 8397.25,-1607.26 8397.31,-1614.26"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge239" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9842.38,-4524.04C9817.57,-4534.07 9853.28,-4543.56 9949.5,-4543.56 10023.17,-4543.56 10061.37,-4538 10064.09,-4530.89"/>
<polygon fill="black" stroke="black" points="10066.36,-4528.22 10056.62,-4524.04 10061.63,-4533.38 10066.36,-4528.22"/>
</g>
<!-- build_site.main -->
<g id="node34" class="node">
<title>build_site.main</title>
<g id="a_node34"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5155.5,-653.06 4737.5,-653.06 4737.5,-588.06 5155.5,-588.06 5155.5,-653.06"/>
<text text-anchor="middle" x="4946.5" y="-607.51" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge33" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5155.82,-645.33C5179.82,-648.13 5203.94,-650.92 5227,-653.56 5265.36,-657.95 5306.34,-662.54 5345.66,-666.91"/>
<polygon fill="black" stroke="black" points="5345.29,-670.39 5355.61,-668.01 5346.06,-663.43 5345.29,-670.39"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge34" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M4983.43,-587.78C5033.61,-544.38 5129.55,-469.8 5227,-439.56 5417.57,-380.42 6001.12,-392.76 6269.2,-402.03"/>
<polygon fill="black" stroke="black" points="6269.27,-405.54 6279.39,-402.39 6269.52,-398.54 6269.27,-405.54"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge35" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M4953.71,-653.16C4985.24,-820.11 5128.51,-1596.41 5191,-2238.56 5195.34,-2283.17 5196,-3012.18 5227,-3044.56 5284.56,-3104.69 5384.24,-3103.66 5456.37,-3092.68"/>
<polygon fill="black" stroke="black" points="5457.05,-3096.12 5466.36,-3091.07 5455.93,-3089.21 5457.05,-3096.12"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge36" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5155.58,-624.55C5514.87,-631.51 6274.85,-646.57 6917,-661.56 6959.71,-662.56 7004.2,-663.64 7048.69,-664.74"/>
<polygon fill="black" stroke="black" points="7048.7,-668.24 7058.78,-664.99 7048.87,-661.24 7048.7,-668.24"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge37" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M4991.03,-653.32C5120.8,-749.05 5519.5,-1029.3 5898,-1152.56 5904.46,-1154.66 5910.99,-1156.7 5917.58,-1158.66"/>
<polygon fill="black" stroke="black" points="5916.69,-1162.05 5927.27,-1161.49 5918.65,-1155.33 5916.69,-1162.05"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node35" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node35"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7736.5,-3214.56 7259.5,-3214.56 7259.5,-3174.56 7736.5,-3174.56 7736.5,-3214.56"/>
<text text-anchor="middle" x="7498" y="-3187.49" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge38" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M4953.74,-653.16C4985.44,-820.09 5129.43,-1596.32 5191,-2238.56 5195.57,-2286.22 5193.58,-3065.28 5227,-3099.56 5365.56,-3241.65 6689.32,-3219.04 7249.06,-3202.88"/>
<polygon fill="black" stroke="black" points="7249.39,-3206.37 7259.28,-3202.58 7249.18,-3199.37 7249.39,-3206.37"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node36" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node36"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="8715.5,-485.56 8356.5,-485.56 8356.5,-449.56 8715.5,-449.56 8715.5,-485.56"/>
<text text-anchor="middle" x="8536" y="-461.86" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge39" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5155.7,-594.61C5179.72,-592.02 5203.88,-589.6 5227,-587.56 5418.36,-570.68 6761.01,-493.33 6953,-486.56 7455.9,-468.84 8049.21,-466.75 8345.98,-467"/>
<polygon fill="black" stroke="black" points="8346.4,-470.5 8356.41,-467.01 8346.41,-463.5 8346.4,-470.5"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node37" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node37"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="5862,-535.06 5227,-535.06 5227,-482.06 5862,-482.06 5862,-535.06"/>
<text text-anchor="middle" x="5544.5" y="-498.36" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge40" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5062.73,-587.98C5112.89,-574.66 5172.54,-559.97 5227,-549.56 5251.73,-544.83 5277.66,-540.5 5303.57,-536.55"/>
<polygon fill="black" stroke="black" points="5304.13,-540.01 5313.5,-535.06 5303.09,-533.09 5304.13,-540.01"/>
</g>
<!-- price_utils.load_price_model -->
<g id="node38" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node38"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="6642,-2693.56 6173,-2693.56 6173,-2651.56 6642,-2651.56 6642,-2693.56"/>
<text text-anchor="middle" x="6407.5" y="-2664.47" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge41" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M4947.21,-653.52C4947.5,-799.92 4965.24,-1400.84 5227,-1784.56 5420.92,-2068.83 5687.64,-1930.89 5862,-2227.56 5902.18,-2295.92 5844.05,-2524.45 5898,-2582.56 5964.72,-2654.42 6067.26,-2681.31 6162.82,-2688.53"/>
<polygon fill="black" stroke="black" points="6162.72,-2692.03 6172.94,-2689.22 6163.2,-2685.05 6162.72,-2692.03"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node39" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node39"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6768,-371.06 6047,-371.06 6047,-312.06 6768,-312.06 6768,-371.06"/>
<text text-anchor="middle" x="6407.5" y="-329.88" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge42" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M4974.27,-587.73C5019.74,-534.79 5117.82,-432.29 5227,-390.56 5369.85,-335.97 5746.96,-328.37 6036.68,-331.53"/>
<polygon fill="black" stroke="black" points="6036.9,-335.04 6046.94,-331.65 6036.98,-328.04 6036.9,-335.04"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node40" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node40"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="7868,-439.56 7128,-439.56 7128,-381.56 7868,-381.56 7868,-439.56"/>
<text text-anchor="middle" x="7498" y="-399.27" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge43" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M4992.7,-588.04C5045.81,-551.94 5138,-495.74 5227,-472.56 5408.76,-425.23 6729.27,-440.55 6917,-434.56 6981.79,-432.49 7050.64,-429.95 7117.42,-427.3"/>
<polygon fill="black" stroke="black" points="7117.83,-430.78 7127.69,-426.89 7117.55,-423.79 7117.83,-430.78"/>
</g>
<!-- config_utils.load_config -->
<g id="node41" class="node">
<title>config_utils.load_config</title>
<g id="a_node41"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10166,-1909.06 9733,-1909.06 9733,-1862.06 10166,-1862.06 10166,-1909.06"/>
<text text-anchor="middle" x="9949.5" y="-1877.06" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge44" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5155.57,-616.15C5438.61,-610.53 5960.81,-601.56 6406.5,-601.56 6406.5,-601.56 6406.5,-601.56 8537,-601.56 9044.18,-601.56 9317.31,-484.3 9646,-870.56 9713.17,-949.49 9654.93,-1235.52 9682,-1335.56 9738.69,-1545.1 9874.97,-1770.98 9927.43,-1853.27"/>
<polygon fill="black" stroke="black" points="9924.62,-1855.38 9932.96,-1861.91 9930.51,-1851.6 9924.62,-1855.38"/>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge267" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6642.09,-2667.78C6729.27,-2670.35 6828.53,-2678.5 6917,-2698.56 6933.9,-2702.39 6936.04,-2709.96 6953,-2713.56 7063.89,-2737.1 8900.59,-2695.9 8993,-2761.56 9303.43,-2982.13 9333.58,-3518.99 9336.29,-3648.91"/>
<polygon fill="black" stroke="black" points="9332.79,-3649.27 9336.46,-3659.21 9339.79,-3649.15 9332.79,-3649.27"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node156" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node156"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="8043,-573.06 6953,-573.06 6953,-496.06 8043,-496.06 8043,-573.06"/>
<text text-anchor="middle" x="7498" y="-518.66" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge269" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6768.16,-323.92C6821.03,-333.82 6872.57,-351.44 6917,-380.56 6945.6,-399.31 6925.18,-428.68 6953,-448.56 6977.2,-465.85 7003.56,-480.21 7031.18,-492.09"/>
<polygon fill="black" stroke="black" points="7030.02,-495.4 7040.6,-496.03 7032.72,-488.94 7030.02,-495.4"/>
</g>
<!-- price_utils.predict_price -->
<g id="node160" class="node">
<title>price_utils.predict_price</title>
<g id="a_node160"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7703,-363.06 7293,-363.06 7293,-320.06 7703,-320.06 7703,-363.06"/>
<text text-anchor="middle" x="7498" y="-333.41" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge270" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6768.31,-341.56C6938.69,-341.56 7136.41,-341.56 7282.87,-341.56"/>
<polygon fill="black" stroke="black" points="7282.89,-345.06 7292.89,-341.56 7282.89,-338.06 7282.89,-345.06"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node161" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node161"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8729.5,-316.06 8342.5,-316.06 8342.5,-277.06 8729.5,-277.06 8729.5,-316.06"/>
<text text-anchor="middle" x="8536" y="-289.66" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge271" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6768.28,-318.63C6829.88,-315.4 6893.26,-312.52 6953,-310.56 7448.19,-294.28 8031.02,-293.99 8332.1,-295.24"/>
<polygon fill="black" stroke="black" points="8332.23,-298.74 8342.25,-295.29 8332.26,-291.74 8332.23,-298.74"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node163" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node163"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9594,-267.56 9081,-267.56 9081,-229.56 9594,-229.56 9594,-267.56"/>
<text text-anchor="middle" x="9337.5" y="-241.83" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge272" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6768.17,-323.89C6818.39,-318.54 6869.15,-311.59 6917,-302.56 6933.44,-299.46 6936.48,-294.21 6953,-291.56 7353.41,-227.38 8537.49,-236.26 9070.81,-243.96"/>
<polygon fill="black" stroke="black" points="9070.9,-247.46 9080.95,-244.1 9071,-240.46 9070.9,-247.46"/>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge273" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7868.27,-430.88C8029.99,-439.78 8212.85,-449.84 8346.11,-457.17"/>
<polygon fill="black" stroke="black" points="8346.25,-460.68 8356.43,-457.74 8346.63,-453.69 8346.25,-460.68"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge45" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9446.7,-2391.52C9509.13,-2393.76 9586.75,-2387.18 9646,-2351.56 9817.16,-2248.66 9909.33,-2007.38 9938.32,-1918.87"/>
<polygon fill="black" stroke="black" points="9941.74,-1919.68 9941.47,-1909.09 9935.08,-1917.54 9941.74,-1919.68"/>
</g>
<!-- caption_io.has_caption -->
<g id="node45" class="node">
<title>caption_io.has_caption</title>
<g id="a_node45"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8613.5,-4460.56 8458.5,-4460.56 8458.5,-4424.56 8613.5,-4424.56 8613.5,-4460.56"/>
<text text-anchor="middle" x="8536" y="-4439.32" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge46" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8613.66,-4442.56C8757.31,-4442.56 9067.23,-4442.56 9230.67,-4442.56"/>
<polygon fill="black" stroke="black" points="9230.74,-4446.06 9240.74,-4442.56 9230.74,-4439.06 9230.74,-4446.06"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge47" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8613.88,-4449.93C8730.18,-4459.18 8942.63,-4468.07 8993,-4415.56 9072.39,-4332.79 8950.8,-2435.45 9029,-2351.56 9084.55,-2291.97 9182.57,-2293.63 9253.02,-2304.81"/>
<polygon fill="black" stroke="black" points="9252.76,-2308.32 9263.21,-2306.52 9253.92,-2301.42 9252.76,-2308.32"/>
</g>
<!-- caption_io.write_caption -->
<g id="node46" class="node">
<title>caption_io.write_caption</title>
<g id="a_node46"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="7664.5,-4316.56 7331.5,-4316.56 7331.5,-4280.56 7664.5,-4280.56 7664.5,-4316.56"/>
<text text-anchor="middle" x="7498" y="-4292.4" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge55" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7664.55,-4291.53C7772.39,-4286.59 7916.1,-4279.3 8043,-4270.56 8254.4,-4256 8810.45,-4296.14 8993,-4188.56 9189.88,-4072.53 9297.49,-3793.93 9327.62,-3705.2"/>
<polygon fill="black" stroke="black" points="9330.99,-3706.17 9330.84,-3695.57 9324.35,-3703.95 9330.99,-3706.17"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge53" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M7664.76,-4308.62C7801.97,-4313.62 7983.66,-4311.53 8043,-4270.56 8075.75,-4247.95 8046.07,-4210.92 8079,-4188.56 8163.07,-4131.47 8921.62,-4227.89 8993,-4155.56 9054.55,-4093.18 8986.34,-2655.11 9029,-2578.56 9081,-2485.26 9196.85,-2428.37 9270.57,-2400.22"/>
<polygon fill="black" stroke="black" points="9272.1,-2403.39 9280.23,-2396.61 9269.64,-2396.83 9272.1,-2403.39"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge54" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7664.63,-4305.77C7780.64,-4310.8 7939.28,-4317.64 8079,-4323.56 8180.55,-4327.86 8896.96,-4328.29 8993,-4361.56 9011.65,-4368.02 9010.83,-4379.85 9029,-4387.56 9092.96,-4414.7 9169.92,-4428.45 9230.85,-4435.41"/>
<polygon fill="black" stroke="black" points="9230.54,-4438.9 9240.87,-4436.51 9231.31,-4431.94 9230.54,-4438.9"/>
</g>
<!-- notes_utils.write_json -->
<g id="node47" class="node">
<title>notes_utils.write_json</title>
<g id="a_node47"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="8630,-2900.56 8442,-2900.56 8442,-2864.56 8630,-2864.56 8630,-2900.56"/>
<text text-anchor="middle" x="8536" y="-2878.52" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge56" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7664.69,-4313.56C7805.29,-4322.21 7992.08,-4322.7 8043,-4270.56 8143.88,-4167.26 7985.67,-3081.73 8079,-2971.56 8163.98,-2871.25 8325.6,-2862.59 8431.82,-2869.55"/>
<polygon fill="black" stroke="black" points="8431.7,-2873.05 8441.92,-2870.26 8432.19,-2866.06 8431.7,-2873.05"/>
</g>
<!-- clean_data._parse_date -->
<g id="node48" class="node">
<title>clean_data._parse_date</title>
<g id="a_node48"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8675.5,-4314.56 8396.5,-4314.56 8396.5,-4278.56 8675.5,-4278.56 8675.5,-4314.56"/>
<text text-anchor="middle" x="8536" y="-4290.86" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge57" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8675.7,-4300.11C8766.19,-4303.28 8886.8,-4309.1 8993,-4319.56 9284.93,-4348.32 9359.77,-4351.37 9646,-4415.56 9731.11,-4434.65 9827.11,-4465.49 9887.69,-4486.13"/>
<polygon fill="black" stroke="black" points="9886.88,-4489.55 9897.47,-4489.48 9889.15,-4482.93 9886.88,-4489.55"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node49" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node49"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7651.5,-4202.56 7344.5,-4202.56 7344.5,-4166.56 7651.5,-4166.56 7651.5,-4202.56"/>
<text text-anchor="middle" x="7498" y="-4178.4" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge58" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7651.77,-4181.7C7762.64,-4175.96 7915.01,-4160.4 8043,-4119.56 8055.12,-4115.69 8376.39,-3938.96 8493.12,-3874.65"/>
<polygon fill="black" stroke="black" points="8495.07,-3877.57 8502.14,-3869.68 8491.69,-3871.44 8495.07,-3877.57"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge59" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7651.52,-4187.18C7760.79,-4190.26 7911.3,-4196.97 8043,-4211.56 8181.69,-4226.92 8340.49,-4256.57 8439.28,-4276.47"/>
<polygon fill="black" stroke="black" points="8438.75,-4279.93 8449.24,-4278.48 8440.13,-4273.07 8438.75,-4279.93"/>
</g>
<!-- clean_data._clean_media -->
<g id="node50" class="node">
<title>clean_data._clean_media</title>
<g id="a_node50"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7688,-4412.56 7308,-4412.56 7308,-4372.56 7688,-4372.56 7688,-4412.56"/>
<text text-anchor="middle" x="7498" y="-4385.49" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge60" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7688.11,-4401.69C7913.83,-4412.58 8281.61,-4430.33 8448.16,-4438.37"/>
<polygon fill="black" stroke="black" points="8448.2,-4441.88 8458.36,-4438.86 8448.54,-4434.88 8448.2,-4441.88"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge61" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7688.11,-4375.04C7889.03,-4356.42 8202.5,-4327.37 8386.43,-4310.33"/>
<polygon fill="black" stroke="black" points="8386.81,-4313.81 8396.45,-4309.4 8386.16,-4306.84 8386.81,-4313.81"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node51" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node51"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7700,-3344.56 7296,-3344.56 7296,-3298.56 7700,-3298.56 7700,-3344.56"/>
<text text-anchor="middle" x="7498" y="-3313.12" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge62" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7700.09,-3307.31C7834.27,-3302.54 7994.63,-3307.55 8043,-3353.56 8096.45,-3404.4 8033.58,-3625.43 8079,-3683.56 8168.44,-3798.04 8343.87,-3834.52 8449.15,-3846.14"/>
<polygon fill="black" stroke="black" points="8448.8,-3849.62 8459.11,-3847.19 8449.53,-3842.66 8448.8,-3849.62"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge64" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7700.03,-3336.79C7834.92,-3342.13 7996.18,-3337.4 8043,-3289.56 8118.36,-3212.56 8009.92,-2403.24 8079,-2320.56 8160.55,-2222.95 8313.49,-2207.44 8419.64,-2210.05"/>
<polygon fill="black" stroke="black" points="8419.66,-2213.55 8429.76,-2210.35 8419.87,-2206.55 8419.66,-2213.55"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node52" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node52"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8625.5,-3118.56 8446.5,-3118.56 8446.5,-3082.56 8625.5,-3082.56 8625.5,-3118.56"/>
<text text-anchor="middle" x="8536" y="-3096.52" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge63" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7700.26,-3324.41C7803.72,-3322.19 7931.22,-3313.71 8043,-3289.56 8214.77,-3252.45 8405.71,-3164.65 8490.39,-3123.1"/>
<polygon fill="black" stroke="black" points="8492.04,-3126.19 8499.46,-3118.63 8488.94,-3119.91 8492.04,-3126.19"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node53" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node53"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7706,-4110.56 7290,-4110.56 7290,-4074.56 7706,-4074.56 7706,-4110.56"/>
<text text-anchor="middle" x="7498" y="-4086.4" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node54" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node54"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8749.5,-4146.56 8322.5,-4146.56 8322.5,-4110.56 8749.5,-4110.56 8749.5,-4146.56"/>
<text text-anchor="middle" x="8536" y="-4122.4" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node55" class="node">
<title>clean_data.main</title>
<g id="a_node55"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6503.5,-4202.56 6311.5,-4202.56 6311.5,-4166.56 6503.5,-4166.56 6503.5,-4202.56"/>
<text text-anchor="middle" x="6407.5" y="-4179.26" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge65" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6503.67,-4184.56C6689.72,-4184.56 7103.54,-4184.56 7334.03,-4184.56"/>
<polygon fill="black" stroke="black" points="7334.19,-4188.06 7344.19,-4184.56 7334.19,-4181.06 7334.19,-4188.06"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge66" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6452.36,-4202.69C6543.66,-4239.5 6761.59,-4322.57 6953,-4358.56 7065.84,-4379.78 7193.92,-4388.52 7297.45,-4391.85"/>
<polygon fill="black" stroke="black" points="7297.6,-4395.35 7307.71,-4392.16 7297.82,-4388.36 7297.6,-4395.35"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge67" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6491.91,-4202.64C6606.26,-4221.97 6809.71,-4235.82 6917,-4119.56 6974.79,-4056.95 6893.11,-3414.16 6953,-3353.56 6998.82,-3307.2 7152.9,-3301.48 7285.44,-3306.07"/>
<polygon fill="black" stroke="black" points="7285.63,-3309.58 7295.75,-3306.45 7285.89,-3302.59 7285.63,-3309.58"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge68" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6503.84,-4194.9C6608.72,-4202.6 6780.5,-4204.24 6917,-4152.56 6935.96,-4145.38 6934.03,-4131.7 6953,-4124.56 7055.94,-4085.83 7177.57,-4075.67 7279.69,-4076.13"/>
<polygon fill="black" stroke="black" points="7279.8,-4079.63 7289.82,-4076.21 7279.85,-4072.63 7279.8,-4079.63"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge69" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6503.87,-4178.93C6612.55,-4172.72 6795.5,-4162.91 6953,-4157.56 7437.38,-4141.12 8005.53,-4133.56 8311.9,-4130.46"/>
<polygon fill="black" stroke="black" points="8312.28,-4133.95 8322.24,-4130.35 8312.21,-4126.95 8312.28,-4133.95"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node56" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node56"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7613.5,-220.56 7382.5,-220.56 7382.5,-184.56 7613.5,-184.56 7613.5,-220.56"/>
<text text-anchor="middle" x="7498" y="-198.52" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node57" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node57"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6549,-239.56 6266,-239.56 6266,-203.56 6549,-203.56 6549,-239.56"/>
<text text-anchor="middle" x="6407.5" y="-215.97" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge70" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6549.13,-219.11C6763.33,-215.37 7167.96,-208.3 7372.27,-204.74"/>
<polygon fill="black" stroke="black" points="7372.5,-208.23 7382.44,-204.56 7372.38,-201.24 7372.5,-208.23"/>
</g>
<!-- log_utils.init_logger -->
<g id="node58" class="node">
<title>log_utils.init_logger</title>
<g id="a_node58"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6755,-131.56 6060,-131.56 6060,-49.56 6755,-49.56 6755,-131.56"/>
<text text-anchor="middle" x="6407.5" y="-73.58" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge71" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6755.24,-124.26C6809.39,-129.64 6864.72,-135.2 6917,-140.56 7073.99,-156.67 7254.76,-176.14 7372.2,-188.91"/>
<polygon fill="black" stroke="black" points="7371.99,-192.41 7382.31,-190.01 7372.74,-185.45 7371.99,-192.41"/>
</g>
<!-- log_utils.get_logger -->
<g id="node59" class="node">
<title>log_utils.get_logger</title>
<g id="a_node59"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7566.5,-108.56 7429.5,-108.56 7429.5,-72.56 7566.5,-72.56 7566.5,-108.56"/>
<text text-anchor="middle" x="7498" y="-87.32" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge72" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6755.15,-84.22C6990.04,-83.2 7281.74,-84.08 7418.86,-86.86"/>
<polygon fill="black" stroke="black" points="7419.19,-90.37 7429.26,-87.08 7419.34,-83.37 7419.19,-90.37"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge73" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7429.26,-94.04C7298.85,-96.95 7004.64,-97.92 6765.43,-96.94"/>
<polygon fill="black" stroke="black" points="6765.17,-93.44 6755.15,-96.9 6765.14,-100.44 6765.17,-93.44"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node60" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node60"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6594,-293.56 6221,-293.56 6221,-257.56 6594,-257.56 6594,-293.56"/>
<text text-anchor="middle" x="6407.5" y="-269.4" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge74" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6594.24,-279.76C6691.38,-278.43 6811.67,-271.23 6917,-248.56 6933.78,-244.95 6936.23,-238.22 6953,-234.56 7094.29,-203.73 7260.79,-198.31 7372.03,-198.95"/>
<polygon fill="black" stroke="black" points="7372.26,-202.45 7382.29,-199.02 7372.32,-195.45 7372.26,-202.45"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node61" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node61"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="5039.5,-3972.56 4853.5,-3972.56 4853.5,-3936.56 5039.5,-3936.56 5039.5,-3972.56"/>
<text text-anchor="middle" x="4946.5" y="-3950.86" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node62" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node62"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-2363.56 1260.5,-2363.56 1260.5,-2327.56 1490.5,-2327.56 1490.5,-2363.56"/>
<text text-anchor="middle" x="1375.5" y="-2340.26" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node63" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node63"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5130,-5324.06 4763,-5324.06 4763,-5287.06 5130,-5287.06 5130,-5324.06"/>
<text text-anchor="middle" x="4946.5" y="-5299.12" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node64" class="node">
<title>tg_client._write_md</title>
<g id="a_node64"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5613,-5324.56 5476,-5324.56 5476,-5288.56 5613,-5288.56 5613,-5324.56"/>
<text text-anchor="middle" x="5544.5" y="-5303.32" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge75" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5613.06,-5299.73C5744.89,-5286.41 6040.2,-5256.57 6231,-5237.29"/>
<polygon fill="black" stroke="black" points="6231.55,-5240.76 6241.14,-5236.27 6230.84,-5233.79 6231.55,-5240.76"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node65" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node65"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7737.5,-4018.06 7258.5,-4018.06 7258.5,-3975.06 7737.5,-3975.06 7737.5,-4018.06"/>
<text text-anchor="middle" x="7498" y="-3988.41" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge76" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7737.8,-3988.61C7833.08,-3983.4 7943.56,-3974.78 8043,-3960.56 8191.89,-3939.27 8362.69,-3897.42 8458.82,-3872.22"/>
<polygon fill="black" stroke="black" points="8459.96,-3875.54 8468.74,-3869.61 8458.18,-3868.77 8459.96,-3875.54"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node66" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node66"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6540.5,-4016.56 6274.5,-4016.56 6274.5,-3980.56 6540.5,-3980.56 6540.5,-4016.56"/>
<text text-anchor="middle" x="6407.5" y="-3993.78" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge77" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6540.61,-3998.32C6715.74,-3998 7028.21,-3997.42 7248.24,-3997.02"/>
<polygon fill="black" stroke="black" points="7248.32,-4000.52 7258.31,-3997 7248.31,-3993.52 7248.32,-4000.52"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node67" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node67"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3331,-3766.56 3092,-3766.56 3092,-3730.56 3331,-3730.56 3331,-3766.56"/>
<text text-anchor="middle" x="3211.5" y="-3744.52" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge78" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3331.21,-3747.63C3611.9,-3745.53 4338.49,-3740.56 4945.5,-3740.56 4945.5,-3740.56 4945.5,-3740.56 6408.5,-3740.56 7134.99,-3740.56 7320.01,-3688.3 8043,-3759.56 8187.64,-3773.82 8353.29,-3808.71 8450.76,-3831.2"/>
<polygon fill="black" stroke="black" points="8450.03,-3834.62 8460.56,-3833.47 8451.61,-3827.8 8450.03,-3834.62"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node68" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node68"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5191,-5269.06 4702,-5269.06 4702,-5226.06 5191,-5226.06 5191,-5269.06"/>
<text text-anchor="middle" x="4946.5" y="-5239.41" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node69" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node69"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5756.5,-5496.06 5332.5,-5496.06 5332.5,-5451.06 5756.5,-5451.06 5756.5,-5496.06"/>
<text text-anchor="middle" x="5544.5" y="-5465.18" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node70" class="node">
<title>tg_client._extract_author</title>
<g id="a_node70"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6770.5,-5084.56 6044.5,-5084.56 6044.5,-5014.56 6770.5,-5014.56 6770.5,-5084.56"/>
<text text-anchor="middle" x="6407.5" y="-5035.76" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node71" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node71"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7704,-5076.56 7292,-5076.56 7292,-5038.56 7704,-5038.56 7704,-5076.56"/>
<text text-anchor="middle" x="7498" y="-5050.83" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge79" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6770.58,-5052.22C6939.86,-5053.47 7135.73,-5054.91 7281.39,-5055.98"/>
<polygon fill="black" stroke="black" points="7281.76,-5059.48 7291.79,-5056.05 7281.82,-5052.48 7281.76,-5059.48"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node72" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node72"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5683.5,-5206.56 5405.5,-5206.56 5405.5,-5170.56 5683.5,-5170.56 5683.5,-5206.56"/>
<text text-anchor="middle" x="5544.5" y="-5183.78" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node73" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node73"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8684,-4406.56 8388,-4406.56 8388,-4370.56 8684,-4370.56 8684,-4406.56"/>
<text text-anchor="middle" x="8536" y="-4382.86" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node74" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node74"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5189,-4537.06 4704,-4537.06 4704,-4488.06 5189,-4488.06 5189,-4537.06"/>
<text text-anchor="middle" x="4946.5" y="-4502.93" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge82" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4973.64,-4487.7C5026.87,-4435.07 5146.55,-4306 5191,-4169.56 5215.84,-4093.3 5177.97,-1346.03 5227,-1282.56 5420.2,-1032.5 7799.84,-682.75 8043,-884.56 8109.81,-940.01 8020.12,-1012.76 8079,-1076.56 8149.8,-1153.28 8262.88,-1184.37 8358.72,-1196.23"/>
<polygon fill="black" stroke="black" points="8358.48,-1199.73 8368.82,-1197.42 8359.3,-1192.77 8358.48,-1199.73"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge80" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5189.07,-4518.52C5895.54,-4535.17 7916.22,-4576.95 8043,-4513.56 8066.85,-4501.63 8055.46,-4478.08 8079,-4465.56 8195.09,-4403.81 8352.19,-4412.43 8448.41,-4426.15"/>
<polygon fill="black" stroke="black" points="8447.99,-4429.62 8458.4,-4427.62 8449.01,-4422.7 8447.99,-4429.62"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node75" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node75"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5677.5,-4504.56 5411.5,-4504.56 5411.5,-4468.56 5677.5,-4468.56 5677.5,-4504.56"/>
<text text-anchor="middle" x="5544.5" y="-4482.4" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge81" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M5189.06,-4502.02C5261.03,-4498.88 5337.57,-4495.54 5401.04,-4492.78"/>
<polygon fill="black" stroke="black" points="5401.27,-4496.27 5411.11,-4492.34 5400.96,-4489.28 5401.27,-4496.27"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node76" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node76"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6533,-4504.56 6282,-4504.56 6282,-4468.56 6533,-4468.56 6533,-4504.56"/>
<text text-anchor="middle" x="6407.5" y="-4481.77" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge83" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5677.67,-4486.56C5838.82,-4486.56 6109.67,-4486.56 6271.91,-4486.56"/>
<polygon fill="black" stroke="black" points="6271.95,-4490.06 6281.95,-4486.56 6271.95,-4483.06 6271.95,-4490.06"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node77" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node77"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7679.5,-4504.56 7316.5,-4504.56 7316.5,-4468.56 7679.5,-4468.56 7679.5,-4504.56"/>
<text text-anchor="middle" x="7498" y="-4480.86" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge86" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6533.1,-4486.56C6722.33,-4486.56 7083.61,-4486.56 7306.1,-4486.56"/>
<polygon fill="black" stroke="black" points="7306.26,-4490.06 7316.26,-4486.56 7306.26,-4483.06 7306.26,-4490.06"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge84" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7679.75,-4478.88C7904.65,-4469.33 8279.55,-4453.41 8448.17,-4446.25"/>
<polygon fill="black" stroke="black" points="8448.4,-4449.74 8458.24,-4445.82 8448.1,-4442.75 8448.4,-4449.74"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge85" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7666.83,-4468.54C7774.49,-4456.47 7917.18,-4439.55 8043,-4421.56 8059.06,-4419.26 8062.88,-4417.38 8079,-4415.56 8178.03,-4404.41 8289.7,-4397.7 8377.75,-4393.76"/>
<polygon fill="black" stroke="black" points="8377.99,-4397.25 8387.83,-4393.31 8377.68,-4390.26 8377.99,-4397.25"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node78" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node78"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2204,-4472.06 1768,-4472.06 1768,-4431.06 2204,-4431.06 2204,-4472.06"/>
<text text-anchor="middle" x="1986" y="-4444.32" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge87" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2204.14,-4448.43C2448.73,-4445.18 2858.15,-4440.56 3210.5,-4440.56 3210.5,-4440.56 3210.5,-4440.56 5545.5,-4440.56 6155.11,-4440.56 6307.66,-4441.16 6917,-4459.56 7046.96,-4463.48 7193.2,-4470.31 7306.32,-4476.11"/>
<polygon fill="black" stroke="black" points="7306.3,-4479.62 7316.47,-4476.64 7306.66,-4472.63 7306.3,-4479.62"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node79" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node79"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7670,-4262.06 7326,-4262.06 7326,-4221.06 7670,-4221.06 7670,-4262.06"/>
<text text-anchor="middle" x="7498" y="-4234.32" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge88" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7670.23,-4252.52C7807.57,-4257.67 7986.4,-4255.02 8043,-4211.56 8083.8,-4180.23 8046.15,-4141.14 8079,-4101.56 8181.4,-3978.19 8361.17,-3905.68 8461.68,-3872.83"/>
<polygon fill="black" stroke="black" points="8463.01,-3876.08 8471.46,-3869.68 8460.86,-3869.42 8463.01,-3876.08"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge89" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7670.19,-4235.96C8146.26,-4221.33 9463.02,-4187.5 9646,-4254.56 9773.18,-4301.17 9884.46,-4426.84 9928.45,-4481.54"/>
<polygon fill="black" stroke="black" points="9925.72,-4483.73 9934.69,-4489.38 9931.2,-4479.38 9925.72,-4483.73"/>
</g>
<!-- tg_client._load_progress -->
<g id="node80" class="node">
<title>tg_client._load_progress</title>
<g id="a_node80"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2151,-4373.56 1821,-4373.56 1821,-4337.56 2151,-4337.56 2151,-4373.56"/>
<text text-anchor="middle" x="1986" y="-4349.4" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge90" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2068.19,-4373.61C2109.99,-4384.54 2161.05,-4400.47 2204,-4421.56 2813.72,-4720.93 2818.36,-5056.74 3450,-5306.56 3957.23,-5507.17 4139.62,-5329.58 4666,-5472.56 4682.73,-5477.1 4685.17,-5483.41 4702,-5487.56 5066.56,-5577.49 5168.02,-5562.56 5543.5,-5562.56 5543.5,-5562.56 5543.5,-5562.56 7499,-5562.56 7978.37,-5562.56 9293.27,-5678.17 9646,-5353.56 9900.88,-5119 9941.19,-4654.79 9947.4,-4535.85"/>
<polygon fill="black" stroke="black" points="9950.9,-4535.89 9947.89,-4525.74 9943.91,-4535.56 9950.9,-4535.89"/>
</g>
<!-- tg_client._save_progress -->
<g id="node81" class="node">
<title>tg_client._save_progress</title>
<g id="a_node81"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2721,-4260.56 2492,-4260.56 2492,-4224.56 2721,-4224.56 2721,-4260.56"/>
<text text-anchor="middle" x="2606.5" y="-4238.4" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node82" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node82"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3345,-3884.56 3078,-3884.56 3078,-3848.56 3345,-3848.56 3345,-3884.56"/>
<text text-anchor="middle" x="3211.5" y="-3860.68" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge91" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3345.12,-3867.08C3635.28,-3868.16 4348.28,-3870.56 4945.5,-3870.56 4945.5,-3870.56 4945.5,-3870.56 6408.5,-3870.56 7201.25,-3870.56 8160.17,-3857.19 8448.8,-3852.88"/>
<polygon fill="black" stroke="black" points="8449.24,-3856.38 8459.19,-3852.73 8449.14,-3849.38 8449.24,-3856.38"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node83" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node83"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2116.5,-3930.56 1855.5,-3930.56 1855.5,-3894.56 2116.5,-3894.56 2116.5,-3930.56"/>
<text text-anchor="middle" x="1986" y="-3906.68" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge92" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2116.59,-3912.31C2580.78,-3911.43 4204.02,-3908.56 5543.5,-3908.56 5543.5,-3908.56 5543.5,-3908.56 6408.5,-3908.56 7135.07,-3908.56 7316.92,-3905.14 8043,-3878.56 8185.43,-3873.35 8350.85,-3863.48 8449.02,-3857.23"/>
<polygon fill="black" stroke="black" points="8449.43,-3860.71 8459.18,-3856.58 8448.98,-3853.73 8449.43,-3860.71"/>
</g>
<!-- tg_client._save_message -->
<g id="node84" class="node">
<title>tg_client._save_message</title>
<g id="a_node84"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4666,-5126.06 3450,-5126.06 3450,-5011.06 4666,-5011.06 4666,-5126.06"/>
<text text-anchor="middle" x="4058" y="-5044.44" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge94" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4064.17,-5010.96C4098.03,-4646.55 4299.18,-2662.9 4702,-2238.56 5082.3,-1837.95 5353.67,-1994.47 5898,-1900.56 6367.98,-1819.48 7567.37,-1795.47 8043,-1830.56 8132.67,-1837.18 8230.79,-1850.49 8315.66,-1863.95"/>
<polygon fill="black" stroke="black" points="8315.25,-1867.43 8325.67,-1865.55 8316.35,-1860.52 8315.25,-1867.43"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge93" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4666.24,-5077.08C5024.64,-5082.04 5487.13,-5088.33 5898,-5093.56 6458.55,-5100.7 7129.65,-5108.4 7388.15,-5111.33"/>
<polygon fill="black" stroke="black" points="7388.25,-5114.83 7398.29,-5111.45 7388.33,-5107.83 7388.25,-5114.83"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge95" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4076.71,-5010.89C4133.69,-4836.55 4330.63,-4314.37 4702,-4107.56 4864.21,-4017.23 7860.33,-4059.79 8043,-4026.56 8213.01,-3995.63 8402.6,-3913.75 8488.37,-3873.93"/>
<polygon fill="black" stroke="black" points="8489.99,-3877.04 8497.57,-3869.63 8487.03,-3870.69 8489.99,-3877.04"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge96" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4077.6,-5010.82C4137.48,-4834.33 4342.56,-4297.44 4702,-4024.56 4742.72,-3993.65 4796.66,-3976.37 4843.42,-3966.73"/>
<polygon fill="black" stroke="black" points="4844.15,-3970.15 4853.28,-3964.78 4842.8,-3963.28 4844.15,-3970.15"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge97" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4311.5,-5126.13C4423.18,-5156.35 4554.24,-5198.48 4666,-5252.56 4683.53,-5261.04 4683.77,-5270.68 4702,-5277.56 4718.29,-5283.71 4735.6,-5288.6 4753.18,-5292.49"/>
<polygon fill="black" stroke="black" points="4752.46,-5295.92 4762.97,-5294.55 4753.9,-5289.07 4752.46,-5295.92"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge98" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4360.72,-5126.06C4468.14,-5144.97 4590.17,-5164.68 4702,-5178.56 4810.16,-5191.99 5097.88,-5159.92 5191,-5216.56 5216.92,-5232.33 5201.26,-5258.49 5227,-5274.56 5298.63,-5319.28 5397.6,-5321.99 5465.7,-5316.93"/>
<polygon fill="black" stroke="black" points="5466.26,-5320.39 5475.94,-5316.09 5465.68,-5313.42 5466.26,-5320.39"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge99" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4075.08,-5010.88C4128.59,-4831.37 4319.26,-4281.6 4702,-4062.56 4769.27,-4024.06 5866.75,-4005.73 6264.21,-4000.32"/>
<polygon fill="black" stroke="black" points="6264.38,-4003.82 6274.33,-4000.19 6264.29,-3996.82 6264.38,-4003.82"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge100" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4298.24,-5126.07C4418.9,-5153.98 4567.76,-5186.74 4702,-5211.56 4726.58,-5216.1 4752.63,-5220.45 4778.21,-5224.45"/>
<polygon fill="black" stroke="black" points="4777.95,-5227.95 4788.37,-5226.03 4779.02,-5221.04 4777.95,-5227.95"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge101" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4467.98,-5126.14C4542.52,-5153.68 4613.27,-5193.91 4666,-5252.56 4723.17,-5316.15 4637.17,-5385.8 4702,-5441.56 4791.72,-5518.72 5104.48,-5511.09 5322.31,-5495.05"/>
<polygon fill="black" stroke="black" points="5322.57,-5498.54 5332.28,-5494.31 5322.05,-5491.56 5322.57,-5498.54"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge102" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4666.21,-5063.65C5098.92,-5060.14 5666.76,-5055.55 6034.14,-5052.57"/>
<polygon fill="black" stroke="black" points="6034.44,-5056.07 6044.41,-5052.49 6034.38,-5049.07 6034.44,-5056.07"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge103" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4150.95,-5010.89C4337.72,-4893.75 4755.78,-4631.55 4897.47,-4542.68"/>
<polygon fill="black" stroke="black" points="4899.39,-4545.61 4906.01,-4537.33 4895.67,-4539.68 4899.39,-4545.61"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge104" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3908.09,-5126.17C3927.06,-5136.68 3977.04,-5144.06 4058,-5144.06 4128.21,-5144.06 4175.12,-5138.51 4198.71,-5130.18"/>
<polygon fill="black" stroke="black" points="4200.15,-5133.37 4207.91,-5126.17 4197.35,-5126.96 4200.15,-5133.37"/>
</g>
<!-- tg_client._save_media -->
<g id="node85" class="node">
<title>tg_client._save_media</title>
<g id="a_node85"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5187.5,-5169.56 4705.5,-5169.56 4705.5,-5115.56 5187.5,-5115.56 5187.5,-5169.56"/>
<text text-anchor="middle" x="4946.5" y="-5131.96" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge105" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4666.22,-5119.25C4676.13,-5120.07 4685.9,-5120.89 4695.53,-5121.69"/>
<polygon fill="black" stroke="black" points="4695.24,-5125.18 4705.5,-5122.53 4695.83,-5118.21 4695.24,-5125.18"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node86" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node86"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="10073.5,-5627.56 9825.5,-5627.56 9825.5,-5591.56 10073.5,-5591.56 10073.5,-5627.56"/>
<text text-anchor="middle" x="9949.5" y="-5605.52" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge106" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4473.54,-5126.13C4546.51,-5153.74 4615.24,-5194.01 4666,-5252.56 4735.21,-5332.4 4623.06,-5417.33 4702,-5487.56 5420.85,-6127.09 8066.99,-5623.56 9029,-5640.56 9303.18,-5645.41 9372.14,-5654.56 9646,-5640.56 9701.6,-5637.72 9762.72,-5631.96 9815.38,-5626.17"/>
<polygon fill="black" stroke="black" points="9815.9,-5629.63 9825.46,-5625.05 9815.13,-5622.67 9815.9,-5629.63"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge107" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5181.25,-5169.67C5184.55,-5171.22 5187.8,-5172.85 5191,-5174.56 5212.39,-5185.98 5205.18,-5204.97 5227,-5215.56 5361.33,-5280.77 5748.73,-5247.56 5898,-5251.56 6850.99,-5277.11 7100.38,-5394.08 8043,-5251.56 8480.01,-5185.48 8687.57,-5277.03 8993,-4957.56 9036.8,-4911.74 9000.31,-4876.08 9029,-4819.56 9105.1,-4669.64 9248.78,-4524.92 9308.93,-4467.96"/>
<polygon fill="black" stroke="black" points="9311.62,-4470.23 9316.51,-4460.83 9306.83,-4465.13 9311.62,-4470.23"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge108" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4958.93,-5115.46C4990.06,-5045.42 5083.74,-4858.24 5227,-4777.56 5899.36,-4398.91 6183.51,-4647.29 6953,-4589.56 7073.87,-4580.49 7942.43,-4612.22 8043,-4544.56 8075.01,-4523.02 8047.09,-4487.25 8079,-4465.56 8137,-4426.15 8332.6,-4430.23 8447.93,-4436.51"/>
<polygon fill="black" stroke="black" points="8447.97,-4440.01 8458.15,-4437.08 8448.36,-4433.02 8447.97,-4440.01"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge109" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5187.77,-5161.1C5257.89,-5166.52 5332.45,-5172.27 5395.1,-5177.11"/>
<polygon fill="black" stroke="black" points="5395.21,-5180.63 5405.45,-5177.91 5395.75,-5173.65 5395.21,-5180.63"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node87" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node87"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6525,-5177.56 6290,-5177.56 6290,-5141.56 6525,-5141.56 6525,-5177.56"/>
<text text-anchor="middle" x="6407.5" y="-5155.52" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge110" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5187.61,-5145.36C5500.4,-5149 6036,-5155.24 6279.42,-5158.08"/>
<polygon fill="black" stroke="black" points="6279.69,-5161.58 6289.73,-5158.2 6279.77,-5154.58 6279.69,-5161.58"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge245" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6525.25,-5160.31C6732.58,-5161.64 7163.06,-5164.41 7374.47,-5165.77"/>
<polygon fill="black" stroke="black" points="7374.65,-5169.27 7384.67,-5165.84 7374.7,-5162.27 7374.65,-5169.27"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node88" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node88"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3414,-4340.56 3009,-4340.56 3009,-4298.56 3414,-4298.56 3414,-4340.56"/>
<text text-anchor="middle" x="3211.5" y="-4311.47" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge111" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3325.51,-4340.57C3355.65,-4349.18 3387.25,-4361.13 3414,-4377.56 3689.25,-4546.63 3921.85,-4865.03 4014.29,-5002.55"/>
<polygon fill="black" stroke="black" points="4011.44,-5004.58 4019.91,-5010.95 4017.25,-5000.69 4011.44,-5004.58"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node89" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node89"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7783,-2154.56 7213,-2154.56 7213,-2110.56 7783,-2110.56 7783,-2154.56"/>
<text text-anchor="middle" x="7498" y="-2124.24" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge112" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7783.04,-2143.33C7892.06,-2141.86 8000.54,-2131.75 8043,-2100.56 8079.39,-2073.83 8044.89,-2035.14 8079,-2005.56 8126.2,-1964.64 8186.26,-1939.1 8247.18,-1923.41"/>
<polygon fill="black" stroke="black" points="8248.1,-1926.78 8256.96,-1920.97 8246.41,-1919.99 8248.1,-1926.78"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge113" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7783.06,-2130.35C7876.13,-2143.54 7973.39,-2174.31 8043,-2239.56 8088.62,-2282.32 8030.28,-2336.37 8079,-2375.56 8158.21,-2439.27 8921.98,-2341.84 8993,-2414.56 9066.53,-2489.85 8970.5,-4221.08 9029,-4308.56 9074.06,-4375.95 9161.04,-4409.67 9231.02,-4426.41"/>
<polygon fill="black" stroke="black" points="9230.25,-4429.83 9240.78,-4428.67 9231.82,-4423.01 9230.25,-4429.83"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge114" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7783.15,-2117.16C8086.17,-2106.98 8578.52,-2108.43 8993,-2193.56 9104.43,-2216.45 9227.21,-2270.97 9291.51,-2301.98"/>
<polygon fill="black" stroke="black" points="9290.04,-2305.15 9300.57,-2306.37 9293.1,-2298.86 9290.04,-2305.15"/>
</g>
<!-- tg_client._download_messages -->
<g id="node90" class="node">
<title>tg_client._download_messages</title>
<g id="a_node90"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2961.5,-4336.06 2251.5,-4336.06 2251.5,-4279.06 2961.5,-4279.06 2961.5,-4336.06"/>
<text text-anchor="middle" x="2606.5" y="-4296.22" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge115" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2961.76,-4314.61C2974.17,-4314.86 2986.47,-4315.1 2998.55,-4315.34"/>
<polygon fill="black" stroke="black" points="2998.58,-4318.84 3008.65,-4315.54 2998.72,-4311.85 2998.58,-4318.84"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node91" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node91"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2777.5,-2317.56 2435.5,-2317.56 2435.5,-2281.56 2777.5,-2281.56 2777.5,-2317.56"/>
<text text-anchor="middle" x="2606.5" y="-2293.86" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node92" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node92"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2973,-3758.06 2240,-3758.06 2240,-3693.06 2973,-3693.06 2973,-3758.06"/>
<text text-anchor="middle" x="2606.5" y="-3712.51" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge116" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2613.48,-3692.88C2663.21,-3432.04 3032.42,-1697.56 4057,-1697.56 4057,-1697.56 4057,-1697.56 6408.5,-1697.56 6499.31,-1697.56 7963.66,-1667.39 8043,-1711.56 8069.18,-1726.14 8055.1,-1750.48 8079,-1768.56 8137.56,-1812.86 8210.48,-1842.68 8280.7,-1862.72"/>
<polygon fill="black" stroke="black" points="8280.01,-1866.17 8290.59,-1865.49 8281.9,-1859.42 8280.01,-1866.17"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge117" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2832.96,-3758.06C2890.26,-3765.11 2951.8,-3771.62 3009,-3775.56 4131.85,-3852.96 7837.85,-3852.32 8449.25,-3851.68"/>
<polygon fill="black" stroke="black" points="8449.31,-3855.18 8459.31,-3851.67 8449.3,-3848.18 8449.31,-3855.18"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge121" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2973.1,-3716.55C3266.16,-3710.11 3687.97,-3702.56 4057,-3702.56 4057,-3702.56 4057,-3702.56 7499,-3702.56 8137.41,-3702.56 8900.46,-3687.29 9203.25,-3680.62"/>
<polygon fill="black" stroke="black" points="9203.47,-3684.11 9213.39,-3680.39 9203.31,-3677.11 9203.47,-3684.11"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge122" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2635.91,-3693.03C2774.51,-3538.11 3399.81,-2882.56 4057,-2882.56 4057,-2882.56 4057,-2882.56 6408.5,-2882.56 7186.26,-2882.56 8124.03,-2882.56 8431.75,-2882.56"/>
<polygon fill="black" stroke="black" points="8431.99,-2886.06 8441.99,-2882.56 8431.99,-2879.06 8431.99,-2886.06"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge118" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2973.04,-3739.5C3011.6,-3740.97 3048.68,-3742.39 3081.62,-3743.64"/>
<polygon fill="black" stroke="black" points="3081.58,-3747.15 3091.71,-3744.03 3081.85,-3740.15 3081.58,-3747.15"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge119" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2640.78,-3758.34C2747.74,-3863.71 3081.57,-4192.56 3181.78,-4291.27"/>
<polygon fill="black" stroke="black" points="3179.55,-4293.98 3189.13,-4298.51 3184.46,-4289 3179.55,-4293.98"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge120" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2613.57,-3692.74C2638.43,-3567.25 2744.06,-3112.65 3009,-2868.56 3599.46,-2324.57 3914.69,-2395.76 4702,-2238.56 5599.03,-2059.45 6689.3,-2086.54 7202.72,-2113.35"/>
<polygon fill="black" stroke="black" points="7202.69,-2116.85 7212.86,-2113.88 7203.06,-2109.86 7202.69,-2116.85"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node93" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node93"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-4147.56 1019,-4147.56 1019,-4073.56 1732,-4073.56 1732,-4147.56"/>
<text text-anchor="middle" x="1375.5" y="-4095.74" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge123" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1637.82,-4073.55C1886.2,-4041.6 2270.51,-4000.56 2605.5,-4000.56 2605.5,-4000.56 2605.5,-4000.56 4059,-4000.56 5094.81,-4000.56 7960.67,-3913.3 8043,-3907.56 8185.88,-3897.59 8351.17,-3876.88 8449.18,-3863.63"/>
<polygon fill="black" stroke="black" points="8449.89,-3867.07 8459.33,-3862.25 8448.95,-3860.13 8449.89,-3867.07"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge124" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1732.14,-4121.44C2411.31,-4141.86 3939.97,-4186.18 5227,-4211.56 6004.03,-4226.89 6930.84,-4236.4 7315.67,-4239.96"/>
<polygon fill="black" stroke="black" points="7315.74,-4243.47 7325.77,-4240.06 7315.81,-4236.47 7315.74,-4243.47"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge125" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1437.71,-4147.74C1512.97,-4191.96 1645.78,-4265.22 1768,-4308.56 1799.03,-4319.56 1833.51,-4328.46 1865.69,-4335.42"/>
<polygon fill="black" stroke="black" points="1865.08,-4338.87 1875.59,-4337.52 1866.53,-4332.03 1865.08,-4338.87"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge126" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1494.25,-4147.6C1571.3,-4170.09 1674.63,-4197.01 1768,-4210.56 2019.41,-4247.05 2317.44,-4248.65 2481.57,-4245.98"/>
<polygon fill="black" stroke="black" points="2481.76,-4249.48 2491.7,-4245.81 2481.64,-4242.48 2481.76,-4249.48"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge127" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1422.67,-4073.37C1492.49,-4019.74 1631.34,-3923 1768,-3885.56 2238.48,-3756.67 2828.06,-3812.91 3083.17,-3847.18"/>
<polygon fill="black" stroke="black" points="3082.83,-3850.67 3093.21,-3848.54 3083.77,-3843.73 3082.83,-3850.67"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge128" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1490.24,-4073.55C1616.87,-4032.35 1817.18,-3967.17 1919.75,-3933.79"/>
<polygon fill="black" stroke="black" points="1920.94,-3937.09 1929.37,-3930.66 1918.77,-3930.43 1920.94,-3937.09"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge129" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1466.53,-4147.7C1544.8,-4178.28 1661.95,-4219.98 1768,-4241.56 1921.33,-4272.77 2093.24,-4289.41 2241.22,-4298.21"/>
<polygon fill="black" stroke="black" points="2241.19,-4301.72 2251.38,-4298.81 2241.6,-4294.73 2241.19,-4301.72"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node94" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node94"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7814.5,-2422.06 7181.5,-2422.06 7181.5,-2361.06 7814.5,-2361.06 7814.5,-2422.06"/>
<text text-anchor="middle" x="7498" y="-2379.31" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge130" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7814.74,-2402.07C7914.7,-2398.4 8008.29,-2385.23 8043,-2351.56 8098.48,-2297.73 8027.61,-2063.31 8079,-2005.56 8122.41,-1956.78 8183.6,-1928.59 8247.1,-1912.87"/>
<polygon fill="black" stroke="black" points="8247.98,-1916.26 8256.9,-1910.54 8246.36,-1909.45 8247.98,-1916.26"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge131" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7769.09,-2422.1C7871.54,-2448.15 7978.87,-2495.99 8043,-2583.56 8115.25,-2682.22 8007.42,-3584.41 8079,-3683.56 8164.39,-3801.85 8342.48,-3836.99 8449.08,-3847.34"/>
<polygon fill="black" stroke="black" points="8448.89,-3850.84 8459.16,-3848.26 8449.53,-3843.86 8448.89,-3850.84"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge132" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7695.16,-2422.09C7807.3,-2438.42 7950.73,-2457.4 8079,-2468.56 8129.63,-2472.96 8957.45,-2470.24 8993,-2506.56 9063.04,-2578.12 8973.3,-4225.35 9029,-4308.56 9074.09,-4375.92 9161.07,-4409.65 9231.04,-4426.4"/>
<polygon fill="black" stroke="black" points="9230.27,-4429.81 9240.8,-4428.65 9231.84,-4422.99 9230.27,-4429.81"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge133" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7814.71,-2402.14C7891.63,-2395.64 7972.12,-2380.88 8043,-2351.56 8062.51,-2343.49 8059.21,-2327.91 8079,-2320.56 8459.83,-2179.19 8586.78,-2318.2 8993,-2320.56 9073.84,-2321.03 9165.37,-2322.12 9233.6,-2323.05"/>
<polygon fill="black" stroke="black" points="9233.88,-2326.55 9243.92,-2323.19 9233.97,-2319.55 9233.88,-2326.55"/>
</g>
<!-- tg_client.main -->
<g id="node95" class="node">
<title>tg_client.main</title>
<g id="a_node95"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-3876.56 366.5,-3876.56 366.5,-3784.56 934.5,-3784.56 934.5,-3876.56"/>
<text text-anchor="middle" x="650.5" y="-3811.52" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge134" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M934.61,-3873.58C1204.04,-3910.76 1621.17,-3958.56 1985,-3958.56 1985,-3958.56 1985,-3958.56 3212.5,-3958.56 3831.85,-3958.56 4575.7,-3955.97 4843.35,-3954.96"/>
<polygon fill="black" stroke="black" points="4843.46,-3958.46 4853.44,-3954.92 4843.43,-3951.46 4843.46,-3958.46"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge135" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M656.12,-3784.37C679.78,-3557.97 794.97,-2568.73 1019,-2377.56 1089.18,-2317.67 1197.97,-2316.62 1276.72,-2326.22"/>
<polygon fill="black" stroke="black" points="1276.29,-2329.7 1286.66,-2327.51 1277.19,-2322.76 1276.29,-2329.7"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge136" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M664.18,-3876.84C698.65,-3992.49 806.04,-4293.65 1019,-4416.56 1302.52,-4580.19 1714.82,-4514.78 1895.05,-4474.37"/>
<polygon fill="black" stroke="black" points="1896.04,-4477.73 1905.02,-4472.11 1894.49,-4470.91 1896.04,-4477.73"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge137" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M691.12,-3876.69C753.85,-3946.94 882.92,-4080.56 1019,-4156.56 1322.58,-4326.1 1424.01,-4331.79 1768,-4382.56 2245.81,-4453.08 2821.51,-4381.76 3077.09,-4342.16"/>
<polygon fill="black" stroke="black" points="3077.82,-4345.59 3087.16,-4340.59 3076.74,-4338.67 3077.82,-4345.59"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge138" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M655.31,-3784.48C675.58,-3551.8 778.95,-2509.59 1019,-2318.56 1492.87,-1941.46 2322.95,-2198.06 2547.89,-2278.04"/>
<polygon fill="black" stroke="black" points="2546.93,-2281.41 2557.52,-2281.49 2549.29,-2274.82 2546.93,-2281.41"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge139" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M934.58,-3815.35C1276.09,-3797 1851.4,-3766.08 2229.8,-3745.75"/>
<polygon fill="black" stroke="black" points="2230.02,-3749.24 2239.81,-3745.21 2229.64,-3742.25 2230.02,-3749.24"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge140" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M770.48,-3876.64C909.35,-3930.42 1136.83,-4018.52 1269.43,-4069.87"/>
<polygon fill="black" stroke="black" points="1268.22,-4073.15 1278.81,-4073.5 1270.75,-4066.63 1268.22,-4073.15"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge141" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M667.41,-3784.31C755.4,-3538.01 1206.72,-2391.56 1985,-2391.56 1985,-2391.56 1985,-2391.56 5545.5,-2391.56 6117.45,-2391.56 6783.69,-2391.56 7171.15,-2391.56"/>
<polygon fill="black" stroke="black" points="7171.39,-2395.06 7181.39,-2391.56 7171.39,-2388.06 7171.39,-2395.06"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node96" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node96"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="10066,-1326.56 9833,-1326.56 9833,-1290.56 10066,-1290.56 10066,-1326.56"/>
<text text-anchor="middle" x="9949.5" y="-1303.77" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_path -->
<g id="node97" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node97"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8638,-3544.56 8434,-3544.56 8434,-3508.56 8638,-3508.56 8638,-3544.56"/>
<text text-anchor="middle" x="8536" y="-3522.86" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._more_user_path -->
<g id="node98" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node98"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8651,-3398.56 8421,-3398.56 8421,-3362.56 8651,-3362.56 8651,-3398.56"/>
<text text-anchor="middle" x="8536" y="-3376.86" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar -->
<g id="node99" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node99"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7646,-3544.56 7350,-3544.56 7350,-3508.56 7646,-3508.56 7646,-3544.56"/>
<text text-anchor="middle" x="7498" y="-3521.26" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge147" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7646.29,-3529.22C7788.58,-3528.36 7990.11,-3516.92 8043,-3461.56 8118.42,-3382.62 8006.54,-3053.23 8079,-2971.56 8165.99,-2873.51 8326.29,-2864.08 8431.77,-2870.27"/>
<polygon fill="black" stroke="black" points="8431.6,-2873.76 8441.81,-2870.91 8432.05,-2866.78 8431.6,-2873.76"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge145" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7646.06,-3526.56C7855.66,-3526.56 8235.69,-3526.56 8423.62,-3526.56"/>
<polygon fill="black" stroke="black" points="8423.79,-3530.06 8433.79,-3526.56 8423.79,-3523.06 8423.79,-3530.06"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node100" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node100"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8612.5,-4704.56 8459.5,-4704.56 8459.5,-4668.56 8612.5,-4668.56 8612.5,-4704.56"/>
<text text-anchor="middle" x="8536" y="-4682.86" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge146" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7646.02,-3512.6C7788.09,-3502.73 7989.45,-3499.46 8043,-3553.56 8114.65,-3625.95 8022.93,-4384.53 8079,-4469.56 8162.66,-4596.43 8342.09,-4650.98 8449.24,-4672.98"/>
<polygon fill="black" stroke="black" points="8448.57,-4676.42 8459.06,-4674.95 8449.94,-4669.55 8448.57,-4676.42"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node144" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node144"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9462.5,-4299.56 9212.5,-4299.56 9212.5,-4263.56 9462.5,-4263.56 9462.5,-4299.56"/>
<text text-anchor="middle" x="9337.5" y="-4275.4" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge236" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8612.77,-4699.11C8713.89,-4711.15 8891.95,-4715.13 8993,-4616.56 9057.97,-4553.19 8972.75,-4486.78 9029,-4415.56 9077.34,-4354.36 9159.25,-4320.52 9226.38,-4302.17"/>
<polygon fill="black" stroke="black" points="9227.4,-4305.52 9236.17,-4299.57 9225.61,-4298.75 9227.4,-4305.52"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node101" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node101"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7665.5,-3398.56 7330.5,-3398.56 7330.5,-3362.56 7665.5,-3362.56 7665.5,-3398.56"/>
<text text-anchor="middle" x="7498" y="-3375.26" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge150" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7665.57,-3395.17C7805.42,-3403.44 7990.56,-3403.73 8043,-3353.56 8104.61,-3294.62 8021.76,-3034.76 8079,-2971.56 8166.87,-2874.55 8326.55,-2864.77 8431.71,-2870.6"/>
<polygon fill="black" stroke="black" points="8431.51,-2874.1 8441.71,-2871.21 8431.94,-2867.11 8431.51,-2874.1"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge148" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7665.74,-3380.56C7873.75,-3380.56 8224.65,-3380.56 8410.62,-3380.56"/>
<polygon fill="black" stroke="black" points="8410.72,-3384.06 8420.72,-3380.56 8410.72,-3377.06 8410.72,-3384.06"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge149" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7665.62,-3365.25C7806.04,-3356.44 7992,-3355.76 8043,-3407.56 8125.83,-3491.7 8014.27,-4370.82 8079,-4469.56 8162.43,-4596.84 8342.37,-4651.28 8449.58,-4673.14"/>
<polygon fill="black" stroke="black" points="8448.92,-4676.58 8459.41,-4675.1 8450.28,-4669.71 8448.92,-4676.58"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node102" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node102"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9578.5,-2627.56 9096.5,-2627.56 9096.5,-2587.56 9578.5,-2587.56 9578.5,-2627.56"/>
<text text-anchor="middle" x="9337.5" y="-2600.49" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node103" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node103"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7637,-3598.56 7359,-3598.56 7359,-3562.56 7637,-3562.56 7637,-3598.56"/>
<text text-anchor="middle" x="7498" y="-3575.78" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node104" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node104"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="8993,-2645.06 8079,-2645.06 8079,-2570.06 8993,-2570.06 8993,-2645.06"/>
<text text-anchor="middle" x="8536" y="-2592.56" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge151" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M8993.09,-2607.56C9024.89,-2607.56 9056.21,-2607.56 9086.21,-2607.56"/>
<polygon fill="black" stroke="black" points="9086.33,-2611.06 9096.33,-2607.56 9086.33,-2604.06 9086.33,-2611.06"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node105" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node105"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9646,-1395.56 9029,-1395.56 9029,-1343.56 9646,-1343.56 9646,-1395.56"/>
<text text-anchor="middle" x="9337.5" y="-1359.42" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge152" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9598.52,-1343.56C9676.19,-1335.79 9757.83,-1327.63 9822.71,-1321.14"/>
<polygon fill="black" stroke="black" points="9823.38,-1324.59 9832.98,-1320.11 9822.68,-1317.63 9823.38,-1324.59"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node106" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node106"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7647.5,-4764.56 7348.5,-4764.56 7348.5,-4728.56 7647.5,-4728.56 7647.5,-4764.56"/>
<text text-anchor="middle" x="7498" y="-4740.68" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node107" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node107"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8757,-4948.56 8315,-4948.56 8315,-4912.56 8757,-4912.56 8757,-4948.56"/>
<text text-anchor="middle" x="8536" y="-4924.97" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node108" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node108"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7752,-4826.06 7244,-4826.06 7244,-4783.06 7752,-4783.06 7752,-4826.06"/>
<text text-anchor="middle" x="7498" y="-4796.41" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge154" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7752.09,-4797.72C8166.77,-4785.31 8949.57,-4756.34 8993,-4713.56 9065.89,-4641.77 9000.34,-4352.78 9029,-4254.56 9095.91,-4025.31 9260.53,-3783.15 9317.07,-3704.15"/>
<polygon fill="black" stroke="black" points="9320.11,-3705.91 9323.11,-3695.75 9314.43,-3701.82 9320.11,-3705.91"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge153" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7752.24,-4810.19C7844.91,-4807.02 7949.83,-4797.26 8043,-4773.56 8060.15,-4769.2 8062.08,-4761.73 8079,-4756.56 8204.5,-4718.18 8356.16,-4700.26 8449.08,-4692.32"/>
<polygon fill="black" stroke="black" points="8449.6,-4695.79 8459.28,-4691.47 8449.02,-4688.82 8449.6,-4695.79"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node109" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node109"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9563.5,-4962.56 9111.5,-4962.56 9111.5,-4918.56 9563.5,-4918.56 9563.5,-4962.56"/>
<text text-anchor="middle" x="9337.5" y="-4932.24" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge155" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9533.44,-4918.51C9572.57,-4908.59 9612.06,-4894.25 9646,-4873.56 9790.55,-4785.47 9897.83,-4603.22 9934.63,-4534.54"/>
<polygon fill="black" stroke="black" points="9937.77,-4536.1 9939.35,-4525.62 9931.58,-4532.82 9937.77,-4536.1"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node110" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node110"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7745,-4648.06 7251,-4648.06 7251,-4599.06 7745,-4599.06 7745,-4648.06"/>
<text text-anchor="middle" x="7498" y="-4614.38" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge159" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7745.33,-4637.9C7853.35,-4630.04 7971.57,-4599.37 8043,-4513.56 8117.62,-4423.93 8001.91,-2502.08 8079,-2414.56 8163.38,-2318.76 8319.79,-2316.76 8425.62,-2328.83"/>
<polygon fill="black" stroke="black" points="8425.35,-2332.33 8435.69,-2330.04 8426.18,-2325.38 8425.35,-2332.33"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge156" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7745.1,-4635.41C7851.89,-4626.78 7969.17,-4596.19 8043,-4513.56 8104.23,-4445.03 8028.77,-4178.52 8079,-4101.56 8164.41,-3970.69 8342.8,-3902.5 8449.38,-3872.06"/>
<polygon fill="black" stroke="black" points="8450.46,-3875.39 8459.15,-3869.32 8448.57,-3868.65 8450.46,-3875.39"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge162" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7745.12,-4630.14C7865.64,-4628.63 7994.98,-4618.43 8043,-4584.56 8075.52,-4561.62 8046.07,-4524.92 8079,-4502.56 8163.07,-4445.47 8916.63,-4536.61 8993,-4469.56 9065.81,-4405.64 8997.81,-4346.29 9029,-4254.56 9105.88,-4028.46 9264.09,-3784.28 9318.02,-3704.45"/>
<polygon fill="black" stroke="black" points="9321.06,-3706.2 9323.78,-3695.96 9315.27,-3702.27 9321.06,-3706.2"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge161" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7745.23,-4613.89C8041.4,-4602.05 8553.64,-4580.93 8993,-4559.56 9295.91,-4544.83 9652.68,-4524.67 9832.47,-4514.31"/>
<polygon fill="black" stroke="black" points="9832.69,-4517.8 9842.48,-4513.73 9832.29,-4510.81 9832.69,-4517.8"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge157" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7745.3,-4610.98C8042.09,-4594.13 8555.45,-4559.55 8993,-4502.56 9075.25,-4491.85 9167.85,-4475.42 9236.16,-4462.45"/>
<polygon fill="black" stroke="black" points="9236.9,-4465.88 9246.06,-4460.57 9235.59,-4459 9236.9,-4465.88"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge158" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7745.02,-4631.98C7866.35,-4631.08 7996.5,-4620.88 8043,-4584.56 8083.54,-4552.9 8038.43,-4506.19 8079,-4474.56 8134.51,-4431.27 8332.05,-4432.61 8448.13,-4437.52"/>
<polygon fill="black" stroke="black" points="8448.27,-4441.03 8458.41,-4437.97 8448.57,-4434.03 8448.27,-4441.03"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge160" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7745.17,-4638.53C7972.15,-4652.33 8296.28,-4672.04 8449.06,-4681.33"/>
<polygon fill="black" stroke="black" points="8449.12,-4684.84 8459.32,-4681.96 8449.55,-4677.86 8449.12,-4684.84"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node111" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node111"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7713.5,-4710.56 7282.5,-4710.56 7282.5,-4666.56 7713.5,-4666.56 7713.5,-4710.56"/>
<text text-anchor="middle" x="7498" y="-4680.24" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge163" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7713.65,-4703.9C7845.31,-4708.17 7997.16,-4702.12 8043,-4656.56 8130.66,-4569.43 8012.61,-4205.81 8079,-4101.56 8163.06,-3969.56 8342.35,-3901.7 8449.37,-3871.63"/>
<polygon fill="black" stroke="black" points="8450.46,-3874.96 8459.17,-3868.93 8448.6,-3868.22 8450.46,-3874.96"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge167" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7713.68,-4679.04C7813.86,-4673.81 7934.64,-4666.35 8043,-4656.56 8254.82,-4637.42 8842.33,-4690.67 8993,-4540.56 9038.38,-4495.35 9009.62,-4315.61 9029,-4254.56 9101.27,-4026.94 9262.44,-3783.74 9317.58,-3704.3"/>
<polygon fill="black" stroke="black" points="9320.62,-3706.06 9323.47,-3695.86 9314.88,-3702.06 9320.62,-3706.06"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge164" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7713.76,-4700.29C8098.38,-4720.11 8875.71,-4754.26 8993,-4713.56 9136.64,-4663.72 9265.65,-4526.15 9315.1,-4468.51"/>
<polygon fill="black" stroke="black" points="9318.01,-4470.49 9321.81,-4460.6 9312.67,-4465.96 9318.01,-4470.49"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge165" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7713.58,-4700.23C7843.09,-4702.73 7992.53,-4696.08 8043,-4656.56 8085.5,-4623.28 8036.81,-4574.24 8079,-4540.56 8238.21,-4413.46 8853.37,-4617.91 8993,-4469.56 9073.66,-4383.87 8948.77,-2437.66 9029,-2351.56 9084.54,-2291.96 9182.56,-2293.62 9253.01,-2304.81"/>
<polygon fill="black" stroke="black" points="9252.76,-2308.31 9263.2,-2306.52 9253.92,-2301.41 9252.76,-2308.31"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge166" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7713.66,-4688.15C7941.14,-4687.71 8289.14,-4687.04 8449.12,-4686.73"/>
<polygon fill="black" stroke="black" points="8449.39,-4690.23 8459.38,-4686.71 8449.37,-4683.23 8449.39,-4690.23"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node112" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node112"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9610,-5632.06 9065,-5632.06 9065,-5587.06 9610,-5587.06 9610,-5632.06"/>
<text text-anchor="middle" x="9337.5" y="-5601.18" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge168" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9610.05,-5609.56C9681.14,-5609.56 9754.67,-5609.56 9814.97,-5609.56"/>
<polygon fill="black" stroke="black" points="9815.29,-5613.06 9825.29,-5609.56 9815.29,-5606.06 9815.29,-5613.06"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node113" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node113"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9491.5,-4864.56 9183.5,-4864.56 9183.5,-4828.56 9491.5,-4828.56 9491.5,-4864.56"/>
<text text-anchor="middle" x="9337.5" y="-4840.97" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node114" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node114"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7944.5,-4906.56 7051.5,-4906.56 7051.5,-4844.56 7944.5,-4844.56 7944.5,-4906.56"/>
<text text-anchor="middle" x="7498" y="-4863.36" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge169" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7944.57,-4874.7C7989.41,-4866.44 8025.05,-4853.67 8043,-4834.56 8096.81,-4777.28 8029.48,-2066.58 8079,-2005.56 8120.82,-1954.03 8182.47,-1925.02 8247.01,-1909.4"/>
<polygon fill="black" stroke="black" points="8248.01,-1912.76 8256.97,-1907.09 8246.44,-1905.94 8248.01,-1912.76"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge170" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7944.54,-4873.98C7989.19,-4865.81 8024.78,-4853.26 8043,-4834.56 8099.9,-4776.15 8035.74,-4170.68 8079,-4101.56 8162.14,-3968.71 8342.18,-3901.08 8449.49,-3871.3"/>
<polygon fill="black" stroke="black" points="8450.6,-3874.63 8459.32,-3868.63 8448.75,-3867.88 8450.6,-3874.63"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge174" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7944.59,-4849.4C8378.1,-4822.91 8974.37,-4783.26 8993,-4764.56 9033.09,-4724.32 9013.3,-4309.15 9029,-4254.56 9095.01,-4025.05 9260.21,-3783.06 9316.98,-3704.12"/>
<polygon fill="black" stroke="black" points="9320.03,-3705.89 9323.05,-3695.73 9314.35,-3701.78 9320.03,-3705.89"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge173" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7944.54,-4870.44C7978.73,-4861.53 8011.97,-4849.8 8043,-4834.56 8064.47,-4824.02 8058.43,-4806.76 8079,-4794.56 8195.42,-4725.52 8353.1,-4700.6 8449.25,-4691.62"/>
<polygon fill="black" stroke="black" points="8449.58,-4695.1 8459.22,-4690.72 8448.95,-4688.13 8449.58,-4695.1"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge171" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7944.7,-4877.01C8377.84,-4879.45 8973.39,-4886 8993,-4903.56 9039.4,-4945.12 9006.13,-5123.62 9029,-5181.56 9095.49,-5350.03 9243.01,-5513.87 9306.5,-5579.51"/>
<polygon fill="black" stroke="black" points="9304.33,-5582.3 9313.81,-5587.02 9309.34,-5577.41 9304.33,-5582.3"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge172" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7944.69,-4868.53C8341.36,-4862.27 8899.84,-4853.45 9173.04,-4849.14"/>
<polygon fill="black" stroke="black" points="9173.5,-4852.63 9183.44,-4848.98 9173.39,-4845.63 9173.5,-4852.63"/>
</g>
<!-- debug_dump.main -->
<g id="node115" class="node">
<title>debug_dump.main</title>
<g id="a_node115"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6645.5,-4835.56 6169.5,-4835.56 6169.5,-4773.56 6645.5,-4773.56 6645.5,-4835.56"/>
<text text-anchor="middle" x="6407.5" y="-4792.36" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge175" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6645.68,-4790.68C6741.15,-4785.19 6852.3,-4778.93 6953,-4773.56 7082.68,-4766.65 7229.79,-4759.38 7338.3,-4754.13"/>
<polygon fill="black" stroke="black" points="7338.53,-4757.63 7348.35,-4753.65 7338.19,-4750.63 7338.53,-4757.63"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge176" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6527.24,-4835.62C6636.86,-4862.65 6804.65,-4899.88 6953,-4915.56 7431.37,-4966.12 7995.63,-4954.52 8304.37,-4942.15"/>
<polygon fill="black" stroke="black" points="8304.94,-4945.63 8314.79,-4941.73 8304.66,-4938.63 8304.94,-4945.63"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge177" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6645.7,-4804.56C6819.11,-4804.56 7054.35,-4804.56 7233.6,-4804.56"/>
<polygon fill="black" stroke="black" points="7233.71,-4808.06 7243.71,-4804.56 7233.71,-4801.06 7233.71,-4808.06"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge178" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6498.14,-4835.7C6604.93,-4871.04 6789.46,-4926.64 6953,-4948.56 7402.32,-5008.8 8539.8,-4968.77 8993,-4957.56 9027.92,-4956.7 9064.82,-4955.34 9100.96,-4953.76"/>
<polygon fill="black" stroke="black" points="9101.3,-4957.25 9111.14,-4953.31 9100.99,-4950.26 9101.3,-4957.25"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge179" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6500.71,-4773.55C6608,-4738.9 6791.17,-4684.18 6953,-4657.56 7046.15,-4642.24 7149.31,-4633.69 7240.54,-4628.97"/>
<polygon fill="black" stroke="black" points="7240.93,-4632.46 7250.74,-4628.46 7240.58,-4625.46 7240.93,-4632.46"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge180" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6578.99,-4773.55C6686.04,-4755.17 6827.18,-4732.93 6953,-4719.56 7057.7,-4708.43 7174.19,-4701.12 7272.43,-4696.41"/>
<polygon fill="black" stroke="black" points="7272.66,-4699.9 7282.48,-4695.93 7272.33,-4692.91 7272.66,-4699.9"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge181" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6645.7,-4820.03C6761.63,-4827.59 6905.2,-4836.96 7041.2,-4845.83"/>
<polygon fill="black" stroke="black" points="7041.19,-4849.34 7051.4,-4846.5 7041.65,-4842.35 7041.19,-4849.34"/>
</g>
<!-- similar._iter_lots -->
<g id="node116" class="node">
<title>similar._iter_lots</title>
<g id="a_node116"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7652,-2092.06 7344,-2092.06 7344,-2045.06 7652,-2045.06 7652,-2092.06"/>
<text text-anchor="middle" x="7498" y="-2060.06" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge182" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7652.26,-2084.23C7764.39,-2089.84 7918.11,-2085.1 8043,-2035.56 8062.36,-2027.88 8060.31,-2014.76 8079,-2005.56 8133.73,-1978.62 8195.64,-1958.71 8255.8,-1944.02"/>
<polygon fill="black" stroke="black" points="8256.92,-1947.35 8265.83,-1941.61 8255.29,-1940.54 8256.92,-1947.35"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge183" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7652.32,-2055.81C7794.23,-2047.77 7990.91,-2047.46 8043,-2101.56 8103.98,-2164.89 8027.9,-3612.03 8079,-3683.56 8163.92,-3802.44 8342.6,-3837.36 8449.34,-3847.52"/>
<polygon fill="black" stroke="black" points="8449.17,-3851.01 8459.44,-3848.42 8449.79,-3844.04 8449.17,-3851.01"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge184" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7652.17,-2070.64C7761.59,-2073.88 7912,-2081.9 8043,-2101.56 8195.97,-2124.52 8371.19,-2172.16 8465.73,-2199.69"/>
<polygon fill="black" stroke="black" points="8464.88,-2203.09 8475.46,-2202.54 8466.85,-2196.37 8464.88,-2203.09"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge185" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7652.14,-2063.39C7853.36,-2056.59 8203.77,-2044.75 8397.1,-2038.22"/>
<polygon fill="black" stroke="black" points="8397.45,-2041.71 8407.32,-2037.87 8397.21,-2034.71 8397.45,-2041.71"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge186" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7652.26,-2080.95C7793.86,-2088.69 7990.06,-2088.74 8043,-2035.56 8093.33,-1985.01 8038,-1452.93 8079,-1394.56 8150.74,-1292.43 8287.6,-1243.75 8392.75,-1220.74"/>
<polygon fill="black" stroke="black" points="8393.77,-1224.1 8402.82,-1218.59 8392.31,-1217.25 8393.77,-1224.1"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge187" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7652.01,-2079.32C7792.31,-2085.72 7986.58,-2084.69 8043,-2035.56 8104.2,-1982.27 8023.03,-1915.32 8079,-1856.56 8157.87,-1773.76 8286.94,-1747.14 8387.67,-1740.01"/>
<polygon fill="black" stroke="black" points="8388.19,-1743.48 8397.94,-1739.34 8387.74,-1736.5 8388.19,-1743.48"/>
</g>
<!-- similar.main -->
<g id="node117" class="node">
<title>similar.main</title>
<g id="a_node117"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6512.5,-3277.56 6302.5,-3277.56 6302.5,-3235.56 6512.5,-3235.56 6512.5,-3277.56"/>
<text text-anchor="middle" x="6407.5" y="-3248.47" font-family="Times,serif" font-size="31.36">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge188" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6431.04,-3277.84C6501.31,-3342.56 6725.27,-3536.91 6953,-3607.56 7014.53,-3626.65 7835.31,-3642.46 8269.62,-3649.55"/>
<polygon fill="black" stroke="black" points="8269.75,-3653.05 8279.8,-3649.72 8269.86,-3646.05 8269.75,-3653.05"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge189" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6512.87,-3256.56C6678.62,-3256.56 7006.95,-3256.56 7238.69,-3256.56"/>
<polygon fill="black" stroke="black" points="7238.96,-3260.06 7248.96,-3256.56 7238.96,-3253.06 7238.96,-3260.06"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge194" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6512.62,-3250.02C6622.19,-3243.2 6799.71,-3232.29 6953,-3223.56 7049.8,-3218.05 7156.31,-3212.3 7249.23,-3207.39"/>
<polygon fill="black" stroke="black" points="7249.53,-3210.88 7259.33,-3206.85 7249.16,-3203.89 7249.53,-3210.88"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge190" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6444.54,-3277.74C6529.59,-3326.46 6750.85,-3446.07 6953,-3494.56 7080.69,-3525.19 7229.82,-3532.01 7339.62,-3531.84"/>
<polygon fill="black" stroke="black" points="7339.79,-3535.34 7349.78,-3531.8 7339.77,-3528.34 7339.79,-3535.34"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge191" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6505.33,-3277.64C6613.79,-3300.36 6795.1,-3335.65 6953,-3353.56 7075.2,-3367.42 7213.64,-3374.17 7320.28,-3377.45"/>
<polygon fill="black" stroke="black" points="7320.4,-3380.95 7330.5,-3377.76 7320.61,-3373.96 7320.4,-3380.95"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge192" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6436.01,-3277.57C6512.7,-3334.73 6737.41,-3492.86 6953,-3553.56 7083.08,-3590.19 7237.46,-3594.34 7348.47,-3590.85"/>
<polygon fill="black" stroke="black" points="7348.87,-3594.34 7358.74,-3590.5 7348.63,-3587.34 7348.87,-3594.34"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge193" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6512.66,-3266.83C6630.31,-3272.02 6818.19,-3259.74 6917,-3144.56 6998.34,-3049.75 6861.88,-2669.02 6953,-2583.56 7041.34,-2500.71 7921.92,-2580.61 8043,-2583.56 8051.45,-2583.77 8059.98,-2583.99 8068.57,-2584.24"/>
<polygon fill="black" stroke="black" points="8068.59,-2587.74 8078.68,-2584.53 8068.79,-2580.74 8068.59,-2587.74"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge195" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6512.51,-3267.54C6630.94,-3273.56 6820.45,-3262.23 6917,-3144.56 6979.74,-3068.1 6882.36,-1433.79 6953,-1364.56 6989.34,-1328.95 8377.7,-1351.03 9018.41,-1363.16"/>
<polygon fill="black" stroke="black" points="9018.66,-1366.66 9028.72,-1363.35 9018.79,-1359.66 9018.66,-1366.66"/>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge196" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6512.74,-3267.32C6630.92,-3273.05 6819.76,-3261.36 6917,-3144.56 6991.19,-3055.44 6872.08,-2184.62 6953,-2101.56 7004.18,-2049.03 7192.87,-2048.02 7333.76,-2055.39"/>
<polygon fill="black" stroke="black" points="7333.64,-2058.89 7343.82,-2055.94 7334.02,-2051.9 7333.64,-2058.89"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node118" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node118"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-5517.56 0,-5517.56 0,-5481.56 282,-5481.56 282,-5517.56"/>
<text text-anchor="middle" x="141" y="-5495.52" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- build_site:cli -->
<g id="node119" class="node">
<title>build_site:cli</title>
<g id="a_node119"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5499.56" rx="34.71" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5497.96" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;build_site:cli -->
<!-- clean_data:cli -->
<g id="node178" class="node">
<title>clean_data:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5499.56" rx="37.29" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5497.96" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;clean_data:cli -->
<!-- scan_ontology.collect_ontology -->
<g id="node120" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node120"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6865.5,-2279.06 5949.5,-2279.06 5949.5,-2208.06 6865.5,-2208.06 6865.5,-2279.06"/>
<text text-anchor="middle" x="6407.5" y="-2228.92" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge198" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6748.49,-2279.07C6816.2,-2285.46 6886.82,-2291.64 6953,-2296.56 7058.88,-2304.43 7176.52,-2310.79 7275.24,-2315.44"/>
<polygon fill="black" stroke="black" points="7275.19,-2318.94 7285.34,-2315.91 7275.52,-2311.95 7275.19,-2318.94"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge199" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6451.53,-2207.99C6539.2,-2138.05 6747.62,-1984.51 6953,-1927.56 7073.57,-1894.12 7823.93,-1896.13 8246.49,-1900.06"/>
<polygon fill="black" stroke="black" points="8246.69,-1903.56 8256.73,-1900.15 8246.76,-1896.56 8246.69,-1903.56"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge200" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6618.71,-2279.1C6726.57,-2308.97 6849.22,-2363.5 6917,-2462.56 6979.72,-2554.23 6874.41,-3383.07 6953,-3461.56 7038.74,-3547.2 7950.8,-3420.92 8043,-3499.56 8106.4,-3553.64 8024.97,-3620.12 8079,-3683.56 8172.71,-3793.58 8345.18,-3831.58 8449.05,-3844.69"/>
<polygon fill="black" stroke="black" points="8448.84,-3848.19 8459.19,-3845.92 8449.68,-3841.24 8448.84,-3848.19"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge201" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6865.67,-2238.62C7364.77,-2233.22 8131.4,-2224.93 8419.91,-2221.81"/>
<polygon fill="black" stroke="black" points="8420.01,-2225.3 8429.97,-2221.7 8419.93,-2218.3 8420.01,-2225.3"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node121" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node121"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7716,-937.56 7280,-937.56 7280,-893.56 7716,-893.56 7716,-937.56"/>
<text text-anchor="middle" x="7498" y="-907.24" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge202" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6476.18,-2208.03C6590.87,-2143.62 6820.34,-1995.6 6917,-1796.56 6981.17,-1664.43 6867.69,-1256.13 6953,-1136.56 7035.22,-1021.32 7188.3,-966.08 7311.19,-939.65"/>
<polygon fill="black" stroke="black" points="7312.04,-943.05 7321.1,-937.56 7310.59,-936.2 7312.04,-943.05"/>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge278" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7716.18,-911.16C7932.92,-906.76 8257.18,-900.19 8425.22,-896.79"/>
<polygon fill="black" stroke="black" points="8425.39,-900.28 8435.32,-896.58 8425.25,-893.28 8425.39,-900.28"/>
</g>
<!-- scan_ontology.main -->
<g id="node122" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5772,-2294.06 5317,-2294.06 5317,-2237.06 5772,-2237.06 5772,-2294.06"/>
<text text-anchor="middle" x="5544.5" y="-2254.67" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge205" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5610.59,-2294.08C5684.2,-2329.93 5801.65,-2398.71 5862,-2495.56 5911.39,-2574.81 5829.78,-2638.8 5898,-2702.56 6064.35,-2858.03 6696.37,-2753.29 6917,-2809.56 6933.8,-2813.84 6936.07,-2820.85 6953,-2824.56 6989.17,-2832.49 8086.11,-2868.19 8431.76,-2879.27"/>
<polygon fill="black" stroke="black" points="8431.65,-2882.77 8441.76,-2879.59 8431.88,-2875.77 8431.65,-2882.77"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge203" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5573.03,-2236.89C5638.31,-2166.74 5801.5,-1978 5862,-1784.56 5886.58,-1705.96 5840.61,-361.63 5898,-302.56 5940.7,-258.61 6086.25,-254.34 6210.75,-259.67"/>
<polygon fill="black" stroke="black" points="6210.67,-263.17 6220.82,-260.12 6210.99,-256.17 6210.67,-263.17"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge204" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5772.28,-2259.77C5824.21,-2258.44 5881.27,-2256.98 5939.23,-2255.5"/>
<polygon fill="black" stroke="black" points="5939.39,-2259 5949.3,-2255.24 5939.21,-2252 5939.39,-2259"/>
</g>
<!-- telegram_bot._t -->
<g id="node123" class="node">
<title>telegram_bot._t</title>
<g id="a_node123"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5648.5,-131.56 5440.5,-131.56 5440.5,-95.56 5648.5,-95.56 5648.5,-131.56"/>
<text text-anchor="middle" x="5544.5" y="-107.68" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node124" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node124"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5695.5,-185.56 5393.5,-185.56 5393.5,-149.56 5695.5,-149.56 5695.5,-185.56"/>
<text text-anchor="middle" x="5544.5" y="-162.77" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node125" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node125"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6511.5,-185.56 6303.5,-185.56 6303.5,-149.56 6511.5,-149.56 6511.5,-185.56"/>
<text text-anchor="middle" x="6407.5" y="-163.86" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge206" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5695.97,-167.56C5866.19,-167.56 6139.61,-167.56 6292.9,-167.56"/>
<polygon fill="black" stroke="black" points="6293.27,-171.06 6303.27,-167.56 6293.27,-164.06 6293.27,-171.06"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node126" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node126"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5695.5,-5378.56 5393.5,-5378.56 5393.5,-5342.56 5695.5,-5342.56 5695.5,-5378.56"/>
<text text-anchor="middle" x="5544.5" y="-5355.26" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge207" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5695.76,-5350.22C5750.64,-5352.27 5811.57,-5361.71 5862,-5387.56 5883.88,-5398.77 5876,-5418.59 5898,-5429.56 6051.94,-5506.28 8825.54,-5544.82 8993,-5505.56 9308.43,-5431.61 9421.39,-5415.04 9646,-5181.56 9839.04,-4980.9 9922.21,-4635.88 9943.04,-4535.63"/>
<polygon fill="black" stroke="black" points="9946.5,-4536.17 9945.07,-4525.67 9939.64,-4534.77 9946.5,-4536.17"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node127" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node127"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9481,-5172.56 9194,-5172.56 9194,-5136.56 9481,-5136.56 9481,-5172.56"/>
<text text-anchor="middle" x="9337.5" y="-5148.86" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge208" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9381.85,-5136.46C9445.42,-5108.34 9565.1,-5049.21 9646,-4971.56 9790.74,-4832.63 9900.47,-4611.97 9936.13,-4535.07"/>
<polygon fill="black" stroke="black" points="9939.48,-4536.15 9940.48,-4525.6 9933.12,-4533.23 9939.48,-4536.15"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node128" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6491.5,-4110.56 6323.5,-4110.56 6323.5,-4074.56 6491.5,-4074.56 6491.5,-4110.56"/>
<text text-anchor="middle" x="6407.5" y="-4089.32" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node129" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node129"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7644,-3804.56 7352,-3804.56 7352,-3768.56 7644,-3768.56 7644,-3804.56"/>
<text text-anchor="middle" x="7498" y="-3782.4" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge209" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7639.26,-3768.55C7826.53,-3744.51 8158.15,-3701.94 8361.1,-3675.89"/>
<polygon fill="black" stroke="black" points="8361.79,-3679.33 8371.27,-3674.58 8360.9,-3672.38 8361.79,-3679.33"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node130" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="9499,-1133.56 9176,-1133.56 9176,-1097.56 9499,-1097.56 9499,-1133.56"/>
<text text-anchor="middle" x="9337.5" y="-1110.77" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge210" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9499.32,-1114.17C9549.65,-1120.26 9603.18,-1134.06 9646,-1162.56 9671.57,-1179.58 9657.91,-1202.5 9682,-1221.56 9723.69,-1254.54 9778.32,-1275.21 9827.25,-1288.08"/>
<polygon fill="black" stroke="black" points="9826.4,-1291.47 9836.96,-1290.55 9828.13,-1284.69 9826.4,-1291.47"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node131" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5783,-767.56 5306,-767.56 5306,-727.56 5783,-727.56 5783,-767.56"/>
<text text-anchor="middle" x="5544.5" y="-740.49" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge211" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5638.71,-767.57C5710.07,-776.92 5805.57,-775.47 5862,-717.56 5943.31,-634.13 5814.98,-276.29 5898,-194.56 5951.84,-141.56 6160.46,-147.29 6293.18,-156.96"/>
<polygon fill="black" stroke="black" points="6293.16,-160.47 6303.4,-157.73 6293.68,-153.49 6293.16,-160.47"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge212" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5662.78,-767.57C6022.49,-827.9 7142.59,-1008.1 8079,-1076.56 8466.9,-1104.92 8923.58,-1112.69 9165.69,-1114.8"/>
<polygon fill="black" stroke="black" points="9165.95,-1118.3 9175.98,-1114.89 9166.01,-1111.3 9165.95,-1118.3"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node132" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node132"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5820,-2962.56 5269,-2962.56 5269,-2910.56 5820,-2910.56 5820,-2962.56"/>
<text text-anchor="middle" x="5544.5" y="-2926.86" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge213" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5802.14,-2910.54C5825.06,-2899.04 5845.71,-2883.75 5862,-2863.56 5955.11,-2748.14 5795.24,-301.47 5898,-194.56 5950.39,-140.05 6159.78,-146.33 6292.98,-156.5"/>
<polygon fill="black" stroke="black" points="6292.98,-160.01 6303.23,-157.3 6293.53,-153.03 6292.98,-160.01"/>
</g>
<!-- lot_io.get_lot -->
<g id="node133" class="node">
<title>lot_io.get_lot</title>
<g id="a_node133"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7570.5,-2946.56 7425.5,-2946.56 7425.5,-2910.56 7570.5,-2910.56 7570.5,-2946.56"/>
<text text-anchor="middle" x="7498" y="-2923.77" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge214" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5820.19,-2935.43C6270.89,-2933.59 7144.4,-2930.01 7415.04,-2928.9"/>
<polygon fill="black" stroke="black" points="7415.19,-2932.4 7425.18,-2928.85 7415.17,-2925.4 7415.19,-2932.4"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge237" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7570.7,-2939.31C7688.97,-2952.52 7923.71,-2958.78 8043,-2824.56 8117.6,-2740.63 8005.54,-2405.49 8079,-2320.56 8162.08,-2224.51 8314.3,-2208.58 8419.89,-2210.67"/>
<polygon fill="black" stroke="black" points="8419.87,-2214.17 8429.96,-2210.93 8420.05,-2207.17 8419.87,-2214.17"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge238" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7570.74,-2922.46C7700.65,-2912.88 7968.35,-2900.28 8043,-2951.56 8076.14,-2974.33 8045.86,-3011.79 8079,-3034.56 8162.77,-3092.13 8920.61,-3002.2 8993,-3073.56 9043.01,-3122.86 9010.04,-3636.94 9029,-3704.56 9093.46,-3934.51 9259.66,-4176.22 9316.84,-4255.04"/>
<polygon fill="black" stroke="black" points="9314.23,-4257.4 9322.95,-4263.42 9319.88,-4253.28 9314.23,-4257.4"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node134" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node134"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5111.5,-5378.56 4781.5,-5378.56 4781.5,-5342.56 5111.5,-5342.56 5111.5,-5378.56"/>
<text text-anchor="middle" x="4946.5" y="-5354.4" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge215" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5111.54,-5360.56C5196.23,-5360.56 5299.14,-5360.56 5383.27,-5360.56"/>
<polygon fill="black" stroke="black" points="5383.43,-5364.06 5393.43,-5360.56 5383.43,-5357.06 5383.43,-5364.06"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node135" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node135"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5058.5,-159.56 4834.5,-159.56 4834.5,-123.56 5058.5,-123.56 5058.5,-159.56"/>
<text text-anchor="middle" x="4946.5" y="-137.4" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge216" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5058.55,-136.34C5164.59,-131.36 5323.59,-123.89 5430.32,-118.88"/>
<polygon fill="black" stroke="black" points="5430.66,-122.37 5440.49,-118.4 5430.33,-115.37 5430.66,-122.37"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge217" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5058.55,-146.41C5149.9,-150.39 5280.55,-156.09 5383.23,-160.57"/>
<polygon fill="black" stroke="black" points="5383.25,-164.07 5393.39,-161.01 5383.55,-157.08 5383.25,-164.07"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node136" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node136"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5121,-217.06 4772,-217.06 4772,-178.06 5121,-178.06 5121,-217.06"/>
<text text-anchor="middle" x="4946.5" y="-190.66" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge218" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5121.09,-188.64C5145.11,-184.05 5169.05,-177.58 5191,-168.56 5209.75,-160.86 5208.12,-147.95 5227,-140.56 5291.21,-115.43 5368.2,-108.4 5430.17,-107.8"/>
<polygon fill="black" stroke="black" points="5430.39,-111.3 5440.38,-107.75 5430.36,-104.3 5430.39,-111.3"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge219" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5121.09,-188.82C5203.81,-184.66 5302.11,-179.71 5383.06,-175.64"/>
<polygon fill="black" stroke="black" points="5383.54,-179.12 5393.35,-175.12 5383.19,-172.13 5383.54,-179.12"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge220" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5121.15,-199.38C5305.13,-200.75 5604.09,-201.37 5862,-194.56 6011.21,-190.62 6183.21,-181.29 6293.31,-174.7"/>
<polygon fill="black" stroke="black" points="6293.66,-178.19 6303.44,-174.09 6293.24,-171.2 6293.66,-178.19"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node137" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node137"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5161.5,-105.06 4731.5,-105.06 4731.5,-64.06 5161.5,-64.06 5161.5,-105.06"/>
<text text-anchor="middle" x="4946.5" y="-77.32" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge221" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5161.83,-94.99C5252.53,-99.4 5354.49,-104.36 5430.2,-108.05"/>
<polygon fill="black" stroke="black" points="5430.07,-111.55 5440.23,-108.54 5430.41,-104.55 5430.07,-111.55"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge222" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5161.54,-104.62C5171.61,-107.53 5181.48,-110.83 5191,-114.56 5209.37,-121.77 5208.5,-133.69 5227,-140.56 5275.96,-158.73 5332,-167.15 5383.18,-170.55"/>
<polygon fill="black" stroke="black" points="5383.16,-174.05 5393.35,-171.16 5383.58,-167.06 5383.16,-174.05"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge223" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5016.76,-63.98C5176.91,-20.6 5580.63,64.42 5862,-86.56 5887.42,-100.2 5872.94,-126.28 5898,-140.56 5962.97,-177.58 6164.12,-177.46 6293.11,-173.13"/>
<polygon fill="black" stroke="black" points="6293.55,-176.61 6303.42,-172.76 6293.31,-169.62 6293.55,-176.61"/>
</g>
<!-- telegram_bot.main -->
<g id="node138" class="node">
<title>telegram_bot.main</title>
<g id="a_node138"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5112,-4160.56 4781,-4160.56 4781,-4116.56 5112,-4116.56 5112,-4160.56"/>
<text text-anchor="middle" x="4946.5" y="-4130.24" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge224" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4970.95,-4160.92C5022.3,-4211.63 5143.82,-4341.61 5191,-4478.56 5221.97,-4568.46 5161.23,-5264.9 5227,-5333.56 5285.75,-5394.89 5388.36,-5392.2 5460.79,-5380.32"/>
<polygon fill="black" stroke="black" points="5461.55,-5383.75 5470.8,-5378.59 5460.35,-5376.85 5461.55,-5383.75"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge225" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M4969.98,-4160.75C5019.91,-4211.62 5139.63,-4342.74 5191,-4478.56 5218.89,-4552.31 5170.8,-4776.25 5227,-4831.56 5338.78,-4941.56 7886.57,-5018.42 8043,-5029.56 8455.93,-5058.96 8941.44,-5110.43 9183.35,-5137.23"/>
<polygon fill="black" stroke="black" points="9183.3,-5140.75 9193.62,-5138.37 9184.07,-5133.79 9183.3,-5140.75"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge226" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5112.26,-4129.68C5149.96,-4127.82 5189.86,-4125.99 5227,-4124.56 5631.16,-4108.96 6113.51,-4098.39 6313.03,-4094.37"/>
<polygon fill="black" stroke="black" points="6313.25,-4097.86 6323.18,-4094.16 6313.11,-4090.87 6313.25,-4097.86"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge227" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M5112.33,-4142.46C5573.37,-4152.64 6847.13,-4175.53 6917,-4119.56 6971.86,-4075.61 6905.54,-4017.41 6953,-3965.56 7052.42,-3856.96 7218.85,-3814.1 7341.5,-3797.27"/>
<polygon fill="black" stroke="black" points="7342.28,-3800.7 7351.74,-3795.91 7341.36,-3793.76 7342.28,-3800.7"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge228" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5013.41,-4116.51C5071.72,-4093.1 5153.24,-4049.91 5191,-3981.56 5233.48,-3904.68 5171.82,-887.9 5227,-819.56 5245.45,-796.71 5269.5,-780.19 5296.1,-768.35"/>
<polygon fill="black" stroke="black" points="5297.75,-771.45 5305.62,-764.36 5295.04,-765 5297.75,-771.45"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge229" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5012.46,-4116.52C5070.53,-4093.01 5152.26,-4049.66 5191,-3981.56 5245.48,-3885.79 5154.42,-3073.47 5227,-2990.56 5236.77,-2979.4 5247.93,-2969.98 5260.08,-2962.05"/>
<polygon fill="black" stroke="black" points="5261.95,-2965.01 5268.65,-2956.8 5258.29,-2959.04 5261.95,-2965.01"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node140" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node140"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="7600,-2704.56 7396,-2704.56 7396,-2668.56 7600,-2668.56 7600,-2704.56"/>
<text text-anchor="middle" x="7498" y="-2680.68" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node141" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node141"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8695,-1497.56 8377,-1497.56 8377,-1457.56 8695,-1457.56 8695,-1497.56"/>
<text text-anchor="middle" x="8536" y="-1470.49" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node142" class="node">
<title>lot_io.write_lots</title>
<g id="a_node142"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7599.5,-1409.56 7396.5,-1409.56 7396.5,-1373.56 7599.5,-1373.56 7599.5,-1409.56"/>
<text text-anchor="middle" x="7498" y="-1385.97" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge233" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7599.54,-1393.8C7739.49,-1394.61 7982.67,-1386.96 8043,-1326.56 8139.16,-1230.3 7990.57,-1125.96 8079,-1022.56 8164.04,-923.13 8319.53,-897.85 8425.04,-892.96"/>
<polygon fill="black" stroke="black" points="8425.24,-896.45 8435.09,-892.55 8424.96,-889.46 8425.24,-896.45"/>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge235" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7599.74,-1377.07C7724.96,-1365.43 7935.26,-1368.05 8043,-1494.56 8138.2,-1606.35 7981.51,-2705.76 8079,-2815.56 8165.33,-2912.8 8325.81,-2913.58 8431.51,-2901.19"/>
<polygon fill="black" stroke="black" points="8432.07,-2904.64 8441.56,-2899.95 8431.21,-2897.7 8432.07,-2904.64"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge232" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7599.5,-1383.13C7736.95,-1373.7 7974.34,-1365.54 8043,-1414.56 8078.73,-1440.07 8043.79,-1480.33 8079,-1506.56 8242.43,-1628.34 8848.61,-1438.72 8993,-1582.56 9058.42,-1647.74 8970.79,-1924.87 9029,-1996.56 9087.05,-2068.06 9198.15,-2086.02 9269.71,-2089.75"/>
<polygon fill="black" stroke="black" points="9269.83,-2093.26 9279.97,-2090.21 9270.14,-2086.27 9269.83,-2093.26"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge234" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7599.66,-1381.53C7711.29,-1374.01 7895.13,-1372.44 8043,-1423.56 8061.41,-1429.93 8060.6,-1442.15 8079,-1448.56 8170.61,-1480.48 8278.75,-1488.52 8366.72,-1488.21"/>
<polygon fill="black" stroke="black" points="8366.82,-1491.71 8376.8,-1488.14 8366.77,-1484.71 8366.82,-1491.71"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node143" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node143"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8628.5,-2806.56 8443.5,-2806.56 8443.5,-2770.56 8628.5,-2770.56 8628.5,-2806.56"/>
<text text-anchor="middle" x="8536" y="-2783.78" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.embedding_path -->
<g id="node145" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node145"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8642.5,-1067.56 8429.5,-1067.56 8429.5,-1031.56 8642.5,-1031.56 8642.5,-1067.56"/>
<text text-anchor="middle" x="8536" y="-1045.4" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node146" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node146"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8619.5,-1439.56 8452.5,-1439.56 8452.5,-1403.56 8619.5,-1403.56 8619.5,-1439.56"/>
<text text-anchor="middle" x="8536" y="-1417.86" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge241" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8619.84,-1405.45C8716.33,-1391.19 8877.27,-1381.75 8993,-1448.56 9044.47,-1478.27 9260.02,-1839.73 9320.6,-1942.48"/>
<polygon fill="black" stroke="black" points="9317.72,-1944.49 9325.81,-1951.33 9323.75,-1940.94 9317.72,-1944.49"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge242" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8619.55,-1424.55C8745.84,-1429.14 8990,-1437.99 9158.02,-1444.09"/>
<polygon fill="black" stroke="black" points="9158.1,-1447.59 9168.22,-1444.46 9158.35,-1440.6 9158.1,-1447.59"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node147" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node147"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7612.5,-1317.56 7383.5,-1317.56 7383.5,-1281.56 7612.5,-1281.56 7612.5,-1317.56"/>
<text text-anchor="middle" x="7498" y="-1295.52" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge244" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7612.83,-1312.97C7819.52,-1337.31 8252.65,-1388.31 8442.5,-1410.67"/>
<polygon fill="black" stroke="black" points="8442.11,-1414.15 8452.45,-1411.84 8442.93,-1407.19 8442.11,-1414.15"/>
</g>
<!-- caption._identify_size -->
<g id="node148" class="node">
<title>caption._identify_size</title>
<g id="a_node148"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="8664.5,-5442.56 8407.5,-5442.56 8407.5,-5406.56 8664.5,-5406.56 8664.5,-5442.56"/>
<text text-anchor="middle" x="8536" y="-5418.86" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node149" class="node">
<title>caption._prepare_image</title>
<g id="a_node149"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="7715,-5458.56 7281,-5458.56 7281,-5412.56 7715,-5412.56 7715,-5458.56"/>
<text text-anchor="middle" x="7498" y="-5427.12" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge246" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M7715.23,-5433.26C7920.46,-5431.09 8222.73,-5427.88 8397.12,-5426.02"/>
<polygon fill="black" stroke="black" points="8397.17,-5429.52 8407.13,-5425.92 8397.1,-5422.52 8397.17,-5429.52"/>
</g>
<!-- caption._guess_chat -->
<g id="node150" class="node">
<title>caption._guess_chat</title>
<g id="a_node150"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="8632,-5496.56 8440,-5496.56 8440,-5460.56 8632,-5460.56 8632,-5496.56"/>
<text text-anchor="middle" x="8536" y="-5474.4" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node151" class="node">
<title>caption.caption_file</title>
<g id="a_node151"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="6710.5,-5421.06 6104.5,-5421.06 6104.5,-5348.06 6710.5,-5348.06 6710.5,-5421.06"/>
<text text-anchor="middle" x="6407.5" y="-5369.57" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge250" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6710.94,-5371.2C7179.1,-5350.38 8027.48,-5311.99 8043,-5306.56 8061.63,-5300.04 8061.52,-5289.72 8079,-5280.56 8460.64,-5080.62 8735.31,-5302.84 8993,-4957.56 9039.78,-4894.88 9008.11,-4329.93 9029,-4254.56 9092.79,-4024.42 9259.42,-3782.84 9316.77,-3704.06"/>
<polygon fill="black" stroke="black" points="9319.82,-3705.83 9322.9,-3695.69 9314.17,-3701.69 9319.82,-3705.83"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge247" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6710.6,-5383.73C7375.59,-5380.42 8913.59,-5364.18 8993,-5284.56 9066.19,-5211.18 8990.49,-4915.78 9029,-4819.56 9091.31,-4663.9 9241.88,-4522.96 9306.37,-4467.51"/>
<polygon fill="black" stroke="black" points="9308.82,-4470.02 9314.16,-4460.87 9304.28,-4464.69 9308.82,-4470.02"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge248" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6710.81,-5354.55C6789.62,-5347.04 6874.46,-5339.23 6953,-5332.56 7074.01,-5322.29 7957.7,-5338.01 8043,-5251.56 8135.57,-5157.74 8005.27,-4768.81 8079,-4659.56 8163.57,-4534.25 8341.11,-4479.3 8447.99,-4456.77"/>
<polygon fill="black" stroke="black" points="8449.02,-4460.14 8458.11,-4454.69 8447.61,-4453.28 8449.02,-4460.14"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge249" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M6710.67,-5369.29C6789.32,-5350.08 6866.15,-5314.74 6917,-5251.56 6978.92,-5174.64 6885.97,-4436.07 6953,-4363.56 7001.62,-4310.97 7181.32,-4297.76 7321.03,-4295.8"/>
<polygon fill="black" stroke="black" points="7321.49,-4299.29 7331.44,-4295.67 7321.4,-4292.29 7321.49,-4299.29"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge251" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M6710.62,-5398.72C6887.95,-5407.02 7108.34,-5417.35 7270.65,-5424.96"/>
<polygon fill="black" stroke="black" points="7270.62,-5428.46 7280.77,-5425.43 7270.94,-5421.46 7270.62,-5428.46"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge252" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M6602.39,-5421.07C6706,-5438.82 6835.99,-5458.28 6953,-5467.56 7507.63,-5511.53 8175.05,-5492.8 8429.5,-5483.07"/>
<polygon fill="black" stroke="black" points="8429.98,-5486.55 8439.84,-5482.67 8429.71,-5479.56 8429.98,-5486.55"/>
</g>
<!-- caption.main -->
<g id="node152" class="node">
<title>caption.main</title>
<g id="a_node152"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="5637,-5432.56 5452,-5432.56 5452,-5396.56 5637,-5396.56 5637,-5432.56"/>
<text text-anchor="middle" x="5544.5" y="-5408.4" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge253" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M5637.23,-5411.36C5745.67,-5407.59 5931.89,-5401.1 6093.95,-5395.45"/>
<polygon fill="black" stroke="black" points="6094.22,-5398.94 6104.1,-5395.1 6093.98,-5391.95 6094.22,-5398.94"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node153" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node153"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="8654,-2551.56 8418,-2551.56 8418,-2515.56 8654,-2515.56 8654,-2551.56"/>
<text text-anchor="middle" x="8536" y="-2529.52" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- price_train._iter_lots -->
<g id="node154" class="node">
<title>price_train._iter_lots</title>
<g id="a_node154"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7653.5,-2288.06 7342.5,-2288.06 7342.5,-2249.06 7653.5,-2249.06 7653.5,-2288.06"/>
<text text-anchor="middle" x="7498" y="-2261.66" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge254" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7653.54,-2261.4C7863.04,-2251.69 8232.45,-2234.58 8419.51,-2225.91"/>
<polygon fill="black" stroke="black" points="8419.82,-2229.4 8429.65,-2225.44 8419.5,-2222.41 8419.82,-2229.4"/>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge255" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7611.99,-2249.05C7722.34,-2229.46 7894.84,-2197.39 8043,-2163.56 8192.11,-2129.51 8364.55,-2082.06 8460.58,-2054.91"/>
<polygon fill="black" stroke="black" points="8461.81,-2058.2 8470.48,-2052.1 8459.9,-2051.46 8461.81,-2058.2"/>
</g>
<!-- price_train.main -->
<g id="node155" class="node">
<title>price_train.main</title>
<g id="a_node155"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6522.5,-3038.56 6292.5,-3038.56 6292.5,-3002.56 6522.5,-3002.56 6522.5,-3038.56"/>
<text text-anchor="middle" x="6407.5" y="-3014.4" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge256" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6522.64,-3026.7C6885.05,-3046.7 7989.05,-3111.83 8043,-3165.56 8104.35,-3226.67 8021.66,-3488.67 8079,-3553.56 8127.37,-3608.3 8198.21,-3636.89 8269.7,-3650.96"/>
<polygon fill="black" stroke="black" points="8269.32,-3654.45 8279.79,-3652.85 8270.61,-3647.57 8269.32,-3654.45"/>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge257" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6522.6,-3017.63C6629.27,-3019.1 6790.64,-3032.34 6917,-3090.56 6936.44,-3099.52 6933.53,-3113.65 6953,-3122.56 7044.51,-3164.43 7153.13,-3184.01 7249.16,-3192.56"/>
<polygon fill="black" stroke="black" points="7249.04,-3196.06 7259.3,-3193.42 7249.64,-3189.09 7249.04,-3196.06"/>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge258" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6522.52,-3020.38C6641.46,-3013.44 6823.35,-2982.39 6917,-2863.56 6995.01,-2764.57 6863.43,-2386.22 6953,-2297.56 7004.86,-2246.23 7191.83,-2246.24 7332.2,-2254.35"/>
<polygon fill="black" stroke="black" points="7332.03,-2257.85 7342.22,-2254.95 7332.45,-2250.86 7332.03,-2257.85"/>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge259" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6522.53,-3021.29C6642.39,-3015.2 6825.92,-2984.95 6917,-2863.56 6991.8,-2763.87 6871.29,-714.66 6953,-620.56 6966.81,-604.66 6982.26,-590.86 6998.98,-578.92"/>
<polygon fill="black" stroke="black" points="7001.03,-581.75 7007.29,-573.2 6997.07,-575.99 7001.03,-581.75"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node157" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node157"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="7710.5,-3042.06 7285.5,-3042.06 7285.5,-3003.06 7710.5,-3003.06 7710.5,-3042.06"/>
<text text-anchor="middle" x="7498" y="-3015.66" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge260" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6522.68,-3020.77C6700.59,-3021.1 7047.21,-3021.73 7275.4,-3022.15"/>
<polygon fill="black" stroke="black" points="7275.49,-3025.65 7285.49,-3022.17 7275.5,-3018.65 7275.49,-3025.65"/>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge265" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8043.17,-499.37C8152.13,-492.32 8259.55,-485.37 8346.06,-479.78"/>
<polygon fill="black" stroke="black" points="8346.48,-483.26 8356.24,-479.12 8346.03,-476.27 8346.48,-483.26"/>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge266" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7666.4,-3003.03C7774.06,-2990.2 7916.88,-2972.68 8043,-2955.56 8177.43,-2937.31 8332.16,-2913.97 8431.64,-2898.66"/>
<polygon fill="black" stroke="black" points="8432.34,-2902.09 8441.69,-2897.11 8431.28,-2895.17 8432.34,-2902.09"/>
</g>
<!-- embed.embed_file -->
<g id="node158" class="node">
<title>embed.embed_file</title>
<g id="a_node158"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7703,-2816.06 7293,-2816.06 7293,-2761.06 7703,-2761.06 7703,-2816.06"/>
<text text-anchor="middle" x="7498" y="-2778.01" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge261" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7680.94,-2816.06C7800.86,-2823.08 7952.03,-2808.78 8043,-2713.56 8103.58,-2650.15 8020.97,-2386.31 8079,-2320.56 8162.91,-2225.49 8314.57,-2209.28 8419.83,-2211.04"/>
<polygon fill="black" stroke="black" points="8419.8,-2214.54 8429.87,-2211.26 8419.95,-2207.54 8419.8,-2214.54"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge263" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7703.19,-2802.95C7805.3,-2810.5 7930.74,-2820.3 8043,-2830.56 8177.38,-2842.85 8332.12,-2859.64 8431.62,-2870.78"/>
<polygon fill="black" stroke="black" points="8431.35,-2874.27 8441.67,-2871.9 8432.13,-2867.31 8431.35,-2874.27"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge262" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7703.06,-2788.56C7923.02,-2788.56 8264.22,-2788.56 8433.13,-2788.56"/>
<polygon fill="black" stroke="black" points="8433.27,-2792.06 8443.27,-2788.56 8433.27,-2785.06 8433.27,-2792.06"/>
</g>
<!-- embed.main -->
<g id="node159" class="node">
<title>embed.main</title>
<g id="a_node159"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6495.5,-2854.56 6319.5,-2854.56 6319.5,-2818.56 6495.5,-2818.56 6495.5,-2854.56"/>
<text text-anchor="middle" x="6407.5" y="-2830.4" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge264" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6495.74,-2832.71C6665.02,-2825.25 7042.48,-2808.6 7282.54,-2798.02"/>
<polygon fill="black" stroke="black" points="7282.96,-2801.5 7292.79,-2797.57 7282.65,-2794.51 7282.96,-2801.5"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node162" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node162"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10217,-273.56 9682,-273.56 9682,-223.56 10217,-223.56 10217,-273.56"/>
<text text-anchor="middle" x="9949.5" y="-238.87" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge268" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9594.1,-248.56C9619.74,-248.56 9645.85,-248.56 9671.69,-248.56"/>
<polygon fill="black" stroke="black" points="9671.96,-252.06 9681.96,-248.56 9671.96,-245.06 9671.96,-252.06"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node164" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node164"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="10093.5,-1212.56 9805.5,-1212.56 9805.5,-1176.56 10093.5,-1176.56 10093.5,-1212.56"/>
<text text-anchor="middle" x="9949.5" y="-1189.78" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge275" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9632.52,-1213.63C9637.25,-1217.6 9641.75,-1221.9 9646,-1226.56 9677.11,-1260.71 9676.06,-4506.75 9682,-4552.56 9736.19,-4970.63 9897.86,-5461.45 9938.93,-5581.87"/>
<polygon fill="black" stroke="black" points="9935.65,-5583.12 9942.21,-5591.44 9942.28,-5580.85 9935.65,-5583.12"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge274" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9632.78,-1194.56C9688.93,-1194.56 9745.57,-1194.56 9795.06,-1194.56"/>
<polygon fill="black" stroke="black" points="9795.19,-1198.06 9805.19,-1194.56 9795.19,-1191.06 9795.19,-1198.06"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node167" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node167"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7754,-1549.56 7242,-1549.56 7242,-1503.56 7754,-1503.56 7754,-1549.56"/>
<text text-anchor="middle" x="7498" y="-1518.12" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge279" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7754.02,-1512.06C7873.91,-1510.97 7999.9,-1520 8043,-1558.56 8113.57,-1621.7 8016.11,-1697.77 8079,-1768.56 8122.88,-1817.95 8183.88,-1849.65 8247.01,-1869.9"/>
<polygon fill="black" stroke="black" points="8246.16,-1873.3 8256.74,-1872.93 8248.23,-1866.62 8246.16,-1873.3"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge280" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7754.32,-1509.49C7875.57,-1507.54 8002.73,-1516.57 8043,-1558.56 8124.73,-1643.78 8010.65,-3587.28 8079,-3683.56 8163.57,-3802.69 8342.37,-3837.52 8449.23,-3847.59"/>
<polygon fill="black" stroke="black" points="8449.07,-3851.09 8459.34,-3848.49 8449.69,-3844.12 8449.07,-3851.09"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge281" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7754.14,-1510.39C7874.91,-1508.74 8001.68,-1517.77 8043,-1558.56 8122.59,-1637.14 8011.1,-1971.69 8079,-2060.56 8159.07,-2165.34 8312.71,-2201.77 8419.41,-2214.28"/>
<polygon fill="black" stroke="black" points="8419.25,-2217.79 8429.58,-2215.42 8420.03,-2210.83 8419.25,-2217.79"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge282" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7714.88,-1503.53C7817.1,-1487.69 7939.22,-1461.46 8043,-1418.56 8060.77,-1411.21 8062.08,-1403.7 8079,-1394.56 8215.45,-1320.88 8385.81,-1254.78 8474.68,-1222.12"/>
<polygon fill="black" stroke="black" points="8476.14,-1225.31 8484.33,-1218.58 8473.73,-1218.74 8476.14,-1225.31"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge283" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7601.1,-1503.56C7718.44,-1483.21 7911.69,-1469 8043,-1558.56 8074.54,-1580.07 8049.37,-1612.48 8079,-1636.56 8165.54,-1706.88 8290.38,-1731.98 8387.57,-1740.13"/>
<polygon fill="black" stroke="black" points="8387.53,-1743.64 8397.78,-1740.94 8388.08,-1736.66 8387.53,-1743.64"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node168" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node168"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="9451.5,-1271.56 9223.5,-1271.56 9223.5,-1235.56 9451.5,-1235.56 9451.5,-1271.56"/>
<text text-anchor="middle" x="9337.5" y="-1248.26" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node169" class="node">
<title>chop.process_message</title>
<g id="a_node169"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6908.5,-2573.56 5906.5,-2573.56 5906.5,-2471.56 6908.5,-2471.56 6908.5,-2573.56"/>
<text text-anchor="middle" x="6407.5" y="-2501.24" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge284" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6908.86,-2506.26C7232.42,-2495.36 7662.66,-2480.2 8043,-2464.56 8154.4,-2459.98 8279.95,-2454.1 8376.34,-2449.43"/>
<polygon fill="black" stroke="black" points="8376.64,-2452.92 8386.46,-2448.94 8376.3,-2445.93 8376.64,-2452.92"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge285" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6636.99,-2471.53C6738.85,-2436.82 6850.61,-2379.82 6917,-2287.56 6959.7,-2228.22 6899.3,-2010.16 6953,-1960.56 6997.51,-1919.46 7982.46,-1929.95 8043,-1927.56 8108.94,-1924.95 8179.83,-1921.74 8246.69,-1918.52"/>
<polygon fill="black" stroke="black" points="8247.13,-1922 8256.95,-1918.02 8246.8,-1915.01 8247.13,-1922"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge287" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6863.21,-2471.56C6893.58,-2468.95 6923.72,-2466.57 6953,-2464.56 7194.77,-2447.94 7806.75,-2484.56 8043,-2430.56 8060.07,-2426.66 8062.18,-2419.42 8079,-2414.56 8170.02,-2388.29 8274.42,-2372.2 8360.34,-2362.49"/>
<polygon fill="black" stroke="black" points="8360.91,-2365.95 8370.46,-2361.37 8360.14,-2359 8360.91,-2365.95"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge292" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6646.7,-2471.45C6747.42,-2437 6855.47,-2380.23 6917,-2287.56 6981.45,-2190.49 6870.21,-1321.55 6953,-1239.56 6977.68,-1215.12 7951.33,-1204.95 8358.67,-1201.76"/>
<polygon fill="black" stroke="black" points="8358.81,-1205.26 8368.78,-1201.68 8358.75,-1198.26 8358.81,-1205.26"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge286" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6833.47,-2573.59C6865.22,-2591.31 6893.84,-2613.9 6917,-2642.56 6979.13,-2719.45 6882.86,-4351.9 6953,-4421.56 7006.32,-4474.51 8124.88,-4452.27 8448.19,-4444.7"/>
<polygon fill="black" stroke="black" points="8448.53,-4448.2 8458.44,-4444.46 8448.36,-4441.2 8448.53,-4448.2"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge289" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6826.16,-2573.62C6860.26,-2591.2 6891.38,-2613.75 6917,-2642.56 6963.52,-2694.88 6901.56,-2908.06 6953,-2955.56 7042.03,-3037.77 7941.57,-2927.24 8043,-2993.56 8073.95,-3013.79 8048.41,-3047.78 8079,-3068.56 8185.15,-3140.66 8339.13,-3134.45 8438.17,-3120.09"/>
<polygon fill="black" stroke="black" points="8438.81,-3123.53 8448.17,-3118.58 8437.76,-3116.61 8438.81,-3123.53"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge288" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6666.23,-2573.57C6747.37,-2592.24 6836.74,-2615.52 6917,-2642.56 6933.59,-2648.15 6935.97,-2654.49 6953,-2658.56 7099.61,-2693.63 7274.55,-2695.89 7385.7,-2692.59"/>
<polygon fill="black" stroke="black" points="7386.04,-2696.08 7395.92,-2692.27 7385.82,-2689.09 7386.04,-2696.08"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge290" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6908.75,-2525.15C7400.78,-2527.69 8118.88,-2531.41 8407.71,-2532.9"/>
<polygon fill="black" stroke="black" points="8407.79,-2536.4 8417.81,-2532.95 8407.82,-2529.4 8407.79,-2536.4"/>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge291" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6790.67,-2573.67C6836.11,-2590.7 6879.57,-2613.11 6917,-2642.56 6944.81,-2664.44 6924.19,-2693.02 6953,-2713.56 7047.48,-2780.91 7175.07,-2801.17 7282.94,-2803.9"/>
<polygon fill="black" stroke="black" points="7282.92,-2807.4 7292.99,-2804.1 7283.06,-2800.4 7282.92,-2807.4"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge293" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6646.32,-2471.54C6747.13,-2437.09 6855.36,-2380.3 6917,-2287.56 6979.47,-2193.58 6872.12,-1351.25 6953,-1272.56 6993.85,-1232.82 8730.51,-1247.42 9213.19,-1252.25"/>
<polygon fill="black" stroke="black" points="9213.29,-1255.75 9223.32,-1252.35 9213.36,-1248.75 9213.29,-1255.75"/>
</g>
<!-- chop.main -->
<g id="node170" class="node">
<title>chop.main</title>
<g id="a_node170"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5620,-2540.56 5469,-2540.56 5469,-2504.56 5620,-2504.56 5620,-2540.56"/>
<text text-anchor="middle" x="5544.5" y="-2516.4" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge294" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5620.03,-2522.56C5685.59,-2522.56 5787.33,-2522.56 5896.12,-2522.56"/>
<polygon fill="black" stroke="black" points="5896.32,-2526.06 5906.32,-2522.56 5896.32,-2519.06 5896.32,-2526.06"/>
</g>
<!-- check_translations.parse_po -->
<g id="node171" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-5587.56 1083.5,-5587.56 1083.5,-5535.56 1667.5,-5535.56 1667.5,-5587.56"/>
<text text-anchor="middle" x="1375.5" y="-5551.86" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node172" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-5584.06 318,-5584.06 318,-5539.06 983,-5539.06 983,-5584.06"/>
<text text-anchor="middle" x="650.5" y="-5553.18" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge295" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-5561.56C1013.14,-5561.56 1043.45,-5561.56 1073.19,-5561.56"/>
<polygon fill="black" stroke="black" points="1073.26,-5565.06 1083.26,-5561.56 1073.26,-5558.06 1073.26,-5565.06"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node173" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node173"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8686.5,-769.56 8385.5,-769.56 8385.5,-733.56 8686.5,-733.56 8686.5,-769.56"/>
<text text-anchor="middle" x="8536" y="-747.52" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node174" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6641.5,-1335.56 6173.5,-1335.56 6173.5,-1283.56 6641.5,-1283.56 6641.5,-1335.56"/>
<text text-anchor="middle" x="6407.5" y="-1299.42" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge296" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6484.46,-1335.58C6588.66,-1369.94 6782.48,-1429.06 6953,-1454.56 7012.93,-1463.52 7998.19,-1453.77 8043,-1494.56 8133.83,-1577.24 7999.24,-1675.16 8079,-1768.56 8122.22,-1819.17 8183.44,-1851.3 8247.03,-1871.56"/>
<polygon fill="black" stroke="black" points="8246.25,-1874.98 8256.84,-1874.58 8248.32,-1868.29 8246.25,-1874.98"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge299" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6517.62,-1335.6C6630.71,-1355.67 6806.13,-1366.47 6917,-1274.56 6965.8,-1234.11 6902.84,-1175.31 6953,-1136.56 7048.84,-1062.52 7922.14,-1128.73 8043,-1136.56 8171.6,-1144.89 8317.93,-1165.34 8417.34,-1180.9"/>
<polygon fill="black" stroke="black" points="8416.99,-1184.39 8427.41,-1182.49 8418.08,-1177.48 8416.99,-1184.39"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge297" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6633.43,-1335.6C6737.59,-1360.13 6852.34,-1407.64 6917,-1499.56 6962.16,-1563.77 6898.1,-4269.44 6953,-4325.56 7037.74,-4412.19 7936.65,-4305.46 8043,-4363.56 8067.67,-4377.04 8054.5,-4401.78 8079,-4415.56 8140.06,-4449.89 8334.02,-4449.7 8448.36,-4446.28"/>
<polygon fill="black" stroke="black" points="8448.61,-4449.77 8458.49,-4445.96 8448.39,-4442.78 8448.61,-4449.77"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge298" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6641.68,-1307.42C6865.78,-1305.36 7195.81,-1302.33 7373.26,-1300.7"/>
<polygon fill="black" stroke="black" points="7373.46,-1304.2 7383.42,-1300.6 7373.39,-1297.2 7373.46,-1304.2"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge300" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6503.9,-1335.57C6618.52,-1360.43 6808.84,-1380.23 6917,-1274.56 6979.26,-1213.74 6891.21,-945.85 6953,-884.56 7052.56,-785.81 7993.57,-760.01 8375.29,-753.59"/>
<polygon fill="black" stroke="black" points="8375.37,-757.09 8385.31,-753.42 8375.26,-750.09 8375.37,-757.09"/>
</g>
<!-- pending_chop.main -->
<g id="node175" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7661.5,-1187.56 7334.5,-1187.56 7334.5,-1145.56 7661.5,-1145.56 7661.5,-1187.56"/>
<text text-anchor="middle" x="7498" y="-1158.47" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge301" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7661.75,-1150.25C7785.4,-1147.68 7949.64,-1167.27 8043,-1272.56 8116.32,-1355.25 8009.71,-1682.47 8079,-1768.56 8121.16,-1820.94 8182.65,-1853.66 8246.9,-1873.92"/>
<polygon fill="black" stroke="black" points="8246.23,-1877.38 8256.82,-1876.94 8248.27,-1870.68 8246.23,-1877.38"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge302" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7661.73,-1171.9C7851.4,-1178.13 8163.69,-1188.37 8358.91,-1194.78"/>
<polygon fill="black" stroke="black" points="8358.87,-1198.28 8368.98,-1195.11 8359.1,-1191.29 8358.87,-1198.28"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node176" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node176"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="7907,-2650.06 7089,-2650.06 7089,-2593.06 7907,-2593.06 7907,-2650.06"/>
<text text-anchor="middle" x="7498" y="-2610.22" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge303" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7907.3,-2645.39C8345.9,-2671.37 8982.13,-2710.37 8993,-2718.56 9310.67,-2957.98 9335.29,-3517 9336.59,-3649.19"/>
<polygon fill="black" stroke="black" points="9333.09,-3649.33 9336.65,-3659.3 9340.09,-3649.28 9333.09,-3649.33"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge304" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7907.32,-2618.96C7967.93,-2625.99 8018.34,-2638.5 8043,-2659.56 8097.11,-2705.77 8026.69,-2767.32 8079,-2815.56 8173.5,-2902.71 8328.97,-2906.86 8431.67,-2897.87"/>
<polygon fill="black" stroke="black" points="8432.12,-2901.34 8441.75,-2896.93 8431.47,-2894.37 8432.12,-2901.34"/>
</g>
<!-- pending_embed.main -->
<g id="node177" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6669.5,-1787.56 6145.5,-1787.56 6145.5,-1727.56 6669.5,-1727.56 6669.5,-1787.56"/>
<text text-anchor="middle" x="6407.5" y="-1746.04" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge305" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6669.51,-1735.28C6993.53,-1712.8 7562.18,-1690.34 8043,-1759.56 8061.12,-1762.17 8259.22,-1820.92 8398.44,-1862.56"/>
<polygon fill="black" stroke="black" points="8397.78,-1866.01 8408.36,-1865.53 8399.78,-1859.31 8397.78,-1866.01"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge306" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6468.6,-1787.75C6581.01,-1848 6820.44,-1995.07 6917,-2198.56 6945.81,-2259.27 6905.96,-3359.58 6953,-3407.56 7005.4,-3461.01 7201.06,-3458.68 7342.74,-3449.11"/>
<polygon fill="black" stroke="black" points="7343.11,-3452.6 7352.84,-3448.41 7342.63,-3445.61 7343.11,-3452.6"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge307" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6435.4,-1787.58C6508.85,-1867.09 6722.75,-2082.54 6953,-2163.56 7089.95,-2211.75 8078.6,-2219.22 8419.68,-2220.36"/>
<polygon fill="black" stroke="black" points="8419.81,-2223.86 8429.82,-2220.39 8419.83,-2216.86 8419.81,-2223.86"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge309" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6669.62,-1752.92C7103.9,-1747.59 7937.59,-1748.42 8043,-1830.56 8086.92,-1864.79 8037.5,-1913.44 8079,-1950.56 8164.82,-2027.32 8297.16,-2044.2 8397.21,-2044.16"/>
<polygon fill="black" stroke="black" points="8397.42,-2047.66 8407.4,-2044.1 8397.38,-2040.66 8397.42,-2047.66"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge308" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6614.15,-1727.51C6721.84,-1700.58 6845.79,-1649.67 6917,-1553.56 6972.37,-1478.83 6886.21,-1201.3 6953,-1136.56 7057.61,-1035.17 8072.45,-1042.01 8419.4,-1047.38"/>
<polygon fill="black" stroke="black" points="8419.41,-1050.88 8429.46,-1047.54 8419.52,-1043.88 8419.41,-1050.88"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge310" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6617.2,-1727.53C6724.61,-1700.63 6847.3,-1649.74 6917,-1553.56 6989.39,-1453.66 6863.02,-1083.96 6953,-999.56 6994.33,-960.79 8948.34,-963.69 8993,-998.56 9045,-1039.16 8980.58,-1097.75 9029,-1142.56 9039.31,-1152.1 9050.69,-1160.25 9062.82,-1167.17"/>
<polygon fill="black" stroke="black" points="9061.32,-1170.34 9071.78,-1172.01 9064.64,-1164.18 9061.32,-1170.34"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge311" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6616.36,-1727.54C6723.85,-1700.65 6846.91,-1649.75 6917,-1553.56 6984.17,-1461.38 6870.23,-1120.03 6953,-1041.56 6994.13,-1002.57 8950.25,-985.36 8993,-1022.56 9080.34,-1098.56 8945.07,-1200.81 9029,-1280.56 9085.28,-1334.04 9176.34,-1335.64 9244.79,-1326.95"/>
<polygon fill="black" stroke="black" points="9245.29,-1330.41 9254.72,-1325.59 9244.34,-1323.48 9245.29,-1330.41"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge312" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6464.23,-1787.72C6571.84,-1849.21 6807.29,-2000.17 6917,-2198.56 6967.5,-2289.87 6886.3,-2350.32 6953,-2430.56 7025.21,-2517.43 7139.47,-2564.82 7244.68,-2590.67"/>
<polygon fill="black" stroke="black" points="7243.96,-2594.1 7254.5,-2593.03 7245.6,-2587.29 7243.96,-2594.1"/>
</g>
<!-- tg_client:cli -->
<g id="node179" class="node">
<title>tg_client:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-5499.56" rx="32.86" ry="18"/>
<text text-anchor="middle" x="1986" y="-5497.96" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;tg_client:cli -->
<!-- debug_dump:cli -->
<g id="node180" class="node">
<title>debug_dump:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-5499.56" rx="41.11" ry="18"/>
<text text-anchor="middle" x="2606.5" y="-5497.96" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;debug_dump:cli -->
<!-- similar:cli -->
<g id="node181" class="node">
<title>similar:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-5499.56" rx="29.05" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-5497.96" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;similar:cli -->
<!-- scan_ontology:cli -->
<g id="node182" class="node">
<title>scan_ontology:cli</title>
<g id="a_node182"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-5499.56" rx="44.19" ry="18"/>
<text text-anchor="middle" x="4058" y="-5497.96" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;scan_ontology:cli -->
<!-- telegram_bot:cli -->
<g id="node183" class="node">
<title>telegram_bot:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5623.56" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="141" y="-5619.4" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- caption:cli -->
<g id="node184" class="node">
<title>caption:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5623.56" rx="30.28" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5621.96" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;caption:cli -->
<!-- price_train:cli -->
<g id="node185" class="node">
<title>price_train:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5623.56" rx="36.68" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5621.96" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;price_train:cli -->
<!-- embed:cli -->
<g id="node186" class="node">
<title>embed:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-5623.56" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1986" y="-5621.96" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;embed:cli -->
<!-- moderation:cli -->
<g id="node187" class="node">
<title>moderation:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-5623.56" rx="38.53" ry="18"/>
<text text-anchor="middle" x="2606.5" y="-5621.96" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;moderation:cli -->
<!-- chop:cli -->
<g id="node188" class="node">
<title>chop:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-5623.56" rx="27" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-5621.96" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;chop:cli -->
<!-- check_translations:cli -->
<g id="node189" class="node">
<title>check_translations:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-5623.56" rx="53.05" ry="18"/>
<text text-anchor="middle" x="4058" y="-5621.96" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;check_translations:cli -->
<!-- pending_caption:cli -->
<g id="node190" class="node">
<title>pending_caption:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5678.56" rx="48.62" ry="18"/>
<text text-anchor="middle" x="141" y="-5676.96" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli -->
<g id="node191" class="node">
<title>pending_chop:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5678.56" rx="42.96" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5676.96" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;pending_chop:cli -->
<!-- pending_embed:cli -->
<g id="node192" class="node">
<title>pending_embed:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5678.56" rx="47.39" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5676.96" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_embed:cli -->
<!-- build_site -->
<g id="node193" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-620.56" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4058" y="-616.86" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge326" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4114.12,-620.56C4233.9,-620.56 4523.52,-620.56 4727.09,-620.56"/>
<polygon fill="black" stroke="black" points="4727.32,-624.06 4737.32,-620.56 4727.32,-617.06 4727.32,-624.06"/>
</g>
<!-- caption -->
<g id="node194" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-5414.56" rx="44.69" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-5410.86" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge327" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M4991.81,-5414.56C5086.4,-5414.56 5310.15,-5414.56 5441.81,-5414.56"/>
<polygon fill="black" stroke="black" points="5441.91,-5418.06 5451.91,-5414.56 5441.91,-5411.06 5441.91,-5418.06"/>
</g>
<!-- check_translations -->
<g id="node195" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-5561.56" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-5557.86" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge328" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-5561.56C259.3,-5561.56 282.99,-5561.56 307.97,-5561.56"/>
<polygon fill="black" stroke="black" points="307.99,-5565.06 317.99,-5561.56 307.99,-5558.06 307.99,-5565.06"/>
</g>
<!-- chop -->
<g id="node196" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-2522.56" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-2518.86" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge329" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4979.12,-2522.56C5068.31,-2522.56 5324.07,-2522.56 5458.54,-2522.56"/>
<polygon fill="black" stroke="black" points="5458.8,-2526.06 5468.8,-2522.56 5458.8,-2519.06 5458.8,-2526.06"/>
</g>
<!-- clean_data -->
<g id="node197" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-4184.56" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-4180.86" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge330" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5604.34,-4184.56C5748,-4184.56 6118.23,-4184.56 6301.1,-4184.56"/>
<polygon fill="black" stroke="black" points="6301.26,-4188.06 6311.26,-4184.56 6301.26,-4181.06 6301.26,-4188.06"/>
</g>
<!-- debug_dump -->
<g id="node198" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-4804.56" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-4800.86" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge331" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5614.87,-4804.56C5731.73,-4804.56 5973.26,-4804.56 6158.98,-4804.56"/>
<polygon fill="black" stroke="black" points="6159.17,-4808.06 6169.17,-4804.56 6159.17,-4801.06 6159.17,-4808.06"/>
</g>
<!-- embed -->
<g id="node199" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-2836.56" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-2832.86" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge332" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5587.03,-2836.56C5717.48,-2836.56 6121.5,-2836.56 6309.03,-2836.56"/>
<polygon fill="black" stroke="black" points="6309.16,-2840.06 6319.16,-2836.56 6309.16,-2833.06 6309.16,-2840.06"/>
</g>
<!-- moderation -->
<g id="node200" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6407.5" cy="-1526.56" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6407.5" y="-1522.86" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge333" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6471.33,-1526.56C6615.86,-1526.56 6978.9,-1526.56 7231.78,-1526.56"/>
<polygon fill="black" stroke="black" points="7231.85,-1530.06 7241.85,-1526.56 7231.85,-1523.06 7231.85,-1530.06"/>
</g>
<!-- pending_caption -->
<g id="node201" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-1309.56" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-1305.86" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge334" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5631.6,-1309.56C5754.6,-1309.56 5985.37,-1309.56 6163.21,-1309.56"/>
<polygon fill="black" stroke="black" points="6163.24,-1313.06 6173.24,-1309.56 6163.24,-1306.06 6163.24,-1313.06"/>
</g>
<!-- pending_chop -->
<g id="node202" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6407.5" cy="-1125.56" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6407.5" y="-1121.86" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge335" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6481.61,-1128.31C6652.43,-1134.75 7081.54,-1150.91 7323.71,-1160.03"/>
<polygon fill="black" stroke="black" points="7323.9,-1163.54 7334.02,-1160.42 7324.16,-1156.55 7323.9,-1163.54"/>
</g>
<!-- pending_embed -->
<g id="node203" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-1757.56" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-1753.86" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge336" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5628.45,-1757.56C5744.31,-1757.56 5960.07,-1757.56 6135.04,-1757.56"/>
<polygon fill="black" stroke="black" points="6135.18,-1761.06 6145.18,-1757.56 6135.18,-1754.06 6135.18,-1761.06"/>
</g>
<!-- price_train -->
<g id="node204" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-3017.56" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-3013.86" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge337" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5605.7,-3017.77C5745.45,-3018.26 6094.22,-3019.47 6282.05,-3020.13"/>
<polygon fill="black" stroke="black" points="6282.24,-3023.63 6292.25,-3020.16 6282.26,-3016.63 6282.24,-3023.63"/>
</g>
<!-- scan_ontology -->
<g id="node205" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-2265.56" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-2261.86" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge338" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M5022.68,-2265.56C5094.08,-2265.56 5205.26,-2265.56 5306.6,-2265.56"/>
<polygon fill="black" stroke="black" points="5306.69,-2269.06 5316.69,-2265.56 5306.69,-2262.06 5306.69,-2269.06"/>
</g>
<!-- similar -->
<g id="node206" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-3256.56" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-3252.86" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge339" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5587.61,-3256.56C5714.9,-3256.56 6098.73,-3256.56 6292.28,-3256.56"/>
<polygon fill="black" stroke="black" points="6292.49,-3260.06 6302.49,-3256.56 6292.49,-3253.06 6292.49,-3260.06"/>
</g>
<!-- telegram_bot -->
<g id="node207" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-5279.56" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4058" y="-5275.86" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge340" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4125.99,-5285.68C4261.89,-5298.1 4573.75,-5326.59 4771.18,-5344.63"/>
<polygon fill="black" stroke="black" points="4771.1,-5348.14 4781.38,-5345.56 4771.74,-5341.17 4771.1,-5348.14"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge341" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4121.24,-5288.35C4246.51,-5302.11 4528.79,-5312.53 4666,-5152.56 4714.83,-5095.64 4677.17,-4549.33 4702,-4478.56 4747.91,-4347.7 4860.88,-4222.83 4915.27,-4167.87"/>
<polygon fill="black" stroke="black" points="4917.95,-4170.13 4922.54,-4160.58 4913,-4165.18 4917.95,-4170.13"/>
</g>
<!-- tg_client -->
<g id="node208" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-3830.56" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-3826.86" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge342" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-3830.56C232.34,-3830.56 292.58,-3830.56 356.22,-3830.56"/>
<polygon fill="black" stroke="black" points="356.46,-3834.06 366.46,-3830.56 356.46,-3827.06 356.46,-3834.06"/>
</g>
</g>
</svg>
