<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10683pt" height="5916pt"
 viewBox="0.00 0.00 10683.00 5916.12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5912.12)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5912.12 10679,-5912.12 10679,4 -4,4"/>
<!-- config_utils.load_config -->
<g id="node1" class="node">
<title>config_utils.load_config</title>
<g id="a_node1"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10624,-1206.5 10191,-1206.5 10191,-1159.5 10624,-1159.5 10624,-1206.5"/>
<text text-anchor="middle" x="10407.5" y="-1174.5" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- chop.has_misc_deal -->
<g id="node2" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node2"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="7699,-3770 7471,-3770 7471,-3734 7699,-3734 7699,-3770"/>
<text text-anchor="middle" x="7585" y="-3746.7" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node3" class="node">
<title>chop.process_message</title>
<g id="a_node3"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6982,-3835 5980,-3835 5980,-3733 6982,-3733 6982,-3835"/>
<text text-anchor="middle" x="6481" y="-3762.68" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge1" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6982.22,-3769.47C7159.42,-3764.33 7343.7,-3758.98 7460.88,-3755.58"/>
<polygon fill="black" stroke="black" points="7461.06,-3759.07 7470.96,-3755.28 7460.86,-3752.07 7461.06,-3759.07"/>
</g>
<!-- embed.embed_file -->
<g id="node4" class="node">
<title>embed.embed_file</title>
<g id="a_node4"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7790,-796.5 7380,-796.5 7380,-741.5 7790,-741.5 7790,-796.5"/>
<text text-anchor="middle" x="7585" y="-758.45" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge2" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6561.88,-3732.89C6684.01,-3649.46 6912.56,-3471.13 7004,-3252 7030.17,-3189.29 6993.25,-855.31 7040,-806 7084.59,-758.97 7237.13,-751.66 7369.37,-755.04"/>
<polygon fill="black" stroke="black" points="7369.57,-758.55 7379.66,-755.33 7369.76,-751.55 7369.57,-758.55"/>
</g>
<!-- caption_io.has_caption -->
<g id="node5" class="node">
<title>caption_io.has_caption</title>
<g id="a_node5"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8705.5,-4975 8550.5,-4975 8550.5,-4939 8705.5,-4939 8705.5,-4975"/>
<text text-anchor="middle" x="8628" y="-4953.76" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge3" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6946.48,-3835.05C6967.7,-3848.92 6987.13,-3865.42 7004,-3885 7064.63,-3955.34 6974.22,-4654.46 7040,-4720 7125.86,-4805.55 8031.13,-4692.9 8130,-4763 8165.48,-4788.16 8132.93,-4825.75 8166,-4854 8271.35,-4943.99 8438.43,-4960.06 8539.88,-4960.59"/>
<polygon fill="black" stroke="black" points="8540.09,-4964.09 8550.09,-4960.59 8540.09,-4957.09 8540.09,-4964.09"/>
</g>
<!-- caption_io.read_caption -->
<g id="node6" class="node">
<title>caption_io.read_caption</title>
<g id="a_node6"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8793.5,-3572.5 8462.5,-3572.5 8462.5,-3535.5 8793.5,-3535.5 8793.5,-3572.5"/>
<text text-anchor="middle" x="8628" y="-3547.56" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge4" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6982.18,-3797.84C7450.86,-3808.46 8086.02,-3815.78 8130,-3779 8198.27,-3721.9 8099.4,-3641.05 8166,-3582 8207.68,-3545.05 8339.89,-3539.96 8452.1,-3543.03"/>
<polygon fill="black" stroke="black" points="8452.11,-3546.53 8462.21,-3543.33 8452.31,-3539.53 8452.11,-3546.53"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node7" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node7"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8777.5,-2787 8478.5,-2787 8478.5,-2751 8777.5,-2751 8777.5,-2787"/>
<text text-anchor="middle" x="8628" y="-2764.21" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge5" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6559.36,-3732.9C6679.13,-3648.85 6905.86,-3468.92 7004,-3252 7048.73,-3153.13 6960.49,-2838.85 7040,-2765 7251.67,-2568.4 8181.45,-2696.57 8510.83,-2749.36"/>
<polygon fill="black" stroke="black" points="8510.44,-2752.85 8520.87,-2750.98 8511.55,-2745.94 8510.44,-2752.85"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node8" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node8"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="8746,-3627 8510,-3627 8510,-3591 8746,-3591 8746,-3627"/>
<text text-anchor="middle" x="8628" y="-3604.96" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge6" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6982.37,-3810.32C7001.83,-3810.96 7021.09,-3811.53 7040,-3812 7161.07,-3815.04 8035.95,-3888.31 8130,-3812 8190.31,-3763.06 8107.42,-3692 8166,-3641 8214.14,-3599.09 8380.52,-3596.92 8499.57,-3601.27"/>
<polygon fill="black" stroke="black" points="8499.73,-3604.78 8509.86,-3601.67 8500,-3597.79 8499.73,-3604.78"/>
</g>
<!-- post_io.read_post -->
<g id="node9" class="node">
<title>post_io.read_post</title>
<g id="a_node9"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8907,-2930 8349,-2930 8349,-2854 8907,-2854 8907,-2930"/>
<text text-anchor="middle" x="8628" y="-2876.83" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge7" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6709.88,-3732.97C6810.67,-3711.66 6930.86,-3687.97 7040,-3671 7280.77,-3633.56 7961.99,-3728.47 8130,-3552 8222.56,-3454.78 8074.13,-3046.88 8166,-2949 8210.88,-2901.18 8273.77,-2877.99 8338.7,-2868.61"/>
<polygon fill="black" stroke="black" points="8339.26,-2872.06 8348.71,-2867.27 8338.34,-2865.12 8339.26,-2872.06"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node10" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node10"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="9717,-3917 9513,-3917 9513,-3881 9717,-3881 9717,-3917"/>
<text text-anchor="middle" x="9615" y="-3893.12" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge8" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6923.73,-3835.02C6963.01,-3838.49 7002.2,-3841.57 7040,-3844 7991.82,-3905.23 9145.27,-3902.6 9502.9,-3900.03"/>
<polygon fill="black" stroke="black" points="9503.02,-3903.52 9512.99,-3899.95 9502.96,-3896.52 9503.02,-3903.52"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node11" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node11"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8717.5,-4845 8538.5,-4845 8538.5,-4809 8717.5,-4809 8717.5,-4845"/>
<text text-anchor="middle" x="8628" y="-4822.96" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge9" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6947.03,-3835.01C6968.07,-3848.9 6987.31,-3865.42 7004,-3885 7085.76,-3980.95 6949.46,-4931.29 7040,-5019 7083.49,-5061.13 8079.79,-5052.85 8130,-5019 8165.38,-4995.15 8133.45,-4957.59 8166,-4930 8267.71,-4843.79 8426.17,-4825.54 8528.28,-4823.7"/>
<polygon fill="black" stroke="black" points="8528.33,-4827.2 8538.29,-4823.57 8528.24,-4820.2 8528.33,-4827.2"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node12" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node12"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8795,-2315 8461,-2315 8461,-2279 8795,-2279 8795,-2315"/>
<text text-anchor="middle" x="8628" y="-2292.22" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge10" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6575.33,-3732.75C6683.45,-3676.38 6868.72,-3588.89 7040,-3552 7099.23,-3539.24 8087.08,-3561.76 8130,-3519 8213.71,-3435.58 8095.78,-2551.05 8166,-2456 8231.72,-2367.03 8350.43,-2327.46 8450.93,-2310.04"/>
<polygon fill="black" stroke="black" points="8451.62,-2313.47 8460.9,-2308.37 8450.46,-2306.57 8451.62,-2313.47"/>
</g>
<!-- notes_utils.write_json -->
<g id="node14" class="node">
<title>notes_utils.write_json</title>
<g id="a_node14"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9709,-608 9521,-608 9521,-572 9709,-572 9709,-608"/>
<text text-anchor="middle" x="9615" y="-585.96" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge12" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7790.22,-751.77C7901.29,-742.84 8041.12,-732.3 8166,-725 8576.31,-701.01 8682.45,-740.23 9090,-687 9106.25,-684.88 9109.93,-682.25 9126,-679 9258.41,-652.22 9411.78,-624.85 9510.7,-607.66"/>
<polygon fill="black" stroke="black" points="9511.44,-611.08 9520.7,-605.92 9510.25,-604.18 9511.44,-611.08"/>
</g>
<!-- lot_io.read_lots -->
<g id="node15" class="node">
<title>lot_io.read_lots</title>
<g id="a_node15"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8734,-1813 8522,-1813 8522,-1777 8734,-1777 8734,-1813"/>
<text text-anchor="middle" x="8628" y="-1788.84" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge13" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7790.22,-755.78C7924.42,-752.01 8083.5,-758.55 8130,-806 8188.71,-865.9 8120.49,-1489.55 8166,-1560 8246.67,-1684.89 8415.72,-1746.52 8525.15,-1774.48"/>
<polygon fill="black" stroke="black" points="8524.34,-1777.89 8534.89,-1776.92 8526.04,-1771.1 8524.34,-1777.89"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node16" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node16"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8720.5,-980 8535.5,-980 8535.5,-944 8720.5,-944 8720.5,-980"/>
<text text-anchor="middle" x="8628" y="-957.22" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge14" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7790.34,-759.1C7922.42,-757.1 8078.89,-764.39 8130,-806 8176.16,-843.58 8119.66,-897.64 8166,-935 8219.25,-977.94 8406.36,-975.63 8525.2,-969.32"/>
<polygon fill="black" stroke="black" points="8525.62,-972.8 8535.41,-968.75 8525.24,-965.81 8525.62,-972.8"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node27" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node27"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9711.5,-4614 9518.5,-4614 9518.5,-4578 9711.5,-4578 9711.5,-4614"/>
<text text-anchor="middle" x="9615" y="-4592.76" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge24" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8705.6,-4945.62C8798.36,-4930.54 8958.51,-4900.32 9090,-4854 9279.63,-4787.2 9489.85,-4669.11 9575.01,-4619.25"/>
<polygon fill="black" stroke="black" points="9576.97,-4622.16 9583.82,-4614.08 9573.42,-4616.12 9576.97,-4622.16"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node28" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node28"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9708.5,-4131 9521.5,-4131 9521.5,-4095 9708.5,-4095 9708.5,-4131"/>
<text text-anchor="middle" x="9615" y="-4109.76" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge25" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8705.7,-4964.3C8809.33,-4969.5 8992.31,-4961.36 9090,-4854 9175.93,-4759.57 9067.9,-4682.69 9126,-4569 9233.22,-4359.2 9477.68,-4195.17 9573.96,-4136.42"/>
<polygon fill="black" stroke="black" points="9576.07,-4139.24 9582.81,-4131.07 9572.44,-4133.25 9576.07,-4139.24"/>
</g>
<!-- caption_io._get_langs -->
<g id="node26" class="node">
<title>caption_io._get_langs</title>
<g id="a_node26"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9724,-3572 9506,-3572 9506,-3536 9724,-3536 9724,-3572"/>
<text text-anchor="middle" x="9615" y="-3549.22" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge26" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8793.59,-3554C8992.04,-3554 9320.68,-3554 9495.72,-3554"/>
<polygon fill="black" stroke="black" points="9495.74,-3557.5 9505.74,-3554 9495.74,-3550.5 9495.74,-3557.5"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge27" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8793.62,-3541.97C8908.84,-3537.5 9049.17,-3541.33 9090,-3582 9134.01,-3625.85 9099.43,-4083.84 9126,-4140 9226.61,-4352.69 9474.32,-4514.7 9572.73,-4572.75"/>
<polygon fill="black" stroke="black" points="9571.1,-4575.85 9581.5,-4577.88 9574.64,-4569.81 9571.1,-4575.85"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge28" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8793.77,-3542.11C8908.86,-3537.74 9048.95,-3541.62 9090,-3582 9164.04,-3654.84 9054.62,-3972.55 9126,-4048 9224.22,-4151.81 9402.31,-4147.74 9514.04,-4132.43"/>
<polygon fill="black" stroke="black" points="9514.57,-4135.89 9523.97,-4131.02 9513.58,-4128.96 9514.57,-4135.89"/>
</g>
<!-- notes_utils.read_md -->
<g id="node29" class="node">
<title>notes_utils.read_md</title>
<g id="a_node29"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9685,-3062 9545,-3062 9545,-3026 9685,-3026 9685,-3062"/>
<text text-anchor="middle" x="9615" y="-3040.76" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge29" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8737.53,-3572.51C8843.17,-3583.71 9000.47,-3581.1 9090,-3488 9143.89,-3431.96 9073.59,-3197.42 9126,-3140 9229.72,-3026.36 9425.48,-3024.41 9534.9,-3033.72"/>
<polygon fill="black" stroke="black" points="9534.61,-3037.21 9544.89,-3034.62 9535.24,-3030.24 9534.61,-3037.21"/>
</g>
<!-- notes_utils.load_json -->
<g id="node30" class="node">
<title>notes_utils.load_json</title>
<g id="a_node30"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9739,-3497 9491,-3497 9491,-3461 9739,-3461 9739,-3497"/>
<text text-anchor="middle" x="9615" y="-3473.3" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge30" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8793.58,-3542.56C8881.55,-3536.36 8991.69,-3528.46 9090,-3521 9223.01,-3510.91 9374.95,-3498.65 9480.84,-3489.99"/>
<polygon fill="black" stroke="black" points="9481.26,-3493.47 9490.94,-3489.16 9480.69,-3486.49 9481.26,-3493.47"/>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge254" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8907.25,-2923.84C8967.6,-2931.46 9031,-2940.01 9090,-2949 9248.33,-2973.12 9432.32,-3008.1 9534.75,-3028.19"/>
<polygon fill="black" stroke="black" points="9534.22,-3031.66 9544.7,-3030.15 9535.57,-3024.79 9534.22,-3031.66"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node99" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node99"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9784,-2924.5 9446,-2924.5 9446,-2887.5 9784,-2887.5 9784,-2924.5"/>
<text text-anchor="middle" x="9615" y="-2899.56" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge255" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8907.31,-2895.96C9076.93,-2898.37 9288.64,-2901.38 9435.9,-2903.47"/>
<polygon fill="black" stroke="black" points="9435.9,-2906.97 9445.95,-2903.61 9436,-2899.97 9435.9,-2906.97"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node177" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node177"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9910,-2112.5 9320,-2112.5 9320,-2067.5 9910,-2067.5 9910,-2112.5"/>
<text text-anchor="middle" x="9615" y="-2081.62" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge312" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8714.69,-2278.99C8891.32,-2241.87 9296.14,-2156.8 9496.81,-2114.63"/>
<polygon fill="black" stroke="black" points="9497.73,-2118.01 9506.8,-2112.53 9496.29,-2111.16 9497.73,-2118.01"/>
</g>
<!-- chop.main -->
<g id="node13" class="node">
<title>chop.main</title>
<g id="a_node13"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5626,-3802 5475,-3802 5475,-3766 5626,-3766 5626,-3802"/>
<text text-anchor="middle" x="5550.5" y="-3777.84" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge11" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5626.3,-3784C5704.52,-3784 5834.52,-3784 5969.78,-3784"/>
<polygon fill="black" stroke="black" points="5969.95,-3787.5 5979.95,-3784 5969.95,-3780.5 5969.95,-3787.5"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge268" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8734.44,-1798.4C8843.18,-1808.16 9008.09,-1841.79 9090,-1953 9171.81,-2064.07 9055.6,-3075.37 9126,-3194 9215.52,-3344.85 9418.03,-3424 9532.03,-3458.03"/>
<polygon fill="black" stroke="black" points="9531.19,-3461.43 9541.77,-3460.89 9533.16,-3454.71 9531.19,-3461.43"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node158" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node158"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9672.5,-1030 9557.5,-1030 9557.5,-994 9672.5,-994 9672.5,-1030"/>
<text text-anchor="middle" x="9615" y="-1008.76" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge269" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8719.17,-1776.95C8827.43,-1750.06 9005,-1688.22 9090,-1560 9151.92,-1466.6 9047.58,-1137.05 9126,-1057 9236.03,-944.69 9441.48,-971.07 9547.27,-994.44"/>
<polygon fill="black" stroke="black" points="9546.66,-997.89 9557.19,-996.69 9548.21,-991.06 9546.66,-997.89"/>
</g>
<!-- embed.main -->
<g id="node17" class="node">
<title>embed.main</title>
<g id="a_node17"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6569,-767 6393,-767 6393,-731 6569,-731 6569,-767"/>
<text text-anchor="middle" x="6481" y="-742.84" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge15" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6569.39,-750.59C6740.99,-753.7 7126.41,-760.7 7369.73,-765.11"/>
<polygon fill="black" stroke="black" points="7369.7,-768.61 7379.76,-765.29 7369.83,-761.61 7369.7,-768.61"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node18" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node18"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7791,-5180 7379,-5180 7379,-5142 7791,-5142 7791,-5180"/>
<text text-anchor="middle" x="7585" y="-5154.27" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- price_train._iter_lots -->
<g id="node19" class="node">
<title>price_train._iter_lots</title>
<g id="a_node19"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7740.5,-1360.5 7429.5,-1360.5 7429.5,-1321.5 7740.5,-1321.5 7740.5,-1360.5"/>
<text text-anchor="middle" x="7585" y="-1334.1" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge16" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7630.73,-1360.51C7799.62,-1434.17 8397.99,-1695.12 8576.42,-1772.94"/>
<polygon fill="black" stroke="black" points="8575.02,-1776.15 8585.59,-1776.94 8577.82,-1769.73 8575.02,-1776.15"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node20" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node20"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8756.5,-1407.5 8499.5,-1407.5 8499.5,-1370.5 8756.5,-1370.5 8756.5,-1407.5"/>
<text text-anchor="middle" x="8628" y="-1382.56" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge17" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7740.72,-1348.13C7943.27,-1357.47 8295.22,-1373.7 8489.08,-1382.64"/>
<polygon fill="black" stroke="black" points="8489.18,-1386.15 8499.33,-1383.11 8489.5,-1379.16 8489.18,-1386.15"/>
</g>
<!-- price_train.main -->
<g id="node21" class="node">
<title>price_train.main</title>
<g id="a_node21"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6596,-1092 6366,-1092 6366,-1056 6596,-1056 6596,-1092"/>
<text text-anchor="middle" x="6481" y="-1067.84" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge18" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6556.45,-1092.04C6752.18,-1139.46 7280.78,-1267.53 7493.5,-1319.07"/>
<polygon fill="black" stroke="black" points="7492.85,-1322.52 7503.39,-1321.47 7494.5,-1315.71 7492.85,-1322.52"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node22" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node22"><a xlink:title="Return mapping of lot id to embedding vector.&#10;&#10;Vectors are stored as ``numpy.float16`` arrays which halves the&#10;memory footprint compared to ``float32`` and drastically reduces&#10;memory usage compared to plain Python lists.">
<polygon fill="none" stroke="black" points="8931,-3244.5 8325,-3244.5 8325,-3195.5 8931,-3195.5 8931,-3244.5"/>
<text text-anchor="middle" x="8628" y="-3210.82" font-family="Times,serif" font-size="37.10">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge19" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6589.52,-1092.03C6713.51,-1119.15 6912.04,-1183.49 7004,-1327 7057.36,-1410.28 6971.86,-3035.3 7040,-3107 7083.23,-3152.48 7864.9,-3190.34 8314.76,-3208.47"/>
<polygon fill="black" stroke="black" points="8314.86,-3211.98 8325,-3208.88 8315.15,-3204.99 8314.86,-3211.98"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node23" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node23"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7823.5,-1017 7346.5,-1017 7346.5,-977 7823.5,-977 7823.5,-1017"/>
<text text-anchor="middle" x="7585" y="-989.93" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge20" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6596.26,-1063.08C6708.99,-1052.56 6886.26,-1036.71 7040,-1026 7136.72,-1019.26 7243.22,-1013.27 7336.14,-1008.51"/>
<polygon fill="black" stroke="black" points="7336.44,-1012 7346.25,-1007.99 7336.08,-1005.01 7336.44,-1012"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node24" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node24"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="8130,-1112.5 7040,-1112.5 7040,-1035.5 8130,-1035.5 8130,-1112.5"/>
<text text-anchor="middle" x="7585" y="-1058.1" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge21" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6596.04,-1074C6701.07,-1074 6865.1,-1074 7029.55,-1074"/>
<polygon fill="black" stroke="black" points="7029.88,-1077.5 7039.88,-1074 7029.88,-1070.5 7029.88,-1077.5"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node25" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node25"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="8840.5,-585.5 8415.5,-585.5 8415.5,-546.5 8840.5,-546.5 8840.5,-585.5"/>
<text text-anchor="middle" x="8628" y="-559.1" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge22" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6596.03,-1077.38C6717.15,-1074.21 6904.56,-1048.59 7004,-930 7058.79,-864.66 6976.94,-605.39 7040,-548 7089.55,-502.9 7980.3,-536.74 8405.11,-555.59"/>
<polygon fill="black" stroke="black" points="8405.22,-559.1 8415.37,-556.04 8405.53,-552.1 8405.22,-559.1"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge277" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8931,-3227.83C8984.46,-3233.3 9039.23,-3241.6 9090,-3254 9279.3,-3300.25 9487.27,-3408.39 9573.3,-3455.91"/>
<polygon fill="black" stroke="black" points="9571.77,-3459.06 9582.21,-3460.85 9575.16,-3452.94 9571.77,-3459.06"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node67" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node67"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="9794.5,-1102 9435.5,-1102 9435.5,-1066 9794.5,-1066 9794.5,-1102"/>
<text text-anchor="middle" x="9615" y="-1078.3" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge301" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8130.13,-1076.68C8559.29,-1078.8 9132.62,-1081.63 9425.08,-1083.07"/>
<polygon fill="black" stroke="black" points="9425.34,-1086.57 9435.36,-1083.12 9425.38,-1079.57 9425.34,-1086.57"/>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge302" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8840.61,-571.16C9047.09,-576.19 9352.53,-583.63 9510.68,-587.48"/>
<polygon fill="black" stroke="black" points="9510.8,-590.99 9520.88,-587.73 9510.97,-583.99 9510.8,-590.99"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge23" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9684.91,-3572.09C9792.21,-3595.61 9997.88,-3621.22 10104,-3506 10189.63,-3413.02 10058.16,-1327.34 10140,-1231 10151.7,-1217.22 10165.9,-1206.5 10181.59,-1198.23"/>
<polygon fill="black" stroke="black" points="10183.54,-1201.17 10190.99,-1193.64 10180.46,-1194.88 10183.54,-1201.17"/>
</g>
<!-- notes_utils.read_text -->
<g id="node64" class="node">
<title>notes_utils.read_text</title>
<g id="a_node64"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="10514.5,-4262 10300.5,-4262 10300.5,-4226 10514.5,-4226 10514.5,-4262"/>
<text text-anchor="middle" x="10407.5" y="-4239.22" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge140" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9685.04,-3036.67C9789.71,-3029.61 9988.57,-3032.72 10104,-3140 10270.86,-3295.07 10381.45,-4057.73 10402.75,-4215.43"/>
<polygon fill="black" stroke="black" points="10399.33,-4216.28 10404.13,-4225.72 10406.27,-4215.35 10399.33,-4216.28"/>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge143" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9717.2,-3460.94C9823.95,-3447.77 9991.93,-3444.46 10104,-3527 10343.25,-3703.2 10394.68,-4105.83 10404.42,-4215.8"/>
<polygon fill="black" stroke="black" points="10400.94,-4216.12 10405.27,-4225.79 10407.91,-4215.53 10400.94,-4216.12"/>
</g>
<!-- caption_io.write_caption -->
<g id="node31" class="node">
<title>caption_io.write_caption</title>
<g id="a_node31"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8794.5,-3833 8461.5,-3833 8461.5,-3797 8794.5,-3797 8794.5,-3833"/>
<text text-anchor="middle" x="8628" y="-3808.84" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge34" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8794.63,-3797.02C8897.98,-3776.31 9023.59,-3731.78 9090,-3636 9136.81,-3568.5 9073,-741.76 9126,-679 9218.5,-569.46 9397.06,-564.75 9510.64,-574.85"/>
<polygon fill="black" stroke="black" points="9510.46,-578.35 9520.74,-575.81 9511.11,-571.38 9510.46,-578.35"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge31" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8794.59,-3817.13C8883.33,-3814.88 8993.87,-3806.59 9090,-3783 9280.48,-3736.25 9489.02,-3625.29 9574.32,-3577.05"/>
<polygon fill="black" stroke="black" points="9576.18,-3580.02 9583.14,-3572.03 9572.72,-3573.93 9576.18,-3580.02"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge32" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8657.02,-3833.11C8730.09,-3880.67 8931.74,-4013.97 9090,-4138 9288.19,-4293.32 9510.97,-4499.29 9586.95,-4570.5"/>
<polygon fill="black" stroke="black" points="9584.98,-4573.45 9594.66,-4577.74 9589.77,-4568.34 9584.98,-4573.45"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge33" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8794.64,-3824.66C8909.11,-3827.51 9048.04,-3822.11 9090,-3783 9174.05,-3704.67 9043.08,-3606.53 9126,-3527 9232.94,-3424.42 9420.07,-3439.15 9528.9,-3459.08"/>
<polygon fill="black" stroke="black" points="9528.38,-3462.55 9538.86,-3460.96 9529.68,-3455.67 9528.38,-3462.55"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node32" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node32"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6939,-2377.5 6023,-2377.5 6023,-2306.5 6939,-2306.5 6939,-2377.5"/>
<text text-anchor="middle" x="6481" y="-2327.36" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge36" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6674.61,-2306.48C6785.39,-2297.81 6919.02,-2309.3 7004,-2392 7097.71,-2483.2 6945.32,-2593.81 7040,-2684 7215.86,-2851.53 7905.58,-2672.09 8130,-2765 8149.51,-2773.08 8147.06,-2786.66 8166,-2796 8219.48,-2822.37 8279.91,-2841.51 8338.99,-2855.39"/>
<polygon fill="black" stroke="black" points="8338.31,-2858.83 8348.84,-2857.66 8339.88,-2852.01 8338.31,-2858.83"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge38" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6643.37,-2377.53C6760.02,-2392.87 6912.57,-2389.84 7004,-2297 7083.56,-2216.2 6957.04,-1865.3 7040,-1788 7146.82,-1688.47 8164.81,-1758.56 8511.8,-1785.62"/>
<polygon fill="black" stroke="black" points="8511.63,-1789.11 8521.87,-1786.41 8512.17,-1782.14 8511.63,-1789.11"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node33" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node33"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7797.5,-2810 7372.5,-2810 7372.5,-2774 7797.5,-2774 7797.5,-2810"/>
<text text-anchor="middle" x="7585" y="-2786.12" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge35" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6669.61,-2306.49C6781.58,-2296.87 6918.22,-2307.35 7004,-2392 7109.01,-2495.64 6936.69,-2616.67 7040,-2722 7084.76,-2767.63 7232.18,-2784.65 7362.28,-2790.52"/>
<polygon fill="black" stroke="black" points="7362.27,-2794.03 7372.41,-2790.96 7362.57,-2787.03 7362.27,-2794.03"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node34" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node34"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8704.5,-4261 8551.5,-4261 8551.5,-4225 8704.5,-4225 8704.5,-4261"/>
<text text-anchor="middle" x="8628" y="-4239.76" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge37" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6939.27,-2372.21C6963.26,-2386.29 6985.18,-2403.67 7004,-2425 7084.47,-2516.19 6958.66,-3428.58 7040,-3519 7367.12,-3882.65 7783.36,-3325.9 8130,-3671 8209.55,-3750.2 8107.13,-3825.42 8166,-3921 8263.09,-4078.63 8469.3,-4179.42 8569.69,-4221.08"/>
<polygon fill="black" stroke="black" points="8568.49,-4224.37 8579.07,-4224.93 8571.15,-4217.89 8568.49,-4224.37"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node35" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node35"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="9833,-463 9397,-463 9397,-419 9833,-419 9833,-463"/>
<text text-anchor="middle" x="9615" y="-432.68" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge39" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6939.1,-2329.48C6968.13,-2321.53 6990.95,-2310.95 7004,-2297 7073.89,-2222.3 6967.17,-527.84 7040,-456 7204.78,-293.46 8788.63,-384.18 9386.8,-424.69"/>
<polygon fill="black" stroke="black" points="9386.62,-428.19 9396.84,-425.37 9387.1,-421.2 9386.62,-428.19"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge59" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7797.8,-2774.53C7930.14,-2768.73 8083.89,-2773.08 8130,-2819 8182.75,-2871.53 8115.74,-3433.09 8166,-3488 8252.59,-3582.61 8408.88,-3585.31 8515.24,-3573.68"/>
<polygon fill="black" stroke="black" points="8515.84,-3577.13 8525.38,-3572.51 8515.04,-3570.18 8515.84,-3577.13"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge60" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7797.6,-2787.32C7996.24,-2782.94 8288.91,-2776.47 8468.24,-2772.51"/>
<polygon fill="black" stroke="black" points="8468.37,-2776.01 8478.29,-2772.29 8468.22,-2769.01 8468.37,-2776.01"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge61" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7797.54,-2797.77C7898.38,-2801.72 8020.6,-2808.28 8130,-2819 8215.07,-2827.34 8307.86,-2839.99 8389.98,-2852.44"/>
<polygon fill="black" stroke="black" points="8389.53,-2855.91 8399.94,-2853.95 8390.58,-2848.99 8389.53,-2855.91"/>
</g>
<!-- lot_io.get_seller -->
<g id="node61" class="node">
<title>lot_io.get_seller</title>
<g id="a_node61"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="10508,-786 10307,-786 10307,-750 10508,-750 10508,-786"/>
<text text-anchor="middle" x="10407.5" y="-762.41" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge314" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M9758.64,-463.02C9858.35,-481.65 9992.98,-513.38 10104,-563 10213.68,-612.02 10326.62,-700.69 10377.98,-743.53"/>
<polygon fill="black" stroke="black" points="10375.78,-746.25 10385.69,-750 10380.28,-740.89 10375.78,-746.25"/>
</g>
<!-- scan_ontology.main -->
<g id="node36" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5780,-306.5 5321,-306.5 5321,-249.5 5780,-249.5 5780,-306.5"/>
<text text-anchor="middle" x="5550.5" y="-266.66" font-family="Times,serif" font-size="44.80">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge43" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5780.07,-267.14C6543.51,-231.92 8964.45,-129.22 9090,-237 9170.17,-305.83 9054.54,-394.17 9126,-472 9223.47,-578.15 9398.6,-596.41 9510.41,-596.03"/>
<polygon fill="black" stroke="black" points="9510.72,-599.52 9520.69,-595.94 9510.66,-592.52 9510.72,-599.52"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge40" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5588.28,-306.66C5667.32,-370.83 5851.87,-535.19 5922,-722 5952.76,-803.94 5898.1,-2233.19 5958,-2297 6046.85,-2391.65 6198.87,-2394.75 6316.01,-2378.96"/>
<polygon fill="black" stroke="black" points="6316.74,-2382.39 6326.16,-2377.54 6315.77,-2375.46 6316.74,-2382.39"/>
</g>
<!-- oom_utils.prefer_oom_kill -->
<g id="node37" class="node">
<title>oom_utils.prefer_oom_kill</title>
<g id="a_node37"><a xlink:title="Make this process the first OOM victim.">
<polygon fill="none" stroke="black" points="8793,-1551 8463,-1551 8463,-1515 8793,-1515 8793,-1551"/>
<text text-anchor="middle" x="8628" y="-1527.12" font-family="Times,serif" font-size="24.22">oom_utils.prefer_oom_kill</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge41" class="edge">
<title>scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5586.7,-306.56C5663.43,-371.17 5845.01,-537.37 5922,-722 5954.56,-800.09 5900.86,-1038.61 5958,-1101 6277.29,-1449.62 6628.48,-1006.83 7004,-1294 7033.37,-1316.46 7009.83,-1347.62 7040,-1369 7238.83,-1509.89 7892.63,-1433.9 8130,-1489 8146.57,-1492.85 8149.35,-1498.51 8166,-1502 8259.45,-1521.61 8365.67,-1529.69 8452.58,-1532.71"/>
<polygon fill="black" stroke="black" points="8452.7,-1536.22 8462.81,-1533.05 8452.93,-1529.22 8452.7,-1536.22"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node38" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node38"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6667.5,-190 6294.5,-190 6294.5,-154 6667.5,-154 6667.5,-190"/>
<text text-anchor="middle" x="6481" y="-165.84" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge42" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5705.81,-249.47C5815.28,-229.3 5945.04,-205.57 5958,-204 6065.51,-190.97 6186.16,-183.13 6284.36,-178.48"/>
<polygon fill="black" stroke="black" points="6284.57,-181.97 6294.4,-178.01 6284.25,-174.98 6284.57,-181.97"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node95" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node95"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7700.5,-136 7469.5,-136 7469.5,-100 7700.5,-100 7700.5,-136"/>
<text text-anchor="middle" x="7585" y="-113.96" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge138" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6667.69,-162.9C6892.77,-151.87 7265.86,-133.59 7459.21,-124.11"/>
<polygon fill="black" stroke="black" points="7459.6,-127.6 7469.42,-123.61 7459.26,-120.61 7459.6,-127.6"/>
</g>
<!-- similar._iter_lots -->
<g id="node39" class="node">
<title>similar._iter_lots</title>
<g id="a_node39"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7739,-1844.5 7431,-1844.5 7431,-1797.5 7739,-1797.5 7739,-1844.5"/>
<text text-anchor="middle" x="7585" y="-1812.5" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge44" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7739.12,-1808.12C7880.88,-1799.94 8077.45,-1799.36 8130,-1853 8203.38,-1927.9 8098.31,-2715.93 8166,-2796 8209.55,-2847.51 8272.92,-2875.79 8338.81,-2890.47"/>
<polygon fill="black" stroke="black" points="8338.46,-2893.97 8348.97,-2892.62 8339.92,-2887.12 8338.46,-2893.97"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge48" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7739,-1809.22C7879.85,-1801.95 8075.01,-1802.13 8130,-1853 8216.28,-1932.82 8093.41,-2022.56 8166,-2115 8240.2,-2209.49 8370.59,-2255.05 8473.81,-2276.94"/>
<polygon fill="black" stroke="black" points="8473.21,-2280.39 8483.71,-2278.99 8474.62,-2273.54 8473.21,-2280.39"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge46" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7739.04,-1817.18C7949.37,-1811.92 8323.07,-1802.59 8511.52,-1797.88"/>
<polygon fill="black" stroke="black" points="8511.83,-1801.38 8521.74,-1797.63 8511.65,-1794.38 8511.83,-1801.38"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge47" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7610.21,-1797.45C7685.15,-1726.24 7922.95,-1512.83 8166,-1427 8270.11,-1390.23 8395.37,-1382 8489.02,-1382.25"/>
<polygon fill="black" stroke="black" points="8489.11,-1385.75 8499.13,-1382.31 8489.15,-1378.75 8489.11,-1385.75"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge45" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7739.02,-1807.91C7880.98,-1799.54 8077.95,-1798.79 8130,-1853 8206.54,-1932.72 8119.28,-3741.84 8166,-3842 8254.95,-4032.68 8482.81,-4168.61 8580.93,-4220.16"/>
<polygon fill="black" stroke="black" points="8579.52,-4223.38 8590.01,-4224.89 8582.75,-4217.17 8579.52,-4223.38"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node40" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node40"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8766,-1998 8490,-1998 8490,-1962 8766,-1962 8766,-1998"/>
<text text-anchor="middle" x="8628" y="-1975.22" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge49" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7739.25,-1822.2C7848.7,-1824.96 7999.13,-1832.62 8130,-1853 8287.23,-1877.48 8467.09,-1929.66 8561.4,-1958.94"/>
<polygon fill="black" stroke="black" points="8560.5,-1962.33 8571.08,-1961.96 8562.58,-1955.64 8560.5,-1962.33"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node178" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node178"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9791.5,-1444 9438.5,-1444 9438.5,-1408 9791.5,-1408 9791.5,-1444"/>
<text text-anchor="middle" x="9615" y="-1420.12" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge313" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8704.65,-1961.99C8798.53,-1937.88 8961.89,-1890.12 9090,-1822 9298.86,-1710.95 9513.3,-1519.85 9587.14,-1451.35"/>
<polygon fill="black" stroke="black" points="9589.71,-1453.74 9594.64,-1444.36 9584.94,-1448.62 9589.71,-1453.74"/>
</g>
<!-- similar.main -->
<g id="node41" class="node">
<title>similar.main</title>
<g id="a_node41"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6591.5,-921 6370.5,-921 6370.5,-877 6591.5,-877 6591.5,-921"/>
<text text-anchor="middle" x="6481" y="-890.68" font-family="Times,serif" font-size="32.90">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge51" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6591.67,-895.11C6714.04,-897.41 6907.49,-922.33 7004,-1047 7057.27,-1115.81 6982.12,-2548.01 7040,-2613 7365.32,-2978.27 7791.97,-2411.47 8130,-2765 8189.08,-2826.79 8107.43,-3085.73 8166,-3148 8205.55,-3190.04 8258.79,-3214.26 8315.04,-3227.32"/>
<polygon fill="black" stroke="black" points="8314.32,-3230.74 8324.84,-3229.47 8315.82,-3223.9 8314.32,-3230.74"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge57" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6591.69,-908.75C6767.26,-924.37 7115.34,-955.32 7348.96,-976.1"/>
<polygon fill="black" stroke="black" points="7348.69,-979.59 7358.96,-976.99 7349.31,-972.61 7348.69,-979.59"/>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge50" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6591.62,-896.74C6712.3,-900.73 6902.61,-927.34 7004,-1047 7097.09,-1156.87 6971.67,-1242.24 7040,-1369 7154.03,-1580.52 7411.63,-1732.79 7526.65,-1792.79"/>
<polygon fill="black" stroke="black" points="7525.19,-1795.97 7535.68,-1797.46 7528.4,-1789.75 7525.19,-1795.97"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node42" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node42"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7834,-3098 7336,-3098 7336,-3050 7834,-3050 7834,-3098"/>
<text text-anchor="middle" x="7585" y="-3064.88" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge52" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6591.77,-895.03C6714.24,-897.26 6907.78,-922.11 7004,-1047 7070.33,-1133.1 6967.54,-2921.99 7040,-3003 7141.7,-3116.7 7329.08,-3115.92 7455.12,-3099.41"/>
<polygon fill="black" stroke="black" points="7455.78,-3102.85 7465.22,-3098.03 7454.84,-3095.91 7455.78,-3102.85"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node43" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node43"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7733,-593 7437,-593 7437,-557 7733,-557 7733,-593"/>
<text text-anchor="middle" x="7585" y="-569.7" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge53" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6591.51,-918.89C6709.81,-933.52 6895.85,-935.46 7004,-830 7077.45,-758.38 6963.68,-670.56 7040,-602 7171.92,-483.49 7402.49,-524.12 7516.39,-554.33"/>
<polygon fill="black" stroke="black" points="7515.48,-557.71 7526.04,-556.94 7517.3,-550.95 7515.48,-557.71"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node44" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node44"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7752.5,-501 7417.5,-501 7417.5,-465 7752.5,-465 7752.5,-501"/>
<text text-anchor="middle" x="7585" y="-477.7" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge54" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6591.56,-919.65C6710.58,-935.13 6897.89,-938 7004,-830 7102.76,-729.49 6937.66,-611.86 7040,-515 7091.41,-466.35 7268.57,-463.64 7406.92,-469.78"/>
<polygon fill="black" stroke="black" points="7407.08,-473.29 7417.23,-470.26 7407.4,-466.3 7407.08,-473.29"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node45" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node45"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7724,-921 7446,-921 7446,-885 7724,-885 7724,-921"/>
<text text-anchor="middle" x="7585" y="-898.22" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge55" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6591.69,-899.4C6790.61,-900.12 7210.98,-901.65 7435.43,-902.46"/>
<polygon fill="black" stroke="black" points="7435.62,-905.96 7445.63,-902.5 7435.65,-898.96 7435.62,-905.96"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node46" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node46"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="9090,-321.5 8166,-321.5 8166,-246.5 9090,-246.5 9090,-321.5"/>
<text text-anchor="middle" x="8628" y="-268.67" font-family="Times,serif" font-size="61.04">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge56" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6591.59,-920.35C6711.31,-936.64 6899.89,-940.4 7004,-830 7079.51,-749.92 6960.63,-412.26 7040,-336 7080.18,-297.4 7702.63,-286.82 8155.83,-284.26"/>
<polygon fill="black" stroke="black" points="8155.86,-287.76 8165.84,-284.2 8155.82,-280.76 8155.86,-287.76"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node47" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node47"><a xlink:title="Return map of lot id to other lots from the same user.&#10;&#10;``get_seller`` unifies multiple contact fields so the best option is&#10;used consistently when grouping lots.">
<polygon fill="none" stroke="black" points="9940.5,-226.5 9289.5,-226.5 9289.5,-171.5 9940.5,-171.5 9940.5,-226.5"/>
<text text-anchor="middle" x="9615" y="-188.45" font-family="Times,serif" font-size="42.56">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge58" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6591.74,-920.49C6711.6,-936.9 6900.29,-940.78 7004,-830 7087.56,-740.74 6952.41,-366.3 7040,-281 7196.74,-128.35 8618.64,-161.2 9279.34,-185.12"/>
<polygon fill="black" stroke="black" points="9279.38,-188.62 9289.5,-185.49 9279.63,-181.63 9279.38,-188.62"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge278" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7834.02,-3062.1C8234.91,-3045.1 8990.66,-3023.19 9090,-3094 9128.47,-3121.42 9095.79,-3157.69 9126,-3194 9242.06,-3333.52 9445.18,-3420.21 9548.96,-3457.58"/>
<polygon fill="black" stroke="black" points="9547.78,-3460.88 9558.38,-3460.93 9550.13,-3454.28 9547.78,-3460.88"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge280" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7733.17,-581.15C7850.39,-585.73 8018.68,-591.59 8166,-594 8576.61,-600.72 8679.34,-595.57 9090,-594 9236.08,-593.44 9405.06,-592.01 9510.74,-591.02"/>
<polygon fill="black" stroke="black" points="9510.8,-594.52 9520.77,-590.93 9510.73,-587.52 9510.8,-594.52"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node103" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node103"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8704.5,-4488 8551.5,-4488 8551.5,-4452 8704.5,-4452 8704.5,-4488"/>
<text text-anchor="middle" x="8628" y="-4466.3" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge281" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7733.02,-560.74C7875.38,-550.59 8077.21,-547.07 8130,-602 8200.6,-675.47 8109.68,-4185.09 8166,-4270 8249.94,-4396.55 8432.86,-4443.47 8541.35,-4460.54"/>
<polygon fill="black" stroke="black" points="8540.88,-4464.01 8551.29,-4462.06 8541.93,-4457.09 8540.88,-4464.01"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node162" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node162"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8730,-678 8526,-678 8526,-642 8730,-642 8730,-678"/>
<text text-anchor="middle" x="8628" y="-656.3" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge282" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7733.2,-560.1C7845.18,-553.99 8001.4,-556.87 8130,-602 8148.62,-608.54 8147.44,-621.28 8166,-628 8279.91,-669.24 8419.82,-672.97 8515.44,-669.08"/>
<polygon fill="black" stroke="black" points="8515.88,-672.57 8525.71,-668.63 8515.57,-665.57 8515.88,-672.57"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge283" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7752.63,-472.09C8030.64,-456.34 8606.31,-434.12 9090,-483 9251.37,-499.31 9436.5,-543.18 9537.82,-569.41"/>
<polygon fill="black" stroke="black" points="9537.1,-572.84 9547.66,-571.97 9538.87,-566.06 9537.1,-572.84"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge284" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7661.22,-464.99C7780.76,-441.37 8012.55,-416.97 8130,-548 8199.01,-624.99 8108.86,-4183.83 8166,-4270 8249.93,-4396.56 8432.86,-4443.48 8541.35,-4460.55"/>
<polygon fill="black" stroke="black" points="8540.88,-4464.01 8551.29,-4462.06 8541.93,-4457.09 8540.88,-4464.01"/>
</g>
<!-- similar_utils._more_user_path -->
<g id="node163" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node163"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8743,-528 8513,-528 8513,-492 8743,-492 8743,-528"/>
<text text-anchor="middle" x="8628" y="-506.3" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge285" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7752.68,-487.32C7961.78,-492.75 8315.56,-501.92 8502.56,-506.77"/>
<polygon fill="black" stroke="black" points="8502.62,-510.28 8512.71,-507.04 8502.8,-503.28 8502.62,-510.28"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node164" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node164"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9856,-304 9374,-304 9374,-264 9856,-264 9856,-304"/>
<text text-anchor="middle" x="9615" y="-276.93" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge286" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M9090.14,-284C9184.4,-284 9280.2,-284 9363.65,-284"/>
<polygon fill="black" stroke="black" points="9363.77,-287.5 9373.77,-284 9363.77,-280.5 9363.77,-287.5"/>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;lot_io.get_seller -->
<g id="edge287" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M9940.64,-194.19C9998.36,-204.72 10055.46,-223.47 10104,-255 10288.96,-375.16 10375.72,-651.29 10399.5,-740.01"/>
<polygon fill="black" stroke="black" points="10396.17,-741.09 10402.1,-749.87 10402.94,-739.31 10396.17,-741.09"/>
</g>
<!-- build_site._slug_component -->
<g id="node48" class="node">
<title>build_site._slug_component</title>
<g id="a_node48"><a xlink:title="Return ``text`` converted to an ASCII slug and truncated.">
<polygon fill="none" stroke="black" points="9761.5,-2049 9468.5,-2049 9468.5,-2013 9761.5,-2013 9761.5,-2049"/>
<text text-anchor="middle" x="9615" y="-2026.21" font-family="Times,serif" font-size="19.74">build_site._slug_component</text>
</a>
</g>
</g>
<!-- build_site._lot_page_path -->
<g id="node49" class="node">
<title>build_site._lot_page_path</title>
<g id="a_node49"><a xlink:title="Return HTML path for ``lot_id`` and ``lang``.">
<polygon fill="none" stroke="black" points="8734.5,-2052 8521.5,-2052 8521.5,-2016 8734.5,-2016 8734.5,-2052"/>
<text text-anchor="middle" x="8628" y="-2029.96" font-family="Times,serif" font-size="15.68">build_site._lot_page_path</text>
</a>
</g>
</g>
<!-- build_site._lot_page_path&#45;&gt;build_site._slug_component -->
<g id="edge62" class="edge">
<title>build_site._lot_page_path&#45;&gt;build_site._slug_component</title>
<path fill="none" stroke="black" d="M8734.88,-2033.68C8908.83,-2033.15 9255.92,-2032.09 9458.05,-2031.47"/>
<polygon fill="black" stroke="black" points="9458.17,-2034.97 9468.16,-2031.44 9458.15,-2027.97 9458.17,-2034.97"/>
</g>
<!-- build_site._cat_page_path -->
<g id="node50" class="node">
<title>build_site._cat_page_path</title>
<g id="a_node50"><a xlink:title="Return category HTML path.">
<polygon fill="none" stroke="black" points="8727.5,-2106 8528.5,-2106 8528.5,-2070 8727.5,-2070 8727.5,-2106"/>
<text text-anchor="middle" x="8628" y="-2084.3" font-family="Times,serif" font-size="14.00">build_site._cat_page_path</text>
</a>
</g>
</g>
<!-- build_site._cat_page_path&#45;&gt;build_site._slug_component -->
<g id="edge63" class="edge">
<title>build_site._cat_page_path&#45;&gt;build_site._slug_component</title>
<path fill="none" stroke="black" d="M8727.52,-2082.93C8820.89,-2077.97 8965.05,-2069.86 9090,-2061 9106.02,-2059.86 9109.98,-2059.11 9126,-2058 9237.09,-2050.3 9362.52,-2043.4 9458.4,-2038.5"/>
<polygon fill="black" stroke="black" points="9458.65,-2041.99 9468.46,-2037.99 9458.3,-2035 9458.65,-2041.99"/>
</g>
<!-- build_site._load_ontology -->
<g id="node51" class="node">
<title>build_site._load_ontology</title>
<g id="a_node51"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8784.5,-3299 8471.5,-3299 8471.5,-3263 8784.5,-3263 8784.5,-3299"/>
<text text-anchor="middle" x="8628" y="-3275.41" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge64" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8784.67,-3280.21C8874.59,-3282.21 8989.46,-3288.98 9090,-3308 9267.99,-3341.67 9469.27,-3419.05 9562.07,-3457.08"/>
<polygon fill="black" stroke="black" points="9560.93,-3460.4 9571.51,-3460.97 9563.6,-3453.92 9560.93,-3460.4"/>
</g>
<!-- build_site._load_clusters -->
<g id="node52" class="node">
<title>build_site._load_clusters</title>
<g id="a_node52"><a xlink:title="Return precomputed item clusters.">
<polygon fill="none" stroke="black" points="8805.5,-3419 8450.5,-3419 8450.5,-3381 8805.5,-3381 8805.5,-3419"/>
<text text-anchor="middle" x="8628" y="-3393.27" font-family="Times,serif" font-size="27.16">build_site._load_clusters</text>
</a>
</g>
</g>
<!-- build_site._load_clusters&#45;&gt;notes_utils.load_json -->
<g id="edge65" class="edge">
<title>build_site._load_clusters&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8805.6,-3409.22C8891.48,-3414.09 8996.18,-3420.59 9090,-3428 9223.07,-3438.51 9374.84,-3453.63 9480.67,-3464.67"/>
<polygon fill="black" stroke="black" points="9480.46,-3468.17 9490.77,-3465.73 9481.19,-3461.21 9480.46,-3468.17"/>
</g>
<!-- build_site._compile_locale -->
<g id="node53" class="node">
<title>build_site._compile_locale</title>
<g id="a_node53"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="7752,-2232 7418,-2232 7418,-2196 7752,-2196 7752,-2232"/>
<text text-anchor="middle" x="7585" y="-2208.12" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node54" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node54"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="6669.5,-2231.5 6292.5,-2231.5 6292.5,-2190.5 6669.5,-2190.5 6669.5,-2231.5"/>
<text text-anchor="middle" x="6481" y="-2203.76" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge66" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M6669.56,-2211.51C6876.05,-2212.07 7205.46,-2212.97 7407.45,-2213.52"/>
<polygon fill="black" stroke="black" points="7407.56,-2217.02 7417.57,-2213.55 7407.57,-2210.02 7407.56,-2217.02"/>
</g>
<!-- build_site._iter_lots -->
<g id="node55" class="node">
<title>build_site._iter_lots</title>
<g id="a_node55"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7811,-2407.5 7359,-2407.5 7359,-2350.5 7811,-2350.5 7811,-2407.5"/>
<text text-anchor="middle" x="7585" y="-2368.11" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge67" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7811.09,-2368.58C7922.71,-2376.08 8050.35,-2405.98 8130,-2493 8221.57,-2593.03 8074.37,-2696.02 8166,-2796 8210.92,-2845.01 8273.83,-2872.57 8338.75,-2887.37"/>
<polygon fill="black" stroke="black" points="8338.25,-2890.84 8348.77,-2889.54 8339.74,-2884 8338.25,-2890.84"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge71" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7811.24,-2361.26C8002.87,-2346.16 8274.27,-2324.78 8450.47,-2310.91"/>
<polygon fill="black" stroke="black" points="8450.93,-2314.38 8460.62,-2310.11 8450.38,-2307.4 8450.93,-2314.38"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge69" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7811.11,-2406.7C7922.21,-2407.2 8049.37,-2385.74 8130,-2302 8184.08,-2245.84 8117.48,-2014.03 8166,-1953 8248.88,-1848.75 8404.15,-1812.96 8511.44,-1800.87"/>
<polygon fill="black" stroke="black" points="8512.1,-1804.31 8521.67,-1799.77 8511.36,-1797.35 8512.1,-1804.31"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge70" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7775.15,-2407.5C7894.86,-2413.9 8042.95,-2398.18 8130,-2302 8195.3,-2229.86 8098.62,-1497.2 8166,-1427 8209.16,-1382.03 8369.47,-1377.62 8489,-1381.12"/>
<polygon fill="black" stroke="black" points="8489.23,-1384.63 8499.34,-1381.45 8489.45,-1377.64 8489.23,-1384.63"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge68" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7811.32,-2365.49C7924.61,-2371.82 8053.72,-2401.6 8130,-2493 8178.04,-2550.56 8134.01,-3774.19 8166,-3842 8255.77,-4032.29 8483.18,-4168.44 8581.05,-4220.1"/>
<polygon fill="black" stroke="black" points="8579.63,-4223.31 8590.11,-4224.84 8582.87,-4217.1 8579.63,-4223.31"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge72" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7811.15,-2406.08C7921.92,-2406.32 8048.76,-2384.82 8130,-2302 8222.5,-2207.71 8069.71,-2097.41 8166,-2007 8210.05,-1965.64 8362.05,-1963.63 8479.6,-1968.96"/>
<polygon fill="black" stroke="black" points="8479.63,-1972.47 8489.79,-1969.45 8479.97,-1965.47 8479.63,-1972.47"/>
</g>
<!-- build_site._copy_images -->
<g id="node56" class="node">
<title>build_site._copy_images</title>
<g id="a_node56"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="9778.5,-3185 9451.5,-3185 9451.5,-3149 9778.5,-3149 9778.5,-3185"/>
<text text-anchor="middle" x="9615" y="-3160.84" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node57" class="node">
<title>build_site._copy_static</title>
<g id="a_node57"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="7713,-2178 7457,-2178 7457,-2142 7713,-2142 7713,-2178"/>
<text text-anchor="middle" x="7585" y="-2154.7" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node58" class="node">
<title>build_site._load_state</title>
<g id="a_node58"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="6672,-3243.5 6290,-3243.5 6290,-3198.5 6672,-3198.5 6672,-3243.5"/>
<text text-anchor="middle" x="6481" y="-3212.62" font-family="Times,serif" font-size="33.60">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge77" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6672.35,-3220.91C7042.62,-3220.74 7862.95,-3220.36 8314.28,-3220.15"/>
<polygon fill="black" stroke="black" points="8314.54,-3223.65 8324.54,-3220.14 8314.54,-3216.65 8314.54,-3223.65"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge78" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6650.87,-3198.47C6851.15,-3171.76 7184.14,-3127.34 7393.46,-3099.42"/>
<polygon fill="black" stroke="black" points="7394.2,-3102.85 7403.65,-3098.06 7393.27,-3095.91 7394.2,-3102.85"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge73" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6672.35,-3226.32C7087.74,-3237.94 8069.6,-3265.41 8461.37,-3276.37"/>
<polygon fill="black" stroke="black" points="8461.28,-3279.87 8471.37,-3276.65 8461.47,-3272.87 8461.28,-3279.87"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_clusters -->
<g id="edge74" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_clusters</title>
<path fill="none" stroke="black" d="M6605.95,-3243.54C6718.73,-3263.23 6890.02,-3291.08 7040,-3307 7306.32,-3335.26 8080.91,-3374.12 8440.08,-3391.27"/>
<polygon fill="black" stroke="black" points="8440.16,-3394.78 8450.32,-3391.76 8440.5,-3387.78 8440.16,-3394.78"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge75" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6658.76,-3198.44C6776.57,-3173.47 6923.99,-3121 7004,-3011 7071.87,-2917.68 6964.19,-2579.99 7040,-2493 7115.54,-2406.32 7238.61,-2375.63 7348.61,-2367.59"/>
<polygon fill="black" stroke="black" points="7349.12,-2371.06 7358.87,-2366.9 7348.66,-2364.08 7349.12,-2371.06"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge76" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6672.03,-3216.58C6983.94,-3209.42 7624,-3195.19 8166,-3186 8626.53,-3178.19 9169.51,-3171.83 9441.06,-3168.84"/>
<polygon fill="black" stroke="black" points="9441.44,-3172.34 9451.4,-3168.73 9441.36,-3165.34 9441.44,-3172.34"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node59" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node59"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8887,-3362.5 8369,-3362.5 8369,-3317.5 8887,-3317.5 8887,-3362.5"/>
<text text-anchor="middle" x="8628" y="-3331.62" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge79" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M6672.03,-3237.93C6779.89,-3247.14 6917.42,-3258.2 7040,-3266 7503.09,-3295.46 8042.91,-3318.16 8358.61,-3330.26"/>
<polygon fill="black" stroke="black" points="8358.68,-3333.76 8368.81,-3330.65 8358.95,-3326.77 8358.68,-3333.76"/>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge279" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8887.16,-3351.88C8953.44,-3356.59 9024.52,-3363.08 9090,-3372 9247.37,-3393.43 9428.38,-3434 9531.19,-3458.55"/>
<polygon fill="black" stroke="black" points="9530.65,-3462.03 9541.19,-3460.95 9532.28,-3455.22 9530.65,-3462.03"/>
</g>
<!-- build_site._categorise -->
<g id="node60" class="node">
<title>build_site._categorise</title>
<g id="a_node60"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal``. ``sell_item`` lots are further&#10;grouped by ``clusters`` when available and fall back to ``item:type``.&#10;``clusters`` maps ``item:type`` values to cluster names. Stats include price&#10;range, last timestamp and embedding centroid so the sorting logic used on&#10;item pages also works for categories.">
<polygon fill="none" stroke="black" points="10104,-958 9126,-958 9126,-854 10104,-854 10104,-958"/>
<text text-anchor="middle" x="9615" y="-884.11" font-family="Times,serif" font-size="87.36">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge80" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M10053.73,-853.98C10070.73,-851.11 10087.54,-848.11 10104,-845 10183.95,-829.89 10274.17,-806.02 10335.12,-788.86"/>
<polygon fill="black" stroke="black" points="10336.35,-792.15 10345.01,-786.06 10334.44,-785.41 10336.35,-792.15"/>
</g>
<!-- build_site._render_site -->
<g id="node62" class="node">
<title>build_site._render_site</title>
<g id="a_node62"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="7004,-2044.5 5958,-2044.5 5958,-1937.5 7004,-1937.5 7004,-2044.5"/>
<text text-anchor="middle" x="6481" y="-1968.37" font-family="Times,serif" font-size="90.16">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site._slug_component -->
<g id="edge81" class="edge">
<title>build_site._render_site&#45;&gt;build_site._slug_component</title>
<path fill="none" stroke="black" d="M6567.21,-1937.25C6673.22,-1873.86 6862.02,-1772.16 7040,-1733 7484.98,-1635.11 8648.63,-1654.92 9090,-1768 9288.84,-1818.94 9499.55,-1952.82 9580.06,-2007.36"/>
<polygon fill="black" stroke="black" points="9578.1,-2010.26 9588.34,-2013 9582.04,-2004.48 9578.1,-2010.26"/>
</g>
<!-- build_site._render_site&#45;&gt;build_site._lot_page_path -->
<g id="edge82" class="edge">
<title>build_site._render_site&#45;&gt;build_site._lot_page_path</title>
<path fill="none" stroke="black" d="M7004.19,-1976.02C7403.86,-1967.66 7920.91,-1964.44 8130,-1996 8146.54,-1998.5 8149.53,-2004.05 8166,-2007 8282.3,-2027.87 8417.48,-2033.66 8511.26,-2034.81"/>
<polygon fill="black" stroke="black" points="8511.31,-2038.31 8521.34,-2034.92 8511.38,-2031.31 8511.31,-2038.31"/>
</g>
<!-- build_site._render_site&#45;&gt;build_site._cat_page_path -->
<g id="edge83" class="edge">
<title>build_site._render_site&#45;&gt;build_site._cat_page_path</title>
<path fill="none" stroke="black" d="M7004.2,-1997C7466.71,-2003.51 8076.84,-2015.51 8130,-2034 8148.89,-2040.57 8147.22,-2054.12 8166,-2061 8280.88,-2103.07 8422.61,-2104.58 8518.36,-2098.93"/>
<polygon fill="black" stroke="black" points="8518.58,-2102.42 8528.35,-2098.31 8518.15,-2095.44 8518.58,-2102.42"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge86" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6549.24,-1937.49C6649.38,-1861.31 6846.73,-1724.49 7040,-1667 7367.11,-1569.7 9861.1,-1692.73 10104,-1453 10152.26,-1405.37 10115.88,-1213.37 10140,-1150 10197.28,-999.51 10326.7,-852 10381.37,-793.9"/>
<polygon fill="black" stroke="black" points="10384.23,-795.96 10388.57,-786.3 10379.15,-791.15 10384.23,-795.96"/>
</g>
<!-- build_site.build_page -->
<g id="node63" class="node">
<title>build_site.build_page</title>
<g id="a_node63"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="8054.5,-2604 7115.5,-2604 7115.5,-2502 8054.5,-2502 8054.5,-2604"/>
<text text-anchor="middle" x="7585" y="-2531.46" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge84" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6972.81,-2044.61C6983.86,-2053.17 6994.3,-2062.6 7004,-2073 7067.15,-2140.68 6975.61,-2421.49 7040,-2488 7059.67,-2508.31 7082.1,-2524.79 7106.39,-2538.03"/>
<polygon fill="black" stroke="black" points="7104.94,-2541.23 7115.42,-2542.77 7108.19,-2535.03 7104.94,-2541.23"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge85" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7004.35,-2029.06C7016.34,-2029.74 7028.24,-2030.38 7040,-2031 7100.51,-2034.17 8076.26,-2039.01 8130,-2067 8153.65,-2079.32 8143.22,-2101.14 8166,-2115 8521.7,-2331.49 8699.29,-2125.98 9090,-2270 9583.04,-2451.74 9796.85,-2451.65 10104,-2878 10268.54,-3106.4 10383.1,-4040.96 10403.31,-4215.76"/>
<polygon fill="black" stroke="black" points="10399.86,-4216.41 10404.48,-4225.95 10406.81,-4215.61 10399.86,-4216.41"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node65" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node65"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8792.5,-2501 8463.5,-2501 8463.5,-2465 8792.5,-2465 8792.5,-2501"/>
<text text-anchor="middle" x="8628" y="-2477.3" font-family="Times,serif" font-size="22.12">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge87" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6972.29,-2044.63C6983.52,-2053.18 6994.13,-2062.61 7004,-2073 7056.79,-2128.56 6984.14,-2363.52 7040,-2416 7090.8,-2463.72 8051.36,-2477.86 8452.89,-2481.69"/>
<polygon fill="black" stroke="black" points="8453.11,-2485.19 8463.14,-2481.79 8453.18,-2478.19 8453.11,-2485.19"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge88" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7887.29,-2604.09C7979.78,-2635.1 8072.29,-2684.93 8130,-2765 8177.03,-2830.25 8111.81,-3428.56 8166,-3488 8252.53,-3582.93 8409.22,-3585.45 8515.65,-3573.7"/>
<polygon fill="black" stroke="black" points="8516.26,-3577.15 8525.79,-3572.52 8515.45,-3570.2 8516.26,-3577.15"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge92" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8054.6,-2567.5C8081.95,-2580.61 8107.45,-2597.2 8130,-2618 8189.33,-2672.73 8109.09,-2738.76 8166,-2796 8212.26,-2842.53 8274.82,-2869.32 8338.92,-2884.17"/>
<polygon fill="black" stroke="black" points="8338.28,-2887.61 8348.8,-2886.37 8339.8,-2880.78 8338.28,-2887.61"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge93" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7889.47,-2604.02C7981.54,-2635.03 8073.24,-2684.87 8130,-2765 8199.21,-2862.7 8114.55,-3733.88 8166,-3842 8256.52,-4032.22 8484.03,-4168.63 8581.51,-4220.25"/>
<polygon fill="black" stroke="black" points="8580.04,-4223.43 8590.53,-4224.98 8583.3,-4217.23 8580.04,-4223.43"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._slug_component -->
<g id="edge89" class="edge">
<title>build_site.build_page&#45;&gt;build_site._slug_component</title>
<path fill="none" stroke="black" d="M8043.53,-2604.03C8430.39,-2636 8944.32,-2648.45 9090,-2510 9163.04,-2440.59 9053.89,-2128.38 9126,-2058 9237.62,-1949.05 9440.55,-1982.64 9546.11,-2010.25"/>
<polygon fill="black" stroke="black" points="9545.45,-2013.69 9556.02,-2012.89 9547.26,-2006.93 9545.45,-2013.69"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._lot_page_path -->
<g id="edge90" class="edge">
<title>build_site.build_page&#45;&gt;build_site._lot_page_path</title>
<path fill="none" stroke="black" d="M8012.35,-2501.99C8057.01,-2481.22 8097.76,-2453.31 8130,-2416 8181.84,-2356 8108.75,-2115.86 8166,-2061 8213.71,-2015.27 8391.17,-2017.25 8511.47,-2024.44"/>
<polygon fill="black" stroke="black" points="8511.28,-2027.94 8521.47,-2025.06 8511.71,-2020.95 8511.28,-2027.94"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._cat_page_path -->
<g id="edge91" class="edge">
<title>build_site.build_page&#45;&gt;build_site._cat_page_path</title>
<path fill="none" stroke="black" d="M7996.95,-2501.92C8046.41,-2481.44 8092.56,-2453.63 8130,-2416 8177.14,-2368.63 8122.02,-2320.32 8166,-2270 8256.24,-2166.75 8412.77,-2121.52 8518.09,-2102.09"/>
<polygon fill="black" stroke="black" points="8518.9,-2105.5 8528.12,-2100.29 8517.66,-2098.61 8518.9,-2105.5"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge94" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M8054.73,-2521.48C8196.68,-2511.94 8343.82,-2502.04 8453.35,-2494.68"/>
<polygon fill="black" stroke="black" points="8453.76,-2498.16 8463.5,-2493.99 8453.29,-2491.17 8453.76,-2498.16"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge139" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M10300.3,-4254.04C10220.56,-4266 10256.29,-4280 10407.5,-4280 10551.91,-4280 10591,-4267.23 10524.75,-4255.67"/>
<polygon fill="black" stroke="black" points="10525.13,-4252.18 10514.7,-4254.04 10524.02,-4259.09 10525.13,-4252.18"/>
</g>
<!-- build_site.main -->
<g id="node66" class="node">
<title>build_site.main</title>
<g id="a_node66"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5759.5,-1585.5 5341.5,-1585.5 5341.5,-1520.5 5759.5,-1520.5 5759.5,-1585.5"/>
<text text-anchor="middle" x="5550.5" y="-1539.95" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge95" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5759.52,-1526.42C5812.59,-1519.08 5869.48,-1510.71 5922,-1502 5938.08,-1499.33 5941.81,-1496.88 5958,-1495 6015.77,-1488.29 6960.8,-1492.93 7004,-1454 7087.39,-1378.85 6955.68,-1278.1 7040,-1204 7099.03,-1152.13 9435.97,-1172.6 10180.87,-1180.47"/>
<polygon fill="black" stroke="black" points="10180.87,-1183.97 10190.91,-1180.57 10180.95,-1176.97 10180.87,-1183.97"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge101" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5759.51,-1560.12C5816.64,-1553.04 5875.57,-1536.4 5922,-1502 5952.68,-1479.27 5926.27,-1445.23 5958,-1424 6054.67,-1359.31 6919.32,-1460.75 7004,-1381 7061.72,-1326.64 6982.61,-1080.71 7040,-1026 7082.78,-985.22 7213.46,-977.34 7336.01,-979.97"/>
<polygon fill="black" stroke="black" points="7336.24,-983.47 7346.32,-980.21 7336.41,-976.48 7336.24,-983.47"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge96" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5759.91,-1529.29C5819.96,-1533.79 5880.41,-1551.25 5922,-1595 6010.81,-1688.44 5867.24,-2082.45 5958,-2174 6002.64,-2219.03 6153.81,-2225.96 6282.06,-2222.94"/>
<polygon fill="black" stroke="black" points="6282.52,-2226.43 6292.42,-2222.67 6282.34,-2219.43 6282.52,-2226.43"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge97" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5759.77,-1529.43C5819.81,-1533.94 5880.29,-1551.36 5922,-1595 6003.87,-1680.66 5872.26,-2045.22 5958,-2127 6011.46,-2177.99 7064.69,-2167.66 7446.92,-2162.19"/>
<polygon fill="black" stroke="black" points="7446.98,-2165.69 7456.93,-2162.05 7446.88,-2158.69 7446.98,-2165.69"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge98" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5759.93,-1528.3C5820.35,-1532.65 5881,-1550.25 5922,-1595 5975.16,-1653.02 5913.12,-2946.36 5958,-3011 6032.29,-3118.01 6170.85,-3170.52 6286.54,-3196.27"/>
<polygon fill="black" stroke="black" points="6286.08,-3199.75 6296.6,-3198.45 6287.57,-3192.91 6286.08,-3199.75"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge99" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5759.81,-1554.3C5820.79,-1543.76 5881.8,-1520.44 5922,-1473 5976.01,-1409.27 5898.15,-780.28 5958,-722 6302.62,-386.44 6559.03,-704.11 7040,-699 7161.1,-697.71 8034.54,-624.47 8130,-699 8182,-739.6 8114.85,-801.34 8166,-843 8205.84,-875.44 9038.67,-878.72 9090,-881 9098.5,-881.38 9107.08,-881.76 9115.72,-882.15"/>
<polygon fill="black" stroke="black" points="9115.74,-885.65 9125.89,-882.61 9116.06,-878.66 9115.74,-885.65"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge100" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5759.97,-1543.58C5816.15,-1549.53 5874.47,-1564.18 5922,-1595 5948.41,-1612.13 5936.16,-1633.33 5958,-1656 6074.47,-1776.91 6242.68,-1874.79 6356.41,-1932.86"/>
<polygon fill="black" stroke="black" points="6355.03,-1936.08 6365.53,-1937.49 6358.2,-1929.84 6355.03,-1936.08"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge102" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5759.87,-1549.93C5815,-1542.4 5872.81,-1528.07 5922,-1502 5943.13,-1490.8 5936.37,-1472.2 5958,-1462 6063.23,-1412.4 6917.78,-1495.09 7004,-1417 7087.86,-1341.05 6955.71,-1240.46 7040,-1165 7062.2,-1145.12 8834.44,-1102.13 9424.95,-1088.35"/>
<polygon fill="black" stroke="black" points="9425.35,-1091.84 9435.27,-1088.11 9425.19,-1084.84 9425.35,-1091.84"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node68" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node68"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6798.5,-2487.5 6163.5,-2487.5 6163.5,-2434.5 6798.5,-2434.5 6798.5,-2487.5"/>
<text text-anchor="middle" x="6481" y="-2450.8" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge103" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5759.92,-1528.79C5820.16,-1533.21 5880.71,-1550.74 5922,-1595 5984.59,-1662.09 5894.26,-2354 5958,-2420 6062.88,-2528.6 6251.38,-2513.54 6370.86,-2489.57"/>
<polygon fill="black" stroke="black" points="6371.68,-2492.98 6380.77,-2487.53 6370.27,-2486.12 6371.68,-2492.98"/>
</g>
<!-- price_utils.load_price_model -->
<g id="node69" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node69"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="8862.5,-3479 8393.5,-3479 8393.5,-3437 8862.5,-3437 8862.5,-3479"/>
<text text-anchor="middle" x="8628" y="-3449.91" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge104" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M5759.54,-1528.18C5820.13,-1532.46 5880.98,-1550.06 5922,-1595 5984.07,-1663.01 5895.32,-3184.55 5958,-3252 6122.73,-3429.25 7895.32,-3352.01 8130,-3411 8147.16,-3415.31 8148.87,-3423.57 8166,-3428 8235.2,-3445.9 8312.08,-3454.97 8382.92,-3459.19"/>
<polygon fill="black" stroke="black" points="8383.14,-3462.71 8393.33,-3459.78 8383.54,-3455.72 8383.14,-3462.71"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node70" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node70"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6841.5,-1563.5 6120.5,-1563.5 6120.5,-1504.5 6841.5,-1504.5 6841.5,-1563.5"/>
<text text-anchor="middle" x="6481" y="-1522.32" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge105" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5759.58,-1548.74C5862.94,-1546.63 5990.94,-1544.01 6110.26,-1541.57"/>
<polygon fill="black" stroke="black" points="6110.37,-1545.06 6120.3,-1541.36 6110.23,-1538.07 6110.37,-1545.06"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node71" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node71"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="8998,-1056 8258,-1056 8258,-998 8998,-998 8998,-1056"/>
<text text-anchor="middle" x="8628" y="-1015.71" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge106" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5759.76,-1553.25C5820.35,-1542.58 5881.16,-1519.45 5922,-1473 5984.73,-1401.65 5890.44,-1113.79 5958,-1047 6043.87,-962.11 8013.44,-936.49 8130,-968 8147.88,-972.83 8148.33,-983.43 8166,-989 8192.29,-997.28 8219.82,-1004.03 8247.79,-1009.5"/>
<polygon fill="black" stroke="black" points="8247.22,-1012.95 8257.7,-1011.38 8248.53,-1006.07 8247.22,-1012.95"/>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge303" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8862.74,-3462.98C9055.5,-3467.09 9322.13,-3472.78 9480.44,-3476.15"/>
<polygon fill="black" stroke="black" points="9480.64,-3479.66 9490.71,-3476.37 9480.79,-3472.66 9480.64,-3479.66"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge305" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6841.82,-1509.59C6902.76,-1490.31 6960.34,-1460.22 7004,-1414 7069.33,-1344.84 6974.91,-1272.38 7040,-1203 7076.11,-1164.51 7121.42,-1136.55 7170.39,-1116.39"/>
<polygon fill="black" stroke="black" points="7171.91,-1119.55 7179.9,-1112.58 7169.32,-1113.05 7171.91,-1119.55"/>
</g>
<!-- price_utils.predict_price -->
<g id="node172" class="node">
<title>price_utils.predict_price</title>
<g id="a_node172"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7790,-1905.5 7380,-1905.5 7380,-1862.5 7790,-1862.5 7790,-1905.5"/>
<text text-anchor="middle" x="7585" y="-1875.85" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge306" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6609.21,-1504.45C6727.52,-1485.19 6900.65,-1479.31 7004,-1578 7093.15,-1663.13 6949.71,-1769.09 7040,-1853 7087.23,-1896.89 7238.42,-1902.83 7369.46,-1898.79"/>
<polygon fill="black" stroke="black" points="7369.78,-1902.28 7379.66,-1898.45 7369.55,-1895.28 7369.78,-1902.28"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node173" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node173"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8821.5,-1236.5 8434.5,-1236.5 8434.5,-1197.5 8821.5,-1197.5 8821.5,-1236.5"/>
<text text-anchor="middle" x="8628" y="-1210.1" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge307" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6610.61,-1563.51C6728.67,-1582.33 6900.49,-1587.53 7004,-1490 7085.38,-1413.32 6956.02,-1314.83 7040,-1241 7091.1,-1196.08 8008.11,-1206.19 8424.39,-1213.15"/>
<polygon fill="black" stroke="black" points="8424.38,-1216.65 8434.44,-1213.32 8424.5,-1209.65 8424.38,-1216.65"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node175" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node175"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9871.5,-1284 9358.5,-1284 9358.5,-1246 9871.5,-1246 9871.5,-1284"/>
<text text-anchor="middle" x="9615" y="-1258.27" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge308" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6614.52,-1563.53C6731.96,-1581.27 6900.45,-1584.81 7004,-1490 7072.87,-1426.94 6968.75,-1343.36 7040,-1283 7083.57,-1246.09 8698.92,-1256.65 9348,-1262.4"/>
<polygon fill="black" stroke="black" points="9348.4,-1265.91 9358.43,-1262.5 9348.46,-1258.91 9348.4,-1265.91"/>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge309" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8998.23,-1048.37C9143.62,-1056.78 9304.32,-1066.08 9425.09,-1073.07"/>
<polygon fill="black" stroke="black" points="9425,-1076.57 9435.18,-1073.65 9425.4,-1069.58 9425,-1076.57"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node72" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node72"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7699.5,-2994 7470.5,-2994 7470.5,-2958 7699.5,-2958 7699.5,-2994"/>
<text text-anchor="middle" x="7585" y="-2971.96" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node73" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node73"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8711.5,-2994 8544.5,-2994 8544.5,-2958 8711.5,-2958 8711.5,-2994"/>
<text text-anchor="middle" x="8628" y="-2972.3" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge107" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7699.88,-2976C7907.46,-2976 8343.52,-2976 8534.3,-2976"/>
<polygon fill="black" stroke="black" points="8534.31,-2979.5 8544.31,-2976 8534.31,-2972.5 8534.31,-2979.5"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge141" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8711.71,-2981.71C8898.51,-2994.61 9351.02,-3025.84 9534.62,-3038.52"/>
<polygon fill="black" stroke="black" points="9534.52,-3042.02 9544.74,-3039.22 9535,-3035.04 9534.52,-3042.02"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge142" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8711.71,-2970.12C8870.46,-2958.84 9221.12,-2933.92 9435.54,-2918.68"/>
<polygon fill="black" stroke="black" points="9435.92,-2922.16 9445.64,-2917.96 9435.42,-2915.18 9435.92,-2922.16"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node74" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node74"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6598.5,-5568 6363.5,-5568 6363.5,-5532 6598.5,-5532 6598.5,-5568"/>
<text text-anchor="middle" x="6481" y="-5545.96" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.write_md -->
<g id="node75" class="node">
<title>notes_utils.write_md</title>
<g id="a_node75"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7698,-5568 7472,-5568 7472,-5532 7698,-5532 7698,-5568"/>
<text text-anchor="middle" x="7585" y="-5545.21" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge108" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6598.63,-5550C6808.57,-5550 7248.1,-5550 7461.94,-5550"/>
<polygon fill="black" stroke="black" points="7461.95,-5553.5 7471.95,-5550 7461.95,-5546.5 7461.95,-5553.5"/>
</g>
<!-- telegram_bot._t -->
<g id="node76" class="node">
<title>telegram_bot._t</title>
<g id="a_node76"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5654.5,-1410 5446.5,-1410 5446.5,-1374 5654.5,-1374 5654.5,-1410"/>
<text text-anchor="middle" x="5550.5" y="-1386.12" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node77" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node77"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5701.5,-1464 5399.5,-1464 5399.5,-1428 5701.5,-1428 5701.5,-1464"/>
<text text-anchor="middle" x="5550.5" y="-1441.21" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node78" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node78"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6585,-1372 6377,-1372 6377,-1336 6585,-1336 6585,-1372"/>
<text text-anchor="middle" x="6481" y="-1350.3" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge109" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5701.54,-1457.2C5771.15,-1456.93 5853.46,-1448.57 5922,-1419 5941.93,-1410.4 5938.02,-1394.48 5958,-1386 6089.9,-1329.99 6257.56,-1330.88 6366.76,-1339.8"/>
<polygon fill="black" stroke="black" points="6366.55,-1343.29 6376.81,-1340.65 6367.15,-1336.32 6366.55,-1343.29"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node79" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node79"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5701.5,-4030 5399.5,-4030 5399.5,-3994 5701.5,-3994 5701.5,-4030"/>
<text text-anchor="middle" x="5550.5" y="-4006.7" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge110" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5701.56,-4012.03C6098.17,-4012.35 7207.11,-4014.74 8130,-4031 8239.69,-4032.93 9997.83,-4058.37 10104,-4086 10209.37,-4113.42 10319.34,-4182.89 10373.01,-4219.91"/>
<polygon fill="black" stroke="black" points="10371.23,-4222.94 10381.44,-4225.78 10375.23,-4217.19 10371.23,-4222.94"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node80" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node80"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="5694,-3976 5407,-3976 5407,-3940 5694,-3940 5694,-3976"/>
<text text-anchor="middle" x="5550.5" y="-3952.3" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge111" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5694.14,-3957.82C6454.26,-3957.02 9997.94,-3955.37 10104,-3994 10230.35,-4040.02 10341.68,-4163.68 10386.05,-4217.91"/>
<polygon fill="black" stroke="black" points="10383.33,-4220.12 10392.34,-4225.69 10388.78,-4215.71 10383.33,-4220.12"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node81" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6565,-3930 6397,-3930 6397,-3894 6565,-3894 6565,-3930"/>
<text text-anchor="middle" x="6481" y="-3908.76" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node82" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node82"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7731,-3716 7439,-3716 7439,-3680 7731,-3680 7731,-3716"/>
<text text-anchor="middle" x="7585" y="-3693.84" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge112" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7731.26,-3709.91C7873.05,-3718.05 8075.22,-3719.25 8130,-3666 8195.9,-3601.94 8100.58,-3318.54 8166,-3254 8189.94,-3230.38 8247.63,-3218.58 8314.4,-3213.4"/>
<polygon fill="black" stroke="black" points="8315.03,-3216.86 8324.75,-3212.65 8314.52,-3209.88 8315.03,-3216.86"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node83" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6642.5,-2863 6319.5,-2863 6319.5,-2827 6642.5,-2827 6642.5,-2863"/>
<text text-anchor="middle" x="6481" y="-2840.21" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- similar_utils._cos_sim -->
<g id="node84" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node84"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7714,-2864 7456,-2864 7456,-2828 7714,-2828 7714,-2864"/>
<text text-anchor="middle" x="7585" y="-2840.3" font-family="Times,serif" font-size="22.12">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge113" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6642.54,-2845.15C6859.09,-2845.34 7241.16,-2845.69 7445.66,-2845.87"/>
<polygon fill="black" stroke="black" points="7445.86,-2849.37 7455.86,-2845.88 7445.86,-2842.37 7445.86,-2849.37"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node85" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5789,-2864 5312,-2864 5312,-2824 5789,-2824 5789,-2864"/>
<text text-anchor="middle" x="5550.5" y="-2836.93" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge114" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5558.39,-2823.7C5597.19,-2709 5791.37,-2130.07 5922,-1649 5940.42,-1581.17 5909.15,-1545.54 5958,-1495 6064.65,-1384.64 6247.97,-1357.73 6366.54,-1352.7"/>
<polygon fill="black" stroke="black" points="6366.88,-1356.19 6376.74,-1352.31 6366.61,-1349.19 6366.88,-1356.19"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge115" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5789.1,-2844.26C5951.5,-2844.43 6162.93,-2844.66 6308.91,-2844.82"/>
<polygon fill="black" stroke="black" points="6309.3,-2848.32 6319.3,-2844.83 6309.31,-2841.32 6309.3,-2848.32"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node86" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node86"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5826,-2972 5275,-2972 5275,-2920 5826,-2920 5826,-2972"/>
<text text-anchor="middle" x="5550.5" y="-2936.3" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge116" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5826.32,-2935.84C5863.07,-2922.87 5896.73,-2902.93 5922,-2873 6020.81,-2755.97 5863.3,-1615.38 5958,-1495 6054.11,-1372.82 6244.3,-1349.71 6366.64,-1348.62"/>
<polygon fill="black" stroke="black" points="6366.81,-1352.12 6376.79,-1348.58 6366.78,-1345.12 6366.81,-1352.12"/>
</g>
<!-- lot_io.get_lot -->
<g id="node87" class="node">
<title>lot_io.get_lot</title>
<g id="a_node87"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7657.5,-3456 7512.5,-3456 7512.5,-3420 7657.5,-3420 7657.5,-3456"/>
<text text-anchor="middle" x="7585" y="-3433.21" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge117" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5826.44,-2958.32C5862.71,-2971.1 5896.19,-2990.41 5922,-3019 5979.89,-3083.1 5894.74,-3347.2 5958,-3406 6071.59,-3511.57 7187.7,-3459.51 7502.01,-3442.62"/>
<polygon fill="black" stroke="black" points="7502.61,-3446.1 7512.41,-3442.06 7502.23,-3439.11 7502.61,-3446.1"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge275" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7653.31,-3419.96C7773.84,-3383.65 8023.81,-3289.2 8130,-3107 8194.6,-2996.17 8089.81,-2056.21 8166,-1953 8245.54,-1845.24 8403,-1810.34 8511.59,-1799.39"/>
<polygon fill="black" stroke="black" points="8511.99,-1802.87 8521.61,-1798.43 8511.32,-1795.9 8511.99,-1802.87"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node161" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node161"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9740,-4039 9490,-4039 9490,-4003 9740,-4003 9740,-4039"/>
<text text-anchor="middle" x="9615" y="-4014.84" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge276" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7657.66,-3430.55C7789.76,-3418.54 8064.19,-3402.13 8130,-3465 8190.85,-3523.14 8107.32,-3781.67 8166,-3842 8211.67,-3888.96 9129.32,-3976.93 9479.66,-4008.95"/>
<polygon fill="black" stroke="black" points="9479.58,-4012.46 9489.86,-4009.88 9480.22,-4005.49 9479.58,-4012.46"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node88" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node88"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5063.5,-4011 4733.5,-4011 4733.5,-3975 5063.5,-3975 5063.5,-4011"/>
<text text-anchor="middle" x="4898.5" y="-3986.84" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge118" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5063.52,-3997.79C5163.33,-4000.71 5290.24,-4004.42 5389.34,-4007.32"/>
<polygon fill="black" stroke="black" points="5389.35,-4010.82 5399.45,-4007.61 5389.55,-4003.82 5389.35,-4010.82"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node89" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node89"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5010.5,-1436 4786.5,-1436 4786.5,-1400 5010.5,-1400 5010.5,-1436"/>
<text text-anchor="middle" x="4898.5" y="-1413.84" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge119" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5010.5,-1413.56C5129.23,-1408.81 5316.56,-1401.32 5436.18,-1396.53"/>
<polygon fill="black" stroke="black" points="5436.61,-1400.02 5446.46,-1396.12 5436.33,-1393.02 5436.61,-1400.02"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge120" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5010.5,-1422.78C5114.61,-1427.27 5271.47,-1434.02 5389.16,-1439.09"/>
<polygon fill="black" stroke="black" points="5389.21,-1442.6 5399.35,-1439.53 5389.51,-1435.6 5389.21,-1442.6"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node90" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node90"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5073,-1381.5 4724,-1381.5 4724,-1342.5 5073,-1342.5 5073,-1381.5"/>
<text text-anchor="middle" x="4898.5" y="-1355.1" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge121" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5073.26,-1370.02C5188.33,-1375.33 5335.96,-1382.14 5436.13,-1386.77"/>
<polygon fill="black" stroke="black" points="5436.13,-1390.27 5446.28,-1387.24 5436.45,-1383.28 5436.13,-1390.27"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge122" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5073.09,-1370.92C5097.11,-1375.51 5121.05,-1381.98 5143,-1391 5161.75,-1398.7 5160.08,-1411.73 5179,-1419 5244.85,-1444.31 5322.07,-1452.92 5388.92,-1454.48"/>
<polygon fill="black" stroke="black" points="5389.07,-1457.98 5399.13,-1454.66 5389.2,-1450.98 5389.07,-1457.98"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge123" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5073.16,-1361.12C5398.95,-1359.47 6093.53,-1355.96 6366.49,-1354.57"/>
<polygon fill="black" stroke="black" points="6366.83,-1358.07 6376.81,-1354.52 6366.79,-1351.07 6366.83,-1358.07"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node91" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node91"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5113.5,-1495.5 4683.5,-1495.5 4683.5,-1454.5 5113.5,-1454.5 5113.5,-1495.5"/>
<text text-anchor="middle" x="4898.5" y="-1467.76" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge124" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5113.54,-1454.94C5123.61,-1452.03 5133.48,-1448.74 5143,-1445 5161.37,-1437.79 5160.45,-1425.75 5179,-1419 5261.34,-1389.03 5360.63,-1383.26 5435.69,-1384.45"/>
<polygon fill="black" stroke="black" points="5436.05,-1387.96 5446.12,-1384.67 5436.19,-1380.96 5436.05,-1387.96"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge125" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5113.69,-1465.44C5203.53,-1461.44 5306.2,-1456.85 5389.32,-1453.15"/>
<polygon fill="black" stroke="black" points="5389.52,-1456.64 5399.35,-1452.7 5389.21,-1449.65 5389.52,-1456.64"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge126" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5113.77,-1487.08C5393.9,-1500.97 5856.81,-1516.67 5922,-1473 5956.77,-1449.71 5923.94,-1410.31 5958,-1386 6021.2,-1340.89 6232.98,-1341.78 6366.57,-1347.33"/>
<polygon fill="black" stroke="black" points="6366.71,-1350.84 6376.85,-1347.77 6367.01,-1343.85 6366.71,-1350.84"/>
</g>
<!-- telegram_bot.main -->
<g id="node92" class="node">
<title>telegram_bot.main</title>
<g id="a_node92"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5064,-3938 4733,-3938 4733,-3894 5064,-3894 5064,-3938"/>
<text text-anchor="middle" x="4898.5" y="-3907.68" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge127" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5041.08,-3938.02C5074.98,-3945.22 5110.7,-3954.43 5143,-3966 5160.03,-3972.1 5161.61,-3980.01 5179,-3985 5246.22,-4004.27 5322.97,-4012.06 5389.12,-4014.64"/>
<polygon fill="black" stroke="black" points="5389.1,-4018.14 5399.21,-4015 5389.34,-4011.14 5389.1,-4018.14"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge128" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5064.36,-3926.65C5166.54,-3933.25 5296.87,-3941.68 5396.71,-3948.13"/>
<polygon fill="black" stroke="black" points="5396.69,-3951.63 5406.89,-3948.79 5397.14,-3944.65 5396.69,-3951.63"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge129" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5064.17,-3915.58C5394.2,-3914.75 6127.17,-3912.89 6386.7,-3912.24"/>
<polygon fill="black" stroke="black" points="6386.86,-3915.74 6396.85,-3912.21 6386.84,-3908.74 6386.86,-3915.74"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge130" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4980.98,-3893.92C5031.6,-3877.22 5095.79,-3850.36 5143,-3811 5165.15,-3792.53 5153.86,-3771.15 5179,-3757 5564.6,-3540.01 6959.3,-3641.78 7428.64,-3683.31"/>
<polygon fill="black" stroke="black" points="7428.61,-3686.82 7438.88,-3684.22 7429.23,-3679.85 7428.61,-3686.82"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge131" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5016.57,-3893.95C5063.78,-3878.8 5113.87,-3853.41 5143,-3811 5199.66,-3728.5 5113.32,-2986.51 5179,-2911 5210.64,-2874.63 5254.8,-2853.65 5301.65,-2842.22"/>
<polygon fill="black" stroke="black" points="5302.71,-2845.57 5311.68,-2839.92 5301.15,-2838.74 5302.71,-2845.57"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge132" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5016.49,-3893.9C5063.69,-3878.74 5113.8,-3853.35 5143,-3811 5195.08,-3735.46 5116.23,-3052.92 5179,-2986 5202.67,-2960.77 5232.61,-2944.33 5265.18,-2934.12"/>
<polygon fill="black" stroke="black" points="5266.28,-2937.44 5274.9,-2931.27 5264.32,-2930.72 5266.28,-2937.44"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node93" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node93"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-4916 0,-4916 0,-4880 282,-4880 282,-4916"/>
<text text-anchor="middle" x="141" y="-4893.96" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- chop:cli -->
<g id="node94" class="node">
<title>chop:cli</title>
<g id="a_node94"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-4898" rx="27" ry="18"/>
<text text-anchor="middle" x="602" y="-4896.4" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;chop:cli -->
<!-- embed:cli -->
<g id="node187" class="node">
<title>embed:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-4898" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-4896.4" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;embed:cli -->
<!-- log_utils._add_exc_line -->
<g id="node96" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node96"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6622.5,-136 6339.5,-136 6339.5,-100 6622.5,-100 6622.5,-136"/>
<text text-anchor="middle" x="6481" y="-112.41" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge134" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6622.69,-118C6839.52,-118 7251.93,-118 7458.92,-118"/>
<polygon fill="black" stroke="black" points="7459.23,-121.5 7469.23,-118 7459.23,-114.5 7459.23,-121.5"/>
</g>
<!-- log_utils.init_logger -->
<g id="node97" class="node">
<title>log_utils.init_logger</title>
<g id="a_node97"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6828.5,-82 6133.5,-82 6133.5,0 6828.5,0 6828.5,-82"/>
<text text-anchor="middle" x="6481" y="-24.02" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge135" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6828.79,-65.23C7043.74,-80.25 7307,-98.65 7459.11,-109.27"/>
<polygon fill="black" stroke="black" points="7459.2,-112.79 7469.42,-109.99 7459.69,-105.81 7459.2,-112.79"/>
</g>
<!-- log_utils.get_logger -->
<g id="node98" class="node">
<title>log_utils.get_logger</title>
<g id="a_node98"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7653.5,-59 7516.5,-59 7516.5,-23 7653.5,-23 7653.5,-59"/>
<text text-anchor="middle" x="7585" y="-37.76" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge136" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6828.79,-34.68C7068.09,-33.63 7367.25,-34.51 7506.29,-37.33"/>
<polygon fill="black" stroke="black" points="7506.35,-40.83 7516.42,-37.54 7506.5,-33.83 7506.35,-40.83"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge137" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7516.42,-44.46C7384.1,-47.4 7082.47,-48.37 6838.88,-47.36"/>
<polygon fill="black" stroke="black" points="6838.8,-43.86 6828.79,-47.32 6838.77,-50.86 6838.8,-43.86"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node100" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node100"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7734.5,-4862 7435.5,-4862 7435.5,-4826 7734.5,-4826 7734.5,-4862"/>
<text text-anchor="middle" x="7585" y="-4838.12" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node101" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node101"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8849,-5094 8407,-5094 8407,-5058 8849,-5058 8849,-5094"/>
<text text-anchor="middle" x="8628" y="-5070.41" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node102" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node102"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7839,-4491.5 7331,-4491.5 7331,-4448.5 7839,-4448.5 7839,-4491.5"/>
<text text-anchor="middle" x="7585" y="-4461.85" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge144" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7839.27,-4483.51C7944.68,-4474.86 8058.85,-4444.16 8130,-4362 8179.75,-4304.55 8112.1,-3732.57 8166,-3679 8238.9,-3606.55 9008.13,-3698.13 9090,-3636 9130.64,-3605.16 9086.17,-3558.88 9126,-3527 9235.57,-3439.31 9406.39,-3444.65 9514.14,-3459.57"/>
<polygon fill="black" stroke="black" points="9513.64,-3463.04 9524.04,-3461 9514.64,-3456.11 9513.64,-3463.04"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge145" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7839.33,-4470C8067.3,-4470 8389.09,-4470 8541.09,-4470"/>
<polygon fill="black" stroke="black" points="8541.3,-4473.5 8551.3,-4470 8541.3,-4466.5 8541.3,-4473.5"/>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge274" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8704.64,-4459.24C8808.34,-4440.29 8992.81,-4390.84 9090,-4270 9142.22,-4205.07 9065.31,-4143.1 9126,-4086 9225.14,-3992.71 9389.82,-3990.34 9500.11,-4001.87"/>
<polygon fill="black" stroke="black" points="9499.96,-4005.38 9510.28,-4002.99 9500.72,-3998.42 9499.96,-4005.38"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node104" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node104"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9841,-5812 9389,-5812 9389,-5768 9841,-5768 9841,-5812"/>
<text text-anchor="middle" x="9615" y="-5781.68" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge146" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9841.26,-5803.62C9950.88,-5804.91 10066.92,-5796.51 10104,-5759 10158.28,-5704.08 10125.96,-5140.93 10140,-5065 10199.47,-4743.42 10351.21,-4373.49 10394.69,-4271.34"/>
<polygon fill="black" stroke="black" points="10397.96,-4272.6 10398.67,-4262.03 10391.52,-4269.85 10397.96,-4272.6"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node105" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node105"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7832,-5009.5 7338,-5009.5 7338,-4960.5 7832,-4960.5 7832,-5009.5"/>
<text text-anchor="middle" x="7585" y="-4975.82" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge148" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7832.04,-4978.38C8059.91,-4972.25 8386.08,-4963.48 8540.12,-4959.34"/>
<polygon fill="black" stroke="black" points="8540.56,-4962.83 8550.46,-4959.06 8540.37,-4955.83 8540.56,-4962.83"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge149" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7832.36,-5000.8C7956.18,-5002.82 8088.61,-4993.91 8130,-4951 8235.63,-4841.48 8060.27,-3691.43 8166,-3582 8204.91,-3541.73 8338.56,-3537.07 8452.01,-3541.14"/>
<polygon fill="black" stroke="black" points="8452.1,-3544.65 8462.23,-3541.54 8452.37,-3537.65 8452.1,-3544.65"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge147" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7832.01,-4997.32C7953.99,-4998.08 8084.75,-4989.08 8130,-4951 8182.79,-4906.58 8112.74,-4843.86 8166,-4800 8245.32,-4734.68 8988.8,-4779.78 9090,-4762 9267.47,-4730.82 9468.21,-4655.33 9561.34,-4617.85"/>
<polygon fill="black" stroke="black" points="9562.86,-4621.01 9570.82,-4614.02 9560.24,-4614.53 9562.86,-4621.01"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge151" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7832.28,-5000.72C7956.08,-5002.72 8088.51,-4993.81 8130,-4951 8219.97,-4858.16 8075.25,-3880.08 8166,-3788 8238.14,-3714.8 9013.19,-3814.28 9090,-3746 9163.72,-3680.47 9054.03,-3594.45 9126,-3527 9233.52,-3426.24 9418.75,-3439.79 9527.44,-3459.14"/>
<polygon fill="black" stroke="black" points="9526.92,-3462.6 9537.39,-3460.96 9528.19,-3455.72 9526.92,-3462.6"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge152" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7832.36,-5000.09C7955.75,-5001.84 8087.75,-4992.9 8130,-4951 8210.36,-4871.31 8100.6,-4535.36 8166,-4443 8253.42,-4319.53 8433.93,-4271.57 8541.3,-4253.47"/>
<polygon fill="black" stroke="black" points="8542.16,-4256.87 8551.46,-4251.81 8541.03,-4249.96 8542.16,-4256.87"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge150" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7832.03,-4991.72C8429.43,-5005.92 9921.16,-5027.98 10104,-4900 10328.27,-4743.02 10390.01,-4376.83 10403.34,-4272.31"/>
<polygon fill="black" stroke="black" points="10406.83,-4272.57 10404.58,-4262.22 10399.89,-4271.72 10406.83,-4272.57"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge153" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7832.25,-4998.82C7954.94,-5000.11 8086.32,-4991.13 8130,-4951 8210.4,-4877.14 8102.51,-4796.82 8166,-4708 8256.54,-4581.34 8434.99,-4517.22 8541.35,-4488.93"/>
<polygon fill="black" stroke="black" points="8542.31,-4492.3 8551.1,-4486.38 8540.54,-4485.52 8542.31,-4492.3"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node106" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node106"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7800.5,-4618 7369.5,-4618 7369.5,-4574 7800.5,-4574 7800.5,-4618"/>
<text text-anchor="middle" x="7585" y="-4587.68" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge154" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7800.63,-4596C8231.74,-4596 9188.89,-4596 9508.09,-4596"/>
<polygon fill="black" stroke="black" points="9508.26,-4599.5 9518.26,-4596 9508.26,-4592.5 9508.26,-4599.5"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge155" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7800.52,-4596.68C8158.07,-4595.36 8859.38,-4581.59 9090,-4497 9311.7,-4415.68 9521.26,-4210.52 9590.24,-4138.48"/>
<polygon fill="black" stroke="black" points="9592.86,-4140.81 9597.22,-4131.15 9587.79,-4135.99 9592.86,-4140.81"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge156" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7800.6,-4612.07C7932.47,-4616.76 8084.6,-4611.07 8130,-4565 8196.2,-4497.83 8099.52,-3783.89 8166,-3717 8238.46,-3644.09 9010.6,-3737.27 9090,-3672 9141.29,-3629.83 9075.76,-3570.42 9126,-3527 9234.99,-3432.8 9413.11,-3442.16 9521.36,-3459.33"/>
<polygon fill="black" stroke="black" points="9520.85,-3462.8 9531.29,-3460.96 9521.98,-3455.89 9520.85,-3462.8"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge157" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7800.74,-4608.33C7930.32,-4611.17 8079.78,-4604.82 8130,-4565 8174.3,-4529.88 8128.54,-4485.35 8166,-4443 8264.97,-4331.11 8437.78,-4279.42 8541.38,-4257.46"/>
<polygon fill="black" stroke="black" points="8542.11,-4260.88 8551.19,-4255.43 8540.68,-4254.03 8542.11,-4260.88"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge158" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7736.27,-4618.01C7850.23,-4627.69 8007.59,-4625.58 8130,-4565 8152.03,-4554.1 8144.29,-4534.53 8166,-4523 8284.7,-4459.94 8444.5,-4456.57 8541.4,-4461.86"/>
<polygon fill="black" stroke="black" points="8541.26,-4465.36 8551.44,-4462.46 8541.67,-4458.37 8541.26,-4465.36"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node107" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node107"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9887.5,-5114.5 9342.5,-5114.5 9342.5,-5069.5 9887.5,-5069.5 9887.5,-5114.5"/>
<text text-anchor="middle" x="9615" y="-5083.62" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node108" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node108"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="10531.5,-5110 10283.5,-5110 10283.5,-5074 10531.5,-5074 10531.5,-5110"/>
<text text-anchor="middle" x="10407.5" y="-5087.96" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge159" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9887.77,-5092C10018.02,-5092 10168.16,-5092 10273.29,-5092"/>
<polygon fill="black" stroke="black" points="10273.32,-5095.5 10283.32,-5092 10273.32,-5088.5 10273.32,-5095.5"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node109" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node109"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9769,-4891 9461,-4891 9461,-4855 9769,-4855 9769,-4891"/>
<text text-anchor="middle" x="9615" y="-4867.41" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node110" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node110"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="8031.5,-4942 7138.5,-4942 7138.5,-4880 8031.5,-4880 8031.5,-4942"/>
<text text-anchor="middle" x="7585" y="-4898.8" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge163" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8031.74,-4910.83C8076.45,-4902.66 8112.01,-4890 8130,-4871 8203.42,-4793.45 8094.52,-3028.35 8166,-2949 8210.22,-2899.91 8273.34,-2876.41 8338.74,-2867.13"/>
<polygon fill="black" stroke="black" points="8339.37,-2870.58 8348.83,-2865.82 8338.46,-2863.64 8339.37,-2870.58"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge160" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8031.5,-4910.61C8076.25,-4902.47 8111.89,-4889.88 8130,-4871 8215.9,-4781.49 8079.04,-3843.49 8166,-3755 8238.05,-3681.68 9012.22,-3776.21 9090,-3709 9152.39,-3655.09 9064.93,-3582.4 9126,-3527 9234.22,-3428.82 9416.7,-3440.72 9525.21,-3459.22"/>
<polygon fill="black" stroke="black" points="9524.69,-3462.68 9535.15,-3460.97 9525.91,-3455.79 9524.69,-3462.68"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge164" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M8031.53,-4909.57C8075.98,-4901.55 8111.53,-4889.28 8130,-4871 8197.85,-4803.86 8110.33,-4520.53 8166,-4443 8254.11,-4320.28 8433.95,-4272.07 8541.11,-4253.72"/>
<polygon fill="black" stroke="black" points="8541.96,-4257.13 8551.25,-4252.04 8540.81,-4250.23 8541.96,-4257.13"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge165" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M8031.79,-4906.79C8075.45,-4899.13 8110.71,-4887.69 8130,-4871 8186.1,-4822.45 8120.76,-4766.8 8166,-4708 8260.58,-4585.07 8436.5,-4519.84 8541.54,-4490.3"/>
<polygon fill="black" stroke="black" points="8542.78,-4493.59 8551.48,-4487.55 8540.91,-4486.84 8542.78,-4493.59"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge161" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M8031.91,-4902.57C8400.5,-4898.21 8893.96,-4899.12 9090,-4930 9260.68,-4956.89 9452.67,-5027.05 9550,-5065.63"/>
<polygon fill="black" stroke="black" points="9548.82,-5068.93 9559.41,-5069.38 9551.41,-5062.43 9548.82,-5068.93"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge162" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M8031.69,-4899.9C8077.05,-4898.87 8122.45,-4897.89 8166,-4897 8631.96,-4887.51 9182.32,-4879.18 9450.55,-4875.31"/>
<polygon fill="black" stroke="black" points="9450.81,-4878.8 9460.75,-4875.16 9450.7,-4871.8 9450.81,-4878.8"/>
</g>
<!-- debug_dump.main -->
<g id="node111" class="node">
<title>debug_dump.main</title>
<g id="a_node111"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6721,-4942.5 6241,-4942.5 6241,-4879.5 6721,-4879.5 6721,-4942.5"/>
<text text-anchor="middle" x="6481" y="-4898.85" font-family="Times,serif" font-size="49.56">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge166" class="edge">
<title>debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6721.31,-4904.74C6825.11,-4888.64 6937.83,-4850.29 7004,-4764 7054.31,-4698.4 6984.88,-1849.61 7040,-1788 7202.73,-1606.1 7889.87,-1696.71 8130,-1653 8281.55,-1625.41 8456.02,-1580.08 8552.69,-1553.74"/>
<polygon fill="black" stroke="black" points="8553.65,-1557.11 8562.38,-1551.1 8551.81,-1550.36 8553.65,-1557.11"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge167" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6721.22,-4892.69C6819.9,-4885.44 6935.42,-4877.34 7040,-4871 7169.63,-4863.14 7316.74,-4855.94 7425.27,-4850.96"/>
<polygon fill="black" stroke="black" points="7425.49,-4854.45 7435.31,-4850.5 7425.17,-4847.46 7425.49,-4854.45"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge168" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6577.95,-4942.51C6688.08,-4976.96 6874.82,-5030.18 7040,-5052 7519.35,-5115.31 8087.17,-5103.11 8396.98,-5089.16"/>
<polygon fill="black" stroke="black" points="8397.15,-5092.66 8406.98,-5088.71 8396.83,-5085.67 8397.15,-5092.66"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge169" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6721.28,-4900.11C6822.8,-4882.8 6933.69,-4844.79 7004,-4764 7081.45,-4675.01 6953.34,-4581.06 7040,-4501 7081.52,-4462.64 7202.84,-4453.34 7320.41,-4454.33"/>
<polygon fill="black" stroke="black" points="7320.64,-4457.83 7330.67,-4454.44 7320.71,-4450.83 7320.64,-4457.83"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge170" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6720.43,-4942.51C6824.53,-4969.15 6937.75,-5018.31 7004,-5109 7048.11,-5169.38 6985.82,-5729.47 7040,-5781 7082.04,-5820.99 8751.06,-5802 9378.66,-5793.42"/>
<polygon fill="black" stroke="black" points="9378.79,-5796.92 9388.74,-5793.28 9378.69,-5789.92 9378.79,-5796.92"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge171" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6721.26,-4928.63C6819.94,-4935.78 6935.46,-4943.99 7040,-4951 7133.85,-4957.3 7236.83,-4963.83 7327.71,-4969.47"/>
<polygon fill="black" stroke="black" points="7327.68,-4972.97 7337.88,-4970.1 7328.11,-4965.98 7327.68,-4972.97"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge172" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6721.2,-4895.25C6820.7,-4876.84 6930.01,-4839.3 7004,-4764 7048.12,-4719.09 6991.26,-4666.85 7040,-4627 7088.35,-4587.47 7231.56,-4580.47 7358.91,-4582.96"/>
<polygon fill="black" stroke="black" points="7359.14,-4586.47 7369.22,-4583.18 7359.3,-4579.47 7359.14,-4586.47"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge173" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6721.12,-4911C6840.27,-4911 6988.44,-4911 7128.19,-4911"/>
<polygon fill="black" stroke="black" points="7128.23,-4914.5 7138.23,-4911 7128.23,-4907.5 7128.23,-4914.5"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node112" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node112"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4991.5,-4484 4805.5,-4484 4805.5,-4448 4991.5,-4448 4991.5,-4484"/>
<text text-anchor="middle" x="4898.5" y="-4462.3" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node113" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node113"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1393.5,-4086 1163.5,-4086 1163.5,-4050 1393.5,-4050 1393.5,-4086"/>
<text text-anchor="middle" x="1278.5" y="-4062.7" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node114" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node114"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5082,-4775.5 4715,-4775.5 4715,-4738.5 5082,-4738.5 5082,-4775.5"/>
<text text-anchor="middle" x="4898.5" y="-4750.56" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node115" class="node">
<title>tg_client._write_md</title>
<g id="a_node115"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5619,-5583 5482,-5583 5482,-5547 5619,-5547 5619,-5583"/>
<text text-anchor="middle" x="5550.5" y="-5561.76" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node116" class="node">
<title>post_io.write_post</title>
<g id="a_node116"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6647,-5632 6315,-5632 6315,-5586 6647,-5586 6647,-5632"/>
<text text-anchor="middle" x="6481" y="-5600.56" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge174" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5619.02,-5568.2C5761.6,-5574.96 6097.27,-5590.86 6304.85,-5600.7"/>
<polygon fill="black" stroke="black" points="6304.79,-5604.2 6314.94,-5601.18 6305.12,-5597.21 6304.79,-5604.2"/>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge256" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6647.1,-5599.2C6758.15,-5592.69 6907.86,-5584.07 7040,-5577 7184.9,-5569.25 7351.56,-5561.09 7461.83,-5555.79"/>
<polygon fill="black" stroke="black" points="7462.17,-5559.28 7471.99,-5555.31 7461.83,-5552.29 7462.17,-5559.28"/>
</g>
<!-- post_io.get_contact -->
<g id="node137" class="node">
<title>post_io.get_contact</title>
<g id="a_node137"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7684.5,-5680 7485.5,-5680 7485.5,-5644 7684.5,-5644 7684.5,-5680"/>
<text text-anchor="middle" x="7585" y="-5657.22" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge257" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6647.28,-5616.95C6875.64,-5627.93 7281.37,-5647.45 7475.13,-5656.76"/>
<polygon fill="black" stroke="black" points="7475.17,-5660.27 7485.33,-5657.25 7475.51,-5653.28 7475.17,-5660.27"/>
</g>
<!-- post_io.get_timestamp -->
<g id="node151" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node151"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7756.5,-5626 7413.5,-5626 7413.5,-5586 7756.5,-5586 7756.5,-5626"/>
<text text-anchor="middle" x="7585" y="-5598.93" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge258" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6647.28,-5608.55C6850.28,-5608 7193.43,-5607.06 7403.25,-5606.49"/>
<polygon fill="black" stroke="black" points="7403.46,-5609.99 7413.45,-5606.46 7403.44,-5602.99 7403.46,-5609.99"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node117" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node117"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7824.5,-4353.5 7345.5,-4353.5 7345.5,-4310.5 7824.5,-4310.5 7824.5,-4353.5"/>
<text text-anchor="middle" x="7585" y="-4323.85" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge175" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7824.82,-4318.28C7919.85,-4312.27 8030.16,-4304.62 8130,-4296 8274.6,-4283.51 8442.4,-4264.72 8541.36,-4253.19"/>
<polygon fill="black" stroke="black" points="8541.78,-4256.66 8551.31,-4252.03 8540.97,-4249.71 8541.78,-4256.66"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node118" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node118"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6614,-4371 6348,-4371 6348,-4335 6614,-4335 6614,-4371"/>
<text text-anchor="middle" x="6481" y="-4348.22" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge176" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6614.11,-4350.48C6791.85,-4347.1 7111.47,-4341 7335.06,-4336.74"/>
<polygon fill="black" stroke="black" points="7335.37,-4340.24 7345.3,-4336.55 7335.23,-4333.24 7335.37,-4340.24"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node119" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node119"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3283,-4086 3044,-4086 3044,-4050 3283,-4050 3283,-4086"/>
<text text-anchor="middle" x="3163.5" y="-4063.96" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge177" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3283.05,-4069.32C4031.75,-4077.77 8074.68,-4124.73 8130,-4154 8154.52,-4166.98 8141.91,-4191.23 8166,-4205 8282.5,-4271.58 8443.31,-4267.43 8540.96,-4256.53"/>
<polygon fill="black" stroke="black" points="8541.56,-4259.98 8551.08,-4255.35 8540.75,-4253.03 8541.56,-4259.98"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node120" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node120"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5143,-4836.5 4654,-4836.5 4654,-4793.5 5143,-4793.5 5143,-4836.5"/>
<text text-anchor="middle" x="4898.5" y="-4806.85" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node121" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node121"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5762.5,-4887.5 5338.5,-4887.5 5338.5,-4842.5 5762.5,-4842.5 5762.5,-4887.5"/>
<text text-anchor="middle" x="5550.5" y="-4856.62" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node122" class="node">
<title>tg_client._extract_author</title>
<g id="a_node122"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6844,-5188 6118,-5188 6118,-5118 6844,-5118 6844,-5188"/>
<text text-anchor="middle" x="6481" y="-5139.2" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge178" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6844.36,-5155.63C7017.75,-5156.89 7219.49,-5158.35 7368.44,-5159.44"/>
<polygon fill="black" stroke="black" points="7368.59,-5162.94 7378.62,-5159.51 7368.64,-5155.94 7368.59,-5162.94"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node123" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node123"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="7724,-5476 7446,-5476 7446,-5440 7724,-5440 7724,-5476"/>
<text text-anchor="middle" x="7585" y="-5453.22" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node124" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node124"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8776,-4753 8480,-4753 8480,-4717 8776,-4717 8776,-4753"/>
<text text-anchor="middle" x="8628" y="-4729.3" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node125" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node125"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5141,-4720.5 4656,-4720.5 4656,-4671.5 5141,-4671.5 5141,-4720.5"/>
<text text-anchor="middle" x="4898.5" y="-4686.37" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge179" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5132.46,-4720.8C5136.12,-4723.66 5139.64,-4726.72 5143,-4730 5214.16,-4799.56 5104.87,-4884.6 5179,-4951 5423.37,-5169.88 7803.25,-5076.35 8130,-5047 8275.86,-5033.9 8442.94,-4999.59 8541.47,-4977.31"/>
<polygon fill="black" stroke="black" points="8542.4,-4980.69 8551.37,-4975.06 8540.85,-4973.87 8542.4,-4980.69"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge181" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4949.18,-4671.47C5007.72,-4639.48 5102.17,-4577.49 5143,-4493 5178.64,-4419.25 5121.86,-3077.69 5179,-3019 5236.67,-2959.77 5858.9,-3034.4 5922,-2981 5978.64,-2933.08 5907.71,-2872.55 5958,-2818 6287.69,-2460.36 6672.37,-2851.84 7004,-2496 7052.22,-2444.26 6985.24,-2385.75 7040,-2341 7066.99,-2318.94 8043.02,-2304.26 8450.78,-2299.08"/>
<polygon fill="black" stroke="black" points="8450.95,-2302.58 8460.9,-2298.95 8450.86,-2295.58 8450.95,-2302.58"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node126" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node126"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5683.5,-4728 5417.5,-4728 5417.5,-4692 5683.5,-4692 5683.5,-4728"/>
<text text-anchor="middle" x="5550.5" y="-4705.84" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge180" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M5141.07,-4701.2C5230.59,-4703.13 5329.15,-4705.25 5407.03,-4706.93"/>
<polygon fill="black" stroke="black" points="5407.32,-4710.44 5417.39,-4707.15 5407.47,-4703.44 5407.32,-4710.44"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node127" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node127"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6606.5,-4755 6355.5,-4755 6355.5,-4719 6606.5,-4719 6606.5,-4755"/>
<text text-anchor="middle" x="6481" y="-4732.21" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge182" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5683.55,-4713.84C5859.25,-4718.95 6168.27,-4727.94 6345.3,-4733.08"/>
<polygon fill="black" stroke="black" points="6345.36,-4736.59 6355.46,-4733.38 6345.57,-4729.59 6345.36,-4736.59"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node128" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node128"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7766.5,-4808 7403.5,-4808 7403.5,-4772 7766.5,-4772 7766.5,-4808"/>
<text text-anchor="middle" x="7585" y="-4784.3" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge185" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6606.54,-4742.99C6798.32,-4752.21 7167.35,-4769.96 7393.04,-4780.82"/>
<polygon fill="black" stroke="black" points="7393.19,-4784.33 7403.35,-4781.31 7393.53,-4777.34 7393.19,-4784.33"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge183" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7702.64,-4771.97C7816.87,-4759.66 7993.2,-4755.19 8130,-4817 8150.91,-4826.45 8145.97,-4842.81 8166,-4854 8284.93,-4920.44 8443.63,-4944.03 8540.41,-4952.4"/>
<polygon fill="black" stroke="black" points="8540.19,-4955.89 8550.44,-4953.23 8540.77,-4948.91 8540.19,-4955.89"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge184" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7766.73,-4780.45C7965.36,-4769.96 8281.22,-4753.27 8469.9,-4743.3"/>
<polygon fill="black" stroke="black" points="8470.11,-4746.79 8479.91,-4742.77 8469.74,-4739.8 8470.11,-4746.79"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node129" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node129"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2156,-4362 1671,-4362 1671,-4318 2156,-4318 2156,-4362"/>
<text text-anchor="middle" x="1913.5" y="-4331.68" font-family="Times,serif" font-size="32.90">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge186" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2156.07,-4330.52C3050.33,-4299.48 6164.22,-4228.81 7004,-4710 7026.22,-4722.73 7017.28,-4743.17 7040,-4755 7171.79,-4823.64 7346.56,-4821.25 7462.01,-4809.14"/>
<polygon fill="black" stroke="black" points="7462.73,-4812.58 7472.29,-4808.01 7461.97,-4805.62 7462.73,-4812.58"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node130" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node130"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7757,-4677.5 7413,-4677.5 7413,-4636.5 7757,-4636.5 7757,-4677.5"/>
<text text-anchor="middle" x="7585" y="-4649.76" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge188" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7757.26,-4669.62C7895.66,-4675.91 8076,-4674.01 8130,-4627 8192.85,-4572.28 8113.78,-4507.93 8166,-4443 8260.15,-4325.94 8436.22,-4275.87 8541.4,-4255.63"/>
<polygon fill="black" stroke="black" points="8542.17,-4259.05 8551.36,-4253.76 8540.88,-4252.17 8542.17,-4259.05"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge187" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7757.09,-4663.09C8289.67,-4680.9 9894.85,-4725.41 10104,-4623 10260.7,-4546.27 10361.94,-4345.37 10394.82,-4271.65"/>
<polygon fill="black" stroke="black" points="10398.19,-4272.68 10399,-4262.11 10391.78,-4269.86 10398.19,-4272.68"/>
</g>
<!-- tg_client._load_progress -->
<g id="node131" class="node">
<title>tg_client._load_progress</title>
<g id="a_node131"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2078.5,-4492 1748.5,-4492 1748.5,-4456 2078.5,-4456 2078.5,-4492"/>
<text text-anchor="middle" x="1913.5" y="-4467.84" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge189" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2078.61,-4473.66C2278.55,-4472.92 2626.62,-4470.54 2925,-4463 3407,-4450.82 3526.84,-4420 4009,-4420 4009,-4420 4009,-4420 8629,-4420 9258.29,-4420 10006.83,-4309.41 10290.14,-4263.56"/>
<polygon fill="black" stroke="black" points="10291.12,-4266.94 10300.43,-4261.89 10289.99,-4260.03 10291.12,-4266.94"/>
</g>
<!-- tg_client._save_progress -->
<g id="node132" class="node">
<title>tg_client._save_progress</title>
<g id="a_node132"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2673,-4454 2444,-4454 2444,-4418 2673,-4418 2673,-4454"/>
<text text-anchor="middle" x="2558.5" y="-4431.84" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node133" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node133"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3297,-4216 3030,-4216 3030,-4180 3297,-4180 3297,-4216"/>
<text text-anchor="middle" x="3163.5" y="-4192.12" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge190" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3297.12,-4199.03C3587.28,-4201.19 4300.27,-4206 4897.5,-4206 4897.5,-4206 4897.5,-4206 6482,-4206 7283.05,-4206 8252.12,-4232.12 8541.49,-4240.47"/>
<polygon fill="black" stroke="black" points="8541.4,-4243.96 8551.49,-4240.76 8541.6,-4236.97 8541.4,-4243.96"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node134" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node134"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2044,-4300 1783,-4300 1783,-4264 2044,-4264 2044,-4300"/>
<text text-anchor="middle" x="1913.5" y="-4276.12" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge191" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2044.31,-4282C2271.13,-4282 2754.35,-4282 3162.5,-4282 3162.5,-4282 3162.5,-4282 6482,-4282 7214.52,-4282 7397.66,-4274.38 8130,-4258 8274.2,-4254.77 8441.89,-4249.37 8540.97,-4246"/>
<polygon fill="black" stroke="black" points="8541.35,-4249.49 8551.23,-4245.65 8541.12,-4242.5 8541.35,-4249.49"/>
</g>
<!-- tg_client._save_message -->
<g id="node135" class="node">
<title>tg_client._save_message</title>
<g id="a_node135"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4618,-4843.5 3402,-4843.5 3402,-4728.5 4618,-4728.5 4618,-4843.5"/>
<text text-anchor="middle" x="4010" y="-4761.88" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge203" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4070.85,-4728.46C4195.53,-4604.7 4482.69,-4298.64 4618,-3981 4657.52,-3888.23 4592.2,-3836.68 4654,-3757 5332.53,-2882.13 5936.87,-3135.43 7040,-3041 7160.74,-3030.66 8024.17,-3062.03 8130,-3003 8155.19,-2988.95 8141.45,-2964.15 8166,-2949 8217.52,-2917.21 8278.47,-2899.16 8338.88,-2889.53"/>
<polygon fill="black" stroke="black" points="8339.6,-2892.96 8348.96,-2888 8338.55,-2886.04 8339.6,-2892.96"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge204" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4277.89,-4728.5C4393.14,-4705.23 4529.78,-4679.74 4654,-4662 5708.37,-4511.43 5978.5,-4526.09 7040,-4439 7524.03,-4399.29 7650,-4435.9 8130,-4362 8283.93,-4338.3 8460.44,-4291.15 8556.19,-4263.85"/>
<polygon fill="black" stroke="black" points="8557.4,-4267.15 8566.05,-4261.03 8555.47,-4260.42 8557.4,-4267.15"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge205" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4589.06,-4843.58C4599.24,-4851.99 4608.91,-4861.11 4618,-4871 4716.36,-4977.99 4571.92,-5404.06 4654,-5524 4892.35,-5872.31 5127.45,-5840 5549.5,-5840 5549.5,-5840 5549.5,-5840 8629,-5840 8956.8,-5840 9832.56,-6004.78 10104,-5821 10354.09,-5651.67 10397.77,-5233.52 10405.09,-5120.53"/>
<polygon fill="black" stroke="black" points="10408.6,-5120.47 10405.7,-5110.28 10401.61,-5120.05 10408.6,-5120.47"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge192" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4148.27,-4728.45C4277.56,-4675.24 4477.24,-4595.63 4654,-4536 4708.49,-4517.62 4770.84,-4499.75 4818.8,-4486.67"/>
<polygon fill="black" stroke="black" points="4819.77,-4490.04 4828.5,-4484.04 4817.93,-4483.28 4819.77,-4490.04"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge193" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4618.22,-4766.14C4648.34,-4765.15 4677.28,-4764.2 4704.37,-4763.32"/>
<polygon fill="black" stroke="black" points="4704.78,-4766.81 4714.66,-4762.98 4704.55,-4759.81 4704.78,-4766.81"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge194" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4588.37,-4843.7C4598.77,-4852.06 4608.67,-4861.15 4618,-4871 4683.46,-4940.16 4596.46,-5222.12 4654,-5298 4851.49,-5558.43 5292.74,-5574.32 5471.78,-5569.27"/>
<polygon fill="black" stroke="black" points="5472.02,-5572.76 5481.91,-5568.95 5471.81,-5565.77 5472.02,-5572.76"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge195" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4199.44,-4728.42C4326.83,-4691.12 4499.37,-4643.76 4654,-4612 5275.4,-4484.36 6028.66,-4399.16 6337.5,-4367.16"/>
<polygon fill="black" stroke="black" points="6338.26,-4370.6 6347.85,-4366.09 6337.54,-4363.63 6338.26,-4370.6"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge196" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4618.22,-4805.86C4626.85,-4806.15 4635.37,-4806.43 4643.79,-4806.7"/>
<polygon fill="black" stroke="black" points="4643.89,-4810.21 4654,-4807.03 4644.12,-4803.21 4643.89,-4810.21"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge197" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4613.29,-4843.52C4626.98,-4844.4 4640.57,-4845.23 4654,-4846 4883.51,-4859.13 5146.57,-4863.43 5327.9,-4864.72"/>
<polygon fill="black" stroke="black" points="5328.07,-4868.22 5338.09,-4864.79 5328.12,-4861.22 5328.07,-4868.22"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge198" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4500.64,-4843.51C4540.6,-4851.55 4580.15,-4860.67 4618,-4871 4878.46,-4942.07 4915.27,-5046.23 5179,-5104 5486.77,-5171.42 5845.11,-5179.95 6107.7,-5173.73"/>
<polygon fill="black" stroke="black" points="6107.87,-5177.22 6117.78,-5173.48 6107.7,-5170.22 6107.87,-5177.22"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge199" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4577.45,-4728.49C4600.85,-4726.12 4623.74,-4723.79 4645.85,-4721.55"/>
<polygon fill="black" stroke="black" points="4646.36,-4725.01 4655.96,-4720.52 4645.65,-4718.05 4646.36,-4725.01"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge200" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3860.09,-4843.61C3879.06,-4854.12 3929.04,-4861.5 4010,-4861.5 4080.21,-4861.5 4127.12,-4855.95 4150.71,-4847.62"/>
<polygon fill="black" stroke="black" points="4152.15,-4850.81 4159.91,-4843.61 4149.35,-4844.4 4152.15,-4850.81"/>
</g>
<!-- tg_client._save_media -->
<g id="node136" class="node">
<title>tg_client._save_media</title>
<g id="a_node136"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5791.5,-5485 5309.5,-5485 5309.5,-5431 5791.5,-5431 5791.5,-5485"/>
<text text-anchor="middle" x="5550.5" y="-5447.4" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge201" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4586.88,-4843.51C4597.79,-4851.92 4608.19,-4861.06 4618,-4871 4707.38,-4961.55 4573.67,-5056.33 4654,-5155 4810.24,-5346.91 5093.09,-5417.87 5299.2,-5443.78"/>
<polygon fill="black" stroke="black" points="5298.91,-5447.27 5309.27,-5445.02 5299.77,-5440.32 5298.91,-5447.27"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge202" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4588.95,-4843.69C4599.16,-4852.06 4608.87,-4861.15 4618,-4871 4703.39,-4963.09 4575.82,-5336.72 4654,-5435 4805.61,-5625.6 4939.25,-5549.19 5179,-5592 5628.98,-5672.35 7067.3,-5666.48 7475.22,-5663.08"/>
<polygon fill="black" stroke="black" points="7475.27,-5666.58 7485.24,-5663 7475.21,-5659.58 7475.27,-5666.58"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge207" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5705.72,-5430.89C5776.85,-5412.66 5859.22,-5382.89 5922,-5335 5944.93,-5317.51 5932.92,-5295.24 5958,-5281 6167.36,-5162.15 6799.47,-5237.19 7040,-5227 7100.54,-5224.43 8082.77,-5226.96 8130,-5189 8180.08,-5148.75 8119.35,-5093.17 8166,-5049 8266.8,-4953.57 8437.16,-4944.33 8540.15,-4948.88"/>
<polygon fill="black" stroke="black" points="8540.04,-4952.38 8550.2,-4949.38 8540.39,-4945.39 8540.04,-4952.38"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge206" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5791.68,-5467.16C5846.34,-5469 5904.17,-5470.75 5958,-5472 6131.96,-5476.04 8966.17,-5561.26 9090,-5439 9183.95,-5346.24 9053.76,-4956.5 9126,-4846 9213.81,-4711.67 9397.6,-4645.85 9512.88,-4616.55"/>
<polygon fill="black" stroke="black" points="9513.92,-4619.9 9522.78,-4614.09 9512.23,-4613.11 9513.92,-4619.9"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge208" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5712.81,-5485.04C5787.26,-5496.69 5876.94,-5509.55 5958,-5518 6092.62,-5532.04 6247.45,-5540.58 6353.32,-5545.26"/>
<polygon fill="black" stroke="black" points="6353.26,-5548.76 6363.41,-5545.7 6353.57,-5541.77 6353.26,-5548.76"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge209" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5791.63,-5458C6216.29,-5458 7087.77,-5458 7435.72,-5458"/>
<polygon fill="black" stroke="black" points="7435.86,-5461.5 7445.86,-5458 7435.86,-5454.5 7435.86,-5461.5"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node138" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node138"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3366,-4627 2961,-4627 2961,-4585 3366,-4585 3366,-4627"/>
<text text-anchor="middle" x="3163.5" y="-4597.91" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge210" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3263.03,-4627C3376.6,-4651.21 3568.27,-4692.06 3728.88,-4726.29"/>
<polygon fill="black" stroke="black" points="3728.42,-4729.77 3738.93,-4728.44 3729.88,-4722.93 3728.42,-4729.77"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node139" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node139"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7870,-3946 7300,-3946 7300,-3902 7870,-3902 7870,-3946"/>
<text text-anchor="middle" x="7585" y="-3915.68" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge213" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7870.17,-3914.43C7967.3,-3896 8067.18,-3857.2 8130,-3779 8187.82,-3707.04 8103.38,-3016.82 8166,-2949 8210.62,-2900.67 8273.61,-2877.36 8338.72,-2868.02"/>
<polygon fill="black" stroke="black" points="8339.31,-2871.47 8348.76,-2866.69 8338.39,-2864.53 8339.31,-2871.47"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge211" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7691.28,-3946.01C7807.27,-3969.86 7999.47,-4008.22 8166,-4036 8575.06,-4104.23 8710.24,-3999.37 9090,-4166 9317.19,-4265.68 9525.55,-4492.8 9592.03,-4569.86"/>
<polygon fill="black" stroke="black" points="9589.56,-4572.36 9598.72,-4577.67 9594.87,-4567.8 9589.56,-4572.36"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge212" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7822.11,-3946C8264.18,-3987.2 9200.16,-4074.43 9511.13,-4103.41"/>
<polygon fill="black" stroke="black" points="9511.2,-4106.94 9521.49,-4104.38 9511.85,-4099.97 9511.2,-4106.94"/>
</g>
<!-- tg_client._download_messages -->
<g id="node140" class="node">
<title>tg_client._download_messages</title>
<g id="a_node140"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2918,-4606 2199,-4606 2199,-4548 2918,-4548 2918,-4606"/>
<text text-anchor="middle" x="2558.5" y="-4565.71" font-family="Times,serif" font-size="45.36">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge214" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2918.11,-4594.25C2929.03,-4594.77 2939.85,-4595.29 2950.51,-4595.8"/>
<polygon fill="black" stroke="black" points="2950.52,-4599.31 2960.67,-4596.29 2950.85,-4592.32 2950.52,-4599.31"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node141" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node141"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2729.5,-4017 2387.5,-4017 2387.5,-3981 2729.5,-3981 2729.5,-4017"/>
<text text-anchor="middle" x="2558.5" y="-3993.3" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node142" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node142"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2925,-4100.5 2192,-4100.5 2192,-4035.5 2925,-4035.5 2925,-4100.5"/>
<text text-anchor="middle" x="2558.5" y="-4054.95" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge220" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2915.39,-4035.23C2918.69,-4032.29 2921.9,-4029.22 2925,-4026 2996.77,-3951.53 2907.85,-3650.72 2961,-3562 3245.09,-3087.75 3456.17,-2892 4009,-2892 4009,-2892 4009,-2892 6482,-2892 7146.52,-2892 7926.84,-2892 8338.64,-2892"/>
<polygon fill="black" stroke="black" points="8338.91,-2895.5 8348.91,-2892 8338.91,-2888.5 8338.91,-2895.5"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge216" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2915.58,-4035.41C2918.82,-4032.41 2921.96,-4029.28 2925,-4026 2961.52,-3986.55 2949.9,-3111.6 2961,-3059 3221.1,-1826.64 2749.49,-426 4009,-426 4009,-426 4009,-426 7586,-426 7920.26,-426 8768.96,-356.9 9090,-450 9108.01,-455.22 9108.68,-464.82 9126,-472 9253.61,-524.89 9410.23,-557.51 9511.05,-574.7"/>
<polygon fill="black" stroke="black" points="9510.49,-578.15 9520.93,-576.36 9511.65,-571.25 9510.49,-578.15"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge215" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2912.23,-4035.26C2916.59,-4032.34 2920.85,-4029.25 2925,-4026 2961.19,-3997.63 2927.99,-3961.02 2961,-3929 3313.79,-3586.8 3517.51,-3576 4009,-3576 4009,-3576 4009,-3576 6482,-3576 6633.81,-3576 8902.68,-3502.23 9480.77,-3483.36"/>
<polygon fill="black" stroke="black" points="9480.93,-3486.85 9490.81,-3483.03 9480.7,-3479.86 9480.93,-3486.85"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge221" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2925.17,-4093.3C2937.25,-4093.91 2949.22,-4094.48 2961,-4095 5256.61,-4196.78 5834.77,-4096 8130,-4206 8274.4,-4212.92 8442.03,-4226.57 8541.05,-4235.22"/>
<polygon fill="black" stroke="black" points="8541.03,-4238.73 8551.3,-4236.11 8541.64,-4231.75 8541.03,-4238.73"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge217" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2925.04,-4068C2963.6,-4068 3000.68,-4068 3033.62,-4068"/>
<polygon fill="black" stroke="black" points="3033.71,-4071.5 3043.71,-4068 3033.71,-4064.5 3033.71,-4071.5"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge218" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2596.31,-4100.84C2705.97,-4198.68 3029.12,-4487 3131.21,-4578.09"/>
<polygon fill="black" stroke="black" points="3128.94,-4580.75 3138.73,-4584.8 3133.6,-4575.53 3128.94,-4580.75"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge219" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2861.47,-4035.47C2883,-4032.48 2904.35,-4029.32 2925,-4026 3138.77,-3991.61 3187.99,-3959.87 3402,-3927 3669.99,-3885.84 3737.86,-3866 4009,-3866 4009,-3866 4009,-3866 5551.5,-3866 6197.11,-3866 6358.91,-3859.11 7004,-3885 7097.89,-3888.77 7200.21,-3894.95 7292.4,-3901.3"/>
<polygon fill="black" stroke="black" points="7292.22,-3904.8 7302.44,-3902 7292.7,-3897.81 7292.22,-3904.8"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node143" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node143"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1635,-4492 922,-4492 922,-4418 1635,-4418 1635,-4492"/>
<text text-anchor="middle" x="1278.5" y="-4440.18" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge228" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1332.06,-4417.91C1404.37,-4369.37 1540.47,-4286.73 1671,-4255 1923.43,-4193.63 3749.22,-4244 4009,-4244 4009,-4244 4009,-4244 6482,-4244 7282.93,-4244 8252.08,-4243.29 8541.48,-4243.07"/>
<polygon fill="black" stroke="black" points="8541.49,-4246.57 8551.48,-4243.06 8541.48,-4239.57 8541.49,-4246.57"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge222" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1592.62,-4492.01C1636.51,-4497.15 1667.97,-4500.78 1671,-4501 1744.3,-4506.26 6417.79,-4626.93 7402.94,-4652.33"/>
<polygon fill="black" stroke="black" points="7402.86,-4655.83 7412.95,-4652.59 7403.04,-4648.84 7402.86,-4655.83"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge223" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1635.32,-4465.68C1670.75,-4466.74 1705.51,-4467.79 1737.79,-4468.76"/>
<polygon fill="black" stroke="black" points="1738.09,-4472.27 1748.19,-4469.07 1738.3,-4465.27 1738.09,-4472.27"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge224" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1635.05,-4447.61C1647.18,-4447.4 1659.19,-4447.19 1671,-4447 1943.17,-4442.53 2262.37,-4438.99 2433.73,-4437.22"/>
<polygon fill="black" stroke="black" points="2433.83,-4440.72 2443.79,-4437.12 2433.76,-4433.72 2433.83,-4440.72"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge225" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1323.73,-4417.93C1392.68,-4362.76 1532.32,-4261.35 1671,-4222 1921.24,-4151 2697.14,-4176.65 3019.65,-4190.98"/>
<polygon fill="black" stroke="black" points="3019.85,-4194.5 3029.99,-4191.45 3020.16,-4187.5 3019.85,-4194.5"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge226" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1360.91,-4417.91C1438.85,-4384.04 1560.57,-4335.34 1671,-4309 1703.45,-4301.26 1738.89,-4295.73 1772.38,-4291.77"/>
<polygon fill="black" stroke="black" points="1773.17,-4295.21 1782.71,-4290.6 1772.38,-4288.25 1773.17,-4295.21"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge227" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1435.3,-4492.05C1506.72,-4507.58 1592.73,-4524.26 1671,-4534 1840.26,-4555.06 2028.89,-4565.95 2188.5,-4571.52"/>
<polygon fill="black" stroke="black" points="2188.86,-4575.04 2198.97,-4571.88 2189.1,-4568.04 2188.86,-4575.04"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node144" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node144"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7901.5,-4101.5 7268.5,-4101.5 7268.5,-4040.5 7901.5,-4040.5 7901.5,-4101.5"/>
<text text-anchor="middle" x="7585" y="-4058.75" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge231" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7901.54,-4072.57C7987.97,-4056.61 8073.35,-4022.5 8130,-3955 8201.9,-3869.33 8090.44,-3031.46 8166,-2949 8210.5,-2900.43 8273.54,-2877.06 8338.75,-2867.74"/>
<polygon fill="black" stroke="black" points="8339.35,-2871.19 8348.81,-2866.41 8338.44,-2864.25 8339.35,-2871.19"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge229" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7901.72,-4051.83C7980.28,-4058.94 8061.53,-4077.28 8130,-4116 8153.84,-4129.48 8141.97,-4152.86 8166,-4166 8346.42,-4264.66 8896.19,-4147.28 9090,-4216 9311.75,-4294.63 9521.28,-4498.82 9590.25,-4570.6"/>
<polygon fill="black" stroke="black" points="9587.79,-4573.09 9597.22,-4577.9 9592.85,-4568.25 9587.79,-4573.09"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge230" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7901.76,-4077.54C8368.26,-4087.2 9218.05,-4104.8 9511.28,-4110.87"/>
<polygon fill="black" stroke="black" points="9511.41,-4114.38 9521.48,-4111.08 9511.55,-4107.38 9511.41,-4114.38"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge232" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7764.81,-4040.49C7879.97,-4030.96 8026.87,-4038.9 8130,-4116 8165.5,-4142.54 8130.38,-4182.62 8166,-4209 8274.95,-4289.7 8440.88,-4278.69 8541.13,-4261.87"/>
<polygon fill="black" stroke="black" points="8541.96,-4265.28 8551.22,-4260.12 8540.77,-4258.39 8541.96,-4265.28"/>
</g>
<!-- tg_client.main -->
<g id="node145" class="node">
<title>tg_client.main</title>
<g id="a_node145"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="886,-4245 318,-4245 318,-4153 886,-4153 886,-4245"/>
<text text-anchor="middle" x="602" y="-4179.96" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge233" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M748.72,-4245C802.7,-4260.62 864.7,-4276.91 922,-4288 1250.82,-4351.66 1336.89,-4347.61 1671,-4371 1710.91,-4373.79 4249.62,-4447.27 4795.03,-4463.04"/>
<polygon fill="black" stroke="black" points="4795.14,-4466.54 4805.23,-4463.33 4795.34,-4459.55 4795.14,-4466.54"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge234" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M729.85,-4152.87C787.73,-4133.59 857.58,-4112.75 922,-4100 998.05,-4084.95 1084.66,-4076.97 1153.36,-4072.74"/>
<polygon fill="black" stroke="black" points="1153.58,-4076.23 1163.36,-4072.14 1153.17,-4069.25 1153.58,-4076.23"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge235" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M886.34,-4229.51C1130.11,-4255.76 1476.51,-4293.05 1697.89,-4316.89"/>
<polygon fill="black" stroke="black" points="1697.69,-4320.39 1708.01,-4317.98 1698.44,-4313.43 1697.69,-4320.39"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge236" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M635.41,-4245.24C687.03,-4314.66 795.13,-4443.77 922,-4501 1670.46,-4838.64 2705.97,-4691.31 3047.89,-4628.85"/>
<polygon fill="black" stroke="black" points="3048.6,-4632.28 3057.8,-4627.03 3047.33,-4625.4 3048.6,-4632.28"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge237" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M673.33,-4152.95C735.77,-4114.88 830.96,-4063.55 922,-4041 1445.41,-3911.37 2091.94,-3950.9 2391.15,-3979.99"/>
<polygon fill="black" stroke="black" points="2390.91,-3983.49 2401.21,-3980.98 2391.6,-3976.52 2390.91,-3983.49"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge238" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M820.71,-4152.98C854.49,-4147.11 889.1,-4141.83 922,-4138 1156.64,-4110.69 1776.17,-4089.33 2181.79,-4077.71"/>
<polygon fill="black" stroke="black" points="2182.04,-4081.21 2191.94,-4077.42 2181.84,-4074.21 2182.04,-4081.21"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge239" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M658.07,-4245.01C718.68,-4292.99 820.99,-4366.34 922,-4404 932.62,-4407.96 943.52,-4411.61 954.62,-4414.98"/>
<polygon fill="black" stroke="black" points="953.83,-4418.4 964.41,-4417.88 955.81,-4411.69 953.83,-4418.4"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge240" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M886.12,-4182.97C1151.27,-4169.36 1558.61,-4152 1912.5,-4152 1912.5,-4152 1912.5,-4152 3164.5,-4152 4696.24,-4152 6526.11,-4102.76 7258.04,-4081.06"/>
<polygon fill="black" stroke="black" points="7258.31,-4084.56 7268.2,-4080.76 7258.1,-4077.56 7258.31,-4084.56"/>
</g>
<!-- cluster_items._iter_items -->
<g id="node146" class="node">
<title>cluster_items._iter_items</title>
<g id="a_node146"><a xlink:title="Yield ``(id, item:type, embedding)`` for ``sell_item`` lots.&#10;&#10;Embeddings are loaded on demand so memory usage stays minimal.">
<polygon fill="none" stroke="black" points="7843,-867 7327,-867 7327,-815 7843,-815 7843,-867"/>
<text text-anchor="middle" x="7585" y="-831.3" font-family="Times,serif" font-size="39.62">cluster_items._iter_items</text>
</a>
</g>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.read_lots -->
<g id="edge242" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7843.01,-825.99C7963.45,-825.03 8089.33,-834.86 8130,-876 8183.5,-930.13 8124.55,-1496.17 8166,-1560 8247.1,-1684.87 8416.43,-1746.56 8525.75,-1774.53"/>
<polygon fill="black" stroke="black" points="8524.92,-1777.93 8535.48,-1776.97 8526.63,-1771.14 8524.92,-1777.93"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.make_lot_id -->
<g id="edge243" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7738.19,-814.97C7853.9,-803.23 8012.65,-805.09 8130,-876 8156.29,-891.89 8139.66,-919.19 8166,-935 8224.36,-970.04 8408.11,-970.47 8525.25,-966.8"/>
<polygon fill="black" stroke="black" points="8525.43,-970.29 8535.31,-966.46 8525.2,-963.29 8525.43,-970.29"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.iter_lot_files -->
<g id="edge245" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7843.01,-826.36C7963.23,-825.53 8088.92,-835.36 8130,-876 8205.89,-951.07 8090.47,-1279.57 8166,-1355 8210.04,-1398.98 8369.94,-1402.15 8489.14,-1397.81"/>
<polygon fill="black" stroke="black" points="8489.6,-1401.3 8499.46,-1397.42 8489.33,-1394.3 8489.6,-1401.3"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;notes_utils.load_json -->
<g id="edge241" class="edge">
<title>cluster_items._iter_items&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7843.01,-826.73C7963.02,-826.03 8088.51,-835.86 8130,-876 8189.21,-933.29 8108.55,-1185.94 8166,-1245 8454.59,-1541.68 8813.14,-1053.35 9090,-1361 9158.13,-1436.71 9074.43,-3106.17 9126,-3194 9214.82,-3345.27 9417.6,-3424.26 9531.84,-3458.14"/>
<polygon fill="black" stroke="black" points="9531.02,-3461.55 9541.6,-3460.99 9532.98,-3454.83 9531.02,-3461.55"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node147" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node147"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8734.5,-926 8521.5,-926 8521.5,-890 8734.5,-890 8734.5,-926"/>
<text text-anchor="middle" x="8628" y="-903.84" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.embedding_path -->
<g id="edge244" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M7843.01,-857.53C7933.7,-863.37 8036.38,-869.97 8130,-876 8260.55,-884.4 8410.39,-894.05 8511.12,-900.54"/>
<polygon fill="black" stroke="black" points="8511.12,-904.04 8521.32,-901.19 8511.57,-897.06 8511.12,-904.04"/>
</g>
<!-- cluster_items._collect_category_vectors -->
<g id="node148" class="node">
<title>cluster_items._collect_category_vectors</title>
<g id="a_node148"><a xlink:title="Return mean embedding for every ``item:type``.&#10;&#10;Embeddings are streamed from disk so memory use stays manageable.">
<polygon fill="none" stroke="black" points="6744.5,-821 6217.5,-821 6217.5,-785 6744.5,-785 6744.5,-821"/>
<text text-anchor="middle" x="6481" y="-796.84" font-family="Times,serif" font-size="25.20">cluster_items._collect_category_vectors</text>
</a>
</g>
</g>
<!-- cluster_items._collect_category_vectors&#45;&gt;cluster_items._iter_items -->
<g id="edge246" class="edge">
<title>cluster_items._collect_category_vectors&#45;&gt;cluster_items._iter_items</title>
<path fill="none" stroke="black" d="M6744.56,-812.05C6917.39,-818.01 7142.94,-825.79 7316.72,-831.78"/>
<polygon fill="black" stroke="black" points="7316.67,-835.28 7326.78,-832.13 7316.91,-828.29 7316.67,-835.28"/>
</g>
<!-- cluster_items.collect_clusters -->
<g id="node149" class="node">
<title>cluster_items.collect_clusters</title>
<g id="a_node149"><a xlink:title="Return mapping of cluster name to ``item:type`` values.&#10;&#10;Category embeddings are averaged first so clustering deals with a&#10;manageable number of vectors. The number of clusters follows the&#10;square root heuristic.">
<polygon fill="none" stroke="black" points="5922,-854.5 5179,-854.5 5179,-793.5 5922,-793.5 5922,-854.5"/>
<text text-anchor="middle" x="5550.5" y="-811.75" font-family="Times,serif" font-size="48.44">cluster_items.collect_clusters</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim -->
<g id="edge249" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M5903.98,-854.7C5910.34,-859.98 5916.36,-865.73 5922,-872 5978.29,-934.53 5898.91,-2326.11 5958,-2386 6039.68,-2468.79 6919.58,-2345.01 7004,-2425 7067.82,-2485.47 6976.55,-2758.14 7040,-2819 7096.02,-2872.74 7303.94,-2868.65 7445.88,-2858.81"/>
<polygon fill="black" stroke="black" points="7446.26,-2862.29 7455.99,-2858.09 7445.76,-2855.31 7446.26,-2862.29"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;cluster_items._iter_items -->
<g id="edge247" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;cluster_items._iter_items</title>
<path fill="none" stroke="black" d="M5922.03,-829.59C5934.16,-829.74 5946.18,-829.87 5958,-830 6436.39,-835.15 6993.98,-838.3 7316.25,-839.84"/>
<polygon fill="black" stroke="black" points="7316.65,-843.35 7326.67,-839.89 7316.68,-836.35 7316.65,-843.35"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;cluster_items._collect_category_vectors -->
<g id="edge248" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;cluster_items._collect_category_vectors</title>
<path fill="none" stroke="black" d="M5922.14,-815.62C6017.25,-813.47 6117.84,-811.19 6207.01,-809.17"/>
<polygon fill="black" stroke="black" points="6207.35,-812.67 6217.27,-808.94 6207.19,-805.67 6207.35,-812.67"/>
</g>
<!-- cluster_items.main -->
<g id="node150" class="node">
<title>cluster_items.main</title>
<g id="a_node150"><a xlink:title="Cluster items and save the result.">
<polygon fill="none" stroke="black" points="5008,-398 4789,-398 4789,-362 5008,-362 5008,-398"/>
<text text-anchor="middle" x="4898.5" y="-374.7" font-family="Times,serif" font-size="21.00">cluster_items.main</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;notes_utils.write_json -->
<g id="edge252" class="edge">
<title>cluster_items.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5008.24,-380.93C5264.58,-383.04 5926.75,-388 6480,-388 6480,-388 6480,-388 7586,-388 7920.26,-388 8800.45,-244.99 9090,-412 9116.94,-427.54 9100.94,-453.58 9126,-472 9239.63,-555.51 9404.53,-580.6 9510.52,-587.75"/>
<polygon fill="black" stroke="black" points="9510.39,-591.25 9520.59,-588.39 9510.84,-584.26 9510.39,-591.25"/>
</g>
<!-- cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge250" class="edge">
<title>cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M4900.24,-398.06C4905.1,-490.23 4940.11,-911.25 5179,-1101 5452.84,-1318.52 5611.03,-1168.22 5958,-1212 6190.01,-1241.28 6823.6,-1178.2 7004,-1327 7045.64,-1361.35 6997.46,-1409.76 7040,-1443 7067.55,-1464.52 8046.22,-1508.38 8452.72,-1525.71"/>
<polygon fill="black" stroke="black" points="8452.66,-1529.22 8462.8,-1526.14 8452.96,-1522.22 8452.66,-1529.22"/>
</g>
<!-- cluster_items.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge251" class="edge">
<title>cluster_items.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5008.06,-365C5053.58,-354.32 5104.71,-336.09 5143,-305 5168.64,-284.19 5151,-257.5 5179,-240 5357.88,-128.19 5966.84,-143.22 6284.13,-159.61"/>
<polygon fill="black" stroke="black" points="6284.2,-163.12 6294.37,-160.14 6284.56,-156.12 6284.2,-163.12"/>
</g>
<!-- cluster_items.main&#45;&gt;cluster_items.collect_clusters -->
<g id="edge253" class="edge">
<title>cluster_items.main&#45;&gt;cluster_items.collect_clusters</title>
<path fill="none" stroke="black" d="M4906.1,-398.21C4930.52,-462.74 5022.61,-681.72 5179,-776 5186.85,-780.73 5194.97,-785.09 5203.29,-789.1"/>
<polygon fill="black" stroke="black" points="5201.86,-792.29 5212.41,-793.31 5204.8,-785.94 5201.86,-792.29"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node152" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node152"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7730,-3510 7440,-3510 7440,-3474 7730,-3474 7730,-3510"/>
<text text-anchor="middle" x="7585" y="-3487.84" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge259" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7730.12,-3478.16C7854.38,-3474.86 8029.23,-3492.37 8130,-3600 8214.25,-3689.98 8105.43,-3767.64 8166,-3875 8264.47,-4049.54 8481.77,-4172.27 8578.69,-4220.41"/>
<polygon fill="black" stroke="black" points="8577.17,-4223.56 8587.69,-4224.84 8580.26,-4217.28 8577.17,-4223.56"/>
</g>
<!-- caption._identify_size -->
<g id="node153" class="node">
<title>caption._identify_size</title>
<g id="a_node153"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9743.5,-5696 9486.5,-5696 9486.5,-5660 9743.5,-5660 9743.5,-5696"/>
<text text-anchor="middle" x="9615" y="-5672.3" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node154" class="node">
<title>caption._prepare_image</title>
<g id="a_node154"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8845,-5703 8411,-5703 8411,-5657 8845,-5657 8845,-5703"/>
<text text-anchor="middle" x="8628" y="-5671.56" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge260" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8845.16,-5679.56C9037.36,-5679.17 9312.59,-5678.61 9476.31,-5678.28"/>
<polygon fill="black" stroke="black" points="9476.45,-5681.78 9486.44,-5678.26 9476.44,-5674.78 9476.45,-5681.78"/>
</g>
<!-- caption._guess_chat -->
<g id="node155" class="node">
<title>caption._guess_chat</title>
<g id="a_node155"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9711,-5750 9519,-5750 9519,-5714 9711,-5714 9711,-5750"/>
<text text-anchor="middle" x="9615" y="-5727.84" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node156" class="node">
<title>caption.caption_file</title>
<g id="a_node156"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="7888,-5771.5 7282,-5771.5 7282,-5698.5 7888,-5698.5 7888,-5771.5"/>
<text text-anchor="middle" x="7585" y="-5720.01" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge262" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7745.69,-5771.51C7868.48,-5789.24 8033.04,-5788.73 8130,-5689 8229.3,-5586.87 8072.61,-5156.56 8166,-5049 8258.01,-4943.03 8434.4,-4937.91 8540.31,-4945.97"/>
<polygon fill="black" stroke="black" points="8540.08,-4949.47 8550.33,-4946.79 8540.65,-4942.49 8540.08,-4949.47"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge261" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7888.32,-5749.86C7970.22,-5743.31 8056.49,-5726.09 8130,-5689 8151.65,-5678.08 8144.36,-5658.93 8166,-5648 8349.94,-5555.08 8946.89,-5717.29 9090,-5569 9145.86,-5511.12 9082.36,-4913.56 9126,-4846 9212.96,-4711.39 9396.57,-4645.71 9512.12,-4616.51"/>
<polygon fill="black" stroke="black" points="9513.18,-4619.86 9522.05,-4614.05 9511.5,-4613.06 9513.18,-4619.86"/>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge264" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7888.14,-5770.11C7974.21,-5765.06 8062.76,-5743.58 8130,-5689 8173.23,-5653.91 8123.76,-5605.28 8166,-5569 8480.62,-5298.82 8815.01,-5749.43 9090,-5439 9160.45,-5359.47 9053.91,-3605.04 9126,-3527 9229.07,-3415.42 9425.53,-3436.06 9535.13,-3458.82"/>
<polygon fill="black" stroke="black" points="9534.62,-3462.29 9545.13,-3460.95 9536.08,-3455.44 9534.62,-3462.29"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge263" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M7741.23,-5771.54C7865.06,-5790.53 8033.26,-5791.72 8130,-5689 8186.12,-5629.41 8131.16,-4290.07 8166,-4216 8255.56,-4025.61 8483.09,-3889.52 8581.02,-3837.88"/>
<polygon fill="black" stroke="black" points="8582.84,-3840.88 8590.08,-3833.15 8579.6,-3834.67 8582.84,-3840.88"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge265" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M7888.15,-5719.04C8051.74,-5710.39 8250.48,-5699.89 8400.61,-5691.96"/>
<polygon fill="black" stroke="black" points="8401.08,-5695.44 8410.88,-5691.42 8400.71,-5688.45 8401.08,-5695.44"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge266" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M7888.24,-5734.55C8350.17,-5733.87 9209.64,-5732.6 9508.4,-5732.16"/>
<polygon fill="black" stroke="black" points="9508.8,-5735.66 9518.79,-5732.14 9508.79,-5728.66 9508.8,-5735.66"/>
</g>
<!-- caption.main -->
<g id="node157" class="node">
<title>caption.main</title>
<g id="a_node157"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6573.5,-5753 6388.5,-5753 6388.5,-5717 6573.5,-5717 6573.5,-5753"/>
<text text-anchor="middle" x="6481" y="-5728.84" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge267" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6573.59,-5735C6725.13,-5735 7034.81,-5735 7271.61,-5735"/>
<polygon fill="black" stroke="black" points="7271.77,-5738.5 7281.77,-5735 7271.77,-5731.5 7271.77,-5738.5"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node159" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node159"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="9774,-836 9456,-836 9456,-796 9774,-796 9774,-836"/>
<text text-anchor="middle" x="9615" y="-808.93" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node160" class="node">
<title>lot_io.write_lots</title>
<g id="a_node160"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="8729.5,-834 8526.5,-834 8526.5,-798 8729.5,-798 8729.5,-834"/>
<text text-anchor="middle" x="8628" y="-810.41" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge270" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8729.75,-822.62C8848.24,-828.27 9035.68,-829.83 9090,-788 9130.42,-756.87 9087.51,-712.49 9126,-679 9232.31,-586.49 9402.11,-575.88 9510.79,-580.27"/>
<polygon fill="black" stroke="black" points="9510.64,-583.77 9520.79,-580.72 9510.96,-576.77 9510.64,-583.77"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge272" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8729.84,-808.83C8830.2,-801.99 8988.67,-792.02 9126,-787 9559.05,-771.16 10074.95,-768.43 10296.52,-768.02"/>
<polygon fill="black" stroke="black" points="10296.85,-771.52 10306.84,-768.01 10296.84,-764.52 10296.85,-771.52"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge271" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8729.77,-803.37C8831.2,-796.29 8986.98,-801.5 9090,-881 9122.8,-906.31 9092.6,-942.48 9126,-967 9251.16,-1058.87 9445.85,-1042.63 9547.35,-1025.73"/>
<polygon fill="black" stroke="black" points="9548.2,-1029.13 9557.47,-1023.99 9547.02,-1022.23 9548.2,-1029.13"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge273" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M8729.78,-816C8898.55,-816 9240,-816 9445.69,-816"/>
<polygon fill="black" stroke="black" points="9445.99,-819.5 9455.99,-816 9445.99,-812.5 9445.99,-819.5"/>
</g>
<!-- clean_data._parse_date -->
<g id="node165" class="node">
<title>clean_data._parse_date</title>
<g id="a_node165"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8767.5,-5272 8488.5,-5272 8488.5,-5236 8767.5,-5236 8767.5,-5272"/>
<text text-anchor="middle" x="8628" y="-5248.3" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge288" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8736.98,-5235.92C8835.37,-5215.61 8981.48,-5175.56 9090,-5103 9110.44,-5089.33 9103.9,-5071.77 9126,-5061 9223.78,-5013.34 10015.56,-5080.32 10104,-5017 10363.38,-4831.29 10400.37,-4388.78 10405.63,-4272.43"/>
<polygon fill="black" stroke="black" points="10409.14,-4272.34 10406.05,-4262.21 10402.14,-4272.06 10409.14,-4272.34"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node166" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node166"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7738.5,-5272 7431.5,-5272 7431.5,-5236 7738.5,-5236 7738.5,-5272"/>
<text text-anchor="middle" x="7585" y="-5247.84" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge289" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7738.58,-5256.91C7880.78,-5256.02 8078.41,-5244.37 8130,-5189 8186.57,-5128.28 8118.81,-4511.26 8166,-4443 8252.11,-4318.43 8433.39,-4270.84 8541.19,-4253.11"/>
<polygon fill="black" stroke="black" points="8541.75,-4256.56 8551.07,-4251.53 8540.64,-4249.65 8541.75,-4256.56"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge290" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7738.76,-5254C7937.28,-5254 8281.69,-5254 8478.23,-5254"/>
<polygon fill="black" stroke="black" points="8478.34,-5257.5 8488.34,-5254 8478.34,-5250.5 8478.34,-5257.5"/>
</g>
<!-- clean_data._clean_media -->
<g id="node167" class="node">
<title>clean_data._clean_media</title>
<g id="a_node167"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7775,-5384 7395,-5384 7395,-5344 7775,-5344 7775,-5384"/>
<text text-anchor="middle" x="7585" y="-5356.93" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge291" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7775.11,-5378.69C7911.37,-5384.82 8079.71,-5381.79 8130,-5335 8223.79,-5247.73 8078.72,-5142.78 8166,-5049 8261.11,-4946.81 8434.94,-4940.11 8539.83,-4946.91"/>
<polygon fill="black" stroke="black" points="8539.85,-4950.42 8550.07,-4947.63 8540.34,-4943.44 8539.85,-4950.42"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge292" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7775.22,-5358.95C7880,-5354.88 8012.46,-5347.67 8130,-5335 8267.39,-5320.19 8424.6,-5292.78 8524.78,-5273.99"/>
<polygon fill="black" stroke="black" points="8525.71,-5277.37 8534.89,-5272.08 8524.42,-5270.49 8525.71,-5277.37"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node168" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node168"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7787,-4556 7383,-4556 7383,-4510 7787,-4510 7787,-4556"/>
<text text-anchor="middle" x="7585" y="-4524.56" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge294" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7787.18,-4519.79C7920.66,-4515.6 8080.14,-4520.88 8130,-4565 8196.66,-4623.98 8101.8,-4700.36 8166,-4762 8261.5,-4853.69 8423.52,-4854.66 8527.84,-4843.46"/>
<polygon fill="black" stroke="black" points="8528.52,-4846.91 8538.06,-4842.31 8527.73,-4839.95 8528.52,-4846.91"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge295" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7787.03,-4548.15C7922.17,-4553.41 8083.74,-4548.46 8130,-4500 8227.71,-4397.64 8082.93,-2067.57 8166,-1953 8244.74,-1844.4 8402.78,-1809.72 8511.69,-1799.05"/>
<polygon fill="black" stroke="black" points="8512.1,-1802.52 8521.74,-1798.11 8511.46,-1795.55 8512.1,-1802.52"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge293" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7710.33,-4556.01C7827.06,-4570.91 8002.34,-4575.49 8130,-4500 8155.79,-4484.75 8143.25,-4462.49 8166,-4443 8277.72,-4347.28 8442.29,-4290.88 8541.61,-4263.54"/>
<polygon fill="black" stroke="black" points="8542.58,-4266.9 8551.31,-4260.9 8540.74,-4260.15 8542.58,-4266.9"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node169" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node169"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7793,-5326 7377,-5326 7377,-5290 7793,-5290 7793,-5326"/>
<text text-anchor="middle" x="7585" y="-5301.84" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node170" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node170"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8841.5,-5430 8414.5,-5430 8414.5,-5394 8841.5,-5394 8841.5,-5430"/>
<text text-anchor="middle" x="8628" y="-5405.84" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node171" class="node">
<title>clean_data.main</title>
<g id="a_node171"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6577,-5326 6385,-5326 6385,-5290 6577,-5290 6577,-5326"/>
<text text-anchor="middle" x="6481" y="-5302.7" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge296" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6577.39,-5303.33C6765.83,-5294.09 7187.72,-5273.42 7421.06,-5261.98"/>
<polygon fill="black" stroke="black" points="7421.52,-5265.47 7431.34,-5261.48 7421.18,-5258.47 7421.52,-5265.47"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge297" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6577.39,-5312.85C6756.38,-5321.94 7146.03,-5341.74 7384.61,-5353.87"/>
<polygon fill="black" stroke="black" points="7384.63,-5357.37 7394.8,-5354.39 7384.99,-5350.38 7384.63,-5357.37"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge298" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6577.08,-5318.86C6696.77,-5326.62 6899.33,-5319 7004,-5197 7095.6,-5090.24 6940.62,-4664.56 7040,-4565 7086.04,-4518.87 7240.11,-4513.13 7372.59,-4517.66"/>
<polygon fill="black" stroke="black" points="7372.77,-4521.17 7382.89,-4518.03 7373.03,-4514.17 7372.77,-4521.17"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge299" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6577.39,-5308C6751.94,-5308 7126.8,-5308 7366.56,-5308"/>
<polygon fill="black" stroke="black" points="7366.81,-5311.5 7376.81,-5308 7366.81,-5304.5 7366.81,-5311.5"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge300" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6573.86,-5326.01C6684.07,-5346.69 6874.7,-5379.49 7040,-5393 7525.21,-5432.67 8096.59,-5426.63 8404.09,-5419.08"/>
<polygon fill="black" stroke="black" points="8404.56,-5422.57 8414.47,-5418.82 8404.38,-5415.57 8404.56,-5422.57"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node174" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node174"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10675,-1290 10140,-1290 10140,-1240 10675,-1240 10675,-1290"/>
<text text-anchor="middle" x="10407.5" y="-1255.31" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge304" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9871.56,-1265C9954.03,-1265 10045.81,-1265 10129.73,-1265"/>
<polygon fill="black" stroke="black" points="10129.92,-1268.5 10139.92,-1265 10129.92,-1261.5 10129.92,-1268.5"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node176" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node176"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="10551.5,-2108 10263.5,-2108 10263.5,-2072 10551.5,-2072 10551.5,-2108"/>
<text text-anchor="middle" x="10407.5" y="-2085.22" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge311" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9636.5,-2112.54C9715.78,-2201.4 10002.89,-2539.15 10104,-2878 10148.84,-3028.28 10113.01,-4134.51 10140,-4289 10195.05,-4604.07 10349.26,-4964.12 10394.12,-5064.68"/>
<polygon fill="black" stroke="black" points="10390.94,-5066.15 10398.23,-5073.85 10397.33,-5063.29 10390.94,-5066.15"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge310" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9910.07,-2090C10026.69,-2090 10155.91,-2090 10253.27,-2090"/>
<polygon fill="black" stroke="black" points="10253.48,-2093.5 10263.48,-2090 10253.48,-2086.5 10253.48,-2093.5"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node179" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node179"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7845.5,-2123.5 7324.5,-2123.5 7324.5,-2076.5 7845.5,-2076.5 7845.5,-2123.5"/>
<text text-anchor="middle" x="7585" y="-2091.5" font-family="Times,serif" font-size="35.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge316" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7845.52,-2083.99C7965.14,-2082.74 8089.53,-2092.27 8130,-2133 8182,-2185.33 8117.92,-2740.05 8166,-2796 8209.84,-2847.02 8273.11,-2875.15 8338.81,-2889.85"/>
<polygon fill="black" stroke="black" points="8338.43,-2893.35 8348.94,-2892.01 8339.89,-2886.5 8338.43,-2893.35"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge319" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7845.67,-2092.35C7937.06,-2095.75 8039.51,-2106.6 8130,-2133 8147.57,-2138.13 8149.18,-2145.79 8166,-2153 8293.84,-2207.79 8449.56,-2252.04 8543.36,-2276.4"/>
<polygon fill="black" stroke="black" points="8542.52,-2279.8 8553.08,-2278.91 8544.28,-2273.02 8542.52,-2279.8"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge318" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7666.39,-2076.45C7863.52,-2018.69 8368.46,-1870.75 8555.72,-1815.88"/>
<polygon fill="black" stroke="black" points="8556.85,-1819.2 8565.46,-1813.03 8554.88,-1812.48 8556.85,-1819.2"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge317" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7845.71,-2083.44C7965.61,-2082.02 8090.17,-2091.56 8130,-2133 8195.81,-2201.46 8125.72,-3756 8166,-3842 8255.23,-4032.54 8482.94,-4168.55 8580.97,-4220.14"/>
<polygon fill="black" stroke="black" points="8579.56,-4223.35 8590.04,-4224.87 8582.79,-4217.14 8579.56,-4223.35"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge315" class="edge">
<title>moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7799,-2076.5C7912.21,-2053.16 8045.14,-2006.65 8130,-1914 8175.14,-1864.72 8124.47,-1820.36 8166,-1768 8261.32,-1647.83 8434.56,-1583.42 8539.38,-1553.85"/>
<polygon fill="black" stroke="black" points="8540.6,-1557.14 8549.3,-1551.09 8538.73,-1550.39 8540.6,-1557.14"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge320" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7709.68,-2076.47C7826.78,-2055.07 8007.72,-2024.28 8166,-2007 8270.57,-1995.58 8389.05,-1988.78 8479.71,-1984.85"/>
<polygon fill="black" stroke="black" points="8479.94,-1988.35 8489.78,-1984.42 8479.64,-1981.35 8479.94,-1988.35"/>
</g>
<!-- pending_chop.main -->
<g id="node180" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7752.5,-2293.5 7417.5,-2293.5 7417.5,-2250.5 7752.5,-2250.5 7752.5,-2293.5"/>
<text text-anchor="middle" x="7585" y="-2263.85" font-family="Times,serif" font-size="32.06">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge322" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7752.51,-2270.88C7893.12,-2273.78 8079.44,-2288 8130,-2341 8200.01,-2414.39 8098.95,-2719.9 8166,-2796 8210.27,-2846.25 8273.41,-2874.17 8338.82,-2888.91"/>
<polygon fill="black" stroke="black" points="8338.4,-2892.4 8348.91,-2891.07 8339.87,-2885.55 8338.4,-2892.4"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge323" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7752.68,-2276C7943.78,-2280.59 8255.73,-2288.08 8450.76,-2292.77"/>
<polygon fill="black" stroke="black" points="8450.74,-2296.27 8460.83,-2293.01 8450.91,-2289.27 8450.74,-2296.27"/>
</g>
<!-- pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge321" class="edge">
<title>pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7752.53,-2285.51C7892.61,-2292.86 8078.13,-2291.89 8130,-2241 8205.25,-2167.17 8107.56,-1855.73 8166,-1768 8248.71,-1643.84 8418.1,-1581.88 8526.91,-1553.66"/>
<polygon fill="black" stroke="black" points="8528.09,-1556.97 8536.92,-1551.12 8526.37,-1550.19 8528.09,-1556.97"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node181" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node181"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8778.5,-3139 8477.5,-3139 8477.5,-3103 8778.5,-3103 8778.5,-3139"/>
<text text-anchor="middle" x="8628" y="-3116.96" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node182" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6717.5,-3002.5 6244.5,-3002.5 6244.5,-2949.5 6717.5,-2949.5 6717.5,-3002.5"/>
<text text-anchor="middle" x="6481" y="-2965.8" font-family="Times,serif" font-size="40.88">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge324" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6678.82,-3002.57C6793.9,-3029.23 6930.58,-3082.54 7004,-3189 7051.23,-3257.49 6981.39,-4626.97 7040,-4686 7125.37,-4771.99 8035.01,-4644.78 8130,-4720 8178.35,-4758.28 8121.47,-4811.33 8166,-4854 8266.71,-4950.51 8437.09,-4964.24 8540.11,-4962.59"/>
<polygon fill="black" stroke="black" points="8540.25,-4966.09 8550.18,-4962.38 8540.1,-4959.09 8540.25,-4966.09"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge327" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6717.5,-2963.95C6817,-2959.03 6934.13,-2953.46 7040,-2949 7493.7,-2929.88 8020.55,-2911.76 8338.59,-2901.28"/>
<polygon fill="black" stroke="black" points="8339,-2904.77 8348.88,-2900.94 8338.77,-2897.77 8339,-2904.77"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge328" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6717.81,-2987.89C6820.21,-2979.87 6932.78,-2950.87 7004,-2872 7060.7,-2809.21 6979.46,-2552.09 7040,-2493 7126.88,-2408.19 8010,-2434.48 8130,-2416 8283.93,-2392.3 8460.44,-2345.15 8556.19,-2317.85"/>
<polygon fill="black" stroke="black" points="8557.4,-2321.15 8566.05,-2315.03 8555.47,-2314.42 8557.4,-2321.15"/>
</g>
<!-- pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge326" class="edge">
<title>pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6717.78,-2990.08C6821.3,-2982.76 6934.8,-2953.71 7004,-2872 7086.97,-2774.02 6953.12,-1811.53 7040,-1717 7134.41,-1614.28 8060.74,-1559.36 8452.97,-1540.56"/>
<polygon fill="black" stroke="black" points="8453.17,-1544.06 8462.99,-1540.08 8452.84,-1537.07 8453.17,-1544.06"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge325" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6717.73,-2976C6945.32,-2976 7281.05,-2976 7460.39,-2976"/>
<polygon fill="black" stroke="black" points="7460.39,-2979.5 7470.39,-2976 7460.39,-2972.5 7460.39,-2979.5"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge329" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6568.39,-3002.59C6677.16,-3034.6 6870.32,-3086.59 7040,-3107 7558.91,-3169.42 8180.15,-3147.02 8467.17,-3131.23"/>
<polygon fill="black" stroke="black" points="8467.45,-3134.72 8477.24,-3130.67 8467.06,-3127.73 8467.45,-3134.72"/>
</g>
<!-- check_translations.parse_po -->
<g id="node183" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="9907,-740 9323,-740 9323,-688 9907,-688 9907,-740"/>
<text text-anchor="middle" x="9615" y="-704.3" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node184" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="8960.5,-779.5 8295.5,-779.5 8295.5,-734.5 8960.5,-734.5 8960.5,-779.5"/>
<text text-anchor="middle" x="8628" y="-748.62" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge330" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M8960.76,-742.52C9074.63,-737.55 9201.38,-732.01 9312.7,-727.15"/>
<polygon fill="black" stroke="black" points="9312.89,-730.65 9322.73,-726.72 9312.59,-723.65 9312.89,-730.65"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node185" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node185"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="9037,-1493.5 8219,-1493.5 8219,-1436.5 9037,-1436.5 9037,-1493.5"/>
<text text-anchor="middle" x="8628" y="-1453.66" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge332" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8771.35,-1493.51C8874.98,-1505.21 9010.56,-1500.11 9090,-1416 9146.3,-1356.4 9071.96,-740.66 9126,-679 9220.35,-571.33 9397.94,-565.97 9510.88,-575.44"/>
<polygon fill="black" stroke="black" points="9510.65,-578.93 9520.92,-576.34 9511.27,-571.96 9510.65,-578.93"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge331" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8748.7,-1436.5C8854.62,-1419.16 9005.16,-1415.24 9090,-1506 9154.05,-1574.52 9078.44,-3113.15 9126,-3194 9214.95,-3345.19 9417.68,-3424.21 9531.88,-3458.12"/>
<polygon fill="black" stroke="black" points="9531.05,-3461.53 9541.63,-3460.97 9533.01,-3454.81 9531.05,-3461.53"/>
</g>
<!-- pending_embed.main -->
<g id="node186" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6747.5,-1647 6214.5,-1647 6214.5,-1587 6747.5,-1587 6747.5,-1647"/>
<text text-anchor="middle" x="6481" y="-1605.03" font-family="Times,serif" font-size="47.46">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge334" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6588.6,-1647C6712.43,-1688.08 6911.54,-1774.8 7004,-1928 7043.38,-1993.25 6986.45,-2558.77 7040,-2613 7210.56,-2785.71 7938.6,-2534.71 8130,-2684 8171.23,-2716.16 8127.13,-2761.03 8166,-2796 8213.81,-2839.01 8275.77,-2864.65 8338.67,-2879.54"/>
<polygon fill="black" stroke="black" points="8338.24,-2883.03 8348.77,-2881.84 8339.8,-2876.2 8338.24,-2883.03"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge336" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6747.71,-1639.05C7218.46,-1678.11 8180.55,-1757.95 8511.87,-1785.45"/>
<polygon fill="black" stroke="black" points="8511.7,-1788.94 8521.96,-1786.28 8512.28,-1781.97 8511.7,-1788.94"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge338" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6630.56,-1647.03C6745.96,-1661.24 6902.87,-1659.3 7004,-1572 7056.55,-1526.64 6985.97,-1463.59 7040,-1420 7095.91,-1374.89 8113.81,-1382.7 8489.34,-1387.15"/>
<polygon fill="black" stroke="black" points="8489.4,-1390.65 8499.44,-1387.27 8489.49,-1383.65 8489.4,-1390.65"/>
</g>
<!-- pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge333" class="edge">
<title>pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6747.83,-1599.56C6830.15,-1592.69 6921.01,-1583.61 7004,-1572 7020.14,-1569.74 7023.79,-1566.73 7040,-1565 7551,-1510.58 8159.61,-1518.46 8452.5,-1526.76"/>
<polygon fill="black" stroke="black" points="8452.68,-1530.26 8462.78,-1527.05 8452.89,-1523.27 8452.68,-1530.26"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge337" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6604.13,-1647C6724.04,-1668.38 6903.18,-1677.27 7004,-1572 7068.62,-1504.53 6972.54,-796.63 7040,-732 7083.73,-690.11 8082.27,-694.73 8130,-732 8182,-772.6 8115.44,-833.62 8166,-876 8216.49,-918.31 8391.89,-919.51 8511.18,-914.93"/>
<polygon fill="black" stroke="black" points="8511.61,-918.41 8521.46,-914.51 8511.33,-911.42 8511.61,-918.41"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge335" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6591.02,-1647.09C6715.71,-1687.95 6914.18,-1774.15 7004,-1928 7047.06,-2001.76 6980.4,-3403.82 7040,-3465 7092.23,-3518.62 7287.93,-3516.24 7429.67,-3506.62"/>
<polygon fill="black" stroke="black" points="7430.04,-3510.11 7439.77,-3505.92 7429.55,-3503.12 7430.04,-3510.11"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge339" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6522.23,-1647.17C6610.35,-1711.21 6829.42,-1859.32 7040,-1914 7150.25,-1942.63 8997.94,-1885.91 9090,-1953 9129.87,-1982.05 9086.82,-2028.03 9126,-2058 9234.72,-2141.16 9400.04,-2132.27 9507.56,-2114.29"/>
<polygon fill="black" stroke="black" points="9508.2,-2117.73 9517.46,-2112.58 9507.01,-2110.83 9508.2,-2117.73"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge340" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6615.05,-1647.03C6733.07,-1665.13 6902.1,-1668.78 7004,-1572 7088.59,-1491.67 6952.04,-1388.62 7040,-1312 7125.9,-1237.17 8976.51,-1351.08 9090,-1361 9222.81,-1372.61 9373.84,-1392.01 9479.52,-1406.6"/>
<polygon fill="black" stroke="black" points="9479.22,-1410.09 9489.6,-1407.99 9480.18,-1403.15 9479.22,-1410.09"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge341" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6747.64,-1638.89C6834.49,-1634.77 6928.06,-1617.38 7004,-1572 7029.08,-1557.01 7014.53,-1531.31 7040,-1517 7232.67,-1408.72 7806.58,-1415.68 8208.57,-1436"/>
<polygon fill="black" stroke="black" points="8208.46,-1439.5 8218.63,-1436.52 8208.82,-1432.51 8208.46,-1439.5"/>
</g>
<!-- price_train:cli -->
<g id="node188" class="node">
<title>price_train:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-4898" rx="36.68" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-4896.4" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;price_train:cli -->
<!-- scan_ontology:cli -->
<g id="node189" class="node">
<title>scan_ontology:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-4898" rx="44.19" ry="18"/>
<text text-anchor="middle" x="2558.5" y="-4896.4" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;scan_ontology:cli -->
<!-- similar:cli -->
<g id="node190" class="node">
<title>similar:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-4898" rx="29.05" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-4896.4" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;similar:cli -->
<!-- build_site:cli -->
<g id="node191" class="node">
<title>build_site:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-4898" rx="34.71" ry="18"/>
<text text-anchor="middle" x="4010" y="-4896.4" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;build_site:cli -->
<!-- telegram_bot:cli -->
<g id="node192" class="node">
<title>telegram_bot:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4953" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="141" y="-4948.84" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli -->
<g id="node193" class="node">
<title>debug_dump:cli</title>
<g id="a_node193"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-4953" rx="41.11" ry="18"/>
<text text-anchor="middle" x="602" y="-4951.4" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;debug_dump:cli -->
<!-- tg_client:cli -->
<g id="node194" class="node">
<title>tg_client:cli</title>
<g id="a_node194"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-4953" rx="32.86" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-4951.4" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;tg_client:cli -->
<!-- cluster_items:cli -->
<g id="node195" class="node">
<title>cluster_items:cli</title>
<g id="a_node195"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-4953" rx="42.34" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-4951.4" font-family="Times,serif" font-size="7.00">cluster_items:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;cluster_items:cli -->
<!-- caption:cli -->
<g id="node196" class="node">
<title>caption:cli</title>
<g id="a_node196"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-4953" rx="30.28" ry="18"/>
<text text-anchor="middle" x="2558.5" y="-4951.4" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- cluster_items:cli&#45;&gt;caption:cli -->
<!-- clean_data:cli -->
<g id="node197" class="node">
<title>clean_data:cli</title>
<g id="a_node197"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-4953" rx="37.29" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-4951.4" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;clean_data:cli -->
<!-- moderation:cli -->
<g id="node198" class="node">
<title>moderation:cli</title>
<g id="a_node198"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-4953" rx="38.53" ry="18"/>
<text text-anchor="middle" x="4010" y="-4951.4" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;moderation:cli -->
<!-- pending_chop:cli -->
<g id="node199" class="node">
<title>pending_chop:cli</title>
<g id="a_node199"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5008" rx="42.96" ry="18"/>
<text text-anchor="middle" x="141" y="-5006.4" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli -->
<g id="node200" class="node">
<title>pending_caption:cli</title>
<g id="a_node200"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5008" rx="48.62" ry="18"/>
<text text-anchor="middle" x="602" y="-5006.4" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_caption:cli -->
<!-- check_translations:cli -->
<g id="node201" class="node">
<title>check_translations:cli</title>
<g id="a_node201"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5008" rx="73.67" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5005.55" font-family="Times,serif" font-size="9.94">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;check_translations:cli -->
<!-- pending_embed:cli -->
<g id="node202" class="node">
<title>pending_embed:cli</title>
<g id="a_node202"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5008" rx="47.39" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5006.4" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_embed:cli -->
<!-- build_site -->
<g id="node203" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-1553" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-1549.3" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge356" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4954.64,-1553C5037.17,-1553 5197.39,-1553 5330.78,-1553"/>
<polygon fill="black" stroke="black" points="5331.15,-1556.5 5341.15,-1553 5331.15,-1549.5 5331.15,-1556.5"/>
</g>
<!-- caption -->
<g id="node204" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-5735" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-5731.3" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge357" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5595.35,-5735C5735.79,-5735 6177.04,-5735 6378.22,-5735"/>
<polygon fill="black" stroke="black" points="6378.5,-5738.5 6388.5,-5735 6378.5,-5731.5 6378.5,-5738.5"/>
</g>
<!-- check_translations -->
<g id="node205" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="7585" cy="-629" rx="96.68" ry="18"/>
<text text-anchor="middle" x="7585" y="-625.3" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge358" class="edge">
<title>check_translations:cli&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7659.96,-617.56C7779.34,-603.79 8012.91,-597.2 8130,-732 8186.17,-796.66 8106.06,-1440.82 8166,-1502 8205.24,-1542.05 8339.07,-1547.6 8452.49,-1544.39"/>
<polygon fill="black" stroke="black" points="8452.82,-1547.89 8462.7,-1544.08 8452.6,-1540.89 8452.82,-1547.89"/>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge359" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M7668.54,-619.86C7777.65,-610.88 7974.25,-605.54 8130,-661 8148.59,-667.62 8147.73,-679.53 8166,-687 8216.54,-707.66 8272.45,-722.3 8327.4,-732.64"/>
<polygon fill="black" stroke="black" points="8326.81,-736.1 8337.28,-734.46 8328.08,-729.21 8326.81,-736.1"/>
</g>
<!-- chop -->
<g id="node206" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-3784" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-3780.3" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge360" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4931.29,-3784C5027.68,-3784 5318.95,-3784 5464.63,-3784"/>
<polygon fill="black" stroke="black" points="5464.86,-3787.5 5474.86,-3784 5464.86,-3780.5 5464.86,-3787.5"/>
</g>
<!-- clean_data -->
<g id="node207" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-5308" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-5304.3" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge361" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5610.64,-5308C5764.55,-5308 6179.15,-5308 6374.91,-5308"/>
<polygon fill="black" stroke="black" points="6374.92,-5311.5 6384.92,-5308 6374.92,-5304.5 6374.92,-5311.5"/>
</g>
<!-- cluster_items -->
<g id="node208" class="node">
<title>cluster_items</title>
<ellipse fill="none" stroke="black" cx="4010" cy="-380" rx="73.39" ry="18"/>
<text text-anchor="middle" x="4010" y="-376.3" font-family="Times,serif" font-size="14.00">cluster_items</text>
</g>
<!-- cluster_items&#45;&gt;cluster_items.main -->
<g id="edge362" class="edge">
<title>cluster_items:cli&#45;&gt;cluster_items.main</title>
<path fill="none" stroke="black" d="M4083.55,-380C4236.32,-380 4592.43,-380 4778.88,-380"/>
<polygon fill="black" stroke="black" points="4779,-383.5 4789,-380 4779,-376.5 4779,-383.5"/>
</g>
<!-- debug_dump -->
<g id="node209" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-4924" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-4920.3" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge363" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5620.91,-4923.03C5748.39,-4921.24 6025.55,-4917.36 6230.76,-4914.49"/>
<polygon fill="black" stroke="black" points="6230.84,-4917.99 6240.79,-4914.35 6230.74,-4910.99 6230.84,-4917.99"/>
</g>
<!-- embed -->
<g id="node210" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-749" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-745.3" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge364" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5592.9,-749C5731.6,-749 6182.47,-749 6382.68,-749"/>
<polygon fill="black" stroke="black" points="6382.89,-752.5 6392.89,-749 6382.89,-745.5 6382.89,-752.5"/>
</g>
<!-- moderation -->
<g id="node211" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6481" cy="-2100" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6481" y="-2096.3" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge365" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6544.81,-2100C6690.31,-2100 7057.64,-2100 7314.06,-2100"/>
<polygon fill="black" stroke="black" points="7314.28,-2103.5 7324.28,-2100 7314.28,-2096.5 7314.28,-2103.5"/>
</g>
<!-- pending_caption -->
<g id="node212" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-3046" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-3042.3" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge366" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5632.68,-3039.88C5765.54,-3029.86 6034.57,-3009.58 6234.01,-2994.55"/>
<polygon fill="black" stroke="black" points="6234.34,-2998.03 6244.05,-2993.79 6233.82,-2991.05 6234.34,-2998.03"/>
</g>
<!-- pending_chop -->
<g id="node213" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6481" cy="-2270" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6481" y="-2266.3" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge367" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6556.02,-2270.13C6728.68,-2270.45 7162.03,-2271.23 7407.4,-2271.68"/>
<polygon fill="black" stroke="black" points="7407.49,-2275.18 7417.5,-2271.7 7407.5,-2268.18 7407.49,-2275.18"/>
</g>
<!-- pending_embed -->
<g id="node214" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-1622" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-1618.3" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge368" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5634.72,-1621.55C5761.7,-1620.87 6009.62,-1619.53 6204.27,-1618.48"/>
<polygon fill="black" stroke="black" points="6204.39,-1621.98 6214.37,-1618.43 6204.35,-1614.98 6204.39,-1621.98"/>
</g>
<!-- price_train -->
<g id="node215" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-1074" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-1070.3" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge369" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5611.71,-1074C5761.58,-1074 6153.83,-1074 6355.83,-1074"/>
<polygon fill="black" stroke="black" points="6355.89,-1077.5 6365.89,-1074 6355.89,-1070.5 6355.89,-1077.5"/>
</g>
<!-- scan_ontology -->
<g id="node216" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-278" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-274.3" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge370" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4974.7,-278C5056.61,-278 5191.82,-278 5310.54,-278"/>
<polygon fill="black" stroke="black" points="5310.87,-281.5 5320.87,-278 5310.87,-274.5 5310.87,-281.5"/>
</g>
<!-- similar -->
<g id="node217" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-899" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-895.3" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge371" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5593.5,-899C5727.88,-899 6150.66,-899 6360.06,-899"/>
<polygon fill="black" stroke="black" points="6360.17,-902.5 6370.17,-899 6360.17,-895.5 6360.17,-902.5"/>
</g>
<!-- telegram_bot -->
<g id="node218" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4010" cy="-3954" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4010" y="-3950.3" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge372" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4081.3,-3957.09C4218.87,-3963.14 4527.24,-3976.71 4723.09,-3985.33"/>
<polygon fill="black" stroke="black" points="4723.06,-3988.83 4733.2,-3985.77 4723.37,-3981.84 4723.06,-3988.83"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge373" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4081.3,-3950.99C4218.77,-3945.09 4526.79,-3931.89 4722.66,-3923.49"/>
<polygon fill="black" stroke="black" points="4722.93,-3926.99 4732.77,-3923.06 4722.63,-3919.99 4722.93,-3926.99"/>
</g>
<!-- tg_client -->
<g id="node219" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4199" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-4195.3" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge374" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M191.99,-4199C222.07,-4199 263.09,-4199 307.59,-4199"/>
<polygon fill="black" stroke="black" points="307.75,-4202.5 317.75,-4199 307.75,-4195.5 307.75,-4202.5"/>
</g>
</g>
</svg>
