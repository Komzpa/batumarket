<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10064pt" height="5857pt"
 viewBox="0.00 0.00 10064.00 5857.10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5853.1)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5853.1 10060,-5853.1 10060,4 -4,4"/>
<!-- oom_utils.prefer_oom_kill -->
<g id="node1" class="node">
<title>oom_utils.prefer_oom_kill</title>
<g id="a_node1"><a xlink:title="Make this process the first OOM victim.">
<polygon fill="none" stroke="black" points="8469.5,-1382.1 8139.5,-1382.1 8139.5,-1346.1 8469.5,-1346.1 8469.5,-1382.1"/>
<text text-anchor="middle" x="8304.5" y="-1358.22" font-family="Times,serif" font-size="24.22">oom_utils.prefer_oom_kill</text>
</a>
</g>
</g>
<!-- moderation.should_skip_text -->
<g id="node2" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node2"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="9932.5,-1485.1 9644.5,-1485.1 9644.5,-1449.1 9932.5,-1449.1 9932.5,-1485.1"/>
<text text-anchor="middle" x="9788.5" y="-1462.31" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node3" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node3"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="9912.5,-1431.1 9664.5,-1431.1 9664.5,-1395.1 9912.5,-1395.1 9912.5,-1431.1"/>
<text text-anchor="middle" x="9788.5" y="-1409.05" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason -->
<g id="node4" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node4"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9450.5,-1462.6 8860.5,-1462.6 8860.5,-1417.6 9450.5,-1417.6 9450.5,-1462.6"/>
<text text-anchor="middle" x="9155.5" y="-1431.72" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge1" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9450.76,-1452.69C9514.12,-1455.4 9578.64,-1458.16 9634.01,-1460.53"/>
<polygon fill="black" stroke="black" points="9634.11,-1464.03 9644.25,-1460.97 9634.41,-1457.04 9634.11,-1464.03"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge2" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9450.76,-1427.5C9521.98,-1424.46 9594.65,-1421.35 9654.17,-1418.8"/>
<polygon fill="black" stroke="black" points="9654.52,-1422.29 9664.36,-1418.36 9654.22,-1415.29 9654.52,-1422.29"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node5" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node5"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8471.5,-1838.1 8137.5,-1838.1 8137.5,-1802.1 8471.5,-1802.1 8471.5,-1838.1"/>
<text text-anchor="middle" x="8304.5" y="-1815.31" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge3" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8367.48,-1838.15C8469.13,-1863.61 8671.79,-1896.28 8790,-1793.1 8853.43,-1737.72 8775.32,-1674.34 8826,-1607.1 8881.46,-1533.5 8978.5,-1489.86 9052.78,-1465.76"/>
<polygon fill="black" stroke="black" points="9054.17,-1468.99 9062.64,-1462.63 9052.05,-1462.32 9054.17,-1468.99"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node6" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node6"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9332,-1011.1 8979,-1011.1 8979,-975.1 9332,-975.1 9332,-1011.1"/>
<text text-anchor="middle" x="9155.5" y="-987.22" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node7" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node7"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8442.5,-1010.1 8166.5,-1010.1 8166.5,-974.1 8442.5,-974.1 8442.5,-1010.1"/>
<text text-anchor="middle" x="8304.5" y="-987.31" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge4" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8442.85,-992.26C8585.55,-992.43 8809.76,-992.69 8968.33,-992.88"/>
<polygon fill="black" stroke="black" points="8968.68,-996.38 8978.68,-992.89 8968.68,-989.38 8968.68,-996.38"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node8" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node8"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="8522.5,-668.1 8086.5,-668.1 8086.5,-624.1 8522.5,-624.1 8522.5,-668.1"/>
<text text-anchor="middle" x="8304.5" y="-637.78" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node9" class="node">
<title>lot_io.get_seller</title>
<g id="a_node9"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="9256,-639.1 9055,-639.1 9055,-603.1 9256,-603.1 9256,-639.1"/>
<text text-anchor="middle" x="9155.5" y="-615.5" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge5" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8522.76,-639.7C8689.63,-634.78 8913.12,-628.2 9044.67,-624.33"/>
<polygon fill="black" stroke="black" points="9044.87,-627.83 9054.76,-624.03 9044.66,-620.83 9044.87,-627.83"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node10" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node10"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7498.5,-1605.6 6977.5,-1605.6 6977.5,-1558.6 7498.5,-1558.6 7498.5,-1605.6"/>
<text text-anchor="middle" x="7238" y="-1573.6" font-family="Times,serif" font-size="35.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge6" class="edge">
<title>moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7498.79,-1592.73C7594.35,-1585.65 7699.52,-1563.97 7783,-1511.1 7808,-1495.26 7794.46,-1471.62 7819,-1455.1 7909.86,-1393.92 8030.96,-1371.17 8129.36,-1363.71"/>
<polygon fill="black" stroke="black" points="8129.69,-1367.2 8139.41,-1363 8129.19,-1360.22 8129.69,-1367.2"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge7" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7498.72,-1568.07C7616.93,-1567.42 7739.98,-1576.7 7783,-1614.1 7844.25,-1667.33 7757.67,-1739.95 7819,-1793.1 7933.72,-1892.5 8126.98,-1865.35 8231.38,-1840.55"/>
<polygon fill="black" stroke="black" points="8232.31,-1843.92 8241.2,-1838.16 8230.65,-1837.12 8232.31,-1843.92"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge8" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7361.16,-1605.62C7486.16,-1621.88 7676.71,-1623.6 7783,-1511.1 7858.29,-1431.41 7740.81,-1095.94 7819,-1019.1 7865.29,-973.6 8031.36,-973.09 8156.27,-979.89"/>
<polygon fill="black" stroke="black" points="8156.14,-983.39 8166.32,-980.46 8156.54,-976.4 8156.14,-983.39"/>
</g>
<!-- post_io.read_post -->
<g id="node11" class="node">
<title>post_io.read_post</title>
<g id="a_node11"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8583.5,-3081.1 8025.5,-3081.1 8025.5,-3005.1 8583.5,-3005.1 8583.5,-3081.1"/>
<text text-anchor="middle" x="8304.5" y="-3027.93" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge9" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7498.55,-1565.16C7618.4,-1563.55 7742.97,-1572.85 7783,-1614.1 7879.77,-1713.81 7737.95,-2751.24 7819,-2864.1 7868.76,-2933.38 7948.45,-2975.89 8028.95,-3001.96"/>
<polygon fill="black" stroke="black" points="8028.17,-3005.39 8038.76,-3005.06 8030.28,-2998.71 8028.17,-3005.39"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node12" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node12"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8381,-3964.1 8228,-3964.1 8228,-3928.1 8381,-3928.1 8381,-3964.1"/>
<text text-anchor="middle" x="8304.5" y="-3942.85" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge10" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7498.73,-1564.99C7618.62,-1563.34 7743.18,-1572.65 7783,-1614.1 7857.14,-1691.27 7772.84,-3443.55 7819,-3540.1 7912.88,-3736.44 8152.05,-3872.22 8255.08,-3923.45"/>
<polygon fill="black" stroke="black" points="8253.8,-3926.72 8264.32,-3928 8256.89,-3920.44 8253.8,-3926.72"/>
</g>
<!-- lot_io.read_lots -->
<g id="node13" class="node">
<title>lot_io.read_lots</title>
<g id="a_node13"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8410.5,-1784.1 8198.5,-1784.1 8198.5,-1748.1 8410.5,-1748.1 8410.5,-1784.1"/>
<text text-anchor="middle" x="8304.5" y="-1759.94" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge11" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7498.75,-1585.46C7589.22,-1589.77 7691.06,-1598.18 7783,-1614.1 7954.96,-1643.87 8150.82,-1710.23 8245.79,-1744.57"/>
<polygon fill="black" stroke="black" points="8244.62,-1747.87 8255.21,-1748 8247.01,-1741.29 8244.62,-1747.87"/>
</g>
<!-- notes_utils.read_md -->
<g id="node25" class="node">
<title>notes_utils.read_md</title>
<g id="a_node25"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9225.5,-3559.1 9085.5,-3559.1 9085.5,-3523.1 9225.5,-3523.1 9225.5,-3559.1"/>
<text text-anchor="middle" x="9155.5" y="-3537.85" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge20" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8335.92,-3081.32C8409.35,-3170.57 8606.57,-3392.73 8826,-3493.1 8905.52,-3529.47 9006.16,-3539.59 9074.96,-3541.8"/>
<polygon fill="black" stroke="black" points="9075.2,-3545.3 9085.29,-3542.08 9075.39,-3538.31 9075.2,-3545.3"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node26" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node26"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9324.5,-3484.6 8986.5,-3484.6 8986.5,-3447.6 9324.5,-3447.6 9324.5,-3484.6"/>
<text text-anchor="middle" x="9155.5" y="-3459.65" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge21" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8343.91,-3081.14C8425.04,-3158.98 8623.15,-3335.96 8826,-3418.1 8872.95,-3437.11 8926.39,-3448.72 8976.32,-3455.78"/>
<polygon fill="black" stroke="black" points="8975.87,-3459.25 8986.25,-3457.13 8976.82,-3452.31 8975.87,-3459.25"/>
</g>
<!-- notes_utils.load_json -->
<g id="node21" class="node">
<title>notes_utils.load_json</title>
<g id="a_node21"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9279.5,-3409.1 9031.5,-3409.1 9031.5,-3373.1 9279.5,-3373.1 9279.5,-3409.1"/>
<text text-anchor="middle" x="9155.5" y="-3385.4" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge202" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8368.74,-1748.07C8470.38,-1723.31 8670.75,-1692.42 8790,-1793.1 9044.62,-2008.04 9138.43,-3167.11 9152.56,-3362.97"/>
<polygon fill="black" stroke="black" points="9149.07,-3363.31 9153.28,-3373.04 9156.06,-3362.81 9149.07,-3363.31"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node128" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node128"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9213,-1233.1 9098,-1233.1 9098,-1197.1 9213,-1197.1 9213,-1233.1"/>
<text text-anchor="middle" x="9155.5" y="-1211.85" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge201" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8384.81,-1747.99C8494.95,-1718.41 8691.73,-1648.59 8790,-1510.1 8852.16,-1422.49 8750.78,-1347.78 8826,-1271.1 8893.71,-1202.06 9013.03,-1199.3 9087.71,-1205.7"/>
<polygon fill="black" stroke="black" points="9087.66,-1209.21 9097.94,-1206.66 9088.31,-1202.24 9087.66,-1209.21"/>
</g>
<!-- caption._identify_size -->
<g id="node14" class="node">
<title>caption._identify_size</title>
<g id="a_node14"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9284,-4562.1 9027,-4562.1 9027,-4526.1 9284,-4526.1 9284,-4562.1"/>
<text text-anchor="middle" x="9155.5" y="-4538.4" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node15" class="node">
<title>caption._prepare_image</title>
<g id="a_node15"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8521.5,-4566.1 8087.5,-4566.1 8087.5,-4520.1 8521.5,-4520.1 8521.5,-4566.1"/>
<text text-anchor="middle" x="8304.5" y="-4534.66" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge12" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8521.66,-4543.35C8677.27,-4543.53 8882.55,-4543.77 9016.49,-4543.93"/>
<polygon fill="black" stroke="black" points="9016.8,-4547.43 9026.81,-4543.94 9016.81,-4540.43 9016.8,-4547.43"/>
</g>
<!-- caption._guess_chat -->
<g id="node16" class="node">
<title>caption._guess_chat</title>
<g id="a_node16"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9251.5,-4726.1 9059.5,-4726.1 9059.5,-4690.1 9251.5,-4690.1 9251.5,-4726.1"/>
<text text-anchor="middle" x="9155.5" y="-4703.93" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node17" class="node">
<title>caption.caption_file</title>
<g id="a_node17"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="7541,-4744.6 6935,-4744.6 6935,-4671.6 7541,-4671.6 7541,-4744.6"/>
<text text-anchor="middle" x="7238" y="-4693.11" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge13" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M7541.22,-4718.54C7623.01,-4711.2 7709.24,-4693.59 7783,-4657.1 7804.14,-4646.64 7798.18,-4629.19 7819,-4618.1 7897.4,-4576.33 7992.41,-4556.15 8077.44,-4546.9"/>
<polygon fill="black" stroke="black" points="8077.91,-4550.37 8087.5,-4545.86 8077.19,-4543.41 8077.91,-4550.37"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge14" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M7541.2,-4708.1C7978.25,-4708.1 8765.44,-4708.1 9049.06,-4708.1"/>
<polygon fill="black" stroke="black" points="9049.34,-4711.6 9059.34,-4708.1 9049.34,-4704.6 9049.34,-4711.6"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node18" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node18"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9252,-4508.1 9059,-4508.1 9059,-4472.1 9252,-4472.1 9252,-4508.1"/>
<text text-anchor="middle" x="9155.5" y="-4486.85" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge15" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7541.4,-4696.67C7962.67,-4678.56 8686.42,-4638.66 8790,-4575.1 8815.86,-4559.23 8800.11,-4532.92 8826,-4517.1 8892.06,-4476.71 8980.06,-4471.48 9048.35,-4475.51"/>
<polygon fill="black" stroke="black" points="9048.49,-4479.03 9058.7,-4476.2 9048.96,-4472.05 9048.49,-4479.03"/>
</g>
<!-- caption_io.has_caption -->
<g id="node19" class="node">
<title>caption_io.has_caption</title>
<g id="a_node19"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8382,-5143.1 8227,-5143.1 8227,-5107.1 8382,-5107.1 8382,-5143.1"/>
<text text-anchor="middle" x="8304.5" y="-5121.85" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge16" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7541.04,-4735.01C7630.76,-4757.73 7721.41,-4797.88 7783,-4868.1 7851.22,-4945.88 7742.29,-5028.67 7819,-5098.1 7932.46,-5200.78 8128.83,-5171.34 8233.33,-5145.58"/>
<polygon fill="black" stroke="black" points="8234.31,-5148.94 8243.15,-5143.1 8232.6,-5142.15 8234.31,-5148.94"/>
</g>
<!-- caption_io.write_caption -->
<g id="node20" class="node">
<title>caption_io.write_caption</title>
<g id="a_node20"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8471,-4202.1 8138,-4202.1 8138,-4166.1 8471,-4166.1 8471,-4202.1"/>
<text text-anchor="middle" x="8304.5" y="-4177.94" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge17" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M7541.32,-4705.91C7631.33,-4689.71 7722.09,-4655.14 7783,-4586.1 7838.39,-4523.32 7758.63,-4269.09 7819,-4211.1 7862.28,-4169.51 8007.49,-4165.85 8127.75,-4170.79"/>
<polygon fill="black" stroke="black" points="8127.69,-4174.29 8137.83,-4171.22 8127.99,-4167.29 8127.69,-4174.29"/>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge18" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7541.09,-4708.64C7632.2,-4692.81 7723.67,-4657.77 7783,-4586.1 7860.98,-4491.89 7734.2,-3574.21 7819,-3486.1 7839.7,-3464.59 8687.2,-3416.42 9021.19,-3398.23"/>
<polygon fill="black" stroke="black" points="9021.61,-3401.72 9031.41,-3397.68 9021.23,-3394.73 9021.61,-3401.72"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge72" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8362.87,-5143.14C8464.58,-5171.15 8676.47,-5210.93 8790,-5098.1 8881.75,-5006.91 8735.45,-4609.48 8826,-4517.1 8888.87,-4452.95 8998.13,-4457.31 9073.26,-4470.29"/>
<polygon fill="black" stroke="black" points="9072.7,-4473.74 9083.17,-4472.08 9073.95,-4466.86 9072.7,-4473.74"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node50" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node50"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9249,-4672.1 9062,-4672.1 9062,-4636.1 9249,-4636.1 9249,-4672.1"/>
<text text-anchor="middle" x="9155.5" y="-4650.85" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge73" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8363.8,-5143.19C8465.54,-5170.74 8675.56,-5209.1 8790,-5098.1 8856.76,-5033.34 8760.1,-4746.73 8826,-4681.1 8889.15,-4618.2 8997.06,-4621.84 9071.89,-4634.34"/>
<polygon fill="black" stroke="black" points="9071.31,-4637.79 9081.76,-4636.07 9072.52,-4630.9 9071.31,-4637.79"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge80" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8471.06,-4169.55C8567.04,-4166.88 8688.57,-4173.56 8790,-4211.1 8939.9,-4266.58 9078.65,-4406.38 9131.71,-4464.32"/>
<polygon fill="black" stroke="black" points="9129.31,-4466.88 9138.63,-4471.93 9134.5,-4462.18 9129.31,-4466.88"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge81" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8471.19,-4195.67C8593.75,-4200.23 8746.6,-4196.17 8790,-4152.1 8845.73,-4095.49 8772.47,-3496.78 8826,-3438.1 8874.1,-3385.36 8952.58,-3372.66 9020.77,-3373.6"/>
<polygon fill="black" stroke="black" points="9021.11,-3377.11 9031.19,-3373.85 9021.27,-3370.11 9021.11,-3377.11"/>
</g>
<!-- caption_io._get_langs -->
<g id="node55" class="node">
<title>caption_io._get_langs</title>
<g id="a_node55"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9264.5,-4202.1 9046.5,-4202.1 9046.5,-4166.1 9264.5,-4166.1 9264.5,-4202.1"/>
<text text-anchor="middle" x="9155.5" y="-4179.31" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge79" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8471.21,-4184.1C8637.33,-4184.1 8888.95,-4184.1 9036,-4184.1"/>
<polygon fill="black" stroke="black" points="9036.41,-4187.6 9046.41,-4184.1 9036.41,-4180.6 9036.41,-4187.6"/>
</g>
<!-- notes_utils.write_json -->
<g id="node57" class="node">
<title>notes_utils.write_json</title>
<g id="a_node57"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9249.5,-1316.1 9061.5,-1316.1 9061.5,-1280.1 9249.5,-1280.1 9249.5,-1316.1"/>
<text text-anchor="middle" x="9155.5" y="-1294.05" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge82" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8471.07,-4184.18C8594.49,-4180.32 8748.55,-4165.85 8790,-4119.1 8889.92,-4006.39 8737.2,-1529.76 8826,-1408.1 8877.32,-1337.77 8975.63,-1311.81 9051.39,-1302.52"/>
<polygon fill="black" stroke="black" points="9051.91,-1305.98 9061.45,-1301.37 9051.11,-1299.03 9051.91,-1305.98"/>
</g>
<!-- notes_utils.read_text -->
<g id="node46" class="node">
<title>notes_utils.read_text</title>
<g id="a_node46"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="9895.5,-5059.1 9681.5,-5059.1 9681.5,-5023.1 9895.5,-5023.1 9895.5,-5059.1"/>
<text text-anchor="middle" x="9788.5" y="-5036.31" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge223" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9279.58,-3376.38C9348.62,-3375.24 9431.4,-3386.82 9485,-3438.1 9724.52,-3667.21 9778.93,-4817.52 9786.49,-5012.88"/>
<polygon fill="black" stroke="black" points="9783,-5013.06 9786.87,-5022.92 9789.99,-5012.79 9783,-5013.06"/>
</g>
<!-- caption.main -->
<g id="node22" class="node">
<title>caption.main</title>
<g id="a_node22"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6226.5,-4726.1 6041.5,-4726.1 6041.5,-4690.1 6226.5,-4690.1 6226.5,-4726.1"/>
<text text-anchor="middle" x="6134" y="-4701.94" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge19" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6226.59,-4708.1C6378.13,-4708.1 6687.81,-4708.1 6924.61,-4708.1"/>
<polygon fill="black" stroke="black" points="6924.77,-4711.6 6934.77,-4708.1 6924.77,-4704.6 6924.77,-4711.6"/>
</g>
<!-- post_io.get_contact -->
<g id="node23" class="node">
<title>post_io.get_contact</title>
<g id="a_node23"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7337.5,-3557.1 7138.5,-3557.1 7138.5,-3521.1 7337.5,-3521.1 7337.5,-3557.1"/>
<text text-anchor="middle" x="7238" y="-3534.31" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node24" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node24"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7409.5,-3615.1 7066.5,-3615.1 7066.5,-3575.1 7409.5,-3575.1 7409.5,-3615.1"/>
<text text-anchor="middle" x="7238" y="-3588.02" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge220" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9225.61,-3538.13C9300.24,-3538.92 9417.46,-3552.38 9485,-3622.1 9688.75,-3832.41 9771.92,-4831.15 9785.47,-5012.74"/>
<polygon fill="black" stroke="black" points="9781.99,-5013.11 9786.22,-5022.83 9788.97,-5012.6 9781.99,-5013.11"/>
</g>
<!-- post_io.write_post -->
<g id="node27" class="node">
<title>post_io.write_post</title>
<g id="a_node27"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6300,-3618.1 5968,-3618.1 5968,-3572.1 6300,-3572.1 6300,-3618.1"/>
<text text-anchor="middle" x="6134" y="-3586.66" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge22" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6300.11,-3586.41C6411.17,-3580.6 6560.88,-3572.81 6693,-3566.1 6843.88,-3558.43 7018.31,-3549.82 7128.13,-3544.42"/>
<polygon fill="black" stroke="black" points="7128.41,-3547.91 7138.23,-3543.93 7128.07,-3540.92 7128.41,-3547.91"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge23" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6300.28,-3595.1C6503.28,-3595.1 6846.43,-3595.1 7056.25,-3595.1"/>
<polygon fill="black" stroke="black" points="7056.45,-3598.6 7066.45,-3595.1 7056.45,-3591.6 7056.45,-3598.6"/>
</g>
<!-- notes_utils.write_md -->
<g id="node28" class="node">
<title>notes_utils.write_md</title>
<g id="a_node28"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7351,-3669.1 7125,-3669.1 7125,-3633.1 7351,-3633.1 7351,-3669.1"/>
<text text-anchor="middle" x="7238" y="-3646.3" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge24" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6300.11,-3603.78C6411.17,-3609.59 6560.88,-3617.38 6693,-3624.1 6837.93,-3631.46 7004.58,-3639.7 7114.84,-3645.11"/>
<polygon fill="black" stroke="black" points="7114.84,-3648.62 7125,-3645.61 7115.18,-3641.63 7114.84,-3648.62"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node29" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node29"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7383,-3427.1 7093,-3427.1 7093,-3391.1 7383,-3391.1 7383,-3427.1"/>
<text text-anchor="middle" x="7238" y="-3404.93" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge25" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7383.2,-3398.34C7524.14,-3391.12 7725.62,-3390.66 7783,-3441.1 7847.55,-3497.84 7771.13,-3559.72 7819,-3631.1 7924.13,-3787.85 8136.4,-3884.33 8241.56,-3924.47"/>
<polygon fill="black" stroke="black" points="8240.5,-3927.81 8251.09,-3928.06 8242.97,-3921.26 8240.5,-3927.81"/>
</g>
<!-- similar._iter_lots -->
<g id="node30" class="node">
<title>similar._iter_lots</title>
<g id="a_node30"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7392,-1790.6 7084,-1790.6 7084,-1743.6 7392,-1743.6 7392,-1790.6"/>
<text text-anchor="middle" x="7238" y="-1758.6" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge26" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7392.08,-1774.72C7586.71,-1784.41 7922.03,-1801.1 8127.16,-1811.32"/>
<polygon fill="black" stroke="black" points="8127.28,-1814.83 8137.44,-1811.83 8127.62,-1807.83 8127.28,-1814.83"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge27" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7392.33,-1779.55C7533.98,-1787.34 7730.21,-1787.43 7783,-1734.1 7838.96,-1677.56 7762.9,-1075.49 7819,-1019.1 7864.81,-973.04 8031.21,-972.67 8156.32,-979.66"/>
<polygon fill="black" stroke="black" points="8156.2,-983.16 8166.39,-980.24 8156.61,-976.17 8156.2,-983.16"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge28" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7356.26,-1743.56C7481.84,-1725.95 7677.26,-1721.83 7783,-1838.1 7859.75,-1922.48 7752.17,-2771.65 7819,-2864.1 7869.11,-2933.4 7949.13,-2975.91 8029.81,-3001.97"/>
<polygon fill="black" stroke="black" points="8029.06,-3005.41 8039.65,-3005.07 8031.17,-2998.73 8029.06,-3005.41"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge29" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7392.01,-1765.67C7534.52,-1767.97 7732.4,-1781.68 7783,-1838.1 7846.15,-1908.5 7778.1,-3454.82 7819,-3540.1 7913.12,-3736.32 8152.16,-3872.17 8255.11,-3923.43"/>
<polygon fill="black" stroke="black" points="8253.83,-3926.7 8264.35,-3927.98 8256.93,-3920.42 8253.83,-3926.7"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge30" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7392.08,-1766.95C7607.57,-1766.75 7995.53,-1766.38 8188.3,-1766.2"/>
<polygon fill="black" stroke="black" points="8188.46,-1769.7 8198.46,-1766.19 8188.45,-1762.7 8188.46,-1769.7"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node31" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node31"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8433,-1501.6 8176,-1501.6 8176,-1464.6 8433,-1464.6 8433,-1501.6"/>
<text text-anchor="middle" x="8304.5" y="-1476.65" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge31" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7392.14,-1773.47C7502.52,-1774.31 7654.13,-1767.68 7783,-1734.1 7976.42,-1683.68 8184.05,-1559.7 8266.61,-1507.21"/>
<polygon fill="black" stroke="black" points="8268.59,-1510.09 8275.13,-1501.76 8264.82,-1504.2 8268.59,-1510.09"/>
</g>
<!-- similar.main -->
<g id="node32" class="node">
<title>similar.main</title>
<g id="a_node32"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6239,-2188.1 6029,-2188.1 6029,-2146.1 6239,-2146.1 6239,-2188.1"/>
<text text-anchor="middle" x="6134" y="-2159.01" font-family="Times,serif" font-size="31.36">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge32" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6239.12,-2185.19C6357.49,-2199.24 6548.34,-2200.96 6657,-2092.1 6737.55,-2011.4 6611.93,-1918.27 6693,-1838.1 6796.49,-1735.74 6970.3,-1730.29 7093.58,-1742.52"/>
<polygon fill="black" stroke="black" points="7093.54,-1746.04 7103.85,-1743.59 7094.27,-1739.07 7093.54,-1746.04"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node33" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node33"><a xlink:title="Return mapping of lot id to embedding vector.&#10;&#10;Vectors are stored as ``numpy.float16`` arrays which halves the&#10;memory footprint compared to ``float32`` and drastically reduces&#10;memory usage compared to plain Python lists.">
<polygon fill="none" stroke="black" points="8590.5,-2644.6 8018.5,-2644.6 8018.5,-2597.6 8590.5,-2597.6 8590.5,-2644.6"/>
<text text-anchor="middle" x="8304.5" y="-2612.6" font-family="Times,serif" font-size="35.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge33" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6239.26,-2179.11C6353.14,-2197 6535.5,-2240.13 6657,-2341.1 6682.4,-2362.2 6665.59,-2387.67 6693,-2406.1 7097.89,-2678.28 7365.04,-2284.43 7783,-2536.1 7807.08,-2550.59 7794.56,-2574.21 7819,-2588.1 7909.45,-2639.48 8025.26,-2649 8120.97,-2645.07"/>
<polygon fill="black" stroke="black" points="8121.22,-2648.56 8131.05,-2644.6 8120.9,-2641.57 8121.22,-2648.56"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node34" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node34"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7487,-2397.1 6989,-2397.1 6989,-2349.1 7487,-2349.1 7487,-2397.1"/>
<text text-anchor="middle" x="7238" y="-2363.98" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge34" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6187.8,-2188.16C6285.61,-2226.12 6502.43,-2305.3 6693,-2340.1 6785.3,-2356.95 6887.71,-2365.7 6978.55,-2370.09"/>
<polygon fill="black" stroke="black" points="6978.57,-2373.6 6988.72,-2370.57 6978.89,-2366.6 6978.57,-2373.6"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node35" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node35"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7386,-2331.1 7090,-2331.1 7090,-2295.1 7386,-2295.1 7386,-2331.1"/>
<text text-anchor="middle" x="7238" y="-2307.8" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge35" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6214.23,-2188.2C6321.78,-2215.88 6520.38,-2263.55 6693,-2286.1 6822.57,-2303.02 6970.77,-2309.54 7079.73,-2311.95"/>
<polygon fill="black" stroke="black" points="7079.74,-2315.46 7089.81,-2312.17 7079.89,-2308.46 7079.74,-2315.46"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node36" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node36"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7405.5,-2185.1 7070.5,-2185.1 7070.5,-2149.1 7405.5,-2149.1 7405.5,-2185.1"/>
<text text-anchor="middle" x="7238" y="-2161.8" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge36" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6239.17,-2167.1C6427.77,-2167.1 6827.75,-2167.1 7059.96,-2167.1"/>
<polygon fill="black" stroke="black" points="7060.2,-2170.6 7070.2,-2167.1 7060.2,-2163.6 7060.2,-2170.6"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node37" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node37"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7377,-2277.1 7099,-2277.1 7099,-2241.1 7377,-2241.1 7377,-2277.1"/>
<text text-anchor="middle" x="7238" y="-2254.31" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge37" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6239.24,-2179.83C6351.23,-2193.15 6534.49,-2213.92 6693,-2227.1 6826.71,-2238.21 6979.23,-2246.83 7088.68,-2252.31"/>
<polygon fill="black" stroke="black" points="7088.64,-2255.81 7098.81,-2252.81 7088.99,-2248.82 7088.64,-2255.81"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node38" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node38"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="8761.5,-761.6 7847.5,-761.6 7847.5,-686.6 8761.5,-686.6 8761.5,-761.6"/>
<text text-anchor="middle" x="8304.5" y="-709.1" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge38" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6239.13,-2186.94C6359.37,-2203.14 6553.81,-2207.39 6657,-2092.1 6740.33,-1998.99 6611.1,-1062.46 6693,-968.1 6839,-799.87 7415.17,-746.29 7836.79,-729.96"/>
<polygon fill="black" stroke="black" points="7837.18,-733.45 7847.04,-729.57 7836.91,-726.45 7837.18,-733.45"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node39" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node39"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7476.5,-1725.1 6999.5,-1725.1 6999.5,-1685.1 7476.5,-1685.1 7476.5,-1725.1"/>
<text text-anchor="middle" x="7238" y="-1698.02" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge39" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6239.11,-2185.87C6358.17,-2200.73 6550.33,-2203.39 6657,-2092.1 6712.32,-2034.37 6635.15,-1789.29 6693,-1734.1 6735.76,-1693.29 6866.44,-1685.42 6989,-1688.05"/>
<polygon fill="black" stroke="black" points="6989.23,-1691.56 6999.31,-1688.29 6989.4,-1684.56 6989.23,-1691.56"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node40" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node40"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9485,-481.6 8826,-481.6 8826,-426.6 9485,-426.6 9485,-481.6"/>
<text text-anchor="middle" x="9155.5" y="-443.1" font-family="Times,serif" font-size="43.12">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge40" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6239.24,-2187.04C6359.59,-2203.34 6554.13,-2207.68 6657,-2092.1 6757.65,-1979.01 6592.88,-843.65 6693,-730.1 7017.12,-362.48 7408.32,-879.03 7783,-563.1 7821.68,-530.48 7777.97,-484.69 7819,-455.1 7897.85,-398.22 8446.62,-415.44 8815.73,-434.08"/>
<polygon fill="black" stroke="black" points="8815.61,-437.58 8825.77,-434.59 8815.96,-430.59 8815.61,-437.58"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge281" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8590.78,-2633.28C8660.98,-2647.24 8732.44,-2671.84 8790,-2714.1 9025.37,-2886.89 9124.63,-3258.66 9148.54,-3363.22"/>
<polygon fill="black" stroke="black" points="9145.14,-3364.04 9150.74,-3373.03 9151.97,-3362.51 9145.14,-3364.04"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge282" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7487.34,-2363.81C7898.77,-2350.64 8686.92,-2335.61 8790,-2409.1 9123.79,-2647.04 9152.37,-3227.31 9154.43,-3362.58"/>
<polygon fill="black" stroke="black" points="9150.93,-3362.96 9154.55,-3372.92 9157.93,-3362.88 9150.93,-3362.96"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node44" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node44"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8381,-4110.1 8228,-4110.1 8228,-4074.1 8381,-4074.1 8381,-4110.1"/>
<text text-anchor="middle" x="8304.5" y="-4088.4" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge284" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7386.21,-2298.95C7528.44,-2288.92 7729.92,-2285.53 7783,-2340.1 7846.28,-2405.14 7762.22,-3902.31 7819,-3973.1 7913.99,-4091.52 8106.03,-4103.57 8217.7,-4099.39"/>
<polygon fill="black" stroke="black" points="8218.07,-4102.87 8227.91,-4098.95 8217.77,-4095.88 8218.07,-4102.87"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge285" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7386.08,-2306.11C7768.41,-2287.62 8765.69,-2237.11 8790,-2212.1 8852.32,-2147.97 8772.15,-1479.49 8826,-1408.1 8878.25,-1338.82 8975.94,-1312.69 9051.26,-1303.08"/>
<polygon fill="black" stroke="black" points="9051.75,-1306.54 9061.26,-1301.88 9050.92,-1299.59 9051.75,-1306.54"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node165" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node165"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8406.5,-2331.1 8202.5,-2331.1 8202.5,-2295.1 8406.5,-2295.1 8406.5,-2331.1"/>
<text text-anchor="middle" x="8304.5" y="-2309.4" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge286" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7386.18,-2313.1C7601.85,-2313.1 7999.04,-2313.1 8192.19,-2313.1"/>
<polygon fill="black" stroke="black" points="8192.36,-2316.6 8202.36,-2313.1 8192.36,-2309.6 8192.36,-2316.6"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge287" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7405.84,-2163.98C7546.95,-2165.33 7733.82,-2177.83 7783,-2232.1 7847.97,-2303.78 7758.52,-3897.59 7819,-3973.1 7913.91,-4091.59 8105.98,-4103.61 8217.67,-4099.41"/>
<polygon fill="black" stroke="black" points="8218.05,-4102.89 8227.89,-4098.97 8217.75,-4095.9 8218.05,-4102.89"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge288" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7405.66,-2163.51C7803.71,-2154.74 8777.76,-2132.09 8790,-2120.1 8846.58,-2064.65 8778.12,-1471.2 8826,-1408.1 8878.45,-1338.97 8976.12,-1312.82 9051.37,-1303.16"/>
<polygon fill="black" stroke="black" points="9051.86,-1306.63 9061.37,-1301.96 9051.02,-1299.68 9051.86,-1306.63"/>
</g>
<!-- similar_utils._more_user_path -->
<g id="node166" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node166"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8419.5,-2203.1 8189.5,-2203.1 8189.5,-2167.1 8419.5,-2167.1 8419.5,-2203.1"/>
<text text-anchor="middle" x="8304.5" y="-2181.4" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge289" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7405.62,-2169.91C7619.97,-2173.54 7987.42,-2179.75 8179.03,-2182.99"/>
<polygon fill="black" stroke="black" points="8179.09,-2186.49 8189.14,-2183.16 8179.2,-2179.49 8179.09,-2186.49"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node167" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node167"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9396.5,-744.1 8914.5,-744.1 8914.5,-704.1 9396.5,-704.1 9396.5,-744.1"/>
<text text-anchor="middle" x="9155.5" y="-717.02" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge290" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M8761.69,-724.1C8810.64,-724.1 8859.02,-724.1 8904.22,-724.1"/>
<polygon fill="black" stroke="black" points="8904.42,-727.6 8914.42,-724.1 8904.42,-720.6 8904.42,-727.6"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node41" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node41"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7387.5,-4321.1 7088.5,-4321.1 7088.5,-4285.1 7387.5,-4285.1 7387.5,-4321.1"/>
<text text-anchor="middle" x="7238" y="-4297.22" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node42" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node42"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8525.5,-4864.1 8083.5,-4864.1 8083.5,-4828.1 8525.5,-4828.1 8525.5,-4864.1"/>
<text text-anchor="middle" x="8304.5" y="-4840.5" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node43" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node43"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7492,-4382.6 6984,-4382.6 6984,-4339.6 7492,-4339.6 7492,-4382.6"/>
<text text-anchor="middle" x="7238" y="-4352.95" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge42" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7492.04,-4378.23C7613.72,-4380.42 7741.98,-4371.77 7783,-4330.1 7851.41,-4260.59 7750.22,-3522.24 7819,-3453.1 7983.93,-3287.28 8716.78,-3344.1 9021.22,-3375.8"/>
<polygon fill="black" stroke="black" points="9021.11,-3379.3 9031.42,-3376.87 9021.84,-3372.34 9021.11,-3379.3"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge41" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7492.11,-4376.01C7612.52,-4377.43 7739.59,-4368.74 7783,-4330.1 7852.42,-4268.3 7749.86,-4186.21 7819,-4124.1 7875.73,-4073.14 8094.24,-4078.22 8217.55,-4085.59"/>
<polygon fill="black" stroke="black" points="8217.52,-4089.09 8227.72,-4086.21 8217.95,-4082.11 8217.52,-4089.09"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node134" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node134"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9280.5,-3667.1 9030.5,-3667.1 9030.5,-3631.1 9280.5,-3631.1 9280.5,-3667.1"/>
<text text-anchor="middle" x="9155.5" y="-3642.94" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge207" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8368.3,-4110.18C8471.14,-4135.56 8675.47,-4167.49 8790,-4060.1 8879.91,-3975.78 8750.99,-3882.91 8826,-3785.1 8874.52,-3721.83 8957.71,-3687.78 9028.24,-3669.57"/>
<polygon fill="black" stroke="black" points="9029.25,-3672.93 9038.1,-3667.11 9027.55,-3666.14 9029.25,-3672.93"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node45" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node45"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9381.5,-4988.1 8929.5,-4988.1 8929.5,-4944.1 9381.5,-4944.1 9381.5,-4988.1"/>
<text text-anchor="middle" x="9155.5" y="-4957.78" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge43" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9341.98,-4988.14C9448.52,-5000.8 9579.03,-5016.32 9671.19,-5027.27"/>
<polygon fill="black" stroke="black" points="9671.04,-5030.78 9681.38,-5028.48 9671.87,-5023.83 9671.04,-5030.78"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge219" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9681.28,-5056.36C9649.38,-5066.82 9685.12,-5077.1 9788.5,-5077.1 9878.15,-5077.1 9916.93,-5069.37 9904.85,-5060.49"/>
<polygon fill="black" stroke="black" points="9906.27,-5057.29 9895.72,-5056.36 9903.38,-5063.67 9906.27,-5057.29"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node47" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node47"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7485,-4514.6 6991,-4514.6 6991,-4465.6 7485,-4465.6 7485,-4514.6"/>
<text text-anchor="middle" x="7238" y="-4480.92" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge44" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7485.02,-4504.84C7608.3,-4506.48 7740.31,-4497.54 7783,-4456.1 7845.6,-4395.31 7762.07,-4131.22 7819,-4065.1 7917.65,-3950.53 8107.02,-3936.87 8217.53,-3939.78"/>
<polygon fill="black" stroke="black" points="8217.54,-3943.28 8227.65,-3940.09 8217.76,-3936.28 8217.54,-3943.28"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge45" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7485.22,-4483.88C7588.34,-4481.56 7709.48,-4479.23 7819,-4478.1 8250.53,-4473.63 8358.5,-4470.99 8790,-4478.1 8877.22,-4479.53 8976.13,-4482.9 9048.88,-4485.7"/>
<polygon fill="black" stroke="black" points="9048.85,-4489.2 9058.97,-4486.09 9049.12,-4482.21 9048.85,-4489.2"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge46" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7485.13,-4474.88C7608.66,-4473.07 7740.88,-4481.99 7783,-4524.1 7873.38,-4614.46 7728.31,-5008.04 7819,-5098.1 7929.03,-5207.36 8131.3,-5173.46 8236.29,-5145.78"/>
<polygon fill="black" stroke="black" points="8237.4,-5149.11 8246.14,-5143.13 8235.58,-5142.35 8237.4,-5149.11"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge50" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7485.31,-4504.38C7608.24,-4505.83 7739.82,-4496.86 7783,-4456.1 7880.32,-4364.21 7720.61,-4247.85 7819,-4157.1 7898.37,-4083.89 8713.13,-4194.92 8790,-4119.1 8843.94,-4065.88 8774.87,-3494.01 8826,-3438.1 8874.17,-3385.42 8952.65,-3372.72 9020.82,-3373.64"/>
<polygon fill="black" stroke="black" points="9021.16,-3377.15 9031.24,-3373.89 9021.32,-3370.16 9021.16,-3377.15"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge48" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7485.13,-4504.57C7608.23,-4506.11 7740.02,-4497.16 7783,-4456.1 7890.31,-4353.57 7711.87,-4226.81 7819,-4124.1 7874.12,-4071.25 8093.85,-4077.17 8217.61,-4085.15"/>
<polygon fill="black" stroke="black" points="8217.61,-4088.66 8227.82,-4085.83 8218.07,-4081.67 8217.61,-4088.66"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge49" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7485.3,-4498.44C7605.45,-4497.86 7734.39,-4488.84 7783,-4456.1 7813.66,-4435.44 7787.71,-4400.79 7819,-4381.1 8184.26,-4151.26 8359.19,-4355.77 8790,-4381.1 9100.5,-4399.35 9228.83,-4286.69 9485,-4463.1 9686.2,-4601.64 9763.1,-4917.03 9782.33,-5012.92"/>
<polygon fill="black" stroke="black" points="9778.94,-5013.86 9784.3,-5023 9785.81,-5012.52 9778.94,-5013.86"/>
</g>
<!-- caption_io.read_caption -->
<g id="node48" class="node">
<title>caption_io.read_caption</title>
<g id="a_node48"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8470,-4257.6 8139,-4257.6 8139,-4220.6 8470,-4220.6 8470,-4257.6"/>
<text text-anchor="middle" x="8304.5" y="-4232.65" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge47" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7485.26,-4503.13C7607.53,-4504.13 7738.49,-4495.13 7783,-4456.1 7845.65,-4401.15 7756.51,-4327.22 7819,-4272.1 7864.05,-4232.36 8009.06,-4226.64 8128.79,-4229.37"/>
<polygon fill="black" stroke="black" points="8128.74,-4232.87 8138.82,-4229.62 8128.91,-4225.87 8128.74,-4232.87"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge75" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8408.75,-4257.65C8507.64,-4276.52 8660.54,-4308.56 8790,-4348.1 8905.07,-4383.24 9035.45,-4437.75 9104.83,-4467.99"/>
<polygon fill="black" stroke="black" points="9103.64,-4471.29 9114.21,-4472.09 9106.45,-4464.88 9103.64,-4471.29"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge78" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8470.21,-4252.12C8592.91,-4257.83 8746.42,-4255.17 8790,-4211.1 8850.46,-4149.96 8768.18,-3501.73 8826,-3438.1 8874.1,-3385.16 8952.8,-3372.52 9021.11,-3373.53"/>
<polygon fill="black" stroke="black" points="9021.03,-3377.03 9031.11,-3373.78 9021.2,-3370.03 9021.03,-3377.03"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge77" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8470.04,-4251.95C8592.64,-4257.56 8746.1,-4254.85 8790,-4211.1 8882.88,-4118.52 8742.02,-3722.81 8826,-3622.1 8886.03,-3550.1 8998.87,-3536.39 9075.36,-3536.27"/>
<polygon fill="black" stroke="black" points="9075.41,-3539.77 9085.43,-3536.34 9075.45,-3532.77 9075.41,-3539.77"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge76" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8470.25,-4244.98C8576.5,-4257.78 8709.42,-4292.21 8790,-4381.1 8847.73,-4444.77 8767.08,-4508.52 8826,-4571.1 8883.38,-4632.04 8978.48,-4650.88 9051.63,-4655.59"/>
<polygon fill="black" stroke="black" points="9051.62,-4659.09 9061.8,-4656.16 9052.01,-4652.1 9051.62,-4659.09"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge74" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8470.09,-4230.25C8563.86,-4225.04 8683.54,-4218.11 8790,-4211.1 8872.23,-4205.67 8964.83,-4198.81 9036.12,-4193.35"/>
<polygon fill="black" stroke="black" points="9036.77,-4196.81 9046.48,-4192.56 9036.24,-4189.83 9036.77,-4196.81"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node49" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node49"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7453.5,-4577.1 7022.5,-4577.1 7022.5,-4533.1 7453.5,-4533.1 7453.5,-4577.1"/>
<text text-anchor="middle" x="7238" y="-4546.78" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge51" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7453.81,-4570.24C7585.29,-4574.4 7736.9,-4568.3 7783,-4523.1 7855.9,-4451.62 7752.9,-4142.9 7819,-4065.1 7917.02,-3949.71 8107.06,-3936.41 8217.76,-3939.59"/>
<polygon fill="black" stroke="black" points="8217.78,-3943.09 8227.89,-3939.93 8218.02,-3936.1 8217.78,-3943.09"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge52" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7453.76,-4555.43C7554.49,-4552.29 7675.7,-4543.76 7783,-4523.1 7799.56,-4519.91 7802.37,-4513.93 7819,-4511.1 8054.42,-4470.99 8775.57,-4481.83 9048.42,-4487.59"/>
<polygon fill="black" stroke="black" points="9048.64,-4491.1 9058.72,-4487.81 9048.79,-4484.1 9048.64,-4491.1"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge55" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7320.15,-4577.1C7436.71,-4603.4 7651.91,-4631.43 7783,-4523.1 7833.19,-4481.62 7770.06,-4424.04 7819,-4381.1 8145.66,-4094.48 8494.36,-4584.6 8790,-4266.1 8852.65,-4198.6 8764.17,-3506.34 8826,-3438.1 8874.11,-3384.99 8953.02,-3372.39 9021.44,-3373.48"/>
<polygon fill="black" stroke="black" points="9021.37,-3376.98 9031.45,-3373.73 9021.55,-3369.98 9021.37,-3376.98"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge54" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7453.52,-4569.94C7584.88,-4573.97 7736.45,-4567.85 7783,-4523.1 7841.91,-4466.45 7762.24,-4215.9 7819,-4157.1 7921.6,-4050.81 8108.67,-4059.01 8217.91,-4075.15"/>
<polygon fill="black" stroke="black" points="8217.49,-4078.62 8227.91,-4076.68 8218.55,-4071.7 8217.49,-4078.62"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge53" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7448.18,-4577.1C7558.39,-4587.96 7695.88,-4600.36 7819,-4608.1 8278.2,-4636.96 8827.45,-4648.71 9051.61,-4652.54"/>
<polygon fill="black" stroke="black" points="9051.66,-4656.04 9061.72,-4652.71 9051.78,-4649.04 9051.66,-4656.04"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node51" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node51"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9428,-1661.6 8883,-1661.6 8883,-1616.6 9428,-1616.6 9428,-1661.6"/>
<text text-anchor="middle" x="9155.5" y="-1630.72" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge56" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9209.86,-1616.55C9276.7,-1587.27 9393.56,-1532.56 9485,-1471.1 9502.52,-1459.32 9501.6,-1448.43 9521,-1440.1 9562.22,-1422.38 9610.23,-1414.18 9654.05,-1410.84"/>
<polygon fill="black" stroke="black" points="9654.47,-1414.32 9664.21,-1410.15 9653.99,-1407.34 9654.47,-1414.32"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node52" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node52"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9309.5,-3830.1 9001.5,-3830.1 9001.5,-3794.1 9309.5,-3794.1 9309.5,-3830.1"/>
<text text-anchor="middle" x="9155.5" y="-3806.5" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node53" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node53"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7684.5,-3843.1 6791.5,-3843.1 6791.5,-3781.1 7684.5,-3781.1 7684.5,-3843.1"/>
<text text-anchor="middle" x="7238" y="-3799.9" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge57" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7684.53,-3807.03C7729.18,-3798.55 7764.78,-3785.81 7783,-3767.1 7883.14,-3664.24 7723,-3228.83 7819,-3122.1 7868.97,-3066.53 7941.56,-3039.76 8015.4,-3028.58"/>
<polygon fill="black" stroke="black" points="8015.94,-3032.04 8025.35,-3027.17 8014.96,-3025.11 8015.94,-3032.04"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge58" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7658.52,-3843.12C7700.62,-3847.34 7742.69,-3851.99 7783,-3857.1 7937.03,-3876.6 8115.07,-3909.25 8217.93,-3929.11"/>
<polygon fill="black" stroke="black" points="8217.47,-3932.59 8227.95,-3931.06 8218.8,-3925.72 8217.47,-3932.59"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge62" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7368.08,-3843.1C7491.92,-3864.42 7675.51,-3872.52 7783,-3767.1 7839.14,-3712.04 7761.12,-3468.31 7819,-3415.1 8190.4,-3073.63 8895.09,-3295.22 9098.34,-3369.46"/>
<polygon fill="black" stroke="black" points="9097.32,-3372.82 9107.91,-3372.99 9099.74,-3366.25 9097.32,-3372.82"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge61" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7684.54,-3836.29C7719.81,-3849.78 7753.23,-3867.37 7783,-3890.1 7814.96,-3914.49 7788.28,-3947.15 7819,-3973.1 7932.68,-4069.08 8111.95,-4089.83 8217.6,-4093.1"/>
<polygon fill="black" stroke="black" points="8217.82,-4096.6 8227.9,-4093.37 8218,-4089.61 8217.82,-4096.6"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge59" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7684.65,-3806.79C7729.18,-3798.34 7764.72,-3785.67 7783,-3767.1 7867.36,-3681.38 7737.15,-3315.21 7819,-3227.1 8115.63,-2907.79 8465.94,-3381.52 8790,-3090.1 9013.18,-2889.39 9130.48,-1868.39 9151.17,-1671.85"/>
<polygon fill="black" stroke="black" points="9154.65,-1672.16 9152.21,-1661.85 9147.69,-1671.44 9154.65,-1672.16"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge60" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7684.78,-3812.1C8102.77,-3812.1 8705.02,-3812.1 8991.36,-3812.1"/>
<polygon fill="black" stroke="black" points="8991.42,-3815.6 9001.42,-3812.1 8991.42,-3808.6 8991.42,-3815.6"/>
</g>
<!-- debug_dump.main -->
<g id="node54" class="node">
<title>debug_dump.main</title>
<g id="a_node54"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6374,-4521.6 5894,-4521.6 5894,-4458.6 6374,-4458.6 6374,-4521.6"/>
<text text-anchor="middle" x="6134" y="-4477.95" font-family="Times,serif" font-size="49.56">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge63" class="edge">
<title>debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6181.92,-4458.52C6290.43,-4382.31 6557.04,-4176.02 6657,-3926.1 6683.09,-3860.86 6643.48,-1446.93 6693,-1397.1 6718.03,-1371.91 7717.75,-1365.91 8129.27,-1364.51"/>
<polygon fill="black" stroke="black" points="8129.49,-1368.01 8139.48,-1364.48 8129.47,-1361.01 8129.49,-1368.01"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge64" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6325.37,-4521.61C6433.65,-4528.67 6565.48,-4517.56 6657,-4444.1 6698.43,-4410.83 6650.94,-4362.56 6693,-4330.1 6751.15,-4285.22 6939.08,-4284.87 7077.85,-4291.53"/>
<polygon fill="black" stroke="black" points="7078.01,-4295.04 7088.17,-4292.04 7078.36,-4288.05 7078.01,-4295.04"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge65" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6340.89,-4521.64C6447.79,-4547.82 6573.21,-4595.33 6657,-4681.1 6691.77,-4716.69 6653.09,-4757.38 6693,-4787.1 6720.26,-4807.39 7634.3,-4830.87 8072.99,-4841.01"/>
<polygon fill="black" stroke="black" points="8073.19,-4844.51 8083.27,-4841.25 8073.35,-4837.52 8073.19,-4844.51"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge66" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6374.13,-4511.21C6467.84,-4509.08 6572.84,-4493.02 6657,-4444.1 6681.3,-4429.97 6668.48,-4405.84 6693,-4392.1 6741.41,-4364.95 6859.72,-4356.18 6973.69,-4354.63"/>
<polygon fill="black" stroke="black" points="6974.03,-4358.13 6983.99,-4354.51 6973.95,-4351.13 6974.03,-4358.13"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge67" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6317.83,-4521.63C6426.95,-4548.39 6562.26,-4596.49 6657,-4681.1 6683.68,-4704.93 6662.62,-4734.2 6693,-4753.1 6742.46,-4783.86 8733.63,-4750.41 8790,-4765.1 8920.91,-4799.2 9055.27,-4890.9 9118.03,-4937.73"/>
<polygon fill="black" stroke="black" points="9116.31,-4940.82 9126.41,-4944.03 9120.52,-4935.22 9116.31,-4940.82"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge68" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6374.12,-4490.1C6553.13,-4490.1 6797.64,-4490.1 6980.68,-4490.1"/>
<polygon fill="black" stroke="black" points="6980.72,-4493.6 6990.72,-4490.1 6980.72,-4486.6 6980.72,-4493.6"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge69" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6374.29,-4504.26C6472.98,-4510.1 6588.5,-4516.93 6693,-4523.1 6797.89,-4529.28 6914.16,-4536.12 7012.19,-4541.89"/>
<polygon fill="black" stroke="black" points="7012.03,-4545.38 7022.22,-4542.48 7012.44,-4538.4 7012.03,-4545.38"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge70" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6164.1,-4458.53C6277.54,-4335.49 6684.32,-3894.63 6693,-3890.1 6728.07,-3871.75 6766.06,-3857.3 6805.1,-3845.96"/>
<polygon fill="black" stroke="black" points="6806.38,-3849.24 6815.05,-3843.15 6804.47,-3842.5 6806.38,-3849.24"/>
</g>
<!-- config_utils.load_config -->
<g id="node56" class="node">
<title>config_utils.load_config</title>
<g id="a_node56"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10005,-2946.6 9572,-2946.6 9572,-2899.6 10005,-2899.6 10005,-2946.6"/>
<text text-anchor="middle" x="9788.5" y="-2914.6" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge71" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9180.04,-4165.79C9239.62,-4118.27 9397.84,-3984.52 9485,-3839.1 9672.81,-3525.73 9760.19,-3081.3 9781.93,-2956.71"/>
<polygon fill="black" stroke="black" points="9785.42,-2957.09 9783.67,-2946.64 9778.52,-2955.9 9785.42,-2957.09"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node58" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node58"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="9335,-98.1 8976,-98.1 8976,-62.1 9335,-62.1 9335,-98.1"/>
<text text-anchor="middle" x="9155.5" y="-74.4" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node59" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node59"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6451.5,-618.6 5816.5,-618.6 5816.5,-565.6 6451.5,-565.6 6451.5,-618.6"/>
<text text-anchor="middle" x="6134" y="-581.89" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node60" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node60"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="7783,-331.6 6693,-331.6 6693,-254.6 7783,-254.6 7783,-331.6"/>
<text text-anchor="middle" x="7238" y="-277.2" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge83" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7783.06,-322.71C8164.9,-332.29 8634.06,-317.99 8790,-203.1 8826.69,-176.07 8789.64,-134.56 8826,-107.1 8887.25,-60.82 8974.52,-55.63 9043.71,-61.17"/>
<polygon fill="black" stroke="black" points="9043.51,-64.67 9053.78,-62.06 9044.13,-57.7 9043.51,-64.67"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node61" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node61"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="8517,-1235.6 8092,-1235.6 8092,-1196.6 8517,-1196.6 8517,-1235.6"/>
<text text-anchor="middle" x="8304.5" y="-1209.2" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge84" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8517.17,-1224.87C8602.11,-1229.41 8700.83,-1235.96 8790,-1245.1 8878.4,-1254.15 8978.23,-1268.99 9051.04,-1280.67"/>
<polygon fill="black" stroke="black" points="9050.7,-1284.16 9061.13,-1282.3 9051.81,-1277.25 9050.7,-1284.16"/>
</g>
<!-- price_utils.load_price_model -->
<g id="node62" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node62"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="8539,-2765.1 8070,-2765.1 8070,-2723.1 8539,-2723.1 8539,-2765.1"/>
<text text-anchor="middle" x="8304.5" y="-2736.01" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge85" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8539.08,-2735.85C8623.74,-2742.75 8716.52,-2762.69 8790,-2810.1 9006.04,-2949.47 9116.94,-3267.01 9146.38,-3363.06"/>
<polygon fill="black" stroke="black" points="9143.11,-3364.34 9149.34,-3372.91 9149.81,-3362.32 9143.11,-3364.34"/>
</g>
<!-- price_utils.predict_price -->
<g id="node63" class="node">
<title>price_utils.predict_price</title>
<g id="a_node63"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7443,-236.6 7033,-236.6 7033,-193.6 7443,-193.6 7443,-236.6"/>
<text text-anchor="middle" x="7238" y="-206.95" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node64" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node64"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8498,-194.6 8111,-194.6 8111,-155.6 8498,-155.6 8498,-194.6"/>
<text text-anchor="middle" x="8304.5" y="-168.2" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node65" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node65"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10056,-160.1 9521,-160.1 9521,-110.1 10056,-110.1 10056,-160.1"/>
<text text-anchor="middle" x="9788.5" y="-125.41" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node66" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node66"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9412,-154.1 8899,-154.1 8899,-116.1 9412,-116.1 9412,-154.1"/>
<text text-anchor="middle" x="9155.5" y="-128.37" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge86" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9412.24,-135.1C9444.67,-135.1 9477.98,-135.1 9510.72,-135.1"/>
<polygon fill="black" stroke="black" points="9510.86,-138.6 9520.86,-135.1 9510.86,-131.6 9510.86,-138.6"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node67" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node67"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6494.5,-244.6 5773.5,-244.6 5773.5,-185.6 6494.5,-185.6 6494.5,-244.6"/>
<text text-anchor="middle" x="6134" y="-203.41" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge87" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6494.69,-240.55C6554.9,-244.82 6618.59,-249.32 6682.34,-253.84"/>
<polygon fill="black" stroke="black" points="6682.35,-257.35 6692.57,-254.56 6682.84,-250.36 6682.35,-257.35"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge88" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6494.69,-215.1C6669.19,-215.1 6872.92,-215.1 7022.76,-215.1"/>
<polygon fill="black" stroke="black" points="7023,-218.6 7033,-215.1 7023,-211.6 7023,-218.6"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge89" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6494.71,-192.47C6560.64,-189.07 6628.87,-186.05 6693,-184.1 7199.04,-168.63 7794.92,-170.54 8100.4,-172.98"/>
<polygon fill="black" stroke="black" points="8100.67,-176.49 8110.7,-173.07 8100.73,-169.49 8100.67,-176.49"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge90" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6442.84,-185.59C6524.12,-178.78 6611.81,-172.3 6693,-168.1 7491.18,-126.73 8436.78,-128.19 8888.46,-131.98"/>
<polygon fill="black" stroke="black" points="8888.68,-135.48 8898.71,-132.07 8888.74,-128.48 8888.68,-135.48"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node68" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node68"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="8674.5,-61.1 7934.5,-61.1 7934.5,-3.1 8674.5,-3.1 8674.5,-61.1"/>
<text text-anchor="middle" x="8304.5" y="-20.81" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge91" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8674.8,-52.97C8775.24,-58.65 8879.87,-64.57 8965.69,-69.42"/>
<polygon fill="black" stroke="black" points="8965.61,-72.92 8975.79,-69.99 8966,-65.93 8965.61,-72.92"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node69" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node69"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7444,-3725.1 7032,-3725.1 7032,-3687.1 7444,-3687.1 7444,-3725.1"/>
<text text-anchor="middle" x="7238" y="-3699.37" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._mark_activity -->
<g id="node70" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node70"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4836.5,-4035.1 4650.5,-4035.1 4650.5,-3999.1 4836.5,-3999.1 4836.5,-4035.1"/>
<text text-anchor="middle" x="4743.5" y="-4013.4" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node71" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node71"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1393.5,-5639.1 1163.5,-5639.1 1163.5,-5603.1 1393.5,-5603.1 1393.5,-5639.1"/>
<text text-anchor="middle" x="1278.5" y="-5615.8" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node72" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node72"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="4927,-3694.6 4560,-3694.6 4560,-3657.6 4927,-3657.6 4927,-3694.6"/>
<text text-anchor="middle" x="4743.5" y="-3669.65" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node73" class="node">
<title>tg_client._write_md</title>
<g id="a_node73"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5368,-3622.1 5231,-3622.1 5231,-3586.1 5368,-3586.1 5368,-3622.1"/>
<text text-anchor="middle" x="5299.5" y="-3600.85" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge92" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5368.27,-3603.36C5495.62,-3601.99 5774.3,-3598.97 5957.73,-3596.99"/>
<polygon fill="black" stroke="black" points="5957.8,-3600.49 5967.76,-3596.88 5957.72,-3593.49 5957.8,-3600.49"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node74" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node74"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7477.5,-3942.6 6998.5,-3942.6 6998.5,-3899.6 7477.5,-3899.6 7477.5,-3942.6"/>
<text text-anchor="middle" x="7238" y="-3912.95" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge93" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7477.56,-3926.7C7712.52,-3932.22 8058.63,-3940.34 8217.75,-3944.08"/>
<polygon fill="black" stroke="black" points="8217.88,-3947.59 8227.96,-3944.32 8218.04,-3940.59 8217.88,-3947.59"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node75" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node75"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6267,-3917.1 6001,-3917.1 6001,-3881.1 6267,-3881.1 6267,-3917.1"/>
<text text-anchor="middle" x="6134" y="-3894.31" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge94" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6267.11,-3901.73C6444.85,-3905.28 6764.47,-3911.66 6988.06,-3916.13"/>
<polygon fill="black" stroke="black" points="6988.23,-3919.63 6998.3,-3916.33 6988.37,-3912.63 6988.23,-3919.63"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node76" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node76"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3128,-4203.1 2889,-4203.1 2889,-4167.1 3128,-4167.1 3128,-4203.1"/>
<text text-anchor="middle" x="3008.5" y="-4181.05" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge95" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3128.08,-4185.12C3855.2,-4185.08 7683.16,-4181.67 7783,-4115.1 7816.45,-4092.79 7787.45,-4057.02 7819,-4032.1 7933.99,-3941.25 8112.41,-3933.54 8217.63,-3938.34"/>
<polygon fill="black" stroke="black" points="8217.73,-3941.85 8227.9,-3938.86 8218.09,-3934.86 8217.73,-3941.85"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node77" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node77"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="4988,-3832.6 4499,-3832.6 4499,-3789.6 4988,-3789.6 4988,-3832.6"/>
<text text-anchor="middle" x="4743.5" y="-3802.95" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node78" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node78"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5511.5,-3477.6 5087.5,-3477.6 5087.5,-3432.6 5511.5,-3432.6 5511.5,-3477.6"/>
<text text-anchor="middle" x="5299.5" y="-3446.72" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node79" class="node">
<title>tg_client._extract_author</title>
<g id="a_node79"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6497,-3760.1 5771,-3760.1 5771,-3690.1 6497,-3690.1 6497,-3760.1"/>
<text text-anchor="middle" x="6134" y="-3711.3" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge96" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6497.36,-3718.85C6670.75,-3715.86 6872.49,-3712.38 7021.44,-3709.81"/>
<polygon fill="black" stroke="black" points="7021.68,-3713.31 7031.62,-3709.64 7021.56,-3706.31 7021.68,-3713.31"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node80" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node80"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5438.5,-3934.1 5160.5,-3934.1 5160.5,-3898.1 5438.5,-3898.1 5438.5,-3934.1"/>
<text text-anchor="middle" x="5299.5" y="-3911.31" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node81" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node81"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8452.5,-5597.1 8156.5,-5597.1 8156.5,-5561.1 8452.5,-5561.1 8452.5,-5597.1"/>
<text text-anchor="middle" x="8304.5" y="-5573.4" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node82" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node82"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="4986,-5298.6 4501,-5298.6 4501,-5249.6 4986,-5249.6 4986,-5298.6"/>
<text text-anchor="middle" x="4743.5" y="-5264.47" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge97" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4870.74,-5249.59C4915.42,-5234.22 4961.2,-5209.33 4988,-5169.1 5036.22,-5096.71 4965.9,-2102.82 5024,-2038.1 5232.28,-1806.07 7475.51,-1811.33 8127.03,-1817.83"/>
<polygon fill="black" stroke="black" points="8127.41,-1821.34 8137.45,-1817.94 8127.48,-1814.34 8127.41,-1821.34"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge98" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4819.76,-5298.64C4875.48,-5315.54 4953.61,-5336.6 5024,-5346.1 5175.91,-5366.6 7664.61,-5470.46 7783,-5373.1 7847.02,-5320.44 7758.63,-5246.9 7819,-5190.1 7925.58,-5089.81 8108.41,-5095.14 8216.4,-5109.3"/>
<polygon fill="black" stroke="black" points="8216.23,-5112.81 8226.61,-5110.69 8217.18,-5105.87 8216.23,-5112.81"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node83" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node83"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5432.5,-5429.1 5166.5,-5429.1 5166.5,-5393.1 5432.5,-5393.1 5432.5,-5429.1"/>
<text text-anchor="middle" x="5299.5" y="-5406.93" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge99" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4797.9,-5298.62C4853.25,-5322.98 4942.89,-5359.44 5024,-5379.1 5066.5,-5389.39 5113.54,-5396.41 5156.49,-5401.19"/>
<polygon fill="black" stroke="black" points="5156.13,-5404.67 5166.45,-5402.26 5156.88,-5397.71 5156.13,-5404.67"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node84" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node84"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6259.5,-5483.1 6008.5,-5483.1 6008.5,-5447.1 6259.5,-5447.1 6259.5,-5483.1"/>
<text text-anchor="middle" x="6134" y="-5460.3" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge100" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5432.68,-5420.74C5487.8,-5424.69 5552.49,-5429.23 5611,-5433.1 5742.54,-5441.79 5892.78,-5450.91 5998.2,-5457.18"/>
<polygon fill="black" stroke="black" points="5998.07,-5460.68 6008.26,-5457.78 5998.48,-5453.7 5998.07,-5460.68"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node85" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node85"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7419.5,-5597.1 7056.5,-5597.1 7056.5,-5561.1 7419.5,-5561.1 7419.5,-5597.1"/>
<text text-anchor="middle" x="7238" y="-5573.4" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge103" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6238.79,-5483.11C6350.59,-5501.87 6533.87,-5530.75 6693,-5547.1 6810.04,-5559.11 6941.75,-5567.01 7046.25,-5571.95"/>
<polygon fill="black" stroke="black" points="7046.13,-5575.45 7056.28,-5572.42 7046.45,-5568.45 7046.13,-5575.45"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge101" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7419.68,-5594.85C7539.83,-5594.71 7691.77,-5572.28 7783,-5475.1 7870.38,-5382.01 7729.07,-5280.72 7819,-5190.1 7922.62,-5085.67 8108.05,-5092.86 8216.99,-5108.39"/>
<polygon fill="black" stroke="black" points="8216.56,-5111.86 8226.96,-5109.86 8217.58,-5104.94 8216.56,-5111.86"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge102" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7419.58,-5579.1C7623.54,-5579.1 7952.21,-5579.1 8146.1,-5579.1"/>
<polygon fill="black" stroke="black" points="8146.38,-5582.6 8156.38,-5579.1 8146.38,-5575.6 8146.38,-5582.6"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node86" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node86"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="4097.5,-5609.1 3612.5,-5609.1 3612.5,-5565.1 4097.5,-5565.1 4097.5,-5609.1"/>
<text text-anchor="middle" x="3855" y="-5578.78" font-family="Times,serif" font-size="32.90">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge104" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M4097.8,-5586.52C4738.06,-5585.01 6467.88,-5580.92 7045.94,-5579.55"/>
<polygon fill="black" stroke="black" points="7046.05,-5583.05 7056.05,-5579.52 7046.04,-5576.05 7046.05,-5583.05"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node87" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node87"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7410,-5466.6 7066,-5466.6 7066,-5425.6 7410,-5425.6 7410,-5466.6"/>
<text text-anchor="middle" x="7238" y="-5438.85" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge105" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7410.06,-5450.82C7534.38,-5444.1 7695.58,-5412.32 7783,-5302.1 7868.45,-5194.37 7732.59,-4172.05 7819,-4065.1 7914.27,-3947.16 8105.76,-3934.87 8217.36,-3938.89"/>
<polygon fill="black" stroke="black" points="8217.43,-3942.39 8227.57,-3939.31 8217.72,-3935.4 8217.43,-3942.39"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge106" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7410.14,-5448.36C7697.67,-5449.25 8294.85,-5438.63 8790,-5348.1 9159.31,-5280.57 9584.25,-5121.24 9732.84,-5062.95"/>
<polygon fill="black" stroke="black" points="9734.2,-5066.17 9742.22,-5059.26 9731.64,-5059.66 9734.2,-5066.17"/>
</g>
<!-- tg_client._load_progress -->
<g id="node88" class="node">
<title>tg_client._load_progress</title>
<g id="a_node88"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2001,-4322.1 1671,-4322.1 1671,-4286.1 2001,-4286.1 2001,-4322.1"/>
<text text-anchor="middle" x="1836" y="-4297.94" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge107" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1845.55,-4322.32C1869.73,-4372.43 1943.03,-4514.54 2037,-4605.1 2491.08,-5042.68 2651.97,-5137.28 3247,-5346.1 3666.64,-5493.36 6792.27,-5663.1 7237,-5663.1 7237,-5663.1 7237,-5663.1 8305.5,-5663.1 8830.14,-5663.1 9041.38,-5896.18 9485,-5616.1 9691.16,-5485.93 9764.84,-5165.66 9782.78,-5069.1"/>
<polygon fill="black" stroke="black" points="9786.23,-5069.67 9784.57,-5059.2 9779.34,-5068.42 9786.23,-5069.67"/>
</g>
<!-- tg_client._save_progress -->
<g id="node89" class="node">
<title>tg_client._save_progress</title>
<g id="a_node89"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2518,-4127.1 2289,-4127.1 2289,-4091.1 2518,-4091.1 2518,-4127.1"/>
<text text-anchor="middle" x="2403.5" y="-4104.93" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node90" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node90"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3142,-4012.1 2875,-4012.1 2875,-3976.1 3142,-3976.1 3142,-4012.1"/>
<text text-anchor="middle" x="3008.5" y="-3988.22" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge108" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3142.12,-3991.14C3432.26,-3984.92 4145.22,-3971.1 4742.5,-3971.1 4742.5,-3971.1 4742.5,-3971.1 6135,-3971.1 6945.22,-3971.1 7925.62,-3953.43 8217.55,-3947.8"/>
<polygon fill="black" stroke="black" points="8217.71,-3951.3 8227.64,-3947.6 8217.58,-3944.3 8217.71,-3951.3"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node91" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node91"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1966.5,-3478.1 1705.5,-3478.1 1705.5,-3442.1 1966.5,-3442.1 1966.5,-3478.1"/>
<text text-anchor="middle" x="1836" y="-3454.22" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge109" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1966.81,-3449.82C2182.66,-3433.66 2629.09,-3404.1 3007.5,-3404.1 3007.5,-3404.1 3007.5,-3404.1 4744.5,-3404.1 5611.03,-3404.1 5827.17,-3437.24 6693,-3472.1 6753.55,-3474.53 7736.17,-3473.64 7783,-3512.1 7836.66,-3556.15 7777.64,-3608.33 7819,-3664.1 7924.69,-3806.61 8125.56,-3889.16 8232.45,-3924.87"/>
<polygon fill="black" stroke="black" points="8231.58,-3928.28 8242.18,-3928.08 8233.78,-3921.63 8231.58,-3928.28"/>
</g>
<!-- tg_client._save_message -->
<g id="node92" class="node">
<title>tg_client._save_message</title>
<g id="a_node92"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4463,-3756.6 3247,-3756.6 3247,-3641.6 4463,-3641.6 4463,-3756.6"/>
<text text-anchor="middle" x="3855" y="-3674.98" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge110" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3858.72,-3641.3C3878.59,-3245.25 4014.5,-934.12 4499,-475.1 4759.6,-228.2 4939.51,-360.1 5298.5,-360.1 5298.5,-360.1 5298.5,-360.1 8305.5,-360.1 8829.86,-360.1 9068.67,-68.31 9485,-387.1 9653.48,-516.1 9762.22,-1232.41 9783.62,-1384.65"/>
<polygon fill="black" stroke="black" points="9780.21,-1385.58 9785.06,-1395 9787.15,-1384.61 9780.21,-1385.58"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge112" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4119.68,-3641.58C4235.56,-3618.04 4373.56,-3592.33 4499,-3575.1 4558.42,-3566.93 5532.5,-3528.42 5575,-3486.1 5640.59,-3420.77 5543.1,-3134.01 5611,-3071.1 5654.61,-3030.69 7329.79,-3036.83 8015.43,-3041.04"/>
<polygon fill="black" stroke="black" points="8015.43,-3044.54 8025.45,-3041.11 8015.48,-3037.54 8015.43,-3044.54"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge113" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4463.21,-3735.19C5037.54,-3768.54 5923.67,-3817.94 6693,-3852.1 7177.26,-3873.59 7299.48,-3855.7 7783,-3890.1 7936.54,-3901.02 8114.73,-3922 8217.76,-3934.95"/>
<polygon fill="black" stroke="black" points="8217.44,-3938.43 8227.8,-3936.21 8218.31,-3931.49 8217.44,-3938.43"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge111" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4282.8,-3641.58C4354.89,-3632.75 4429.03,-3624.22 4499,-3617.1 5517.26,-3513.44 6758.73,-3528.95 7128.29,-3536.51"/>
<polygon fill="black" stroke="black" points="7128.37,-3540.02 7138.44,-3536.72 7128.51,-3533.02 7128.37,-3540.02"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge114" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M3989.23,-3756.67C4118.14,-3811.15 4319.81,-3893.14 4499,-3952.1 4550.61,-3969.08 4609.44,-3984.87 4656.34,-3996.65"/>
<polygon fill="black" stroke="black" points="4655.61,-4000.07 4666.16,-3999.09 4657.31,-3993.28 4655.61,-4000.07"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge115" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4463.22,-3683.34C4493.34,-3682.56 4522.28,-3681.81 4549.37,-3681.11"/>
<polygon fill="black" stroke="black" points="4549.75,-3684.6 4559.66,-3680.84 4549.57,-3677.6 4549.75,-3684.6"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge116" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4463.05,-3650.55C4475.14,-3649.71 4487.13,-3648.89 4499,-3648.1 4763.63,-3630.32 5077.9,-3614.6 5220.82,-3607.75"/>
<polygon fill="black" stroke="black" points="5220.99,-3611.24 5230.82,-3607.27 5220.66,-3604.25 5220.99,-3611.24"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge117" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4070.09,-3756.62C4194.34,-3787.42 4354.4,-3822.72 4499,-3841.1 4644.51,-3859.59 5620.2,-3886.03 5990.68,-3895.53"/>
<polygon fill="black" stroke="black" points="5990.84,-3899.03 6000.92,-3895.79 5991.02,-3892.03 5990.84,-3899.03"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge118" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4311.26,-3756.61C4400.24,-3767.85 4488.56,-3779.01 4561.89,-3788.28"/>
<polygon fill="black" stroke="black" points="4561.78,-3791.79 4572.14,-3789.57 4562.66,-3784.85 4561.78,-3791.79"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge119" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4230.43,-3641.57C4311.48,-3618.18 4393.61,-3585.3 4463,-3539.1 4484.9,-3524.51 4475.68,-3504.29 4499,-3492.1 4595.88,-3441.45 4875.69,-3439.08 5076.97,-3444.78"/>
<polygon fill="black" stroke="black" points="5076.99,-3448.28 5087.09,-3445.08 5077.2,-3441.29 5076.99,-3448.28"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge120" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4463.2,-3706.03C4876.2,-3710.74 5409.44,-3716.83 5760.85,-3720.85"/>
<polygon fill="black" stroke="black" points="5760.9,-3724.35 5770.94,-3720.96 5760.98,-3717.35 5760.9,-3724.35"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge121" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M3865.57,-3756.85C3904.17,-3972.46 4067.5,-4739.84 4499,-5169.1 4535.49,-5205.39 4586.55,-5230.01 4632.49,-5246.23"/>
<polygon fill="black" stroke="black" points="4631.61,-5249.63 4642.21,-5249.57 4633.89,-5243.01 4631.61,-5249.63"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge122" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3705.09,-3756.7C3724.06,-3767.22 3774.04,-3774.6 3855,-3774.6 3925.21,-3774.6 3972.12,-3769.05 3995.71,-3760.72"/>
<polygon fill="black" stroke="black" points="3997.15,-3763.91 4004.91,-3756.7 3994.35,-3757.49 3997.15,-3763.91"/>
</g>
<!-- tg_client._save_media -->
<g id="node93" class="node">
<title>tg_client._save_media</title>
<g id="a_node93"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="4984.5,-3943.1 4502.5,-3943.1 4502.5,-3889.1 4984.5,-3889.1 4984.5,-3943.1"/>
<text text-anchor="middle" x="4743.5" y="-3905.5" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge123" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4046.43,-3756.62C4173.74,-3793.74 4345.43,-3841.24 4499,-3875.1 4518.34,-3879.36 4538.62,-3883.42 4558.89,-3887.21"/>
<polygon fill="black" stroke="black" points="4558.36,-3890.67 4568.83,-3889.05 4559.63,-3883.79 4558.36,-3890.67"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge124" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M4925.79,-3943.17C4949.85,-3954.14 4971.77,-3969.27 4988,-3990.1 5038.94,-4055.46 4965.55,-4676.35 5024,-4735.1 5154.99,-4866.74 6507.5,-4815.41 6693,-4824.1 7177.31,-4846.78 7300.09,-4824.92 7783,-4868.1 7799.09,-4869.53 7802.88,-4871.98 7819,-4873.1 7872.82,-4876.81 8749.98,-4909.27 8790,-4873.1 8848.99,-4819.77 8769.25,-4572.79 8826,-4517.1 8889.19,-4455.08 8995.99,-4458.16 9070.61,-4470.31"/>
<polygon fill="black" stroke="black" points="9070.47,-4473.84 9080.92,-4472.08 9071.65,-4466.94 9070.47,-4473.84"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge125" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4926.75,-3943.17C4950.53,-3954.15 4972.11,-3969.29 4988,-3990.1 5072.6,-4100.87 4925.73,-5145.23 5024,-5244.1 5078.04,-5298.46 7721.06,-5347.25 7783,-5302.1 7825.25,-5271.3 7778.89,-5223.64 7819,-5190.1 7930.78,-5096.6 8110.58,-5099.28 8216.87,-5111.19"/>
<polygon fill="black" stroke="black" points="8216.58,-5114.68 8226.92,-5112.36 8217.4,-5107.72 8216.58,-5114.68"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge126" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M4984.67,-3916.1C5040.97,-3916.1 5099.34,-3916.1 5150.24,-3916.1"/>
<polygon fill="black" stroke="black" points="5150.32,-3919.6 5160.32,-3916.1 5150.32,-3912.6 5150.32,-3919.6"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node94" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node94"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6251.5,-3672.1 6016.5,-3672.1 6016.5,-3636.1 6251.5,-3636.1 6251.5,-3672.1"/>
<text text-anchor="middle" x="6134" y="-3650.05" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge127" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M4834.67,-3889.01C5024.16,-3832.53 5458.71,-3705.4 5611,-3681.1 5744.8,-3659.74 5900.09,-3654.11 6006.29,-3653.13"/>
<polygon fill="black" stroke="black" points="6006.44,-3656.63 6016.41,-3653.05 6006.39,-3649.63 6006.44,-3656.63"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge292" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6251.63,-3653.78C6461.57,-3653.21 6901.1,-3652.01 7114.94,-3651.43"/>
<polygon fill="black" stroke="black" points="7114.95,-3654.93 7124.95,-3651.4 7114.94,-3647.93 7114.95,-3654.93"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node95" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node95"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3211,-3474.1 2806,-3474.1 2806,-3432.1 3211,-3432.1 3211,-3474.1"/>
<text text-anchor="middle" x="3008.5" y="-3445.01" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge128" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3081.87,-3474.18C3205.79,-3510.27 3462.97,-3585.19 3646.46,-3638.64"/>
<polygon fill="black" stroke="black" points="3645.66,-3642.05 3656.24,-3641.49 3647.61,-3635.33 3645.66,-3642.05"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node96" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node96"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7523,-4921.1 6953,-4921.1 6953,-4877.1 7523,-4877.1 7523,-4921.1"/>
<text text-anchor="middle" x="7238" y="-4890.78" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge129" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7523.13,-4889.61C7620.56,-4871.11 7720.65,-4832.04 7783,-4753.1 7870.29,-4642.57 7760.39,-3614.15 7819,-3486.1 7904.99,-3298.23 8112.14,-3154.29 8225.74,-3086.27"/>
<polygon fill="black" stroke="black" points="8227.62,-3089.23 8234.43,-3081.11 8224.04,-3083.21 8227.62,-3089.23"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge130" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7523.2,-4910.2C7958.22,-4925.82 8744.09,-4947.95 8790,-4906.1 8854.15,-4847.61 8764.3,-4578.17 8826,-4517.1 8889.25,-4454.49 8996.88,-4457.99 9071.63,-4470.37"/>
<polygon fill="black" stroke="black" points="9071.04,-4473.82 9081.5,-4472.09 9072.24,-4466.93 9071.04,-4473.82"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge131" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7523.11,-4908.27C7607.13,-4913.58 7699.08,-4921.94 7783,-4935.1 7799.29,-4937.65 7802.63,-4942.08 7819,-4944.1 8033.16,-4970.46 8627.4,-5085.95 8790,-4944.1 8878.9,-4866.53 8740.35,-4762.24 8826,-4681.1 8889.48,-4620.96 8994.23,-4622.99 9068.35,-4634.41"/>
<polygon fill="black" stroke="black" points="9068.17,-4637.92 9078.6,-4636.07 9069.29,-4631.01 9068.17,-4637.92"/>
</g>
<!-- tg_client._download_messages -->
<g id="node97" class="node">
<title>tg_client._download_messages</title>
<g id="a_node97"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2758.5,-3877.6 2048.5,-3877.6 2048.5,-3820.6 2758.5,-3820.6 2758.5,-3877.6"/>
<text text-anchor="middle" x="2403.5" y="-3837.76" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge132" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2661.82,-3820.46C2702.88,-3805.21 2741.24,-3782.8 2770,-3750.1 2847.63,-3661.84 2724.37,-3572.67 2806,-3488.1 2808.69,-3485.31 2811.51,-3482.7 2814.45,-3480.26"/>
<polygon fill="black" stroke="black" points="2816.64,-3482.99 2822.5,-3474.16 2812.42,-3477.41 2816.64,-3482.99"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node98" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node98"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2574.5,-5685.1 2232.5,-5685.1 2232.5,-5649.1 2574.5,-5649.1 2574.5,-5685.1"/>
<text text-anchor="middle" x="2403.5" y="-5661.4" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node99" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node99"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2770,-4213.6 2037,-4213.6 2037,-4148.6 2770,-4148.6 2770,-4213.6"/>
<text text-anchor="middle" x="2403.5" y="-4168.04" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge133" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2754.93,-4148.54C2760.14,-4144.67 2765.17,-4140.52 2770,-4136.1 2826.62,-4084.22 2764.85,-4031.94 2806,-3967.1 2937.89,-3759.28 3018.84,-3724.44 3247,-3632.1 3751.57,-3427.89 3990.17,-3755.77 4463,-3486.1 4485.86,-3473.06 4477.78,-3454.66 4499,-3439.1 4923.01,-3128.11 5094.97,-3136.13 5611,-3035.1 5839.28,-2990.4 6436.39,-3068.84 6657,-2995.1 6675.47,-2988.92 6674.41,-2975.92 6693,-2970.1 6924.15,-2897.71 7541.37,-2953.23 7783,-2970.1 7877.98,-2976.72 7982,-2990.07 8071.91,-3003.57"/>
<polygon fill="black" stroke="black" points="8071.55,-3007.05 8081.96,-3005.09 8072.6,-3000.13 8071.55,-3007.05"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge134" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2770.19,-4149.74C3063.08,-4127.32 3484.62,-4101.1 3854,-4101.1 3854,-4101.1 3854,-4101.1 6135,-4101.1 6226.56,-4101.1 7701.75,-4124.31 7783,-4082.1 7807.3,-4069.47 7795.82,-4046.67 7819,-4032.1 7942.01,-3954.76 8115.44,-3942.23 8217.99,-3942.52"/>
<polygon fill="black" stroke="black" points="8217.97,-3946.02 8227.99,-3942.59 8218.02,-3939.02 8217.97,-3946.02"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge138" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2770.14,-4210.52C2782.23,-4211.11 2794.21,-4211.64 2806,-4212.1 2985.87,-4219.03 3031,-4212.83 3211,-4212.1 4742.59,-4205.87 5125.64,-4211.39 6657,-4184.1 6782.14,-4181.86 7680.06,-4224.28 7783,-4153.1 7817.76,-4129.06 7785.07,-4090.28 7819,-4065.1 7993.05,-3935.92 8638.84,-4128.43 8790,-3973.1 8873.1,-3887.7 8744.96,-3525.45 8826,-3438.1 8874.45,-3385.87 8952.74,-3373.13 9020.73,-3373.92"/>
<polygon fill="black" stroke="black" points="9021.05,-3377.43 9031.12,-3374.14 9021.2,-3370.43 9021.05,-3377.43"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge139" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2756.88,-4148.51C2761.43,-4144.63 2765.81,-4140.49 2770,-4136.1 2845.43,-4056.85 2741.39,-3733.38 2806,-3645.1 2920.49,-3488.65 3060.93,-3605.83 3211,-3483.1 4019.31,-2822 3776.03,-2271.56 4499,-1518.1 4897.22,-1103.08 5055.9,-1006.72 5611,-856.1 6076.47,-729.79 6211.05,-791.55 6693,-773.1 6814.02,-768.46 7692.4,-692.72 7783,-773.1 7883.46,-862.22 7720.07,-982.28 7819,-1073.1 7898.52,-1146.1 8705.59,-1038.81 8790,-1106.1 8838.89,-1145.07 8779.84,-1199.91 8826,-1242.1 8886.04,-1296.96 8979.2,-1308.46 9051.01,-1307.67"/>
<polygon fill="black" stroke="black" points="9051.51,-1311.16 9061.44,-1307.47 9051.37,-1304.16 9051.51,-1311.16"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge135" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2770.04,-4183.52C2808.6,-4183.78 2845.68,-4184.02 2878.62,-4184.24"/>
<polygon fill="black" stroke="black" points="2878.69,-4187.74 2888.71,-4184.31 2878.73,-4180.74 2878.69,-4187.74"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge136" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2757.34,-4148.31C2761.74,-4144.48 2765.96,-4140.41 2770,-4136.1 2868.51,-4030.76 2710.13,-3595.84 2806,-3488.1 2808.3,-3485.51 2810.72,-3483.07 2813.24,-3480.77"/>
<polygon fill="black" stroke="black" points="2815.63,-3483.34 2821.11,-3474.27 2811.17,-3477.94 2815.63,-3483.34"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge137" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2515.62,-4213.62C2874.77,-4317.32 4038.29,-4642.01 5024,-4791.1 5282.61,-4830.21 5349.85,-4818.46 5611,-4833.1 6076.2,-4859.17 6616.82,-4879.04 6942.63,-4889.88"/>
<polygon fill="black" stroke="black" points="6942.58,-4893.38 6952.69,-4890.21 6942.81,-4886.38 6942.58,-4893.38"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node100" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node100"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1635,-4123.1 922,-4123.1 922,-4049.1 1635,-4049.1 1635,-4123.1"/>
<text text-anchor="middle" x="1278.5" y="-4071.27" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge140" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1635.08,-4075.09C1855.94,-4069.18 2145.7,-4063.1 2402.5,-4063.1 2402.5,-4063.1 2402.5,-4063.1 3856,-4063.1 4853.37,-4063.1 7680.33,-3987.25 7783,-3976.1 7799.2,-3974.34 7802.82,-3971.04 7819,-3969.1 7957.89,-3952.38 8120.54,-3947.68 8217.63,-3946.43"/>
<polygon fill="black" stroke="black" points="8217.73,-3949.93 8227.69,-3946.31 8217.65,-3942.93 8217.73,-3949.93"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge141" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1504.96,-4123.1C1651.24,-4152.52 1843.25,-4201.5 2001,-4277.1 2621.3,-4574.35 2620.84,-4910.39 3247,-5195.1 3765.88,-5431.02 3933.62,-5400.71 4499,-5473.1 4960.2,-5532.14 6070.95,-5515.3 6657,-5492.1 6790.74,-5486.8 6941.41,-5474.66 7055.66,-5464.19"/>
<polygon fill="black" stroke="black" points="7056.27,-5467.64 7065.91,-5463.24 7055.63,-5460.67 7056.27,-5467.64"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge142" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1344.59,-4123.28C1420.62,-4165.21 1551.28,-4232.67 1671,-4272.1 1684.32,-4276.48 1698.46,-4280.35 1712.63,-4283.75"/>
<polygon fill="black" stroke="black" points="1711.91,-4287.17 1722.44,-4286.02 1713.49,-4280.35 1711.91,-4287.17"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge143" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1635.21,-4093.38C1855.35,-4097.89 2124.46,-4103.4 2278.42,-4106.55"/>
<polygon fill="black" stroke="black" points="2278.78,-4110.06 2288.85,-4106.77 2278.93,-4103.06 2278.78,-4110.06"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge144" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1635.25,-4051.65C1647.31,-4050.75 1659.25,-4049.89 1671,-4049.1 2105.2,-4019.66 2619.91,-4003.85 2864.57,-3997.49"/>
<polygon fill="black" stroke="black" points="2864.68,-4000.98 2874.59,-3997.23 2864.5,-3993.99 2864.68,-4000.98"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge145" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1312.59,-4048.81C1415.05,-3933.35 1725.42,-3583.58 1812.23,-3485.76"/>
<polygon fill="black" stroke="black" points="1814.99,-3487.92 1819.01,-3478.12 1809.75,-3483.28 1814.99,-3487.92"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge146" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1454.97,-4049.06C1675.9,-4002.44 2051.36,-3923.2 2257.07,-3879.79"/>
<polygon fill="black" stroke="black" points="2257.98,-3883.17 2267.04,-3877.68 2256.53,-3876.32 2257.98,-3883.17"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node101" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node101"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7554.5,-4266.6 6921.5,-4266.6 6921.5,-4205.6 7554.5,-4205.6 7554.5,-4266.6"/>
<text text-anchor="middle" x="7238" y="-4223.84" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge147" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7554.72,-4213.95C7641.43,-4191.92 7726.92,-4152.24 7783,-4082.1 7875.69,-3966.16 7749.8,-3546.42 7819,-3415.1 7903.59,-3254.55 8091.57,-3142.43 8206.92,-3085.72"/>
<polygon fill="black" stroke="black" points="8208.67,-3088.76 8216.13,-3081.23 8205.61,-3082.47 8208.67,-3088.76"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge148" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7554.67,-4242.14C7635.87,-4229.96 7718.44,-4203.92 7783,-4153.1 7816.2,-4126.96 7787,-4092.69 7819,-4065.1 7931.79,-3967.83 8111.65,-3947.54 8217.59,-3944.7"/>
<polygon fill="black" stroke="black" points="8217.69,-3948.2 8227.61,-3944.48 8217.54,-3941.2 8217.69,-3948.2"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge149" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7554.63,-4257.81C7937.92,-4285.55 8561.51,-4335.44 8790,-4381.1 8899.65,-4403.01 9023.67,-4443.6 9095.11,-4468.59"/>
<polygon fill="black" stroke="black" points="9094.24,-4472 9104.84,-4472.01 9096.56,-4465.39 9094.24,-4472"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge150" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7554.81,-4225.9C7654.61,-4229.62 7748.07,-4242.75 7783,-4276.1 7879.82,-4368.52 7720.38,-4484.6 7819,-4575.1 7858.77,-4611.59 8736.2,-4603.8 8790,-4608.1 8878.66,-4615.18 8978.88,-4628.2 9051.76,-4638.58"/>
<polygon fill="black" stroke="black" points="9051.46,-4642.07 9061.86,-4640.02 9052.45,-4635.14 9051.46,-4642.07"/>
</g>
<!-- tg_client.main -->
<g id="node102" class="node">
<title>tg_client.main</title>
<g id="a_node102"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="886,-4457.1 318,-4457.1 318,-4365.1 886,-4365.1 886,-4457.1"/>
<text text-anchor="middle" x="602" y="-4392.06" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge151" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M886.03,-4401.85C1168.82,-4390.97 1615.75,-4369.35 2001,-4331.1 2344.5,-4296.98 2485.02,-4416.89 2770,-4222.1 2796.94,-4203.68 2778.45,-4175.58 2806,-4158.1 3114.06,-3962.57 4285.88,-3996.9 4640.33,-4012.16"/>
<polygon fill="black" stroke="black" points="4640.18,-4015.66 4650.32,-4012.59 4640.49,-4008.66 4640.18,-4015.66"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge152" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M608.51,-4457.2C633.28,-4656.08 741.01,-5437.25 922,-5589.1 991.97,-5647.8 1099.2,-5649.51 1177.6,-5640.4"/>
<polygon fill="black" stroke="black" points="1178.49,-5643.82 1187.98,-5639.12 1177.63,-5636.87 1178.49,-5643.82"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge153" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M623.37,-4457.44C721.96,-4673.93 1172.19,-5575.1 1835,-5575.1 1835,-5575.1 1835,-5575.1 2404.5,-5575.1 2824.51,-5575.1 3312.95,-5580.2 3602.08,-5583.75"/>
<polygon fill="black" stroke="black" points="3602.24,-5587.25 3612.28,-5583.87 3602.33,-5580.25 3602.24,-5587.25"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge154" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M630.16,-4364.79C678.66,-4286.16 787.79,-4126.65 922,-4040.1 1529.01,-3648.61 2398.84,-3514.15 2795.64,-3471.4"/>
<polygon fill="black" stroke="black" points="2796.22,-3474.86 2805.79,-3470.32 2795.47,-3467.9 2796.22,-3474.86"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge155" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M607.58,-4457.4C629.03,-4663.6 726.74,-5494.78 922,-5648.1 972.29,-5687.58 1838.88,-5677.16 2222.39,-5670.56"/>
<polygon fill="black" stroke="black" points="2222.54,-5674.06 2232.48,-5670.39 2222.42,-5667.06 2222.54,-5674.06"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge156" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M781.03,-4365.04C826.74,-4354.37 876,-4343.88 922,-4336.1 1295.36,-4272.92 1726.33,-4231.29 2026.65,-4207.23"/>
<polygon fill="black" stroke="black" points="2027.15,-4210.7 2036.84,-4206.42 2026.59,-4203.72 2027.15,-4210.7"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge157" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M656.17,-4364.92C716.76,-4314.46 820.57,-4234.37 922,-4186.1 974.7,-4161.01 1034.87,-4141.12 1090.54,-4125.9"/>
<polygon fill="black" stroke="black" points="1091.77,-4129.2 1100.52,-4123.21 1089.95,-4122.44 1091.77,-4129.2"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge158" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M886.18,-4417.94C1135.87,-4423.39 1509.58,-4430.1 1835,-4430.1 1835,-4430.1 1835,-4430.1 5300.5,-4430.1 5923.16,-4430.1 6072.96,-4333.16 6693,-4276.1 6763.59,-4269.6 6839.41,-4263.48 6911.36,-4258.08"/>
<polygon fill="black" stroke="black" points="6911.78,-4261.56 6921.49,-4257.32 6911.26,-4254.58 6911.78,-4261.56"/>
</g>
<!-- cluster_items._iter_lots -->
<g id="node103" class="node">
<title>cluster_items._iter_lots</title>
<g id="a_node103"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7406.5,-1502.1 7069.5,-1502.1 7069.5,-1464.1 7406.5,-1464.1 7406.5,-1502.1"/>
<text text-anchor="middle" x="7238" y="-1476.37" font-family="Times,serif" font-size="27.16">cluster_items._iter_lots</text>
</a>
</g>
</g>
<!-- cluster_items._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge159" class="edge">
<title>cluster_items._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7406.76,-1476.72C7515.65,-1476.6 7659.71,-1484.07 7783,-1516.1 7977.02,-1566.5 8185.51,-1690.69 8267.49,-1742.65"/>
<polygon fill="black" stroke="black" points="8265.63,-1745.61 8275.94,-1748.03 8269.39,-1739.71 8265.63,-1745.61"/>
</g>
<!-- cluster_items._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge160" class="edge">
<title>cluster_items._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7406.79,-1483.1C7616.38,-1483.1 7971.03,-1483.1 8165.59,-1483.1"/>
<polygon fill="black" stroke="black" points="8165.87,-1486.6 8175.87,-1483.1 8165.87,-1479.6 8165.87,-1486.6"/>
</g>
<!-- cluster_items.collect_clusters -->
<g id="node104" class="node">
<title>cluster_items.collect_clusters</title>
<g id="a_node104"><a xlink:title="Return mapping of cluster name to lot ids.">
<polygon fill="none" stroke="black" points="6544.5,-2480.6 5723.5,-2480.6 5723.5,-2413.6 6544.5,-2413.6 6544.5,-2480.6"/>
<text text-anchor="middle" x="6134" y="-2433.59" font-family="Times,serif" font-size="53.76">cluster_items.collect_clusters</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._load_embeddings -->
<g id="edge162" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6235.4,-2480.61C6346.03,-2515.73 6529.93,-2568.85 6693,-2591.1 6938.27,-2624.56 7614.51,-2626.08 8008.35,-2623.84"/>
<polygon fill="black" stroke="black" points="8008.49,-2627.34 8018.47,-2623.79 8008.45,-2620.34 8008.49,-2627.34"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge164" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6275.47,-2480.6C6394.43,-2499.78 6560.59,-2503.29 6657,-2404.1 6760.92,-2297.17 6587.55,-1839.51 6693,-1734.1 6734.88,-1692.23 6865.97,-1684.38 6988.96,-1687.29"/>
<polygon fill="black" stroke="black" points="6989.22,-1690.8 6999.31,-1687.56 6989.4,-1683.8 6989.22,-1690.8"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;cluster_items._iter_lots -->
<g id="edge161" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;cluster_items._iter_lots</title>
<path fill="none" stroke="black" d="M6274.28,-2480.63C6393.53,-2500.2 6560.77,-2504.26 6657,-2404.1 6722.87,-2335.53 6628.46,-1618.92 6693,-1549.1 6741.39,-1496.74 6919.58,-1483.07 7058.99,-1480.73"/>
<polygon fill="black" stroke="black" points="7059.44,-1484.22 7069.39,-1480.57 7059.33,-1477.22 7059.44,-1484.22"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node105" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node105"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7367,-2771.1 7109,-2771.1 7109,-2735.1 7367,-2735.1 7367,-2771.1"/>
<text text-anchor="middle" x="7238" y="-2747.4" font-family="Times,serif" font-size="22.12">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim -->
<g id="edge163" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6196.46,-2480.7C6297.04,-2534.05 6504.51,-2637.28 6693,-2688.1 6828.03,-2724.5 6987.41,-2740.53 7098.62,-2747.58"/>
<polygon fill="black" stroke="black" points="7098.7,-2751.09 7108.89,-2748.21 7099.13,-2744.1 7098.7,-2751.09"/>
</g>
<!-- cluster_items.main -->
<g id="node106" class="node">
<title>cluster_items.main</title>
<g id="a_node106"><a xlink:title="Cluster items and save the result.">
<polygon fill="none" stroke="black" points="5409,-1563.1 5190,-1563.1 5190,-1527.1 5409,-1527.1 5409,-1563.1"/>
<text text-anchor="middle" x="5299.5" y="-1539.8" font-family="Times,serif" font-size="21.00">cluster_items.main</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge165" class="edge">
<title>cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5351.45,-1527.06C5414.88,-1501.78 5521.39,-1449.44 5575,-1367.1 5630.25,-1282.22 5533.94,-1207.81 5611,-1142.1 5676.06,-1086.62 7778,-1170.22 7783,-1174.1 7828.69,-1209.51 7775.23,-1261.33 7819,-1299.1 7914.55,-1381.54 8062.57,-1390.13 8169.87,-1382.86"/>
<polygon fill="black" stroke="black" points="8170.4,-1386.33 8180.12,-1382.11 8169.89,-1379.35 8170.4,-1386.33"/>
</g>
<!-- cluster_items.main&#45;&gt;notes_utils.write_json -->
<g id="edge167" class="edge">
<title>cluster_items.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5351.91,-1527.07C5415.56,-1501.87 5522.04,-1449.7 5575,-1367.1 5634.88,-1273.7 5536.42,-1202.23 5611,-1120.1 5943.9,-753.48 6201.39,-913.64 6693,-854.1 6933.46,-824.97 7600.01,-695.39 7783,-854.1 7868.47,-928.22 7735.39,-1029.88 7819,-1106.1 7898.83,-1178.86 8701.83,-1091.69 8790,-1154.1 8824.49,-1178.51 8793.03,-1215.67 8826,-1242.1 8888.82,-1292.45 8980.41,-1304.6 9050.93,-1305.21"/>
<polygon fill="black" stroke="black" points="9051.17,-1308.71 9061.17,-1305.22 9051.18,-1301.71 9051.17,-1308.71"/>
</g>
<!-- cluster_items.main&#45;&gt;cluster_items.collect_clusters -->
<g id="edge166" class="edge">
<title>cluster_items.main&#45;&gt;cluster_items.collect_clusters</title>
<path fill="none" stroke="black" d="M5409.32,-1557.18C5468.27,-1569.79 5536.71,-1595.54 5575,-1648.1 5624.52,-1716.06 5552.57,-2343.61 5611,-2404.1 5704.62,-2501.01 5864.75,-2500.14 5983.03,-2482.21"/>
<polygon fill="black" stroke="black" points="5983.93,-2485.61 5993.26,-2480.6 5982.84,-2478.7 5983.93,-2485.61"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node107" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node107"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6320.5,-2986.1 5947.5,-2986.1 5947.5,-2950.1 6320.5,-2950.1 6320.5,-2986.1"/>
<text text-anchor="middle" x="6134" y="-2961.94" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge168" class="edge">
<title>cluster_items.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5409.02,-1556.75C5468.26,-1569.21 5537.08,-1594.96 5575,-1648.1 5616.71,-1706.54 5560.88,-2888.67 5611,-2940.1 5655.49,-2985.74 5808.31,-2989.73 5937.19,-2984.03"/>
<polygon fill="black" stroke="black" points="5937.38,-2987.52 5947.21,-2983.56 5937.06,-2980.53 5937.38,-2987.52"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node146" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node146"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7353.5,-3161.1 7122.5,-3161.1 7122.5,-3125.1 7353.5,-3125.1 7353.5,-3161.1"/>
<text text-anchor="middle" x="7238" y="-3139.05" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge239" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6199.88,-2986.13C6336.21,-3023.89 6643.92,-3108.45 6693,-3116.1 6835.59,-3138.29 7001.5,-3143.62 7112.25,-3144.3"/>
<polygon fill="black" stroke="black" points="7112.44,-3147.8 7122.46,-3144.35 7112.48,-3140.8 7112.44,-3147.8"/>
</g>
<!-- price_train._iter_lots -->
<g id="node108" class="node">
<title>price_train._iter_lots</title>
<g id="a_node108"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7393.5,-1445.6 7082.5,-1445.6 7082.5,-1406.6 7393.5,-1406.6 7393.5,-1445.6"/>
<text text-anchor="middle" x="7238" y="-1419.2" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge169" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7334.75,-1406.56C7449.48,-1388.42 7643.65,-1374.89 7783,-1455.1 7808.32,-1469.67 7797.4,-1490.42 7819,-1510.1 7948.34,-1627.88 8141.84,-1708.53 8240.6,-1744.63"/>
<polygon fill="black" stroke="black" points="8239.55,-1747.97 8250.14,-1748.09 8241.93,-1741.39 8239.55,-1747.97"/>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge170" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7393.76,-1434.33C7502.63,-1440.12 7651.72,-1448.07 7783,-1455.1 7912.89,-1462.05 8061.01,-1470.02 8165.94,-1475.68"/>
<polygon fill="black" stroke="black" points="8165.78,-1479.17 8175.96,-1476.22 8166.16,-1472.18 8165.78,-1479.17"/>
</g>
<!-- price_train.main -->
<g id="node109" class="node">
<title>price_train.main</title>
<g id="a_node109"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6249,-1187.1 6019,-1187.1 6019,-1151.1 6249,-1151.1 6249,-1187.1"/>
<text text-anchor="middle" x="6134" y="-1162.94" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge174" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6249.04,-1161.96C6370.86,-1161.28 6559.53,-1181.56 6657,-1301.1 6713.23,-1370.06 6629.79,-2038.47 6693,-2101.1 6779.09,-2186.39 7695.42,-2056.33 7783,-2140.1 7855.17,-2209.13 7747.95,-2517.9 7819,-2588.1 7920.49,-2688.36 8099.5,-2670.49 8209.21,-2646.86"/>
<polygon fill="black" stroke="black" points="8210.27,-2650.21 8219.27,-2644.63 8208.75,-2643.37 8210.27,-2650.21"/>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge175" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6249.27,-1162.92C6370.13,-1163.23 6556.9,-1184.52 6657,-1301.1 6711.4,-1364.44 6632.77,-1617.27 6693,-1675.1 6735.64,-1716.03 6866.32,-1724.15 6988.9,-1721.73"/>
<polygon fill="black" stroke="black" points="6989.3,-1725.22 6999.22,-1721.5 6989.14,-1718.22 6989.3,-1725.22"/>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge171" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6174.74,-1150.94C6275.48,-1102.59 6541.05,-960.02 6657,-752.1 6721.76,-635.96 6607.24,-556.71 6693,-455.1 6741.97,-397.08 6810.73,-359.31 6882.94,-334.85"/>
<polygon fill="black" stroke="black" points="6884.28,-338.1 6892.68,-331.64 6882.09,-331.45 6884.28,-338.1"/>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge172" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6249.13,-1176.2C6383.05,-1182.16 6594.78,-1183.42 6657,-1137.1 6694.22,-1109.39 6654.95,-1065.65 6693,-1039.1 6891.62,-900.46 7591.96,-890.19 7783,-1039.1 7834.69,-1079.39 7768.75,-1140.02 7819,-1182.1 7859.08,-1215.66 7974.01,-1224.69 8081.88,-1225.07"/>
<polygon fill="black" stroke="black" points="8081.95,-1228.57 8091.96,-1225.08 8081.96,-1221.57 8081.95,-1228.57"/>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge173" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6212.49,-1187.17C6409.62,-1233.14 6929.63,-1354.41 7143.3,-1404.24"/>
<polygon fill="black" stroke="black" points="7142.71,-1407.7 7153.24,-1406.56 7144.3,-1400.88 7142.71,-1407.7"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node110" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node110"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-5739.1 0,-5739.1 0,-5703.1 282,-5703.1 282,-5739.1"/>
<text text-anchor="middle" x="141" y="-5717.05" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- moderation:cli -->
<g id="node111" class="node">
<title>moderation:cli</title>
<g id="a_node111"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5721.1" rx="38.53" ry="18"/>
<text text-anchor="middle" x="602" y="-5719.5" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;moderation:cli -->
<!-- caption:cli -->
<g id="node183" class="node">
<title>caption:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5721.1" rx="30.28" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5719.5" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;caption:cli -->
<!-- telegram_bot._t -->
<g id="node112" class="node">
<title>telegram_bot._t</title>
<g id="a_node112"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5403.5,-5689.1 5195.5,-5689.1 5195.5,-5653.1 5403.5,-5653.1 5403.5,-5689.1"/>
<text text-anchor="middle" x="5299.5" y="-5665.22" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node113" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node113"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5450.5,-5743.1 5148.5,-5743.1 5148.5,-5707.1 5450.5,-5707.1 5450.5,-5743.1"/>
<text text-anchor="middle" x="5299.5" y="-5720.3" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node114" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node114"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6238,-5727.1 6030,-5727.1 6030,-5691.1 6238,-5691.1 6238,-5727.1"/>
<text text-anchor="middle" x="6134" y="-5705.4" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge177" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5450.78,-5722.21C5614.29,-5719.06 5872.01,-5714.11 6019.44,-5711.28"/>
<polygon fill="black" stroke="black" points="6019.93,-5714.77 6029.86,-5711.08 6019.8,-5707.77 6019.93,-5714.77"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node115" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node115"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5450.5,-5483.1 5148.5,-5483.1 5148.5,-5447.1 5450.5,-5447.1 5450.5,-5483.1"/>
<text text-anchor="middle" x="5299.5" y="-5459.8" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge178" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5429.08,-5483.1C5739.3,-5524.92 6553.67,-5625.1 7237,-5625.1 7237,-5625.1 7237,-5625.1 8305.5,-5625.1 8568,-5625.1 9261.81,-5699.26 9485,-5561.1 9675.06,-5443.44 9758.76,-5159.05 9781.1,-5068.96"/>
<polygon fill="black" stroke="black" points="9784.51,-5069.74 9783.47,-5059.2 9777.71,-5068.09 9784.51,-5069.74"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node116" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node116"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="5443,-5337.1 5156,-5337.1 5156,-5301.1 5443,-5301.1 5443,-5337.1"/>
<text text-anchor="middle" x="5299.5" y="-5313.4" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge179" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5443.26,-5323.76C5771.34,-5335.58 6558.5,-5370.7 6657,-5438.1 6686.86,-5458.52 6662.35,-5491.88 6693,-5511.1 6791.71,-5572.97 8673.5,-5519.51 8790,-5519.1 9098.89,-5517.98 9214.59,-5663.41 9485,-5514.1 9666.03,-5414.14 9754.76,-5155.01 9779.85,-5069.17"/>
<polygon fill="black" stroke="black" points="9783.27,-5069.94 9782.66,-5059.36 9776.54,-5068.01 9783.27,-5069.94"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node117" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6218,-4946.1 6050,-4946.1 6050,-4910.1 6218,-4910.1 6218,-4946.1"/>
<text text-anchor="middle" x="6134" y="-4924.85" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node118" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node118"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7384,-2679.1 7092,-2679.1 7092,-2643.1 7384,-2643.1 7384,-2679.1"/>
<text text-anchor="middle" x="7238" y="-2656.93" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge180" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7384.23,-2655.64C7543.96,-2649.64 7804.94,-2639.83 8008.09,-2632.2"/>
<polygon fill="black" stroke="black" points="8008.46,-2635.68 8018.33,-2631.81 8008.2,-2628.69 8008.46,-2635.68"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node119" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6295.5,-2771.1 5972.5,-2771.1 5972.5,-2735.1 6295.5,-2735.1 6295.5,-2771.1"/>
<text text-anchor="middle" x="6134" y="-2748.3" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge181" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6295.54,-2753.1C6512.09,-2753.1 6894.16,-2753.1 7098.66,-2753.1"/>
<polygon fill="black" stroke="black" points="7098.86,-2756.6 7108.86,-2753.1 7098.86,-2749.6 7098.86,-2756.6"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node120" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5538,-5036.1 5061,-5036.1 5061,-4996.1 5538,-4996.1 5538,-5036.1"/>
<text text-anchor="middle" x="5299.5" y="-5009.02" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge182" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5538.3,-5018.48C5551.78,-5025.3 5564.21,-5034.03 5575,-5045.1 5644.58,-5116.43 5552.4,-5411.49 5611,-5492.1 5706.63,-5623.65 5897.19,-5675.82 6019.7,-5696.25"/>
<polygon fill="black" stroke="black" points="6019.44,-5699.75 6029.87,-5697.9 6020.56,-5692.84 6019.44,-5699.75"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge183" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5332.49,-4995.8C5393.31,-4955.09 5524.09,-4856.84 5575,-4735.1 5616.91,-4634.87 5535.48,-2858.17 5611,-2780.1 5658.19,-2731.31 5828.49,-2730.32 5961.9,-2737.93"/>
<polygon fill="black" stroke="black" points="5962.06,-2741.44 5972.25,-2738.54 5962.47,-2734.45 5962.06,-2741.44"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node121" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node121"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5575,-5106.1 5024,-5106.1 5024,-5054.1 5575,-5054.1 5575,-5106.1"/>
<text text-anchor="middle" x="5299.5" y="-5070.4" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge184" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5565.6,-5106.3C5568.85,-5109.06 5571.99,-5111.99 5575,-5115.1 5633.56,-5175.54 5561.01,-5424.39 5611,-5492.1 5707.54,-5622.84 5897.6,-5675.24 6019.8,-5695.94"/>
<polygon fill="black" stroke="black" points="6019.5,-5699.44 6029.94,-5697.61 6020.64,-5692.53 6019.5,-5699.44"/>
</g>
<!-- lot_io.get_lot -->
<g id="node122" class="node">
<title>lot_io.get_lot</title>
<g id="a_node122"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7310.5,-3107.1 7165.5,-3107.1 7165.5,-3071.1 7310.5,-3071.1 7310.5,-3107.1"/>
<text text-anchor="middle" x="7238" y="-3084.3" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge185" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5566.2,-5053.97C5569.26,-5051.18 5572.19,-5048.22 5575,-5045.1 5646.84,-4965.03 5534.69,-3184.92 5611,-3109.1 5666.21,-3054.24 6833.07,-3079.06 7155.24,-3086.98"/>
<polygon fill="black" stroke="black" points="7155.35,-3090.49 7165.43,-3087.24 7155.52,-3083.49 7155.35,-3090.49"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge208" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7310.63,-3091.54C7443.68,-3094.38 7721.11,-3091.8 7783,-3024.1 7875.32,-2923.1 7723.53,-1891.12 7819,-1793.1 7927.61,-1681.57 8131.87,-1716.98 8237.1,-1745.31"/>
<polygon fill="black" stroke="black" points="8236.4,-1748.75 8246.97,-1748.03 8238.26,-1742 8236.4,-1748.75"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge209" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7310.72,-3081.59C7442.92,-3069.47 7717.52,-3052.88 7783,-3116.1 7851.03,-3181.78 7752.03,-3473.34 7819,-3540.1 8170.92,-3890.87 8865.28,-3732.19 9085.67,-3669.99"/>
<polygon fill="black" stroke="black" points="9086.83,-3673.3 9095.49,-3667.19 9084.92,-3666.57 9086.83,-3673.3"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node123" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node123"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="4908.5,-5464.1 4578.5,-5464.1 4578.5,-5428.1 4908.5,-5428.1 4908.5,-5464.1"/>
<text text-anchor="middle" x="4743.5" y="-5439.94" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge186" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4908.84,-5451.73C4981.36,-5454.22 5066.29,-5457.13 5138.31,-5459.6"/>
<polygon fill="black" stroke="black" points="5138.28,-5463.1 5148.39,-5459.95 5138.52,-5456.11 5138.28,-5463.1"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node124" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node124"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="4855.5,-5720.1 4631.5,-5720.1 4631.5,-5684.1 4855.5,-5684.1 4855.5,-5720.1"/>
<text text-anchor="middle" x="4743.5" y="-5697.93" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge187" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4855.61,-5695.88C4951.25,-5690.53 5088.66,-5682.84 5184.99,-5677.45"/>
<polygon fill="black" stroke="black" points="5185.27,-5680.94 5195.06,-5676.88 5184.88,-5673.95 5185.27,-5680.94"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge188" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4855.61,-5706.71C4936.67,-5710.07 5047.74,-5714.68 5138.37,-5718.45"/>
<polygon fill="black" stroke="black" points="5138.34,-5721.95 5148.47,-5718.87 5138.63,-5714.95 5138.34,-5721.95"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node125" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node125"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="4918,-5665.6 4569,-5665.6 4569,-5626.6 4918,-5626.6 4918,-5665.6"/>
<text text-anchor="middle" x="4743.5" y="-5639.2" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge189" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4918.27,-5653.94C5005.28,-5657.86 5108.14,-5662.51 5184.92,-5665.97"/>
<polygon fill="black" stroke="black" points="5184.96,-5669.48 5195.11,-5666.43 5185.27,-5662.48 5184.96,-5669.48"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge190" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4918.01,-5657.01C4941.92,-5661.32 4965.85,-5667.17 4988,-5675.1 5005.88,-5681.49 5006.06,-5691.88 5024,-5698.1 5059.93,-5710.53 5099.98,-5717.86 5138.14,-5722.04"/>
<polygon fill="black" stroke="black" points="5138.01,-5725.54 5148.32,-5723.08 5138.73,-5718.58 5138.01,-5725.54"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge191" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4918.2,-5644.66C4953.22,-5644.42 4989.79,-5644.22 5024,-5644.1 5268.89,-5643.22 5346.77,-5555.32 5575,-5644.1 5595.23,-5651.96 5591.02,-5668.61 5611,-5677.1 5742.9,-5733.11 5910.56,-5732.22 6019.76,-5723.3"/>
<polygon fill="black" stroke="black" points="6020.15,-5726.78 6029.81,-5722.44 6019.55,-5719.8 6020.15,-5726.78"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node126" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node126"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="4958.5,-5779.6 4528.5,-5779.6 4528.5,-5738.6 4958.5,-5738.6 4958.5,-5779.6"/>
<text text-anchor="middle" x="4743.5" y="-5751.85" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge192" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4958.64,-5740.13C4968.71,-5736.93 4978.56,-5733.28 4988,-5729.1 5007.31,-5720.55 5004.59,-5706.4 5024,-5698.1 5074.25,-5676.59 5134.26,-5668.89 5185.33,-5666.96"/>
<polygon fill="black" stroke="black" points="5185.54,-5670.46 5195.42,-5666.65 5185.32,-5663.46 5185.54,-5670.46"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge193" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4958.69,-5745.95C5018.44,-5742.28 5082.3,-5738.36 5138.34,-5734.92"/>
<polygon fill="black" stroke="black" points="5138.58,-5738.42 5148.35,-5734.31 5138.16,-5731.43 5138.58,-5738.42"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge194" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4958.83,-5761.31C5126.6,-5762.08 5365.76,-5761.03 5575,-5752.1 5729.3,-5745.51 5907.11,-5730.52 6019.75,-5720.11"/>
<polygon fill="black" stroke="black" points="6020.14,-5723.59 6029.77,-5719.18 6019.49,-5716.62 6020.14,-5723.59"/>
</g>
<!-- telegram_bot.main -->
<g id="node127" class="node">
<title>telegram_bot.main</title>
<g id="a_node127"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="4909,-5102.1 4578,-5102.1 4578,-5058.1 4909,-5058.1 4909,-5102.1"/>
<text text-anchor="middle" x="4743.5" y="-5071.78" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge195" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4909.14,-5074.39C4938.78,-5080.92 4966.9,-5093.32 4988,-5115.1 5088.5,-5218.84 4921.2,-5336.62 5024,-5438.1 5067.48,-5481.02 5135.81,-5487.86 5193.41,-5483.93"/>
<polygon fill="black" stroke="black" points="5193.97,-5487.39 5203.66,-5483.11 5193.42,-5480.42 5193.97,-5487.39"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge196" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M4909.13,-5076.35C4938.32,-5082.84 4966.28,-5094.71 4988,-5115.1 5044.95,-5168.54 4966.34,-5234.42 5024,-5287.1 5056.7,-5316.97 5101.51,-5329.46 5145.44,-5333.22"/>
<polygon fill="black" stroke="black" points="5145.46,-5336.73 5155.68,-5333.94 5145.96,-5329.74 5145.46,-5336.73"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge197" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M4796.7,-5058.05C4852.02,-5035.8 4942.48,-5002.59 5024,-4987.1 5395.01,-4916.57 5847.5,-4919.43 6039.6,-4924.66"/>
<polygon fill="black" stroke="black" points="6039.56,-4928.16 6049.66,-4924.94 6039.76,-4921.16 6039.56,-4928.16"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge198" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4751.04,-5058.01C4776.43,-4974.54 4874.57,-4672.48 5024,-4463.1 5219.6,-4189.01 5437.1,-4250.29 5575,-3943.1 5602.7,-3881.39 5563.42,-2774.17 5611,-2726.1 5712.88,-2623.15 6694.8,-2643.42 7081.56,-2655.56"/>
<polygon fill="black" stroke="black" points="7081.6,-2659.07 7091.71,-2655.88 7081.82,-2652.07 7081.6,-2659.07"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge199" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M4909.23,-5058.93C4946.92,-5054.24 4986.84,-5049.38 5024,-5045.1 5046.81,-5042.46 5070.69,-5039.8 5094.45,-5037.21"/>
<polygon fill="black" stroke="black" points="5095.06,-5040.67 5104.62,-5036.11 5094.3,-5033.71 5095.06,-5040.67"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge200" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M4909.22,-5080.1C4942.31,-5080.1 4977.97,-5080.1 5013.81,-5080.1"/>
<polygon fill="black" stroke="black" points="5013.92,-5083.6 5023.92,-5080.1 5013.92,-5076.6 5013.92,-5083.6"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node129" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node129"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="7340,-5013.1 7136,-5013.1 7136,-4977.1 7340,-4977.1 7340,-5013.1"/>
<text text-anchor="middle" x="7238" y="-4989.22" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node130" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node130"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8394,-4810.1 8215,-4810.1 8215,-4774.1 8394,-4774.1 8394,-4810.1"/>
<text text-anchor="middle" x="8304.5" y="-4788.05" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node131" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node131"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="9314.5,-1069.1 8996.5,-1069.1 8996.5,-1029.1 9314.5,-1029.1 9314.5,-1069.1"/>
<text text-anchor="middle" x="9155.5" y="-1042.02" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node132" class="node">
<title>lot_io.write_lots</title>
<g id="a_node132"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="8406,-1064.1 8203,-1064.1 8203,-1028.1 8406,-1028.1 8406,-1064.1"/>
<text text-anchor="middle" x="8304.5" y="-1040.5" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge204" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8406.13,-1055.05C8531.78,-1063.84 8736.73,-1069.51 8790,-1019.1 8842.61,-969.3 8777.69,-749.08 8826,-695.1 8879.99,-634.76 8971.7,-618.05 9044.52,-615.42"/>
<polygon fill="black" stroke="black" points="9044.76,-618.91 9054.66,-615.14 9044.57,-611.92 9044.76,-618.91"/>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge206" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8406.21,-1039.09C8531.14,-1032.67 8734.48,-1030.34 8790,-1078.1 8846.58,-1126.76 8772,-1190.59 8826,-1242.1 8885.07,-1298.44 8978.84,-1309.69 9051.09,-1308.43"/>
<polygon fill="black" stroke="black" points="9051.23,-1311.93 9061.14,-1308.17 9051.06,-1304.93 9051.23,-1311.93"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge203" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8406.44,-1044.21C8505.28,-1044.36 8659.61,-1049.93 8790,-1078.1 8908.81,-1103.76 9040.52,-1160.95 9108.41,-1192.72"/>
<polygon fill="black" stroke="black" points="9107.02,-1195.94 9117.56,-1197.03 9110.01,-1189.61 9107.02,-1195.94"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge205" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M8406.23,-1046.45C8549.21,-1046.96 8812.84,-1047.89 8985.91,-1048.5"/>
<polygon fill="black" stroke="black" points="8986.14,-1052 8996.15,-1048.54 8986.16,-1045 8986.14,-1052"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node133" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node133"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8397,-2111.1 8212,-2111.1 8212,-2075.1 8397,-2075.1 8397,-2111.1"/>
<text text-anchor="middle" x="8304.5" y="-2088.31" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.embedding_path -->
<g id="node135" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node135"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8411,-1290.1 8198,-1290.1 8198,-1254.1 8411,-1254.1 8411,-1290.1"/>
<text text-anchor="middle" x="8304.5" y="-1267.93" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node136" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node136"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6592,-2860.6 5676,-2860.6 5676,-2789.6 6592,-2789.6 6592,-2860.6"/>
<text text-anchor="middle" x="6134" y="-2810.45" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge210" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6592.08,-2812.56C6621.12,-2804.61 6643.94,-2794.04 6657,-2780.1 6723.14,-2709.49 6635.21,-1116.68 6693,-1039.1 7007.02,-617.52 7302.54,-775.07 7819,-677.1 7901.99,-661.35 7994.25,-653.18 8075.8,-649.07"/>
<polygon fill="black" stroke="black" points="8076.39,-652.55 8086.21,-648.57 8076.05,-645.56 8076.39,-652.55"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge211" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6592.3,-2812.52C6924.76,-2810.72 7384.47,-2823.46 7783,-2889.1 7927.72,-2912.93 8088.86,-2964.71 8192.96,-3001.64"/>
<polygon fill="black" stroke="black" points="8191.95,-3004.99 8202.54,-3005.05 8194.3,-2998.4 8191.95,-3004.99"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge212" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6292.57,-2789.56C6409.78,-2773.29 6564.8,-2774.97 6657,-2869.1 6745.35,-2959.29 6602.66,-3347.9 6693,-3436.1 6779.73,-3520.77 7691,-3400.18 7783,-3479.1 7846.58,-3533.63 7770.47,-3595.82 7819,-3664.1 7921.35,-3808.09 8122.15,-3889.66 8230.33,-3924.94"/>
<polygon fill="black" stroke="black" points="8229.27,-3928.28 8239.86,-3928.01 8231.41,-3921.61 8229.27,-3928.28"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge213" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6292.42,-2860.6C6409.95,-2876.94 6565.45,-2875.2 6657,-2780.1 6715.01,-2719.83 6635.57,-2088.92 6693,-2028.1 6860.23,-1851.01 7595.5,-2068.55 7783,-1913.1 7825.87,-1877.56 7775.27,-1827.56 7819,-1793.1 7936.14,-1700.77 8122.97,-1723.23 8227.09,-1745.87"/>
<polygon fill="black" stroke="black" points="8226.38,-1749.29 8236.9,-1748.05 8227.9,-1742.46 8226.38,-1749.29"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node137" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node137"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7450.5,-4073.1 7025.5,-4073.1 7025.5,-4037.1 7450.5,-4037.1 7450.5,-4073.1"/>
<text text-anchor="middle" x="7238" y="-4049.22" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge214" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6287.92,-2789.57C6406.18,-2772.07 6564.82,-2772.11 6657,-2869.1 6739.87,-2956.29 6614.81,-3859.68 6693,-3951.1 6781.6,-4054.69 6938.9,-4075.44 7061.63,-4073.33"/>
<polygon fill="black" stroke="black" points="7061.98,-4076.83 7071.9,-4073.1 7061.83,-4069.83 7061.98,-4076.83"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge306" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7450.5,-4072.2C7565.96,-4069.16 7701.59,-4043.08 7783,-3951.1 7862.12,-3861.7 7762.66,-3520.34 7819,-3415.1 7904.77,-3254.89 8092.8,-3142.48 8207.76,-3085.66"/>
<polygon fill="black" stroke="black" points="8209.49,-3088.71 8216.94,-3081.17 8206.42,-3082.42 8209.49,-3088.71"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge307" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7323.48,-4073.1C7431.37,-4096.97 7623.24,-4142.41 7783,-4196.1 7799.43,-4201.62 7802.11,-4207.21 7819,-4211.1 7920.01,-4234.35 8035.82,-4241.72 8128.88,-4243.1"/>
<polygon fill="black" stroke="black" points="8128.92,-4246.6 8138.96,-4243.23 8129.01,-4239.6 8128.92,-4246.6"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node144" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node144"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8454,-4426.1 8155,-4426.1 8155,-4390.1 8454,-4390.1 8454,-4426.1"/>
<text text-anchor="middle" x="8304.5" y="-4403.3" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge308" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7450.72,-4068.97C7559.78,-4085.58 7689.19,-4121.06 7783,-4196.1 7810.32,-4217.95 7792.03,-4243.81 7819,-4266.1 7910.97,-4342.07 8042.08,-4377.4 8144.72,-4393.82"/>
<polygon fill="black" stroke="black" points="8144.46,-4397.32 8154.88,-4395.4 8145.54,-4390.41 8144.46,-4397.32"/>
</g>
<!-- scan_ontology.main -->
<g id="node138" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5529,-1714.6 5070,-1714.6 5070,-1657.6 5529,-1657.6 5529,-1714.6"/>
<text text-anchor="middle" x="5299.5" y="-1674.76" font-family="Times,serif" font-size="44.80">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge215" class="edge">
<title>scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5443.49,-1657.54C5492.37,-1640.69 5542.8,-1614.05 5575,-1572.1 5648.98,-1475.71 5521.14,-1382.87 5611,-1301.1 5788.96,-1139.15 6452.43,-1264.65 6693,-1260.1 7177.36,-1250.92 7339.23,-1065.8 7783,-1260.1 7804.61,-1269.56 7798.07,-1288.22 7819,-1299.1 7914,-1348.48 8033.04,-1364.97 8129.34,-1369"/>
<polygon fill="black" stroke="black" points="8129.35,-1372.51 8139.48,-1369.39 8129.62,-1365.51 8129.35,-1372.51"/>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge217" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5447.11,-1657.51C5495.32,-1640.69 5544.36,-1614.09 5575,-1572.1 5631.52,-1494.63 5544.83,-1211.5 5611,-1142.1 5934.58,-802.72 6278.05,-1280.28 6657,-1004.1 6687.2,-982.08 6661.42,-948.08 6693,-928.1 6795.34,-863.33 7690.59,-849.81 7783,-928.1 7857.26,-991 7746.15,-1079.56 7819,-1144.1 7899.84,-1215.71 8696.16,-1133.65 8790,-1187.1 8815.39,-1201.55 8801.56,-1226.08 8826,-1242.1 8892.53,-1285.69 8982.35,-1298.61 9051.26,-1301.23"/>
<polygon fill="black" stroke="black" points="9051.16,-1304.73 9061.26,-1301.55 9051.38,-1297.73 9051.16,-1304.73"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge218" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5333.8,-1714.9C5395.01,-1770.24 5523.82,-1898.38 5575,-2038.1 5609.5,-2132.28 5540.56,-2868.69 5611,-2940.1 5655.76,-2985.47 5808.56,-2989.48 5937.36,-2983.86"/>
<polygon fill="black" stroke="black" points="5937.54,-2987.36 5947.37,-2983.4 5937.22,-2980.36 5937.54,-2987.36"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge216" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5333.68,-1714.94C5394.71,-1770.35 5523.23,-1898.6 5575,-2038.1 5603.72,-2115.48 5553.74,-2720.65 5611,-2780.1 5699.91,-2872.4 5849.07,-2876.73 5965.23,-2861.97"/>
<polygon fill="black" stroke="black" points="5965.84,-2865.42 5975.3,-2860.63 5964.92,-2858.48 5965.84,-2865.42"/>
</g>
<!-- notes_utils.parse_md -->
<g id="node139" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node139"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8388,-3531.1 8221,-3531.1 8221,-3495.1 8388,-3495.1 8388,-3531.1"/>
<text text-anchor="middle" x="8304.5" y="-3509.4" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge221" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8388.06,-3515.82C8551.47,-3521.21 8914.16,-3533.17 9075.02,-3538.47"/>
<polygon fill="black" stroke="black" points="9075.21,-3541.98 9085.32,-3538.81 9075.44,-3534.99 9075.21,-3541.98"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge222" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8388.06,-3508.52C8523.33,-3501.04 8795.16,-3485.99 8976.01,-3475.98"/>
<polygon fill="black" stroke="black" points="8976.38,-3479.46 8986.17,-3475.41 8975.99,-3472.47 8976.38,-3479.46"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node140" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node140"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="8418.5,-5089.1 8190.5,-5089.1 8190.5,-5053.1 8418.5,-5053.1 8418.5,-5089.1"/>
<text text-anchor="middle" x="8304.5" y="-5065.8" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node141" class="node">
<title>chop.process_message</title>
<g id="a_node141"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6635,-5066.1 5633,-5066.1 5633,-4964.1 6635,-4964.1 6635,-5066.1"/>
<text text-anchor="middle" x="6134" y="-4993.78" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge224" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6635.11,-4976.24C6642.78,-4969.72 6650.09,-4962.68 6657,-4955.1 6720.35,-4885.55 6626.93,-3329.07 6693,-3262.1 6778.11,-3175.82 7697.59,-3310.07 7783,-3224.1 7882.65,-3123.79 7731.58,-2063.22 7819,-1952.1 7891.13,-1860.41 8020.22,-1828.51 8127.02,-1818.94"/>
<polygon fill="black" stroke="black" points="8127.61,-1822.4 8137.29,-1818.08 8127.03,-1815.43 8127.61,-1822.4"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge225" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6635.02,-4976.15C6642.71,-4969.66 6650.05,-4962.65 6657,-4955.1 6746,-4858.28 6600.22,-3865.29 6693,-3772.1 6778.5,-3686.22 7696.29,-3818.76 7783,-3734.1 7880.48,-3638.92 7727.75,-3223.25 7819,-3122.1 7869.06,-3066.6 7941.67,-3039.86 8015.51,-3028.68"/>
<polygon fill="black" stroke="black" points="8016.05,-3032.14 8025.46,-3027.26 8015.07,-3025.21 8016.05,-3032.14"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge226" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6544.5,-5066.12C6594.47,-5071.15 6644.86,-5075.65 6693,-5079.1 7273.7,-5120.61 7974.72,-5125.03 8216.55,-5125.23"/>
<polygon fill="black" stroke="black" points="8216.69,-5128.73 8226.69,-5125.23 8216.69,-5121.73 8216.69,-5128.73"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge227" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6635.03,-4974.78C6642.68,-4968.69 6650.01,-4962.14 6657,-4955.1 6709.89,-4901.79 6637.91,-4670.13 6693,-4619.1 6781.89,-4536.76 7691.4,-4665.41 7783,-4586.1 7852.93,-4525.54 7757.33,-4450.04 7819,-4381.1 7896.63,-4294.31 8024.15,-4259.36 8128.88,-4245.81"/>
<polygon fill="black" stroke="black" points="8129.45,-4249.27 8138.95,-4244.57 8128.59,-4242.32 8129.45,-4249.27"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge228" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6635.22,-5006.02C6818.46,-5002.69 7009.26,-4999.23 7125.62,-4997.12"/>
<polygon fill="black" stroke="black" points="7126.02,-5000.61 7135.95,-4996.93 7125.89,-4993.61 7126.02,-5000.61"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge229" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6635.04,-5021.67C6654.61,-5021.83 6673.99,-5021.98 6693,-5022.1 6753.55,-5022.48 7736.59,-5061 7783,-5022.1 7853.22,-4963.23 7750.44,-4879.89 7819,-4819.1 7874.06,-4770.27 8079.63,-4775.51 8204.63,-4783.76"/>
<polygon fill="black" stroke="black" points="8204.76,-4787.28 8214.98,-4784.47 8205.24,-4780.3 8204.76,-4787.28"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge230" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6635.33,-5052.46C6654.8,-5053.44 6674.08,-5054.32 6693,-5055.1 7247.43,-5077.7 7910.06,-5074.87 8179.97,-5072.46"/>
<polygon fill="black" stroke="black" points="8180.22,-5075.96 8190.19,-5072.37 8180.16,-5068.96 8180.22,-5075.96"/>
</g>
<!-- embed.embed_file -->
<g id="node142" class="node">
<title>embed.embed_file</title>
<g id="a_node142"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7443,-2092.6 7033,-2092.6 7033,-2037.6 7443,-2037.6 7443,-2092.6"/>
<text text-anchor="middle" x="7238" y="-2054.55" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge231" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6635.2,-4976.32C6642.84,-4969.77 6650.12,-4962.71 6657,-4955.1 6761.83,-4839.03 6589.48,-2257.34 6693,-2140.1 6784.29,-2036.69 6946.16,-2026.21 7069.66,-2036.65"/>
<polygon fill="black" stroke="black" points="7069.71,-2040.17 7079.98,-2037.58 7070.34,-2033.2 7069.71,-2040.17"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node143" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node143"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="9273.5,-5505.1 9037.5,-5505.1 9037.5,-5469.1 9273.5,-5469.1 9273.5,-5505.1"/>
<text text-anchor="middle" x="9155.5" y="-5483.05" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge232" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6468.56,-5066.13C6540.25,-5092.17 6608.84,-5131.32 6657,-5190.1 6737.92,-5288.85 6597.44,-5390.43 6693,-5475.1 6780.94,-5553 8534.53,-5505.91 9026.92,-5491.09"/>
<polygon fill="black" stroke="black" points="9027.37,-5494.58 9037.26,-5490.78 9027.16,-5487.58 9027.37,-5494.58"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge233" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6635.15,-4974.42C6642.74,-4968.43 6650.04,-4962 6657,-4955.1 6750.14,-4862.69 6596.47,-4750.95 6693,-4662.1 6782.18,-4580.01 7686.09,-4691.89 7783,-4619.1 7823.45,-4588.71 7781.27,-4544.81 7819,-4511.1 7907.13,-4432.34 8040.28,-4408.46 8144.71,-4403.23"/>
<polygon fill="black" stroke="black" points="8144.89,-4406.73 8154.73,-4402.79 8144.58,-4399.74 8144.89,-4406.73"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge240" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7443.23,-2074.77C7576.47,-2076.44 7734.36,-2068.07 7783,-2023.1 7858.97,-1952.85 7742.29,-1862.53 7819,-1793.1 7932.46,-1690.41 8128.83,-1719.85 8233.33,-1745.62"/>
<polygon fill="black" stroke="black" points="8232.6,-1749.04 8243.15,-1748.09 8234.31,-1742.25 8232.6,-1749.04"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge242" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7443.19,-2063.65C7858.82,-2060.24 8766.14,-2050.17 8790,-2027.1 8889.05,-1931.31 8742.3,-1517.55 8826,-1408.1 8878.62,-1339.28 8976.02,-1313.08 9051.15,-1303.33"/>
<polygon fill="black" stroke="black" points="9051.63,-1306.79 9061.13,-1302.11 9050.78,-1299.85 9051.63,-1306.79"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge241" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7443.3,-2070.47C7670.34,-2076.44 8027.84,-2085.84 8201.74,-2090.42"/>
<polygon fill="black" stroke="black" points="8201.82,-2093.92 8211.91,-2090.69 8202,-2086.92 8201.82,-2093.92"/>
</g>
<!-- chop.main -->
<g id="node145" class="node">
<title>chop.main</title>
<g id="a_node145"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5375,-5160.1 5224,-5160.1 5224,-5124.1 5375,-5124.1 5375,-5160.1"/>
<text text-anchor="middle" x="5299.5" y="-5135.94" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge234" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5375.25,-5136.35C5430.55,-5131.71 5507.65,-5124.43 5575,-5115.1 5669.18,-5102.05 5771.74,-5084.6 5862.94,-5067.94"/>
<polygon fill="black" stroke="black" points="5863.66,-5071.37 5872.87,-5066.13 5862.4,-5064.49 5863.66,-5071.37"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node147" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node147"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6275.5,-3154.1 5992.5,-3154.1 5992.5,-3118.1 6275.5,-3118.1 6275.5,-3154.1"/>
<text text-anchor="middle" x="6134" y="-3130.5" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge235" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6275.69,-3136.99C6492.52,-3138.37 6904.93,-3140.99 7111.92,-3142.3"/>
<polygon fill="black" stroke="black" points="7112.2,-3145.8 7122.23,-3142.37 7112.25,-3138.8 7112.2,-3145.8"/>
</g>
<!-- log_utils.init_logger -->
<g id="node148" class="node">
<title>log_utils.init_logger</title>
<g id="a_node148"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6481.5,-3254.1 5786.5,-3254.1 5786.5,-3172.1 6481.5,-3172.1 6481.5,-3254.1"/>
<text text-anchor="middle" x="6134" y="-3196.11" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge236" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6481.67,-3184.9C6551.61,-3179.63 6624.64,-3174.43 6693,-3170.1 6836.68,-3161 7001.87,-3153.17 7112.16,-3148.32"/>
<polygon fill="black" stroke="black" points="7112.49,-3151.81 7122.33,-3147.88 7112.19,-3144.82 7112.49,-3151.81"/>
</g>
<!-- log_utils.get_logger -->
<g id="node149" class="node">
<title>log_utils.get_logger</title>
<g id="a_node149"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7306.5,-3215.1 7169.5,-3215.1 7169.5,-3179.1 7306.5,-3179.1 7306.5,-3215.1"/>
<text text-anchor="middle" x="7238" y="-3193.85" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge237" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6481.79,-3201.74C6721.09,-3197.21 7020.25,-3193.75 7159.29,-3194.55"/>
<polygon fill="black" stroke="black" points="7159.4,-3198.05 7169.42,-3194.62 7159.45,-3191.05 7159.4,-3198.05"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge238" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7169.42,-3201.53C7037.1,-3206.4 6735.47,-3211.75 6491.88,-3214.28"/>
<polygon fill="black" stroke="black" points="6491.75,-3210.78 6481.79,-3214.38 6491.82,-3217.78 6491.75,-3210.78"/>
</g>
<!-- embed.main -->
<g id="node150" class="node">
<title>embed.main</title>
<g id="a_node150"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6222,-2083.1 6046,-2083.1 6046,-2047.1 6222,-2047.1 6222,-2083.1"/>
<text text-anchor="middle" x="6134" y="-2058.94" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge243" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6222.39,-2065.1C6393.99,-2065.1 6779.41,-2065.1 7022.73,-2065.1"/>
<polygon fill="black" stroke="black" points="7022.76,-2068.6 7032.76,-2065.1 7022.76,-2061.6 7022.76,-2068.6"/>
</g>
<!-- build_site._load_ontology -->
<g id="node151" class="node">
<title>build_site._load_ontology</title>
<g id="a_node151"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8461,-2516.1 8148,-2516.1 8148,-2480.1 8461,-2480.1 8461,-2516.1"/>
<text text-anchor="middle" x="8304.5" y="-2492.5" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge244" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8461.17,-2489.37C8582.47,-2485.71 8738.62,-2488.87 8790,-2525.1 9087.66,-2734.93 9143.37,-3237.43 9152.75,-3362.52"/>
<polygon fill="black" stroke="black" points="9149.28,-3363.07 9153.47,-3372.8 9156.26,-3362.58 9149.28,-3363.07"/>
</g>
<!-- build_site._load_clusters -->
<g id="node152" class="node">
<title>build_site._load_clusters</title>
<g id="a_node152"><a xlink:title="Return precomputed item clusters.">
<polygon fill="none" stroke="black" points="8482,-2456.1 8127,-2456.1 8127,-2418.1 8482,-2418.1 8482,-2456.1"/>
<text text-anchor="middle" x="8304.5" y="-2430.37" font-family="Times,serif" font-size="27.16">build_site._load_clusters</text>
</a>
</g>
</g>
<!-- build_site._load_clusters&#45;&gt;notes_utils.load_json -->
<g id="edge245" class="edge">
<title>build_site._load_clusters&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8389.5,-2418.09C8493.97,-2399.58 8672.79,-2385.31 8790,-2471.1 9100.84,-2698.6 9146.79,-3233.32 9153.41,-3362.59"/>
<polygon fill="black" stroke="black" points="9149.93,-3363.02 9153.9,-3372.84 9156.92,-3362.69 9149.93,-3363.02"/>
</g>
<!-- build_site._compile_locale -->
<g id="node153" class="node">
<title>build_site._compile_locale</title>
<g id="a_node153"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="7405,-554.1 7071,-554.1 7071,-518.1 7405,-518.1 7405,-554.1"/>
<text text-anchor="middle" x="7238" y="-530.22" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node154" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node154"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="6322.5,-547.6 5945.5,-547.6 5945.5,-506.6 6322.5,-506.6 6322.5,-547.6"/>
<text text-anchor="middle" x="6134" y="-519.85" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge246" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M6322.56,-528.63C6529.05,-530.31 6858.46,-533 7060.45,-534.65"/>
<polygon fill="black" stroke="black" points="7060.54,-538.15 7070.57,-534.74 7060.59,-531.15 7060.54,-538.15"/>
</g>
<!-- build_site._iter_lots -->
<g id="node155" class="node">
<title>build_site._iter_lots</title>
<g id="a_node155"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7464,-1904.6 7012,-1904.6 7012,-1847.6 7464,-1847.6 7464,-1904.6"/>
<text text-anchor="middle" x="7238" y="-1865.2" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge247" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7464.1,-1864.25C7661.86,-1853.85 7945.63,-1838.92 8127.26,-1829.37"/>
<polygon fill="black" stroke="black" points="8127.65,-1832.85 8137.45,-1828.83 8127.28,-1825.86 8127.65,-1832.85"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge248" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7430.97,-1904.61C7550.08,-1910.52 7696.43,-1894.26 7783,-1799.1 7841.38,-1734.92 7757.95,-1080.74 7819,-1019.1 7864.71,-972.95 8031.14,-972.6 8156.27,-979.62"/>
<polygon fill="black" stroke="black" points="8156.16,-983.12 8166.34,-980.2 8156.56,-976.13 8156.16,-983.12"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge249" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7464.16,-1879.77C7577.95,-1894.35 7707.58,-1933.03 7783,-2028.1 7840.79,-2100.93 7764.23,-2788.97 7819,-2864.1 7869.51,-2933.38 7949.87,-2975.87 8030.75,-3001.93"/>
<polygon fill="black" stroke="black" points="8030.02,-3005.37 8040.61,-3005.03 8032.12,-2998.69 8030.02,-3005.37"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge250" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7464.2,-1879.1C7578.38,-1893.45 7708.34,-1932.11 7783,-2028.1 7834.59,-2094.42 7782.56,-3464.38 7819,-3540.1 7913.38,-3736.2 8152.27,-3872.11 8255.15,-3923.41"/>
<polygon fill="black" stroke="black" points="8253.87,-3926.68 8264.38,-3927.97 8256.96,-3920.4 8253.87,-3926.68"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge251" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7449.07,-1847.59C7550.12,-1833.56 7672.94,-1816.05 7783,-1799.1 7799.03,-1796.63 7802.88,-1794.88 7819,-1793.1 7944.75,-1779.15 8089.71,-1772.28 8188.05,-1768.98"/>
<polygon fill="black" stroke="black" points="8188.44,-1772.46 8198.32,-1768.64 8188.21,-1765.47 8188.44,-1772.46"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge252" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7464.05,-1887.17C7568.62,-1882.11 7690.09,-1860.7 7783,-1799.1 7808.92,-1781.91 7796.42,-1760.48 7819,-1739.1 7944.67,-1620.07 8136.44,-1540.92 8236.87,-1505.09"/>
<polygon fill="black" stroke="black" points="8238.33,-1508.29 8246.59,-1501.65 8236,-1501.69 8238.33,-1508.29"/>
</g>
<!-- build_site._copy_images -->
<g id="node156" class="node">
<title>build_site._copy_images</title>
<g id="a_node156"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="9319,-887.1 8992,-887.1 8992,-851.1 9319,-851.1 9319,-887.1"/>
<text text-anchor="middle" x="9155.5" y="-862.94" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node157" class="node">
<title>build_site._copy_static</title>
<g id="a_node157"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="7366,-500.1 7110,-500.1 7110,-464.1 7366,-464.1 7366,-500.1"/>
<text text-anchor="middle" x="7238" y="-476.8" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node158" class="node">
<title>build_site._load_state</title>
<g id="a_node158"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="6325,-2395.6 5943,-2395.6 5943,-2350.6 6325,-2350.6 6325,-2395.6"/>
<text text-anchor="middle" x="6134" y="-2364.72" font-family="Times,serif" font-size="33.60">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge257" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6220.32,-2350.54C6333.55,-2326.14 6533.51,-2303.07 6657,-2404.1 6705.39,-2443.69 6644.36,-2500.81 6693,-2540.1 6740.16,-2578.19 7722.46,-2587.93 7783,-2591.1 7855.84,-2594.9 7934.4,-2599.28 8007.86,-2603.5"/>
<polygon fill="black" stroke="black" points="8008,-2607.01 8018.19,-2604.09 8008.41,-2600.02 8008,-2607.01"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge258" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6325.07,-2373.1C6505.65,-2373.1 6778.6,-2373.1 6978.83,-2373.1"/>
<polygon fill="black" stroke="black" points="6978.9,-2376.6 6988.9,-2373.1 6978.9,-2369.6 6978.9,-2376.6"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge253" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6325.06,-2356.26C6426.85,-2354.1 6552.44,-2362.69 6657,-2404.1 6676.36,-2411.76 6673.56,-2426.62 6693,-2434.1 6952.73,-2534.01 7781.06,-2517.3 8137.64,-2504.88"/>
<polygon fill="black" stroke="black" points="8137.92,-2508.37 8147.79,-2504.52 8137.68,-2501.37 8137.92,-2508.37"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_clusters -->
<g id="edge254" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_clusters</title>
<path fill="none" stroke="black" d="M6325.33,-2384.44C6483.31,-2393.84 6683.66,-2405.73 6693,-2406.1 7208.13,-2426.28 7816.47,-2433.47 8116.68,-2435.91"/>
<polygon fill="black" stroke="black" points="8116.76,-2439.41 8126.79,-2435.99 8116.81,-2432.41 8116.76,-2439.41"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge255" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6325.14,-2356.66C6437.89,-2336.72 6574.46,-2292.93 6657,-2197.1 6716.51,-2128 6629.79,-2060.82 6693,-1995.1 6771.96,-1913 6893.47,-1881.26 7001.64,-1870.92"/>
<polygon fill="black" stroke="black" points="7002.08,-1874.4 7011.73,-1870.01 7001.45,-1867.42 7002.08,-1874.4"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge256" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6325.31,-2361.45C6440.94,-2343.49 6580.57,-2300.11 6657,-2197.1 6733.7,-2093.71 6606.2,-1134.16 6693,-1039.1 6846.72,-870.73 8447.05,-864.82 8981.68,-867.61"/>
<polygon fill="black" stroke="black" points="8981.77,-871.11 8991.79,-867.67 8981.81,-864.11 8981.77,-871.11"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node159" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node159"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8563.5,-2579.6 8045.5,-2579.6 8045.5,-2534.6 8563.5,-2534.6 8563.5,-2579.6"/>
<text text-anchor="middle" x="8304.5" y="-2548.72" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge259" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M6232.46,-2350.56C6345.43,-2330.35 6532.03,-2315.87 6657,-2404.1 6690.52,-2427.76 6659.28,-2465.72 6693,-2489.1 6800.21,-2563.42 7605.71,-2565.55 8035.35,-2561.22"/>
<polygon fill="black" stroke="black" points="8035.46,-2564.72 8045.43,-2561.12 8035.39,-2557.72 8035.46,-2564.72"/>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge283" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8563.57,-2550.2C8658.54,-2552.48 8752.16,-2561.97 8790,-2588.1 9069.78,-2781.27 9138.44,-3243.54 9151.73,-3362.69"/>
<polygon fill="black" stroke="black" points="9148.27,-3363.26 9152.82,-3372.83 9155.23,-3362.51 9148.27,-3363.26"/>
</g>
<!-- build_site._categorise -->
<g id="node160" class="node">
<title>build_site._categorise</title>
<g id="a_node160"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal``. ``sell_item`` lots are further&#10;grouped by ``clusters`` when available and fall back to ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="8790,-567.6 7819,-567.6 7819,-464.6 8790,-464.6 8790,-567.6"/>
<text text-anchor="middle" x="8304.5" y="-494.16" font-family="Times,serif" font-size="86.80">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge260" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8721.92,-567.6C8841.31,-582.36 8961.55,-597.23 9044.85,-607.53"/>
<polygon fill="black" stroke="black" points="9044.47,-611.01 9054.83,-608.77 9045.33,-604.07 9044.47,-611.01"/>
</g>
<!-- build_site._render_site -->
<g id="node161" class="node">
<title>build_site._render_site</title>
<g id="a_node161"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="6657,-743.6 5611,-743.6 5611,-636.6 6657,-636.6 6657,-743.6"/>
<text text-anchor="middle" x="6134" y="-667.47" font-family="Times,serif" font-size="90.16">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge261" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6657.01,-663.77C6669.12,-663.2 6681.13,-662.64 6693,-662.1 7193.35,-639.1 7318.23,-625.54 7819,-615.1 8250.46,-606.09 8358.46,-611.54 8790,-615.1 8875.53,-615.8 8972.34,-617.43 9044.68,-618.82"/>
<polygon fill="black" stroke="black" points="9044.65,-622.32 9054.72,-619.01 9044.79,-615.32 9044.65,-622.32"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge262" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6236.56,-743.61C6361.08,-815.51 6566.7,-956.06 6657,-1142.1 6694.45,-1219.25 6631.51,-1853.31 6693,-1913.1 6776.54,-1994.32 8691.65,-1889.61 8790,-1952.1 9380.38,-2327.18 9266.35,-2699.69 9485,-3364.1 9697.68,-4010.34 9772.36,-4848.79 9785.35,-5012.64"/>
<polygon fill="black" stroke="black" points="9781.88,-5013.16 9786.15,-5022.86 9788.86,-5012.62 9781.88,-5013.16"/>
</g>
<!-- build_site.build_page -->
<g id="node162" class="node">
<title>build_site.build_page</title>
<g id="a_node162"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="7707.5,-3373.1 6768.5,-3373.1 6768.5,-3271.1 7707.5,-3271.1 7707.5,-3373.1"/>
<text text-anchor="middle" x="7238" y="-3300.55" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge263" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6238.25,-743.66C6363.77,-815.27 6569.63,-955.16 6657,-1142.1 6705.98,-1246.9 6618.04,-3135.98 6693,-3224.1 6712.26,-3246.73 6734.82,-3265.33 6759.61,-3280.53"/>
<polygon fill="black" stroke="black" points="6758.07,-3283.69 6768.46,-3285.76 6761.64,-3277.66 6758.07,-3283.69"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node163" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node163"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8469,-816.1 8140,-816.1 8140,-780.1 8469,-780.1 8469,-816.1"/>
<text text-anchor="middle" x="8304.5" y="-792.4" font-family="Times,serif" font-size="22.12">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge264" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6657.11,-669.28C7061.13,-659.96 7584.2,-664.69 7783,-740.1 7802.47,-747.48 7799.63,-762.44 7819,-770.1 7916.91,-808.78 8034.66,-816.37 8129.56,-814"/>
<polygon fill="black" stroke="black" points="8129.95,-817.5 8139.84,-813.71 8129.75,-810.5 8129.95,-817.5"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge265" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7707.78,-3305.25C7734.87,-3292.64 7760.28,-3276.81 7783,-3257.1 7829.91,-3216.4 7772.97,-3163.78 7819,-3122.1 7872.62,-3073.54 7943.95,-3048.49 8015.35,-3036.71"/>
<polygon fill="black" stroke="black" points="8016.08,-3040.14 8025.42,-3035.13 8015,-3033.22 8016.08,-3040.14"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge266" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7707.53,-3330.05C7735.08,-3343.39 7760.63,-3360.47 7783,-3382.1 7863.39,-3459.82 7758.76,-3536.89 7819,-3631.1 7920.29,-3789.49 8132.92,-3884.79 8239.59,-3924.48"/>
<polygon fill="black" stroke="black" points="8238.68,-3927.87 8249.27,-3928.04 8241.09,-3921.3 8238.68,-3927.87"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge267" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7707.59,-3326.29C7735.5,-3340.39 7761.09,-3358.68 7783,-3382.1 7845.99,-3449.42 7754.27,-4145.44 7819,-4211.1 7861.32,-4254.03 8007.72,-4257.71 8128.62,-4252.61"/>
<polygon fill="black" stroke="black" points="8128.91,-4256.1 8138.75,-4252.16 8128.6,-4249.11 8128.91,-4256.1"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge268" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7707.59,-3285.81C7735.85,-3269.69 7761.49,-3249.42 7783,-3224.1 7866.55,-3125.71 7737,-1000.77 7819,-901.1 7892.57,-811.67 8022.79,-787.82 8129.72,-785.31"/>
<polygon fill="black" stroke="black" points="8130.05,-788.8 8139.99,-785.13 8129.93,-781.8 8130.05,-788.8"/>
</g>
<!-- build_site.main -->
<g id="node164" class="node">
<title>build_site.main</title>
<g id="a_node164"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5508.5,-534.6 5090.5,-534.6 5090.5,-469.6 5508.5,-469.6 5508.5,-534.6"/>
<text text-anchor="middle" x="5299.5" y="-489.04" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge280" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5319.24,-534.71C5371,-626.62 5515.94,-897.04 5575,-1142.1 5588.83,-1199.48 5568.28,-1631.36 5611,-1672.1 5708.16,-1764.74 6558.41,-1737.94 6989.15,-1718.04"/>
<polygon fill="black" stroke="black" points="6989.41,-1721.53 6999.24,-1717.57 6989.09,-1714.54 6989.41,-1721.53"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge274" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5427.27,-469.57C5483.2,-456.67 5549.97,-443.23 5611,-436.1 6328.97,-352.14 6514.14,-398.1 7237,-398.1 7237,-398.1 7237,-398.1 8305.5,-398.1 8371.04,-398.1 9438.26,-371.16 9485,-417.1 9527.7,-459.06 9514.49,-1434.58 9521,-1494.1 9582.6,-2057.53 9741.23,-2732.2 9779.23,-2889.28"/>
<polygon fill="black" stroke="black" points="9775.9,-2890.39 9781.66,-2899.28 9782.7,-2888.74 9775.9,-2890.39"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge269" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5319.22,-469.57C5361.1,-400.44 5469.84,-240.01 5611,-176.1 5764.63,-106.53 8253.87,-85.71 8965.72,-81.16"/>
<polygon fill="black" stroke="black" points="8965.84,-84.66 8975.82,-81.1 8965.79,-77.66 8965.84,-84.66"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge270" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5468.83,-534.63C5514.8,-542.63 5564.69,-550.49 5611,-556.1 5673.92,-563.72 5741.31,-569.86 5806.07,-574.76"/>
<polygon fill="black" stroke="black" points="5806.2,-578.28 5816.44,-575.53 5806.73,-571.3 5806.2,-578.28"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge271" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M5319.96,-534.92C5373.23,-626.84 5521.05,-896.17 5575,-1142.1 5591.04,-1215.22 5562.33,-2432.22 5611,-2489.1 5928.91,-2860.6 6206.91,-2635.23 6693,-2688.1 6695.1,-2688.32 7609.66,-2720.05 8059.48,-2735.64"/>
<polygon fill="black" stroke="black" points="8059.57,-2739.14 8069.69,-2735.99 8059.81,-2732.15 8059.57,-2739.14"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge272" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5382.79,-469.54C5445.13,-445.18 5533.07,-411.5 5611,-384.1 5754.13,-333.76 5921.22,-280.64 6027.06,-247.69"/>
<polygon fill="black" stroke="black" points="6028.28,-250.97 6036.79,-244.66 6026.2,-244.29 6028.28,-250.97"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge273" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5312.23,-469.55C5344.49,-385.58 5443.43,-162.12 5611,-75.1 5810.53,28.53 7230.54,0.7 7924.13,-19.54"/>
<polygon fill="black" stroke="black" points="7924.19,-23.04 7934.29,-19.83 7924.4,-16.04 7924.19,-23.04"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge275" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5508.7,-508.35C5639.17,-512.27 5806.36,-517.29 5934.88,-521.15"/>
<polygon fill="black" stroke="black" points="5935.14,-524.65 5945.24,-521.46 5935.35,-517.66 5935.14,-524.65"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge276" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5508.85,-498.54C5542.99,-498.02 5577.98,-497.51 5611,-497.1 6162.75,-490.11 6819.84,-485.05 7099.77,-483.04"/>
<polygon fill="black" stroke="black" points="7100,-486.54 7109.98,-482.97 7099.95,-479.54 7100,-486.54"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge277" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5319.67,-534.61C5372.53,-626.26 5520.08,-896.07 5575,-1142.1 5600.56,-1256.57 5540.97,-2103.01 5611,-2197.1 5685.42,-2297.08 5819.36,-2340.88 5932.92,-2359.78"/>
<polygon fill="black" stroke="black" points="5932.37,-2363.24 5942.8,-2361.37 5933.48,-2356.33 5932.37,-2363.24"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge278" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5508.72,-487.31C5935.65,-459.39 6940.89,-405.92 7783,-455.1 7819.37,-457.22 7857.1,-460.17 7894.88,-463.64"/>
<polygon fill="black" stroke="black" points="7894.72,-467.14 7905,-464.58 7895.37,-460.17 7894.72,-467.14"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge279" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5366.62,-534.65C5428.34,-563.59 5523.76,-604.69 5611,-627.1 5620.7,-629.59 5630.52,-631.98 5640.45,-634.28"/>
<polygon fill="black" stroke="black" points="5639.87,-637.74 5650.4,-636.55 5641.43,-630.91 5639.87,-637.74"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node168" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node168"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7352.5,-3015.1 7123.5,-3015.1 7123.5,-2979.1 7352.5,-2979.1 7352.5,-3015.1"/>
<text text-anchor="middle" x="7238" y="-2993.05" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge291" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7352.68,-2991.69C7466.39,-2990.55 7643.93,-3000.58 7783,-3062.1 7797.97,-3068.72 8168.39,-3394.19 8275.03,-3488.03"/>
<polygon fill="black" stroke="black" points="8272.99,-3490.9 8282.81,-3494.88 8277.62,-3485.64 8272.99,-3490.9"/>
</g>
<!-- clean_data._parse_date -->
<g id="node169" class="node">
<title>clean_data._parse_date</title>
<g id="a_node169"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8444,-5235.1 8165,-5235.1 8165,-5199.1 8444,-5199.1 8444,-5235.1"/>
<text text-anchor="middle" x="8304.5" y="-5211.4" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge293" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8444.26,-5200.62C8734.47,-5166.15 9400.96,-5087 9670.84,-5054.95"/>
<polygon fill="black" stroke="black" points="9671.54,-5058.39 9681.06,-5053.74 9670.71,-5051.44 9671.54,-5058.39"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node170" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node170"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7391.5,-5235.1 7084.5,-5235.1 7084.5,-5199.1 7391.5,-5199.1 7391.5,-5235.1"/>
<text text-anchor="middle" x="7238" y="-5210.94" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge294" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7391.76,-5231.52C7533.53,-5241.15 7730.35,-5243.68 7783,-5190.1 7870.65,-5100.89 7740.27,-4162.27 7819,-4065.1 7914.44,-3947.3 8105.87,-3934.96 8217.41,-3938.93"/>
<polygon fill="black" stroke="black" points="8217.48,-3942.43 8227.62,-3939.35 8217.77,-3935.44 8217.48,-3942.43"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge295" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7391.52,-5217.1C7595.04,-5217.1 7953.14,-5217.1 8154.74,-5217.1"/>
<polygon fill="black" stroke="black" points="8154.81,-5220.6 8164.81,-5217.1 8154.81,-5213.6 8154.81,-5220.6"/>
</g>
<!-- clean_data._clean_media -->
<g id="node171" class="node">
<title>clean_data._clean_media</title>
<g id="a_node171"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7428,-5293.1 7048,-5293.1 7048,-5253.1 7428,-5253.1 7428,-5293.1"/>
<text text-anchor="middle" x="7238" y="-5266.02" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge296" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7338.97,-5293.1C7454.1,-5310.69 7645.06,-5322.71 7783,-5244.1 7808.06,-5229.81 7794.53,-5205.37 7819,-5190.1 7941.1,-5113.87 8114.07,-5110.12 8216.92,-5116.26"/>
<polygon fill="black" stroke="black" points="8216.75,-5119.76 8226.95,-5116.91 8217.2,-5112.77 8216.75,-5119.76"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge297" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7428.08,-5263.15C7635.72,-5252.23 7964.81,-5234.91 8154.81,-5224.92"/>
<polygon fill="black" stroke="black" points="8155.08,-5228.41 8164.88,-5224.39 8154.71,-5221.42 8155.08,-5228.41"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node172" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node172"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7440,-4447.1 7036,-4447.1 7036,-4401.1 7440,-4401.1 7440,-4447.1"/>
<text text-anchor="middle" x="7238" y="-4415.66" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge298" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7440.1,-4437.93C7574.28,-4442.43 7734.64,-4437.12 7783,-4391.1 7835.79,-4340.85 7770.94,-4119.89 7819,-4065.1 7918.69,-3951.43 8107.68,-3937.44 8217.85,-3940.05"/>
<polygon fill="black" stroke="black" points="8217.83,-3943.55 8227.93,-3940.34 8218.04,-3936.55 8217.83,-3943.55"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge300" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7440.03,-4439.25C7575.17,-4444.51 7736.74,-4439.57 7783,-4391.1 7882.66,-4286.67 7719.09,-1897.28 7819,-1793.1 7927.04,-1680.44 8132.47,-1716.71 8237.73,-1745.34"/>
<polygon fill="black" stroke="black" points="8237.03,-1748.78 8247.6,-1748.09 8238.9,-1742.04 8237.03,-1748.78"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge299" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7440.2,-4411.66C7573.21,-4407.89 7732.1,-4413.36 7783,-4456.1 7836.17,-4500.74 7773.21,-4555.91 7819,-4608.1 7918.12,-4721.07 8094.16,-4764.95 8204.54,-4781.81"/>
<polygon fill="black" stroke="black" points="8204.28,-4785.3 8214.69,-4783.31 8205.31,-4778.38 8204.28,-4785.3"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node173" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node173"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7446,-5181.1 7030,-5181.1 7030,-5145.1 7446,-5145.1 7446,-5181.1"/>
<text text-anchor="middle" x="7238" y="-5156.94" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node174" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node174"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8518,-5339.1 8091,-5339.1 8091,-5303.1 8518,-5303.1 8518,-5339.1"/>
<text text-anchor="middle" x="8304.5" y="-5314.94" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node175" class="node">
<title>clean_data.main</title>
<g id="a_node175"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6230,-5235.1 6038,-5235.1 6038,-5199.1 6230,-5199.1 6230,-5235.1"/>
<text text-anchor="middle" x="6134" y="-5211.8" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge301" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6230.39,-5217.1C6418.83,-5217.1 6840.72,-5217.1 7074.06,-5217.1"/>
<polygon fill="black" stroke="black" points="7074.34,-5220.6 7084.34,-5217.1 7074.34,-5213.6 7074.34,-5220.6"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge302" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6230.39,-5221.94C6409.38,-5231.04 6799.03,-5250.84 7037.61,-5262.96"/>
<polygon fill="black" stroke="black" points="7037.63,-5266.47 7047.8,-5263.48 7037.99,-5259.48 7037.63,-5266.47"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge303" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6230.19,-5221.78C6350.47,-5221.93 6554.18,-5201.81 6657,-5075.1 6743.82,-4968.1 6595.6,-4553.56 6693,-4456.1 6739.07,-4409.99 6893.14,-4404.25 7025.6,-4408.77"/>
<polygon fill="black" stroke="black" points="7025.79,-4412.28 7035.91,-4409.15 7026.04,-4405.29 7025.79,-4412.28"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge304" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6230.39,-5212.42C6404.94,-5203.87 6779.8,-5185.5 7019.56,-5173.75"/>
<polygon fill="black" stroke="black" points="7019.99,-5177.23 7029.81,-5173.25 7019.65,-5170.24 7019.99,-5177.23"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge305" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6226.86,-5235.11C6337.07,-5255.79 6527.7,-5288.6 6693,-5302.1 7187.19,-5342.45 7769.47,-5336.02 8080.69,-5328.25"/>
<polygon fill="black" stroke="black" points="8080.82,-5331.75 8090.73,-5328 8080.65,-5324.75 8080.82,-5331.75"/>
</g>
<!-- check_translations.parse_po -->
<g id="node176" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="9447.5,-957.1 8863.5,-957.1 8863.5,-905.1 9447.5,-905.1 9447.5,-957.1"/>
<text text-anchor="middle" x="9155.5" y="-921.4" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node177" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="8637,-955.6 7972,-955.6 7972,-910.6 8637,-910.6 8637,-955.6"/>
<text text-anchor="middle" x="8304.5" y="-924.72" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge309" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M8637.09,-932.31C8708.25,-932.15 8783.08,-931.97 8853.03,-931.81"/>
<polygon fill="black" stroke="black" points="8853.33,-935.3 8863.32,-931.78 8853.31,-928.3 8853.33,-935.3"/>
</g>
<!-- pending_chop.main -->
<g id="node178" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7405.5,-1666.6 7070.5,-1666.6 7070.5,-1623.6 7405.5,-1623.6 7405.5,-1666.6"/>
<text text-anchor="middle" x="7238" y="-1636.95" font-family="Times,serif" font-size="32.06">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge310" class="edge">
<title>pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7405.5,-1656.79C7544.24,-1662.8 7727.77,-1660.86 7783,-1614.1 7838.3,-1567.28 7766.83,-1505.37 7819,-1455.1 7900.19,-1376.86 8026.12,-1355.05 8129.24,-1352.3"/>
<polygon fill="black" stroke="black" points="8129.54,-1355.8 8139.47,-1352.09 8129.4,-1348.8 8129.54,-1355.8"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge311" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7405.68,-1634.4C7543.75,-1629.12 7726.18,-1631.57 7783,-1676.1 7825.83,-1709.65 7776.15,-1759.57 7819,-1793.1 7936.3,-1884.88 8122.66,-1862.77 8226.75,-1840.3"/>
<polygon fill="black" stroke="black" points="8227.55,-1843.71 8236.56,-1838.13 8226.04,-1836.87 8227.55,-1843.71"/>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge312" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7405.75,-1631.05C7546.25,-1623.29 7732.27,-1623.99 7783,-1676.1 7875.13,-1770.71 7741.88,-2756.89 7819,-2864.1 7868.82,-2933.35 7948.51,-2975.85 8029.01,-3001.92"/>
<polygon fill="black" stroke="black" points="8028.24,-3005.34 8038.83,-3005.01 8030.34,-2998.67 8028.24,-3005.34"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node179" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node179"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="8713.5,-2018.6 7895.5,-2018.6 7895.5,-1961.6 8713.5,-1961.6 8713.5,-2018.6"/>
<text text-anchor="middle" x="8304.5" y="-1978.76" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge313" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8713.59,-2016.91C8741.31,-2029.61 8767.22,-2045.75 8790,-2066.1 8996.33,-2250.36 9127.94,-3188.02 9150.9,-3362.97"/>
<polygon fill="black" stroke="black" points="9147.44,-3363.47 9152.2,-3372.94 9154.38,-3362.57 9147.44,-3363.47"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge314" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8601.64,-1961.52C8673.34,-1940.33 8742.82,-1905.1 8790,-1847.1 8851.76,-1771.16 8765.62,-1485.14 8826,-1408.1 8879.35,-1340.03 8976.41,-1313.72 9051.24,-1303.74"/>
<polygon fill="black" stroke="black" points="9051.7,-1307.21 9061.18,-1302.49 9050.82,-1300.26 9051.7,-1307.21"/>
</g>
<!-- pending_embed.main -->
<g id="node180" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6400.5,-1370.1 5867.5,-1370.1 5867.5,-1310.1 6400.5,-1310.1 6400.5,-1370.1"/>
<text text-anchor="middle" x="6134" y="-1328.13" font-family="Times,serif" font-size="47.46">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge315" class="edge">
<title>pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6400.74,-1310.25C6493.13,-1301.23 6597.51,-1292.53 6693,-1288.1 6813.98,-1282.47 7673.56,-1236.23 7783,-1288.1 7805.83,-1298.92 7796.54,-1320.53 7819,-1332.1 7927.16,-1387.79 8067.35,-1390.86 8169.08,-1382.94"/>
<polygon fill="black" stroke="black" points="8169.44,-1386.42 8179.11,-1382.11 8168.86,-1379.44 8169.44,-1386.42"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge316" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6300.37,-1310.08C6411.06,-1291.55 6560.24,-1269.56 6693,-1260.1 6934.61,-1242.86 7561.11,-1162.95 7783,-1260.1 7804.61,-1269.56 7797.58,-1289.21 7819,-1299.1 7917.04,-1344.33 8683.36,-1320.19 8790,-1337.1 8893.65,-1353.53 9009.72,-1389.5 9082.44,-1414.26"/>
<polygon fill="black" stroke="black" points="9081.38,-1417.6 9091.97,-1417.53 9083.65,-1410.98 9081.38,-1417.6"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge317" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6400.76,-1322.02C6493.18,-1302.75 6590.29,-1265.79 6657,-1196.1 6706.5,-1144.38 6639.83,-1087.03 6693,-1039.1 6866.43,-882.74 8588.83,-782.55 8790,-901.1 8818.45,-917.86 8798.26,-948.18 8826,-966.1 8867.82,-993.11 8919.16,-1004.88 8968.72,-1008.65"/>
<polygon fill="black" stroke="black" points="8968.72,-1012.16 8978.93,-1009.31 8969.18,-1005.17 8968.72,-1012.16"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge318" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6338.18,-1370.1C6451.24,-1398.06 6583.58,-1451.86 6657,-1555.1 6698.21,-1613.05 6642.18,-2144.35 6693,-2194.1 6779.6,-2278.86 7696.37,-2147.35 7783,-2232.1 7833.28,-2281.28 7777.17,-2807.55 7819,-2864.1 7870.25,-2933.37 7951.28,-2975.86 8032.53,-3001.91"/>
<polygon fill="black" stroke="black" points="8031.85,-3005.36 8042.44,-3005.01 8033.94,-2998.68 8031.85,-3005.36"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge320" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6210.64,-1370.25C6316.53,-1410.85 6515.88,-1481.4 6693,-1511.1 6932.03,-1551.17 7546.21,-1497.4 7783,-1549.1 7971.04,-1590.14 8177.22,-1696.11 8262.79,-1743.09"/>
<polygon fill="black" stroke="black" points="8261.21,-1746.21 8271.66,-1747.98 8264.59,-1740.09 8261.21,-1746.21"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge319" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6343.54,-1370.1C6456.18,-1398.01 6586.31,-1451.75 6657,-1555.1 6714.31,-1638.89 6622.3,-3309.25 6693,-3382.1 6745.13,-3435.81 6940.86,-3433.41 7082.62,-3423.76"/>
<polygon fill="black" stroke="black" points="7083,-3427.24 7092.73,-3423.06 7082.51,-3420.26 7083,-3427.24"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge322" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6400.79,-1338.75C6727.13,-1339.53 7297.11,-1348.76 7783,-1397.1 7930.23,-1411.74 8098.9,-1442.15 8203.33,-1462.59"/>
<polygon fill="black" stroke="black" points="8202.75,-1466.04 8213.24,-1464.54 8204.1,-1459.18 8202.75,-1466.04"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge321" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6234.63,-1310.07C6345.35,-1278.39 6530.05,-1230.55 6693,-1212.1 7174.37,-1157.59 7330.18,-1039.93 7783,-1212.1 7803.01,-1219.7 7799.22,-1235.91 7819,-1244.1 7937.55,-1293.13 8086.49,-1293.74 8187.72,-1286.18"/>
<polygon fill="black" stroke="black" points="8188.28,-1289.65 8197.98,-1285.38 8187.73,-1282.67 8188.28,-1289.65"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge323" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6333.27,-1370.17C6446.62,-1398.22 6580.97,-1452.09 6657,-1555.1 6708.95,-1625.48 6629.17,-1887.28 6693,-1947.1 6778.16,-2026.9 7436.92,-2020.92 7885.09,-2007.09"/>
<polygon fill="black" stroke="black" points="7885.42,-2010.58 7895.31,-2006.77 7885.21,-2003.59 7885.42,-2010.58"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node181" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node181"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8455,-2855.1 8154,-2855.1 8154,-2819.1 8455,-2819.1 8455,-2855.1"/>
<text text-anchor="middle" x="8304.5" y="-2833.05" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node182" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6370.5,-2931.6 5897.5,-2931.6 5897.5,-2878.6 6370.5,-2878.6 6370.5,-2931.6"/>
<text text-anchor="middle" x="6134" y="-2894.89" font-family="Times,serif" font-size="40.88">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge324" class="edge">
<title>pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6370.81,-2918.67C6489.88,-2919.87 6617.37,-2910.54 6657,-2869.1 6714.8,-2808.64 6633.16,-1422.52 6693,-1364.1 6743.67,-1314.62 7722.99,-1343.46 8129.22,-1357.64"/>
<polygon fill="black" stroke="black" points="8129.19,-1361.14 8139.3,-1357.99 8129.43,-1354.15 8129.19,-1361.14"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge325" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6370.81,-2909.51C6461.71,-2905.87 6565.59,-2895.11 6657,-2869.1 6674.4,-2864.14 6675.59,-2855.01 6693,-2850.1 6809.8,-2817.15 7698.08,-2866.79 7783,-2780.1 7847.44,-2714.31 7761.52,-2024.04 7819,-1952.1 7891.75,-1861.04 8020.65,-1829.09 8127.21,-1819.34"/>
<polygon fill="black" stroke="black" points="8127.78,-1822.81 8137.45,-1818.47 8127.19,-1815.83 8127.78,-1822.81"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge326" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6370.57,-2896.3C6691.19,-2887.36 7282.4,-2881.73 7783,-2937.1 7905.32,-2950.62 8041.54,-2978.85 8143.95,-3002.78"/>
<polygon fill="black" stroke="black" points="8143.21,-3006.2 8153.75,-3005.08 8144.81,-2999.39 8143.21,-3006.2"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge327" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6370.55,-2891.44C6489.75,-2890.19 6617.46,-2899.49 6657,-2941.1 6733.14,-3021.2 6615.51,-4851.3 6693,-4930.1 6777.97,-5016.5 7687.84,-4893.06 7783,-4968.1 7830.08,-5005.22 7772.31,-5060.48 7819,-5098.1 7935.62,-5192.05 8123.9,-5168.54 8228.08,-5145.4"/>
<polygon fill="black" stroke="black" points="8228.93,-5148.79 8237.9,-5143.16 8227.37,-5141.97 8228.93,-5148.79"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge328" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6370.59,-2919.97C6460.29,-2925.99 6563.41,-2933.35 6657,-2941.1 6814.6,-2954.14 6995.99,-2972.13 7113.35,-2984.17"/>
<polygon fill="black" stroke="black" points="7113.14,-2987.66 7123.45,-2985.2 7113.86,-2980.7 7113.14,-2987.66"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge329" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6370.68,-2897.7C6814.92,-2883.77 7765.46,-2853.97 8143.57,-2842.11"/>
<polygon fill="black" stroke="black" points="8143.88,-2845.6 8153.76,-2841.79 8143.66,-2838.61 8143.88,-2845.6"/>
</g>
<!-- similar:cli -->
<g id="node184" class="node">
<title>similar:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1836" cy="-5721.1" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1836" y="-5719.5" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;similar:cli -->
<!-- debug_dump:cli -->
<g id="node185" class="node">
<title>debug_dump:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2403.5" cy="-5721.1" rx="41.11" ry="18"/>
<text text-anchor="middle" x="2403.5" y="-5719.5" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;debug_dump:cli -->
<!-- tg_client:cli -->
<g id="node186" class="node">
<title>tg_client:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3008.5" cy="-5721.1" rx="32.86" ry="18"/>
<text text-anchor="middle" x="3008.5" y="-5719.5" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;tg_client:cli -->
<!-- cluster_items:cli -->
<g id="node187" class="node">
<title>cluster_items:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3855" cy="-5721.1" rx="42.34" ry="18"/>
<text text-anchor="middle" x="3855" y="-5719.5" font-family="Times,serif" font-size="7.00">cluster_items:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;cluster_items:cli -->
<!-- price_train:cli -->
<g id="node188" class="node">
<title>price_train:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5776.1" rx="36.68" ry="18"/>
<text text-anchor="middle" x="141" y="-5774.5" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli -->
<g id="node189" class="node">
<title>telegram_bot:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5776.1" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="602" y="-5771.93" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;telegram_bot:cli -->
<!-- scan_ontology:cli -->
<g id="node190" class="node">
<title>scan_ontology:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5776.1" rx="44.19" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5774.5" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;scan_ontology:cli -->
<!-- chop:cli -->
<g id="node191" class="node">
<title>chop:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1836" cy="-5776.1" rx="27" ry="18"/>
<text text-anchor="middle" x="1836" y="-5774.5" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;chop:cli -->
<!-- embed:cli -->
<g id="node192" class="node">
<title>embed:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2403.5" cy="-5776.1" rx="29.05" ry="18"/>
<text text-anchor="middle" x="2403.5" y="-5774.5" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;embed:cli -->
<!-- build_site:cli -->
<g id="node193" class="node">
<title>build_site:cli</title>
<g id="a_node193"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3008.5" cy="-5776.1" rx="34.71" ry="18"/>
<text text-anchor="middle" x="3008.5" y="-5774.5" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;build_site:cli -->
<!-- clean_data:cli -->
<g id="node194" class="node">
<title>clean_data:cli</title>
<g id="a_node194"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3855" cy="-5776.1" rx="37.29" ry="18"/>
<text text-anchor="middle" x="3855" y="-5774.5" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;clean_data:cli -->
<!-- check_translations:cli -->
<g id="node195" class="node">
<title>check_translations:cli</title>
<g id="a_node195"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5831.1" rx="73.67" ry="18"/>
<text text-anchor="middle" x="141" y="-5828.64" font-family="Times,serif" font-size="9.94">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli -->
<g id="node196" class="node">
<title>pending_chop:cli</title>
<g id="a_node196"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5831.1" rx="42.96" ry="18"/>
<text text-anchor="middle" x="602" y="-5829.5" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- pending_embed:cli -->
<g id="node197" class="node">
<title>pending_embed:cli</title>
<g id="a_node197"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5831.1" rx="47.39" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5829.5" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_embed:cli -->
<!-- pending_caption:cli -->
<g id="node198" class="node">
<title>pending_caption:cli</title>
<g id="a_node198"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1836" cy="-5831.1" rx="48.62" ry="18"/>
<text text-anchor="middle" x="1836" y="-5829.5" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli&#45;&gt;pending_caption:cli -->
<!-- build_site -->
<g id="node199" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4743.5" cy="-502.1" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4743.5" y="-498.4" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge344" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4799.65,-502.1C4865.07,-502.1 4978.14,-502.1 5080.11,-502.1"/>
<polygon fill="black" stroke="black" points="5080.25,-505.6 5090.25,-502.1 5080.25,-498.6 5080.25,-505.6"/>
</g>
<!-- caption -->
<g id="node200" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-4708.1" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-4704.4" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge345" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5344.38,-4708.1C5472.49,-4708.1 5848.48,-4708.1 6031.11,-4708.1"/>
<polygon fill="black" stroke="black" points="6031.26,-4711.6 6041.26,-4708.1 6031.26,-4704.6 6031.26,-4711.6"/>
</g>
<!-- check_translations -->
<g id="node201" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="7238" cy="-1066.1" rx="96.68" ry="18"/>
<text text-anchor="middle" x="7238" y="-1062.4" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge346" class="edge">
<title>check_translations:cli&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7326.5,-1058.69C7462.95,-1049.14 7717.61,-1040.03 7783,-1098.1 7850.86,-1158.36 7753.43,-1236.34 7819,-1299.1 7916.81,-1392.7 8080.84,-1394.89 8190.6,-1383.24"/>
<polygon fill="black" stroke="black" points="8191.16,-1386.7 8200.71,-1382.11 8190.39,-1379.75 8191.16,-1386.7"/>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge347" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M7330.69,-1071.33C7465.92,-1077.3 7710.67,-1080.9 7783,-1034.1 7812.04,-1015.3 7790.03,-983.99 7819,-965.1 7924.51,-896.28 8071.92,-896.9 8176.37,-909.34"/>
<polygon fill="black" stroke="black" points="8175.99,-912.82 8186.34,-910.58 8176.85,-905.87 8175.99,-912.82"/>
</g>
<!-- chop -->
<g id="node202" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4743.5" cy="-5142.1" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4743.5" y="-5138.4" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge348" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4776.28,-5142.1C4859.91,-5142.1 5088.32,-5142.1 5213.56,-5142.1"/>
<polygon fill="black" stroke="black" points="5213.88,-5145.6 5223.88,-5142.1 5213.88,-5138.6 5213.88,-5145.6"/>
</g>
<!-- clean_data -->
<g id="node203" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-5217.1" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-5213.4" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge349" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5359.37,-5217.1C5498.77,-5217.1 5850.57,-5217.1 6027.69,-5217.1"/>
<polygon fill="black" stroke="black" points="6027.8,-5220.6 6037.8,-5217.1 6027.8,-5213.6 6027.8,-5220.6"/>
</g>
<!-- cluster_items -->
<g id="node204" class="node">
<title>cluster_items</title>
<ellipse fill="none" stroke="black" cx="4743.5" cy="-1545.1" rx="73.39" ry="18"/>
<text text-anchor="middle" x="4743.5" y="-1541.4" font-family="Times,serif" font-size="14.00">cluster_items</text>
</g>
<!-- cluster_items&#45;&gt;cluster_items.main -->
<g id="edge350" class="edge">
<title>cluster_items:cli&#45;&gt;cluster_items.main</title>
<path fill="none" stroke="black" d="M4817.21,-1545.1C4909.44,-1545.1 5069.72,-1545.1 5179.79,-1545.1"/>
<polygon fill="black" stroke="black" points="5179.95,-1548.6 5189.95,-1545.1 5179.95,-1541.6 5179.95,-1548.6"/>
</g>
<!-- debug_dump -->
<g id="node205" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-4490.1" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-4486.4" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge351" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5370.05,-4490.1C5481.79,-4490.1 5706.7,-4490.1 5883.51,-4490.1"/>
<polygon fill="black" stroke="black" points="5883.75,-4493.6 5893.75,-4490.1 5883.75,-4486.6 5883.75,-4493.6"/>
</g>
<!-- embed -->
<g id="node206" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-2065.1" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-2061.4" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge352" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5341.78,-2065.1C5468.41,-2065.1 5853.73,-2065.1 6035.77,-2065.1"/>
<polygon fill="black" stroke="black" points="6035.88,-2068.6 6045.88,-2065.1 6035.88,-2061.6 6035.88,-2068.6"/>
</g>
<!-- moderation -->
<g id="node207" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6134" cy="-1582.1" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6134" y="-1578.4" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge353" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6197.81,-1582.1C6343.31,-1582.1 6710.64,-1582.1 6967.06,-1582.1"/>
<polygon fill="black" stroke="black" points="6967.28,-1585.6 6977.28,-1582.1 6967.28,-1578.6 6967.28,-1585.6"/>
</g>
<!-- pending_caption -->
<g id="node208" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-2905.1" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-2901.4" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge354" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5386.85,-2905.1C5504.09,-2905.1 5718.41,-2905.1 5887.37,-2905.1"/>
<polygon fill="black" stroke="black" points="5887.41,-2908.6 5897.41,-2905.1 5887.41,-2901.6 5887.41,-2908.6"/>
</g>
<!-- pending_chop -->
<g id="node209" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6134" cy="-1645.1" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6134" y="-1641.4" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge355" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6209.02,-1645.1C6381.68,-1645.1 6815.03,-1645.1 7060.4,-1645.1"/>
<polygon fill="black" stroke="black" points="7060.5,-1648.6 7070.5,-1645.1 7060.5,-1641.6 7060.5,-1648.6"/>
</g>
<!-- pending_embed -->
<g id="node210" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-1340.1" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-1336.4" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge356" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5383.37,-1340.1C5493.04,-1340.1 5691.82,-1340.1 5857.14,-1340.1"/>
<polygon fill="black" stroke="black" points="5857.48,-1343.6 5867.48,-1340.1 5857.48,-1336.6 5857.48,-1343.6"/>
</g>
<!-- price_train -->
<g id="node211" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-1169.1" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-1165.4" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge357" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5360.71,-1169.1C5496.15,-1169.1 5827.17,-1169.1 6008.76,-1169.1"/>
<polygon fill="black" stroke="black" points="6008.9,-1172.6 6018.9,-1169.1 6008.9,-1165.6 6008.9,-1172.6"/>
</g>
<!-- scan_ontology -->
<g id="node212" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4743.5" cy="-1686.1" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4743.5" y="-1682.4" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge358" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4819.79,-1686.1C4881.76,-1686.1 4973.14,-1686.1 5059.5,-1686.1"/>
<polygon fill="black" stroke="black" points="5059.73,-1689.6 5069.73,-1686.1 5059.73,-1682.6 5059.73,-1689.6"/>
</g>
<!-- similar -->
<g id="node213" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5299.5" cy="-2167.1" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5299.5" y="-2163.4" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge359" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5342.64,-2167.1C5466.3,-2167.1 5831.23,-2167.1 6018.82,-2167.1"/>
<polygon fill="black" stroke="black" points="6018.99,-2170.6 6028.99,-2167.1 6018.99,-2163.6 6018.99,-2170.6"/>
</g>
<!-- telegram_bot -->
<g id="node214" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="3855" cy="-5168.1" rx="72.29" ry="18"/>
<text text-anchor="middle" x="3855" y="-5164.4" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge360" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M3926.55,-5165.71C4044.68,-5164.68 4286.84,-5175.44 4463,-5269.1 4483.54,-5280.02 4480.7,-5292.73 4499,-5307.1 4561.18,-5355.91 4642.45,-5398.72 4693.58,-5423.51"/>
<polygon fill="black" stroke="black" points="4692.23,-5426.75 4702.76,-5427.93 4695.27,-5420.44 4692.23,-5426.75"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge361" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M3922.27,-5161.52C4057.59,-5148.08 4369.57,-5117.12 4567.39,-5097.48"/>
<polygon fill="black" stroke="black" points="4568,-5100.94 4577.6,-5096.46 4567.3,-5093.97 4568,-5100.94"/>
</g>
<!-- tg_client -->
<g id="node215" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4411.1" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-4407.4" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge362" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M191.99,-4411.1C222.07,-4411.1 263.09,-4411.1 307.59,-4411.1"/>
<polygon fill="black" stroke="black" points="307.75,-4414.6 317.75,-4411.1 307.75,-4407.6 307.75,-4414.6"/>
</g>
</g>
</svg>
