<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="4484pt" height="10381pt"
 viewBox="0.00 0.00 4483.68 10381.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 10377)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-10377 4479.68,-10377 4479.68,4 -4,4"/>
<!-- moderation.should_skip_text -->
<g id="node1" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node1"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="4222.68,-7653.5 4127.68,-7653.5 4127.68,-7558.5 4222.68,-7558.5 4222.68,-7653.5"/>
<text text-anchor="middle" x="4175.18" y="-7602.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node2" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node2"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="4215.68,-9218.5 4134.68,-9218.5 4134.68,-9137.5 4215.68,-9137.5 4215.68,-9218.5"/>
<text text-anchor="middle" x="4175.18" y="-9174.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason -->
<g id="node3" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node3"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="3983.18,-7692.5 3810.18,-7692.5 3810.18,-7519.5 3983.18,-7519.5 3983.18,-7692.5"/>
<text text-anchor="middle" x="3896.68" y="-7602.3" font-family="Times,serif" font-size="14.00">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge1" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M3983.28,-7606C4026.95,-7606 4078.88,-7606 4117.54,-7606"/>
<polygon fill="black" stroke="black" points="4117.57,-7609.5 4127.57,-7606 4117.57,-7602.5 4117.57,-7609.5"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge2" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3983.46,-7677.73C4011.49,-7706.36 4039.35,-7741.65 4054.68,-7780 4110.31,-7919.12 4015.07,-8998.65 4090.68,-9128 4098.66,-9141.64 4111.95,-9151.99 4125.61,-9159.63"/>
<polygon fill="black" stroke="black" points="4124.09,-9162.79 4134.58,-9164.26 4127.3,-9156.57 4124.09,-9162.79"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node4" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node4"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="3536.18,-6730.5 3441.18,-6730.5 3441.18,-6635.5 3536.18,-6635.5 3536.18,-6730.5"/>
<text text-anchor="middle" x="3488.68" y="-6679.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge3" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M3536.53,-6689.49C3586.89,-6699.2 3664.82,-6722.71 3702.68,-6778 3794.07,-6911.47 3657.71,-7364.97 3738.68,-7505 3753.2,-7530.1 3776.74,-7549.99 3801.22,-7565.24"/>
<polygon fill="black" stroke="black" points="3799.53,-7568.31 3809.91,-7570.45 3803.13,-7562.31 3799.53,-7568.31"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node5" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node5"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3959.18,-3096.5 3834.18,-3096.5 3834.18,-2971.5 3959.18,-2971.5 3959.18,-3096.5"/>
<text text-anchor="middle" x="3896.68" y="-3030.3" font-family="Times,serif" font-size="14.00">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node6" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node6"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="3536.18,-3051.5 3441.18,-3051.5 3441.18,-2956.5 3536.18,-2956.5 3536.18,-3051.5"/>
<text text-anchor="middle" x="3488.68" y="-3000.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge4" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M3536.26,-3007.44C3606.74,-3012.65 3741.05,-3022.57 3824.04,-3028.71"/>
<polygon fill="black" stroke="black" points="3823.92,-3032.21 3834.15,-3029.45 3824.43,-3025.23 3823.92,-3032.21"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node7" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node7"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="3573.18,-2359.5 3404.18,-2359.5 3404.18,-2190.5 3573.18,-2190.5 3573.18,-2359.5"/>
<text text-anchor="middle" x="3488.68" y="-2271.3" font-family="Times,serif" font-size="14.00">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node8" class="node">
<title>lot_io.get_seller</title>
<g id="a_node8"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3956.68,-2239 3836.68,-2239 3836.68,-2119 3956.68,-2119 3956.68,-2239"/>
<text text-anchor="middle" x="3896.68" y="-2175.3" font-family="Times,serif" font-size="14.00">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge5" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3573.31,-2255.23C3648.1,-2237.54 3756.4,-2211.93 3826.43,-2195.37"/>
<polygon fill="black" stroke="black" points="3827.55,-2198.71 3836.48,-2193 3825.94,-2191.89 3827.55,-2198.71"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node9" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node9"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="3107.18,-4433 2931.18,-4433 2931.18,-4257 3107.18,-4257 3107.18,-4433"/>
<text text-anchor="middle" x="3019.18" y="-4341.3" font-family="Times,serif" font-size="14.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge6" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3038.46,-4433.09C3081.81,-4646 3190.74,-5205.9 3238.68,-5679 3248.86,-5779.45 3218.22,-6503.3 3274.68,-6587 3309.91,-6639.22 3380.79,-6663.41 3431.09,-6674.36"/>
<polygon fill="black" stroke="black" points="3430.68,-6677.85 3441.18,-6676.44 3432.09,-6671 3430.68,-6677.85"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge7" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3107.21,-4329.57C3154.43,-4316.35 3209.05,-4292.1 3238.68,-4248 3312.34,-4138.39 3192.47,-3163.35 3274.68,-3060 3311.35,-3013.91 3381.01,-3003.01 3430.69,-3001.64"/>
<polygon fill="black" stroke="black" points="3431.02,-3005.13 3440.96,-3001.48 3430.91,-2998.13 3431.02,-3005.13"/>
</g>
<!-- lot_io.read_lots -->
<g id="node10" class="node">
<title>lot_io.read_lots</title>
<g id="a_node10"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3961.68,-4058 3831.68,-4058 3831.68,-3928 3961.68,-3928 3961.68,-4058"/>
<text text-anchor="middle" x="3896.68" y="-3989.3" font-family="Times,serif" font-size="14.00">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge8" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3107.31,-4324.6C3152.05,-4310.05 3204.25,-4286.11 3238.68,-4248 3273.16,-4209.83 3236.76,-4172.76 3274.68,-4138 3354.43,-4064.9 3674.34,-4018.9 3821.24,-4001.23"/>
<polygon fill="black" stroke="black" points="3822,-4004.67 3831.52,-4000.01 3821.17,-3997.72 3822,-4004.67"/>
</g>
<!-- post_io.read_post -->
<g id="node11" class="node">
<title>post_io.read_post</title>
<g id="a_node11"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="4054.68,-4405 3738.68,-4405 3738.68,-4089 4054.68,-4089 4054.68,-4405"/>
<text text-anchor="middle" x="3896.68" y="-4243.3" font-family="Times,serif" font-size="14.00">post_io.read_post</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge9" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3107.27,-4322.47C3151.18,-4307.43 3202.63,-4283.7 3238.68,-4248 3266.1,-4220.85 3242.23,-4189.87 3274.68,-4169 3354.67,-4117.55 3609.32,-4150.85 3702.68,-4169 3711.32,-4170.68 3720.05,-4172.74 3728.8,-4175.11"/>
<polygon fill="black" stroke="black" points="3728.09,-4178.54 3738.67,-4177.89 3729.99,-4171.81 3728.09,-4178.54"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node12" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node12"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="3928.18,-6302.5 3865.18,-6302.5 3865.18,-6239.5 3928.18,-6239.5 3928.18,-6302.5"/>
<text text-anchor="middle" x="3896.68" y="-6267.3" font-family="Times,serif" font-size="14.00">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge10" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3055,-4433.31C3094.32,-4520.12 3167.15,-4648.43 3274.68,-4711 3357.23,-4759.04 3637.43,-4680.26 3702.68,-4750 3758.87,-4810.06 3687.62,-6165.53 3738.68,-6230 3765.9,-6264.37 3818.06,-6272.1 3854.76,-6272.88"/>
<polygon fill="black" stroke="black" points="3855.13,-6276.39 3865.14,-6272.93 3855.16,-6269.39 3855.13,-6276.39"/>
</g>
<!-- notes_utils.load_json -->
<g id="node22" class="node">
<title>notes_utils.load_json</title>
<g id="a_node22"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="4232.18,-7250 4118.18,-7250 4118.18,-7136 4232.18,-7136 4232.18,-7250"/>
<text text-anchor="middle" x="4175.18" y="-7189.3" font-family="Times,serif" font-size="14.00">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge115" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3961.97,-4011.33C3995.8,-4024.58 4034.37,-4046.22 4054.68,-4080 4083.33,-4127.64 4088.1,-6025.47 4090.68,-6081 4109.13,-6477.77 4151.64,-6952.79 4167.79,-7125.8"/>
<polygon fill="black" stroke="black" points="4164.31,-7126.15 4168.73,-7135.78 4171.28,-7125.5 4164.31,-7126.15"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node77" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node77"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="4206.68,-3352.5 4143.68,-3352.5 4143.68,-3289.5 4206.68,-3289.5 4206.68,-3352.5"/>
<text text-anchor="middle" x="4175.18" y="-3317.3" font-family="Times,serif" font-size="14.00">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge114" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3924.45,-3927.96C3980.94,-3790.65 4110.98,-3474.6 4157.37,-3361.87"/>
<polygon fill="black" stroke="black" points="4160.64,-3363.12 4161.21,-3352.54 4154.16,-3360.46 4160.64,-3363.12"/>
</g>
<!-- notes_utils.read_md -->
<g id="node37" class="node">
<title>notes_utils.read_md</title>
<g id="a_node37"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="4206.68,-4787.5 4143.68,-4787.5 4143.68,-4724.5 4206.68,-4724.5 4206.68,-4787.5"/>
<text text-anchor="middle" x="4175.18" y="-4752.3" font-family="Times,serif" font-size="14.00">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge123" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M4035.21,-4405.12C4042.14,-4415.33 4048.69,-4425.67 4054.68,-4436 4108.77,-4529.32 4146.32,-4651.56 4163.53,-4714.52"/>
<polygon fill="black" stroke="black" points="4160.23,-4715.73 4166.22,-4724.47 4166.99,-4713.9 4160.23,-4715.73"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node87" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node87"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="4242.68,-4463.5 4107.68,-4463.5 4107.68,-4328.5 4242.68,-4328.5 4242.68,-4463.5"/>
<text text-anchor="middle" x="4175.18" y="-4392.3" font-family="Times,serif" font-size="14.00">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge124" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M4054.92,-4331.73C4070.08,-4339.9 4084.93,-4347.9 4098.72,-4355.33"/>
<polygon fill="black" stroke="black" points="4097.16,-4358.47 4107.62,-4360.13 4100.48,-4352.31 4097.16,-4358.47"/>
</g>
<!-- embed.embed_file -->
<g id="node13" class="node">
<title>embed.embed_file</title>
<g id="a_node13"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="3598.18,-3288.5 3379.18,-3288.5 3379.18,-3069.5 3598.18,-3069.5 3598.18,-3288.5"/>
<text text-anchor="middle" x="3488.68" y="-3175.3" font-family="Times,serif" font-size="14.00">embed.embed_file</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge11" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3598.37,-3219.09C3636.17,-3237.86 3675.79,-3263.78 3702.68,-3298 3850.55,-3486.15 3885.2,-3780.66 3893.27,-3917.91"/>
<polygon fill="black" stroke="black" points="3889.78,-3918.12 3893.83,-3927.91 3896.77,-3917.73 3889.78,-3918.12"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node14" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node14"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="3944.18,-3248.5 3849.18,-3248.5 3849.18,-3153.5 3944.18,-3153.5 3944.18,-3248.5"/>
<text text-anchor="middle" x="3896.68" y="-3197.3" font-family="Times,serif" font-size="14.00">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge12" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M3598.22,-3184.88C3675.76,-3189.08 3776.97,-3194.57 3839.1,-3197.93"/>
<polygon fill="black" stroke="black" points="3838.92,-3201.43 3849.1,-3198.48 3839.3,-3194.44 3838.92,-3201.43"/>
</g>
<!-- notes_utils.write_json -->
<g id="node15" class="node">
<title>notes_utils.write_json</title>
<g id="a_node15"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="4215.68,-2523.5 4134.68,-2523.5 4134.68,-2442.5 4215.68,-2442.5 4215.68,-2523.5"/>
<text text-anchor="middle" x="4175.18" y="-2479.3" font-family="Times,serif" font-size="14.00">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge13" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3598.41,-3163.31C3641.99,-3157.13 3692.7,-3150.07 3738.68,-3144 3808.83,-3134.74 4003,-3153.33 4054.68,-3105 4137.85,-3027.23 4164.66,-2668.2 4171.87,-2533.89"/>
<polygon fill="black" stroke="black" points="4175.37,-2534.03 4172.4,-2523.86 4168.38,-2533.67 4175.37,-2534.03"/>
</g>
<!-- embed.main -->
<g id="node16" class="node">
<title>embed.main</title>
<g id="a_node16"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="3084.18,-2913 2954.18,-2913 2954.18,-2783 3084.18,-2783 3084.18,-2913"/>
<text text-anchor="middle" x="3019.18" y="-2844.3" font-family="Times,serif" font-size="14.00">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge14" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M3084.25,-2907.07C3134.19,-2951.68 3206.31,-3013.02 3274.68,-3060 3304.68,-3080.61 3338.54,-3100.79 3370.28,-3118.51"/>
<polygon fill="black" stroke="black" points="3368.73,-3121.65 3379.17,-3123.44 3372.12,-3115.53 3368.73,-3121.65"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node17" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node17"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="3529.18,-6868.5 3448.18,-6868.5 3448.18,-6787.5 3529.18,-6787.5 3529.18,-6868.5"/>
<text text-anchor="middle" x="3488.68" y="-6824.3" font-family="Times,serif" font-size="14.00">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- debug_dump.parse_url -->
<g id="node18" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node18"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="3551.18,-9010.5 3426.18,-9010.5 3426.18,-8885.5 3551.18,-8885.5 3551.18,-9010.5"/>
<text text-anchor="middle" x="3488.68" y="-8944.3" font-family="Times,serif" font-size="14.00">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node19" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node19"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="3956.68,-9503 3836.68,-9503 3836.68,-9383 3956.68,-9383 3956.68,-9503"/>
<text text-anchor="middle" x="3896.68" y="-9439.3" font-family="Times,serif" font-size="14.00">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node20" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node20"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="3571.18,-9464.5 3406.18,-9464.5 3406.18,-9299.5 3571.18,-9299.5 3571.18,-9464.5"/>
<text text-anchor="middle" x="3488.68" y="-9378.3" font-family="Times,serif" font-size="14.00">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node21" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node21"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="3932.68,-8496 3860.68,-8496 3860.68,-8424 3932.68,-8424 3932.68,-8496"/>
<text text-anchor="middle" x="3896.68" y="-8456.3" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge15" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3571.2,-9368.56C3617.76,-9356.35 3672.68,-9333.28 3702.68,-9290 3795.1,-9156.7 3657.49,-8701.42 3738.68,-8561 3763.25,-8518.5 3813.71,-8490.94 3850.82,-8475.51"/>
<polygon fill="black" stroke="black" points="3852.44,-8478.63 3860.42,-8471.66 3849.83,-8472.13 3852.44,-8478.63"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge16" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3571.36,-9378.13C3712.69,-9369.56 3993.67,-9343.61 4054.68,-9271 4085.46,-9234.37 4084.69,-7596.47 4090.68,-7549 4103.6,-7446.74 4133.72,-7330.99 4154.03,-7260"/>
<polygon fill="black" stroke="black" points="4157.42,-7260.86 4156.82,-7250.28 4150.69,-7258.93 4157.42,-7260.86"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node82" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node82"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="4240.18,-8501 4110.18,-8501 4110.18,-8371 4240.18,-8371 4240.18,-8501"/>
<text text-anchor="middle" x="4175.18" y="-8432.3" font-family="Times,serif" font-size="14.00">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge120" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3932.7,-8456.96C3974.48,-8453.33 4045.47,-8447.17 4099.7,-8442.47"/>
<polygon fill="black" stroke="black" points="4100.3,-8445.93 4109.96,-8441.57 4099.7,-8438.95 4100.3,-8445.93"/>
</g>
<!-- notes_utils.read_text -->
<g id="node24" class="node">
<title>notes_utils.read_text</title>
<g id="a_node24"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="4433.18,-6557.5 4338.18,-6557.5 4338.18,-6462.5 4433.18,-6462.5 4433.18,-6557.5"/>
<text text-anchor="middle" x="4385.68" y="-6506.3" font-family="Times,serif" font-size="14.00">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge165" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4193.6,-7135.94C4232.85,-7007.36 4327.85,-6696.16 4367.18,-6567.33"/>
<polygon fill="black" stroke="black" points="4370.57,-6568.22 4370.14,-6557.63 4363.87,-6566.18 4370.57,-6568.22"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node23" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node23"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="4259.68,-9499.5 4090.68,-9499.5 4090.68,-9330.5 4259.68,-9330.5 4259.68,-9499.5"/>
<text text-anchor="middle" x="4175.18" y="-9411.3" font-family="Times,serif" font-size="14.00">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge17" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4221.83,-9330.31C4236.64,-9298.77 4251.39,-9262.1 4259.68,-9227 4385.03,-8696.4 4385.95,-6912.32 4384.93,-6567.84"/>
<polygon fill="black" stroke="black" points="4388.43,-6567.59 4384.9,-6557.6 4381.43,-6567.62 4388.43,-6567.59"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge161" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4347.47,-6557.69C4351.21,-6568.01 4363.94,-6575.5 4385.68,-6575.5 4400.97,-6575.5 4411.8,-6571.8 4418.19,-6566.01"/>
<polygon fill="black" stroke="black" points="4421.13,-6567.92 4423.89,-6557.69 4415.35,-6563.96 4421.13,-6567.92"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node25" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node25"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="3584.18,-8198.5 3393.18,-8198.5 3393.18,-8007.5 3584.18,-8007.5 3584.18,-8198.5"/>
<text text-anchor="middle" x="3488.68" y="-8099.3" font-family="Times,serif" font-size="14.00">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge22" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3584.44,-8080.6C3628.2,-8065.05 3676.22,-8039.44 3702.68,-7998 3748.08,-7926.9 3711.03,-6559.7 3738.68,-6480 3762.81,-6410.46 3819.38,-6345.15 3857.61,-6306.62"/>
<polygon fill="black" stroke="black" points="3860.37,-6308.81 3864.99,-6299.27 3855.43,-6303.84 3860.37,-6308.81"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge21" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3584.24,-8150.02C3625.05,-8174.13 3670.67,-8206.73 3702.68,-8246 3729.38,-8278.75 3713.4,-8300.14 3738.68,-8334 3769.62,-8375.43 3817.24,-8411.06 3851.93,-8433.76"/>
<polygon fill="black" stroke="black" points="3850.15,-8436.77 3860.45,-8439.24 3853.94,-8430.89 3850.15,-8436.77"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge24" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3584.27,-8069.68C3623.9,-8052.52 3668.59,-8028.68 3702.68,-7998 3724.96,-7977.96 3714.43,-7958.6 3738.68,-7941 3855.94,-7855.91 3959.28,-7970.03 4054.68,-7861 4100.64,-7808.48 4078.69,-7617.76 4090.68,-7549 4108.41,-7447.31 4137.31,-7331.18 4156.03,-7259.97"/>
<polygon fill="black" stroke="black" points="4159.43,-7260.79 4158.6,-7250.23 4152.67,-7259.01 4159.43,-7260.79"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge23" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3584.37,-8109.2C3759.52,-8114.64 4128.23,-8096.35 4259.68,-7861 4323.56,-7746.65 4370.8,-6811.1 4382.09,-6567.7"/>
<polygon fill="black" stroke="black" points="4385.59,-6567.8 4382.56,-6557.65 4378.6,-6567.47 4385.59,-6567.8"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node26" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node26"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="4206.68,-7852.5 4143.68,-7852.5 4143.68,-7789.5 4206.68,-7789.5 4206.68,-7852.5"/>
<text text-anchor="middle" x="4175.18" y="-7817.3" font-family="Times,serif" font-size="14.00">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge18" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3584.21,-8090.82C3701.34,-8072.51 3903.88,-8030.04 4054.68,-7941 4089.79,-7920.27 4121.92,-7886.8 4144,-7860.46"/>
<polygon fill="black" stroke="black" points="4146.87,-7862.48 4150.53,-7852.54 4141.47,-7858.03 4146.87,-7862.48"/>
</g>
<!-- caption_io.has_caption -->
<g id="node27" class="node">
<title>caption_io.has_caption</title>
<g id="a_node27"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="3928.18,-7852.5 3865.18,-7852.5 3865.18,-7789.5 3928.18,-7789.5 3928.18,-7852.5"/>
<text text-anchor="middle" x="3896.68" y="-7817.3" font-family="Times,serif" font-size="14.00">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge19" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3584.34,-8073.24C3625.05,-8056.52 3670.56,-8032.02 3702.68,-7998 3730.85,-7968.17 3711.61,-7943.83 3738.68,-7913 3770.6,-7876.66 3820.5,-7850.88 3855.45,-7836.03"/>
<polygon fill="black" stroke="black" points="3856.98,-7839.18 3864.89,-7832.13 3854.31,-7832.71 3856.98,-7839.18"/>
</g>
<!-- caption_io.read_caption -->
<g id="node28" class="node">
<title>caption_io.read_caption</title>
<g id="a_node28"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="3964.18,-6016.5 3829.18,-6016.5 3829.18,-5881.5 3964.18,-5881.5 3964.18,-6016.5"/>
<text text-anchor="middle" x="3896.68" y="-5945.3" font-family="Times,serif" font-size="14.00">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge20" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3584.26,-8080.76C3628.12,-8065.24 3676.28,-8039.6 3702.68,-7998 3761.43,-7905.44 3679.61,-6117.35 3738.68,-6025 3756.79,-5996.69 3788.71,-5978.64 3819.06,-5967.28"/>
<polygon fill="black" stroke="black" points="3820.58,-5970.45 3828.84,-5963.82 3818.24,-5963.85 3820.58,-5970.45"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge45" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3928.33,-7821C3978.26,-7821 4077.2,-7821 4133.14,-7821"/>
<polygon fill="black" stroke="black" points="4133.4,-7824.5 4143.4,-7821 4133.4,-7817.5 4133.4,-7824.5"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node30" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node30"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="4206.68,-5959.5 4143.68,-5959.5 4143.68,-5896.5 4206.68,-5896.5 4206.68,-5959.5"/>
<text text-anchor="middle" x="4175.18" y="-5924.3" font-family="Times,serif" font-size="14.00">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge46" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3928.35,-7807.87C3965.93,-7789.91 4027.91,-7753.78 4054.68,-7701 4098.25,-7615.12 4038.52,-6048.95 4090.68,-5968 4100.34,-5953.01 4117.32,-5943.5 4133.45,-5937.53"/>
<polygon fill="black" stroke="black" points="4134.93,-5940.73 4143.32,-5934.26 4132.72,-5934.09 4134.93,-5940.73"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge51" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3964.28,-5964.8C3996.84,-5976.06 4033.49,-5994.74 4054.68,-6025 4118.05,-6115.48 4159.79,-6890.24 4171.09,-7125.52"/>
<polygon fill="black" stroke="black" points="4167.6,-7125.83 4171.57,-7135.65 4174.59,-7125.5 4167.6,-7125.83"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge48" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3964.48,-5963.85C3997.52,-5974.89 4034.55,-5993.66 4054.68,-6025 4103.85,-6101.54 4067.93,-7573.92 4090.68,-7662 4101.83,-7705.14 4126.54,-7749.66 4146.21,-7780.58"/>
<polygon fill="black" stroke="black" points="4143.5,-7782.83 4151.87,-7789.32 4149.38,-7779.02 4143.5,-7782.83"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge49" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3964.26,-5943.94C4016.93,-5939.94 4088.77,-5934.49 4133.28,-5931.11"/>
<polygon fill="black" stroke="black" points="4133.73,-5934.58 4143.44,-5930.34 4133.2,-5927.6 4133.73,-5934.58"/>
</g>
<!-- caption_io._get_langs -->
<g id="node35" class="node">
<title>caption_io._get_langs</title>
<g id="a_node35"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="4222.68,-6072.5 4127.68,-6072.5 4127.68,-5977.5 4222.68,-5977.5 4222.68,-6072.5"/>
<text text-anchor="middle" x="4175.18" y="-6021.3" font-family="Times,serif" font-size="14.00">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge47" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3964.26,-5967.3C4011.21,-5980.2 4073.39,-5997.3 4117.87,-6009.52"/>
<polygon fill="black" stroke="black" points="4117.08,-6012.93 4127.65,-6012.21 4118.93,-6006.18 4117.08,-6012.93"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge50" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M3964.24,-5932.73C3996.79,-5921.25 4033.44,-5902.34 4054.68,-5872 4117.47,-5782.31 4162.12,-4989.93 4172.08,-4797.82"/>
<polygon fill="black" stroke="black" points="4175.59,-4797.74 4172.61,-4787.57 4168.6,-4797.38 4175.59,-4797.74"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node29" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node29"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="3573.18,-8544.5 3404.18,-8544.5 3404.18,-8375.5 3573.18,-8375.5 3573.18,-8544.5"/>
<text text-anchor="middle" x="3488.68" y="-8456.3" font-family="Times,serif" font-size="14.00">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge28" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3573.34,-8445.67C3619.73,-8433.03 3673.74,-8409.49 3702.68,-8366 3760.74,-8278.75 3704.56,-6579.09 3738.68,-6480 3762.65,-6410.41 3819.27,-6345.11 3857.54,-6306.59"/>
<polygon fill="black" stroke="black" points="3860.3,-6308.78 3864.94,-6299.25 3855.37,-6303.81 3860.3,-6308.78"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge27" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3573.31,-8460C3657.26,-8460 3783.46,-8460 3850.33,-8460"/>
<polygon fill="black" stroke="black" points="3850.54,-8463.5 3860.54,-8460 3850.54,-8456.5 3850.54,-8463.5"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge29" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3573.34,-8442.07C3617.82,-8428.38 3669.93,-8405 3702.68,-8366 3745.66,-8314.82 3705.33,-8277.92 3738.68,-8220 3836.08,-8050.84 3969.68,-8090.71 4054.68,-7915 4125.86,-7767.86 4063.96,-7710.25 4090.68,-7549 4107.56,-7447.16 4136.68,-7331.07 4155.69,-7259.92"/>
<polygon fill="black" stroke="black" points="4159.09,-7260.75 4158.3,-7250.18 4152.33,-7258.93 4159.09,-7260.75"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge25" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3573.4,-8434.17C3713.75,-8389.34 3987.78,-8294.75 4054.68,-8220 4147.8,-8115.96 4168.43,-7941.89 4172.95,-7862.61"/>
<polygon fill="black" stroke="black" points="4176.45,-7862.68 4173.47,-7852.51 4169.46,-7862.32 4176.45,-7862.68"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge26" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3573.38,-8445.45C3619.63,-8432.73 3673.49,-8409.2 3702.68,-8366 3769.91,-8266.52 3662.95,-7379.17 3738.68,-7286 3829.86,-7173.83 3963.74,-7321.37 4054.68,-7209 4141.46,-7101.77 4015.49,-6083.65 4090.68,-5968 4100.41,-5953.05 4117.39,-5943.54 4133.51,-5937.57"/>
<polygon fill="black" stroke="black" points="4134.98,-5940.77 4143.37,-5934.29 4132.77,-5934.13 4134.98,-5940.77"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node31" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node31"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="3983.18,-9262.5 3810.18,-9262.5 3810.18,-9089.5 3983.18,-9089.5 3983.18,-9262.5"/>
<text text-anchor="middle" x="3896.68" y="-9172.3" font-family="Times,serif" font-size="14.00">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge30" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3983.28,-9176.62C4029.57,-9176.95 4085.14,-9177.36 4124.35,-9177.64"/>
<polygon fill="black" stroke="black" points="4124.43,-9181.14 4134.45,-9177.71 4124.48,-9174.14 4124.43,-9181.14"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node32" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node32"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="4235.18,-9119 4115.18,-9119 4115.18,-8999 4235.18,-8999 4235.18,-9119"/>
<text text-anchor="middle" x="4175.18" y="-9055.3" font-family="Times,serif" font-size="14.00">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node33" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node33"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="3614.68,-9281 3362.68,-9281 3362.68,-9029 3614.68,-9029 3614.68,-9281"/>
<text text-anchor="middle" x="3488.68" y="-9151.3" font-family="Times,serif" font-size="14.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge34" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3614.76,-9103.23C3649.42,-9082.42 3682.93,-9054.71 3702.68,-9019 3764.3,-8907.59 3694.97,-4555.57 3738.68,-4436 3741.39,-4428.61 3744.52,-4421.29 3748,-4414.09"/>
<polygon fill="black" stroke="black" points="3751.19,-4415.54 3752.59,-4405.03 3744.95,-4412.37 3751.19,-4415.54"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge35" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3614.9,-9102.99C3649.46,-9082.19 3682.88,-9054.55 3702.68,-9019 3771.35,-8895.77 3693.07,-6613.49 3738.68,-6480 3762.48,-6410.35 3819.14,-6345.06 3857.47,-6306.57"/>
<polygon fill="black" stroke="black" points="3860.24,-6308.76 3864.88,-6299.23 3855.31,-6303.78 3860.24,-6308.76"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge33" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3614.91,-9101.34C3648.92,-9080.61 3682.03,-9053.42 3702.68,-9019 3807.75,-8843.92 3633.92,-8736.26 3738.68,-8561 3763.87,-8518.86 3814.21,-8491.23 3851.13,-8475.69"/>
<polygon fill="black" stroke="black" points="3852.73,-8478.82 3860.67,-8471.81 3850.09,-8472.33 3852.73,-8478.82"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge36" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3614.78,-9107.65C3751.25,-9048.4 3962.53,-8932.63 4054.68,-8755 4116.42,-8636 4073.29,-7681.93 4090.68,-7549 4104.06,-7446.8 4134.05,-7331.03 4154.21,-7260.02"/>
<polygon fill="black" stroke="black" points="4157.6,-7260.88 4156.98,-7250.31 4150.87,-7258.96 4157.6,-7260.88"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge31" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M3614.81,-9161.47C3674.47,-9164.56 3744.71,-9168.19 3800.02,-9171.05"/>
<polygon fill="black" stroke="black" points="3800,-9174.56 3810.17,-9171.58 3800.36,-9167.56 3800,-9174.56"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge32" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M3614.92,-9110.77C3654.08,-9098.71 3697.75,-9087.04 3738.68,-9080 3866.46,-9058.02 4018.22,-9056.05 4104.66,-9057.16"/>
<polygon fill="black" stroke="black" points="4104.82,-9060.66 4114.87,-9057.3 4104.92,-9053.66 4104.82,-9060.66"/>
</g>
<!-- debug_dump.main -->
<g id="node34" class="node">
<title>debug_dump.main</title>
<g id="a_node34"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="3145.18,-9074 2893.18,-9074 2893.18,-8822 3145.18,-8822 3145.18,-9074"/>
<text text-anchor="middle" x="3019.18" y="-8944.3" font-family="Times,serif" font-size="14.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge37" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M3145.46,-8948C3231.95,-8948 3343.9,-8948 3415.76,-8948"/>
<polygon fill="black" stroke="black" points="3416.07,-8951.5 3426.07,-8948 3416.07,-8944.5 3416.07,-8951.5"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge38" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M3145.42,-8998.96C3181.28,-9019.7 3216.61,-9047.37 3238.68,-9083 3284.52,-9156.98 3210.37,-9414.35 3274.68,-9473 3353.59,-9544.96 3681.53,-9487.75 3826.38,-9458.07"/>
<polygon fill="black" stroke="black" points="3827.41,-9461.43 3836.49,-9455.98 3825.99,-9454.57 3827.41,-9461.43"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge39" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M3145.44,-9001.06C3180.64,-9021.74 3215.57,-9048.84 3238.68,-9083 3291.01,-9160.35 3216.87,-9216.67 3274.68,-9290 3304.53,-9327.86 3353.04,-9350.43 3396.22,-9363.73"/>
<polygon fill="black" stroke="black" points="3395.34,-9367.12 3405.92,-9366.59 3397.32,-9360.41 3395.34,-9367.12"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge40" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M3145.28,-8998.7C3181.25,-9019.46 3216.67,-9047.2 3238.68,-9083 3287.98,-9163.18 3205.84,-9440.82 3274.68,-9505 3338.08,-9564.1 3973,-9540.98 4054.68,-9512 4063.94,-9508.72 4073,-9504.38 4081.73,-9499.35"/>
<polygon fill="black" stroke="black" points="4083.62,-9502.3 4090.35,-9494.11 4079.98,-9496.32 4083.62,-9502.3"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge41" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M3137.2,-8821.67C3176.22,-8772.29 3215.6,-8712.92 3238.68,-8652 3270.77,-8567.3 3228.58,-8323.97 3274.68,-8246 3299.82,-8203.5 3343.13,-8170.99 3384.16,-8147.79"/>
<polygon fill="black" stroke="black" points="3386.08,-8150.72 3393.15,-8142.83 3382.7,-8144.59 3386.08,-8150.72"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge42" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M3125.75,-8821.86C3164.73,-8771.23 3207.06,-8710.96 3238.68,-8652 3260.81,-8610.74 3242.63,-8587.13 3274.68,-8553 3306.59,-8519.02 3353.06,-8496.78 3394.46,-8482.59"/>
<polygon fill="black" stroke="black" points="3395.64,-8485.88 3404.04,-8479.42 3393.44,-8479.24 3395.64,-8485.88"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge43" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M3145.46,-9003.47C3209.66,-9031.9 3287.87,-9066.53 3353.31,-9095.5"/>
<polygon fill="black" stroke="black" points="3351.9,-9098.71 3362.46,-9099.55 3354.73,-9092.31 3351.9,-9098.71"/>
</g>
<!-- config_utils.load_config -->
<g id="node36" class="node">
<title>config_utils.load_config</title>
<g id="a_node36"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="4475.68,-3625 4295.68,-3625 4295.68,-3445 4475.68,-3445 4475.68,-3625"/>
<text text-anchor="middle" x="4385.68" y="-3531.3" font-family="Times,serif" font-size="14.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge44" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M4222.72,-6003.8C4237.05,-5994.87 4251.26,-5983 4259.68,-5968 4375.12,-5762.39 4384.29,-4068.8 4384.74,-3635.61"/>
<polygon fill="black" stroke="black" points="4388.24,-3635.3 4384.75,-3625.3 4381.24,-3635.3 4388.24,-3635.3"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge162" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4200.66,-4787.57C4220.37,-4814.89 4246.83,-4856.31 4259.68,-4897 4354.14,-5196 4378.92,-6200.46 4383.71,-6452.34"/>
<polygon fill="black" stroke="black" points="4380.21,-6452.44 4383.9,-6462.38 4387.21,-6452.31 4380.21,-6452.44"/>
</g>
<!-- caption_io.write_caption -->
<g id="node38" class="node">
<title>caption_io.write_caption</title>
<g id="a_node38"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="3961.68,-7425 3831.68,-7425 3831.68,-7295 3961.68,-7295 3961.68,-7425"/>
<text text-anchor="middle" x="3896.68" y="-7356.3" font-family="Times,serif" font-size="14.00">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge55" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3961.81,-7317.84C3996.27,-7291.2 4035.52,-7253.45 4054.68,-7209 4097.89,-7108.77 4084.49,-3388.97 4090.68,-3280 4106.77,-2996.96 4150.15,-2659.54 4167.18,-2533.64"/>
<polygon fill="black" stroke="black" points="4170.68,-2533.91 4168.56,-2523.53 4163.74,-2532.97 4170.68,-2533.91"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge54" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3962.03,-7330.66C3990.96,-7316.7 4025.17,-7299.12 4054.68,-7281 4073.08,-7269.71 4092.24,-7256.38 4109.69,-7243.56"/>
<polygon fill="black" stroke="black" points="4112.16,-7246.09 4118.1,-7237.32 4107.99,-7240.46 4112.16,-7246.09"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge53" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3962.03,-7377.01C3994.79,-7388.99 4032.32,-7408.48 4054.68,-7439 4114.02,-7519.98 4058.93,-7566.76 4090.68,-7662 4104.86,-7704.54 4129.46,-7749.46 4148.3,-7780.66"/>
<polygon fill="black" stroke="black" points="4145.49,-7782.78 4153.69,-7789.48 4151.46,-7779.13 4145.49,-7782.78"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge52" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3961.73,-7328.98C3995.26,-7309.22 4033.62,-7280.3 4054.68,-7243 4112.27,-7141.02 4159.31,-6311.2 4171.25,-6082.93"/>
<polygon fill="black" stroke="black" points="4174.75,-6083 4171.77,-6072.84 4167.76,-6082.64 4174.75,-6083"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node39" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node39"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="3947.68,-4547 3845.68,-4547 3845.68,-4445 3947.68,-4445 3947.68,-4547"/>
<text text-anchor="middle" x="3896.68" y="-4492.3" font-family="Times,serif" font-size="14.00">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node40" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node40"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="3551.18,-4450.5 3426.18,-4450.5 3426.18,-4325.5 3551.18,-4325.5 3551.18,-4450.5"/>
<text text-anchor="middle" x="3488.68" y="-4384.3" font-family="Times,serif" font-size="14.00">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge58" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3551.35,-4366.59C3598.61,-4350.17 3666.17,-4326.71 3728.94,-4304.91"/>
<polygon fill="black" stroke="black" points="3730.27,-4308.15 3738.57,-4301.56 3727.97,-4301.54 3730.27,-4308.15"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge56" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3551.25,-4392.07C3600.99,-4398.95 3668.18,-4417.16 3702.68,-4465 3794.15,-4591.85 3654.27,-5740.36 3738.68,-5872 3756.87,-5900.36 3788.8,-5918.61 3819.13,-5930.17"/>
<polygon fill="black" stroke="black" points="3818.31,-5933.6 3828.91,-5933.7 3820.69,-5927.01 3818.31,-5933.6"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge57" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M3551.35,-4404.4C3628.41,-4424.9 3759.42,-4459.75 3835.7,-4480.04"/>
<polygon fill="black" stroke="black" points="3835.07,-4483.5 3845.63,-4482.69 3836.86,-4476.73 3835.07,-4483.5"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node41" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node41"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="3953.68,-637 3839.68,-637 3839.68,-523 3953.68,-523 3953.68,-637"/>
<text text-anchor="middle" x="3896.68" y="-576.3" font-family="Times,serif" font-size="14.00">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node42" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node42"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="2748.18,-1218 2538.18,-1218 2538.18,-1008 2748.18,-1008 2748.18,-1218"/>
<text text-anchor="middle" x="2643.18" y="-1109.3" font-family="Times,serif" font-size="14.00">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node43" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node43"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="3181.18,-1210 2857.18,-1210 2857.18,-886 3181.18,-886 3181.18,-1210"/>
<text text-anchor="middle" x="3019.18" y="-1044.3" font-family="Times,serif" font-size="14.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge59" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M3181.27,-961.89C3375.83,-857.89 3693.94,-687.84 3830.29,-614.96"/>
<polygon fill="black" stroke="black" points="3832.23,-617.89 3839.39,-610.09 3828.93,-611.72 3832.23,-617.89"/>
</g>
<!-- price_utils.predict_price -->
<g id="node44" class="node">
<title>price_utils.predict_price</title>
<g id="a_node44"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="3571.18,-1820.5 3406.18,-1820.5 3406.18,-1655.5 3571.18,-1655.5 3571.18,-1820.5"/>
<text text-anchor="middle" x="3488.68" y="-1734.3" font-family="Times,serif" font-size="14.00">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node45" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node45"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="3968.68,-1310 3824.68,-1310 3824.68,-1166 3968.68,-1166 3968.68,-1310"/>
<text text-anchor="middle" x="3896.68" y="-1234.3" font-family="Times,serif" font-size="14.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node46" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node46"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="3587.18,-1637.5 3390.18,-1637.5 3390.18,-1440.5 3587.18,-1440.5 3587.18,-1637.5"/>
<text text-anchor="middle" x="3488.68" y="-1535.3" font-family="Times,serif" font-size="14.00">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node47" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node47"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="3089.18,-1771 2949.18,-1771 2949.18,-1631 3089.18,-1631 3089.18,-1771"/>
<text text-anchor="middle" x="3019.18" y="-1697.3" font-family="Times,serif" font-size="14.00">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge60" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M3089.42,-1677.01C3166.18,-1650.41 3290.94,-1607.17 3380.38,-1576.18"/>
<polygon fill="black" stroke="black" points="3381.71,-1579.43 3390.01,-1572.85 3379.42,-1572.81 3381.71,-1579.43"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node48" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node48"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="2748.18,-1446 2538.18,-1446 2538.18,-1236 2748.18,-1236 2748.18,-1446"/>
<text text-anchor="middle" x="2643.18" y="-1337.3" font-family="Times,serif" font-size="14.00">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge61" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M2748.36,-1259.38C2779.58,-1234.93 2814.65,-1207.45 2848.92,-1180.6"/>
<polygon fill="black" stroke="black" points="2851.43,-1183.08 2857.15,-1174.16 2847.12,-1177.57 2851.43,-1183.08"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge62" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M2679.8,-1446.26C2723.44,-1574.52 2792.51,-1774.93 2799.68,-1780 2893.13,-1846.04 3230.92,-1789.97 3395.83,-1757.38"/>
<polygon fill="black" stroke="black" points="3396.83,-1760.75 3405.96,-1755.36 3395.47,-1753.88 3396.83,-1760.75"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge63" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M2748.39,-1275.29C2765.01,-1267.41 2782.43,-1260.56 2799.68,-1256 2990.87,-1205.48 3593.96,-1225.12 3814.17,-1234.31"/>
<polygon fill="black" stroke="black" points="3814.22,-1237.81 3824.36,-1234.73 3814.52,-1230.82 3814.22,-1237.81"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge64" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M2681.36,-1446.31C2706.71,-1504.75 2745.59,-1574.75 2799.68,-1621 2839.23,-1654.81 2894.29,-1674.85 2939.25,-1686.42"/>
<polygon fill="black" stroke="black" points="2938.42,-1689.82 2948.97,-1688.83 2940.11,-1683.03 2938.42,-1689.82"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node49" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node49"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="3529.18,-4702.5 3448.18,-4702.5 3448.18,-4621.5 3529.18,-4621.5 3529.18,-4702.5"/>
<text text-anchor="middle" x="3488.68" y="-4658.3" font-family="Times,serif" font-size="14.00">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node50" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node50"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="3932.68,-4698 3860.68,-4698 3860.68,-4626 3932.68,-4626 3932.68,-4698"/>
<text text-anchor="middle" x="3896.68" y="-4658.3" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge65" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M3529.35,-4662C3605.16,-4662 3770.19,-4662 3850.27,-4662"/>
<polygon fill="black" stroke="black" points="3850.53,-4665.5 3860.53,-4662 3850.53,-4658.5 3850.53,-4665.5"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge163" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M3932.7,-4673.91C3984,-4691.35 4079.36,-4723.76 4133.64,-4742.22"/>
<polygon fill="black" stroke="black" points="4132.68,-4745.59 4143.27,-4745.49 4134.93,-4738.96 4132.68,-4745.59"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge164" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M3932.88,-4642.87C3966.41,-4623.63 4017.19,-4591.74 4054.68,-4556 4080.83,-4531.07 4105.49,-4499.92 4125.55,-4471.75"/>
<polygon fill="black" stroke="black" points="4128.46,-4473.69 4131.35,-4463.5 4122.73,-4469.67 4128.46,-4473.69"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node51" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node51"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="3059.68,-7542.5 2978.68,-7542.5 2978.68,-7461.5 3059.68,-7461.5 3059.68,-7542.5"/>
<text text-anchor="middle" x="3019.18" y="-7498.3" font-family="Times,serif" font-size="14.00">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.write_md -->
<g id="node52" class="node">
<title>notes_utils.write_md</title>
<g id="a_node52"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="3539.68,-7513 3437.68,-7513 3437.68,-7411 3539.68,-7411 3539.68,-7513"/>
<text text-anchor="middle" x="3488.68" y="-7458.3" font-family="Times,serif" font-size="14.00">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge66" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M3060.04,-7498.59C3142.06,-7491.57 3330.17,-7475.48 3427.25,-7467.17"/>
<polygon fill="black" stroke="black" points="3427.83,-7470.63 3437.49,-7466.29 3427.23,-7463.66 3427.83,-7470.63"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node53" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node53"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="3167.68,-3544.5 2870.68,-3544.5 2870.68,-3247.5 3167.68,-3247.5 3167.68,-3544.5"/>
<text text-anchor="middle" x="3019.18" y="-3392.3" font-family="Times,serif" font-size="14.00">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge67" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M3105.96,-3247.27C3153.93,-3156.4 3209.74,-3036.07 3238.68,-2922 3268.97,-2802.63 3204.12,-2469.93 3274.68,-2369 3302.35,-2329.42 3350.58,-2306.31 3394.16,-2292.92"/>
<polygon fill="black" stroke="black" points="3395.34,-2296.22 3403.95,-2290.05 3393.37,-2289.5 3395.34,-2296.22"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge69" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3099.77,-3247.4C3168.68,-3120.07 3259.61,-2955.78 3274.68,-2947 3315.77,-2923.06 3667.17,-2915.37 3702.68,-2947 3754.47,-2993.12 3727.44,-3188.57 3738.68,-3257 3778.69,-3500.45 3845.1,-3785.2 3877.19,-3917.86"/>
<polygon fill="black" stroke="black" points="3873.87,-3919.02 3879.63,-3927.92 3880.68,-3917.37 3873.87,-3919.02"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge70" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3090.96,-3544.5C3133.66,-3617.15 3195.26,-3698.55 3274.68,-3744 3357.65,-3791.48 3634.16,-3720.35 3702.68,-3787 3747.65,-3830.74 3712.96,-4009.78 3738.68,-4067 3740.65,-4071.38 3742.76,-4075.73 3745,-4080.05"/>
<polygon fill="black" stroke="black" points="3741.93,-4081.73 3749.77,-4088.86 3748.09,-4078.4 3741.93,-4081.73"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge71" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3108.43,-3544.75C3155.98,-3632.71 3210.52,-3748.09 3238.68,-3858 3255.29,-3922.8 3227.84,-4411.24 3274.68,-4459 3341.49,-4527.12 3637.22,-4423.59 3702.68,-4493 3768.91,-4563.22 3678.89,-6154.23 3738.68,-6230 3765.84,-6264.42 3818.01,-6272.14 3854.73,-6272.91"/>
<polygon fill="black" stroke="black" points="3855.11,-6276.41 3865.12,-6272.95 3855.13,-6269.41 3855.11,-6276.41"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge68" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M3096.87,-3544.55C3141.43,-3634.01 3196.86,-3750.98 3238.68,-3858 3258.18,-3907.88 3254.38,-3923.44 3274.68,-3973 3325.6,-4097.29 3399.95,-4234.73 3445.99,-4316.11"/>
<polygon fill="black" stroke="black" points="3443.21,-4318.29 3451.19,-4325.26 3449.3,-4314.84 3443.21,-4318.29"/>
</g>
<!-- scan_ontology.main -->
<g id="node54" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="2757.18,-2531 2529.18,-2531 2529.18,-2303 2757.18,-2303 2757.18,-2531"/>
<text text-anchor="middle" x="2643.18" y="-2413.3" font-family="Times,serif" font-size="14.00">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge73" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2751.7,-2302.58C2775.92,-2277.44 2795.73,-2257.68 2799.68,-2256 2889.48,-2217.89 3164.74,-2192.36 3238.68,-2256 3320.1,-2326.07 3193.26,-2424.93 3274.68,-2495 3340.37,-2551.53 3968.12,-2499.34 4054.68,-2495 4077.59,-2493.85 4102.87,-2491.48 4124.26,-2489.14"/>
<polygon fill="black" stroke="black" points="4124.88,-2492.59 4134.42,-2488 4124.1,-2485.63 4124.88,-2492.59"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge72" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M2677.41,-2531.17C2714.31,-2656.77 2772.28,-2850.35 2799.68,-2922 2840.84,-3029.61 2895.01,-3147.24 2939.12,-3238.41"/>
<polygon fill="black" stroke="black" points="2935.98,-3239.95 2943.49,-3247.42 2942.28,-3236.9 2935.98,-3239.95"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node55" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node55"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="3084.18,-2133 2954.18,-2133 2954.18,-2003 3084.18,-2003 3084.18,-2133"/>
<text text-anchor="middle" x="3019.18" y="-2064.3" font-family="Times,serif" font-size="14.00">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge74" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M2753.4,-2302.68C2756.95,-2298.13 2760.39,-2293.56 2763.68,-2289 2783.24,-2261.91 2777.49,-2247.97 2799.68,-2223 2841.19,-2176.3 2899.31,-2135.93 2945.17,-2108.1"/>
<polygon fill="black" stroke="black" points="2947.1,-2111.03 2953.87,-2102.88 2943.5,-2105.02 2947.1,-2111.03"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node123" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node123"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="3529.18,-2096.5 3448.18,-2096.5 3448.18,-2015.5 3529.18,-2015.5 3529.18,-2096.5"/>
<text text-anchor="middle" x="3488.68" y="-2052.3" font-family="Times,serif" font-size="14.00">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge191" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M3084.21,-2066.36C3178.43,-2063.94 3352.48,-2059.47 3437.84,-2057.28"/>
<polygon fill="black" stroke="black" points="3438.14,-2060.77 3448.05,-2057.02 3437.96,-2053.78 3438.14,-2060.77"/>
</g>
<!-- build_site._load_ontology -->
<g id="node56" class="node">
<title>build_site._load_ontology</title>
<g id="a_node56"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="3079.18,-7215 2959.18,-7215 2959.18,-7095 3079.18,-7095 3079.18,-7215"/>
<text text-anchor="middle" x="3019.18" y="-7151.3" font-family="Times,serif" font-size="14.00">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge75" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3079.52,-7146.46C3126.3,-7137.39 3191.31,-7119.42 3238.68,-7085 3260.83,-7068.9 3250.38,-7047.62 3274.68,-7035 3351.61,-6995.07 3977.38,-6990.82 4054.68,-7030 4094.79,-7050.33 4124.69,-7091.14 4144.54,-7126.85"/>
<polygon fill="black" stroke="black" points="4141.55,-7128.66 4149.38,-7135.8 4147.71,-7125.33 4141.55,-7128.66"/>
</g>
<!-- build_site._compile_locale -->
<g id="node57" class="node">
<title>build_site._compile_locale</title>
<g id="a_node57"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="4237.68,-1636.5 4112.68,-1636.5 4112.68,-1511.5 4237.68,-1511.5 4237.68,-1636.5"/>
<text text-anchor="middle" x="4175.18" y="-1570.3" font-family="Times,serif" font-size="14.00">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node58" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node58"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="3973.18,-1650.5 3820.18,-1650.5 3820.18,-1497.5 3973.18,-1497.5 3973.18,-1650.5"/>
<text text-anchor="middle" x="3896.68" y="-1570.3" font-family="Times,serif" font-size="14.00">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge76" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M3973.24,-1574C4013.39,-1574 4062.5,-1574 4102.12,-1574"/>
<polygon fill="black" stroke="black" points="4102.24,-1577.5 4112.24,-1574 4102.24,-1570.5 4102.24,-1577.5"/>
</g>
<!-- build_site._iter_lots -->
<g id="node59" class="node">
<title>build_site._iter_lots</title>
<g id="a_node59"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="3133.18,-4095 2905.18,-4095 2905.18,-3867 3133.18,-3867 3133.18,-4095"/>
<text text-anchor="middle" x="3019.18" y="-3977.3" font-family="Times,serif" font-size="14.00">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge77" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3133.21,-4035.94C3174.05,-4062.02 3215.72,-4097.38 3238.68,-4142 3300.84,-4262.79 3200.12,-6473.45 3274.68,-6587 3309.33,-6639.76 3380.57,-6663.85 3431.1,-6674.63"/>
<polygon fill="black" stroke="black" points="3430.42,-6678.07 3440.92,-6676.62 3431.81,-6671.2 3430.42,-6678.07"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge78" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3094.49,-3866.74C3144.63,-3783.37 3207.2,-3665.69 3238.68,-3553 3268.24,-3447.2 3204.48,-3144.49 3274.68,-3060 3312.21,-3014.84 3381.37,-3003.71 3430.7,-3002.03"/>
<polygon fill="black" stroke="black" points="3430.99,-3005.52 3440.91,-3001.81 3430.83,-2998.53 3430.99,-3005.52"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge79" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3133.29,-3982.55C3315.17,-3985.04 3667.74,-3989.88 3821.25,-3991.98"/>
<polygon fill="black" stroke="black" points="3821.47,-3995.48 3831.52,-3992.12 3821.56,-3988.48 3821.47,-3995.48"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge81" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3133.27,-3992.54C3300,-4010.74 3602.83,-4048.64 3702.68,-4093 3711.79,-4097.05 3720.84,-4101.63 3729.76,-4106.61"/>
<polygon fill="black" stroke="black" points="3728.22,-4109.77 3738.63,-4111.73 3731.72,-4103.7 3728.22,-4109.77"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge82" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3133.23,-4038.31C3173.17,-4064.4 3214.2,-4099.14 3238.68,-4142 3277.57,-4210.08 3224.12,-4433.08 3274.68,-4493 3402.01,-4643.89 3581.49,-4456.14 3702.68,-4612 3757.87,-4682.98 3682.93,-6159.46 3738.68,-6230 3765.87,-6264.4 3818.03,-6272.13 3854.75,-6272.9"/>
<polygon fill="black" stroke="black" points="3855.12,-6276.4 3865.13,-6272.94 3855.15,-6269.4 3855.12,-6276.4"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node60" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node60"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="3556.18,-3964.5 3421.18,-3964.5 3421.18,-3829.5 3556.18,-3829.5 3556.18,-3964.5"/>
<text text-anchor="middle" x="3488.68" y="-3893.3" font-family="Times,serif" font-size="14.00">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge80" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M3133.35,-3960.67C3219.47,-3945.19 3335.66,-3924.31 3411.12,-3910.76"/>
<polygon fill="black" stroke="black" points="3411.81,-3914.19 3421.04,-3908.98 3410.57,-3907.3 3411.81,-3914.19"/>
</g>
<!-- build_site._copy_images -->
<g id="node61" class="node">
<title>build_site._copy_images</title>
<g id="a_node61"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="3553.68,-2900 3423.68,-2900 3423.68,-2770 3553.68,-2770 3553.68,-2900"/>
<text text-anchor="middle" x="3488.68" y="-2831.3" font-family="Times,serif" font-size="14.00">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node62" class="node">
<title>build_site._copy_static</title>
<g id="a_node62"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="3073.18,-868 2965.18,-868 2965.18,-760 3073.18,-760 3073.18,-868"/>
<text text-anchor="middle" x="3019.18" y="-810.3" font-family="Times,serif" font-size="14.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._convert_prices -->
<g id="node63" class="node">
<title>build_site._convert_prices</title>
<g id="a_node63"><a xlink:title="Add `_display_price` and `_price_class` fields converted to `cur`.">
<polygon fill="none" stroke="black" points="3585.68,-552 3391.68,-552 3391.68,-358 3585.68,-358 3585.68,-552"/>
<text text-anchor="middle" x="3488.68" y="-451.3" font-family="Times,serif" font-size="14.00">build_site._convert_prices</text>
</a>
</g>
</g>
<!-- build_site._convert_prices&#45;&gt;price_utils.canonical_currency -->
<g id="edge83" class="edge">
<title>build_site._convert_prices&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M3585.9,-484.62C3661.06,-507.77 3763.53,-539.31 3829.66,-559.67"/>
<polygon fill="black" stroke="black" points="3828.96,-563.12 3839.55,-562.72 3831.02,-556.43 3828.96,-563.12"/>
</g>
<!-- build_site._load_state -->
<g id="node64" class="node">
<title>build_site._load_state</title>
<g id="a_node64"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="2705.68,-4561.5 2580.68,-4561.5 2580.68,-4436.5 2705.68,-4436.5 2705.68,-4561.5"/>
<text text-anchor="middle" x="2643.18" y="-4495.3" font-family="Times,serif" font-size="14.00">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge84" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M2651.93,-4561.52C2673.78,-4740.77 2736.13,-5271.98 2763.68,-5715 2768.41,-5790.99 2754,-7024.09 2799.68,-7085 2834.06,-7130.84 2898.79,-7147.26 2948.91,-7152.86"/>
<polygon fill="black" stroke="black" points="2948.74,-7156.36 2959.04,-7153.87 2949.44,-7149.39 2948.74,-7156.36"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge85" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M2705.9,-4447.76C2727.53,-4426.54 2749.84,-4400.28 2763.68,-4372 2809.16,-4279.07 2746,-4230.45 2799.68,-4142 2823.26,-4103.15 2860.09,-4070.72 2896.84,-4045.38"/>
<polygon fill="black" stroke="black" points="2898.84,-4048.26 2905.17,-4039.76 2894.93,-4042.45 2898.84,-4048.26"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge86" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M2705.89,-4450.42C2728.35,-4429.02 2751.27,-4401.92 2763.68,-4372 2812,-4255.56 2737.6,-3347.71 2799.68,-3238 2914.01,-3035.97 3053.83,-3095.42 3238.68,-2955 3255.73,-2942.05 3256.54,-2934.36 3274.68,-2923 3318.2,-2895.77 3371.59,-2873.73 3414.04,-2858.52"/>
<polygon fill="black" stroke="black" points="3415.21,-2861.82 3423.47,-2855.18 3412.88,-2855.22 3415.21,-2861.82"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node65" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node65"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="3977.18,-7200.5 3816.18,-7200.5 3816.18,-7039.5 3977.18,-7039.5 3977.18,-7200.5"/>
<text text-anchor="middle" x="3896.68" y="-7116.3" font-family="Times,serif" font-size="14.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge87" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M2651.98,-4561.52C2673.98,-4740.75 2736.66,-5271.95 2763.68,-5715 2766.23,-5756.85 2769.68,-7194.71 2799.68,-7224 2939.28,-7360.31 3085.99,-7345.47 3238.68,-7224 3294.37,-7179.7 3219,-7112.3 3274.68,-7068 3349.11,-7008.79 3608.39,-7055.52 3702.68,-7068 3736.98,-7072.54 3773.83,-7081.43 3806.05,-7090.59"/>
<polygon fill="black" stroke="black" points="3805.31,-7094.02 3815.89,-7093.44 3807.25,-7087.3 3805.31,-7094.02"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node66" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node66"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="3990.18,-6221.5 3803.18,-6221.5 3803.18,-6034.5 3990.18,-6034.5 3990.18,-6221.5"/>
<text text-anchor="middle" x="3896.68" y="-6124.3" font-family="Times,serif" font-size="14.00">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge88" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M2705.86,-4495.56C2911.42,-4485.56 3567.84,-4465.78 3702.68,-4612 3755.92,-4669.73 3700.5,-5956.38 3738.68,-6025 3751.61,-6048.24 3772.25,-6067.12 3794.36,-6082.07"/>
<polygon fill="black" stroke="black" points="3792.6,-6085.1 3802.89,-6087.61 3796.41,-6079.23 3792.6,-6085.1"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge179" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3977.29,-7141.02C4018.76,-7151.97 4068.88,-7165.2 4108.17,-7175.57"/>
<polygon fill="black" stroke="black" points="4107.36,-7178.98 4117.92,-7178.15 4109.14,-7172.21 4107.36,-7178.98"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge180" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3990.54,-6169.76C4015.16,-6185.23 4039.17,-6205.2 4054.68,-6230 4148.56,-6380.05 4168.84,-6932.51 4173.09,-7125.74"/>
<polygon fill="black" stroke="black" points="4169.59,-7125.84 4173.3,-7135.76 4176.59,-7125.69 4169.59,-7125.84"/>
</g>
<!-- build_site._categorise -->
<g id="node67" class="node">
<title>build_site._categorise</title>
<g id="a_node67"><a xlink:title="Return category info and recent lot list.">
<polygon fill="none" stroke="black" points="2758.18,-1933 2528.18,-1933 2528.18,-1703 2758.18,-1703 2758.18,-1933"/>
<text text-anchor="middle" x="2643.18" y="-1814.3" font-family="Times,serif" font-size="14.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge89" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2667.01,-1933.17C2688.12,-2006.51 2727.59,-2096.07 2799.68,-2142 2820.84,-2155.48 3677.67,-2150.12 3702.68,-2152 3743.85,-2155.09 3789.63,-2161.37 3826.26,-2167.1"/>
<polygon fill="black" stroke="black" points="3825.91,-2170.59 3836.34,-2168.7 3827.01,-2163.67 3825.91,-2170.59"/>
</g>
<!-- build_site._render_site -->
<g id="node68" class="node">
<title>build_site._render_site</title>
<g id="a_node68"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.">
<polygon fill="none" stroke="black" points="3212.18,-2651 2826.18,-2651 2826.18,-2265 3212.18,-2265 3212.18,-2651"/>
<text text-anchor="middle" x="3019.18" y="-2454.3" font-family="Times,serif" font-size="14.00">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge91" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3157.89,-2264.87C3191.9,-2230.82 3231.21,-2200.18 3274.68,-2181 3371.58,-2138.26 3685.48,-2159.94 3826.25,-2172.34"/>
<polygon fill="black" stroke="black" points="3826.22,-2175.85 3836.49,-2173.25 3826.84,-2168.88 3826.22,-2175.85"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge92" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3212.52,-2511.35C3233.38,-2515.87 3254.4,-2519.89 3274.68,-2523 3383.02,-2539.59 4183.04,-2497.65 4259.68,-2576 4264.12,-2580.53 4368.02,-5966.08 4382.91,-6452.16"/>
<polygon fill="black" stroke="black" points="4379.42,-6452.55 4383.23,-6462.44 4386.42,-6452.34 4379.42,-6452.55"/>
</g>
<!-- build_site.build_page -->
<g id="node69" class="node">
<title>build_site.build_page</title>
<g id="a_node69"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="3702.68,-3735 3274.68,-3735 3274.68,-3307 3702.68,-3307 3702.68,-3735"/>
<text text-anchor="middle" x="3488.68" y="-3517.3" font-family="Times,serif" font-size="14.00">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge90" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M3177.47,-2651.43C3201.91,-2690.08 3223.91,-2731.82 3238.68,-2774 3315.69,-2993.9 3180.85,-3083.73 3274.68,-3297 3274.77,-3297.21 3274.87,-3297.41 3274.96,-3297.62"/>
<polygon fill="black" stroke="black" points="3271.88,-3299.3 3279.27,-3306.89 3278.22,-3296.34 3271.88,-3299.3"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node70" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node70"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="3940.68,-2954 3852.68,-2954 3852.68,-2866 3940.68,-2866 3940.68,-2954"/>
<text text-anchor="middle" x="3896.68" y="-2906.3" font-family="Times,serif" font-size="14.00">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge93" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M3212.38,-2542.41C3233.27,-2550.73 3254.33,-2558.76 3274.68,-2566 3461.28,-2632.36 3567.61,-2545.17 3702.68,-2690 3754.47,-2745.53 3688.12,-2800.36 3738.68,-2857 3764.93,-2886.4 3808.03,-2899.51 3842.45,-2905.35"/>
<polygon fill="black" stroke="black" points="3841.94,-2908.81 3852.36,-2906.87 3843.01,-2901.89 3841.94,-2908.81"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge96" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3695.83,-3735.08C3698.24,-3739.69 3700.53,-3744.33 3702.68,-3749 3762.24,-3878.17 3681.34,-3936.84 3738.68,-4067 3740.62,-4071.39 3742.7,-4075.76 3744.91,-4080.09"/>
<polygon fill="black" stroke="black" points="3741.83,-4081.74 3749.62,-4088.92 3748,-4078.45 3741.83,-4081.74"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge97" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3664.39,-3735.27C3679.84,-3762.55 3693.2,-3791.08 3702.68,-3820 3723.55,-3883.62 3697.36,-6177.32 3738.68,-6230 3765.74,-6264.5 3817.93,-6272.2 3854.69,-6272.94"/>
<polygon fill="black" stroke="black" points="3855.07,-6276.44 3865.08,-6272.98 3855.1,-6269.44 3855.07,-6276.44"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge94" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3664.31,-3735.29C3679.78,-3762.57 3693.16,-3791.1 3702.68,-3820 3738.36,-3928.29 3677.52,-5775.77 3738.68,-5872 3756.76,-5900.44 3788.67,-5918.69 3819.02,-5930.24"/>
<polygon fill="black" stroke="black" points="3818.21,-5933.67 3828.8,-5933.76 3820.58,-5927.08 3818.21,-5933.67"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge95" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M3698.3,-3306.97C3699.83,-3303.67 3701.3,-3300.35 3702.68,-3297 3761.9,-3154.18 3702.86,-2056.4 3738.68,-1906 3759.74,-1817.59 3806.02,-1724.7 3842.91,-1659.73"/>
<polygon fill="black" stroke="black" points="3846.12,-1661.17 3848.05,-1650.75 3840.05,-1657.69 3846.12,-1661.17"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge98" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M3697.92,-3306.81C3699.57,-3303.56 3701.16,-3300.29 3702.68,-3297 3734.14,-3229.06 3691.66,-3020.27 3738.68,-2962 3763.63,-2931.09 3807.46,-2918.4 3842.49,-2913.27"/>
<polygon fill="black" stroke="black" points="3843.11,-2916.72 3852.57,-2911.96 3842.21,-2909.77 3843.11,-2916.72"/>
</g>
<!-- build_site.main -->
<g id="node71" class="node">
<title>build_site.main</title>
<g id="a_node71"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="2486.68,-1047 2224.68,-1047 2224.68,-785 2486.68,-785 2486.68,-1047"/>
<text text-anchor="middle" x="2355.68" y="-912.3" font-family="Times,serif" font-size="14.00">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge99" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M2364.6,-784.82C2378.53,-652.33 2416.92,-447.56 2522.68,-306 2677.59,-98.64 2759.35,0 3018.18,0 3018.18,0 3018.18,0 3897.68,0 3980.65,0 4009.76,-31.25 4054.68,-101 4239.98,-388.69 4357.44,-2899.53 4380.5,-3434.87"/>
<polygon fill="black" stroke="black" points="4377.01,-3435.05 4380.93,-3444.89 4384,-3434.75 4377.01,-3435.05"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge100" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M2391.68,-784.79C2416.67,-718.49 2457.68,-643.82 2522.68,-604 2634.65,-535.41 3570.73,-567.1 3829.58,-577.27"/>
<polygon fill="black" stroke="black" points="3829.46,-580.77 3839.59,-577.67 3829.74,-573.77 3829.46,-580.77"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge101" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M2486.9,-1005.85C2501.03,-1015.6 2515.32,-1025.46 2529.22,-1035.05"/>
<polygon fill="black" stroke="black" points="2527.6,-1038.19 2537.82,-1040.99 2531.57,-1032.43 2527.6,-1038.19"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge102" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M2415.05,-1047.16C2443.6,-1104.88 2480.85,-1171.93 2522.68,-1227 2525.44,-1230.63 2528.32,-1234.25 2531.28,-1237.84"/>
<polygon fill="black" stroke="black" points="2528.79,-1240.31 2537.92,-1245.67 2534.12,-1235.78 2528.79,-1240.31"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge103" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M2453.38,-784.82C2474.3,-762.58 2497.72,-741.41 2522.68,-725 2656.65,-636.95 3096.46,-563.02 3238.68,-637 3329.78,-684.39 3702.22,-1266.32 3842.18,-1488.53"/>
<polygon fill="black" stroke="black" points="3839.38,-1490.64 3847.67,-1497.24 3845.3,-1486.91 3839.38,-1490.64"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge104" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M2486.99,-844.56C2498.83,-840.01 2510.82,-836.04 2522.68,-833 2673.94,-794.22 2859.62,-800.86 2955,-808.02"/>
<polygon fill="black" stroke="black" points="2954.82,-811.51 2965.06,-808.8 2955.36,-804.54 2954.82,-811.51"/>
</g>
<!-- build_site.main&#45;&gt;build_site._convert_prices -->
<g id="edge105" class="edge">
<title>build_site.main&#45;&gt;build_site._convert_prices</title>
<path fill="none" stroke="black" d="M2385.25,-784.7C2408.94,-708.42 2450.77,-617.47 2522.68,-566 2783.71,-379.17 3190.06,-408.8 3381.33,-436.29"/>
<polygon fill="black" stroke="black" points="3380.98,-439.78 3391.38,-437.76 3382,-432.85 3380.98,-439.78"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge106" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M2371.38,-1047.41C2399.46,-1304.73 2460.3,-1893.29 2486.68,-2390 2492.52,-2499.97 2481.16,-4270 2522.68,-4372 2533.61,-4398.85 2553.08,-4423.38 2573.17,-4443.57"/>
<polygon fill="black" stroke="black" points="2570.99,-4446.32 2580.59,-4450.8 2575.88,-4441.32 2570.99,-4446.32"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge107" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M2396.32,-1047.19C2429.51,-1156.47 2478.44,-1316.11 2522.68,-1455 2547.98,-1534.4 2577.21,-1623.26 2600.44,-1693.19"/>
<polygon fill="black" stroke="black" points="2597.2,-1694.54 2603.67,-1702.93 2603.84,-1692.33 2597.2,-1694.54"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge108" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M2356.35,-1047.09C2358.26,-1340.25 2378.27,-2036.93 2522.68,-2213 2594.34,-2300.37 2661.85,-2245.02 2763.68,-2294 2781.49,-2302.57 2799.56,-2312.15 2817.43,-2322.28"/>
<polygon fill="black" stroke="black" points="2815.76,-2325.36 2826.18,-2327.29 2819.24,-2319.28 2815.76,-2325.36"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node72" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node72"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="3542.68,-2486 3434.68,-2486 3434.68,-2378 3542.68,-2378 3542.68,-2486"/>
<text text-anchor="middle" x="3488.68" y="-2428.3" font-family="Times,serif" font-size="14.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge109" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M2366.09,-1047.36C2385.31,-1288.89 2434.83,-1792.44 2522.68,-1942 2602.17,-2077.32 2655.42,-2099.21 2799.68,-2161 2980.82,-2238.58 3092.36,-2091.03 3238.68,-2223 3287.99,-2267.47 3228.88,-2319.92 3274.68,-2368 3313.39,-2408.63 3376.8,-2423.76 3424.39,-2429.24"/>
<polygon fill="black" stroke="black" points="3424.28,-2432.75 3434.59,-2430.3 3425,-2425.78 3424.28,-2432.75"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node73" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node73"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="3066.68,-741.5 2971.68,-741.5 2971.68,-646.5 3066.68,-646.5 3066.68,-741.5"/>
<text text-anchor="middle" x="3019.18" y="-690.3" font-family="Times,serif" font-size="14.00">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge110" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M2487.09,-817.96C2498.81,-811.3 2510.75,-805.19 2522.68,-800 2672.94,-734.63 2866.86,-708.27 2961.36,-698.76"/>
<polygon fill="black" stroke="black" points="2961.95,-702.22 2971.56,-697.76 2961.27,-695.25 2961.95,-702.22"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node74" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node74"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="3644.68,-340 3332.68,-340 3332.68,-28 3644.68,-28 3644.68,-340"/>
<text text-anchor="middle" x="3488.68" y="-180.3" font-family="Times,serif" font-size="14.00">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge111" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M2371.03,-784.84C2389.21,-681.15 2430.25,-539.99 2522.68,-454 2744.34,-247.78 3110.57,-197.16 3322.39,-185.89"/>
<polygon fill="black" stroke="black" points="3322.86,-189.37 3332.67,-185.37 3322.51,-182.38 3322.86,-189.37"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node75" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node75"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="2717.18,-990 2569.18,-990 2569.18,-842 2717.18,-842 2717.18,-990"/>
<text text-anchor="middle" x="2643.18" y="-912.3" font-family="Times,serif" font-size="14.00">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge112" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M2486.9,-916C2511.39,-916 2536.37,-916 2558.94,-916"/>
<polygon fill="black" stroke="black" points="2559.12,-919.5 2569.12,-916 2559.12,-912.5 2559.12,-919.5"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node76" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node76"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="3122.68,-8165.5 2915.68,-8165.5 2915.68,-7958.5 3122.68,-7958.5 3122.68,-8165.5"/>
<text text-anchor="middle" x="3019.18" y="-8058.3" font-family="Times,serif" font-size="14.00">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge113" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M2371.88,-1047.39C2400.82,-1304.66 2463.1,-1893.14 2486.68,-2390 2490.13,-2462.56 2493.14,-7553.64 2522.68,-7620 2600.54,-7794.92 2785.95,-7928.92 2906.57,-8001.47"/>
<polygon fill="black" stroke="black" points="2905.12,-8004.68 2915.51,-8006.8 2908.71,-7998.67 2905.12,-8004.68"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge182" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3542.88,-2417.99C3644.73,-2393.64 3873.26,-2351.03 4054.68,-2405 4080.35,-2412.64 4105.65,-2427.73 4126.32,-2442.63"/>
<polygon fill="black" stroke="black" points="4124.47,-2445.61 4134.58,-2448.75 4128.63,-2439.99 4124.47,-2445.61"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge181" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3538.85,-2486.11C3591.07,-2547.54 3670.44,-2653.28 3702.68,-2761 3743.3,-2896.72 3720.08,-7720.56 3738.68,-7861 3766.63,-8071.97 3845.23,-8314.82 3879.44,-8414.11"/>
<polygon fill="black" stroke="black" points="3876.22,-8415.52 3882.8,-8423.83 3882.84,-8413.23 3876.22,-8415.52"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node119" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node119"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="3932.68,-2486 3860.68,-2486 3860.68,-2414 3932.68,-2414 3932.68,-2486"/>
<text text-anchor="middle" x="3896.68" y="-2446.3" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge183" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M3542.76,-2434.35C3623.23,-2437.92 3774.72,-2444.64 3850.34,-2447.99"/>
<polygon fill="black" stroke="black" points="3850.35,-2451.49 3860.5,-2448.44 3850.66,-2444.5 3850.35,-2451.49"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node120" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node120"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="3970.68,-258 3822.68,-258 3822.68,-110 3970.68,-110 3970.68,-258"/>
<text text-anchor="middle" x="3896.68" y="-180.3" font-family="Times,serif" font-size="14.00">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge184" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M3644.91,-184C3701.86,-184 3764.13,-184 3812.37,-184"/>
<polygon fill="black" stroke="black" points="3812.45,-187.5 3822.45,-184 3812.45,-180.5 3812.45,-187.5"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node99" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node99"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="3539.68,-8357 3437.68,-8357 3437.68,-8255 3539.68,-8255 3539.68,-8357"/>
<text text-anchor="middle" x="3488.68" y="-8302.3" font-family="Times,serif" font-size="14.00">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge185" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3122.92,-8145.48C3167.54,-8178.69 3221.66,-8215.09 3274.68,-8241 3323.83,-8265.02 3383.71,-8282.34 3427.45,-8293.03"/>
<polygon fill="black" stroke="black" points="3426.82,-8296.48 3437.36,-8295.41 3428.45,-8289.68 3426.82,-8296.48"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node78" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node78"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="3959.18,-6883.5 3834.18,-6883.5 3834.18,-6758.5 3959.18,-6758.5 3959.18,-6883.5"/>
<text text-anchor="middle" x="3896.68" y="-6817.3" font-family="Times,serif" font-size="14.00">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node79" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node79"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="3937.18,-6570.5 3856.18,-6570.5 3856.18,-6489.5 3937.18,-6489.5 3937.18,-6570.5"/>
<text text-anchor="middle" x="3896.68" y="-6526.3" font-family="Times,serif" font-size="14.00">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node80" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node80"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3970.68,-2063 3822.68,-2063 3822.68,-1915 3970.68,-1915 3970.68,-2063"/>
<text text-anchor="middle" x="3896.68" y="-1985.3" font-family="Times,serif" font-size="14.00">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node81" class="node">
<title>lot_io.write_lots</title>
<g id="a_node81"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="3548.68,-1997 3428.68,-1997 3428.68,-1877 3548.68,-1877 3548.68,-1997"/>
<text text-anchor="middle" x="3488.68" y="-1933.3" font-family="Times,serif" font-size="14.00">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge117" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3548.84,-1942.08C3596.13,-1949.12 3661.15,-1965.91 3702.68,-2006 3736.37,-2038.51 3707.13,-2070.41 3738.68,-2105 3762.14,-2130.71 3796.39,-2148.29 3826.92,-2159.83"/>
<polygon fill="black" stroke="black" points="3826.08,-2163.25 3836.68,-2163.37 3828.47,-2156.67 3826.08,-2163.25"/>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge119" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3548.72,-1944.04C3595,-1952.19 3658.7,-1969.52 3702.68,-2006 3728.4,-2027.33 3711.02,-2053.26 3738.68,-2072 3855.78,-2151.35 3945.6,-2019.93 4054.68,-2110 4152.11,-2190.44 4171.06,-2350.6 4174.13,-2432.39"/>
<polygon fill="black" stroke="black" points="4170.63,-2432.55 4174.44,-2442.44 4177.63,-2432.34 4170.63,-2432.55"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge116" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3548.71,-1923.52C3678.58,-1895.42 3983.25,-1838.56 4054.68,-1906 4105.34,-1953.83 4085.02,-2462.56 4090.68,-2532 4114.07,-2818.52 4154.82,-3162.26 4169.08,-3279.49"/>
<polygon fill="black" stroke="black" points="4165.61,-3279.98 4170.3,-3289.48 4172.56,-3279.13 4165.61,-3279.98"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge118" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M3548.72,-1944.56C3618.07,-1953.44 3733.61,-1968.24 3812.14,-1978.3"/>
<polygon fill="black" stroke="black" points="3812.12,-1981.83 3822.48,-1979.62 3813.01,-1974.88 3812.12,-1981.83"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node83" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node83"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="3063.18,-4239 2975.18,-4239 2975.18,-4151 3063.18,-4151 3063.18,-4239"/>
<text text-anchor="middle" x="3019.18" y="-4191.3" font-family="Times,serif" font-size="14.00">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node84" class="node">
<title>lot_io.get_lot</title>
<g id="a_node84"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3539.68,-7989 3437.68,-7989 3437.68,-7887 3539.68,-7887 3539.68,-7989"/>
<text text-anchor="middle" x="3488.68" y="-7934.3" font-family="Times,serif" font-size="14.00">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge121" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3539.88,-7921.74C3591.16,-7902.13 3668.04,-7863.74 3702.68,-7801 3752.64,-7710.51 3685.78,-4168.8 3738.68,-4080 3756.97,-4049.31 3790.36,-4028.66 3821.66,-4015.21"/>
<polygon fill="black" stroke="black" points="3823.36,-4018.3 3831.29,-4011.27 3820.71,-4011.82 3823.36,-4018.3"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge122" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3540.05,-7945.27C3584.92,-7953.31 3651.26,-7969.13 3702.68,-7998 3874.37,-8094.39 4033.12,-8265.63 4115.38,-8362.99"/>
<polygon fill="black" stroke="black" points="4112.78,-8365.34 4121.89,-8370.74 4118.13,-8360.83 4112.78,-8365.34"/>
</g>
<!-- post_io.get_contact -->
<g id="node85" class="node">
<title>post_io.get_contact</title>
<g id="a_node85"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3536.18,-7792.5 3441.18,-7792.5 3441.18,-7697.5 3536.18,-7697.5 3536.18,-7792.5"/>
<text text-anchor="middle" x="3488.68" y="-7741.3" font-family="Times,serif" font-size="14.00">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node86" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node86"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3562.68,-7679 3414.68,-7679 3414.68,-7531 3562.68,-7531 3562.68,-7679"/>
<text text-anchor="middle" x="3488.68" y="-7601.3" font-family="Times,serif" font-size="14.00">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node88" class="node">
<title>post_io.write_post</title>
<g id="a_node88"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="3107.18,-7737 2931.18,-7737 2931.18,-7561 3107.18,-7561 3107.18,-7737"/>
<text text-anchor="middle" x="3019.18" y="-7645.3" font-family="Times,serif" font-size="14.00">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge127" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M3107.33,-7615.96C3148.43,-7598.88 3197.39,-7576.31 3238.68,-7551 3256.2,-7540.26 3256.42,-7531.42 3274.68,-7522 3323.14,-7497 3383.35,-7481.27 3427.37,-7472.23"/>
<polygon fill="black" stroke="black" points="3428.23,-7475.62 3437.36,-7470.23 3426.86,-7468.76 3428.23,-7475.62"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge125" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M3107.29,-7666.89C3201.91,-7686.32 3350.31,-7716.79 3430.93,-7733.35"/>
<polygon fill="black" stroke="black" points="3430.4,-7736.81 3440.9,-7735.39 3431.81,-7729.95 3430.4,-7736.81"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge126" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M3107.29,-7640.8C3192.33,-7632.8 3320.81,-7620.71 3404.49,-7612.83"/>
<polygon fill="black" stroke="black" points="3404.83,-7616.31 3414.46,-7611.89 3404.18,-7609.34 3404.83,-7616.31"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node89" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node89"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3532.68,-5659 3444.68,-5659 3444.68,-5571 3532.68,-5571 3532.68,-5659"/>
<text text-anchor="middle" x="3488.68" y="-5611.3" font-family="Times,serif" font-size="14.00">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge128" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3532.9,-5612.06C3582.28,-5611.34 3661.54,-5618.7 3702.68,-5668 3782.87,-5764.08 3659.06,-6133.46 3738.68,-6230 3766.5,-6263.73 3818.28,-6271.63 3854.75,-6272.62"/>
<polygon fill="black" stroke="black" points="3855.03,-6276.13 3865.07,-6272.73 3855.11,-6269.13 3855.03,-6276.13"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node90" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node90"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="3558.68,-9699 3418.68,-9699 3418.68,-9559 3558.68,-9559 3558.68,-9699"/>
<text text-anchor="middle" x="3488.68" y="-9625.3" font-family="Times,serif" font-size="14.00">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- telegram_bot._t -->
<g id="node91" class="node">
<title>telegram_bot._t</title>
<g id="a_node91"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="2705.68,-9030.5 2580.68,-9030.5 2580.68,-8905.5 2705.68,-8905.5 2705.68,-9030.5"/>
<text text-anchor="middle" x="2643.18" y="-8964.3" font-family="Times,serif" font-size="14.00">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node92" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node92"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="2694.18,-9151 2592.18,-9151 2592.18,-9049 2694.18,-9049 2694.18,-9151"/>
<text text-anchor="middle" x="2643.18" y="-9096.3" font-family="Times,serif" font-size="14.00">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node93" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node93"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="3055.18,-9470 2983.18,-9470 2983.18,-9398 3055.18,-9398 3055.18,-9470"/>
<text text-anchor="middle" x="3019.18" y="-9430.3" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge129" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2694.4,-9113.31C2719.06,-9122.43 2746.98,-9137.13 2763.68,-9160 2824.44,-9243.21 2728.57,-9314.45 2799.68,-9389 2844.11,-9435.57 2922.93,-9440.64 2972.77,-9438.47"/>
<polygon fill="black" stroke="black" points="2973.15,-9441.95 2982.94,-9437.91 2972.77,-9434.96 2973.15,-9441.95"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node94" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node94"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="2697.18,-10033 2589.18,-10033 2589.18,-9925 2697.18,-9925 2697.18,-10033"/>
<text text-anchor="middle" x="2643.18" y="-9975.3" font-family="Times,serif" font-size="14.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge130" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2697.46,-9976.65C2830.65,-9970.97 3188.84,-9957 3487.68,-9957 3487.68,-9957 3487.68,-9957 3897.68,-9957 4072.88,-9957 4168.02,-9950.3 4259.68,-9801 4347.69,-9657.66 4379.53,-6996.56 4384.09,-6568.03"/>
<polygon fill="black" stroke="black" points="4387.59,-6567.78 4384.2,-6557.74 4380.59,-6567.7 4387.59,-6567.78"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node95" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node95"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="4232.18,-9792 4118.18,-9792 4118.18,-9678 4232.18,-9678 4232.18,-9792"/>
<text text-anchor="middle" x="4175.18" y="-9731.3" font-family="Times,serif" font-size="14.00">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge131" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4202.94,-9677.65C4222.56,-9632.6 4247.76,-9567.71 4259.68,-9508 4378.08,-8915.04 4384.54,-6932.22 4384.71,-6567.81"/>
<polygon fill="black" stroke="black" points="4388.21,-6567.75 4384.72,-6557.75 4381.21,-6567.75 4388.21,-6567.75"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node96" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="3050.68,-9868.5 2987.68,-9868.5 2987.68,-9805.5 3050.68,-9805.5 3050.68,-9868.5"/>
<text text-anchor="middle" x="3019.18" y="-9833.3" font-family="Times,serif" font-size="14.00">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node97" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node97"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="3532.68,-7165 3444.68,-7165 3444.68,-7077 3532.68,-7077 3532.68,-7165"/>
<text text-anchor="middle" x="3488.68" y="-7117.3" font-family="Times,serif" font-size="14.00">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge132" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M3532.75,-7120.89C3597.37,-7120.73 3720.86,-7120.43 3805.7,-7120.22"/>
<polygon fill="black" stroke="black" points="3805.86,-7123.72 3815.85,-7120.2 3805.84,-7116.72 3805.86,-7123.72"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node98" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="3070.18,-8426 2968.18,-8426 2968.18,-8324 3070.18,-8324 3070.18,-8426"/>
<text text-anchor="middle" x="3019.18" y="-8371.3" font-family="Times,serif" font-size="14.00">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge133" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3070.21,-8367.62C3156.83,-8354.83 3334.36,-8328.63 3427.54,-8314.88"/>
<polygon fill="black" stroke="black" points="3428.28,-8318.31 3437.66,-8313.38 3427.26,-8311.38 3428.28,-8318.31"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node100" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="2717.18,-9539 2569.18,-9539 2569.18,-9391 2717.18,-9391 2717.18,-9539"/>
<text text-anchor="middle" x="2643.18" y="-9461.3" font-family="Times,serif" font-size="14.00">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge134" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2717.63,-9458.91C2793.4,-9452.63 2909.19,-9443.03 2972.66,-9437.77"/>
<polygon fill="black" stroke="black" points="2973.08,-9441.25 2982.76,-9436.94 2972.51,-9434.27 2973.08,-9441.25"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge135" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M2717.2,-9429.85C2735.51,-9417.38 2752.98,-9401.48 2763.68,-9382 2857.71,-9210.85 2699.41,-8671.57 2799.68,-8504 2834.53,-8445.76 2906.58,-8410.9 2958.42,-8392.37"/>
<polygon fill="black" stroke="black" points="2959.88,-8395.57 2968.18,-8388.99 2957.59,-8388.95 2959.88,-8395.57"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node101" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node101"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="2745.18,-9373 2541.18,-9373 2541.18,-9169 2745.18,-9169 2745.18,-9373"/>
<text text-anchor="middle" x="2643.18" y="-9267.3" font-family="Times,serif" font-size="14.00">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge136" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M2745.44,-9189.59C2752.6,-9180.31 2758.88,-9170.41 2763.68,-9160 2803.06,-9074.68 2742.71,-8389.74 2799.68,-8315 2923.91,-8152.02 3101.89,-8326.59 3238.68,-8174 3291.98,-8114.55 3220.32,-8056.47 3274.68,-7998 3313.64,-7956.1 3379.34,-7942.65 3427.5,-7938.72"/>
<polygon fill="black" stroke="black" points="3427.76,-7942.21 3437.49,-7938.02 3427.27,-7935.23 3427.76,-7942.21"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge137" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2745.5,-9357.81C2762.79,-9369.65 2781.17,-9380.6 2799.68,-9389 2856.12,-9414.62 2927.38,-9425.79 2972.88,-9430.57"/>
<polygon fill="black" stroke="black" points="2972.73,-9434.07 2983.03,-9431.57 2973.42,-9427.11 2972.73,-9434.07"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node102" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node102"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="2420.68,-10094 2290.68,-10094 2290.68,-9964 2420.68,-9964 2420.68,-10094"/>
<text text-anchor="middle" x="2355.68" y="-10025.3" font-family="Times,serif" font-size="14.00">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge138" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2420.75,-10017.78C2467.93,-10009.52 2531.78,-9998.34 2578.79,-9990.1"/>
<polygon fill="black" stroke="black" points="2579.61,-9993.51 2588.85,-9988.34 2578.4,-9986.62 2579.61,-9993.51"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node103" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node103"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="2399.68,-9100 2311.68,-9100 2311.68,-9012 2399.68,-9012 2399.68,-9100"/>
<text text-anchor="middle" x="2355.68" y="-9052.3" font-family="Times,serif" font-size="14.00">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge139" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2399.73,-9042.73C2444.98,-9028.79 2516.9,-9006.62 2570.68,-8990.04"/>
<polygon fill="black" stroke="black" points="2571.98,-8993.3 2580.5,-8987.01 2569.91,-8986.61 2571.98,-8993.3"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge140" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2399.73,-9062.63C2448.27,-9070.12 2527.53,-9082.33 2582.14,-9090.75"/>
<polygon fill="black" stroke="black" points="2581.62,-9094.21 2592.04,-9092.27 2582.69,-9087.29 2581.62,-9094.21"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node104" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node104"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="2427.68,-8994 2283.68,-8994 2283.68,-8850 2427.68,-8850 2427.68,-8994"/>
<text text-anchor="middle" x="2355.68" y="-8918.3" font-family="Times,serif" font-size="14.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge141" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2427.99,-8933.49C2471.51,-8940.5 2526.96,-8949.43 2570.54,-8956.46"/>
<polygon fill="black" stroke="black" points="2570.06,-8959.92 2580.49,-8958.06 2571.18,-8953.01 2570.06,-8959.92"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge142" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2427.82,-8962.27C2447.51,-8974.48 2468.46,-8988.53 2486.68,-9003 2504.4,-9017.07 2504.38,-9025.69 2522.68,-9039 2541.06,-9052.36 2562.78,-9064.4 2582.64,-9074.18"/>
<polygon fill="black" stroke="black" points="2581.38,-9077.46 2591.91,-9078.65 2584.42,-9071.15 2581.38,-9077.46"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge143" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2427.82,-8889.73C2518.3,-8854.15 2673.58,-8812.24 2763.68,-8896 2844.14,-8970.79 2727.23,-9306.44 2799.68,-9389 2842.37,-9437.65 2922.44,-9441.96 2972.89,-9439.09"/>
<polygon fill="black" stroke="black" points="2973.45,-9442.56 2983.18,-9438.38 2972.97,-9435.57 2973.45,-9442.56"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node105" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node105"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="2432.18,-9271.5 2279.18,-9271.5 2279.18,-9118.5 2432.18,-9118.5 2432.18,-9271.5"/>
<text text-anchor="middle" x="2355.68" y="-9191.3" font-family="Times,serif" font-size="14.00">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge144" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2432.25,-9154.24C2451.55,-9141.48 2471.19,-9126.19 2486.68,-9109 2509.84,-9083.31 2498.99,-9065.2 2522.68,-9040 2536.53,-9025.28 2554.05,-9012.5 2571.37,-9001.97"/>
<polygon fill="black" stroke="black" points="2573.55,-9004.75 2580.39,-8996.66 2570,-8998.71 2573.55,-9004.75"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge145" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2432.44,-9169.79C2479.28,-9154.2 2538.57,-9134.48 2582.15,-9119.97"/>
<polygon fill="black" stroke="black" points="2583.38,-9123.26 2591.76,-9116.78 2581.17,-9116.61 2583.38,-9123.26"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge146" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2359.07,-9271.84C2367.01,-9378.24 2398.87,-9567.11 2522.68,-9654 2566.52,-9684.76 2719.72,-9684.58 2763.68,-9654 2801.43,-9627.74 2769.82,-9591.97 2799.68,-9557 2846.49,-9502.18 2924.17,-9466.82 2973.19,-9448.68"/>
<polygon fill="black" stroke="black" points="2974.68,-9451.86 2982.9,-9445.17 2972.3,-9445.28 2974.68,-9451.86"/>
</g>
<!-- telegram_bot.main -->
<g id="node106" class="node">
<title>telegram_bot.main</title>
<g id="a_node106"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="2440.18,-9945.5 2271.18,-9945.5 2271.18,-9776.5 2440.18,-9776.5 2440.18,-9945.5"/>
<text text-anchor="middle" x="2355.68" y="-9857.3" font-family="Times,serif" font-size="14.00">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge147" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2440.41,-9895.61C2484.99,-9914.03 2538.88,-9936.3 2579.75,-9953.19"/>
<polygon fill="black" stroke="black" points="2578.47,-9956.45 2589.05,-9957.04 2581.14,-9949.99 2578.47,-9956.45"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge148" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M2440.4,-9868.48C2565.86,-9879.03 2810.15,-9897 3018.18,-9897 3018.18,-9897 3018.18,-9897 3489.68,-9897 3741.02,-9897 3828.34,-9982.27 4054.68,-9873 4087.27,-9857.27 4114.56,-9828.11 4134.8,-9800.64"/>
<polygon fill="black" stroke="black" points="4137.88,-9802.35 4140.85,-9792.19 4132.19,-9798.28 4137.88,-9802.35"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge149" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M2440.46,-9857.96C2583.81,-9852.76 2870.97,-9842.34 2977.33,-9838.48"/>
<polygon fill="black" stroke="black" points="2977.77,-9841.97 2987.64,-9838.11 2977.52,-9834.97 2977.77,-9841.97"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge150" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M2381.28,-9776.29C2412.58,-9663.98 2465.17,-9459.08 2486.68,-9280 2492.96,-9227.76 2488.09,-7425.65 2522.68,-7386 2549.15,-7355.66 3200.9,-7287.92 3238.68,-7274 3312.49,-7246.8 3388.22,-7196.43 3436.48,-7160.93"/>
<polygon fill="black" stroke="black" points="3438.63,-7163.7 3444.57,-7154.93 3434.46,-7158.08 3438.63,-7163.7"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge151" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M2388.56,-9776.22C2416.69,-9709.12 2462.57,-9615.75 2522.68,-9548 2533.82,-9535.44 2547.23,-9523.81 2560.98,-9513.47"/>
<polygon fill="black" stroke="black" points="2563.1,-9516.26 2569.1,-9507.54 2558.96,-9510.61 2563.1,-9516.26"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge152" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M2372.92,-9776.25C2394.97,-9675.93 2441.31,-9506.77 2522.68,-9382 2526.37,-9376.34 2530.41,-9370.78 2534.7,-9365.33"/>
<polygon fill="black" stroke="black" points="2537.53,-9367.4 2541.16,-9357.45 2532.12,-9362.97 2537.53,-9367.4"/>
</g>
<!-- caption._identify_size -->
<g id="node107" class="node">
<title>caption._identify_size</title>
<g id="a_node107"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="4232.18,-8715 4118.18,-8715 4118.18,-8601 4232.18,-8601 4232.18,-8715"/>
<text text-anchor="middle" x="4175.18" y="-8654.3" font-family="Times,serif" font-size="14.00">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node108" class="node">
<title>caption._prepare_image</title>
<g id="a_node108"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="3984.68,-8746 3808.68,-8746 3808.68,-8570 3984.68,-8570 3984.68,-8746"/>
<text text-anchor="middle" x="3896.68" y="-8654.3" font-family="Times,serif" font-size="14.00">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge153" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M3984.79,-8658C4024.58,-8658 4070.95,-8658 4107.85,-8658"/>
<polygon fill="black" stroke="black" points="4107.99,-8661.5 4117.99,-8658 4107.99,-8654.5 4107.99,-8661.5"/>
</g>
<!-- caption._guess_chat -->
<g id="node109" class="node">
<title>caption._guess_chat</title>
<g id="a_node109"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="4219.18,-8856 4131.18,-8856 4131.18,-8768 4219.18,-8768 4219.18,-8856"/>
<text text-anchor="middle" x="4175.18" y="-8808.3" font-family="Times,serif" font-size="14.00">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node110" class="node">
<title>caption.caption_file</title>
<g id="a_node110"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="3641.18,-8867.5 3336.18,-8867.5 3336.18,-8562.5 3641.18,-8562.5 3641.18,-8867.5"/>
<text text-anchor="middle" x="3488.68" y="-8711.3" font-family="Times,serif" font-size="14.00">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge159" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3641.2,-8622.26C3664.74,-8602.01 3686.56,-8578.81 3702.68,-8553 3746.14,-8483.44 3698.48,-8443.49 3738.68,-8372 3832.12,-8205.85 3972.14,-8253.82 4054.68,-8082 4106.09,-7974.99 4073.07,-7666.4 4090.68,-7549 4106,-7446.92 4135.54,-7330.89 4155.07,-7259.82"/>
<polygon fill="black" stroke="black" points="4158.46,-7260.66 4157.75,-7250.09 4151.71,-7258.8 4158.46,-7260.66"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge154" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3641.3,-8620.3C3664.47,-8600.41 3686.13,-8577.84 3702.68,-8553 3737.84,-8500.26 3691.26,-8457.05 3738.68,-8415 3844.73,-8320.96 3950.61,-8468.22 4054.68,-8372 4129.78,-8302.57 4161.9,-7979.32 4171.17,-7862.92"/>
<polygon fill="black" stroke="black" points="4174.68,-7862.87 4171.97,-7852.63 4167.7,-7862.33 4174.68,-7862.87"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge155" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3641.22,-8623.07C3664.91,-8602.68 3686.77,-8579.21 3702.68,-8553 3751.59,-8472.43 3717.09,-8435.75 3738.68,-8344 3781.49,-8162.07 3851.48,-7950.17 3881.39,-7862.36"/>
<polygon fill="black" stroke="black" points="3884.75,-7863.37 3884.67,-7852.77 3878.13,-7861.1 3884.75,-7863.37"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge156" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M3641.29,-8627.31C3665.85,-8606.18 3688,-8581.37 3702.68,-8553 3755.98,-8450.01 3691.26,-7615.82 3738.68,-7510 3756.8,-7469.57 3791.38,-7434.64 3823.48,-7408.69"/>
<polygon fill="black" stroke="black" points="3825.91,-7411.23 3831.58,-7402.29 3821.57,-7405.74 3825.91,-7411.23"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge157" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M3641.44,-8693.69C3694,-8686.31 3751.47,-8678.25 3798.45,-8671.65"/>
<polygon fill="black" stroke="black" points="3799.2,-8675.08 3808.62,-8670.22 3798.23,-8668.15 3799.2,-8675.08"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge158" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M3641.33,-8740.08C3673.45,-8745.19 3707.16,-8750.41 3738.68,-8755 3876.35,-8775.06 4038.99,-8795.48 4121.08,-8805.56"/>
<polygon fill="black" stroke="black" points="4120.81,-8809.05 4131.16,-8806.79 4121.66,-8802.1 4120.81,-8809.05"/>
</g>
<!-- caption.main -->
<g id="node111" class="node">
<title>caption.main</title>
<g id="a_node111"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="3084.18,-8643 2954.18,-8643 2954.18,-8513 3084.18,-8513 3084.18,-8643"/>
<text text-anchor="middle" x="3019.18" y="-8574.3" font-family="Times,serif" font-size="14.00">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge160" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M3084.21,-8596.76C3146.27,-8614.95 3242.96,-8643.28 3326.13,-8667.66"/>
<polygon fill="black" stroke="black" points="3325.36,-8671.08 3335.94,-8670.53 3327.33,-8664.36 3325.36,-8671.08"/>
</g>
<!-- clean_data._parse_date -->
<g id="node112" class="node">
<title>clean_data._parse_date</title>
<g id="a_node112"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="3953.68,-5863 3839.68,-5863 3839.68,-5749 3953.68,-5749 3953.68,-5863"/>
<text text-anchor="middle" x="3896.68" y="-5802.3" font-family="Times,serif" font-size="14.00">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge166" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3953.69,-5801.24C4033.4,-5797.79 4178.85,-5804.36 4259.68,-5887 4338.14,-5967.21 4370.83,-6313.28 4380.96,-6452.08"/>
<polygon fill="black" stroke="black" points="4377.47,-6452.38 4381.67,-6462.11 4384.45,-6451.88 4377.47,-6452.38"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node113" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node113"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="3553.68,-5553 3423.68,-5553 3423.68,-5423 3553.68,-5423 3553.68,-5553"/>
<text text-anchor="middle" x="3488.68" y="-5484.3" font-family="Times,serif" font-size="14.00">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge167" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3553.82,-5491.81C3602.98,-5498.44 3668.08,-5516.02 3702.68,-5562 3792.07,-5680.78 3644.68,-6114.84 3738.68,-6230 3766.33,-6263.87 3818.15,-6271.74 3854.67,-6272.69"/>
<polygon fill="black" stroke="black" points="3854.97,-6276.19 3865.01,-6272.79 3855.04,-6269.19 3854.97,-6276.19"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge168" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3553.73,-5500.25C3598.5,-5511.09 3658.01,-5530.25 3702.68,-5562 3769.12,-5609.23 3824.3,-5685.58 3858.41,-5740.3"/>
<polygon fill="black" stroke="black" points="3855.48,-5742.21 3863.7,-5748.88 3861.44,-5738.53 3855.48,-5742.21"/>
</g>
<!-- clean_data._clean_media -->
<g id="node114" class="node">
<title>clean_data._clean_media</title>
<g id="a_node114"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="3562.68,-6167 3414.68,-6167 3414.68,-6019 3562.68,-6019 3562.68,-6167"/>
<text text-anchor="middle" x="3488.68" y="-6089.3" font-family="Times,serif" font-size="14.00">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge169" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3558.81,-6167.11C3609.14,-6226.27 3673.41,-6313.91 3702.68,-6404 3747.23,-6541.11 3673.01,-7572.66 3738.68,-7701 3763.53,-7749.57 3818.09,-7784.1 3855.86,-7803.29"/>
<polygon fill="black" stroke="black" points="3854.56,-7806.55 3865.07,-7807.84 3857.66,-7800.28 3854.56,-7806.55"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge170" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3562.81,-6081.91C3609.14,-6071.15 3666.87,-6050.25 3702.68,-6010 3744.82,-5962.65 3697.17,-5919.9 3738.68,-5872 3762.02,-5845.07 3798.19,-5828.86 3829.93,-5819.26"/>
<polygon fill="black" stroke="black" points="3830.96,-5822.6 3839.62,-5816.49 3829.04,-5815.87 3830.96,-5822.6"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node115" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node115"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="3576.68,-6001 3400.68,-6001 3400.68,-5825 3576.68,-5825 3576.68,-6001"/>
<text text-anchor="middle" x="3488.68" y="-5909.3" font-family="Times,serif" font-size="14.00">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge172" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3576.9,-5896.45C3622.5,-5882.93 3674.54,-5858.77 3702.68,-5816 3755.72,-5735.42 3688.86,-4162.6 3738.68,-4080 3757.13,-4049.41 3790.54,-4028.77 3821.82,-4015.3"/>
<polygon fill="black" stroke="black" points="3823.51,-4018.39 3831.43,-4011.35 3820.85,-4011.92 3823.51,-4018.39"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge173" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3576.76,-5931.85C3621.15,-5945.97 3672.08,-5969.98 3702.68,-6010 3762.87,-6088.7 3671.97,-6156.75 3738.68,-6230 3767.95,-6262.13 3818.96,-6270.42 3854.87,-6271.94"/>
<polygon fill="black" stroke="black" points="3854.95,-6275.45 3865.03,-6272.21 3855.13,-6268.45 3854.95,-6275.45"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge171" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M3576.92,-5931.16C3621.63,-5945.1 3672.83,-5969.16 3702.68,-6010 3782.19,-6118.77 3689.9,-6185.41 3738.68,-6311 3764.04,-6376.27 3813.42,-6440.09 3850.06,-6481.83"/>
<polygon fill="black" stroke="black" points="3847.49,-6484.21 3856.74,-6489.37 3852.72,-6479.56 3847.49,-6484.21"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node116" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node116"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="3553.68,-5807 3423.68,-5807 3423.68,-5677 3553.68,-5677 3553.68,-5807"/>
<text text-anchor="middle" x="3488.68" y="-5738.3" font-family="Times,serif" font-size="14.00">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node117" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node117"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="3961.68,-5192 3831.68,-5192 3831.68,-5062 3961.68,-5062 3961.68,-5192"/>
<text text-anchor="middle" x="3896.68" y="-5123.3" font-family="Times,serif" font-size="14.00">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node118" class="node">
<title>clean_data.main</title>
<g id="a_node118"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="3073.18,-5796 2965.18,-5796 2965.18,-5688 3073.18,-5688 3073.18,-5796"/>
<text text-anchor="middle" x="3019.18" y="-5738.3" font-family="Times,serif" font-size="14.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge174" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M3073.41,-5697.58C3123.02,-5657.88 3200.33,-5600.24 3274.68,-5562 3318.93,-5539.25 3371.75,-5520.84 3413.71,-5508.08"/>
<polygon fill="black" stroke="black" points="3414.74,-5511.43 3423.31,-5505.2 3412.73,-5504.72 3414.74,-5511.43"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge175" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M3073.57,-5753.73C3123.82,-5767.61 3197.37,-5795.74 3238.68,-5848 3284.42,-5905.86 3226.66,-5954.02 3274.68,-6010 3307.41,-6048.16 3359.9,-6068.88 3404.58,-6080.07"/>
<polygon fill="black" stroke="black" points="3404.04,-6083.54 3414.57,-6082.45 3405.66,-6076.73 3404.04,-6083.54"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge176" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M3073.36,-5761.45C3150.48,-5789.66 3294.67,-5842.4 3390.94,-5877.61"/>
<polygon fill="black" stroke="black" points="3389.8,-5880.92 3400.39,-5881.07 3392.2,-5874.35 3389.8,-5880.92"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge177" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M3073.36,-5742C3156.71,-5742 3318.4,-5742 3413.27,-5742"/>
<polygon fill="black" stroke="black" points="3413.37,-5745.5 3423.37,-5742 3413.37,-5738.5 3413.37,-5745.5"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge178" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M3024.66,-5687.59C3037.91,-5566 3088.59,-5273.01 3274.68,-5146 3318.77,-5115.91 3665.98,-5120.99 3821.18,-5124.85"/>
<polygon fill="black" stroke="black" points="3821.48,-5128.35 3831.56,-5125.11 3821.65,-5121.36 3821.48,-5128.35"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node121" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node121"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="137.34,-10065.5 56.34,-10065.5 56.34,-9984.5 137.34,-9984.5 137.34,-10065.5"/>
<text text-anchor="middle" x="96.84" y="-10021.3" font-family="Times,serif" font-size="14.00">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- moderation:cli -->
<g id="node122" class="node">
<title>moderation:cli</title>
<g id="a_node122"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="425.68" cy="-10025" rx="18" ry="18"/>
<text text-anchor="middle" x="425.68" y="-10021.3" font-family="Times,serif" font-size="14.00">moderation:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;moderation:cli -->
<!-- embed:cli -->
<g id="node168" class="node">
<title>embed:cli</title>
<g id="a_node168"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="811.18" cy="-10025" rx="18" ry="18"/>
<text text-anchor="middle" x="811.18" y="-10021.3" font-family="Times,serif" font-size="14.00">embed:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;embed:cli -->
<!-- log_utils._add_exc_line -->
<g id="node124" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node124"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="3079.18,-1985 2959.18,-1985 2959.18,-1865 3079.18,-1865 3079.18,-1985"/>
<text text-anchor="middle" x="3019.18" y="-1921.3" font-family="Times,serif" font-size="14.00">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge187" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M3079.62,-1943.49C3123.6,-1957.24 3184.95,-1976.56 3238.68,-1994 3254.72,-1999.21 3258.46,-2001.4 3274.68,-2006 3330.17,-2021.72 3394.76,-2036.38 3438.14,-2045.71"/>
<polygon fill="black" stroke="black" points="3437.64,-2049.18 3448.15,-2047.85 3439.1,-2042.34 3437.64,-2049.18"/>
</g>
<!-- log_utils.init_logger -->
<g id="node125" class="node">
<title>log_utils.init_logger</title>
<g id="a_node125"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="3192.68,-1612.5 2845.68,-1612.5 2845.68,-1265.5 3192.68,-1265.5 3192.68,-1612.5"/>
<text text-anchor="middle" x="3019.18" y="-1435.3" font-family="Times,serif" font-size="14.00">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge188" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M3192.77,-1559.29C3210.76,-1578.35 3226.78,-1599.33 3238.68,-1622 3278.53,-1697.88 3218.37,-1941.39 3274.68,-2006 3314.76,-2051.98 3388.36,-2059.95 3437.67,-2059.5"/>
<polygon fill="black" stroke="black" points="3437.87,-2063 3447.8,-2059.29 3437.73,-2056 3437.87,-2063"/>
</g>
<!-- log_utils.get_logger -->
<g id="node126" class="node">
<title>log_utils.get_logger</title>
<g id="a_node126"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="3520.18,-1422.5 3457.18,-1422.5 3457.18,-1359.5 3520.18,-1359.5 3520.18,-1422.5"/>
<text text-anchor="middle" x="3488.68" y="-1387.3" font-family="Times,serif" font-size="14.00">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge189" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M3192.93,-1414.72C3284.81,-1404.65 3390.21,-1394.66 3446.74,-1391.18"/>
<polygon fill="black" stroke="black" points="3447.26,-1394.66 3457.04,-1390.59 3446.86,-1387.67 3447.26,-1394.66"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge190" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M3457.04,-1397.7C3405.67,-1405.56 3298.4,-1417.59 3203.01,-1426.83"/>
<polygon fill="black" stroke="black" points="3202.55,-1423.36 3192.93,-1427.8 3203.22,-1430.33 3202.55,-1423.36"/>
</g>
<!-- chop.process_message -->
<g id="node127" class="node">
<title>chop.process_message</title>
<g id="a_node127"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="3238.68,-6851.5 2799.68,-6851.5 2799.68,-6412.5 3238.68,-6412.5 3238.68,-6851.5"/>
<text text-anchor="middle" x="3019.18" y="-6628.3" font-family="Times,serif" font-size="14.00">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge192" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3238.88,-6655.86C3309.87,-6663.6 3382.73,-6671.55 3431.1,-6676.83"/>
<polygon fill="black" stroke="black" points="3430.72,-6680.31 3441.04,-6677.91 3431.48,-6673.35 3430.72,-6680.31"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge200" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3216.8,-6412.1C3225.27,-6396.43 3232.7,-6380.35 3238.68,-6364 3258.54,-6309.7 3234.64,-4324.7 3274.68,-4283 3305.58,-4250.83 3555.23,-4245.19 3728.42,-4245.23"/>
<polygon fill="black" stroke="black" points="3728.67,-4248.73 3738.67,-4245.24 3728.68,-4241.73 3728.67,-4248.73"/>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge193" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M3216.91,-6412.14C3225.35,-6396.46 3232.75,-6380.37 3238.68,-6364 3296.75,-6203.86 3187.61,-3444.41 3274.68,-3298 3296.09,-3262 3332.73,-3236.06 3369.65,-3217.78"/>
<polygon fill="black" stroke="black" points="3371.52,-3220.76 3379.03,-3213.29 3368.5,-3214.45 3371.52,-3220.76"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge194" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M3238.87,-6757.64C3250.85,-6763.11 3262.84,-6768.28 3274.68,-6773 3328.83,-6794.58 3394.11,-6809.98 3438.01,-6818.89"/>
<polygon fill="black" stroke="black" points="3437.38,-6822.34 3447.87,-6820.86 3438.75,-6815.47 3437.38,-6822.34"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge195" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3231.73,-6851.79C3234.07,-6854.54 3236.39,-6857.27 3238.68,-6860 3256.07,-6880.69 3253.11,-6892.72 3274.68,-6909 3436.67,-7031.23 3582.16,-6904.75 3702.68,-7068 3786.37,-7181.35 3672.69,-7576.52 3738.68,-7701 3764.16,-7749.06 3818.31,-7783.62 3855.84,-7802.97"/>
<polygon fill="black" stroke="black" points="3854.48,-7806.21 3864.99,-7807.56 3857.62,-7799.95 3854.48,-7806.21"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge196" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3238.91,-6430.29C3250.81,-6421.15 3262.77,-6412.33 3274.68,-6404 3451.34,-6280.53 3570.93,-6346.57 3702.68,-6176 3744.86,-6121.4 3695.46,-6078.78 3738.68,-6025 3759.22,-5999.44 3790.48,-5981.91 3819.71,-5970.18"/>
<polygon fill="black" stroke="black" points="3821.02,-5973.42 3829.11,-5966.58 3818.52,-5966.89 3821.02,-5973.42"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge197" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M3216.52,-6412.49C3225.1,-6396.69 3232.62,-6380.48 3238.68,-6364 3272.27,-6272.62 3211.72,-4686.25 3274.68,-4612 3414.89,-4446.67 3708.76,-4467.48 3835.45,-4485.56"/>
<polygon fill="black" stroke="black" points="3834.97,-4489.03 3845.37,-4487.02 3835.98,-4482.1 3834.97,-4489.03"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge198" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M3225.12,-6851.61C3241.06,-6861.49 3257.62,-6870.12 3274.68,-6877 3461.69,-6952.39 3705.32,-6888.43 3824.17,-6847.98"/>
<polygon fill="black" stroke="black" points="3825.58,-6851.2 3833.9,-6844.63 3823.3,-6844.58 3825.58,-6851.2"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge199" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M3238.83,-6730.25C3250.82,-6733.65 3262.82,-6736.61 3274.68,-6739 3367.92,-6757.8 3615.55,-6777.14 3702.68,-6739 3776.68,-6706.61 3834.89,-6630.31 3867.3,-6579.42"/>
<polygon fill="black" stroke="black" points="3870.32,-6581.19 3872.66,-6570.86 3864.39,-6577.48 3870.32,-6581.19"/>
</g>
<!-- chop.main -->
<g id="node128" class="node">
<title>chop.main</title>
<g id="a_node128"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="2708.18,-6697 2578.18,-6697 2578.18,-6567 2708.18,-6567 2708.18,-6697"/>
<text text-anchor="middle" x="2643.18" y="-6628.3" font-family="Times,serif" font-size="14.00">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge201" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M2708.48,-6632C2731.93,-6632 2760,-6632 2789.52,-6632"/>
<polygon fill="black" stroke="black" points="2789.59,-6635.5 2799.59,-6632 2789.59,-6628.5 2789.59,-6635.5"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node129" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node129"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="2391.68,-8460 2319.68,-8460 2319.68,-8388 2391.68,-8388 2391.68,-8460"/>
<text text-anchor="middle" x="2355.68" y="-8420.3" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node130" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node130"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="865.18,-7670 757.18,-7670 757.18,-7562 865.18,-7562 865.18,-7670"/>
<text text-anchor="middle" x="811.18" y="-7612.3" font-family="Times,serif" font-size="14.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node131" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node131"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="2423.18,-7474.5 2288.18,-7474.5 2288.18,-7339.5 2423.18,-7339.5 2423.18,-7474.5"/>
<text text-anchor="middle" x="2355.68" y="-7403.3" font-family="Times,serif" font-size="14.00">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node132" class="node">
<title>tg_client._write_md</title>
<g id="a_node132"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="2674.68,-7060.5 2611.68,-7060.5 2611.68,-6997.5 2674.68,-6997.5 2674.68,-7060.5"/>
<text text-anchor="middle" x="2643.18" y="-7025.3" font-family="Times,serif" font-size="14.00">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge202" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M2674.9,-7031.79C2702.88,-7036.11 2742.92,-7047.08 2763.68,-7075 2826.98,-7160.12 2738.71,-7464.19 2799.68,-7551 2828.01,-7591.33 2876.96,-7615.33 2921.36,-7629.46"/>
<polygon fill="black" stroke="black" points="2920.46,-7632.85 2931.05,-7632.42 2922.5,-7626.15 2920.46,-7632.85"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node133" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node133"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="3571.18,-6578.5 3406.18,-6578.5 3406.18,-6413.5 3571.18,-6413.5 3571.18,-6578.5"/>
<text text-anchor="middle" x="3488.68" y="-6492.3" font-family="Times,serif" font-size="14.00">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge203" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3571.32,-6462.44C3611.61,-6444.97 3660.49,-6422.41 3702.68,-6399 3758.09,-6368.27 3818.41,-6326.87 3856.61,-6299.58"/>
<polygon fill="black" stroke="black" points="3858.8,-6302.32 3864.88,-6293.64 3854.72,-6296.63 3858.8,-6302.32"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node134" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node134"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="3066.68,-6355.5 2971.68,-6355.5 2971.68,-6260.5 3066.68,-6260.5 3066.68,-6355.5"/>
<text text-anchor="middle" x="3019.18" y="-6304.3" font-family="Times,serif" font-size="14.00">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge204" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M3066.97,-6315.64C3112.64,-6324.36 3183.17,-6341.29 3238.68,-6370 3256.93,-6379.44 3257.2,-6388.21 3274.68,-6399 3312.86,-6422.55 3357.72,-6443.83 3396.4,-6460.41"/>
<polygon fill="black" stroke="black" points="3395.52,-6463.84 3406.09,-6464.53 3398.26,-6457.4 3395.52,-6463.84"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node135" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node135"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="1613.68,-5548.5 1532.68,-5548.5 1532.68,-5467.5 1613.68,-5467.5 1613.68,-5548.5"/>
<text text-anchor="middle" x="1573.18" y="-5504.3" font-family="Times,serif" font-size="14.00">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge205" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1613.74,-5519.73C1743.41,-5558.01 2167.74,-5681.82 2522.68,-5769 2601.73,-5788.42 3183.21,-5864.43 3238.68,-5924 3315.78,-6006.8 3195.08,-6095.6 3274.68,-6176 3315.78,-6217.5 3722.86,-6256.06 3854.71,-6267.55"/>
<polygon fill="black" stroke="black" points="3854.53,-6271.05 3864.8,-6268.42 3855.14,-6264.07 3854.53,-6271.05"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node136" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node136"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="2438.18,-7282.5 2273.18,-7282.5 2273.18,-7117.5 2438.18,-7117.5 2438.18,-7282.5"/>
<text text-anchor="middle" x="2355.68" y="-7196.3" font-family="Times,serif" font-size="14.00">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node137" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node137"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="2729.68,-7290.5 2556.68,-7290.5 2556.68,-7117.5 2729.68,-7117.5 2729.68,-7290.5"/>
<text text-anchor="middle" x="2643.18" y="-7200.3" font-family="Times,serif" font-size="14.00">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node138" class="node">
<title>tg_client._extract_author</title>
<g id="a_node138"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="3163.18,-9380 2875.18,-9380 2875.18,-9092 3163.18,-9092 3163.18,-9380"/>
<text text-anchor="middle" x="3019.18" y="-9232.3" font-family="Times,serif" font-size="14.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge206" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M3163.44,-9313.48C3191.93,-9334.65 3219.07,-9359.92 3238.68,-9389 3278.47,-9447.99 3228.25,-9491.08 3274.68,-9545 3308.52,-9584.29 3363.17,-9605.34 3408.64,-9616.55"/>
<polygon fill="black" stroke="black" points="3407.95,-9619.99 3418.49,-9618.86 3409.55,-9613.17 3407.95,-9619.99"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node139" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node139"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="3536.18,-7392.5 3441.18,-7392.5 3441.18,-7297.5 3536.18,-7297.5 3536.18,-7392.5"/>
<text text-anchor="middle" x="3488.68" y="-7341.3" font-family="Times,serif" font-size="14.00">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node140" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node140"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="3953.68,-9831 3839.68,-9831 3839.68,-9717 3953.68,-9717 3953.68,-9831"/>
<text text-anchor="middle" x="3896.68" y="-9770.3" font-family="Times,serif" font-size="14.00">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node141" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node141"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="2452.68,-7859 2258.68,-7859 2258.68,-7665 2452.68,-7665 2452.68,-7859"/>
<text text-anchor="middle" x="2355.68" y="-7758.3" font-family="Times,serif" font-size="14.00">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge207" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2407.39,-7664.76C2433.52,-7611.98 2464.48,-7545.01 2486.68,-7483 2508.34,-7422.51 2475.32,-7386.41 2522.68,-7343 2552.41,-7315.75 3211.39,-7253.69 3238.68,-7224 3305.97,-7150.79 3217.24,-6859.16 3274.68,-6778 3310.9,-6726.83 3381.22,-6702.8 3431.15,-6691.81"/>
<polygon fill="black" stroke="black" points="3432.09,-6695.19 3441.16,-6689.72 3430.66,-6688.34 3432.09,-6695.19"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge208" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2452.81,-7776.27C2542.39,-7789.07 2679.8,-7807.41 2799.68,-7818 3199.6,-7853.33 3301.8,-7863.75 3702.68,-7842 3755.51,-7839.13 3816.12,-7831.89 3855.1,-7826.71"/>
<polygon fill="black" stroke="black" points="3855.57,-7830.18 3865.01,-7825.38 3854.64,-7823.24 3855.57,-7830.18"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node142" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node142"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="2687.18,-9645 2599.18,-9645 2599.18,-9557 2687.18,-9557 2687.18,-9645"/>
<text text-anchor="middle" x="2643.18" y="-9597.3" font-family="Times,serif" font-size="14.00">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge209" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M2382.73,-7859.16C2413.82,-7979.97 2464.4,-8193 2486.68,-8379 2494.41,-8443.51 2486.42,-9494.08 2522.68,-9548 2537.77,-9570.43 2564.68,-9583.46 2589.15,-9590.98"/>
<polygon fill="black" stroke="black" points="2588.51,-9594.44 2599.09,-9593.79 2590.41,-9587.7 2588.51,-9594.44"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node143" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node143"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="3070.18,-9668 2968.18,-9668 2968.18,-9566 3070.18,-9566 3070.18,-9668"/>
<text text-anchor="middle" x="3019.18" y="-9613.3" font-family="Times,serif" font-size="14.00">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge210" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M2687.45,-9602.85C2754.02,-9605.7 2881.79,-9611.16 2957.55,-9614.41"/>
<polygon fill="black" stroke="black" points="2957.74,-9617.92 2967.88,-9614.85 2958.04,-9610.92 2957.74,-9617.92"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node144" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node144"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="3545.68,-9831 3431.68,-9831 3431.68,-9717 3545.68,-9717 3545.68,-9831"/>
<text text-anchor="middle" x="3488.68" y="-9770.3" font-family="Times,serif" font-size="14.00">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge213" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M3070.18,-9635.59C3121.34,-9654.45 3203.24,-9684.17 3274.68,-9708 3323.74,-9724.36 3379.61,-9741.62 3421.81,-9754.39"/>
<polygon fill="black" stroke="black" points="3420.83,-9757.75 3431.41,-9757.28 3422.85,-9751.04 3420.83,-9757.75"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge211" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3546.05,-9773.61C3595.98,-9769.92 3666.41,-9755.8 3702.68,-9708 3746.12,-9650.75 3728.43,-8486.13 3738.68,-8415 3769.25,-8202.91 3848.52,-7957.9 3881.24,-7862.24"/>
<polygon fill="black" stroke="black" points="3884.59,-7863.25 3884.53,-7852.66 3877.97,-7860.98 3884.59,-7863.25"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge212" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M3545.71,-9774C3619.82,-9774 3750.27,-9774 3829.26,-9774"/>
<polygon fill="black" stroke="black" points="3829.58,-9777.5 3839.58,-9774 3829.58,-9770.5 3829.58,-9777.5"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node145" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node145"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="1153.68,-8753.5 1000.68,-8753.5 1000.68,-8600.5 1153.68,-8600.5 1153.68,-8753.5"/>
<text text-anchor="middle" x="1077.18" y="-8673.3" font-family="Times,serif" font-size="14.00">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge214" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M1078.29,-8753.67C1083.03,-8999.02 1133.39,-9749 1572.18,-9749 1572.18,-9749 1572.18,-9749 2644.18,-9749 2933.61,-9749 3278.66,-9763.89 3421.12,-9770.69"/>
<polygon fill="black" stroke="black" points="3421.28,-9774.2 3431.43,-9771.18 3421.61,-9767.21 3421.28,-9774.2"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node146" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node146"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="3565.18,-4912.5 3412.18,-4912.5 3412.18,-4759.5 3565.18,-4759.5 3565.18,-4912.5"/>
<text text-anchor="middle" x="3488.68" y="-4832.3" font-family="Times,serif" font-size="14.00">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge215" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3565.26,-4845.14C3613.09,-4855.23 3671.58,-4876.43 3702.68,-4921 3785.95,-5040.32 3648.17,-6116.08 3738.68,-6230 3765.96,-6264.33 3818.1,-6272.07 3854.79,-6272.86"/>
<polygon fill="black" stroke="black" points="3855.15,-6276.37 3865.16,-6272.92 3855.18,-6269.37 3855.15,-6276.37"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge216" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3565.33,-4829.65C3686.01,-4823.97 3921.98,-4831.78 4054.68,-4962 4273.88,-5177.1 4361.88,-6196.76 4380.68,-6451.98"/>
<polygon fill="black" stroke="black" points="4377.2,-6452.43 4381.42,-6462.15 4384.19,-6451.92 4377.2,-6452.43"/>
</g>
<!-- tg_client._load_progress -->
<g id="node147" class="node">
<title>tg_client._load_progress</title>
<g id="a_node147"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="1142.18,-5095 1012.18,-5095 1012.18,-4965 1142.18,-4965 1142.18,-5095"/>
<text text-anchor="middle" x="1077.18" y="-5026.3" font-family="Times,serif" font-size="14.00">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge217" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1077.6,-4964.98C1075.93,-4586 1091.38,-2679 1572.18,-2679 1572.18,-2679 1572.18,-2679 2644.18,-2679 2908.54,-2679 2974.92,-2677.65 3238.68,-2660 3461.56,-2645.09 3515.6,-2620.35 3738.68,-2609 3878.95,-2601.87 3941.79,-2525.45 4054.68,-2609 4305.33,-2794.51 4207.67,-2972.54 4259.68,-3280 4314.56,-3604.36 4373.78,-6044.3 4383.34,-6452.23"/>
<polygon fill="black" stroke="black" points="4379.85,-6452.41 4383.58,-6462.33 4386.85,-6452.25 4379.85,-6452.41"/>
</g>
<!-- tg_client._save_progress -->
<g id="node148" class="node">
<title>tg_client._save_progress</title>
<g id="a_node148"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="1367.18,-6310 1279.18,-6310 1279.18,-6222 1367.18,-6222 1367.18,-6310"/>
<text text-anchor="middle" x="1323.18" y="-6262.3" font-family="Times,serif" font-size="14.00">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node149" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node149"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1635.68,-6309.5 1510.68,-6309.5 1510.68,-6184.5 1635.68,-6184.5 1635.68,-6309.5"/>
<text text-anchor="middle" x="1573.18" y="-6243.3" font-family="Times,serif" font-size="14.00">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge218" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1635.81,-6239.96C1767.55,-6225.54 2086.45,-6194 2354.68,-6194 2354.68,-6194 2354.68,-6194 2644.18,-6194 2776.4,-6194 3132.66,-6138.99 3238.68,-6218 3278.24,-6247.48 3234.54,-6294.33 3274.68,-6323 3352.08,-6378.28 3608.39,-6335.48 3702.68,-6323 3756.53,-6315.87 3816.67,-6298.02 3855.29,-6285.23"/>
<polygon fill="black" stroke="black" points="3856.74,-6288.43 3865.11,-6281.93 3854.51,-6281.8 3856.74,-6288.43"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node150" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node150"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1139.68,-6165.5 1014.68,-6165.5 1014.68,-6040.5 1139.68,-6040.5 1139.68,-6165.5"/>
<text text-anchor="middle" x="1077.18" y="-6099.3" font-family="Times,serif" font-size="14.00">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge219" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1139.95,-6113.92C1233.25,-6129.43 1415.84,-6156 1572.18,-6156 1572.18,-6156 1572.18,-6156 2644.18,-6156 2710.26,-6156 3185.14,-6133.28 3238.68,-6172 3276.96,-6199.68 3236.04,-6244.84 3274.68,-6272 3430.31,-6381.38 3512.46,-6272.49 3702.68,-6272 3755.06,-6271.86 3815.42,-6271.52 3854.5,-6271.28"/>
<polygon fill="black" stroke="black" points="3854.95,-6274.77 3864.93,-6271.21 3854.91,-6267.77 3854.95,-6274.77"/>
</g>
<!-- tg_client._save_message -->
<g id="node151" class="node">
<title>tg_client._save_message</title>
<g id="a_node151"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="2188.68,-7449.5 1689.68,-7449.5 1689.68,-6950.5 2188.68,-6950.5 2188.68,-7449.5"/>
<text text-anchor="middle" x="1939.18" y="-7196.3" font-family="Times,serif" font-size="14.00">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge220" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M1958.66,-7449.79C1996.55,-7927.65 2090.93,-8952.86 2224.68,-9280 2308.58,-9485.2 2333.17,-9564.97 2522.68,-9680 2798.26,-9847.28 2959.38,-9635.03 3238.68,-9796 3260.57,-9808.62 3251.85,-9829.18 3274.68,-9840 3313.84,-9858.56 4023,-9869.56 4054.68,-9840 4096.95,-9800.57 4073.66,-9376.24 4090.68,-9321 4100.99,-9287.53 4120.4,-9253.54 4137.91,-9227.09"/>
<polygon fill="black" stroke="black" points="4140.82,-9229.03 4143.51,-9218.78 4135.02,-9225.12 4140.82,-9229.03"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge222" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2007.72,-6950.43C2059.76,-6768.53 2137.4,-6517.59 2224.68,-6304 2335.66,-6032.42 2384.52,-5973.8 2522.68,-5715 2828.39,-5142.36 3028.51,-5056.16 3238.68,-4442 3256.36,-4390.35 3233.35,-4234.66 3274.68,-4199 3310.69,-4167.93 3655.48,-4193.22 3702.68,-4199 3711.21,-4200.04 3719.91,-4201.34 3728.65,-4202.83"/>
<polygon fill="black" stroke="black" points="3728.09,-4206.28 3738.54,-4204.58 3729.31,-4199.39 3728.09,-4206.28"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge223" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2009.86,-6950.48C2054.23,-6831.81 2122.95,-6696.28 2224.68,-6605 2426.29,-6424.1 2532.67,-6448.54 2799.68,-6403 2895.85,-6386.6 3163.37,-6340.99 3238.68,-6403 3303.01,-6455.96 3210.35,-6534.04 3274.68,-6587 3311.4,-6617.23 3664.06,-6614.75 3702.68,-6587 3743.43,-6557.72 3715.32,-6524.4 3738.68,-6480 3772.36,-6415.99 3824.96,-6350.68 3859.86,-6310.49"/>
<polygon fill="black" stroke="black" points="3862.64,-6312.63 3866.6,-6302.8 3857.38,-6308.02 3862.64,-6312.63"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge221" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M2188.9,-7114.72C2200.92,-7112.13 2212.89,-7109.86 2224.68,-7108 2283.84,-7098.67 2720.16,-7066.86 2763.68,-7108 2866.88,-7205.54 2696.48,-7648.46 2799.68,-7746 2845,-7788.83 3274.19,-7761.12 3430.82,-7749.45"/>
<polygon fill="black" stroke="black" points="3431.47,-7752.91 3441.18,-7748.67 3430.95,-7745.93 3431.47,-7752.91"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge224" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M2173.84,-7449.74C2179.33,-7460.33 2184.31,-7471.1 2188.68,-7482 2225.6,-7574.07 2166.89,-8293.38 2224.68,-8374 2244.09,-8401.07 2280.26,-8413.49 2309.52,-8419.18"/>
<polygon fill="black" stroke="black" points="2309.1,-8422.66 2319.55,-8420.93 2310.3,-8415.76 2309.1,-8422.66"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge225" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M2188.78,-7324.15C2221.43,-7340.45 2252.65,-7356.05 2279.03,-7369.22"/>
<polygon fill="black" stroke="black" points="2277.64,-7372.44 2288.15,-7373.77 2280.77,-7366.17 2277.64,-7372.44"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge226" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M2188.82,-7085.7C2200.83,-7081.78 2212.83,-7078.18 2224.68,-7075 2359.39,-7038.9 2525.85,-7031.06 2601.43,-7029.41"/>
<polygon fill="black" stroke="black" points="2601.54,-7032.91 2611.47,-7029.22 2601.41,-7025.91 2601.54,-7032.91"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge227" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M1954.86,-6950.35C1980.38,-6759.61 2047.99,-6506.93 2224.68,-6370 2339.31,-6281.17 2799.38,-6296.32 2961.39,-6304.66"/>
<polygon fill="black" stroke="black" points="2961.45,-6308.17 2971.62,-6305.2 2961.82,-6301.18 2961.45,-6308.17"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge228" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M2188.78,-7200C2214.91,-7200 2240.12,-7200 2262.67,-7200"/>
<polygon fill="black" stroke="black" points="2262.83,-7203.5 2272.83,-7200 2262.83,-7196.5 2262.83,-7203.5"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge229" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M2188.72,-7285.22C2282.85,-7306.07 2390.47,-7316.09 2486.68,-7291 2507.23,-7285.64 2527.93,-7276.91 2547.23,-7266.99"/>
<polygon fill="black" stroke="black" points="2549.09,-7269.96 2556.29,-7262.19 2545.82,-7263.78 2549.09,-7269.96"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge230" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M2172.86,-7449.62C2178.65,-7460.26 2183.96,-7471.07 2188.68,-7482 2256.99,-7640.18 2173.96,-7703.33 2224.68,-7868 2370.55,-8341.58 2604.5,-8374.73 2763.68,-8844 2798.19,-8945.73 2743.1,-8991.69 2799.68,-9083 2816.76,-9110.56 2840.84,-9134.49 2866.81,-9154.71"/>
<polygon fill="black" stroke="black" points="2864.84,-9157.61 2874.92,-9160.87 2869.07,-9152.03 2864.84,-9157.61"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge231" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M2164.49,-7449.8C2172.81,-7460.55 2180.91,-7471.31 2188.68,-7482 2228.75,-7537.09 2267.88,-7602.38 2298.09,-7656.05"/>
<polygon fill="black" stroke="black" points="2295.1,-7657.89 2303.05,-7664.9 2301.21,-7654.47 2295.1,-7657.89"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge232" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M1896.7,-7449.78C1907.51,-7460.97 1921.67,-7467.5 1939.18,-7467.5 1952.87,-7467.5 1964.5,-7463.51 1974.09,-7456.43"/>
<polygon fill="black" stroke="black" points="1976.47,-7459.01 1981.67,-7449.78 1971.84,-7453.75 1976.47,-7459.01"/>
</g>
<!-- tg_client._save_media -->
<g id="node152" class="node">
<title>tg_client._save_media</title>
<g id="a_node152"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="2751.18,-7611 2535.18,-7611 2535.18,-7395 2751.18,-7395 2751.18,-7611"/>
<text text-anchor="middle" x="2643.18" y="-7499.3" font-family="Times,serif" font-size="14.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge233" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M2164.72,-7449.59C2183.92,-7462.49 2203.97,-7473.86 2224.68,-7483 2319.37,-7524.75 2438.12,-7526.19 2524.74,-7519.28"/>
<polygon fill="black" stroke="black" points="2525.2,-7522.75 2534.87,-7518.42 2524.61,-7515.78 2525.2,-7522.75"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge234" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2751.19,-7596.21C2755.8,-7602.61 2760.02,-7609.22 2763.68,-7616 2806.99,-7696.25 2738.97,-7749.96 2799.68,-7818 2935.25,-7969.92 3106,-7794.55 3238.68,-7949 3314.13,-8036.82 3187.34,-8131 3274.68,-8207 3346.43,-8269.43 3610.52,-8230.5 3702.68,-8207 3875.36,-8162.97 3925.39,-8137.64 4054.68,-8015 4101.38,-7970.71 4136.98,-7904.36 4156.74,-7861.88"/>
<polygon fill="black" stroke="black" points="4159.97,-7863.22 4160.95,-7852.67 4153.61,-7860.31 4159.97,-7863.22"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge235" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2751.38,-7597.1C2755.88,-7603.23 2760.02,-7609.54 2763.68,-7616 2800.25,-7680.55 2742.93,-7731.21 2799.68,-7779 2881.61,-7847.99 3666.13,-7828.15 3854.96,-7822.34"/>
<polygon fill="black" stroke="black" points="3855.13,-7825.83 3865.02,-7822.02 3854.91,-7818.84 3855.13,-7825.83"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge236" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M2751.36,-7502.71C2822.74,-7502.52 2913.22,-7502.28 2968.35,-7502.13"/>
<polygon fill="black" stroke="black" points="2968.57,-7505.63 2978.56,-7502.11 2968.55,-7498.63 2968.57,-7505.63"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge237" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M2751.26,-7464.5C2767.34,-7459.71 2783.83,-7455.33 2799.68,-7452 2991.53,-7411.65 3045.62,-7443.06 3238.68,-7409 3275.27,-7402.55 3369.58,-7377.42 3431.06,-7360.64"/>
<polygon fill="black" stroke="black" points="3432.28,-7363.93 3441,-7357.92 3430.44,-7357.18 3432.28,-7363.93"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node153" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node153"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="1653.68,-7074.5 1492.68,-7074.5 1492.68,-6913.5 1653.68,-6913.5 1653.68,-7074.5"/>
<text text-anchor="middle" x="1573.18" y="-6990.3" font-family="Times,serif" font-size="14.00">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge238" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M1654.06,-7039.21C1662.55,-7044.01 1671.47,-7049.06 1680.71,-7054.29"/>
<polygon fill="black" stroke="black" points="1679.23,-7057.47 1689.66,-7059.35 1682.68,-7051.38 1679.23,-7057.47"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node154" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node154"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="3573.18,-5099.5 3404.18,-5099.5 3404.18,-4930.5 3573.18,-4930.5 3573.18,-5099.5"/>
<text text-anchor="middle" x="3488.68" y="-5011.3" font-family="Times,serif" font-size="14.00">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge241" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3573.27,-4999.85C3619.18,-4986.95 3672.73,-4963.43 3702.68,-4921 3765.01,-4832.71 3698.23,-4536.22 3738.68,-4436 3741.66,-4428.63 3745.03,-4421.33 3748.73,-4414.13"/>
<polygon fill="black" stroke="black" points="3751.95,-4415.54 3753.58,-4405.07 3745.78,-4412.23 3751.95,-4415.54"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge239" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3573.39,-5043.32C3620.27,-5063.94 3674.76,-5096.95 3702.68,-5146 3765.58,-5256.48 3652.85,-7340.23 3738.68,-7434 3786.35,-7486.08 4002.84,-7419.07 4054.68,-7467 4119.4,-7526.82 4061.87,-7578.71 4090.68,-7662 4105.34,-7704.37 4129.88,-7749.31 4148.57,-7780.57"/>
<polygon fill="black" stroke="black" points="4145.75,-7782.66 4153.92,-7789.41 4151.74,-7779.04 4145.75,-7782.66"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge240" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3573.26,-4991.6C3696.03,-4962.85 3924.62,-4931.56 4054.68,-5053 4116.5,-5110.72 4160.53,-5719 4171.51,-5885.87"/>
<polygon fill="black" stroke="black" points="4168.04,-5886.46 4172.19,-5896.21 4175.03,-5886 4168.04,-5886.46"/>
</g>
<!-- tg_client._download_messages -->
<g id="node155" class="node">
<title>tg_client._download_messages</title>
<g id="a_node155"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="1438.18,-7006 1208.18,-7006 1208.18,-6776 1438.18,-6776 1438.18,-7006"/>
<text text-anchor="middle" x="1323.18" y="-6887.3" font-family="Times,serif" font-size="14.00">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge242" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1438.38,-6938.43C1453.4,-6944.67 1468.61,-6950.98 1483.12,-6957.01"/>
<polygon fill="black" stroke="black" points="1481.97,-6960.32 1492.55,-6960.93 1484.66,-6953.86 1481.97,-6960.32"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node156" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node156"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="1380.18,-9891 1266.18,-9891 1266.18,-9777 1380.18,-9777 1380.18,-9891"/>
<text text-anchor="middle" x="1323.18" y="-9830.3" font-family="Times,serif" font-size="14.00">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node157" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node157"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="1456.68,-5564.5 1189.68,-5564.5 1189.68,-5297.5 1456.68,-5297.5 1456.68,-5564.5"/>
<text text-anchor="middle" x="1323.18" y="-5427.3" font-family="Times,serif" font-size="14.00">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge243" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1372.63,-5297.4C1400.38,-5234.97 1440.23,-5163.1 1492.68,-5111 1562.64,-5041.52 1597.23,-5043.27 1689.68,-5009 1903.37,-4929.79 2043.49,-5066.65 2188.68,-4891 2248.06,-4819.17 2170.33,-4128.71 2224.68,-4053 2503.45,-3664.68 2796.7,-3825.53 3274.68,-3820 3369.79,-3818.9 3630.74,-3757.78 3702.68,-3820 3744.64,-3856.28 3715.51,-4016.6 3738.68,-4067 3740.69,-4071.36 3742.83,-4075.7 3745.1,-4080"/>
<polygon fill="black" stroke="black" points="3742.04,-4081.7 3749.93,-4088.78 3748.18,-4078.33 3742.04,-4081.7"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge244" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1406.17,-5564.54C1509.81,-5714.75 1703.35,-5938 1938.18,-5938 1938.18,-5938 1938.18,-5938 2644.18,-5938 2776.36,-5938 3140.68,-5868.31 3238.68,-5957 3329.1,-6038.83 3185.74,-6145.58 3274.68,-6229 3358.35,-6307.47 3730.37,-6284.67 3854.91,-6274.6"/>
<polygon fill="black" stroke="black" points="3855.48,-6278.07 3865.15,-6273.76 3854.9,-6271.09 3855.48,-6278.07"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge246" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M1394.59,-5297.38C1416.35,-5252.87 1439.17,-5202.5 1456.68,-5155 1478.31,-5096.33 1476.3,-5079.34 1492.68,-5019 1810.54,-3848.5 1565.63,-3408.21 2224.68,-2390 2393.94,-2128.5 2578.43,-2192.43 2763.68,-1942 2788.32,-1908.69 2765.19,-1878.96 2799.68,-1856 2837.75,-1830.67 4005.59,-1829.8 4054.68,-1871 4140.47,-1942.99 4165.65,-2298.36 4172.15,-2432.04"/>
<polygon fill="black" stroke="black" points="4168.67,-2432.57 4172.64,-2442.4 4175.66,-2432.24 4168.67,-2432.57"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge245" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M1381.83,-5564.82C1411.65,-5629.07 1450.6,-5706.03 1492.68,-5771 1870.94,-6355 1900.75,-6638.02 2522.68,-6950 2619.61,-6998.62 2688.42,-6909.94 2763.68,-6988 2856.58,-7084.36 2699.54,-7198.19 2799.68,-7287 2945.66,-7416.46 3043.79,-7296.29 3238.68,-7287 3602.59,-7269.65 3692.74,-7250.51 4054.68,-7209 4071.98,-7207.02 4090.65,-7204.63 4107.98,-7202.32"/>
<polygon fill="black" stroke="black" points="4108.56,-7205.77 4118.01,-7200.97 4107.63,-7198.83 4108.56,-7205.77"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge247" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M1456.9,-5472.21C1480.43,-5479.51 1503.55,-5486.69 1522.83,-5492.68"/>
<polygon fill="black" stroke="black" points="1521.96,-5496.07 1532.54,-5495.69 1524.03,-5489.38 1521.96,-5496.07"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge248" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1347.72,-5564.73C1374.9,-5720.33 1420.52,-5985.03 1456.68,-6213 1496.24,-6462.36 1538.67,-6757.23 1559.36,-6903.01"/>
<polygon fill="black" stroke="black" points="1555.94,-6903.84 1560.81,-6913.25 1562.87,-6902.85 1555.94,-6903.84"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge249" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M1432.73,-5297.31C1545.06,-5175.01 1732.66,-5013 1938.18,-5013 1938.18,-5013 1938.18,-5013 2644.18,-5013 2916.62,-5013 3238.56,-5014.06 3394.17,-5014.63"/>
<polygon fill="black" stroke="black" points="3394.16,-5018.13 3404.18,-5014.67 3394.19,-5011.13 3394.16,-5018.13"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node158" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node158"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="964.68,-6383.5 657.68,-6383.5 657.68,-6076.5 964.68,-6076.5 964.68,-6383.5"/>
<text text-anchor="middle" x="811.18" y="-6226.3" font-family="Times,serif" font-size="14.00">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge250" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M965.03,-6274.53C1033.15,-6292.16 1114.77,-6310.29 1189.68,-6319 1307.56,-6332.71 1338.02,-6319.3 1456.68,-6319 1544.24,-6318.78 1566.17,-6320.78 1653.68,-6318 1829.86,-6312.41 3094.47,-6149.64 3238.68,-6251 3277.33,-6278.16 3236.04,-6323.84 3274.68,-6351 3352.5,-6405.69 3609.4,-6369.57 3702.68,-6351 3758.27,-6339.94 3817.9,-6312.57 3855.93,-6292.93"/>
<polygon fill="black" stroke="black" points="3857.89,-6295.86 3865.12,-6288.12 3854.64,-6289.66 3857.89,-6295.86"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge251" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M843.92,-6076.11C891.27,-5876.71 996.28,-5526.43 1189.68,-5288 1434.07,-4986.72 1550.25,-4839 1938.18,-4839 1938.18,-4839 1938.18,-4839 2644.18,-4839 2921.18,-4839 3249.35,-4837.36 3401.84,-4836.51"/>
<polygon fill="black" stroke="black" points="3402.09,-4840.01 3412.07,-4836.45 3402.05,-4833.01 3402.09,-4840.01"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge252" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M819.66,-6076.4C834.35,-5861.7 877.25,-5462.72 1000.68,-5147 1006.35,-5132.5 1013.95,-5117.89 1022.14,-5104.15"/>
<polygon fill="black" stroke="black" points="1025.35,-5105.61 1027.59,-5095.25 1019.38,-5101.95 1025.35,-5105.61"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge253" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M964.85,-6240.78C1067.79,-6248.04 1197.39,-6257.19 1268.81,-6262.23"/>
<polygon fill="black" stroke="black" points="1268.69,-6265.73 1278.91,-6262.95 1269.18,-6258.75 1268.69,-6265.73"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge254" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M964.74,-6211.54C1095.87,-6199.1 1289.67,-6188.93 1456.68,-6213 1471.14,-6215.08 1486.31,-6218.56 1500.73,-6222.52"/>
<polygon fill="black" stroke="black" points="1499.99,-6225.95 1510.57,-6225.33 1501.91,-6219.22 1499.99,-6225.95"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge255" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M964.99,-6156.49C979.03,-6149.74 992.74,-6143.14 1005.48,-6137.01"/>
<polygon fill="black" stroke="black" points="1007.08,-6140.13 1014.57,-6132.64 1004.05,-6133.82 1007.08,-6140.13"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge256" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M930.79,-6383.72C1020.94,-6500.57 1143.33,-6659.19 1227.1,-6767.76"/>
<polygon fill="black" stroke="black" points="1224.43,-6770.04 1233.31,-6775.82 1229.98,-6765.76 1224.43,-6770.04"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node159" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node159"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="3613.18,-5404.5 3364.18,-5404.5 3364.18,-5155.5 3613.18,-5155.5 3613.18,-5404.5"/>
<text text-anchor="middle" x="3488.68" y="-5276.3" font-family="Times,serif" font-size="14.00">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge259" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3613.19,-5208.33C3648.23,-5181.54 3682.35,-5147.78 3702.68,-5108 3770.74,-4974.84 3684.14,-4575.25 3738.68,-4436 3741.55,-4428.67 3744.83,-4421.41 3748.43,-4414.26"/>
<polygon fill="black" stroke="black" points="3751.61,-4415.73 3753.16,-4405.25 3745.41,-4412.48 3751.61,-4415.73"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge260" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3613.38,-5330.75C3648.2,-5351.29 3682.15,-5378.69 3702.68,-5414 3748.3,-5492.46 3681.64,-6159.42 3738.68,-6230 3766.16,-6264 3818.02,-6271.85 3854.6,-6272.75"/>
<polygon fill="black" stroke="black" points="3854.92,-6276.25 3864.95,-6272.84 3854.97,-6269.25 3854.92,-6276.25"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge257" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3613.39,-5330.09C3648.44,-5350.66 3682.51,-5378.23 3702.68,-5414 3758.71,-5513.37 3662.91,-7381.73 3738.68,-7467 3832.84,-7572.95 3949.7,-7414.77 4054.68,-7510 4106.1,-7556.64 4066.35,-7596.98 4090.68,-7662 4106.4,-7703.99 4130.8,-7748.98 4149.18,-7780.35"/>
<polygon fill="black" stroke="black" points="4146.33,-7782.4 4154.43,-7789.22 4152.35,-7778.83 4146.33,-7782.4"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge258" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3613.4,-5352.4C3643.36,-5371.4 3674.78,-5392.6 3702.68,-5414 3871.88,-5543.77 3918.14,-5576.22 4054.68,-5740 4093.89,-5787.03 4130.3,-5847.78 4152.39,-5887.31"/>
<polygon fill="black" stroke="black" points="4149.51,-5889.33 4157.41,-5896.39 4155.63,-5885.94 4149.51,-5889.33"/>
</g>
<!-- tg_client.main -->
<g id="node160" class="node">
<title>tg_client.main</title>
<g id="a_node160"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="621.68,-7673 229.68,-7673 229.68,-7281 621.68,-7281 621.68,-7673"/>
<text text-anchor="middle" x="425.68" y="-7473.3" font-family="Times,serif" font-size="14.00">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge261" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M622.04,-7485.69C750.96,-7490.7 923.61,-7496 1076.18,-7496 1076.18,-7496 1076.18,-7496 1574.18,-7496 1807.85,-7496 2223.16,-8193.8 2329.39,-8379.21"/>
<polygon fill="black" stroke="black" points="2326.36,-8380.96 2334.36,-8387.91 2332.43,-8377.49 2326.36,-8380.96"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge262" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M621.8,-7547.72C667.3,-7564.21 712.54,-7580.61 747.29,-7593.2"/>
<polygon fill="black" stroke="black" points="746.2,-7596.53 756.8,-7596.65 748.59,-7589.95 746.2,-7596.53"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge263" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M621.71,-7504.9C633.88,-7506.63 645.95,-7508.34 657.68,-7510 725.89,-7519.65 916.96,-7503.32 964.68,-7553 1036.15,-7627.41 1065.47,-8339.13 1073.64,-8590"/>
<polygon fill="black" stroke="black" points="1070.15,-8590.29 1073.97,-8600.17 1077.14,-8590.06 1070.15,-8590.29"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge264" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M621.97,-7394.66C873.14,-7288.75 1298.87,-7109.24 1482.97,-7031.62"/>
<polygon fill="black" stroke="black" points="1484.5,-7034.77 1492.35,-7027.66 1481.78,-7028.32 1484.5,-7034.77"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge265" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M443.62,-7673.06C489.93,-8100.13 653.48,-9127.06 1189.68,-9763 1207.36,-9783.96 1232.84,-9799.67 1256.74,-9810.92"/>
<polygon fill="black" stroke="black" points="1255.6,-9814.24 1266.16,-9815.16 1258.48,-9807.86 1255.6,-9814.24"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge266" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M443.39,-7280.76C474.54,-6944.53 548.39,-6274.46 657.68,-6067 781.71,-5831.56 1025.84,-5633.14 1181.15,-5523.31"/>
<polygon fill="black" stroke="black" points="1183.24,-5526.12 1189.41,-5517.5 1179.21,-5520.4 1183.24,-5526.12"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge267" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M487.03,-7280.78C562.3,-7036.01 689.64,-6621.95 759.89,-6393.52"/>
<polygon fill="black" stroke="black" points="763.29,-6394.38 762.89,-6383.79 756.6,-6392.32 763.29,-6394.38"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge268" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M434.73,-7280.86C464.46,-6685.08 592.86,-4937 1076.18,-4937 1076.18,-4937 1076.18,-4937 1324.18,-4937 2101.6,-4937 3016.97,-5155.71 3354.27,-5243.84"/>
<polygon fill="black" stroke="black" points="3353.52,-5247.26 3364.08,-5246.41 3355.3,-5240.49 3353.52,-5247.26"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node161" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node161"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="4011.68,-2848 3781.68,-2848 3781.68,-2618 4011.68,-2618 4011.68,-2848"/>
<text text-anchor="middle" x="3896.68" y="-2729.3" font-family="Times,serif" font-size="14.00">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge270" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M4011.74,-2629.87C4051.92,-2593.54 4094.92,-2554.67 4126.58,-2526.04"/>
<polygon fill="black" stroke="black" points="4129.3,-2528.3 4134.37,-2519 4124.61,-2523.11 4129.3,-2528.3"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge269" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M4012.05,-2802.52C4029.24,-2818.22 4044.57,-2836.43 4054.68,-2857 4094.18,-2937.38 4086.83,-5991.52 4090.68,-6081 4107.78,-6477.83 4151.1,-6952.81 4167.63,-7125.81"/>
<polygon fill="black" stroke="black" points="4164.15,-7126.16 4168.59,-7135.78 4171.12,-7125.5 4164.15,-7126.16"/>
</g>
<!-- pending_embed.main -->
<g id="node162" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="2763.68,-4200.5 2522.68,-4200.5 2522.68,-3959.5 2763.68,-3959.5 2763.68,-4200.5"/>
<text text-anchor="middle" x="2643.18" y="-4076.3" font-family="Times,serif" font-size="14.00">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge271" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M2717.97,-4200.66C2736.54,-4237.07 2753.95,-4278.02 2763.68,-4318 2782.78,-4396.44 2744.29,-7165.27 2799.68,-7224 3075.76,-7516.68 3404.98,-7017.35 3702.68,-7288 3774.37,-7353.17 3685.75,-7421.85 3738.68,-7503 3754.23,-7526.83 3777.42,-7546.38 3801.25,-7561.81"/>
<polygon fill="black" stroke="black" points="3799.7,-7564.97 3810.04,-7567.3 3803.41,-7559.03 3799.7,-7564.97"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge272" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M2654.42,-3959.29C2681.75,-3643.61 2757.19,-2815.05 2799.68,-2774 2837.77,-2737.2 3221.76,-2736.22 3274.68,-2734 3369.71,-2730.01 3630.4,-2672.19 3702.68,-2734 3780.99,-2800.96 3676.25,-2881.04 3738.68,-2963 3759.46,-2990.27 3793.09,-3007.35 3823.91,-3017.9"/>
<polygon fill="black" stroke="black" points="3823.21,-3021.36 3833.8,-3021.11 3825.36,-3014.7 3823.21,-3021.36"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge273" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2652.39,-3959.28C2672.35,-3682.98 2727.18,-3023.12 2799.68,-2955 2870.98,-2888.01 3164.68,-2985.99 3238.68,-2922 3294.15,-2874.04 3217.46,-2806.84 3274.68,-2761 3311.8,-2731.27 3667.86,-2728.61 3702.68,-2761 3743.14,-2798.63 3730.9,-3202.29 3738.68,-3257 3773.38,-3500.94 3842.16,-3784.89 3875.97,-3917.51"/>
<polygon fill="black" stroke="black" points="3872.68,-3918.75 3878.55,-3927.57 3879.46,-3917.01 3872.68,-3918.75"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge276" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2763.71,-4099.87C2775.84,-4101.46 2787.99,-4102.88 2799.68,-4104 2999.58,-4123.12 3509.47,-4083.3 3702.68,-4138 3711.45,-4140.48 3720.25,-4143.44 3729,-4146.76"/>
<polygon fill="black" stroke="black" points="3727.88,-4150.08 3738.47,-4150.5 3730.45,-4143.57 3727.88,-4150.08"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge275" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M2699.26,-3959.41C2723.94,-3919.71 2757.21,-3880.1 2799.68,-3858 2904.11,-3803.65 3254.59,-3855.91 3411.09,-3882.99"/>
<polygon fill="black" stroke="black" points="3410.66,-3886.47 3421.11,-3884.74 3411.86,-3879.57 3410.66,-3886.47"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge274" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M2763.93,-4125.14C2775.96,-4129.3 2788.03,-4133.33 2799.68,-4137 2855.71,-4154.66 2920.92,-4171.5 2965.42,-4182.44"/>
<polygon fill="black" stroke="black" points="2964.6,-4185.84 2975.14,-4184.82 2966.26,-4179.04 2964.6,-4185.84"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge277" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M2710.12,-4200.65C2728.88,-4237.67 2748.36,-4278.94 2763.68,-4318 2784.65,-4371.42 2780.45,-4387.93 2799.68,-4442 2980.93,-4951.41 2863.51,-5210.88 3274.68,-5562 3319.36,-5600.16 3387.49,-5611.58 3434.61,-5614.62"/>
<polygon fill="black" stroke="black" points="3434.45,-5618.12 3444.63,-5615.17 3434.83,-5611.13 3434.45,-5618.12"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge278" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M2653.89,-3959.37C2680.43,-3636.32 2755.22,-2773.14 2799.68,-2731 2836.12,-2696.48 3652.65,-2698.01 3702.68,-2702 3725,-2703.78 3748.64,-2706.7 3771.43,-2710.06"/>
<polygon fill="black" stroke="black" points="3771.08,-2713.55 3781.49,-2711.58 3772.12,-2706.63 3771.08,-2713.55"/>
</g>
<!-- check_translations.parse_po -->
<g id="node163" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="913.18,-10265 709.18,-10265 709.18,-10061 913.18,-10061 913.18,-10265"/>
<text text-anchor="middle" x="811.18" y="-10159.3" font-family="Times,serif" font-size="14.00">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node164" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="512.18,-10249.5 339.18,-10249.5 339.18,-10076.5 512.18,-10076.5 512.18,-10249.5"/>
<text text-anchor="middle" x="425.68" y="-10159.3" font-family="Times,serif" font-size="14.00">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge279" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M512.27,-10163C567.26,-10163 639.25,-10163 698.69,-10163"/>
<polygon fill="black" stroke="black" points="698.88,-10166.5 708.88,-10163 698.88,-10159.5 698.88,-10166.5"/>
</g>
<!-- pending_chop.main -->
<g id="node165" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="3099.68,-6127.5 2938.68,-6127.5 2938.68,-5966.5 3099.68,-5966.5 3099.68,-6127.5"/>
<text text-anchor="middle" x="3019.18" y="-6043.3" font-family="Times,serif" font-size="14.00">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge280" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3099.77,-6098.84C3148.54,-6135.22 3207.44,-6188.44 3238.68,-6251 3305.79,-6385.36 3186.56,-6465.38 3274.68,-6587 3311.42,-6637.7 3381.3,-6662.16 3430.99,-6673.6"/>
<polygon fill="black" stroke="black" points="3430.44,-6677.06 3440.96,-6675.78 3431.94,-6670.22 3430.44,-6677.06"/>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge281" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3099.89,-5984.96C3149.89,-5940.83 3210.11,-5876.79 3238.68,-5805 3270.74,-5724.45 3212.68,-4305.59 3274.68,-4245 3336.76,-4184.34 3566.38,-4200.77 3728.26,-4221.32"/>
<polygon fill="black" stroke="black" points="3727.97,-4224.81 3738.33,-4222.62 3728.86,-4217.87 3727.97,-4224.81"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node166" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node166"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3937.18,-6982.5 3856.18,-6982.5 3856.18,-6901.5 3937.18,-6901.5 3937.18,-6982.5"/>
<text text-anchor="middle" x="3896.68" y="-6938.3" font-family="Times,serif" font-size="14.00">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node167" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="3122.68,-7076.5 2915.68,-7076.5 2915.68,-6869.5 3122.68,-6869.5 3122.68,-7076.5"/>
<text text-anchor="middle" x="3019.18" y="-6969.3" font-family="Times,serif" font-size="14.00">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge282" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3122.91,-6937.22C3163.1,-6919.12 3207.05,-6893.71 3238.68,-6860 3265.92,-6830.98 3246.62,-6806.23 3274.68,-6778 3317.73,-6734.71 3383.95,-6709.46 3431.12,-6696.01"/>
<polygon fill="black" stroke="black" points="3432.17,-6699.35 3440.88,-6693.32 3430.31,-6692.61 3432.17,-6699.35"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge285" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3122.8,-6945.83C3166.34,-6928.7 3212.91,-6901.68 3238.68,-6860 3275.85,-6799.89 3226.54,-4367.74 3274.68,-4316 3307.2,-4281.05 3655.32,-4284.96 3702.68,-4279 3711.19,-4277.93 3719.9,-4276.76 3728.68,-4275.52"/>
<polygon fill="black" stroke="black" points="3729.23,-4278.97 3738.63,-4274.09 3728.23,-4272.05 3729.23,-4278.97"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge283" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3122.78,-7008.14C3163.19,-7026.19 3207.34,-7051.73 3238.68,-7086 3267.2,-7117.18 3242.95,-7146.09 3274.68,-7174 3422.5,-7304.01 3576.06,-7137.27 3702.68,-7288 3761.94,-7358.54 3694.31,-7620.27 3738.68,-7701 3764.81,-7748.53 3818.55,-7783.12 3855.83,-7802.63"/>
<polygon fill="black" stroke="black" points="3854.42,-7805.84 3864.92,-7807.26 3857.6,-7799.6 3854.42,-7805.84"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge284" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M3122.74,-6945.79C3166.27,-6928.66 3212.85,-6901.64 3238.68,-6860 3300.49,-6760.38 3208.67,-4846.89 3274.68,-4750 3311.25,-4696.33 3387.08,-4675.34 3437.68,-4667.17"/>
<polygon fill="black" stroke="black" points="3438.39,-4670.6 3447.75,-4665.65 3437.35,-4663.68 3438.39,-4670.6"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge286" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M3122.76,-6969.37C3311.33,-6962.69 3706.51,-6948.7 3845.8,-6943.77"/>
<polygon fill="black" stroke="black" points="3846.28,-6947.25 3856.15,-6943.4 3846.04,-6940.26 3846.28,-6947.25"/>
</g>
<!-- debug_dump:cli -->
<g id="node169" class="node">
<title>debug_dump:cli</title>
<g id="a_node169"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1077.18" cy="-10025" rx="18" ry="18"/>
<text text-anchor="middle" x="1077.18" y="-10021.3" font-family="Times,serif" font-size="14.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;debug_dump:cli -->
<!-- scan_ontology:cli -->
<g id="node170" class="node">
<title>scan_ontology:cli</title>
<g id="a_node170"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1323.18" cy="-10025" rx="18" ry="18"/>
<text text-anchor="middle" x="1323.18" y="-10021.3" font-family="Times,serif" font-size="14.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;scan_ontology:cli -->
<!-- build_site:cli -->
<g id="node171" class="node">
<title>build_site:cli</title>
<g id="a_node171"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1573.18" cy="-10025" rx="18" ry="18"/>
<text text-anchor="middle" x="1573.18" y="-10021.3" font-family="Times,serif" font-size="14.00">build_site:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;build_site:cli -->
<!-- telegram_bot:cli -->
<g id="node172" class="node">
<title>telegram_bot:cli</title>
<g id="a_node172"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1939.18" cy="-10025" rx="44" ry="44"/>
<text text-anchor="middle" x="1939.18" y="-10021.3" font-family="Times,serif" font-size="14.00">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;telegram_bot:cli -->
<!-- caption:cli -->
<g id="node173" class="node">
<title>caption:cli</title>
<g id="a_node173"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="96.84" cy="-10301" rx="18" ry="18"/>
<text text-anchor="middle" x="96.84" y="-10297.3" font-family="Times,serif" font-size="14.00">caption:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node174" class="node">
<title>clean_data:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="425.68" cy="-10301" rx="18" ry="18"/>
<text text-anchor="middle" x="425.68" y="-10297.3" font-family="Times,serif" font-size="14.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;clean_data:cli -->
<!-- chop:cli -->
<g id="node175" class="node">
<title>chop:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="811.18" cy="-10301" rx="18" ry="18"/>
<text text-anchor="middle" x="811.18" y="-10297.3" font-family="Times,serif" font-size="14.00">chop:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;chop:cli -->
<!-- tg_client:cli -->
<g id="node176" class="node">
<title>tg_client:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1077.18" cy="-10301" rx="18" ry="18"/>
<text text-anchor="middle" x="1077.18" y="-10297.3" font-family="Times,serif" font-size="14.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;tg_client:cli -->
<!-- pending_embed:cli -->
<g id="node177" class="node">
<title>pending_embed:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1323.18" cy="-10301" rx="18" ry="18"/>
<text text-anchor="middle" x="1323.18" y="-10297.3" font-family="Times,serif" font-size="14.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;pending_embed:cli -->
<!-- check_translations:cli -->
<g id="node178" class="node">
<title>check_translations:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1573.18" cy="-10301" rx="18" ry="18"/>
<text text-anchor="middle" x="1573.18" y="-10297.3" font-family="Times,serif" font-size="14.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli&#45;&gt;check_translations:cli -->
<!-- pending_chop:cli -->
<g id="node179" class="node">
<title>pending_chop:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1939.18" cy="-10301" rx="18" ry="18"/>
<text text-anchor="middle" x="1939.18" y="-10297.3" font-family="Times,serif" font-size="14.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- pending_caption:cli -->
<g id="node180" class="node">
<title>pending_caption:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="96.84" cy="-10355" rx="18" ry="18"/>
<text text-anchor="middle" x="96.84" y="-10351.3" font-family="Times,serif" font-size="14.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- build_site -->
<g id="node181" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="1939.18" cy="-916" rx="55.79" ry="18"/>
<text text-anchor="middle" x="1939.18" y="-912.3" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge298" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M1995.23,-916C2050.86,-916 2139.12,-916 2214.26,-916"/>
<polygon fill="black" stroke="black" points="2214.3,-919.5 2224.3,-916 2214.3,-912.5 2214.3,-919.5"/>
</g>
<!-- caption -->
<g id="node182" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="2643.18" cy="-8260" rx="44.69" ry="18"/>
<text text-anchor="middle" x="2643.18" y="-8256.3" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge299" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M2688.21,-8259.09C2713.46,-8260.95 2743.97,-8267.61 2763.68,-8287 2811.94,-8334.47 2760.63,-8379.71 2799.68,-8435 2835.8,-8486.14 2896.54,-8523.72 2944.82,-8547.49"/>
<polygon fill="black" stroke="black" points="2943.46,-8550.72 2953.99,-8551.91 2946.5,-8544.41 2943.46,-8550.72"/>
</g>
<!-- check_translations -->
<g id="node183" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="96.84" cy="-10163" rx="96.68" ry="18"/>
<text text-anchor="middle" x="96.84" y="-10159.3" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge300" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M193.7,-10163C236.33,-10163 286.42,-10163 329.03,-10163"/>
<polygon fill="black" stroke="black" points="329.13,-10166.5 339.13,-10163 329.13,-10159.5 329.13,-10166.5"/>
</g>
<!-- chop -->
<g id="node184" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="2355.68" cy="-6632" rx="32.49" ry="18"/>
<text text-anchor="middle" x="2355.68" y="-6628.3" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge301" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M2388.33,-6632C2431.33,-6632 2509.55,-6632 2567.83,-6632"/>
<polygon fill="black" stroke="black" points="2568.11,-6635.5 2578.11,-6632 2568.11,-6628.5 2568.11,-6635.5"/>
</g>
<!-- clean_data -->
<g id="node185" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="2643.18" cy="-5742" rx="59.59" ry="18"/>
<text text-anchor="middle" x="2643.18" y="-5738.3" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge302" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M2703.03,-5742C2771.66,-5742 2884.64,-5742 2955.05,-5742"/>
<polygon fill="black" stroke="black" points="2955.12,-5745.5 2965.12,-5742 2955.12,-5738.5 2955.12,-5745.5"/>
</g>
<!-- debug_dump -->
<g id="node186" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="2643.18" cy="-8314" rx="70.39" ry="18"/>
<text text-anchor="middle" x="2643.18" y="-8310.3" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge303" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M2711.94,-8318.03C2731.27,-8322.54 2750.62,-8330.89 2763.68,-8346 2808.48,-8397.78 2774.51,-8588.33 2799.68,-8652 2822.43,-8709.53 2859.24,-8765.9 2896.22,-8813.75"/>
<polygon fill="black" stroke="black" points="2893.48,-8815.94 2902.39,-8821.67 2899,-8811.63 2893.48,-8815.94"/>
</g>
<!-- embed -->
<g id="node187" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="2643.18" cy="-2848" rx="42.49" ry="18"/>
<text text-anchor="middle" x="2643.18" y="-2844.3" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge304" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M2685.64,-2848C2747.89,-2848 2866.45,-2848 2943.88,-2848"/>
<polygon fill="black" stroke="black" points="2944.06,-2851.5 2954.06,-2848 2944.06,-2844.5 2944.06,-2851.5"/>
</g>
<!-- moderation -->
<g id="node188" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="2643.18" cy="-4345" rx="63.89" ry="18"/>
<text text-anchor="middle" x="2643.18" y="-4341.3" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge305" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M2707.2,-4345C2765.62,-4345 2853.41,-4345 2920.83,-4345"/>
<polygon fill="black" stroke="black" points="2921.04,-4348.5 2931.04,-4345 2921.04,-4341.5 2921.04,-4348.5"/>
</g>
<!-- pending_caption -->
<g id="node189" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="2643.18" cy="-6923" rx="87.18" ry="18"/>
<text text-anchor="middle" x="2643.18" y="-6919.3" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge306" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M2716.74,-6932.7C2770.26,-6939.86 2844.11,-6949.73 2905.32,-6957.91"/>
<polygon fill="black" stroke="black" points="2905.04,-6961.41 2915.42,-6959.26 2905.97,-6954.47 2905.04,-6961.41"/>
</g>
<!-- pending_chop -->
<g id="node190" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="2643.18" cy="-6047" rx="74.99" ry="18"/>
<text text-anchor="middle" x="2643.18" y="-6043.3" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge307" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M2718.07,-6047C2778.49,-6047 2864.15,-6047 2928.49,-6047"/>
<polygon fill="black" stroke="black" points="2928.63,-6050.5 2938.63,-6047 2928.63,-6043.5 2928.63,-6050.5"/>
</g>
<!-- pending_embed -->
<g id="node191" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="2355.68" cy="-4080" rx="83.69" ry="18"/>
<text text-anchor="middle" x="2355.68" y="-4076.3" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge308" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M2439.64,-4080C2462.44,-4080 2487.71,-4080 2512.45,-4080"/>
<polygon fill="black" stroke="black" points="2512.64,-4083.5 2522.64,-4080 2512.64,-4076.5 2512.64,-4083.5"/>
</g>
<!-- scan_ontology -->
<g id="node192" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="2355.68" cy="-2417" rx="76.09" ry="18"/>
<text text-anchor="middle" x="2355.68" y="-2413.3" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge309" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M2432.07,-2417C2458.59,-2417 2489.15,-2417 2518.59,-2417"/>
<polygon fill="black" stroke="black" points="2518.96,-2420.5 2528.96,-2417 2518.96,-2413.5 2518.96,-2420.5"/>
</g>
<!-- telegram_bot -->
<g id="node193" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="1939.18" cy="-9945" rx="72.29" ry="18"/>
<text text-anchor="middle" x="1939.18" y="-9941.3" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge310" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M2010.22,-9948.44C2060.38,-9951.91 2129.28,-9958.75 2188.68,-9972 2219.54,-9978.88 2252.66,-9989.55 2281.13,-9999.81"/>
<polygon fill="black" stroke="black" points="2280.01,-10003.12 2290.6,-10003.26 2282.41,-9996.55 2280.01,-10003.12"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge311" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M1995.65,-9933.76C2063.35,-9920.04 2178.87,-9896.63 2260.57,-9880.07"/>
<polygon fill="black" stroke="black" points="2261.76,-9883.4 2270.86,-9877.99 2260.37,-9876.54 2261.76,-9883.4"/>
</g>
<!-- tg_client -->
<g id="node194" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="96.84" cy="-7477" rx="50.89" ry="18"/>
<text text-anchor="middle" x="96.84" y="-7473.3" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge312" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M147.84,-7477C168.05,-7477 192.84,-7477 219.2,-7477"/>
<polygon fill="black" stroke="black" points="219.37,-7480.5 229.37,-7477 219.37,-7473.5 219.37,-7480.5"/>
</g>
</g>
</svg>
