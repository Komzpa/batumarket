<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="4154pt" height="4193pt"
 viewBox="0.00 0.00 4154.39 4193.18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 4189.18)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-4189.18 4150.39,-4189.18 4150.39,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_cli</title>
<polygon fill="none" stroke="black" points="16.5,-44 16.5,-173 1363.39,-173 1363.39,-44 16.5,-44"/>
<text text-anchor="middle" x="689.94" y="-157.8" font-family="Times,serif" font-size="14.00">CLI entrypoints</text>
</g>
<!-- build_site:cli -->
<g id="node1" class="node">
<title>build_site:cli</title>
<g id="a_node1"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="628.5,-88 521.5,-88 521.5,-52 628.5,-52 628.5,-88"/>
<text text-anchor="middle" x="575" y="-66.3" font-family="Times,serif" font-size="14.00">build_site:cli</text>
</a>
</g>
</g>
<!-- caption:cli -->
<g id="node2" class="node">
<title>caption:cli</title>
<g id="a_node2"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="781.5,-88 691.5,-88 691.5,-52 781.5,-52 781.5,-88"/>
<text text-anchor="middle" x="736.5" y="-66.3" font-family="Times,serif" font-size="14.00">caption:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;caption:cli -->
<!-- scan_ontology:cli -->
<g id="node3" class="node">
<title>scan_ontology:cli</title>
<g id="a_node3"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="971.19,-88 833.19,-88 833.19,-52 971.19,-52 971.19,-88"/>
<text text-anchor="middle" x="902.19" y="-66.3" font-family="Times,serif" font-size="14.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;scan_ontology:cli -->
<!-- tg_client:cli -->
<g id="node4" class="node">
<title>tg_client:cli</title>
<g id="a_node4"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1148.39,-88 1049.39,-88 1049.39,-52 1148.39,-52 1148.39,-88"/>
<text text-anchor="middle" x="1098.89" y="-66.3" font-family="Times,serif" font-size="14.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;tg_client:cli -->
<!-- chop:cli -->
<g id="node5" class="node">
<title>chop:cli</title>
<g id="a_node5"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1355.39,-88 1284.39,-88 1284.39,-52 1355.39,-52 1355.39,-88"/>
<text text-anchor="middle" x="1319.89" y="-66.3" font-family="Times,serif" font-size="14.00">chop:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;chop:cli -->
<!-- debug_dump:cli -->
<g id="node6" class="node">
<title>debug_dump:cli</title>
<g id="a_node6"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="153.5,-142 24.5,-142 24.5,-106 153.5,-106 153.5,-142"/>
<text text-anchor="middle" x="89" y="-120.3" font-family="Times,serif" font-size="14.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node7" class="node">
<title>clean_data:cli</title>
<g id="a_node7"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="400,-142 287,-142 287,-106 400,-106 400,-142"/>
<text text-anchor="middle" x="343.5" y="-120.3" font-family="Times,serif" font-size="14.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;clean_data:cli -->
<!-- telegram_bot:cli -->
<g id="node8" class="node">
<title>telegram_bot:cli</title>
<g id="a_node8"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="641,-142 509,-142 509,-106 641,-106 641,-142"/>
<text text-anchor="middle" x="575" y="-120.3" font-family="Times,serif" font-size="14.00">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;telegram_bot:cli -->
<!-- moderation:cli -->
<g id="node9" class="node">
<title>moderation:cli</title>
<g id="a_node9"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="796,-142 677,-142 677,-106 796,-106 796,-142"/>
<text text-anchor="middle" x="736.5" y="-120.3" font-family="Times,serif" font-size="14.00">moderation:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;moderation:cli -->
<!-- embed:cli -->
<g id="node10" class="node">
<title>embed:cli</title>
<g id="a_node10"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="945.19,-142 859.19,-142 859.19,-106 945.19,-106 945.19,-142"/>
<text text-anchor="middle" x="902.19" y="-120.3" font-family="Times,serif" font-size="14.00">embed:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;embed:cli -->
<!-- post_io._parse_block -->
<g id="node11" class="node">
<title>post_io._parse_block</title>
<g id="a_node11"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="3839.39,-2268 3677.39,-2268 3677.39,-2232 3839.39,-2232 3839.39,-2268"/>
<text text-anchor="middle" x="3758.39" y="-2246.3" font-family="Times,serif" font-size="14.00">post_io._parse_block</text>
</a>
</g>
</g>
<!-- post_io.get_contact -->
<g id="node12" class="node">
<title>post_io.get_contact</title>
<g id="a_node12"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3227.39,-464 3073.39,-464 3073.39,-428 3227.39,-428 3227.39,-464"/>
<text text-anchor="middle" x="3150.39" y="-442.3" font-family="Times,serif" font-size="14.00">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node13" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node13"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3239.39,-518 3061.39,-518 3061.39,-482 3239.39,-482 3239.39,-518"/>
<text text-anchor="middle" x="3150.39" y="-496.3" font-family="Times,serif" font-size="14.00">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.read_post -->
<g id="node14" class="node">
<title>post_io.read_post</title>
<g id="a_node14"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="3527.89,-2268 3386.89,-2268 3386.89,-2232 3527.89,-2232 3527.89,-2268"/>
<text text-anchor="middle" x="3457.39" y="-2246.3" font-family="Times,serif" font-size="14.00">post_io.read_post</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;post_io._parse_block -->
<g id="edge1" class="edge">
<title>post_io.read_post&#45;&gt;post_io._parse_block</title>
<path fill="none" stroke="black" d="M3528.11,-2250C3569.5,-2250 3622.41,-2250 3666.98,-2250"/>
<polygon fill="black" stroke="black" points="3667.23,-2253.5 3677.23,-2250 3667.23,-2246.5 3667.23,-2253.5"/>
</g>
<!-- serde_utils.read_md -->
<g id="node15" class="node">
<title>serde_utils.read_md</title>
<g id="a_node15"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="3838.89,-2612 3677.89,-2612 3677.89,-2576 3838.89,-2576 3838.89,-2612"/>
<text text-anchor="middle" x="3758.39" y="-2590.3" font-family="Times,serif" font-size="14.00">serde_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;serde_utils.read_md -->
<g id="edge2" class="edge">
<title>post_io.read_post&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3528,-2253.96C3552.38,-2258.93 3577.78,-2268.81 3594.39,-2288 3676.2,-2382.54 3545.64,-2475.08 3630.39,-2567 3640.44,-2577.91 3653.72,-2584.99 3667.9,-2589.5"/>
<polygon fill="black" stroke="black" points="3667.27,-2592.95 3677.84,-2592.22 3669.12,-2586.2 3667.27,-2592.95"/>
</g>
<!-- serde_utils.read_text -->
<g id="node42" class="node">
<title>serde_utils.read_text</title>
<g id="a_node42"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="4117.89,-1927 3950.89,-1927 3950.89,-1891 4117.89,-1891 4117.89,-1927"/>
<text text-anchor="middle" x="4034.39" y="-1905.3" font-family="Times,serif" font-size="14.00">serde_utils.read_text</text>
</a>
</g>
</g>
<!-- serde_utils.read_md&#45;&gt;serde_utils.read_text -->
<g id="edge262" class="edge">
<title>serde_utils.read_md&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3839.09,-2591.17C3856.58,-2586.99 3873.65,-2579.61 3886.39,-2567 3978.37,-2475.97 4021.12,-2051.29 4031.07,-1937.25"/>
<polygon fill="black" stroke="black" points="4034.56,-1937.47 4031.93,-1927.21 4027.59,-1936.87 4034.56,-1937.47"/>
</g>
<!-- post_io.write_post -->
<g id="node16" class="node">
<title>post_io.write_post</title>
<g id="a_node16"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="2925.89,-572 2779.89,-572 2779.89,-536 2925.89,-536 2925.89,-572"/>
<text text-anchor="middle" x="2852.89" y="-550.3" font-family="Times,serif" font-size="14.00">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge3" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M2926.01,-548.45C2944.89,-544.46 2964.41,-537.85 2980.39,-527 3004.25,-510.8 2992.44,-489.08 3016.39,-473 3030.24,-463.7 3046.6,-457.47 3063.02,-453.34"/>
<polygon fill="black" stroke="black" points="3064.26,-456.65 3073.24,-451.03 3062.71,-449.82 3064.26,-456.65"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge4" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M2926.17,-540.79C2963.82,-533.91 3010.4,-525.4 3051.26,-517.93"/>
<polygon fill="black" stroke="black" points="3052.03,-521.35 3061.24,-516.11 3050.77,-514.46 3052.03,-521.35"/>
</g>
<!-- serde_utils.write_md -->
<g id="node17" class="node">
<title>serde_utils.write_md</title>
<g id="a_node17"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="3233.39,-572 3067.39,-572 3067.39,-536 3233.39,-536 3233.39,-572"/>
<text text-anchor="middle" x="3150.39" y="-550.3" font-family="Times,serif" font-size="14.00">serde_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;serde_utils.write_md -->
<g id="edge5" class="edge">
<title>post_io.write_post&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M2926.17,-554C2965.64,-554 3014.93,-554 3057.14,-554"/>
<polygon fill="black" stroke="black" points="3057.15,-557.5 3067.15,-554 3057.15,-550.5 3057.15,-557.5"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node18" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node18"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="3544.89,-902 3369.89,-902 3369.89,-866 3544.89,-866 3544.89,-902"/>
<text text-anchor="middle" x="3457.39" y="-880.3" font-family="Times,serif" font-size="14.00">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node19" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node19"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3270.89,-772 3029.89,-772 3029.89,-736 3270.89,-736 3270.89,-772"/>
<text text-anchor="middle" x="3150.39" y="-750.3" font-family="Times,serif" font-size="14.00">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge6" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3241.53,-772.04C3256.08,-775.98 3270.81,-780.62 3284.39,-786 3334.55,-805.86 3387.86,-838.21 3421.6,-860.27"/>
<polygon fill="black" stroke="black" points="3419.89,-863.33 3430.17,-865.92 3423.75,-857.49 3419.89,-863.33"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node20" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node20"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="3565.89,-2035 3348.89,-2035 3348.89,-1999 3565.89,-1999 3565.89,-2035"/>
<text text-anchor="middle" x="3457.39" y="-2013.3" font-family="Times,serif" font-size="14.00">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node21" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node21"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="3277.39,-2066 3023.39,-2066 3023.39,-2030 3277.39,-2030 3277.39,-2066"/>
<text text-anchor="middle" x="3150.39" y="-2044.3" font-family="Times,serif" font-size="14.00">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge7" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3264.81,-2066.09C3271.59,-2068.68 3278.17,-2071.63 3284.39,-2075 3352.44,-2111.93 3410.56,-2184.63 3438.55,-2223.7"/>
<polygon fill="black" stroke="black" points="3435.75,-2225.8 3444.37,-2231.95 3441.47,-2221.76 3435.75,-2225.8"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge8" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M3277.64,-2035.17C3297.83,-2033.12 3318.65,-2031 3338.63,-2028.97"/>
<polygon fill="black" stroke="black" points="3339.09,-2032.44 3348.68,-2027.95 3338.38,-2025.48 3339.09,-2032.44"/>
</g>
<!-- caption_io.read_caption -->
<g id="node22" class="node">
<title>caption_io.read_caption</title>
<g id="a_node22"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="3549.89,-1981 3364.89,-1981 3364.89,-1945 3549.89,-1945 3549.89,-1981"/>
<text text-anchor="middle" x="3457.39" y="-1959.3" font-family="Times,serif" font-size="14.00">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge9" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3246.31,-2029.99C3259.38,-2026.13 3272.41,-2021.5 3284.39,-2016 3302.32,-2007.76 3302.29,-1997.88 3320.39,-1990 3331.25,-1985.27 3342.96,-1981.36 3354.8,-1978.13"/>
<polygon fill="black" stroke="black" points="3355.94,-1981.45 3364.75,-1975.57 3354.19,-1974.67 3355.94,-1981.45"/>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.read_md -->
<g id="edge151" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3550.13,-1964.48C3567.01,-1969 3582.9,-1976.86 3594.39,-1990 3678.96,-2086.71 3546.47,-2469.72 3630.39,-2567 3640.2,-2578.37 3653.5,-2585.65 3667.82,-2590.2"/>
<polygon fill="black" stroke="black" points="3667.3,-2593.69 3677.86,-2592.93 3669.13,-2586.93 3667.3,-2593.69"/>
</g>
<!-- serde_utils.load_json -->
<g id="node24" class="node">
<title>serde_utils.load_json</title>
<g id="a_node24"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3840.89,-1981 3675.89,-1981 3675.89,-1945 3840.89,-1945 3840.89,-1981"/>
<text text-anchor="middle" x="3758.39" y="-1959.3" font-family="Times,serif" font-size="14.00">serde_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.load_json -->
<g id="edge152" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3550.13,-1963C3586.69,-1963 3628.7,-1963 3665.29,-1963"/>
<polygon fill="black" stroke="black" points="3665.46,-1966.5 3675.46,-1963 3665.46,-1959.5 3665.46,-1966.5"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node55" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node55"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="3868.89,-1352 3647.89,-1352 3647.89,-1316 3868.89,-1316 3868.89,-1352"/>
<text text-anchor="middle" x="3758.39" y="-1330.3" font-family="Times,serif" font-size="14.00">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge149" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3550.17,-1960.73C3566.83,-1956.22 3582.63,-1948.57 3594.39,-1936 3636.79,-1890.67 3614.98,-1719.13 3630.39,-1659 3659.68,-1544.69 3717.93,-1416.16 3744.11,-1361.24"/>
<polygon fill="black" stroke="black" points="3747.29,-1362.69 3748.46,-1352.16 3740.98,-1359.66 3747.29,-1362.69"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node96" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node96"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="3865.39,-1268 3651.39,-1268 3651.39,-1232 3865.39,-1232 3865.39,-1268"/>
<text text-anchor="middle" x="3758.39" y="-1246.3" font-family="Times,serif" font-size="14.00">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge150" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3550.19,-1961.56C3567.06,-1957.04 3582.93,-1949.17 3594.39,-1936 3686.28,-1830.37 3550.98,-1422.31 3630.39,-1307 3640.85,-1291.8 3656.38,-1280.6 3673.01,-1272.36"/>
<polygon fill="black" stroke="black" points="3674.7,-1275.43 3682.33,-1268.08 3671.79,-1269.07 3674.7,-1275.43"/>
</g>
<!-- caption_io._get_langs -->
<g id="node113" class="node">
<title>caption_io._get_langs</title>
<g id="a_node113"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="3842.39,-2504 3674.39,-2504 3674.39,-2468 3842.39,-2468 3842.39,-2504"/>
<text text-anchor="middle" x="3758.39" y="-2482.3" font-family="Times,serif" font-size="14.00">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge148" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3550.21,-1965.23C3566.87,-1969.74 3582.66,-1977.4 3594.39,-1990 3638.19,-2037.04 3609.23,-2216.3 3630.39,-2277 3655.33,-2348.57 3707.24,-2421.94 3736.38,-2459.81"/>
<polygon fill="black" stroke="black" points="3733.67,-2462.03 3742.57,-2467.78 3739.2,-2457.74 3733.67,-2462.03"/>
</g>
<!-- build_site._load_ontology -->
<g id="node23" class="node">
<title>build_site._load_ontology</title>
<polygon fill="none" stroke="black" points="2950.39,-2802 2755.39,-2802 2755.39,-2766 2950.39,-2766 2950.39,-2802"/>
<text text-anchor="middle" x="2852.89" y="-2780.3" font-family="Times,serif" font-size="14.00">build_site._load_ontology</text>
</g>
<!-- build_site._load_ontology&#45;&gt;serde_utils.load_json -->
<g id="edge10" class="edge">
<title>build_site._load_ontology&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2950.53,-2781.71C3062.34,-2777.01 3237.14,-2762.68 3284.39,-2719 3336.32,-2670.99 3268.17,-2611.7 3320.39,-2564 3411.16,-2481.08 3508.31,-2613.78 3594.39,-2526 3641.86,-2477.59 3611.24,-2288.05 3630.39,-2223 3656.93,-2132.83 3712.52,-2035.58 3740.51,-1989.76"/>
<polygon fill="black" stroke="black" points="3743.62,-1991.39 3745.89,-1981.05 3737.66,-1987.72 3743.62,-1991.39"/>
</g>
<!-- serde_utils.load_json&#45;&gt;serde_utils.read_text -->
<g id="edge264" class="edge">
<title>serde_utils.load_json&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3841.23,-1946.87C3872.52,-1940.7 3908.43,-1933.63 3940.67,-1927.27"/>
<polygon fill="black" stroke="black" points="3941.42,-1930.69 3950.55,-1925.33 3940.06,-1923.83 3941.42,-1930.69"/>
</g>
<!-- build_site._compile_locale -->
<g id="node25" class="node">
<title>build_site._compile_locale</title>
<polygon fill="none" stroke="black" points="3858.39,-3674 3658.39,-3674 3658.39,-3638 3858.39,-3638 3858.39,-3674"/>
<text text-anchor="middle" x="3758.39" y="-3652.3" font-family="Times,serif" font-size="14.00">build_site._compile_locale</text>
</g>
<!-- build_site._env_for_lang -->
<g id="node26" class="node">
<title>build_site._env_for_lang</title>
<polygon fill="none" stroke="black" points="3550.89,-3674 3363.89,-3674 3363.89,-3638 3550.89,-3638 3550.89,-3674"/>
<text text-anchor="middle" x="3457.39" y="-3652.3" font-family="Times,serif" font-size="14.00">build_site._env_for_lang</text>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge11" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M3550.95,-3656C3581.67,-3656 3616.16,-3656 3648.02,-3656"/>
<polygon fill="black" stroke="black" points="3648.27,-3659.5 3658.27,-3656 3648.27,-3652.5 3648.27,-3659.5"/>
</g>
<!-- build_site._iter_lots -->
<g id="node27" class="node">
<title>build_site._iter_lots</title>
<g id="a_node27"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="3227.89,-3170 3072.89,-3170 3072.89,-3134 3227.89,-3134 3227.89,-3170"/>
<text text-anchor="middle" x="3150.39" y="-3148.3" font-family="Times,serif" font-size="14.00">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge12" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3228.22,-3153.19C3249.41,-3149.52 3270.39,-3141.39 3284.39,-3125 3344.83,-3054.21 3262.53,-2360.92 3320.39,-2288 3334.19,-2270.6 3355.27,-2260.75 3376.73,-2255.3"/>
<polygon fill="black" stroke="black" points="3377.61,-2258.69 3386.6,-2253.09 3376.08,-2251.86 3377.61,-2258.69"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge13" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3228.12,-3153.46C3249.44,-3149.83 3270.51,-3141.66 3284.39,-3125 3353.66,-3041.83 3296.08,-1282.48 3320.39,-1177 3344.46,-1072.56 3408.38,-960.77 3439.24,-910.81"/>
<polygon fill="black" stroke="black" points="3442.28,-912.55 3444.6,-902.21 3436.34,-908.84 3442.28,-912.55"/>
</g>
<!-- lot_io.read_lots -->
<g id="node28" class="node">
<title>lot_io.read_lots</title>
<g id="a_node28"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3519.89,-2609 3394.89,-2609 3394.89,-2573 3519.89,-2573 3519.89,-2609"/>
<text text-anchor="middle" x="3457.39" y="-2587.3" font-family="Times,serif" font-size="14.00">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge14" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3227.94,-3152.95C3249.11,-3149.27 3270.16,-3141.2 3284.39,-3125 3358.92,-3040.14 3245.67,-2702.7 3320.39,-2618 3336.41,-2599.84 3360.85,-2591.78 3384.61,-2588.69"/>
<polygon fill="black" stroke="black" points="3385.14,-2592.16 3394.73,-2587.66 3384.43,-2585.19 3385.14,-2592.16"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node29" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node29"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="3530.39,-3247 3384.39,-3247 3384.39,-3211 3530.39,-3211 3530.39,-3247"/>
<text text-anchor="middle" x="3457.39" y="-3225.3" font-family="Times,serif" font-size="14.00">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge15" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M3207.75,-3170.09C3240.44,-3180.22 3282.51,-3192.66 3320.39,-3202 3337.74,-3206.28 3356.47,-3210.35 3374.31,-3213.97"/>
<polygon fill="black" stroke="black" points="3373.63,-3217.4 3384.12,-3215.93 3375,-3210.54 3373.63,-3217.4"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node30" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node30"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="3584.89,-3193 3329.89,-3193 3329.89,-3157 3584.89,-3157 3584.89,-3193"/>
<text text-anchor="middle" x="3457.39" y="-3171.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge16" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3227.96,-3157.77C3255.74,-3159.87 3288.04,-3162.31 3319.45,-3164.67"/>
<polygon fill="black" stroke="black" points="3319.38,-3168.18 3329.61,-3165.44 3319.9,-3161.2 3319.38,-3168.18"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node31" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node31"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="3563.39,-3085 3351.39,-3085 3351.39,-3049 3563.39,-3049 3563.39,-3085"/>
<text text-anchor="middle" x="3457.39" y="-3063.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge17" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3228.15,-3143.32C3247.16,-3139.33 3267.04,-3133.5 3284.39,-3125 3303.35,-3115.71 3301.41,-3103.25 3320.39,-3094 3327.08,-3090.74 3334.14,-3087.87 3341.39,-3085.35"/>
<polygon fill="black" stroke="black" points="3342.93,-3088.53 3351.36,-3082.12 3340.77,-3081.87 3342.93,-3088.53"/>
</g>
<!-- lot_io.read_lots&#45;&gt;serde_utils.load_json -->
<g id="edge136" class="edge">
<title>lot_io.read_lots&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3519.91,-2591.6C3546.61,-2588.49 3575.93,-2579.91 3594.39,-2559 3644.08,-2502.7 3609.59,-2295.16 3630.39,-2223 3656.41,-2132.68 3712.24,-2035.49 3740.4,-1989.73"/>
<polygon fill="black" stroke="black" points="3743.51,-1991.36 3745.81,-1981.02 3737.56,-1987.67 3743.51,-1991.36"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node103" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node103"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="3822.89,-3234 3693.89,-3234 3693.89,-3198 3822.89,-3198 3822.89,-3234"/>
<text text-anchor="middle" x="3758.39" y="-3212.3" font-family="Times,serif" font-size="14.00">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge135" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3520.11,-2587.6C3546.84,-2589.62 3576.14,-2597.18 3594.39,-2618 3676.15,-2711.28 3554.19,-3077.13 3630.39,-3175 3643.54,-3191.89 3663.73,-3201.93 3684.17,-3207.86"/>
<polygon fill="black" stroke="black" points="3683.32,-3211.25 3693.88,-3210.38 3685.08,-3204.48 3683.32,-3211.25"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node160" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node160"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="3886.39,-3166 3630.39,-3166 3630.39,-3130 3886.39,-3130 3886.39,-3166"/>
<text text-anchor="middle" x="3758.39" y="-3144.3" font-family="Times,serif" font-size="14.00">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge244" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M3585.19,-3163.55C3596.64,-3162.52 3608.27,-3161.47 3619.8,-3160.42"/>
<polygon fill="black" stroke="black" points="3620.27,-3163.9 3629.91,-3159.51 3619.64,-3156.92 3620.27,-3163.9"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node161" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node161"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3864.39,-3085 3652.39,-3085 3652.39,-3049 3864.39,-3049 3864.39,-3085"/>
<text text-anchor="middle" x="3758.39" y="-3063.3" font-family="Times,serif" font-size="14.00">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge245" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M3563.8,-3067C3589.11,-3067 3616.27,-3067 3642,-3067"/>
<polygon fill="black" stroke="black" points="3642.17,-3070.5 3652.17,-3067 3642.17,-3063.5 3642.17,-3070.5"/>
</g>
<!-- build_site._copy_images -->
<g id="node32" class="node">
<title>build_site._copy_images</title>
<polygon fill="none" stroke="black" points="3244.39,-3116 3056.39,-3116 3056.39,-3080 3244.39,-3080 3244.39,-3116"/>
<text text-anchor="middle" x="3150.39" y="-3094.3" font-family="Times,serif" font-size="14.00">build_site._copy_images</text>
</g>
<!-- build_site._copy_static -->
<g id="node33" class="node">
<title>build_site._copy_static</title>
<g id="a_node33"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="2663.89,-3530 2487.89,-3530 2487.89,-3494 2663.89,-3494 2663.89,-3530"/>
<text text-anchor="middle" x="2575.89" y="-3508.3" font-family="Times,serif" font-size="14.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node34" class="node">
<title>build_site._load_state</title>
<g id="a_node34"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="2660.89,-3005 2490.89,-3005 2490.89,-2969 2660.89,-2969 2660.89,-3005"/>
<text text-anchor="middle" x="2575.89" y="-2983.3" font-family="Times,serif" font-size="14.00">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge18" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M2594.51,-2968.79C2621.24,-2941.75 2674.33,-2890.29 2725.39,-2854 2750.42,-2836.21 2780.43,-2819.43 2804.93,-2806.76"/>
<polygon fill="black" stroke="black" points="2806.72,-2809.78 2814.03,-2802.12 2803.53,-2803.55 2806.72,-2809.78"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge19" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M2612.15,-3005.14C2641.77,-3019.84 2685.54,-3040.28 2725.39,-3054 2851.26,-3097.34 2886.46,-3095.97 3016.39,-3125 3031.29,-3128.33 3047.17,-3131.7 3062.58,-3134.89"/>
<polygon fill="black" stroke="black" points="3062.12,-3138.36 3072.62,-3136.95 3063.53,-3131.51 3062.12,-3138.36"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge20" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M2661.05,-3003.32C2763.38,-3023.16 2936.02,-3056.63 3046.24,-3078"/>
<polygon fill="black" stroke="black" points="3045.89,-3081.5 3056.38,-3079.97 3047.23,-3074.63 3045.89,-3081.5"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node35" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node35"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="3576.89,-2333 3337.89,-2333 3337.89,-2297 3576.89,-2297 3576.89,-2333"/>
<text text-anchor="middle" x="3457.39" y="-2311.3" font-family="Times,serif" font-size="14.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge21" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M2583.42,-2968.95C2600.05,-2925.6 2648.2,-2814.9 2725.39,-2757 2819.99,-2686.04 2902.13,-2769.66 2980.39,-2681 3044.79,-2608.03 2951.5,-2537.54 3016.39,-2465 3098.93,-2372.73 3183.35,-2460.56 3284.39,-2389 3307.03,-2372.96 3296.91,-2352.78 3320.39,-2338 3323.04,-2336.33 3325.77,-2334.77 3328.58,-2333.32"/>
<polygon fill="black" stroke="black" points="3330.18,-2336.43 3337.74,-2329.02 3327.2,-2330.1 3330.18,-2336.43"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node36" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node36"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="3558.39,-2663 3356.39,-2663 3356.39,-2627 3558.39,-2627 3558.39,-2663"/>
<text text-anchor="middle" x="3457.39" y="-2641.3" font-family="Times,serif" font-size="14.00">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge22" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M2647.69,-2968.99C2734.24,-2947.41 2885.37,-2911.15 3016.39,-2887 3075.54,-2876.1 3239.83,-2889.4 3284.39,-2849 3334.54,-2803.53 3276.29,-2752.36 3320.39,-2701 3333.13,-2686.15 3350.44,-2675.17 3368.43,-2667.08"/>
<polygon fill="black" stroke="black" points="3370.02,-2670.21 3377.88,-2663.11 3367.3,-2663.76 3370.02,-2670.21"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;serde_utils.load_json -->
<g id="edge53" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3559.59,-2296.95C3572.12,-2291.86 3584.11,-2285.35 3594.39,-2277 3619.09,-2256.93 3710.63,-2063.56 3744.59,-1990.64"/>
<polygon fill="black" stroke="black" points="3747.95,-1991.72 3748.99,-1981.18 3741.6,-1988.77 3747.95,-1991.72"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;serde_utils.load_json -->
<g id="edge54" class="edge">
<title>similar_utils._load_similar&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3558.49,-2640.63C3572.12,-2635.92 3584.73,-2628.74 3594.39,-2618 3653.35,-2552.49 3606.65,-2307.89 3630.39,-2223 3655.63,-2132.7 3711.57,-2035.87 3740.03,-1990.03"/>
<polygon fill="black" stroke="black" points="3743.16,-1991.63 3745.5,-1981.3 3737.23,-1987.91 3743.16,-1991.63"/>
</g>
<!-- build_site._categorise -->
<g id="node37" class="node">
<title>build_site._categorise</title>
<g id="a_node37"><a xlink:title="Return category info and recent lot list.">
<polygon fill="none" stroke="black" points="2938.39,-3576 2767.39,-3576 2767.39,-3540 2938.39,-3540 2938.39,-3576"/>
<text text-anchor="middle" x="2852.89" y="-3554.3" font-family="Times,serif" font-size="14.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node38" class="node">
<title>lot_io.get_seller</title>
<g id="a_node38"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3521.89,-3580 3392.89,-3580 3392.89,-3544 3521.89,-3544 3521.89,-3580"/>
<text text-anchor="middle" x="3457.39" y="-3558.3" font-family="Times,serif" font-size="14.00">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge23" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2938.43,-3571.64C2963.46,-3575.08 2990.97,-3578.29 3016.39,-3580 3135.23,-3588.01 3165.44,-3586.21 3284.39,-3580 3316.71,-3578.31 3352.32,-3574.85 3382.71,-3571.42"/>
<polygon fill="black" stroke="black" points="3383.27,-3574.87 3392.8,-3570.25 3382.46,-3567.92 3383.27,-3574.87"/>
</g>
<!-- build_site._render_site -->
<g id="node39" class="node">
<title>build_site._render_site</title>
<polygon fill="none" stroke="black" points="2941.89,-3430 2763.89,-3430 2763.89,-3394 2941.89,-3394 2941.89,-3430"/>
<text text-anchor="middle" x="2852.89" y="-3408.3" font-family="Times,serif" font-size="14.00">build_site._render_site</text>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge26" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2941.89,-3418.41C2956,-3422.74 2969.51,-3429.27 2980.39,-3439 3018.1,-3472.73 2975.85,-3516.72 3016.39,-3547 3072.35,-3588.81 3272.73,-3578.56 3382.75,-3569.28"/>
<polygon fill="black" stroke="black" points="3383.12,-3572.76 3392.79,-3568.41 3382.52,-3565.78 3383.12,-3572.76"/>
</g>
<!-- build_site.build_page -->
<g id="node40" class="node">
<title>build_site.build_page</title>
<g id="a_node40"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="3233.89,-2656 3066.89,-2656 3066.89,-2620 3233.89,-2620 3233.89,-2656"/>
<text text-anchor="middle" x="3150.39" y="-2634.3" font-family="Times,serif" font-size="14.00">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge24" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M2918.3,-3393.97C2941.81,-3384.03 2966.1,-3369.08 2980.39,-3347 3021.62,-3283.3 2966.83,-2722.47 3016.39,-2665 3026.96,-2652.74 3041.45,-2645.11 3056.98,-2640.52"/>
<polygon fill="black" stroke="black" points="3057.93,-2643.89 3066.76,-2638.04 3056.21,-2637.1 3057.93,-2643.89"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node41" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node41"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="3564.89,-3139 3349.89,-3139 3349.89,-3103 3564.89,-3103 3564.89,-3139"/>
<text text-anchor="middle" x="3457.39" y="-3117.3" font-family="Times,serif" font-size="14.00">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge25" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M2902.5,-3393.97C2927.64,-3383.02 2957.73,-3367.22 2980.39,-3347 3001.91,-3327.79 2994.19,-3311.42 3016.39,-3293 3116.01,-3210.36 3174.48,-3247.38 3284.39,-3179 3302.32,-3167.85 3301.41,-3157.25 3320.39,-3148 3326.57,-3144.99 3333.06,-3142.31 3339.72,-3139.94"/>
<polygon fill="black" stroke="black" points="3341.19,-3143.14 3349.58,-3136.66 3338.98,-3136.49 3341.19,-3143.14"/>
</g>
<!-- build_site._render_site&#45;&gt;serde_utils.read_text -->
<g id="edge27" class="edge">
<title>build_site._render_site&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2942.31,-3396.41C2966.3,-3392.42 2992.31,-3388.33 3016.39,-3385 3209.06,-3358.38 3751.75,-3429.37 3886.39,-3289 3927.01,-3246.64 3916.6,-2820.41 3922.39,-2762 3954.61,-2436.93 4012.81,-2044.61 4029.07,-1937.29"/>
<polygon fill="black" stroke="black" points="4032.55,-1937.67 4030.59,-1927.26 4025.63,-1936.62 4032.55,-1937.67"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge28" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3234.12,-2637.3C3253.02,-2633.15 3271.35,-2625.26 3284.39,-2611 3381.87,-2504.41 3226.82,-2398.04 3320.39,-2288 3334.64,-2271.24 3355.62,-2261.56 3376.85,-2256.05"/>
<polygon fill="black" stroke="black" points="3377.64,-2259.46 3386.6,-2253.81 3376.07,-2252.64 3377.64,-2259.46"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge29" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3233.95,-2638.28C3253.2,-2634.19 3271.75,-2626.08 3284.39,-2611 3335.59,-2549.94 3302.23,-1254.6 3320.39,-1177 3344.8,-1072.64 3408.55,-960.81 3439.31,-910.82"/>
<polygon fill="black" stroke="black" points="3442.35,-912.56 3444.65,-902.22 3436.4,-908.87 3442.35,-912.56"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge32" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3233.96,-2637.92C3253.09,-2633.81 3271.58,-2625.78 3284.39,-2611 3374.93,-2506.55 3229.62,-2094.25 3320.39,-1990 3329.61,-1979.41 3341.69,-1972.24 3354.85,-1967.49"/>
<polygon fill="black" stroke="black" points="3356.1,-1970.77 3364.6,-1964.44 3354.01,-1964.09 3356.1,-1970.77"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge30" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M3234.15,-2637.92C3253.28,-2642.03 3271.72,-2650.1 3284.39,-2665 3350.95,-2743.27 3264.43,-3502.83 3320.39,-3589 3333.62,-3609.38 3355,-3623.77 3376.92,-3633.85"/>
<polygon fill="black" stroke="black" points="3375.76,-3637.16 3386.32,-3637.9 3378.53,-3630.73 3375.76,-3637.16"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge31" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M3234.05,-2638.38C3253.06,-2642.51 3271.47,-2650.48 3284.39,-2665 3347.98,-2736.47 3256.64,-3022.66 3320.39,-3094 3326.21,-3100.52 3333.11,-3105.73 3340.68,-3109.87"/>
<polygon fill="black" stroke="black" points="3339.3,-3113.09 3349.83,-3114.26 3342.33,-3106.78 3339.3,-3113.09"/>
</g>
<!-- serde_utils.read_text&#45;&gt;serde_utils.read_text -->
<g id="edge261" class="edge">
<title>serde_utils.read_text&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3984.46,-1927.15C3976.78,-1936.54 3993.42,-1945 4034.39,-1945 4059.67,-1945 4075.69,-1941.78 4082.45,-1937.1"/>
<polygon fill="black" stroke="black" points="4085.91,-1937.63 4084.32,-1927.15 4079.03,-1936.33 4085.91,-1937.63"/>
</g>
<!-- build_site.main -->
<g id="node43" class="node">
<title>build_site.main</title>
<polygon fill="none" stroke="black" points="2377.39,-3576 2252.39,-3576 2252.39,-3540 2377.39,-3540 2377.39,-3576"/>
<text text-anchor="middle" x="2314.89" y="-3554.3" font-family="Times,serif" font-size="14.00">build_site.main</text>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge33" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M2316.87,-3576.1C2321.25,-3636.35 2344.35,-3830.88 2462.39,-3911 2614.39,-4014.17 3151.17,-3949.5 3284.39,-3823 3318.64,-3790.47 3288.91,-3758.22 3320.39,-3723 3338.19,-3703.08 3363.27,-3688.42 3387.04,-3677.98"/>
<polygon fill="black" stroke="black" points="3388.55,-3681.14 3396.42,-3674.05 3385.84,-3674.69 3388.55,-3681.14"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge34" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M2377.6,-3547.04C2407.56,-3541.72 2444.26,-3535.2 2477.84,-3529.24"/>
<polygon fill="black" stroke="black" points="2478.46,-3532.68 2487.69,-3527.49 2477.23,-3525.79 2478.46,-3532.68"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge35" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M2323.94,-3539.95C2345.96,-3490.59 2409.14,-3349.22 2462.39,-3232 2498.37,-3152.8 2541.4,-3059.46 2562.28,-3014.26"/>
<polygon fill="black" stroke="black" points="2565.49,-3015.66 2566.51,-3005.11 2559.14,-3012.72 2565.49,-3015.66"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge36" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M2377.64,-3558C2470.66,-3558 2647.5,-3558 2756.99,-3558"/>
<polygon fill="black" stroke="black" points="2757.04,-3561.5 2767.04,-3558 2757.04,-3554.5 2757.04,-3561.5"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge37" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M2345.97,-3539.9C2374.86,-3523.28 2420.23,-3499.15 2462.39,-3485 2558.87,-3452.62 2673.9,-3433.29 2753.83,-3422.73"/>
<polygon fill="black" stroke="black" points="2754.42,-3426.19 2763.89,-3421.43 2753.52,-3419.25 2754.42,-3426.19"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node44" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node44"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="3252.39,-2602 3048.39,-2602 3048.39,-2566 3252.39,-2566 3252.39,-2602"/>
<text text-anchor="middle" x="3150.39" y="-2580.3" font-family="Times,serif" font-size="14.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge38" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M2316.1,-3539.94C2317.81,-3463.22 2332.82,-3159.12 2462.39,-2960 2542.92,-2836.23 2593.97,-2824.33 2725.39,-2757 2830.64,-2703.07 2889.39,-2756.52 2980.39,-2681 3007.31,-2658.66 2988.5,-2632.12 3016.39,-2611 3023.21,-2605.84 3030.76,-2601.6 3038.72,-2598.12"/>
<polygon fill="black" stroke="black" points="3040.19,-2601.3 3048.21,-2594.38 3037.62,-2594.79 3040.19,-2601.3"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node45" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node45"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="3257.39,-3814 3043.39,-3814 3043.39,-3778 3257.39,-3778 3257.39,-3814"/>
<text text-anchor="middle" x="3150.39" y="-3792.3" font-family="Times,serif" font-size="14.00">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge39" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M2333.61,-3576.37C2359.58,-3602.31 2410.55,-3649.55 2462.39,-3677 2645.34,-3773.88 2890.45,-3794.43 3033.02,-3797.39"/>
<polygon fill="black" stroke="black" points="3033.04,-3800.89 3043.1,-3797.58 3033.17,-3793.89 3033.04,-3800.89"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node46" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node46"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="2687.89,-3902 2463.89,-3902 2463.89,-3866 2687.89,-3866 2687.89,-3902"/>
<text text-anchor="middle" x="2575.89" y="-3880.3" font-family="Times,serif" font-size="14.00">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge40" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M2319.91,-3576.36C2332.01,-3627.31 2372.92,-3771.66 2462.39,-3848 2468.48,-3853.19 2475.32,-3857.64 2482.55,-3861.45"/>
<polygon fill="black" stroke="black" points="2481.36,-3864.76 2491.89,-3865.94 2484.39,-3858.45 2481.36,-3864.76"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node47" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node47"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="2973.89,-3852 2731.89,-3852 2731.89,-3816 2973.89,-3816 2973.89,-3852"/>
<text text-anchor="middle" x="2852.89" y="-3830.3" font-family="Times,serif" font-size="14.00">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge41" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M2320.58,-3576.14C2333.76,-3623.02 2375.94,-3748.28 2462.39,-3802 2538.93,-3849.56 2640.89,-3856.39 2721.3,-3851.94"/>
<polygon fill="black" stroke="black" points="2721.73,-3855.42 2731.49,-3851.31 2721.29,-3848.43 2721.73,-3855.42"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node48" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node48"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="3263.89,-3338 3036.89,-3338 3036.89,-3302 3263.89,-3302 3263.89,-3338"/>
<text text-anchor="middle" x="3150.39" y="-3316.3" font-family="Times,serif" font-size="14.00">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge42" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M2330.38,-3539.95C2354.47,-3511.3 2405.77,-3455.92 2462.39,-3429 2672.89,-3328.9 2750.03,-3382.56 2980.39,-3347 2995.71,-3344.63 3011.8,-3342.11 3027.72,-3339.59"/>
<polygon fill="black" stroke="black" points="3028.27,-3343.05 3037.6,-3338.03 3027.17,-3336.14 3028.27,-3343.05"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node49" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node49"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="2689.39,-3668 2462.39,-3668 2462.39,-3632 2689.39,-3632 2689.39,-3668"/>
<text text-anchor="middle" x="2575.89" y="-3646.3" font-family="Times,serif" font-size="14.00">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge43" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M2366.75,-3576.07C2409.16,-3591.13 2469.68,-3612.63 2514.53,-3628.56"/>
<polygon fill="black" stroke="black" points="2513.55,-3631.93 2524.14,-3631.97 2515.89,-3625.33 2513.55,-3631.93"/>
</g>
<!-- config_utils.load_config -->
<g id="node50" class="node">
<title>config_utils.load_config</title>
<g id="a_node50"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="4125.39,-2807 3943.39,-2807 3943.39,-2771 4125.39,-2771 4125.39,-2807"/>
<text text-anchor="middle" x="4034.39" y="-2785.3" font-family="Times,serif" font-size="14.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge44" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M2317.79,-3576.23C2327.44,-3665.14 2374.1,-4051.99 2462.39,-4126 2595.45,-4237.54 2678.26,-4156 2851.89,-4156 2851.89,-4156 2851.89,-4156 3458.39,-4156 3741.9,-4156 3776.05,-3944.16 3886.39,-3683 3935.09,-3567.72 3898.35,-3243.81 3922.39,-3121 3945.19,-3004.53 3997.79,-2872.57 4021.46,-2816.52"/>
<polygon fill="black" stroke="black" points="4024.71,-2817.84 4025.4,-2807.26 4018.26,-2815.1 4024.71,-2817.84"/>
</g>
<!-- serde_utils.write_json -->
<g id="node57" class="node">
<title>serde_utils.write_json</title>
<g id="a_node57"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="3543.89,-2463 3370.89,-2463 3370.89,-2427 3543.89,-2427 3543.89,-2463"/>
<text text-anchor="middle" x="3457.39" y="-2441.3" font-family="Times,serif" font-size="14.00">serde_utils.write_json</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;serde_utils.write_json -->
<g id="edge57" class="edge">
<title>similar_utils._save_similar&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3252.71,-2570.17C3264.17,-2565.65 3275.06,-2559.73 3284.39,-2552 3314.41,-2527.12 3289.87,-2496.27 3320.39,-2472 3332.21,-2462.6 3346.41,-2456.18 3361.11,-2451.85"/>
<polygon fill="black" stroke="black" points="3362.04,-2455.23 3370.82,-2449.3 3360.26,-2448.46 3362.04,-2455.23"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node60" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node60"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="3559.39,-2939 3355.39,-2939 3355.39,-2903 3559.39,-2903 3559.39,-2939"/>
<text text-anchor="middle" x="3457.39" y="-2917.3" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge55" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M3252.63,-2590.36C3264.6,-2594.97 3275.65,-2601.59 3284.39,-2611 3370.68,-2703.9 3233.9,-2801.29 3320.39,-2894 3327.6,-2901.74 3336.35,-2907.61 3345.89,-2912.04"/>
<polygon fill="black" stroke="black" points="3344.68,-2915.32 3355.26,-2915.85 3347.32,-2908.84 3344.68,-2915.32"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node61" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node61"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="3533.89,-1596 3380.89,-1596 3380.89,-1560 3533.89,-1560 3533.89,-1596"/>
<text text-anchor="middle" x="3457.39" y="-1574.3" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge56" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3221.21,-2565.96C3245.26,-2556.12 3269.8,-2541.24 3284.39,-2519 3333.19,-2444.6 3285.23,-1800.74 3320.39,-1719 3341.67,-1669.53 3388.65,-1627.31 3421.41,-1602.3"/>
<polygon fill="black" stroke="black" points="3423.9,-1604.8 3429.82,-1596.02 3419.71,-1599.2 3423.9,-1604.8"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node62" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node62"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="2974.39,-3906 2731.39,-3906 2731.39,-3870 2974.39,-3870 2974.39,-3906"/>
<text text-anchor="middle" x="2852.89" y="-3884.3" font-family="Times,serif" font-size="14.00">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge58" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M2687.95,-3885.62C2698.79,-3885.77 2709.86,-3885.93 2720.88,-3886.09"/>
<polygon fill="black" stroke="black" points="2720.92,-3889.6 2730.97,-3886.24 2721.02,-3882.6 2720.92,-3889.6"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node59" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node59"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="3542.89,-3430 3371.89,-3430 3371.89,-3394 3542.89,-3394 3542.89,-3430"/>
<text text-anchor="middle" x="3457.39" y="-3408.3" font-family="Times,serif" font-size="14.00">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge59" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3211.28,-3338.07C3261.75,-3353.29 3333.99,-3375.08 3386.97,-3391.06"/>
<polygon fill="black" stroke="black" points="3386.05,-3394.44 3396.63,-3393.97 3388.07,-3387.74 3386.05,-3394.44"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node120" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node120"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="2980.39,-3668 2725.39,-3668 2725.39,-3632 2980.39,-3632 2980.39,-3668"/>
<text text-anchor="middle" x="2852.89" y="-3646.3" font-family="Times,serif" font-size="14.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge168" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M2689.53,-3650C2697.96,-3650 2706.51,-3650 2715.06,-3650"/>
<polygon fill="black" stroke="black" points="2715.08,-3653.5 2725.08,-3650 2715.08,-3646.5 2715.08,-3653.5"/>
</g>
<!-- price_utils.predict_price -->
<g id="node121" class="node">
<title>price_utils.predict_price</title>
<g id="a_node121"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="3244.89,-3668 3055.89,-3668 3055.89,-3632 3244.89,-3632 3244.89,-3668"/>
<text text-anchor="middle" x="3150.39" y="-3646.3" font-family="Times,serif" font-size="14.00">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge169" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M2661.34,-3631.93C2682.18,-3628.23 2704.51,-3624.88 2725.39,-3623 2838.26,-3612.82 2867.41,-3614.03 2980.39,-3623 3001.61,-3624.68 3024.19,-3627.54 3045.71,-3630.78"/>
<polygon fill="black" stroke="black" points="3045.43,-3634.28 3055.84,-3632.35 3046.5,-3627.36 3045.43,-3634.28"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node122" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node122"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="3558.39,-3768 3356.39,-3768 3356.39,-3732 3558.39,-3732 3558.39,-3768"/>
<text text-anchor="middle" x="3457.39" y="-3746.3" font-family="Times,serif" font-size="14.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge170" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M2601.33,-3668.12C2629.55,-3687.86 2678.17,-3718.3 2725.39,-3731 2838.98,-3761.54 3171.15,-3757.82 3345.94,-3753.44"/>
<polygon fill="black" stroke="black" points="3346.28,-3756.93 3356.19,-3753.18 3346.1,-3749.94 3346.28,-3756.93"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node123" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node123"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="2955.89,-3722 2749.89,-3722 2749.89,-3686 2955.89,-3686 2955.89,-3722"/>
<text text-anchor="middle" x="2852.89" y="-3700.3" font-family="Times,serif" font-size="14.00">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.guess_currency -->
<g id="edge171" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M2668.84,-3668.06C2694.87,-3673.17 2723.35,-3678.76 2749.94,-3683.98"/>
<polygon fill="black" stroke="black" points="2749.53,-3687.47 2760.02,-3685.96 2750.88,-3680.6 2749.53,-3687.47"/>
</g>
<!-- caption._identify_size -->
<g id="node51" class="node">
<title>caption._identify_size</title>
<g id="a_node51"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="3843.39,-2893 3673.39,-2893 3673.39,-2857 3843.39,-2857 3843.39,-2893"/>
<text text-anchor="middle" x="3758.39" y="-2871.3" font-family="Times,serif" font-size="14.00">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node52" class="node">
<title>caption._prepare_image</title>
<g id="a_node52"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="3550.89,-2885 3363.89,-2885 3363.89,-2849 3550.89,-2849 3550.89,-2885"/>
<text text-anchor="middle" x="3457.39" y="-2863.3" font-family="Times,serif" font-size="14.00">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge45" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M3550.95,-2869.48C3586.46,-2870.43 3627.01,-2871.51 3662.72,-2872.47"/>
<polygon fill="black" stroke="black" points="3663.05,-2875.98 3673.14,-2872.75 3663.24,-2868.98 3663.05,-2875.98"/>
</g>
<!-- caption._guess_chat -->
<g id="node53" class="node">
<title>caption._guess_chat</title>
<g id="a_node53"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="3837.89,-2839 3678.89,-2839 3678.89,-2803 3837.89,-2803 3837.89,-2839"/>
<text text-anchor="middle" x="3758.39" y="-2817.3" font-family="Times,serif" font-size="14.00">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node54" class="node">
<title>caption.caption_file</title>
<g id="a_node54"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="3227.89,-2510 3072.89,-2510 3072.89,-2474 3227.89,-2474 3227.89,-2510"/>
<text text-anchor="middle" x="3150.39" y="-2488.3" font-family="Times,serif" font-size="14.00">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.load_json -->
<g id="edge50" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3185.69,-2473.85C3219.16,-2456.89 3271.96,-2432.14 3320.39,-2418 3438.71,-2383.44 3503.94,-2458.75 3594.39,-2375 3645.33,-2327.83 3607.01,-2288.37 3630.39,-2223 3662.04,-2134.49 3715.27,-2036.47 3741.62,-1990.12"/>
<polygon fill="black" stroke="black" points="3744.74,-1991.72 3746.67,-1981.3 3738.67,-1988.24 3744.74,-1991.72"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge46" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M3218.5,-2510C3242.97,-2519.92 3268.5,-2534.87 3284.39,-2557 3357.03,-2658.22 3236.91,-2742.51 3320.39,-2835 3329.61,-2845.21 3341.42,-2852.47 3354.22,-2857.59"/>
<polygon fill="black" stroke="black" points="3353.1,-2860.9 3363.7,-2860.94 3355.44,-2854.3 3353.1,-2860.9"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge47" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M3217.96,-2510C3242.51,-2519.94 3268.24,-2534.9 3284.39,-2557 3349.32,-2645.86 3238.68,-2728.26 3320.39,-2802 3369.71,-2846.51 3555.75,-2839.05 3668.58,-2829.87"/>
<polygon fill="black" stroke="black" points="3668.92,-2833.36 3678.59,-2829.04 3668.33,-2826.38 3668.92,-2833.36"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge48" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3196.86,-2474C3224.05,-2461.86 3258.26,-2444.04 3284.39,-2422 3304.5,-2405.03 3297.53,-2388.04 3320.39,-2375 3373.66,-2344.61 3552.5,-2386.8 3594.39,-2342 3646.29,-2286.49 3614.35,-1733.28 3630.39,-1659 3655.29,-1543.65 3715.83,-1415.66 3743.35,-1361.06"/>
<polygon fill="black" stroke="black" points="3746.53,-1362.54 3747.94,-1352.04 3740.29,-1359.37 3746.53,-1362.54"/>
</g>
<!-- caption_io.has_caption -->
<g id="node56" class="node">
<title>caption_io.has_caption</title>
<g id="a_node56"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="3545.89,-1352 3368.89,-1352 3368.89,-1316 3545.89,-1316 3545.89,-1352"/>
<text text-anchor="middle" x="3457.39" y="-1330.3" font-family="Times,serif" font-size="14.00">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge49" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3189.93,-2474C3221.49,-2456.97 3264.13,-2428.17 3284.39,-2389 3370.03,-2223.45 3265.06,-1728.99 3320.39,-1551 3344.07,-1474.82 3401.36,-1398.83 3433.52,-1360.18"/>
<polygon fill="black" stroke="black" points="3436.59,-1361.97 3440.36,-1352.07 3431.24,-1357.46 3436.59,-1361.97"/>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.write_json -->
<g id="edge51" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3227.96,-2480.2C3268.15,-2474.01 3317.78,-2466.36 3360.5,-2459.78"/>
<polygon fill="black" stroke="black" points="3361.28,-2463.2 3370.63,-2458.21 3360.22,-2456.28 3361.28,-2463.2"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge146" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3546.08,-1334C3574.64,-1334 3606.86,-1334 3637.37,-1334"/>
<polygon fill="black" stroke="black" points="3637.64,-1337.5 3647.64,-1334 3637.64,-1330.5 3637.64,-1337.5"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge147" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3522.53,-1315.98C3569.75,-1302.72 3634.04,-1284.65 3683.43,-1270.78"/>
<polygon fill="black" stroke="black" points="3684.41,-1274.14 3693.09,-1268.06 3682.52,-1267.4 3684.41,-1274.14"/>
</g>
<!-- caption.main -->
<g id="node58" class="node">
<title>caption.main</title>
<polygon fill="none" stroke="black" points="791,-2507 682,-2507 682,-2471 791,-2471 791,-2507"/>
<text text-anchor="middle" x="736.5" y="-2485.3" font-family="Times,serif" font-size="14.00">caption.main</text>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge52" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M791.23,-2489C861.65,-2489 989.02,-2489 1097.89,-2489 1097.89,-2489 1097.89,-2489 2576.89,-2489 2748.93,-2489 2950.06,-2490.37 3062.28,-2491.26"/>
<polygon fill="black" stroke="black" points="3062.5,-2494.76 3072.53,-2491.34 3062.56,-2487.76 3062.5,-2494.76"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node109" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node109"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="3830.89,-2558 3685.89,-2558 3685.89,-2522 3830.89,-2522 3830.89,-2558"/>
<text text-anchor="middle" x="3758.39" y="-2536.3" font-family="Times,serif" font-size="14.00">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge141" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3484.95,-1596.02C3517.51,-1619.82 3571.2,-1665.11 3594.39,-1719 3629.29,-1800.12 3573.27,-2445.64 3630.39,-2513 3641.84,-2526.51 3658.23,-2534.27 3675.45,-2538.54"/>
<polygon fill="black" stroke="black" points="3675.14,-2542.05 3685.65,-2540.66 3676.57,-2535.2 3675.14,-2542.05"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node63" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node63"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="2969.89,-2338 2735.89,-2338 2735.89,-2302 2969.89,-2302 2969.89,-2338"/>
<text text-anchor="middle" x="2852.89" y="-2316.3" font-family="Times,serif" font-size="14.00">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge60" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2970.05,-2317.93C3057.03,-2315.05 3178.71,-2308.21 3284.39,-2292 3317.56,-2286.91 3353.72,-2278.52 3384.29,-2270.58"/>
<polygon fill="black" stroke="black" points="3385.23,-2273.95 3394.01,-2268.02 3383.45,-2267.18 3385.23,-2273.95"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge61" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2863.79,-2301.96C2888.99,-2254.95 2955.34,-2124.15 2980.39,-2006 2992.32,-1949.72 2978.31,-1014.13 3016.39,-971 3056.31,-925.78 3225.33,-940.26 3284.39,-928 3316.52,-921.33 3351.67,-912.59 3381.78,-904.67"/>
<polygon fill="black" stroke="black" points="3383.01,-907.96 3391.78,-902.02 3381.22,-901.2 3383.01,-907.96"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge62" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M2860.21,-2302C2877.35,-2255.99 2929.39,-2133.59 3016.39,-2075 3018.57,-2073.53 3020.81,-2072.14 3023.11,-2070.82"/>
<polygon fill="black" stroke="black" points="3024.95,-2073.81 3032.2,-2066.09 3021.72,-2067.6 3024.95,-2073.81"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge63" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2863.47,-2338.19C2886.04,-2381.56 2943.45,-2494.82 2980.39,-2594 3000.56,-2648.18 2970.2,-2684.23 3016.39,-2719 3111.56,-2790.63 3187.05,-2787.64 3284.39,-2719 3323.33,-2691.54 3284.32,-2649.14 3320.39,-2618 3338.08,-2602.72 3361.93,-2595.15 3384.71,-2591.64"/>
<polygon fill="black" stroke="black" points="3385.27,-2595.09 3394.73,-2590.33 3384.36,-2588.15 3385.27,-2595.09"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node64" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node64"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="3248.39,-3538 3052.39,-3538 3052.39,-3502 3248.39,-3502 3248.39,-3538"/>
<text text-anchor="middle" x="3150.39" y="-3516.3" font-family="Times,serif" font-size="14.00">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge64" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M2864.12,-2338.29C2889.49,-2384.77 2955.1,-2511.86 2980.39,-2627 3001.05,-2721.06 2953.9,-3419.72 3016.39,-3493 3023.64,-3501.51 3032.78,-3507.79 3042.86,-3512.38"/>
<polygon fill="black" stroke="black" points="3041.75,-3515.71 3052.34,-3516.13 3044.33,-3509.2 3041.75,-3515.71"/>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge246" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3248.73,-3533.4C3292.12,-3539.38 3342.4,-3546.3 3382.62,-3551.84"/>
<polygon fill="black" stroke="black" points="3382.23,-3555.32 3392.61,-3553.22 3383.19,-3548.39 3382.23,-3555.32"/>
</g>
<!-- scan_ontology.main -->
<g id="node65" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="2653.39,-2342 2498.39,-2342 2498.39,-2306 2653.39,-2306 2653.39,-2342"/>
<text text-anchor="middle" x="2575.89" y="-2320.3" font-family="Times,serif" font-size="14.00">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;serde_utils.write_json -->
<g id="edge67" class="edge">
<title>scan_ontology.main&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2653.56,-2336.03C2676.64,-2339.61 2702.04,-2343.51 2725.39,-2347 2854.62,-2366.33 2886.9,-2371.42 3016.39,-2389 3134.86,-2405.09 3271.48,-2422.26 3360.65,-2433.28"/>
<polygon fill="black" stroke="black" points="3360.39,-2436.78 3370.75,-2434.53 3361.25,-2429.83 3360.39,-2436.78"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge65" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M2653.49,-2322.89C2675.91,-2322.56 2701.03,-2322.19 2725.67,-2321.84"/>
<polygon fill="black" stroke="black" points="2725.87,-2325.33 2735.82,-2321.69 2725.77,-2318.33 2725.87,-2325.33"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node66" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node66"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="2959.39,-464 2746.39,-464 2746.39,-428 2959.39,-428 2959.39,-464"/>
<text text-anchor="middle" x="2852.89" y="-442.3" font-family="Times,serif" font-size="14.00">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge66" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M2578.36,-2305.88C2588.08,-2185.8 2644.23,-1492.13 2689.39,-927 2693.42,-876.56 2692.03,-511.05 2725.39,-473 2729,-468.88 2733.06,-465.31 2737.47,-462.2"/>
<polygon fill="black" stroke="black" points="2739.62,-465 2746.33,-456.8 2735.97,-459.02 2739.62,-465"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node164" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node164"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="3255.89,-220 3044.89,-220 3044.89,-184 3255.89,-184 3255.89,-220"/>
<text text-anchor="middle" x="3150.39" y="-198.3" font-family="Times,serif" font-size="14.00">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge260" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2867.5,-427.99C2893.57,-394.36 2953.57,-321.1 3016.39,-273 3041.47,-253.8 3072.46,-236.92 3098.21,-224.44"/>
<polygon fill="black" stroke="black" points="3099.92,-227.51 3107.44,-220.05 3096.91,-221.19 3099.92,-227.51"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node67" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node67"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="2407.89,-388 2221.89,-388 2221.89,-352 2407.89,-352 2407.89,-388"/>
<text text-anchor="middle" x="2314.89" y="-366.3" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node68" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node68"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1178.39,-568 1019.39,-568 1019.39,-532 1178.39,-532 1178.39,-568"/>
<text text-anchor="middle" x="1098.89" y="-546.3" font-family="Times,serif" font-size="14.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node69" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node69"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="2417.39,-817 2212.39,-817 2212.39,-781 2417.39,-781 2417.39,-817"/>
<text text-anchor="middle" x="2314.89" y="-795.3" font-family="Times,serif" font-size="14.00">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node70" class="node">
<title>tg_client._write_md</title>
<g id="a_node70"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="2653.89,-549 2497.89,-549 2497.89,-513 2653.89,-513 2653.89,-549"/>
<text text-anchor="middle" x="2575.89" y="-527.3" font-family="Times,serif" font-size="14.00">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge68" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M2654.22,-537.47C2690.23,-540.48 2733.11,-544.07 2769.7,-547.13"/>
<polygon fill="black" stroke="black" points="2769.59,-550.63 2779.85,-547.97 2770.17,-543.65 2769.59,-550.63"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node71" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node71"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="3259.39,-680 3041.39,-680 3041.39,-644 3259.39,-644 3259.39,-680"/>
<text text-anchor="middle" x="3150.39" y="-658.3" font-family="Times,serif" font-size="14.00">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge69" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3254.08,-680.02C3264.68,-683.82 3274.99,-688.42 3284.39,-694 3354.79,-735.78 3412.85,-815.66 3439.93,-857.28"/>
<polygon fill="black" stroke="black" points="3437.04,-859.26 3445.39,-865.8 3442.94,-855.49 3437.04,-859.26"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node72" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node72"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="2954.89,-734 2750.89,-734 2750.89,-698 2954.89,-698 2954.89,-734"/>
<text text-anchor="middle" x="2852.89" y="-712.3" font-family="Times,serif" font-size="14.00">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge70" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M2952.7,-697.94C2980.91,-692.79 3011.81,-687.14 3040.59,-681.88"/>
<polygon fill="black" stroke="black" points="3041.46,-685.28 3050.67,-680.04 3040.21,-678.39 3041.46,-685.28"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node73" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node73"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="2167.39,-1146 1946.39,-1146 1946.39,-1110 2167.39,-1110 2167.39,-1146"/>
<text text-anchor="middle" x="2056.89" y="-1124.3" font-family="Times,serif" font-size="14.00">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge71" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2167.65,-1114.28C2240.99,-1104.89 2339.56,-1091.87 2426.39,-1079 2543.55,-1061.64 2586.81,-1095.22 2689.39,-1036 2711.27,-1023.37 2704.47,-1006.18 2725.39,-992 2837.67,-915.9 2882.73,-923.12 3016.39,-900 3133.15,-879.8 3269.85,-878.2 3359.53,-880.08"/>
<polygon fill="black" stroke="black" points="3359.6,-883.58 3369.68,-880.31 3359.76,-876.58 3359.6,-883.58"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node74" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node74"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="2426.39,-763 2203.39,-763 2203.39,-727 2426.39,-727 2426.39,-763"/>
<text text-anchor="middle" x="2314.89" y="-741.3" font-family="Times,serif" font-size="14.00">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node75" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node75"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="2668.89,-641 2482.89,-641 2482.89,-605 2668.89,-605 2668.89,-641"/>
<text text-anchor="middle" x="2575.89" y="-619.3" font-family="Times,serif" font-size="14.00">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node76" class="node">
<title>tg_client._extract_author</title>
<g id="a_node76"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="2949.89,-680 2755.89,-680 2755.89,-644 2949.89,-644 2949.89,-680"/>
<text text-anchor="middle" x="2852.89" y="-658.3" font-family="Times,serif" font-size="14.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node77" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node77"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="3260.89,-626 3039.89,-626 3039.89,-590 3260.89,-590 3260.89,-626"/>
<text text-anchor="middle" x="3150.39" y="-604.3" font-family="Times,serif" font-size="14.00">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge72" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M2950.24,-644.39C2979.14,-639.11 3011.04,-633.28 3040.68,-627.87"/>
<polygon fill="black" stroke="black" points="3041.43,-631.29 3050.64,-626.05 3040.17,-624.4 3041.43,-631.29"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node78" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node78"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="2681.89,-864 2469.89,-864 2469.89,-828 2681.89,-828 2681.89,-864"/>
<text text-anchor="middle" x="2575.89" y="-842.3" font-family="Times,serif" font-size="14.00">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node79" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node79"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="3553.89,-372 3360.89,-372 3360.89,-336 3553.89,-336 3553.89,-372"/>
<text text-anchor="middle" x="3457.39" y="-350.3" font-family="Times,serif" font-size="14.00">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node80" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node80"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="2410.39,-1070 2219.39,-1070 2219.39,-1034 2410.39,-1034 2410.39,-1070"/>
<text text-anchor="middle" x="2314.89" y="-1048.3" font-family="Times,serif" font-size="14.00">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge75" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2317.17,-1070.07C2331.11,-1266.82 2454.42,-3003.87 2462.39,-3014 2692.72,-3306.91 2911.79,-3183.33 3284.39,-3179 3295.82,-3178.87 3307.68,-3178.68 3319.58,-3178.47"/>
<polygon fill="black" stroke="black" points="3319.65,-3181.97 3329.59,-3178.28 3319.52,-3174.97 3319.65,-3181.97"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge74" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2410.55,-1062.99C2493.5,-1072.43 2617.34,-1086.04 2725.39,-1096 2787.42,-1101.72 3234.32,-1101.93 3284.39,-1139 3319.68,-1165.13 3293.89,-1195.99 3320.39,-1231 3345.66,-1264.39 3384.49,-1292.31 3414.2,-1310.63"/>
<polygon fill="black" stroke="black" points="3412.74,-1313.83 3423.11,-1315.99 3416.35,-1307.83 3412.74,-1313.83"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node81" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node81"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="2686.39,-918 2465.39,-918 2465.39,-882 2686.39,-882 2686.39,-918"/>
<text text-anchor="middle" x="2575.89" y="-896.3" font-family="Times,serif" font-size="14.00">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge73" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M2346.62,-1033.97C2393.64,-1006.37 2483.44,-953.67 2535.29,-923.24"/>
<polygon fill="black" stroke="black" points="2537.35,-926.09 2544.2,-918.01 2533.8,-920.05 2537.35,-926.09"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node82" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node82"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="2942.89,-518 2762.89,-518 2762.89,-482 2942.89,-482 2942.89,-518"/>
<text text-anchor="middle" x="2852.89" y="-496.3" font-family="Times,serif" font-size="14.00">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge76" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M2679.74,-881.89C2683.23,-879.28 2686.48,-876.32 2689.39,-873 2791.27,-756.71 2622.04,-641.99 2725.39,-527 2733.05,-518.47 2742.69,-512.27 2753.2,-507.81"/>
<polygon fill="black" stroke="black" points="2754.48,-511.07 2762.65,-504.32 2752.05,-504.51 2754.48,-511.07"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node83" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node83"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="3267.89,-372 3032.89,-372 3032.89,-336 3267.89,-336 3267.89,-372"/>
<text text-anchor="middle" x="3150.39" y="-350.3" font-family="Times,serif" font-size="14.00">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge79" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2943.2,-490.07C2956.37,-486.07 2969.24,-480.57 2980.39,-473 3004.25,-456.8 2994.68,-437.99 3016.39,-419 3037.05,-400.92 3063.63,-386.62 3087.58,-376.08"/>
<polygon fill="black" stroke="black" points="3089.14,-379.22 3096.96,-372.08 3086.39,-372.78 3089.14,-379.22"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge78" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3221.22,-372.03C3245.27,-381.87 3269.8,-396.75 3284.39,-419 3383.41,-570.06 3236.43,-1071.08 3320.39,-1231 3339.18,-1266.8 3376.61,-1293.71 3407.45,-1311.03"/>
<polygon fill="black" stroke="black" points="3405.91,-1314.18 3416.37,-1315.88 3409.25,-1308.03 3405.91,-1314.18"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge77" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M3268,-354C3295.14,-354 3323.89,-354 3350.53,-354"/>
<polygon fill="black" stroke="black" points="3350.63,-357.5 3360.63,-354 3350.63,-350.5 3350.63,-357.5"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node84" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node84"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2164.39,-247 1949.39,-247 1949.39,-211 2164.39,-211 2164.39,-247"/>
<text text-anchor="middle" x="2056.89" y="-225.3" font-family="Times,serif" font-size="14.00">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge80" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2164.53,-241.21C2366.91,-264.39 2805.76,-314.65 3022.72,-339.49"/>
<polygon fill="black" stroke="black" points="3022.54,-343 3032.88,-340.66 3023.34,-336.04 3022.54,-343"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node85" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node85"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="3235.89,-318 3064.89,-318 3064.89,-282 3235.89,-282 3235.89,-318"/>
<text text-anchor="middle" x="3150.39" y="-296.3" font-family="Times,serif" font-size="14.00">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge81" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3236.15,-303.37C3253.77,-307.62 3271.03,-314.9 3284.39,-327 3325.64,-364.35 3422.95,-748.61 3449.56,-856.16"/>
<polygon fill="black" stroke="black" points="3446.19,-857.09 3451.98,-865.96 3452.98,-855.42 3446.19,-857.09"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;serde_utils.read_text -->
<g id="edge82" class="edge">
<title>tg_client._get_id_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3235.36,-281.97C3330.62,-266.42 3486.68,-256.24 3594.39,-327 3834.27,-484.59 3799.61,-629.42 3886.39,-903 4005.02,-1277.03 4028.47,-1760.09 4032.58,-1880.75"/>
<polygon fill="black" stroke="black" points="4029.09,-1881.1 4032.92,-1890.98 4036.09,-1880.87 4029.09,-1881.1"/>
</g>
<!-- tg_client._load_progress -->
<g id="node86" class="node">
<title>tg_client._load_progress</title>
<g id="a_node86"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="1414.39,-350 1225.39,-350 1225.39,-314 1414.39,-314 1414.39,-350"/>
<text text-anchor="middle" x="1319.89" y="-328.3" font-family="Times,serif" font-size="14.00">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;serde_utils.read_text -->
<g id="edge83" class="edge">
<title>tg_client._load_progress&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1414.74,-321.4C1623.13,-298.82 2140.4,-248 2574.89,-248 2574.89,-248 2574.89,-248 3458.39,-248 3653.83,-248 3764.02,-196.6 3886.39,-349 3928.76,-401.77 3916.47,-889.59 3922.39,-957 3954.54,-1323.12 4013.84,-1766.15 4029.51,-1880.83"/>
<polygon fill="black" stroke="black" points="4026.06,-1881.46 4030.89,-1890.89 4033,-1880.51 4026.06,-1881.46"/>
</g>
<!-- tg_client._save_progress -->
<g id="node87" class="node">
<title>tg_client._save_progress</title>
<g id="a_node87"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="1662.89,-591 1471.89,-591 1471.89,-555 1662.89,-555 1662.89,-591"/>
<text text-anchor="middle" x="1567.39" y="-569.3" font-family="Times,serif" font-size="14.00">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node88" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node88"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1896.39,-750 1734.39,-750 1734.39,-714 1896.39,-714 1896.39,-750"/>
<text text-anchor="middle" x="1815.39" y="-728.3" font-family="Times,serif" font-size="14.00">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge84" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1872.34,-750.06C1946.91,-773.08 2083.42,-811.64 2203.39,-826 2301.8,-837.78 2327.73,-835.5 2426.39,-826 2442.61,-824.44 2446.16,-820.56 2462.39,-819 2562.81,-809.33 2588.5,-818.58 2689.39,-819 2953.84,-820.11 3023.84,-778.73 3284.39,-824 3327.07,-831.42 3373.32,-848.07 3407.1,-861.96"/>
<polygon fill="black" stroke="black" points="3406.15,-865.36 3416.72,-865.98 3408.84,-858.9 3406.15,-865.36"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node89" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node89"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1399.39,-491 1240.39,-491 1240.39,-455 1399.39,-455 1399.39,-491"/>
<text text-anchor="middle" x="1319.89" y="-469.3" font-family="Times,serif" font-size="14.00">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge85" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1399.54,-468.18C1756.11,-446.65 3206.97,-362.79 3284.39,-419 3431.19,-525.58 3452.85,-771.85 3455.93,-855.55"/>
<polygon fill="black" stroke="black" points="3452.43,-855.71 3456.23,-865.6 3459.43,-855.5 3452.43,-855.71"/>
</g>
<!-- tg_client._save_message -->
<g id="node90" class="node">
<title>tg_client._save_message</title>
<g id="a_node90"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="2152.39,-660 1961.39,-660 1961.39,-624 2152.39,-624 2152.39,-660"/>
<text text-anchor="middle" x="2056.89" y="-638.3" font-family="Times,serif" font-size="14.00">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge86" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M2074.82,-623.92C2100.18,-597.98 2150.72,-550.64 2203.39,-526 2257.01,-500.91 2666.48,-424.97 2725.39,-419 2838.14,-407.56 2867.41,-410.03 2980.39,-419 3007.44,-421.15 3036.7,-425.2 3063.15,-429.52"/>
<polygon fill="black" stroke="black" points="3062.7,-433 3073.14,-431.19 3063.85,-426.09 3062.7,-433"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge87" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2062.73,-660.29C2097.12,-787.22 2314.84,-1545.52 2725.39,-2006 2831.7,-2125.24 2866.38,-2162.05 3016.39,-2217 3136.21,-2260.89 3286.4,-2261.63 3376.7,-2256.8"/>
<polygon fill="black" stroke="black" points="3377.08,-2260.28 3386.87,-2256.22 3376.68,-2253.29 3377.08,-2260.28"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge88" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2119.42,-660.04C2145.18,-667.08 2175.56,-674.71 2203.39,-680 2373.58,-712.34 2810.93,-778.96 2980.39,-743 2997.52,-739.37 2999.26,-730.63 3016.39,-727 3132.9,-702.27 3173.33,-683.94 3284.39,-727 3352.09,-753.25 3409.45,-819.94 3437.66,-857.41"/>
<polygon fill="black" stroke="black" points="3435.12,-859.86 3443.88,-865.82 3440.75,-855.7 3435.12,-859.86"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge89" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M2067.8,-623.77C2088.93,-586.09 2141.57,-498.24 2203.39,-440 2222.91,-421.6 2247.95,-405.28 2269.25,-393.03"/>
<polygon fill="black" stroke="black" points="2271.12,-396 2278.12,-388.04 2267.69,-389.9 2271.12,-396"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge90" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M2072.85,-660.18C2097.2,-688.51 2148.23,-742.97 2203.39,-772 2206.92,-773.86 2210.59,-775.6 2214.35,-777.21"/>
<polygon fill="black" stroke="black" points="2213.26,-780.55 2223.84,-781 2215.85,-774.05 2213.26,-780.55"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge91" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M2083.26,-623.98C2111.22,-605.16 2158.24,-576.56 2203.39,-563 2297.73,-534.67 2411.18,-528.72 2487.68,-528.54"/>
<polygon fill="black" stroke="black" points="2487.75,-532.04 2497.76,-528.55 2487.76,-525.04 2487.75,-532.04"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge92" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M2152.48,-650.82C2299.85,-664.55 2583.59,-690.99 2740.58,-705.63"/>
<polygon fill="black" stroke="black" points="2740.46,-709.13 2750.74,-706.57 2741.11,-702.16 2740.46,-709.13"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge93" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M2090.68,-660.02C2119.7,-675.48 2163.52,-697.63 2203.39,-713 2213.45,-716.88 2224.18,-720.54 2234.85,-723.91"/>
<polygon fill="black" stroke="black" points="2234.02,-727.32 2244.61,-726.92 2236.08,-720.63 2234.02,-727.32"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge94" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M2152.41,-638.53C2243.08,-635.19 2379.58,-630.18 2472.72,-626.75"/>
<polygon fill="black" stroke="black" points="2472.86,-630.25 2482.73,-626.39 2472.6,-623.26 2472.86,-630.25"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge95" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M2152.4,-624.42C2304.42,-597.92 2595.68,-554.97 2689.39,-596 2711,-605.46 2704.89,-623.32 2725.39,-635 2731.83,-638.67 2738.71,-641.84 2745.81,-644.58"/>
<polygon fill="black" stroke="black" points="2745.02,-648.01 2755.61,-648.06 2747.36,-641.42 2745.02,-648.01"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge96" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M2065.88,-660.15C2086.12,-705.37 2142.15,-826.02 2203.39,-918 2230.04,-958.03 2266.38,-1000.2 2289.98,-1026.3"/>
<polygon fill="black" stroke="black" points="2287.55,-1028.83 2296.88,-1033.86 2292.73,-1024.11 2287.55,-1028.83"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge97" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M2013.47,-660.15C2006.79,-669.54 2021.26,-678 2056.89,-678 2078.6,-678 2092.45,-674.86 2098.45,-670.28"/>
<polygon fill="black" stroke="black" points="2101.95,-670.62 2100.31,-660.15 2095.06,-669.36 2101.95,-670.62"/>
</g>
<!-- tg_client._save_media -->
<g id="node91" class="node">
<title>tg_client._save_media</title>
<g id="a_node91"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="2400.89,-909 2228.89,-909 2228.89,-873 2400.89,-873 2400.89,-909"/>
<text text-anchor="middle" x="2314.89" y="-887.3" font-family="Times,serif" font-size="14.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge98" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M2068.87,-660.02C2090.98,-695.19 2143.82,-774.1 2203.39,-826 2222.32,-842.49 2246.02,-857.07 2266.61,-868.22"/>
<polygon fill="black" stroke="black" points="2265.05,-871.35 2275.53,-872.94 2268.33,-865.17 2265.05,-871.35"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node92" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node92"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="4146.39,-948 3922.39,-948 3922.39,-912 4146.39,-912 4146.39,-948"/>
<text text-anchor="middle" x="4034.39" y="-926.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge99" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M2068.24,-623.95C2089.23,-588.93 2140.2,-511.48 2203.39,-469 2289.82,-410.89 2333.79,-444.68 2426.39,-397 2573.54,-321.23 2569.44,-230.47 2725.39,-175 2903.11,-111.79 2960.75,-156 3149.39,-156 3149.39,-156 3149.39,-156 3458.39,-156 3651.74,-156 3747.77,-99.2 3886.39,-234 3984.69,-329.6 4023.06,-783.06 4031.51,-901.6"/>
<polygon fill="black" stroke="black" points="4028.02,-901.96 4032.21,-911.7 4035.01,-901.48 4028.02,-901.96"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge101" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2383.42,-909.04C2408.14,-915.26 2436.42,-921.94 2462.39,-927 2562.45,-946.52 2588.86,-943.03 2689.39,-960 2819.26,-981.92 2851.79,-987.57 2980.39,-1016 2996.49,-1019.56 3000.17,-1021.99 3016.39,-1025 3134.38,-1046.93 3167.05,-1032.82 3284.39,-1058 3425.41,-1088.27 3493.2,-1051.22 3594.39,-1154 3634.35,-1194.59 3592.97,-1234.06 3630.39,-1277 3643.63,-1292.2 3661.73,-1303.54 3680.11,-1311.93"/>
<polygon fill="black" stroke="black" points="3678.85,-1315.2 3689.42,-1315.94 3681.62,-1308.77 3678.85,-1315.2"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge102" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2347.76,-909.04C2376.78,-924.73 2421.26,-946.93 2462.39,-960 2700.69,-1035.71 2769.9,-1015.97 3016.39,-1058 3075.88,-1068.15 3239.44,-1061.72 3284.39,-1102 3328.72,-1141.73 3286.91,-1181.78 3320.39,-1231 3343.74,-1265.32 3382.29,-1292.94 3412.39,-1310.9"/>
<polygon fill="black" stroke="black" points="3410.64,-1313.93 3421.04,-1315.94 3414.16,-1307.88 3410.64,-1313.93"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge100" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M2401.05,-876.2C2420.31,-872.86 2441.06,-869.25 2461.28,-865.74"/>
<polygon fill="black" stroke="black" points="2461.9,-869.18 2471.16,-864.02 2460.71,-862.29 2461.9,-869.18"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node93" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node93"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="2960.39,-626 2745.39,-626 2745.39,-590 2960.39,-590 2960.39,-626"/>
<text text-anchor="middle" x="2852.89" y="-604.3" font-family="Times,serif" font-size="14.00">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge103" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M2347.51,-872.81C2369.7,-859.95 2400.01,-842.17 2426.39,-826 2560.81,-743.57 2579.5,-694.86 2725.39,-635 2730.52,-632.9 2735.83,-630.95 2741.25,-629.14"/>
<polygon fill="black" stroke="black" points="2742.61,-632.38 2751.1,-626.05 2740.51,-625.7 2742.61,-632.38"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;serde_utils.write_md -->
<g id="edge204" class="edge">
<title>image_io.write_image_meta&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M2952.7,-589.94C2986.3,-583.8 3023.71,-576.97 3056.81,-570.92"/>
<polygon fill="black" stroke="black" points="3057.72,-574.31 3066.93,-569.07 3056.47,-567.42 3057.72,-574.31"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node94" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node94"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="1910.39,-598 1720.39,-598 1720.39,-562 1910.39,-562 1910.39,-598"/>
<text text-anchor="middle" x="1815.39" y="-576.3" font-family="Times,serif" font-size="14.00">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge104" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M1885.98,-598.02C1914.27,-605.34 1947.12,-613.84 1976.36,-621.41"/>
<polygon fill="black" stroke="black" points="1975.56,-624.82 1986.12,-623.94 1977.32,-618.04 1975.56,-624.82"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node95" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node95"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="3275.89,-1238 3024.89,-1238 3024.89,-1202 3275.89,-1202 3275.89,-1238"/>
<text text-anchor="middle" x="3150.39" y="-1216.3" font-family="Times,serif" font-size="14.00">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge105" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3221.19,-1238.06C3245.23,-1247.9 3269.77,-1262.78 3284.39,-1285 3330.78,-1355.54 3294.19,-1963.74 3320.39,-2044 3344,-2116.34 3400.29,-2187.44 3432.56,-2224.21"/>
<polygon fill="black" stroke="black" points="3430.19,-2226.81 3439.45,-2231.95 3435.42,-2222.15 3430.19,-2226.81"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge106" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3252.21,-1201.96C3263.16,-1199.28 3274.06,-1196.3 3284.39,-1193 3301.07,-1187.67 3303.26,-1180.63 3320.39,-1177 3379.95,-1164.36 3544.57,-1141.99 3594.39,-1177 3633.03,-1204.16 3598.28,-1242.35 3630.39,-1277 3644.43,-1292.16 3663.26,-1303.55 3682.12,-1312"/>
<polygon fill="black" stroke="black" points="3680.78,-1315.24 3691.35,-1315.92 3683.51,-1308.79 3680.78,-1315.24"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge107" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3267.72,-1201.92C3273.53,-1199.32 3279.13,-1196.36 3284.39,-1193 3307.16,-1178.45 3296.28,-1156.2 3320.39,-1144 3429.04,-1089 3477.64,-1109.38 3594.39,-1144 3647.57,-1159.77 3699.63,-1198.97 3730.1,-1225.02"/>
<polygon fill="black" stroke="black" points="3727.9,-1227.74 3737.74,-1231.66 3732.49,-1222.46 3727.9,-1227.74"/>
</g>
<!-- tg_client._download_messages -->
<g id="node97" class="node">
<title>tg_client._download_messages</title>
<g id="a_node97"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="1684.39,-537 1450.39,-537 1450.39,-501 1684.39,-501 1684.39,-537"/>
<text text-anchor="middle" x="1567.39" y="-515.3" font-family="Times,serif" font-size="14.00">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge108" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1647.08,-537.01C1659.57,-539.96 1672.34,-543.02 1684.39,-546 1701.33,-550.19 1719.48,-554.83 1736.67,-559.31"/>
<polygon fill="black" stroke="black" points="1736.11,-562.78 1746.67,-561.92 1737.88,-556 1736.11,-562.78"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node98" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node98"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="1678.39,-209 1456.39,-209 1456.39,-173 1678.39,-173 1678.39,-209"/>
<text text-anchor="middle" x="1567.39" y="-187.3" font-family="Times,serif" font-size="14.00">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node99" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node99"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="1672.39,-1259 1462.39,-1259 1462.39,-1223 1672.39,-1223 1672.39,-1259"/>
<text text-anchor="middle" x="1567.39" y="-1237.3" font-family="Times,serif" font-size="14.00">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge109" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1571.26,-1259.16C1581.3,-1317.3 1619.91,-1501.44 1720.39,-1610 2156.89,-2081.6 2388.49,-2114.31 3016.39,-2251 3140.01,-2277.91 3287.83,-2269.58 3376.8,-2260.35"/>
<polygon fill="black" stroke="black" points="3377.25,-2263.82 3386.82,-2259.28 3376.51,-2256.86 3377.25,-2263.82"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge110" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1672.41,-1231.22C1771.04,-1222.8 1923.41,-1212 2055.89,-1212 2055.89,-1212 2055.89,-1212 2315.89,-1212 2366.14,-1212 2378.37,-1202.84 2426.39,-1188 2680.29,-1109.51 2757.88,-1108.32 2980.39,-963 2999.07,-950.8 2996.16,-937.41 3016.39,-928 3020.26,-926.2 3231.02,-905.67 3359.4,-893.3"/>
<polygon fill="black" stroke="black" points="3360.03,-896.76 3369.65,-892.32 3359.36,-889.79 3360.03,-896.76"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;serde_utils.load_json -->
<g id="edge114" class="edge">
<title>tg_client.refetch_messages&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1580.26,-1259.09C1629.31,-1331.43 1824.51,-1596 2055.89,-1596 2055.89,-1596 2055.89,-1596 2853.89,-1596 2949.65,-1596 3202.3,-1565.69 3284.39,-1615 3311.37,-1631.21 3294.35,-1658.31 3320.39,-1676 3422.36,-1745.26 3490.53,-1652.61 3594.39,-1719 3677.08,-1771.86 3727.63,-1883.35 3747.58,-1935.29"/>
<polygon fill="black" stroke="black" points="3744.37,-1936.71 3751.16,-1944.84 3750.93,-1934.25 3744.37,-1936.71"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;serde_utils.write_json -->
<g id="edge115" class="edge">
<title>tg_client.refetch_messages&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1571.09,-1259.07C1581.53,-1324.7 1623.53,-1555.08 1720.39,-1717 1878.84,-1981.88 1956.02,-2031.4 2203.39,-2216 2512.43,-2446.62 2634.95,-2462.44 3016.39,-2519 3134.21,-2536.47 3177.58,-2571.73 3284.39,-2519 3307.98,-2507.35 3298.05,-2485.9 3320.39,-2472 3332.68,-2464.35 3346.69,-2458.81 3360.95,-2454.8"/>
<polygon fill="black" stroke="black" points="3362.03,-2458.14 3370.84,-2452.27 3360.29,-2451.36 3362.03,-2458.14"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge111" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M1628.42,-1222.97C1656.27,-1214.88 1689.89,-1205.49 1720.39,-1198 1797.06,-1179.18 1884.39,-1161.06 1950.72,-1147.98"/>
<polygon fill="black" stroke="black" points="1951.63,-1151.37 1960.77,-1146 1950.28,-1144.5 1951.63,-1151.37"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge112" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1571.1,-1222.54C1581.94,-1152.11 1626.24,-894.76 1720.39,-705 1739.04,-667.41 1769.42,-629.66 1790.58,-605.63"/>
<polygon fill="black" stroke="black" points="1793.32,-607.82 1797.37,-598.03 1788.1,-603.15 1793.32,-607.82"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge113" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M1672.51,-1244.03C1771.21,-1246.65 1923.62,-1250 2055.89,-1250 2055.89,-1250 2055.89,-1250 2576.89,-1250 2726.91,-1250 2898.74,-1239.6 3014.69,-1231.05"/>
<polygon fill="black" stroke="black" points="3014.97,-1234.54 3024.68,-1230.3 3014.45,-1227.55 3014.97,-1234.54"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node100" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node100"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1189.39,-514 1008.39,-514 1008.39,-478 1189.39,-478 1189.39,-514"/>
<text text-anchor="middle" x="1098.89" y="-492.3" font-family="Times,serif" font-size="14.00">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge116" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1176.48,-514.08C1181.09,-516.67 1185.44,-519.62 1189.39,-523 1217.47,-547.05 1205.38,-566.91 1225.39,-598 1353.29,-796.73 1330.06,-1006 1566.39,-1006 1566.39,-1006 1566.39,-1006 2057.89,-1006 2340.74,-1006 2425.24,-1028.15 2689.39,-927 2707.58,-920.03 2707.09,-908.68 2725.39,-902 2847.41,-857.49 2886.64,-881.01 3016.39,-875 3135.37,-869.49 3165.32,-871.89 3284.39,-875 3308.82,-875.64 3335.19,-876.79 3359.76,-878.05"/>
<polygon fill="black" stroke="black" points="3359.63,-881.55 3369.8,-878.58 3360,-874.56 3359.63,-881.55"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge117" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1138.38,-477.95C1162.81,-467.17 1195.37,-454.06 1225.39,-446 1323,-419.78 1350.03,-425.02 1450.39,-413 1784.11,-373.04 1868.08,-366.19 2203.39,-343 2514.6,-321.47 2884.19,-308.23 3054.64,-302.82"/>
<polygon fill="black" stroke="black" points="3054.95,-306.32 3064.83,-302.5 3054.73,-299.32 3054.95,-306.32"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge118" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1124.16,-477.82C1163.81,-448.13 1242.49,-389.21 1286.73,-356.08"/>
<polygon fill="black" stroke="black" points="1288.93,-358.8 1294.84,-350.01 1284.74,-353.2 1288.93,-358.8"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge119" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1189.62,-513.55C1201.64,-515.79 1213.8,-517.99 1225.39,-520 1304.42,-533.69 1394.05,-547.56 1461.58,-557.67"/>
<polygon fill="black" stroke="black" points="1461.39,-561.18 1471.8,-559.2 1462.43,-554.26 1461.39,-561.18"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge120" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1168.19,-514.14C1175.47,-516.8 1182.67,-519.75 1189.39,-523 1206.93,-531.47 1207.89,-539.44 1225.39,-548 1393.41,-630.18 1606.21,-685.85 1724.56,-712.94"/>
<polygon fill="black" stroke="black" points="1723.78,-716.36 1734.31,-715.16 1725.33,-709.53 1723.78,-716.36"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge121" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1189.6,-486.58C1202.96,-485.17 1216.74,-483.73 1230.08,-482.33"/>
<polygon fill="black" stroke="black" points="1230.61,-485.79 1240.19,-481.26 1229.88,-478.83 1230.61,-485.79"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge122" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1189.56,-500.42C1260.62,-503.92 1360.79,-508.86 1439.99,-512.77"/>
<polygon fill="black" stroke="black" points="1439.88,-516.27 1450.04,-513.26 1440.22,-509.28 1439.88,-516.27"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node101" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node101"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="3248.39,-1016 3052.39,-1016 3052.39,-980 3248.39,-980 3248.39,-1016"/>
<text text-anchor="middle" x="3150.39" y="-994.3" font-family="Times,serif" font-size="14.00">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge123" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3177.43,-1016.14C3209.32,-1040.07 3261.89,-1085.49 3284.39,-1139 3362.39,-1324.54 3258.68,-1852.42 3320.39,-2044 3343.72,-2116.43 3400.12,-2187.49 3432.48,-2224.24"/>
<polygon fill="black" stroke="black" points="3430.12,-2226.84 3439.39,-2231.97 3435.34,-2222.18 3430.12,-2226.84"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge124" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3248.55,-983.27C3261.22,-978.91 3273.54,-973.28 3284.39,-966 3307.12,-950.73 3297.62,-931.21 3320.39,-916 3332.35,-908.01 3346.07,-902 3360.09,-897.49"/>
<polygon fill="black" stroke="black" points="3361.24,-900.8 3369.83,-894.6 3359.25,-894.09 3361.24,-900.8"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge125" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3248.43,-998.68C3371.17,-1000.49 3569.65,-1006.99 3594.39,-1030 3675.63,-1105.55 3563.53,-1188.47 3630.39,-1277 3641.82,-1292.13 3658.17,-1303.34 3675.36,-1311.62"/>
<polygon fill="black" stroke="black" points="3674.41,-1315.03 3684.97,-1315.92 3677.27,-1308.64 3674.41,-1315.03"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge126" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3248.47,-983.47C3362.13,-968.69 3541.57,-952.99 3594.39,-992 3638.15,-1024.32 3603.55,-1061.67 3630.39,-1109 3656.38,-1154.84 3699.48,-1198.45 3728.15,-1224.71"/>
<polygon fill="black" stroke="black" points="3726.06,-1227.54 3735.83,-1231.65 3730.76,-1222.35 3726.06,-1227.54"/>
</g>
<!-- tg_client.main -->
<g id="node102" class="node">
<title>tg_client.main</title>
<polygon fill="none" stroke="black" points="961.19,-514 843.19,-514 843.19,-478 961.19,-478 961.19,-514"/>
<text text-anchor="middle" x="902.19" y="-492.3" font-family="Times,serif" font-size="14.00">tg_client.main</text>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge127" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M924.31,-477.77C973.19,-436.95 1099.55,-339.12 1225.39,-305 1595.02,-204.79 2060.2,-303.55 2239.09,-349.39"/>
<polygon fill="black" stroke="black" points="2238.37,-352.82 2248.93,-351.93 2240.12,-346.04 2238.37,-352.82"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge128" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M961.34,-512.13C980.7,-517.5 1002.54,-523.55 1022.98,-529.22"/>
<polygon fill="black" stroke="black" points="1022.31,-532.67 1032.88,-531.97 1024.18,-525.92 1022.31,-532.67"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge129" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M905.18,-477.68C911.19,-432.14 933.65,-313.63 1008.39,-261 1121.56,-181.31 1180.48,-237 1318.89,-237 1318.89,-237 1318.89,-237 1568.39,-237 1695.23,-237 1840.62,-234.26 1939.38,-231.99"/>
<polygon fill="black" stroke="black" points="1939.47,-235.48 1949.38,-231.75 1939.31,-228.49 1939.47,-235.48"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge130" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M961.28,-479.48C976.51,-475.59 992.99,-471.78 1008.39,-469 1304.23,-415.65 1405.43,-379.96 1684.39,-492 1722.33,-507.24 1760.46,-534.84 1785.51,-555.08"/>
<polygon fill="black" stroke="black" points="1783.54,-557.99 1793.49,-561.64 1787.98,-552.59 1783.54,-557.99"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge131" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M903.88,-477.74C906.86,-427.25 922.82,-285.4 1008.39,-223 1075.62,-173.97 1303.22,-176.27 1446.13,-183.13"/>
<polygon fill="black" stroke="black" points="1446.11,-186.64 1456.27,-183.63 1446.46,-179.64 1446.11,-186.64"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge132" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M903.08,-514.28C902.89,-614.11 907.28,-1092.41 1008.39,-1188 1136.49,-1309.1 1362.72,-1285.35 1484.04,-1261.11"/>
<polygon fill="black" stroke="black" points="1484.93,-1264.5 1494.02,-1259.07 1483.52,-1257.65 1484.93,-1264.5"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge133" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M961.34,-496C973.02,-496 985.59,-496 998.21,-496"/>
<polygon fill="black" stroke="black" points="998.33,-499.5 1008.33,-496 998.33,-492.5 998.33,-499.5"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge134" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M905.19,-514.13C918.13,-621.96 999.94,-1174 1318.89,-1174 1318.89,-1174 1318.89,-1174 2315.89,-1174 2612.03,-1174 2954.84,-1066.32 3090.13,-1019.41"/>
<polygon fill="black" stroke="black" points="3091.6,-1022.61 3099.89,-1016.01 3089.3,-1016 3091.6,-1022.61"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node104" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node104"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="3213.89,-1974 3086.89,-1974 3086.89,-1938 3213.89,-1938 3213.89,-1974"/>
<text text-anchor="middle" x="3150.39" y="-1952.3" font-family="Times,serif" font-size="14.00">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node105" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node105"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="3539.39,-1927 3375.39,-1927 3375.39,-1891 3539.39,-1891 3539.39,-1927"/>
<text text-anchor="middle" x="3457.39" y="-1905.3" font-family="Times,serif" font-size="14.00">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node106" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node106"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3540.39,-3522 3374.39,-3522 3374.39,-3486 3540.39,-3486 3540.39,-3522"/>
<text text-anchor="middle" x="3457.39" y="-3500.3" font-family="Times,serif" font-size="14.00">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node107" class="node">
<title>lot_io.write_lots</title>
<g id="a_node107"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="3215.39,-3484 3085.39,-3484 3085.39,-3448 3215.39,-3448 3215.39,-3484"/>
<text text-anchor="middle" x="3150.39" y="-3462.3" font-family="Times,serif" font-size="14.00">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge138" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3215.39,-3470.96C3238.24,-3474.76 3263.47,-3481.4 3284.39,-3493 3304.73,-3504.28 3300.18,-3519.48 3320.39,-3531 3339.27,-3541.77 3361.64,-3548.8 3382.72,-3553.39"/>
<polygon fill="black" stroke="black" points="3382.13,-3556.84 3392.63,-3555.39 3383.52,-3549.98 3382.13,-3556.84"/>
</g>
<!-- lot_io.write_lots&#45;&gt;serde_utils.write_json -->
<g id="edge140" class="edge">
<title>lot_io.write_lots&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3215.46,-3468.95C3240.7,-3466.52 3267.61,-3458.76 3284.39,-3439 3353.97,-3357.03 3250.63,-2553.82 3320.39,-2472 3330.93,-2459.64 3345.36,-2451.92 3360.91,-2447.25"/>
<polygon fill="black" stroke="black" points="3361.9,-2450.61 3370.71,-2444.72 3360.15,-2443.83 3361.9,-2450.61"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge137" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3215.53,-3468.66C3322.27,-3472.02 3530.92,-3473.69 3594.39,-3439 3674.7,-3395.1 3725.86,-3292.72 3746.69,-3243.45"/>
<polygon fill="black" stroke="black" points="3749.99,-3244.64 3750.57,-3234.06 3743.52,-3241.97 3749.99,-3244.64"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge139" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M3215.7,-3474.01C3258.77,-3479.38 3316.15,-3486.53 3364.08,-3492.5"/>
<polygon fill="black" stroke="black" points="3363.8,-3495.99 3374.16,-3493.75 3364.67,-3489.05 3363.8,-3495.99"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node108" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node108"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="3528.89,-2517 3385.89,-2517 3385.89,-2481 3528.89,-2481 3528.89,-2517"/>
<text text-anchor="middle" x="3457.39" y="-2495.3" font-family="Times,serif" font-size="14.00">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.embedding_path -->
<g id="node110" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node110"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="178,-36 0,-36 0,0 178,0 178,-36"/>
<text text-anchor="middle" x="89" y="-14.3" font-family="Times,serif" font-size="14.00">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node111" class="node">
<title>testing_mode.apply_testing_mode</title>
<polygon fill="none" stroke="black" points="473,-36 214,-36 214,0 473,0 473,-36"/>
<text text-anchor="middle" x="343.5" y="-14.3" font-family="Times,serif" font-size="14.00">testing_mode.apply_testing_mode</text>
</g>
<!-- lot_io.embedding_path&#45;&gt;testing_mode.apply_testing_mode -->
<!-- testing_mode.apply_testing_mode&#45;&gt;build_site:cli -->
<!-- lot_io.get_lot -->
<g id="node112" class="node">
<title>lot_io.get_lot</title>
<g id="a_node112"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3204.39,-2932 3096.39,-2932 3096.39,-2896 3204.39,-2896 3204.39,-2932"/>
<text text-anchor="middle" x="3150.39" y="-2910.3" font-family="Times,serif" font-size="14.00">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge143" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3204.58,-2900.9C3232.65,-2891.22 3265.17,-2875.06 3284.39,-2849 3346.06,-2765.37 3248.45,-2692.98 3320.39,-2618 3337.01,-2600.67 3361.33,-2592.75 3384.82,-2589.53"/>
<polygon fill="black" stroke="black" points="3385.26,-2593.01 3394.81,-2588.43 3384.49,-2586.05 3385.26,-2593.01"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge144" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3204.51,-2913.6C3231.68,-2910.63 3263.38,-2902.46 3284.39,-2882 3328.56,-2838.97 3274.52,-2789.22 3320.39,-2748 3412.08,-2665.61 3503,-2787.72 3594.39,-2705 3641.38,-2662.46 3584.55,-2610.78 3630.39,-2567 3642.79,-2555.16 3659.03,-2547.97 3675.74,-2543.71"/>
<polygon fill="black" stroke="black" points="3676.6,-2547.11 3685.61,-2541.53 3675.09,-2540.27 3676.6,-2547.11"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge145" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M3842.47,-2492.84C3858.14,-2497.01 3873.6,-2503.37 3886.39,-2513 3971.13,-2576.82 4012.15,-2704.02 4026.82,-2760.66"/>
<polygon fill="black" stroke="black" points="4023.51,-2761.84 4029.34,-2770.69 4030.3,-2760.14 4023.51,-2761.84"/>
</g>
<!-- caption_io.write_caption -->
<g id="node114" class="node">
<title>caption_io.write_caption</title>
<g id="a_node114"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="3245.39,-2120 3055.39,-2120 3055.39,-2084 3245.39,-2084 3245.39,-2120"/>
<text text-anchor="middle" x="3150.39" y="-2098.3" font-family="Times,serif" font-size="14.00">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.load_json -->
<g id="edge155" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3245.44,-2111.3C3337.14,-2117.01 3479.19,-2116.89 3594.39,-2077 3648.61,-2058.23 3701.11,-2015.8 3731.28,-1988.33"/>
<polygon fill="black" stroke="black" points="3733.86,-1990.72 3738.82,-1981.35 3729.11,-1985.58 3733.86,-1990.72"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge154" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3245.63,-2087.6C3269.96,-2084.01 3296.14,-2080.25 3320.39,-2077 3381.17,-2068.85 3551.6,-2087.94 3594.39,-2044 3654.33,-1982.44 3610.56,-1742.61 3630.39,-1659 3657.62,-1544.18 3716.95,-1415.91 3743.75,-1361.15"/>
<polygon fill="black" stroke="black" points="3746.93,-1362.62 3748.22,-1352.1 3740.66,-1359.52 3746.93,-1362.62"/>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.write_json -->
<g id="edge156" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3245.57,-2106.39C3260.13,-2110.95 3273.82,-2118.08 3284.39,-2129 3351.15,-2197.99 3270.61,-2259.9 3320.39,-2342 3341.63,-2377.04 3379.63,-2404.29 3410.07,-2421.93"/>
<polygon fill="black" stroke="black" points="3408.41,-2425.01 3418.84,-2426.88 3411.85,-2418.92 3408.41,-2425.01"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge153" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3245.51,-2105.19C3260.36,-2109.83 3274.15,-2117.29 3284.39,-2129 3363.98,-2220.05 3232.09,-2589.37 3320.39,-2672 3364.84,-2713.61 3546.82,-2710 3594.39,-2672 3651,-2626.78 3578.82,-2563.89 3630.39,-2513 3639.85,-2503.66 3651.69,-2497.19 3664.31,-2492.77"/>
<polygon fill="black" stroke="black" points="3665.56,-2496.05 3674.09,-2489.77 3663.5,-2489.36 3665.56,-2496.05"/>
</g>
<!-- chop.process_message -->
<g id="node115" class="node">
<title>chop.process_message</title>
<polygon fill="none" stroke="black" points="2942.39,-1997 2763.39,-1997 2763.39,-1961 2942.39,-1961 2942.39,-1997"/>
<text text-anchor="middle" x="2852.89" y="-1975.3" font-family="Times,serif" font-size="14.00">chop.process_message</text>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge157" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2875.28,-1997.08C2902.31,-2020.72 2949.08,-2064.42 2980.39,-2109 3001.41,-2138.93 2986.93,-2161.32 3016.39,-2183 3023.61,-2188.32 3251.93,-2221.18 3376.74,-2238.83"/>
<polygon fill="black" stroke="black" points="3376.26,-2242.29 3386.65,-2240.23 3377.24,-2235.36 3376.26,-2242.29"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge158" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M2899.61,-1960.91C2931.71,-1949.22 2975.96,-1935.08 3016.39,-1929 3134.17,-1911.29 3180.95,-1869.94 3284.39,-1929 3311.73,-1944.61 3294.71,-1971.79 3320.39,-1990 3326.33,-1994.21 3332.76,-1997.81 3339.49,-2000.87"/>
<polygon fill="black" stroke="black" points="3338.26,-2004.14 3348.83,-2004.72 3340.93,-1997.67 3338.26,-2004.14"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge162" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M2879.67,-1960.92C2910.51,-1940.49 2964.49,-1908.49 3016.39,-1896 3132.19,-1868.14 3175.58,-1847.54 3284.39,-1896 3306.24,-1905.73 3299.6,-1924.18 3320.39,-1936 3331.04,-1942.06 3342.83,-1946.77 3354.89,-1950.44"/>
<polygon fill="black" stroke="black" points="3354.02,-1953.83 3364.6,-1953.16 3355.91,-1947.09 3354.02,-1953.83"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge164" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2863.68,-1997.07C2888.61,-2044.13 2954.37,-2175.06 2980.39,-2293 2997.21,-2369.27 2967.71,-2933.92 3016.39,-2995 3093.55,-3091.82 3190.09,-2990.78 3284.39,-3071 3313.16,-3095.48 3290.65,-3124.7 3320.39,-3148 3321.99,-3149.25 3323.63,-3150.45 3325.31,-3151.6"/>
<polygon fill="black" stroke="black" points="3323.64,-3154.68 3333.99,-3156.93 3327.3,-3148.72 3323.64,-3154.68"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge161" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2873.56,-1960.57C2902.77,-1931.81 2956.73,-1873.09 2980.39,-1811 3014.85,-1720.57 2948.46,-1445.93 3016.39,-1377 3039.92,-1353.12 3236.27,-1341.81 3358.59,-1337.03"/>
<polygon fill="black" stroke="black" points="3358.87,-1340.52 3368.73,-1336.64 3358.6,-1333.53 3358.87,-1340.52"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge159" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M2942.55,-1972.1C2985.33,-1968.77 3036.03,-1964.82 3076.53,-1961.67"/>
<polygon fill="black" stroke="black" points="3076.89,-1965.15 3086.59,-1960.89 3076.35,-1958.17 3076.89,-1965.15"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge160" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M2919.55,-1997.08C3007.64,-2017.57 3166.6,-2041.15 3284.39,-1983 3307.98,-1971.35 3298.05,-1949.9 3320.39,-1936 3333.93,-1927.58 3349.57,-1921.7 3365.32,-1917.63"/>
<polygon fill="black" stroke="black" points="3366.19,-1921.02 3375.12,-1915.31 3364.58,-1914.2 3366.19,-1921.02"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node116" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node116"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="3564.89,-1872 3349.89,-1872 3349.89,-1836 3564.89,-1836 3564.89,-1872"/>
<text text-anchor="middle" x="3457.39" y="-1850.3" font-family="Times,serif" font-size="14.00">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge163" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M2863.24,-1960.97C2884.38,-1922.47 2940.02,-1832.94 3016.39,-1799 3125.23,-1750.62 3171.72,-1760.34 3284.39,-1799 3303.56,-1805.58 3301.95,-1818.58 3320.39,-1827 3326.64,-1829.86 3333.19,-1832.41 3339.89,-1834.7"/>
<polygon fill="black" stroke="black" points="3339.21,-1838.15 3349.8,-1837.86 3341.34,-1831.48 3339.21,-1838.15"/>
</g>
<!-- embed.embed_file -->
<g id="node117" class="node">
<title>embed.embed_file</title>
<g id="a_node117"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="3223.39,-2710 3077.39,-2710 3077.39,-2674 3223.39,-2674 3223.39,-2710"/>
<text text-anchor="middle" x="3150.39" y="-2688.3" font-family="Times,serif" font-size="14.00">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge165" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M2863.37,-1997.14C2887.56,-2044.38 2951.71,-2175.68 2980.39,-2293 3000.11,-2373.68 2960.79,-2603.3 3016.39,-2665 3029.48,-2679.53 3048.08,-2687.48 3067.22,-2691.58"/>
<polygon fill="black" stroke="black" points="3066.79,-2695.06 3077.25,-2693.39 3068.04,-2688.17 3066.79,-2695.06"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge252" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3223.61,-2686.91C3244.39,-2682.99 3266.31,-2676.3 3284.39,-2665 3306.7,-2651.05 3298.05,-2631.9 3320.39,-2618 3339.53,-2606.09 3362.87,-2599.28 3384.77,-2595.43"/>
<polygon fill="black" stroke="black" points="3385.38,-2598.88 3394.71,-2593.87 3384.29,-2591.97 3385.38,-2598.88"/>
</g>
<!-- embed.embed_file&#45;&gt;serde_utils.write_json -->
<g id="edge254" class="edge">
<title>embed.embed_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M3223.71,-2692.43C3245.85,-2688.95 3268.52,-2681.12 3284.39,-2665 3345.6,-2602.81 3259.05,-2534.06 3320.39,-2472 3331.42,-2460.84 3345.66,-2453.61 3360.76,-2449.03"/>
<polygon fill="black" stroke="black" points="3361.99,-2452.33 3370.77,-2446.4 3360.21,-2445.56 3361.99,-2452.33"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge253" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M3223.68,-2691.58C3245.56,-2688 3268.08,-2680.33 3284.39,-2665 3329.33,-2622.77 3276.1,-2573.92 3320.39,-2531 3335.36,-2516.49 3355.6,-2508.12 3375.89,-2503.4"/>
<polygon fill="black" stroke="black" points="3376.74,-2506.8 3385.84,-2501.36 3375.34,-2499.94 3376.74,-2506.8"/>
</g>
<!-- chop.main -->
<g id="node118" class="node">
<title>chop.main</title>
<g id="a_node118"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="1364.89,-2288 1274.89,-2288 1274.89,-2252 1364.89,-2252 1364.89,-2288"/>
<text text-anchor="middle" x="1319.89" y="-2266.3" font-family="Times,serif" font-size="14.00">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge166" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M1365.12,-2271.2C1451.48,-2273.43 1648.58,-2278 1814.39,-2278 1814.39,-2278 1814.39,-2278 2315.89,-2278 2399.06,-2278 2618.51,-2297.52 2689.39,-2254 2782.37,-2196.91 2828.41,-2065.13 2844.75,-2007.2"/>
<polygon fill="black" stroke="black" points="2848.2,-2007.84 2847.45,-1997.27 2841.45,-2006 2848.2,-2007.84"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node119" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node119"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="3266.39,-3722 3034.39,-3722 3034.39,-3686 3266.39,-3686 3266.39,-3722"/>
<text text-anchor="middle" x="3150.39" y="-3700.3" font-family="Times,serif" font-size="14.00">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge167" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M2952.7,-3668.06C2980.91,-3673.21 3011.81,-3678.86 3040.59,-3684.12"/>
<polygon fill="black" stroke="black" points="3040.21,-3687.61 3050.67,-3685.96 3041.46,-3680.72 3040.21,-3687.61"/>
</g>
<!-- notes_utils.collect_notes -->
<g id="node124" class="node">
<title>notes_utils.collect_notes</title>
<g id="a_node124"><a xlink:title="Return combined notes if ``notes/`` exists.">
<polygon fill="none" stroke="black" points="3552.89,-2793 3361.89,-2793 3361.89,-2757 3552.89,-2757 3552.89,-2793"/>
<text text-anchor="middle" x="3457.39" y="-2771.3" font-family="Times,serif" font-size="14.00">notes_utils.collect_notes</text>
</a>
</g>
</g>
<!-- notes_utils.collect_notes&#45;&gt;serde_utils.read_md -->
<g id="edge173" class="edge">
<title>notes_utils.collect_notes&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3553.2,-2759.29C3567.45,-2755.07 3581.63,-2749.74 3594.39,-2743 3653.62,-2711.73 3707.91,-2653.75 3736.43,-2620.08"/>
<polygon fill="black" stroke="black" points="3739.39,-2621.99 3743.11,-2612.07 3734.02,-2617.51 3739.39,-2621.99"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node125" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node125"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="3239.89,-1476 3060.89,-1476 3060.89,-1440 3239.89,-1440 3239.89,-1476"/>
<text text-anchor="middle" x="3150.39" y="-1454.3" font-family="Times,serif" font-size="14.00">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node126" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node126"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="3594.39,-1222 3320.39,-1222 3320.39,-1186 3594.39,-1186 3594.39,-1222"/>
<text text-anchor="middle" x="3457.39" y="-1200.3" font-family="Times,serif" font-size="14.00">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node127" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node127"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="3265.39,-1568 3035.39,-1568 3035.39,-1532 3265.39,-1532 3265.39,-1568"/>
<text text-anchor="middle" x="3150.39" y="-1546.3" font-family="Times,serif" font-size="14.00">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;serde_utils.load_json -->
<g id="edge175" class="edge">
<title>debug_dump.load_source_info&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3258.79,-1568.01C3267.86,-1571.82 3276.55,-1576.43 3284.39,-1582 3308.51,-1599.14 3295.74,-1621.63 3320.39,-1638 3423.36,-1706.42 3492.78,-1615.56 3594.39,-1686 3684.4,-1748.4 3732.2,-1877.95 3749.61,-1935"/>
<polygon fill="black" stroke="black" points="3746.31,-1936.18 3752.51,-1944.78 3753.02,-1934.19 3746.31,-1936.18"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge174" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3265.39,-1560.47C3300.05,-1563.65 3337.55,-1567.09 3370.06,-1570.08"/>
<polygon fill="black" stroke="black" points="3370.16,-1573.6 3380.43,-1571.03 3370.8,-1566.63 3370.16,-1573.6"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node128" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node128"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="3859.39,-1704 3657.39,-1704 3657.39,-1668 3859.39,-1668 3859.39,-1704"/>
<text text-anchor="middle" x="3758.39" y="-1682.3" font-family="Times,serif" font-size="14.00">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text -->
<g id="edge176" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3781.81,-1704.25C3830.8,-1744.12 3947.45,-1839.06 4002.99,-1884.26"/>
<polygon fill="black" stroke="black" points="4001.07,-1887.21 4011.04,-1890.81 4005.49,-1881.78 4001.07,-1887.21"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node129" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node129"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="3247.89,-1422 3052.89,-1422 3052.89,-1386 3247.89,-1386 3247.89,-1422"/>
<text text-anchor="middle" x="3150.39" y="-1400.3" font-family="Times,serif" font-size="14.00">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge177" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3215.78,-1385.94C3240.61,-1375.91 3267.13,-1360.9 3284.39,-1339 3330.04,-1281.07 3296.72,-1246.86 3320.39,-1177 3354.79,-1075.45 3413.65,-962.17 3441.26,-911.31"/>
<polygon fill="black" stroke="black" points="3444.47,-912.73 3446.19,-902.28 3438.33,-909.38 3444.47,-912.73"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge181" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3248.15,-1408.11C3261.97,-1412.78 3274.75,-1420.03 3284.39,-1431 3358.64,-1515.52 3245.95,-1851.64 3320.39,-1936 3329.68,-1946.53 3341.8,-1953.66 3354.98,-1958.4"/>
<polygon fill="black" stroke="black" points="3354.14,-1961.81 3364.73,-1961.44 3356.23,-1955.12 3354.14,-1961.81"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.load_json -->
<g id="edge183" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3248.07,-1412.41C3261.17,-1416.64 3273.74,-1422.62 3284.39,-1431 3314.07,-1454.37 3290.19,-1485.3 3320.39,-1508 3418.92,-1582.07 3504.52,-1466.62 3594.39,-1551 3648.16,-1601.49 3605.49,-1643.57 3630.39,-1713 3660.92,-1798.13 3714.02,-1891.37 3740.86,-1936.11"/>
<polygon fill="black" stroke="black" points="3738,-1938.15 3746.17,-1944.9 3743.99,-1934.53 3738,-1938.15"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.read_text -->
<g id="edge182" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3248.08,-1412.35C3402.33,-1430.6 3705.09,-1487.29 3886.39,-1659 3956.16,-1725.08 4003.6,-1831.58 4023.23,-1881.51"/>
<polygon fill="black" stroke="black" points="4020.02,-1882.92 4026.89,-1890.99 4026.55,-1880.4 4020.02,-1882.92"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge179" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3247.96,-1396.51C3337.84,-1389.1 3475.44,-1376.61 3594.39,-1361 3610.79,-1358.85 3628.08,-1356.29 3645.02,-1353.63"/>
<polygon fill="black" stroke="black" points="3645.62,-1357.08 3654.94,-1352.05 3644.52,-1350.17 3645.62,-1357.08"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge180" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3229.93,-1385.97C3272.19,-1376.28 3324.43,-1364.28 3368.09,-1354.26"/>
<polygon fill="black" stroke="black" points="3368.88,-1357.67 3377.84,-1352.03 3367.31,-1350.85 3368.88,-1357.67"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge178" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3248.11,-1410.82C3261.44,-1415.24 3274.06,-1421.69 3284.39,-1431 3324.16,-1466.87 3281.17,-1509.52 3320.39,-1546 3334.24,-1558.88 3352.27,-1566.89 3370.65,-1571.79"/>
<polygon fill="black" stroke="black" points="3370.04,-1575.24 3380.57,-1574.14 3371.65,-1568.43 3370.04,-1575.24"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node130" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node130"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="3246.89,-1330 3053.89,-1330 3053.89,-1294 3246.89,-1294 3246.89,-1330"/>
<text text-anchor="middle" x="3150.39" y="-1308.3" font-family="Times,serif" font-size="14.00">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge184" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3208.41,-1293.97C3234.16,-1283.54 3263.43,-1268.21 3284.39,-1247 3290.9,-1240.41 3405.2,-994.45 3443.79,-911.21"/>
<polygon fill="black" stroke="black" points="3446.97,-912.66 3448,-902.12 3440.62,-909.72 3446.97,-912.66"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;serde_utils.load_json -->
<g id="edge188" class="edge">
<title>debug_dump.delete_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3188.3,-1330.08C3234,-1352.44 3307.42,-1388.26 3320.39,-1394 3440.38,-1447.12 3511.89,-1401.95 3594.39,-1504 3653.64,-1577.3 3600.71,-1623.54 3630.39,-1713 3658.85,-1798.81 3712.85,-1891.68 3740.36,-1936.21"/>
<polygon fill="black" stroke="black" points="3737.39,-1938.07 3745.65,-1944.71 3743.33,-1934.37 3737.39,-1938.07"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge186" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3247.06,-1305.78C3336.9,-1301.16 3475,-1297.18 3594.39,-1307 3614.07,-1308.62 3634.96,-1311.32 3654.99,-1314.41"/>
<polygon fill="black" stroke="black" points="3654.63,-1317.89 3665.05,-1316 3655.72,-1310.98 3654.63,-1317.89"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge185" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3204.21,-1330.13C3230.34,-1340.91 3261.16,-1356.51 3284.39,-1377 3306.3,-1396.33 3302.37,-1409.01 3320.39,-1432 3355.5,-1476.8 3401.57,-1524.24 3430.06,-1552.47"/>
<polygon fill="black" stroke="black" points="3427.68,-1555.04 3437.26,-1559.57 3432.59,-1550.05 3427.68,-1555.04"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge187" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3247.08,-1302.21C3353.83,-1291.29 3526.56,-1273.62 3641.04,-1261.9"/>
<polygon fill="black" stroke="black" points="3641.66,-1265.36 3651.25,-1260.86 3640.94,-1258.4 3641.66,-1265.36"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node131" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node131"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="3876.39,-948 3640.39,-948 3640.39,-912 3876.39,-912 3876.39,-948"/>
<text text-anchor="middle" x="3758.39" y="-926.3" font-family="Times,serif" font-size="14.00">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge189" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3876.78,-930C3888.46,-930 3900.34,-930 3912.06,-930"/>
<polygon fill="black" stroke="black" points="3912.32,-933.5 3922.32,-930 3912.32,-926.5 3912.32,-933.5"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node132" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node132"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="3854.89,-1100 3661.89,-1100 3661.89,-1064 3854.89,-1064 3854.89,-1100"/>
<text text-anchor="middle" x="3758.39" y="-1078.3" font-family="Times,serif" font-size="14.00">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node133" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node133"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="3284.39,-1184 3016.39,-1184 3016.39,-1148 3284.39,-1148 3284.39,-1184"/>
<text text-anchor="middle" x="3150.39" y="-1162.3" font-family="Times,serif" font-size="14.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge190" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3275.1,-1184.04C3278.44,-1186.71 3281.56,-1189.68 3284.39,-1193 3345.82,-1264.99 3291.26,-1953.95 3320.39,-2044 3343.81,-2116.4 3400.17,-2187.48 3432.51,-2224.23"/>
<polygon fill="black" stroke="black" points="3430.14,-2226.83 3439.41,-2231.96 3435.37,-2222.17 3430.14,-2226.83"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge191" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3173.6,-1147.99C3202.86,-1123.17 3254.15,-1075.73 3284.39,-1025 3310.51,-981.18 3282.76,-950.46 3320.39,-916 3331.61,-905.72 3345.51,-898.56 3360.09,-893.6"/>
<polygon fill="black" stroke="black" points="3361.2,-896.92 3369.75,-890.65 3359.16,-890.22 3361.2,-896.92"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;serde_utils.load_json -->
<g id="edge195" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3273.54,-1184.08C3277.4,-1186.72 3281.04,-1189.69 3284.39,-1193 3338.67,-1246.7 3263.99,-1309.52 3320.39,-1361 3410.98,-1443.69 3507.98,-1306.94 3594.39,-1394 3644.64,-1444.63 3609.91,-1644.66 3630.39,-1713 3656.34,-1799.6 3711.47,-1892.11 3739.79,-1936.39"/>
<polygon fill="black" stroke="black" points="3736.88,-1938.34 3745.24,-1944.84 3742.76,-1934.54 3736.88,-1938.34"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge192" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3273.97,-1184.14C3277.68,-1186.77 3281.18,-1189.71 3284.39,-1193 3347.82,-1257.91 3284.47,-1310.65 3320.39,-1394 3347.6,-1457.16 3400.2,-1519.04 3431.41,-1552.49"/>
<polygon fill="black" stroke="black" points="3429.07,-1555.11 3438.48,-1559.97 3434.16,-1550.3 3429.07,-1555.11"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge193" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M3181.13,-1147.93C3214.29,-1128.28 3269.9,-1096.77 3320.39,-1075 3443.67,-1021.83 3593.28,-976.02 3681.62,-950.79"/>
<polygon fill="black" stroke="black" points="3682.63,-954.14 3691.29,-948.04 3680.71,-947.41 3682.63,-954.14"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge194" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M3191.07,-1147.91C3224.72,-1133.49 3274.68,-1114.24 3320.39,-1105 3431.89,-1082.46 3562.45,-1078.42 3651.63,-1078.95"/>
<polygon fill="black" stroke="black" points="3651.73,-1082.45 3661.76,-1079.03 3651.79,-1075.45 3651.73,-1082.45"/>
</g>
<!-- debug_dump.main -->
<g id="node134" class="node">
<title>debug_dump.main</title>
<polygon fill="none" stroke="black" points="2926.89,-1449 2778.89,-1449 2778.89,-1413 2926.89,-1413 2926.89,-1449"/>
<text text-anchor="middle" x="2852.89" y="-1427.3" font-family="Times,serif" font-size="14.00">debug_dump.main</text>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge196" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M2926.93,-1437.67C2964.27,-1441.09 3010.25,-1445.29 3050.7,-1448.98"/>
<polygon fill="black" stroke="black" points="3050.58,-1452.49 3060.86,-1449.91 3051.22,-1445.52 3050.58,-1452.49"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge197" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M2867.7,-1412.96C2893.2,-1381.13 2951.08,-1315.46 3016.39,-1285 3125.41,-1234.15 3166.32,-1270.06 3284.39,-1247 3316.28,-1240.77 3351.12,-1232.37 3381.05,-1224.64"/>
<polygon fill="black" stroke="black" points="3382.2,-1227.96 3391,-1222.05 3380.44,-1221.18 3382.2,-1227.96"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge198" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M2882.18,-1449.04C2913.8,-1468.5 2967.04,-1499.21 3016.39,-1518 3027.31,-1522.16 3038.95,-1525.9 3050.63,-1529.24"/>
<polygon fill="black" stroke="black" points="3049.86,-1532.65 3060.43,-1531.94 3051.72,-1525.91 3049.86,-1532.65"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge199" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M2900.88,-1449.12C2932.99,-1460.87 2976.74,-1475.68 3016.39,-1485 3133.5,-1512.52 3188.54,-1450.29 3284.39,-1523 3316.1,-1547.06 3288.43,-1581.28 3320.39,-1605 3369.63,-1641.55 3534.32,-1625.63 3594.39,-1638 3627.87,-1644.9 3664.45,-1655.39 3694.45,-1664.8"/>
<polygon fill="black" stroke="black" points="3693.77,-1668.26 3704.36,-1667.95 3695.89,-1661.59 3693.77,-1668.26"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge200" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M2926.93,-1424.33C2961.76,-1421.14 3004.11,-1417.27 3042.47,-1413.77"/>
<polygon fill="black" stroke="black" points="3043.01,-1417.23 3052.65,-1412.84 3042.37,-1410.26 3043.01,-1417.23"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge201" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M2882.18,-1412.96C2913.8,-1393.5 2967.04,-1362.79 3016.39,-1344 3027.31,-1339.84 3038.95,-1336.1 3050.63,-1332.76"/>
<polygon fill="black" stroke="black" points="3051.72,-1336.09 3060.43,-1330.06 3049.86,-1329.35 3051.72,-1336.09"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge202" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M2860.62,-1412.85C2878.39,-1367.64 2931.14,-1249.58 3016.39,-1193 3018.7,-1191.46 3021.08,-1190.01 3023.52,-1188.64"/>
<polygon fill="black" stroke="black" points="3025.27,-1191.68 3032.58,-1184.02 3022.09,-1185.45 3025.27,-1191.68"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node135" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node135"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="3254.89,-2986 3045.89,-2986 3045.89,-2950 3254.89,-2950 3254.89,-2986"/>
<text text-anchor="middle" x="3150.39" y="-2964.3" font-family="Times,serif" font-size="14.00">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- serde_utils.parse_md -->
<g id="node136" class="node">
<title>serde_utils.parse_md</title>
<g id="a_node136"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="3541.39,-2993 3373.39,-2993 3373.39,-2957 3541.39,-2957 3541.39,-2993"/>
<text text-anchor="middle" x="3457.39" y="-2971.3" font-family="Times,serif" font-size="14.00">serde_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;serde_utils.parse_md -->
<g id="edge203" class="edge">
<title>image_io.read_image_meta&#45;&gt;serde_utils.parse_md</title>
<path fill="none" stroke="black" d="M3255.07,-2970.38C3289.97,-2971.18 3328.69,-2972.07 3362.77,-2972.85"/>
<polygon fill="black" stroke="black" points="3363.11,-2976.36 3373.18,-2973.09 3363.27,-2969.36 3363.11,-2976.36"/>
</g>
<!-- serde_utils.parse_md&#45;&gt;serde_utils.read_md -->
<g id="edge263" class="edge">
<title>serde_utils.parse_md&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3541.44,-2973.63C3560.91,-2969.52 3580.11,-2961.8 3594.39,-2948 3644.92,-2899.14 3603.16,-2858.8 3630.39,-2794 3658.56,-2726.95 3708.4,-2657.1 3736.54,-2620.32"/>
<polygon fill="black" stroke="black" points="3739.53,-2622.18 3742.87,-2612.13 3733.98,-2617.9 3739.53,-2622.18"/>
</g>
<!-- clean_data._parse_date -->
<g id="node137" class="node">
<title>clean_data._parse_date</title>
<g id="a_node137"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="3548.39,-1764 3366.39,-1764 3366.39,-1728 3548.39,-1728 3548.39,-1764"/>
<text text-anchor="middle" x="3457.39" y="-1742.3" font-family="Times,serif" font-size="14.00">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;serde_utils.read_text -->
<g id="edge205" class="edge">
<title>clean_data._parse_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3548.67,-1762.55C3563.99,-1765.75 3579.69,-1769.27 3594.39,-1773 3730.72,-1807.55 3887.44,-1859 3971.84,-1887.7"/>
<polygon fill="black" stroke="black" points="3970.92,-1891.08 3981.52,-1891 3973.18,-1884.46 3970.92,-1891.08"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node138" class="node">
<title>clean_data._clean_raw</title>
<polygon fill="none" stroke="black" points="3237.89,-1660 3062.89,-1660 3062.89,-1624 3237.89,-1624 3237.89,-1660"/>
<text text-anchor="middle" x="3150.39" y="-1638.3" font-family="Times,serif" font-size="14.00">clean_data._clean_raw</text>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge206" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3219.99,-1623.89C3244.2,-1614.01 3269.16,-1599.12 3284.39,-1577 3335,-1503.49 3297.26,-1263.2 3320.39,-1177 3348.23,-1073.23 3410.56,-960.69 3440.17,-910.61"/>
<polygon fill="black" stroke="black" points="3443.19,-912.39 3445.31,-902.01 3437.18,-908.8 3443.19,-912.39"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge207" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3238.05,-1650.52C3254.22,-1654.58 3270.41,-1660.47 3284.39,-1669 3306.25,-1682.35 3298.74,-1700.32 3320.39,-1714 3331.42,-1720.97 3343.82,-1726.42 3356.52,-1730.69"/>
<polygon fill="black" stroke="black" points="3355.69,-1734.1 3366.28,-1733.73 3357.77,-1727.41 3355.69,-1734.1"/>
</g>
<!-- clean_data._clean_media -->
<g id="node139" class="node">
<title>clean_data._clean_media</title>
<polygon fill="none" stroke="black" points="3245.89,-1714 3054.89,-1714 3054.89,-1678 3245.89,-1678 3245.89,-1714"/>
<text text-anchor="middle" x="3150.39" y="-1692.3" font-family="Times,serif" font-size="14.00">clean_data._clean_media</text>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge208" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3246.14,-1689.91C3260.2,-1685.47 3273.58,-1678.82 3284.39,-1669 3324.97,-1632.13 3297.63,-1600.89 3320.39,-1551 3353.67,-1478.04 3407.56,-1400.18 3436.5,-1360.53"/>
<polygon fill="black" stroke="black" points="3439.51,-1362.34 3442.62,-1352.21 3433.88,-1358.19 3439.51,-1362.34"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge209" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3246.22,-1711.55C3281.22,-1717.28 3320.98,-1723.8 3356.43,-1729.61"/>
<polygon fill="black" stroke="black" points="3355.87,-1733.07 3366.31,-1731.23 3357,-1726.16 3355.87,-1733.07"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node140" class="node">
<title>clean_data._clean_lots</title>
<polygon fill="none" stroke="black" points="3237.39,-1844 3063.39,-1844 3063.39,-1808 3237.39,-1808 3237.39,-1844"/>
<text text-anchor="middle" x="3150.39" y="-1822.3" font-family="Times,serif" font-size="14.00">clean_data._clean_lots</text>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge210" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3189.71,-1807.88C3221.13,-1790.77 3263.68,-1761.93 3284.39,-1723 3341.49,-1615.64 3290.28,-1294.81 3320.39,-1177 3346.92,-1073.16 3409.63,-961.08 3439.72,-910.92"/>
<polygon fill="black" stroke="black" points="3442.75,-912.66 3444.94,-902.29 3436.77,-909.04 3442.75,-912.66"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge212" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3189.76,-1844.09C3221.22,-1861.18 3263.79,-1890.01 3284.39,-1929 3346.47,-2046.52 3246.16,-2415.75 3320.39,-2526 3335.55,-2548.52 3360.76,-2563.46 3385.38,-2573.27"/>
<polygon fill="black" stroke="black" points="3384.18,-2576.56 3394.77,-2576.78 3386.63,-2570 3384.18,-2576.56"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge211" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M3237.53,-1842.29C3253.42,-1846.53 3269.64,-1851.72 3284.39,-1858 3301.86,-1865.43 3302.8,-1873.86 3320.39,-1881 3334.49,-1886.73 3349.92,-1891.34 3365.15,-1895.03"/>
<polygon fill="black" stroke="black" points="3364.59,-1898.49 3375.12,-1897.32 3366.16,-1891.67 3364.59,-1898.49"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node141" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node141"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="3267.89,-2174 3032.89,-2174 3032.89,-2138 3267.89,-2138 3267.89,-2174"/>
<text text-anchor="middle" x="3150.39" y="-2152.3" font-family="Times,serif" font-size="14.00">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node142" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node142"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="3578.89,-1818 3335.89,-1818 3335.89,-1782 3578.89,-1782 3578.89,-1818"/>
<text text-anchor="middle" x="3457.39" y="-1796.3" font-family="Times,serif" font-size="14.00">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node143" class="node">
<title>clean_data.main</title>
<polygon fill="none" stroke="black" points="2918.89,-1802 2786.89,-1802 2786.89,-1766 2918.89,-1766 2918.89,-1802"/>
<text text-anchor="middle" x="2852.89" y="-1780.3" font-family="Times,serif" font-size="14.00">clean_data.main</text>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge213" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M2873.74,-1765.71C2902.78,-1739.99 2959.6,-1693.55 3016.39,-1669 3027.82,-1664.06 3040.2,-1660 3052.66,-1656.68"/>
<polygon fill="black" stroke="black" points="3053.8,-1660.01 3062.64,-1654.18 3052.09,-1653.22 3053.8,-1660.01"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge214" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M2902.21,-1765.99C2934.32,-1754.35 2977.57,-1739.33 3016.39,-1728 3030.09,-1724 3044.7,-1720.11 3059.02,-1716.51"/>
<polygon fill="black" stroke="black" points="3060.02,-1719.87 3068.88,-1714.06 3058.33,-1713.07 3060.02,-1719.87"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge215" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M2919.1,-1793.27C2958.44,-1798.86 3009.28,-1806.09 3053.18,-1812.33"/>
<polygon fill="black" stroke="black" points="3052.91,-1815.82 3063.3,-1813.76 3053.89,-1808.89 3052.91,-1815.82"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge216" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M2872.19,-1802.33C2900.1,-1831.41 2952.96,-1891.08 2980.39,-1952 3013.34,-2025.2 2959.61,-2072.25 3016.39,-2129 3018.92,-2131.53 3021.63,-2133.86 3024.47,-2136"/>
<polygon fill="black" stroke="black" points="3022.55,-2138.93 3032.82,-2141.53 3026.42,-2133.09 3022.55,-2138.93"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge217" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M2918.98,-1775.13C2948.63,-1771.52 2984.22,-1767.78 3016.39,-1766 3135.32,-1759.43 3165.84,-1754.4 3284.39,-1766 3285.45,-1766.1 3318.77,-1772.68 3355.8,-1780.02"/>
<polygon fill="black" stroke="black" points="3355.3,-1783.49 3365.79,-1782 3356.67,-1776.62 3355.3,-1783.49"/>
</g>
<!-- telegram_bot._t -->
<g id="node144" class="node">
<title>telegram_bot._t</title>
<g id="a_node144"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="2916.89,-4090 2788.89,-4090 2788.89,-4054 2916.89,-4054 2916.89,-4090"/>
<text text-anchor="middle" x="2852.89" y="-4068.3" font-family="Times,serif" font-size="14.00">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node145" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node145"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="2961.39,-4036 2744.39,-4036 2744.39,-4000 2961.39,-4000 2961.39,-4036"/>
<text text-anchor="middle" x="2852.89" y="-4014.3" font-family="Times,serif" font-size="14.00">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node146" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node146"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="3254.39,-3998 3046.39,-3998 3046.39,-3962 3254.39,-3962 3254.39,-3998"/>
<text text-anchor="middle" x="3150.39" y="-3976.3" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge218" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2961.41,-4004.17C2985.77,-4001.04 3011.72,-3997.7 3036.31,-3994.54"/>
<polygon fill="black" stroke="black" points="3036.91,-3997.99 3046.39,-3993.25 3036.02,-3991.05 3036.91,-3997.99"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node147" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node147"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="2678.89,-2629 2472.89,-2629 2472.89,-2593 2678.89,-2593 2678.89,-2629"/>
<text text-anchor="middle" x="2575.89" y="-2607.3" font-family="Times,serif" font-size="14.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;serde_utils.read_text -->
<g id="edge219" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2679.09,-2600.46C2784.27,-2592.09 2938.51,-2587.48 2980.39,-2627 3040.15,-2683.4 2956.16,-2939.1 3016.39,-2995 3115.44,-3086.94 3185.25,-3000.44 3320.39,-3002 3575.82,-3004.94 3723.01,-3098.38 3886.39,-2902 3918.36,-2863.57 4011.14,-2096.04 4030.01,-1937.5"/>
<polygon fill="black" stroke="black" points="4033.54,-1937.5 4031.24,-1927.16 4026.59,-1936.67 4033.54,-1937.5"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node148" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node148"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="2669.89,-3277 2481.89,-3277 2481.89,-3241 2669.89,-3241 2669.89,-3277"/>
<text text-anchor="middle" x="2575.89" y="-3255.3" font-family="Times,serif" font-size="14.00">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;serde_utils.read_text -->
<g id="edge220" class="edge">
<title>telegram_bot.load_state&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2669.96,-3265.06C2954.64,-3282.61 3799.7,-3327.11 3886.39,-3243 3924.85,-3205.68 3916.93,-2815.32 3922.39,-2762 3955.67,-2437.04 4013.11,-2044.65 4029.13,-1937.3"/>
<polygon fill="black" stroke="black" points="4032.62,-1937.67 4030.63,-1927.26 4025.69,-1936.64 4032.62,-1937.67"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node149" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="2948.39,-2672 2757.39,-2672 2757.39,-2636 2948.39,-2636 2948.39,-2672"/>
<text text-anchor="middle" x="2852.89" y="-2650.3" font-family="Times,serif" font-size="14.00">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node150" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node150"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="3271.39,-2380 3029.39,-2380 3029.39,-2344 3271.39,-2344 3271.39,-2380"/>
<text text-anchor="middle" x="3150.39" y="-2358.3" font-family="Times,serif" font-size="14.00">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge221" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M3268.44,-2343.96C3288.34,-2340.9 3309.1,-2337.7 3329.25,-2334.59"/>
<polygon fill="black" stroke="black" points="3330.05,-2338.01 3339.4,-2333.03 3328.98,-2331.09 3330.05,-2338.01"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node151" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="3266.89,-3430 3033.89,-3430 3033.89,-3394 3266.89,-3394 3266.89,-3430"/>
<text text-anchor="middle" x="3150.39" y="-3408.3" font-family="Times,serif" font-size="14.00">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge222" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3267.13,-3412C3298.18,-3412 3331.4,-3412 3361.2,-3412"/>
<polygon fill="black" stroke="black" points="3361.59,-3415.5 3371.59,-3412 3361.59,-3408.5 3361.59,-3415.5"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node152" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="2972.89,-3484 2732.89,-3484 2732.89,-3448 2972.89,-3448 2972.89,-3484"/>
<text text-anchor="middle" x="2852.89" y="-3462.3" font-family="Times,serif" font-size="14.00">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge223" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2916.54,-3484.13C2940.22,-3494.15 2965.12,-3509.13 2980.39,-3531 3055.23,-3638.22 2963.94,-3703.22 3016.39,-3823 3040.03,-3877 3088.46,-3926.62 3119.89,-3955.06"/>
<polygon fill="black" stroke="black" points="3117.69,-3957.8 3127.49,-3961.83 3122.35,-3952.57 3117.69,-3957.8"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge224" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M2952.7,-3447.94C2980.91,-3442.79 3011.81,-3437.14 3040.59,-3431.88"/>
<polygon fill="black" stroke="black" points="3041.46,-3435.28 3050.67,-3430.04 3040.21,-3428.39 3041.46,-3435.28"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node153" class="node">
<title>telegram_bot._send_queue</title>
<polygon fill="none" stroke="black" points="2955.89,-3338 2749.89,-3338 2749.89,-3302 2955.89,-3302 2955.89,-3338"/>
<text text-anchor="middle" x="2852.89" y="-3316.3" font-family="Times,serif" font-size="14.00">telegram_bot._send_queue</text>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge225" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M2855.82,-3301.86C2863.37,-3240.38 2896.72,-3038.37 3016.39,-2941 3035.82,-2925.19 3062.05,-2917.86 3086.08,-2914.68"/>
<polygon fill="black" stroke="black" points="3086.66,-2918.14 3096.21,-2913.57 3085.89,-2911.18 3086.66,-2918.14"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge226" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2917.65,-3338.1C2941.2,-3348.07 2965.71,-3363.03 2980.39,-3385 3034.65,-3466.2 2979.04,-3732.76 3016.39,-3823 3038.93,-3877.47 3087.67,-3926.95 3119.47,-3955.24"/>
<polygon fill="black" stroke="black" points="3117.33,-3958.02 3127.17,-3961.97 3121.94,-3952.75 3117.33,-3958.02"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node154" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node154"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="2409.89,-2629 2219.89,-2629 2219.89,-2593 2409.89,-2593 2409.89,-2629"/>
<text text-anchor="middle" x="2314.89" y="-2607.3" font-family="Times,serif" font-size="14.00">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge227" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2410.13,-2611C2427.17,-2611 2445.1,-2611 2462.61,-2611"/>
<polygon fill="black" stroke="black" points="2462.85,-2614.5 2472.85,-2611 2462.85,-2607.5 2462.85,-2614.5"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node155" class="node">
<title>telegram_bot.start_cmd</title>
<polygon fill="none" stroke="black" points="2669.39,-4063 2482.39,-4063 2482.39,-4027 2669.39,-4027 2669.39,-4063"/>
<text text-anchor="middle" x="2575.89" y="-4041.3" font-family="Times,serif" font-size="14.00">telegram_bot.start_cmd</text>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge228" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2669.61,-4054.1C2705.08,-4057.59 2745.01,-4061.51 2778.44,-4064.79"/>
<polygon fill="black" stroke="black" points="2778.29,-4068.29 2788.59,-4065.79 2778.98,-4061.32 2778.29,-4068.29"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge229" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2669.61,-4035.9C2690.34,-4033.86 2712.59,-4031.68 2734.18,-4029.56"/>
<polygon fill="black" stroke="black" points="2734.77,-4033.02 2744.38,-4028.56 2734.09,-4026.05 2734.77,-4033.02"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node156" class="node">
<title>telegram_bot.lang_cmd</title>
<polygon fill="none" stroke="black" points="2667.39,-4009 2484.39,-4009 2484.39,-3973 2667.39,-3973 2667.39,-4009"/>
<text text-anchor="middle" x="2575.89" y="-3987.3" font-family="Times,serif" font-size="14.00">telegram_bot.lang_cmd</text>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge230" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2666.77,-4009.03C2674.57,-4011.65 2682.21,-4014.62 2689.39,-4018 2707.49,-4026.51 2707.18,-4036.72 2725.39,-4045 2742.03,-4052.57 2760.88,-4058.06 2778.86,-4062.02"/>
<polygon fill="black" stroke="black" points="2778.23,-4065.46 2788.73,-4064.07 2779.65,-4058.61 2778.23,-4065.46"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge231" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2667.69,-3999.92C2688.86,-4001.99 2711.7,-4004.24 2733.85,-4006.41"/>
<polygon fill="black" stroke="black" points="2733.68,-4009.91 2743.97,-4007.4 2734.36,-4002.94 2733.68,-4009.91"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge232" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2667.6,-3989.26C2767.33,-3987.34 2927.71,-3984.26 3035.74,-3982.18"/>
<polygon fill="black" stroke="black" points="3036.1,-3985.68 3046.03,-3981.99 3035.96,-3978.68 3036.1,-3985.68"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node157" class="node">
<title>telegram_bot.vote_callback</title>
<polygon fill="none" stroke="black" points="2681.39,-4117 2470.39,-4117 2470.39,-4081 2681.39,-4081 2681.39,-4117"/>
<text text-anchor="middle" x="2575.89" y="-4095.3" font-family="Times,serif" font-size="14.00">telegram_bot.vote_callback</text>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge233" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2681.64,-4088.72C2713.95,-4085.54 2748.83,-4082.12 2778.55,-4079.2"/>
<polygon fill="black" stroke="black" points="2779.23,-4082.65 2788.84,-4078.19 2778.54,-4075.68 2779.23,-4082.65"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge234" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2666.77,-4080.97C2674.57,-4078.35 2682.21,-4075.38 2689.39,-4072 2707.49,-4063.49 2707.18,-4053.28 2725.39,-4045 2729.82,-4042.98 2734.4,-4041.12 2739.09,-4039.39"/>
<polygon fill="black" stroke="black" points="2740.51,-4042.6 2748.82,-4036.02 2738.23,-4035.98 2740.51,-4042.6"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge235" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2681.5,-4116.01C2764.55,-4125.51 2882.55,-4129.99 2980.39,-4099 3038.41,-4080.62 3093.74,-4034.35 3124.47,-4005.22"/>
<polygon fill="black" stroke="black" points="3126.97,-4007.67 3131.74,-3998.21 3122.11,-4002.63 3126.97,-4007.67"/>
</g>
<!-- telegram_bot.main -->
<g id="node158" class="node">
<title>telegram_bot.main</title>
<polygon fill="none" stroke="black" points="2390.39,-2683 2239.39,-2683 2239.39,-2647 2390.39,-2647 2390.39,-2683"/>
<text text-anchor="middle" x="2314.89" y="-2661.3" font-family="Times,serif" font-size="14.00">telegram_bot.main</text>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge236" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2390.45,-2649.45C2417.86,-2643.74 2449.29,-2637.19 2478.35,-2631.13"/>
<polygon fill="black" stroke="black" points="2479.45,-2634.47 2488.52,-2629.01 2478.02,-2627.62 2479.45,-2634.47"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge237" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M2315.34,-2683.19C2314.08,-2758.31 2319.07,-3048.05 2462.39,-3212 2471.36,-3222.26 2482.93,-3230.33 2495.23,-3236.67"/>
<polygon fill="black" stroke="black" points="2493.75,-3239.84 2504.28,-3240.98 2496.76,-3233.52 2493.75,-3239.84"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge238" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M2390.42,-2663.47C2483.12,-2661.57 2641.95,-2658.31 2746.93,-2656.15"/>
<polygon fill="black" stroke="black" points="2747.31,-2659.65 2757.24,-2655.94 2747.17,-2652.65 2747.31,-2659.65"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge239" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M2390.5,-2654.82C2403.2,-2650.9 2415.71,-2645.48 2426.39,-2638 2450.01,-2621.45 2439.54,-2601.61 2462.39,-2584 2668.57,-2425.11 2766.46,-2466.75 3016.39,-2394 3030.1,-2390.01 3044.7,-2386.13 3059.03,-2382.52"/>
<polygon fill="black" stroke="black" points="3060.03,-2385.88 3068.89,-2380.08 3058.34,-2379.09 3060.03,-2385.88"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge240" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M2317.62,-2683.1C2327.14,-2778.93 2375.74,-3226.58 2462.39,-3330 2526.5,-3406.52 2636.26,-3440.03 2722.95,-3454.69"/>
<polygon fill="black" stroke="black" points="2722.44,-3458.15 2732.87,-3456.3 2723.56,-3451.24 2722.44,-3458.15"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge241" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M2317.36,-2683C2325.38,-2776.28 2366.98,-3203.48 2462.39,-3286 2543.83,-3356.44 2673.9,-3352.64 2761.06,-3339.55"/>
<polygon fill="black" stroke="black" points="2761.61,-3343.01 2770.94,-3338 2760.52,-3336.1 2761.61,-3343.01"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node159" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node159"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="4144.89,-3166 3923.89,-3166 3923.89,-3130 4144.89,-3130 4144.89,-3166"/>
<text text-anchor="middle" x="4034.39" y="-3144.3" font-family="Times,serif" font-size="14.00">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge243" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3839.3,-3129.99C3857.67,-3122.01 3875.1,-3110.52 3886.39,-3094 3924.38,-3038.37 3917.48,-1949.18 3922.39,-1882 3949.15,-1515.45 4012.36,-1072.73 4029.2,-958.15"/>
<polygon fill="black" stroke="black" points="4032.69,-958.5 4030.69,-948.1 4025.76,-957.48 4032.69,-958.5"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge242" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M3886.76,-3148C3895.6,-3148 3904.49,-3148 3913.29,-3148"/>
<polygon fill="black" stroke="black" points="3913.57,-3151.5 3923.57,-3148 3913.57,-3144.5 3913.57,-3151.5"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node162" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node162"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="3260.39,-2840 3040.39,-2840 3040.39,-2804 3260.39,-2804 3260.39,-2840"/>
<text text-anchor="middle" x="3150.39" y="-2818.3" font-family="Times,serif" font-size="14.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge247" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3189.22,-2803.96C3220.57,-2786.81 3263.27,-2757.88 3284.39,-2719 3330.26,-2634.54 3259.15,-2362.07 3320.39,-2288 3334.48,-2270.96 3355.52,-2261.21 3376.86,-2255.73"/>
<polygon fill="black" stroke="black" points="3377.69,-2259.13 3386.67,-2253.5 3376.14,-2252.3 3377.69,-2259.13"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge248" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3190.44,-2803.93C3222.09,-2786.94 3264.58,-2758.24 3284.39,-2719 3361.63,-2566.02 3281.49,-1343.91 3320.39,-1177 3344.71,-1072.62 3408.51,-960.8 3439.29,-910.82"/>
<polygon fill="black" stroke="black" points="3442.33,-912.56 3444.64,-902.22 3436.38,-908.86 3442.33,-912.56"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge249" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3260.58,-2807.15C3269.39,-2802.69 3277.52,-2797.07 3284.39,-2790 3338.78,-2733.96 3264.88,-2672.94 3320.39,-2618 3337.23,-2601.33 3361.23,-2593.49 3384.39,-2590.15"/>
<polygon fill="black" stroke="black" points="3385.06,-2593.6 3394.59,-2588.95 3384.25,-2586.64 3385.06,-2593.6"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge250" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3218.41,-2840.07C3242.86,-2850 3268.41,-2864.93 3284.39,-2887 3353.06,-2981.85 3240.06,-3062.8 3320.39,-3148 3321.17,-3148.83 3321.97,-3149.64 3322.79,-3150.43"/>
<polygon fill="black" stroke="black" points="3320.68,-3153.23 3330.59,-3156.98 3325.18,-3147.87 3320.68,-3153.23"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge251" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3213.17,-2840.11C3238.32,-2850.27 3265.8,-2865.36 3284.39,-2887 3319.29,-2927.62 3285.31,-2961.53 3320.39,-3002 3336.96,-3021.12 3360.41,-3035.07 3383.18,-3045.02"/>
<polygon fill="black" stroke="black" points="3381.96,-3048.31 3392.54,-3048.91 3384.65,-3041.84 3381.96,-3048.31"/>
</g>
<!-- embed.main -->
<g id="node163" class="node">
<title>embed.main</title>
<g id="a_node163"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="788.5,-2583 684.5,-2583 684.5,-2547 788.5,-2547 788.5,-2583"/>
<text text-anchor="middle" x="736.5" y="-2561.3" font-family="Times,serif" font-size="14.00">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge255" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M788.53,-2565C858.36,-2565 987.61,-2565 1097.89,-2565 1097.89,-2565 1097.89,-2565 2576.89,-2565 2756.56,-2565 2831.34,-2489.65 2980.39,-2590 3011.06,-2610.65 2987.22,-2642.28 3016.39,-2665 3031.04,-2676.41 3049.28,-2683.36 3067.51,-2687.5"/>
<polygon fill="black" stroke="black" points="3066.82,-2690.94 3077.32,-2689.48 3068.2,-2684.07 3066.82,-2690.94"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node165" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node165"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="2941.89,-220 2763.89,-220 2763.89,-184 2941.89,-184 2941.89,-220"/>
<text text-anchor="middle" x="2852.89" y="-198.3" font-family="Times,serif" font-size="14.00">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge256" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2942.15,-202C2971.1,-202 3003.72,-202 3034.35,-202"/>
<polygon fill="black" stroke="black" points="3034.66,-205.5 3044.66,-202 3034.66,-198.5 3034.66,-205.5"/>
</g>
<!-- log_utils.init_logger -->
<g id="node166" class="node">
<title>log_utils.init_logger</title>
<g id="a_node166"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="2931.89,-128 2773.89,-128 2773.89,-92 2931.89,-92 2931.89,-128"/>
<text text-anchor="middle" x="2852.89" y="-106.3" font-family="Times,serif" font-size="14.00">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge257" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2911.92,-128.07C2960.71,-143.26 3030.51,-164.99 3081.81,-180.96"/>
<polygon fill="black" stroke="black" points="3080.9,-184.34 3091.49,-183.97 3082.98,-177.66 3080.9,-184.34"/>
</g>
<!-- log_utils.get_logger -->
<g id="node167" class="node">
<title>log_utils.get_logger</title>
<g id="a_node167"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="3228.89,-128 3071.89,-128 3071.89,-92 3228.89,-92 3228.89,-128"/>
<text text-anchor="middle" x="3150.39" y="-106.3" font-family="Times,serif" font-size="14.00">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge258" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M2931.91,-103.97C2971.8,-103.08 3020.48,-103.02 3061.67,-103.77"/>
<polygon fill="black" stroke="black" points="3061.62,-107.27 3071.69,-103.98 3061.77,-100.27 3061.62,-107.27"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge259" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M3071.69,-116.02C3031.86,-116.92 2983.18,-116.99 2941.95,-116.23"/>
<polygon fill="black" stroke="black" points="2941.98,-112.73 2931.91,-116.03 2941.84,-119.73 2941.98,-112.73"/>
</g>
<!-- build_site -->
<g id="node168" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="89" cy="-2889" rx="55.79" ry="18"/>
<text text-anchor="middle" x="89" y="-2885.3" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge265" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M103.18,-2906.88C154.89,-2974.8 352.05,-3213 574,-3213 574,-3213 574,-3213 1816.39,-3213 2040,-3213 2235.54,-3451.27 2295.23,-3531.78"/>
<polygon fill="black" stroke="black" points="2292.47,-3533.94 2301.21,-3539.94 2298.12,-3529.8 2292.47,-3533.94"/>
</g>
<!-- embed -->
<g id="node169" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="343.5" cy="-2565" rx="42.49" ry="18"/>
<text text-anchor="middle" x="343.5" y="-2561.3" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- build_site&#45;&gt;embed -->
<!-- embed&#45;&gt;embed.main -->
<g id="edge267" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M385.97,-2565C454.91,-2565 593.43,-2565 673.85,-2565"/>
<polygon fill="black" stroke="black" points="674.31,-2568.5 684.31,-2565 674.31,-2561.5 674.31,-2568.5"/>
</g>
<!-- caption -->
<g id="node170" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="575" cy="-2489" rx="44.69" ry="18"/>
<text text-anchor="middle" x="575" y="-2485.3" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- embed&#45;&gt;caption -->
<!-- caption&#45;&gt;caption.main -->
<g id="edge269" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M620.01,-2489C636.04,-2489 654.5,-2489 671.9,-2489"/>
<polygon fill="black" stroke="black" points="671.99,-2492.5 681.99,-2489 671.99,-2485.5 671.99,-2492.5"/>
</g>
<!-- tg_client -->
<g id="node171" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="736.5" cy="-2236" rx="50.89" ry="18"/>
<text text-anchor="middle" x="736.5" y="-2232.3" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- caption&#45;&gt;tg_client -->
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge271" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M739.2,-2217.93C755.17,-2048.12 878.76,-734.5 898.53,-524.32"/>
<polygon fill="black" stroke="black" points="902.04,-524.4 899.49,-514.11 895.07,-523.74 902.04,-524.4"/>
</g>
<!-- debug_dump -->
<g id="node172" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="902.19" cy="-2236" rx="70.39" ry="18"/>
<text text-anchor="middle" x="902.19" y="-2232.3" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- tg_client&#45;&gt;debug_dump -->
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge273" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M965.04,-2227.77C1046.13,-2217.71 1192.89,-2202 1318.89,-2202 1318.89,-2202 1318.89,-2202 2057.89,-2202 2276.45,-2202 2733.62,-1593.09 2832.69,-1457.53"/>
<polygon fill="black" stroke="black" points="2835.63,-1459.44 2838.69,-1449.3 2829.97,-1455.32 2835.63,-1459.44"/>
</g>
<!-- chop -->
<g id="node173" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="1098.89" cy="-2270" rx="32.49" ry="18"/>
<text text-anchor="middle" x="1098.89" y="-2266.3" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- debug_dump&#45;&gt;chop -->
<!-- chop&#45;&gt;chop.main -->
<g id="edge275" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M1131.73,-2270C1166.47,-2270 1222.7,-2270 1264.47,-2270"/>
<polygon fill="black" stroke="black" points="1264.49,-2273.5 1274.49,-2270 1264.49,-2266.5 1264.49,-2273.5"/>
</g>
<!-- clean_data -->
<g id="node174" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="1319.89" cy="-2324" rx="59.59" ry="18"/>
<text text-anchor="middle" x="1319.89" y="-2320.3" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- chop&#45;&gt;clean_data -->
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge277" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M1374.93,-2331.13C1541.41,-2350.58 2057.41,-2392.05 2426.39,-2216 2528.45,-2167.3 2758.89,-1896.07 2830.35,-1810.13"/>
<polygon fill="black" stroke="black" points="2833.25,-1812.1 2836.95,-1802.17 2827.87,-1807.64 2833.25,-1812.1"/>
</g>
<!-- moderation -->
<g id="node175" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="1567.39" cy="-2611" rx="63.89" ry="18"/>
<text text-anchor="middle" x="1567.39" y="-2607.3" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- clean_data&#45;&gt;moderation -->
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge279" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M1589.21,-2628.18C1653.95,-2679.81 1859.19,-2830 2055.89,-2830 2055.89,-2830 2055.89,-2830 2576.89,-2830 2733.44,-2830 2914.06,-2826.97 3029.87,-2824.64"/>
<polygon fill="black" stroke="black" points="3030.25,-2828.13 3040.17,-2824.43 3030.11,-2821.14 3030.25,-2828.13"/>
</g>
<!-- scan_ontology -->
<g id="node176" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="1815.39" cy="-2611" rx="76.09" ry="18"/>
<text text-anchor="middle" x="1815.39" y="-2607.3" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- moderation&#45;&gt;scan_ontology -->
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge281" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M1856.63,-2595.77C1982.68,-2548.08 2370.15,-2401.47 2517.34,-2345.77"/>
<polygon fill="black" stroke="black" points="2518.99,-2348.89 2527.1,-2342.08 2516.51,-2342.35 2518.99,-2348.89"/>
</g>
<!-- telegram_bot -->
<g id="node177" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="2056.89" cy="-2611" rx="72.29" ry="18"/>
<text text-anchor="middle" x="2056.89" y="-2607.3" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- scan_ontology&#45;&gt;telegram_bot -->
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge283" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M2129.2,-2611C2153.99,-2611 2182.34,-2611 2209.26,-2611"/>
<polygon fill="black" stroke="black" points="2209.5,-2614.5 2219.5,-2611 2209.5,-2607.5 2209.5,-2614.5"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge284" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M2112.49,-2622.52C2146.33,-2629.66 2190.49,-2638.97 2228.84,-2647.06"/>
<polygon fill="black" stroke="black" points="2228.47,-2650.56 2238.97,-2649.2 2229.91,-2643.71 2228.47,-2650.56"/>
</g>
</g>
</svg>
