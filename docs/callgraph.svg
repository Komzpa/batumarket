<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10275pt" height="5954pt"
 viewBox="0.00 0.00 10275.00 5953.52" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5949.52)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5949.52 10271,-5949.52 10271,4 -4,4"/>
<!-- config_utils.load_config -->
<g id="node1" class="node">
<title>config_utils.load_config</title>
<g id="a_node1"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10216,-840.52 9783,-840.52 9783,-793.52 10216,-793.52 10216,-840.52"/>
<text text-anchor="middle" x="9999.5" y="-808.52" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- lot_io._clean_lot -->
<g id="node2" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node2"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9409.5,-1998.02 9294.5,-1998.02 9294.5,-1962.02 9409.5,-1962.02 9409.5,-1998.02"/>
<text text-anchor="middle" x="9352" y="-1976.77" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.valid_lots -->
<g id="node3" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node3"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="7579,-5738.02 7375,-5738.02 7375,-5702.02 7579,-5702.02 7579,-5738.02"/>
<text text-anchor="middle" x="7477" y="-5714.14" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node4" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node4"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8604.5,-5075.02 8425.5,-5075.02 8425.5,-5039.02 8604.5,-5039.02 8604.5,-5075.02"/>
<text text-anchor="middle" x="8515" y="-5052.97" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node5" class="node">
<title>lot_io.get_seller</title>
<g id="a_node5"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8615.5,-1281.02 8414.5,-1281.02 8414.5,-1245.02 8615.5,-1245.02 8615.5,-1281.02"/>
<text text-anchor="middle" x="8515" y="-1257.42" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node6" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node6"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8674,-1952.02 8356,-1952.02 8356,-1912.02 8674,-1912.02 8674,-1952.02"/>
<text text-anchor="middle" x="8515" y="-1924.94" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.read_lots -->
<g id="node7" class="node">
<title>lot_io.read_lots</title>
<g id="a_node7"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8621,-2502.02 8409,-2502.02 8409,-2466.02 8621,-2466.02 8621,-2502.02"/>
<text text-anchor="middle" x="8515" y="-2477.86" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge1" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8621.01,-2491.56C8739.07,-2497.69 8920.96,-2499.3 8972,-2456.02 9026.6,-2409.71 8972.21,-2361.02 9008,-2299.02 9086.37,-2163.26 9241.18,-2051.09 9312.89,-2003.95"/>
<polygon fill="black" stroke="black" points="9315.15,-2006.65 9321.62,-1998.26 9311.33,-2000.78 9315.15,-2006.65"/>
</g>
<!-- notes_utils.load_json -->
<g id="node8" class="node">
<title>notes_utils.load_json</title>
<g id="a_node8"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9476,-1457.02 9228,-1457.02 9228,-1421.02 9476,-1421.02 9476,-1457.02"/>
<text text-anchor="middle" x="9352" y="-1433.32" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge2" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8621.19,-2493.08C8740.64,-2500.81 8925.09,-2504.09 8972,-2456.02 9048.02,-2378.11 8933.91,-1556.76 9008,-1477.02 9069.66,-1410.64 9178.15,-1409.42 9256.63,-1419.54"/>
<polygon fill="black" stroke="black" points="9256.63,-1423.07 9267.01,-1420.97 9257.58,-1416.14 9256.63,-1423.07"/>
</g>
<!-- notes_utils.read_text -->
<g id="node51" class="node">
<title>notes_utils.read_text</title>
<g id="a_node51"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="10106.5,-3184.02 9892.5,-3184.02 9892.5,-3148.02 10106.5,-3148.02 10106.5,-3184.02"/>
<text text-anchor="middle" x="9999.5" y="-3161.23" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge68" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9452.78,-1420.98C9529.18,-1413.29 9632,-1417.16 9696,-1477.02 9951.3,-1715.78 9992.74,-2936.2 9997.87,-3137.8"/>
<polygon fill="black" stroke="black" points="9994.37,-3137.97 9998.11,-3147.88 10001.37,-3137.79 9994.37,-3137.97"/>
</g>
<!-- lot_io.write_lots -->
<g id="node9" class="node">
<title>lot_io.write_lots</title>
<g id="a_node9"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7578.5,-1970.02 7375.5,-1970.02 7375.5,-1934.02 7578.5,-1934.02 7578.5,-1970.02"/>
<text text-anchor="middle" x="7477" y="-1946.42" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge3" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7578.59,-1953.6C7694.26,-1955.42 7889.84,-1958.48 8058,-1961.02 8527.5,-1968.11 9092.9,-1976.29 9284.11,-1979.05"/>
<polygon fill="black" stroke="black" points="9284.24,-1982.55 9294.28,-1979.2 9284.34,-1975.55 9284.24,-1982.55"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge4" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7578.72,-1957.88C7703.91,-1959.07 7914.2,-1939.83 8022,-1810.02 8094.44,-1722.78 7978.32,-1381.7 8058,-1301.02 8156.45,-1201.32 8335.7,-1220.96 8437.68,-1242.82"/>
<polygon fill="black" stroke="black" points="8437.08,-1246.28 8447.6,-1245.01 8438.59,-1239.44 8437.08,-1246.28"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge5" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7578.75,-1950.07C7756.69,-1946.64 8128.3,-1939.46 8345.71,-1935.26"/>
<polygon fill="black" stroke="black" points="8346.01,-1938.76 8355.94,-1935.07 8345.88,-1931.76 8346.01,-1938.76"/>
</g>
<!-- notes_utils.write_json -->
<g id="node10" class="node">
<title>notes_utils.write_json</title>
<g id="a_node10"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="8609,-1827.02 8421,-1827.02 8421,-1791.02 8609,-1791.02 8609,-1827.02"/>
<text text-anchor="middle" x="8515" y="-1804.97" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge6" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7578.51,-1957.41C7689.03,-1960.76 7870.98,-1958.57 8022,-1920.02 8039.14,-1915.64 8041.22,-1908.62 8058,-1903.02 8175.99,-1863.62 8316.91,-1837.62 8410.55,-1823.15"/>
<polygon fill="black" stroke="black" points="8411.24,-1826.58 8420.59,-1821.61 8410.18,-1819.66 8411.24,-1826.58"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node11" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node11"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8607.5,-2378.02 8422.5,-2378.02 8422.5,-2342.02 8607.5,-2342.02 8607.5,-2378.02"/>
<text text-anchor="middle" x="8515" y="-2355.23" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node12" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node12"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9477,-2344.02 9227,-2344.02 9227,-2308.02 9477,-2308.02 9477,-2344.02"/>
<text text-anchor="middle" x="9352" y="-2319.86" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node13" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node13"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8591.5,-2258.02 8438.5,-2258.02 8438.5,-2222.02 8591.5,-2222.02 8591.5,-2258.02"/>
<text text-anchor="middle" x="8515" y="-2236.32" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge7" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8591.59,-2243.66C8682.16,-2248.42 8838.43,-2257.83 8972,-2272.02 9058.16,-2281.17 9154.86,-2295 9229.01,-2306.38"/>
<polygon fill="black" stroke="black" points="9228.91,-2309.9 9239.32,-2307.96 9229.97,-2302.98 9228.91,-2309.9"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node14" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node14"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8621.5,-2822.02 8408.5,-2822.02 8408.5,-2786.02 8621.5,-2786.02 8621.5,-2822.02"/>
<text text-anchor="middle" x="8515" y="-2799.85" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node15" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node15"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8643.5,-2447.52 8386.5,-2447.52 8386.5,-2410.52 8643.5,-2410.52 8643.5,-2447.52"/>
<text text-anchor="middle" x="8515" y="-2422.57" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node16" class="node">
<title>lot_io.get_lot</title>
<g id="a_node16"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7549.5,-2608.02 7404.5,-2608.02 7404.5,-2572.02 7549.5,-2572.02 7549.5,-2608.02"/>
<text text-anchor="middle" x="7477" y="-2585.22" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge8" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7549.87,-2602.78C7658.44,-2618.47 7867.96,-2634.42 8022,-2558.02 8044.02,-2547.09 8036.04,-2527.06 8058,-2516.02 8164.3,-2462.54 8302.52,-2460.73 8398.79,-2468.41"/>
<polygon fill="black" stroke="black" points="8398.59,-2471.9 8408.85,-2469.25 8399.18,-2464.93 8398.59,-2471.9"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge9" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7549.53,-2596.17C7767.37,-2612.83 8440.21,-2648.77 8972,-2511.02 9106.38,-2476.21 9249.58,-2391.49 9314.84,-2349.88"/>
<polygon fill="black" stroke="black" points="9317,-2352.66 9323.52,-2344.31 9313.22,-2346.77 9317,-2352.66"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node17" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node17"><a xlink:title="Return mapping of lot id to embedding vector.&#10;&#10;Vectors are stored as ``numpy.float16`` arrays which halves the&#10;memory footprint compared to ``float32`` and drastically reduces&#10;memory usage compared to plain Python lists.">
<polygon fill="none" stroke="black" points="8818,-1074.52 8212,-1074.52 8212,-1025.52 8818,-1025.52 8818,-1074.52"/>
<text text-anchor="middle" x="8515" y="-1040.84" font-family="Times,serif" font-size="37.10">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge10" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8818.06,-1072.54C8870.85,-1083.11 8924.14,-1098.3 8972,-1120.02 9130.9,-1192.12 9275.99,-1350.3 9329.35,-1412.83"/>
<polygon fill="black" stroke="black" points="9326.84,-1415.29 9335.97,-1420.66 9332.19,-1410.77 9326.84,-1415.29"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node18" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node18"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7606,-4524.02 7348,-4524.02 7348,-4488.02 7606,-4488.02 7606,-4524.02"/>
<text text-anchor="middle" x="7477" y="-4500.32" font-family="Times,serif" font-size="22.12">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._format_vector -->
<g id="node19" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node19"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8679.5,-1606.02 8350.5,-1606.02 8350.5,-1570.02 8679.5,-1570.02 8679.5,-1606.02"/>
<text text-anchor="middle" x="8515" y="-1582.32" font-family="Times,serif" font-size="22.12">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- similar_utils._similar_path -->
<g id="node20" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node20"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8617,-1752.02 8413,-1752.02 8413,-1716.02 8617,-1716.02 8617,-1752.02"/>
<text text-anchor="middle" x="8515" y="-1730.32" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._more_user_path -->
<g id="node21" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node21"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8630,-1698.02 8400,-1698.02 8400,-1662.02 8630,-1662.02 8630,-1698.02"/>
<text text-anchor="middle" x="8515" y="-1676.32" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar -->
<g id="node22" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node22"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7726,-636.02 7228,-636.02 7228,-588.02 7726,-588.02 7726,-636.02"/>
<text text-anchor="middle" x="7477" y="-602.9" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge11" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7726.26,-601.53C8126.77,-587.07 8880.13,-571 8972,-650.02 9041.47,-709.77 8976.36,-767.02 9008,-853.02 9093.83,-1086.31 9270.99,-1332.88 9330.78,-1412.56"/>
<polygon fill="black" stroke="black" points="9328.35,-1415.14 9337.16,-1421.01 9333.94,-1410.92 9328.35,-1415.14"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node23" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node23"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="6632,-686.52 6114,-686.52 6114,-641.52 6632,-641.52 6632,-686.52"/>
<text text-anchor="middle" x="6373" y="-655.64" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge12" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6632.2,-660.4C6957.14,-658.19 7532.06,-662.05 8022,-706.02 8447.54,-744.2 8613.48,-620.62 8972,-853.02 9191.73,-995.45 9310.58,-1315.05 9342.27,-1411.16"/>
<polygon fill="black" stroke="black" points="9338.97,-1412.33 9345.39,-1420.76 9345.63,-1410.16 9338.97,-1412.33"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node24" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node24"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7625,-1744.02 7329,-1744.02 7329,-1708.02 7625,-1708.02 7625,-1744.02"/>
<text text-anchor="middle" x="7477" y="-1720.72" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge15" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7625.23,-1726.6C7735.03,-1728.67 7888.46,-1735 8022,-1753.02 8038.24,-1755.21 8041.82,-1758.38 8058,-1761.02 8178.21,-1780.63 8317.63,-1793.95 8410.35,-1801.49"/>
<polygon fill="black" stroke="black" points="8410.33,-1805 8420.58,-1802.31 8410.89,-1798.02 8410.33,-1805"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge13" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7625.08,-1712.62C7766.64,-1703.26 7967.09,-1700.47 8022,-1753.02 8083.92,-1812.28 8001.42,-2072.64 8058,-2137.02 8150.04,-2241.73 8323.88,-2252.29 8428.3,-2247.91"/>
<polygon fill="black" stroke="black" points="8428.67,-2251.39 8438.49,-2247.42 8428.34,-2244.4 8428.67,-2251.39"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge14" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7625.06,-1727.15C7834.66,-1728.77 8214.69,-1731.7 8402.62,-1733.16"/>
<polygon fill="black" stroke="black" points="8402.77,-1736.66 8412.79,-1733.23 8402.82,-1729.66 8402.77,-1736.66"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node25" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node25"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7644.5,-1690.02 7309.5,-1690.02 7309.5,-1654.02 7644.5,-1654.02 7644.5,-1690.02"/>
<text text-anchor="middle" x="7477" y="-1666.72" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge18" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7644.68,-1663.23C7780.95,-1659.13 7960.73,-1661.69 8022,-1699.02 8049.21,-1715.59 8031.26,-1743.69 8058,-1761.02 8163.45,-1829.32 8312.2,-1831.65 8410.78,-1823.39"/>
<polygon fill="black" stroke="black" points="8411.1,-1826.87 8420.75,-1822.5 8410.48,-1819.9 8411.1,-1826.87"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge16" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7644.72,-1657.26C7784.66,-1648.88 7969.86,-1648.54 8022,-1699.02 8092.17,-1766.94 7993.95,-2063.29 8058,-2137.02 8149.44,-2242.26 8323.48,-2252.64 8428.1,-2248.08"/>
<polygon fill="black" stroke="black" points="8428.5,-2251.56 8438.32,-2247.58 8428.16,-2244.57 8428.5,-2251.56"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge17" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7644.74,-1673.3C7852.75,-1674.91 8203.65,-1677.62 8389.62,-1679.05"/>
<polygon fill="black" stroke="black" points="8389.69,-1682.56 8399.72,-1679.13 8389.75,-1675.56 8389.69,-1682.56"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node26" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node26"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9593,-507.02 9111,-507.02 9111,-467.02 9593,-467.02 9593,-507.02"/>
<text text-anchor="middle" x="9352" y="-479.94" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node27" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node27"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7616,-956.02 7338,-956.02 7338,-920.02 7616,-920.02 7616,-956.02"/>
<text text-anchor="middle" x="7477" y="-933.23" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node28" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node28"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="8972,-524.52 8058,-524.52 8058,-449.52 8972,-449.52 8972,-524.52"/>
<text text-anchor="middle" x="8515" y="-472.02" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge19" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M8972.29,-487.02C9016.37,-487.02 9059.86,-487.02 9100.79,-487.02"/>
<polygon fill="black" stroke="black" points="9100.86,-490.52 9110.86,-487.02 9100.86,-483.52 9100.86,-490.52"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node29" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node29"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7715.5,-1014.02 7238.5,-1014.02 7238.5,-974.02 7715.5,-974.02 7715.5,-1014.02"/>
<text text-anchor="middle" x="7477" y="-986.94" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node30" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node30"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9696,-844.52 9008,-844.52 9008,-787.52 9696,-787.52 9696,-844.52"/>
<text text-anchor="middle" x="9352" y="-804.68" font-family="Times,serif" font-size="44.80">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- chop.has_misc_deal -->
<g id="node31" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node31"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="8629,-5814.02 8401,-5814.02 8401,-5778.02 8629,-5778.02 8629,-5814.02"/>
<text text-anchor="middle" x="8515" y="-5790.72" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node32" class="node">
<title>chop.process_message</title>
<g id="a_node32"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6874,-5769.02 5872,-5769.02 5872,-5667.02 6874,-5667.02 6874,-5769.02"/>
<text text-anchor="middle" x="6373" y="-5696.7" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge20" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6874.22,-5718.92C7057.46,-5719.26 7248.26,-5719.6 7364.62,-5719.81"/>
<polygon fill="black" stroke="black" points="7364.94,-5723.31 7374.95,-5719.83 7364.96,-5716.31 7364.94,-5723.31"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge21" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6839.67,-5666.98C6858.72,-5664.1 6877.56,-5661.12 6896,-5658.02 6912.16,-5655.3 6915.74,-5652.05 6932,-5650.02 6992.11,-5642.49 7978.3,-5658.98 8022,-5617.02 8103.47,-5538.79 7979.94,-5191.65 8058,-5110.02 8150.84,-5012.92 8319.12,-5020.71 8423.24,-5037.36"/>
<polygon fill="black" stroke="black" points="8422.68,-5040.81 8433.11,-5038.99 8423.82,-5033.91 8422.68,-5040.81"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge22" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6791.42,-5769.02C6838.78,-5773.43 6886.39,-5777.26 6932,-5780.02 7474.72,-5812.83 8124.04,-5804.46 8390.59,-5798.98"/>
<polygon fill="black" stroke="black" points="8390.76,-5802.48 8400.68,-5798.77 8390.61,-5795.48 8390.76,-5802.48"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node33" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node33"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="9470,-5860.02 9234,-5860.02 9234,-5824.02 9470,-5824.02 9470,-5860.02"/>
<text text-anchor="middle" x="9352" y="-5837.97" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge23" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6647.65,-5769.07C6737.87,-5783.78 6838.93,-5798.01 6932,-5806.02 7805.78,-5881.13 8863.48,-5857.66 9223.76,-5846.45"/>
<polygon fill="black" stroke="black" points="9224.07,-5849.95 9233.96,-5846.14 9223.85,-5842.95 9224.07,-5849.95"/>
</g>
<!-- caption_io.has_caption -->
<g id="node34" class="node">
<title>caption_io.has_caption</title>
<g id="a_node34"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8592.5,-3803.02 8437.5,-3803.02 8437.5,-3767.02 8592.5,-3767.02 8592.5,-3803.02"/>
<text text-anchor="middle" x="8515" y="-3781.77" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge24" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6874.12,-5679.16C6881.78,-5672.64 6889.09,-5665.6 6896,-5658.02 6961.79,-5585.73 6863.54,-3968.78 6932,-3899.02 7016.89,-3812.5 7914.68,-3912.35 8022,-3856.02 8045.61,-3843.62 8034.46,-3820.54 8058,-3808.02 8174.09,-3746.27 8331.19,-3754.88 8427.41,-3768.6"/>
<polygon fill="black" stroke="black" points="8426.99,-3772.08 8437.4,-3770.08 8428.01,-3765.15 8426.99,-3772.08"/>
</g>
<!-- caption_io.read_caption -->
<g id="node35" class="node">
<title>caption_io.read_caption</title>
<g id="a_node35"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8680.5,-3007.52 8349.5,-3007.52 8349.5,-2970.52 8680.5,-2970.52 8680.5,-3007.52"/>
<text text-anchor="middle" x="8515" y="-2982.57" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge25" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6874.19,-5679.23C6881.83,-5672.69 6889.12,-5665.63 6896,-5658.02 6991.96,-5551.9 6831.9,-3185.23 6932,-3083.02 6974.4,-3039.73 7961.57,-3049.5 8022,-3045.02 8138.25,-3036.39 8269.38,-3021.19 8367.01,-3008.8"/>
<polygon fill="black" stroke="black" points="8367.47,-3012.27 8376.95,-3007.53 8366.59,-3005.33 8367.47,-3012.27"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node36" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node36"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8682,-5155.02 8348,-5155.02 8348,-5119.02 8682,-5119.02 8682,-5155.02"/>
<text text-anchor="middle" x="8515" y="-5132.23" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge26" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6874.36,-5745.28C6893.82,-5745.94 6913.09,-5746.52 6932,-5747.02 6992.54,-5748.59 7977.71,-5788.31 8022,-5747.02 8105.75,-5668.93 7982.79,-5319.35 8058,-5233.02 8126.13,-5154.8 8240.4,-5130.85 8337.5,-5126.43"/>
<polygon fill="black" stroke="black" points="8337.88,-5129.92 8347.74,-5126.03 8337.61,-5122.92 8337.88,-5129.92"/>
</g>
<!-- post_io.read_post -->
<g id="node37" class="node">
<title>post_io.read_post</title>
<g id="a_node37"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8794,-4088.02 8236,-4088.02 8236,-4012.02 8794,-4012.02 8794,-4088.02"/>
<text text-anchor="middle" x="8515" y="-4034.85" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge27" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6874.01,-5678.61C6881.69,-5672.25 6889.04,-5665.4 6896,-5658.02 6993.6,-5554.57 6830.36,-5118.5 6932,-5019.02 7018.6,-4934.25 7935.52,-5065.91 8022,-4981.02 8075.6,-4928.4 8018.34,-4369.8 8058,-4306.02 8126.4,-4196 8260.23,-4129.09 8365.29,-4091.41"/>
<polygon fill="black" stroke="black" points="8366.46,-4094.71 8374.72,-4088.08 8364.12,-4088.11 8366.46,-4094.71"/>
</g>
<!-- embed.embed_file -->
<g id="node38" class="node">
<title>embed.embed_file</title>
<g id="a_node38"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7682,-2369.52 7272,-2369.52 7272,-2314.52 7682,-2314.52 7682,-2369.52"/>
<text text-anchor="middle" x="7477" y="-2331.47" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge28" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6874.22,-5679.25C6881.85,-5672.7 6889.13,-5665.64 6896,-5658.02 6956.29,-5591.15 6872.47,-2484.56 6932,-2417.02 7023.28,-2313.45 7185.35,-2303.05 7308.92,-2313.55"/>
<polygon fill="black" stroke="black" points="7308.98,-2317.07 7319.25,-2314.49 7309.61,-2310.1 7308.98,-2317.07"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node39" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node39"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8664.5,-5332.02 8365.5,-5332.02 8365.5,-5296.02 8664.5,-5296.02 8664.5,-5332.02"/>
<text text-anchor="middle" x="8515" y="-5309.22" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge29" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6874.03,-5695.48C6893.61,-5694.64 6912.99,-5693.82 6932,-5693.02 6992.55,-5690.46 7977.54,-5691.2 8022,-5650.02 8123.44,-5556.06 7957.5,-5435.96 8058,-5341.02 8099.83,-5301.5 8240.77,-5298.11 8355.01,-5302.58"/>
<polygon fill="black" stroke="black" points="8355.14,-5306.09 8365.28,-5303.01 8355.43,-5299.1 8355.14,-5306.09"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node67" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node67"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9448.5,-2960.02 9255.5,-2960.02 9255.5,-2924.02 9448.5,-2924.02 9448.5,-2960.02"/>
<text text-anchor="middle" x="9352" y="-2938.77" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge77" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8555.47,-3766.94C8647.01,-3722.69 8873.43,-3599.29 8972,-3420.02 9042.45,-3291.89 8921.52,-3210.91 9008,-3093.02 9063.91,-3016.79 9166.83,-2978.45 9245.4,-2959.55"/>
<polygon fill="black" stroke="black" points="9246.4,-2962.91 9255.34,-2957.23 9244.81,-2956.09 9246.4,-2962.91"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node68" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node68"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9445.5,-3214.02 9258.5,-3214.02 9258.5,-3178.02 9445.5,-3178.02 9445.5,-3214.02"/>
<text text-anchor="middle" x="9352" y="-3192.77" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge78" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8541.91,-3766.74C8663.66,-3680.86 9178.83,-3317.46 9316.86,-3220.1"/>
<polygon fill="black" stroke="black" points="9319.24,-3222.7 9325.4,-3214.08 9315.21,-3216.98 9319.24,-3222.7"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge80" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8616.12,-3007.52C8721.77,-3020.62 8884.78,-3021.27 8972,-2923.02 9025.35,-2862.92 8953.66,-1536.21 9008,-1477.02 9069.68,-1409.82 9179.3,-1409.11 9258.03,-1419.57"/>
<polygon fill="black" stroke="black" points="9257.57,-1423.04 9267.96,-1420.97 9258.54,-1416.11 9257.57,-1423.04"/>
</g>
<!-- notes_utils.read_md -->
<g id="node58" class="node">
<title>notes_utils.read_md</title>
<g id="a_node58"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9422,-3667.02 9282,-3667.02 9282,-3631.02 9422,-3631.02 9422,-3667.02"/>
<text text-anchor="middle" x="9352" y="-3645.77" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge79" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8539.64,-3007.7C8658.06,-3101.3 9186.2,-3518.75 9320.07,-3624.57"/>
<polygon fill="black" stroke="black" points="9317.94,-3627.35 9327.96,-3630.8 9322.28,-3621.85 9317.94,-3627.35"/>
</g>
<!-- caption_io._get_langs -->
<g id="node66" class="node">
<title>caption_io._get_langs</title>
<g id="a_node66"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9461,-1522.02 9243,-1522.02 9243,-1486.02 9461,-1486.02 9461,-1522.02"/>
<text text-anchor="middle" x="9352" y="-1499.23" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge81" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8616.98,-3007.54C8722.56,-3020.44 8884.76,-3020.73 8972,-2923.02 9059.06,-2825.5 8946.19,-1862.21 9008,-1747.02 9069.43,-1632.54 9211.28,-1559.77 9292,-1526.06"/>
<polygon fill="black" stroke="black" points="9293.62,-1529.18 9301.53,-1522.14 9290.95,-1522.71 9293.62,-1529.18"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge82" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8680.97,-2979.73C8848.52,-2970.3 9103,-2955.97 9245.26,-2947.97"/>
<polygon fill="black" stroke="black" points="9245.52,-2951.46 9255.31,-2947.4 9245.13,-2944.47 9245.52,-2951.46"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge83" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8564.47,-3007.61C8651.84,-3040.44 8842.11,-3108.82 9008,-3147.02 9087.76,-3165.38 9179.62,-3178.06 9248.2,-3185.92"/>
<polygon fill="black" stroke="black" points="9247.81,-3189.4 9258.14,-3187.04 9248.6,-3182.44 9247.81,-3189.4"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node95" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node95"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9647,-5515.52 9057,-5515.52 9057,-5470.52 9647,-5470.52 9647,-5515.52"/>
<text text-anchor="middle" x="9352" y="-5484.64" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge135" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8682.03,-5135.42C8771.21,-5139.99 8881.16,-5154.58 8972,-5194.02 8991.1,-5202.31 8991.8,-5210.92 9008,-5224.02 9117.83,-5312.81 9249.81,-5415.1 9313.28,-5464.02"/>
<polygon fill="black" stroke="black" points="9311.35,-5466.95 9321.4,-5470.28 9315.62,-5461.4 9311.35,-5466.95"/>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge168" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8755.3,-4011.99C8827.13,-3995.42 8904.67,-3972.19 8972,-3940.02 9121.72,-3868.48 9268.85,-3731.08 9326.03,-3674.41"/>
<polygon fill="black" stroke="black" points="9328.58,-3676.82 9333.19,-3667.28 9323.63,-3671.86 9328.58,-3676.82"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node60" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node60"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9521,-4456.52 9183,-4456.52 9183,-4419.52 9521,-4419.52 9521,-4456.52"/>
<text text-anchor="middle" x="9352" y="-4431.57" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge169" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8619.24,-4088.06C8719.46,-4129.2 8870.87,-4203 8972,-4306.02 8995.68,-4330.14 8980.74,-4353.03 9008,-4373.02 9055.27,-4407.66 9115.76,-4425.41 9172.75,-4434.08"/>
<polygon fill="black" stroke="black" points="9172.58,-4437.59 9182.97,-4435.54 9173.57,-4430.66 9172.58,-4437.59"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge175" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7682.08,-2337.78C7788.67,-2343.35 7918.16,-2362.8 8022,-2417.02 8042.91,-2427.93 8036.69,-2445.9 8058,-2456.02 8165.26,-2506.95 8303.01,-2507.89 8398.91,-2499.89"/>
<polygon fill="black" stroke="black" points="8399.27,-2503.37 8408.93,-2499.01 8398.66,-2496.4 8399.27,-2503.37"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge177" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7671.89,-2369.52C7789.65,-2374.54 7933.8,-2357.82 8022,-2266.02 8078.16,-2207.56 8003.75,-1963.25 8058,-1903.02 8145.78,-1805.56 8305.48,-1793.88 8410.67,-1798.4"/>
<polygon fill="black" stroke="black" points="8410.52,-1801.89 8420.68,-1798.88 8410.86,-1794.9 8410.52,-1801.89"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge176" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7682.06,-2345.56C7902.02,-2349.38 8243.22,-2355.31 8412.13,-2358.25"/>
<polygon fill="black" stroke="black" points="8412.21,-2361.75 8422.27,-2358.42 8412.33,-2354.75 8412.21,-2361.75"/>
</g>
<!-- chop.main -->
<g id="node40" class="node">
<title>chop.main</title>
<g id="a_node40"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5572,-5687.02 5421,-5687.02 5421,-5651.02 5572,-5651.02 5572,-5687.02"/>
<text text-anchor="middle" x="5496.5" y="-5662.86" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge30" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5572.06,-5673.19C5640.24,-5677.01 5747.6,-5683.03 5861.79,-5689.43"/>
<polygon fill="black" stroke="black" points="5861.61,-5692.92 5871.79,-5689.99 5862,-5685.93 5861.61,-5692.92"/>
</g>
<!-- similar._iter_lots -->
<g id="node41" class="node">
<title>similar._iter_lots</title>
<g id="a_node41"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7631,-2802.52 7323,-2802.52 7323,-2755.52 7631,-2755.52 7631,-2802.52"/>
<text text-anchor="middle" x="7477" y="-2770.52" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge31" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7631.27,-2786.95C7741.88,-2788.56 7893.71,-2782.21 8022,-2746.02 8208.99,-2693.27 8405.28,-2562.12 8481.28,-2507.98"/>
<polygon fill="black" stroke="black" points="8483.44,-2510.74 8489.53,-2502.07 8479.36,-2505.05 8483.44,-2510.74"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge32" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7631.16,-2790.65C7772.13,-2797.75 7967.37,-2797.29 8022,-2746.02 8116.38,-2657.43 7963.65,-2545.63 8058,-2457.02 8160.67,-2360.58 8340.33,-2384.47 8440.76,-2408.14"/>
<polygon fill="black" stroke="black" points="8439.98,-2411.56 8450.52,-2410.5 8441.62,-2404.75 8439.98,-2411.56"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge33" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7631.04,-2765.9C7773.03,-2757.51 7970.01,-2756.75 8022,-2811.02 8109.37,-2902.21 7973.27,-4990.37 8058,-5084.02 8149.43,-5185.07 8322.15,-5174.77 8426.78,-5156.8"/>
<polygon fill="black" stroke="black" points="8427.46,-5160.23 8436.69,-5155.03 8426.23,-5153.34 8427.46,-5160.23"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge35" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7631.14,-2766.11C7772.93,-2757.91 7969.51,-2757.31 8022,-2811.02 8099.79,-2890.6 7998.61,-3717.89 8058,-3812.02 8122.17,-3913.73 8245.02,-3974.29 8347.05,-4008.85"/>
<polygon fill="black" stroke="black" points="8345.95,-4012.17 8356.54,-4012.01 8348.16,-4005.53 8345.95,-4012.17"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node42" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node42"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8653,-2914.02 8377,-2914.02 8377,-2878.02 8653,-2878.02 8653,-2914.02"/>
<text text-anchor="middle" x="8515" y="-2891.23" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge34" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7631.16,-2770.04C7741.89,-2767.85 7893.91,-2773.78 8022,-2811.02 8039.58,-2816.13 8040.65,-2825.18 8058,-2831.02 8157.91,-2864.61 8275.82,-2880.84 8366.71,-2888.68"/>
<polygon fill="black" stroke="black" points="8366.56,-2892.18 8376.82,-2889.53 8367.14,-2885.21 8366.56,-2892.18"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node43" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node43"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8591.5,-3411.02 8438.5,-3411.02 8438.5,-3375.02 8591.5,-3375.02 8591.5,-3411.02"/>
<text text-anchor="middle" x="8515" y="-3389.77" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge36" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7631.26,-2767.65C7771.75,-2760.76 7966.15,-2761.25 8022,-2811.02 8091.06,-2872.56 8011.48,-2936.06 8058,-3016.02 8159.85,-3191.09 8375.34,-3320.13 8468.98,-3370.18"/>
<polygon fill="black" stroke="black" points="8467.44,-3373.33 8477.92,-3374.92 8470.72,-3367.15 8467.44,-3373.33"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node96" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node96"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9528.5,-2571.02 9175.5,-2571.02 9175.5,-2535.02 9528.5,-2535.02 9528.5,-2571.02"/>
<text text-anchor="middle" x="9352" y="-2547.14" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge136" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8653.23,-2907.71C8746.36,-2910.6 8870.51,-2904.39 8972,-2864.02 9132.84,-2800.03 9277.32,-2641.44 9329.92,-2578.93"/>
<polygon fill="black" stroke="black" points="9332.73,-2581.03 9336.45,-2571.11 9327.35,-2576.55 9332.73,-2581.03"/>
</g>
<!-- similar.main -->
<g id="node44" class="node">
<title>similar.main</title>
<g id="a_node44"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6483.5,-960.02 6262.5,-960.02 6262.5,-916.02 6483.5,-916.02 6483.5,-960.02"/>
<text text-anchor="middle" x="6373" y="-929.7" font-family="Times,serif" font-size="32.90">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge37" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6483.53,-931.15C6596,-924.47 6776.14,-914.78 6932,-911.02 7053.08,-908.09 7921.31,-843.71 8022,-911.02 8056.79,-934.27 8024.59,-972.82 8058,-998.02 8099.77,-1029.5 8150.1,-1048.26 8201.85,-1058.75"/>
<polygon fill="black" stroke="black" points="8201.39,-1062.22 8211.87,-1060.67 8202.71,-1055.35 8201.39,-1062.22"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge38" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6483.7,-916.82C6591.81,-893.58 6760.08,-851 6896,-788.02 6913.45,-779.93 6914.52,-772.04 6932,-764.02 7063.61,-703.62 7224.39,-662.32 7336.9,-638.19"/>
<polygon fill="black" stroke="black" points="7337.9,-641.56 7346.96,-636.05 7336.45,-634.71 7337.9,-641.56"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge39" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6483.62,-930.9C6605,-929.69 6796.63,-948.86 6896,-1069.02 6985.37,-1177.08 6832.47,-1600.23 6932,-1699.02 6984.72,-1751.34 7177.61,-1749.61 7318.77,-1740.47"/>
<polygon fill="black" stroke="black" points="7319.1,-1743.95 7328.85,-1739.8 7318.64,-1736.97 7319.1,-1743.95"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge40" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6483.5,-931C6604.78,-929.88 6796.3,-949.13 6896,-1069.02 6977.86,-1167.45 6840.97,-1553.99 6932,-1644.02 6982.39,-1693.85 7160.23,-1694.93 7299.02,-1687.26"/>
<polygon fill="black" stroke="black" points="7299.58,-1690.73 7309.37,-1686.67 7299.18,-1683.75 7299.58,-1690.73"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge41" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6483.69,-938.02C6682.61,-938.02 7102.98,-938.02 7327.43,-938.02"/>
<polygon fill="black" stroke="black" points="7327.63,-941.52 7337.63,-938.02 7327.63,-934.52 7327.63,-941.52"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge42" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6453.86,-915.99C6561.7,-886.83 6760.19,-835.25 6932,-802.02 7412.54,-709.07 7545.1,-755.12 8022,-645.02 8155.87,-614.11 8305.65,-563.63 8404.4,-528.07"/>
<polygon fill="black" stroke="black" points="8405.87,-531.25 8414.09,-524.56 8403.49,-524.67 8405.87,-531.25"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge43" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6483.69,-943.59C6656.11,-952.35 6994.9,-969.57 7228.27,-981.43"/>
<polygon fill="black" stroke="black" points="7228.09,-984.92 7238.26,-981.93 7228.45,-977.93 7228.09,-984.92"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge44" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6483.61,-923.29C6595.95,-908.84 6775.82,-887.5 6932,-877.02 7665.27,-827.78 8525.99,-817.35 8997.55,-815.68"/>
<polygon fill="black" stroke="black" points="8997.59,-819.18 9007.58,-815.65 8997.57,-812.18 8997.59,-819.18"/>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge45" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6483.58,-930.28C6605.64,-928.39 6798.57,-946.84 6896,-1069.02 6954.1,-1141.87 6867.41,-2678.85 6932,-2746.02 6982.84,-2798.88 7171.6,-2799.82 7312.6,-2792.34"/>
<polygon fill="black" stroke="black" points="7312.87,-2795.83 7322.67,-2791.78 7312.49,-2788.84 7312.87,-2795.83"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node45" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node45"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7592.5,-5126.02 7361.5,-5126.02 7361.5,-5090.02 7592.5,-5090.02 7592.5,-5126.02"/>
<text text-anchor="middle" x="7477" y="-5103.97" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node46" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node46"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6514.5,-5126.02 6231.5,-5126.02 6231.5,-5090.02 6514.5,-5090.02 6514.5,-5126.02"/>
<text text-anchor="middle" x="6373" y="-5102.42" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge46" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6514.69,-5108.02C6731.52,-5108.02 7143.93,-5108.02 7350.92,-5108.02"/>
<polygon fill="black" stroke="black" points="7351.23,-5111.52 7361.23,-5108.02 7351.23,-5104.52 7351.23,-5111.52"/>
</g>
<!-- log_utils.init_logger -->
<g id="node47" class="node">
<title>log_utils.init_logger</title>
<g id="a_node47"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6720.5,-5649.02 6025.5,-5649.02 6025.5,-5567.02 6720.5,-5567.02 6720.5,-5649.02"/>
<text text-anchor="middle" x="6373" y="-5591.03" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge47" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6720.54,-5585.13C6787.22,-5565.04 6850.39,-5532.32 6896,-5480.02 6946.66,-5421.92 6876.03,-5188.02 6932,-5135.02 6990.16,-5079.93 7209.63,-5085.93 7351.41,-5096.29"/>
<polygon fill="black" stroke="black" points="7351.25,-5099.79 7361.48,-5097.05 7351.77,-5092.81 7351.25,-5099.79"/>
</g>
<!-- log_utils.get_logger -->
<g id="node48" class="node">
<title>log_utils.get_logger</title>
<g id="a_node48"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7545.5,-5608.02 7408.5,-5608.02 7408.5,-5572.02 7545.5,-5572.02 7545.5,-5608.02"/>
<text text-anchor="middle" x="7477" y="-5586.77" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge48" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6720.79,-5596.03C6960.09,-5591.07 7259.25,-5587.06 7398.29,-5587.61"/>
<polygon fill="black" stroke="black" points="7398.41,-5591.11 7408.42,-5587.66 7398.44,-5584.11 7398.41,-5591.11"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge49" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7408.42,-5594.58C7276.1,-5599.69 6974.47,-5605.58 6730.88,-5608.55"/>
<polygon fill="black" stroke="black" points="6730.75,-5605.05 6720.79,-5608.67 6730.83,-5612.05 6730.75,-5605.05"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node49" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node49"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6559.5,-5037.02 6186.5,-5037.02 6186.5,-5001.02 6559.5,-5001.02 6559.5,-5037.02"/>
<text text-anchor="middle" x="6373" y="-5012.86" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge50" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6517.72,-5037.02C6630.29,-5050.57 6790.91,-5068.68 6932,-5080.02 7075.52,-5091.54 7240.74,-5099.26 7351.08,-5103.63"/>
<polygon fill="black" stroke="black" points="7351.13,-5107.13 7361.26,-5104.03 7351.4,-5100.14 7351.13,-5107.13"/>
</g>
<!-- clean_data._parse_date -->
<g id="node50" class="node">
<title>clean_data._parse_date</title>
<g id="a_node50"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8654.5,-4970.02 8375.5,-4970.02 8375.5,-4934.02 8654.5,-4934.02 8654.5,-4970.02"/>
<text text-anchor="middle" x="8515" y="-4946.32" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge51" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8654.73,-4966.38C8901.46,-4983.59 9416.79,-4980.42 9696,-4696.02 9917.43,-4470.46 9986.57,-3383.79 9997.03,-3194.25"/>
<polygon fill="black" stroke="black" points="10000.52,-3194.41 9997.57,-3184.23 9993.53,-3194.03 10000.52,-3194.41"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge64" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9892.36,-3180.53C9855.6,-3191.24 9891.31,-3202.02 9999.5,-3202.02 10095.86,-3202.02 10134.73,-3193.47 10116.1,-3184.03"/>
<polygon fill="black" stroke="black" points="10117.23,-3180.72 10106.64,-3180.53 10114.8,-3187.28 10117.23,-3180.72"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node52" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node52"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7630.5,-5180.02 7323.5,-5180.02 7323.5,-5144.02 7630.5,-5144.02 7630.5,-5180.02"/>
<text text-anchor="middle" x="7477" y="-5155.86" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge53" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7630.83,-5176.51C7772.65,-5186.19 7969.51,-5188.75 8022,-5135.02 8075.47,-5080.27 8023.96,-3826.55 8058,-3758.02 8145.83,-3581.17 8363.86,-3462.18 8463.22,-3415.35"/>
<polygon fill="black" stroke="black" points="8464.87,-3418.44 8472.45,-3411.04 8461.91,-3412.09 8464.87,-3418.44"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge52" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7630.54,-5172.95C7769.69,-5179.69 7962.4,-5179.86 8022,-5135.02 8061.42,-5105.35 8020.43,-5061.98 8058,-5030.02 8142.04,-4958.51 8267.21,-4941.29 8365.16,-4940.68"/>
<polygon fill="black" stroke="black" points="8365.46,-4944.18 8375.46,-4940.68 8365.46,-4937.18 8365.46,-4944.18"/>
</g>
<!-- clean_data._clean_media -->
<g id="node53" class="node">
<title>clean_data._clean_media</title>
<g id="a_node53"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7667,-4972.02 7287,-4972.02 7287,-4932.02 7667,-4932.02 7667,-4972.02"/>
<text text-anchor="middle" x="7477" y="-4944.94" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge55" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7667.21,-4967.84C7804.28,-4974.69 7973.65,-4972.05 8022,-4923.02 8093.82,-4850.17 8001.77,-4088.47 8058,-4003.02 8141.37,-3876.31 8320.05,-3821.32 8427.32,-3798.97"/>
<polygon fill="black" stroke="black" points="8428.05,-3802.39 8437.16,-3796.97 8426.66,-3795.53 8428.05,-3802.39"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge54" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7667.11,-4952.02C7868.03,-4952.02 8181.5,-4952.02 8365.43,-4952.02"/>
<polygon fill="black" stroke="black" points="8365.45,-4955.52 8375.45,-4952.02 8365.45,-4948.52 8365.45,-4955.52"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node54" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node54"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7679,-3738.02 7275,-3738.02 7275,-3692.02 7679,-3692.02 7679,-3738.02"/>
<text text-anchor="middle" x="7477" y="-3706.58" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge56" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7679.3,-3727.91C7799.18,-3747.07 7942.92,-3792.58 8022,-3899.02 8093.61,-3995.39 7979.07,-4888.54 8058,-4979.02 8145.08,-5078.83 8309.23,-5082.41 8415,-5072.32"/>
<polygon fill="black" stroke="black" points="8415.45,-5075.79 8425.04,-5071.31 8414.74,-5068.83 8415.45,-5075.79"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge57" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7679.04,-3731.04C7797.25,-3728.55 7939.29,-3702.58 8022,-3606.02 8081.97,-3535.99 8012.07,-2856.96 8058,-2777.02 8143.93,-2627.48 8340.54,-2541.88 8445.32,-2505.31"/>
<polygon fill="black" stroke="black" points="8446.54,-2508.59 8454.85,-2502.03 8444.26,-2501.98 8446.54,-2508.59"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge58" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7679.29,-3722.94C7783.62,-3721.68 7911.89,-3711.65 8022,-3678.02 8213.35,-3619.56 8410.12,-3475.01 8483.77,-3417.34"/>
<polygon fill="black" stroke="black" points="8486.04,-3420.01 8491.73,-3411.07 8481.71,-3414.51 8486.04,-3420.01"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node55" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node55"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7685,-5348.02 7269,-5348.02 7269,-5312.02 7685,-5312.02 7685,-5348.02"/>
<text text-anchor="middle" x="7477" y="-5323.86" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node56" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node56"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8728.5,-5386.02 8301.5,-5386.02 8301.5,-5350.02 8728.5,-5350.02 8728.5,-5386.02"/>
<text text-anchor="middle" x="8515" y="-5361.86" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node57" class="node">
<title>clean_data.main</title>
<g id="a_node57"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6469,-5180.02 6277,-5180.02 6277,-5144.02 6469,-5144.02 6469,-5180.02"/>
<text text-anchor="middle" x="6373" y="-5156.72" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge59" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6469.39,-5162.02C6657.83,-5162.02 7079.72,-5162.02 7313.06,-5162.02"/>
<polygon fill="black" stroke="black" points="7313.34,-5165.52 7323.34,-5162.02 7313.34,-5158.52 7313.34,-5165.52"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge60" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6435.85,-5180.05C6542.98,-5207.16 6764.19,-5244.4 6896,-5135.02 6948.43,-5091.51 6879.81,-5029.8 6932,-4986.02 6983.13,-4943.11 7143.11,-4937.17 7276.45,-4940.48"/>
<polygon fill="black" stroke="black" points="7276.72,-4943.99 7286.81,-4940.76 7276.91,-4936.99 7276.72,-4943.99"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge61" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6428.96,-5180.07C6536.03,-5211.39 6772.82,-5261.1 6896,-5135.02 6994.57,-5034.12 6845.05,-3977.08 6932,-3866.02 7009.94,-3766.46 7147.45,-3728.9 7264.71,-3716.13"/>
<polygon fill="black" stroke="black" points="7265.32,-3719.58 7274.91,-3715.07 7264.6,-3712.62 7265.32,-3719.58"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge62" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6432.76,-5180.06C6533.72,-5210.22 6747.11,-5270.28 6932,-5298.02 7038.85,-5314.05 7158.63,-5322.14 7258.54,-5326.19"/>
<polygon fill="black" stroke="black" points="7258.63,-5329.7 7268.76,-5326.6 7258.9,-5322.7 7258.63,-5329.7"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge63" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6424.15,-5180.04C6556.31,-5227.48 6905.81,-5352.48 6932,-5357.02 7186.19,-5401.06 7919.16,-5386.39 8291.39,-5375.46"/>
<polygon fill="black" stroke="black" points="8291.59,-5378.95 8301.48,-5375.16 8291.38,-5371.95 8291.59,-5378.95"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge65" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9377.13,-3630.96C9476.28,-3556.77 9852.5,-3275.26 9965.93,-3190.39"/>
<polygon fill="black" stroke="black" points="9968.34,-3192.95 9974.25,-3184.16 9964.15,-3187.35 9968.34,-3192.95"/>
</g>
<!-- notes_utils.write_md -->
<g id="node59" class="node">
<title>notes_utils.write_md</title>
<g id="a_node59"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7590,-4578.02 7364,-4578.02 7364,-4542.02 7590,-4542.02 7590,-4578.02"/>
<text text-anchor="middle" x="7477" y="-4555.22" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node61" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node61"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8598.5,-4494.02 8431.5,-4494.02 8431.5,-4458.02 8598.5,-4458.02 8598.5,-4494.02"/>
<text text-anchor="middle" x="8515" y="-4472.32" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge66" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8582.07,-4494.06C8679.4,-4516.31 8861.67,-4540.84 8972,-4449.02 9023.37,-4406.26 8984.31,-4365.51 9008,-4303.02 9105.12,-4046.84 9279.09,-3762.66 9333.95,-3675.71"/>
<polygon fill="black" stroke="black" points="9336.92,-3677.56 9339.31,-3667.23 9331.01,-3673.81 9336.92,-3677.56"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge67" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8598.73,-4472.25C8731.59,-4466.2 8995.53,-4454.19 9172.71,-4446.13"/>
<polygon fill="black" stroke="black" points="9173.1,-4449.62 9182.93,-4445.66 9172.78,-4442.62 9173.1,-4449.62"/>
</g>
<!-- price_train._iter_lots -->
<g id="node62" class="node">
<title>price_train._iter_lots</title>
<g id="a_node62"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7632.5,-2141.52 7321.5,-2141.52 7321.5,-2102.52 7632.5,-2102.52 7632.5,-2141.52"/>
<text text-anchor="middle" x="7477" y="-2115.12" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge69" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7632.83,-2109C7773.67,-2100.84 7967.58,-2099.99 8022,-2151.02 8121.57,-2244.38 7958.81,-2362.25 8058,-2456.02 8105.36,-2500.79 8279.82,-2499.62 8398.69,-2493.04"/>
<polygon fill="black" stroke="black" points="8399.16,-2496.52 8408.94,-2492.45 8398.75,-2489.53 8399.16,-2496.52"/>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge70" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7632.79,-2109.39C7773.32,-2101.55 7966.77,-2100.96 8022,-2151.02 8100.61,-2222.27 7980.77,-2314.26 8058,-2387.02 8102.63,-2429.06 8259.04,-2435.69 8376.31,-2434.31"/>
<polygon fill="black" stroke="black" points="8376.51,-2437.81 8386.46,-2434.17 8376.42,-2430.81 8376.51,-2437.81"/>
</g>
<!-- price_train.main -->
<g id="node63" class="node">
<title>price_train.main</title>
<g id="a_node63"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6488,-1114.02 6258,-1114.02 6258,-1078.02 6488,-1078.02 6488,-1114.02"/>
<text text-anchor="middle" x="6373" y="-1089.86" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge71" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6488.42,-1096.4C6756.5,-1096.93 7446.12,-1096.13 8022,-1077.02 8080.09,-1075.09 8142,-1072.28 8201.62,-1069.2"/>
<polygon fill="black" stroke="black" points="8202.13,-1072.68 8211.94,-1068.66 8201.77,-1065.69 8202.13,-1072.68"/>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge72" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6488.06,-1078.48C6600.64,-1061.8 6777.79,-1037.19 6932,-1023.02 7028.66,-1014.13 7135.26,-1007.71 7228.29,-1003.2"/>
<polygon fill="black" stroke="black" points="7228.58,-1006.69 7238.4,-1002.72 7228.24,-999.7 7228.58,-1006.69"/>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge73" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6431.93,-1114.07C6544.22,-1152.49 6789.8,-1253.96 6896,-1435.02 6957.29,-1539.52 6854.89,-1885.57 6932,-1979.02 7022.77,-2089.02 7187.02,-2120.05 7311.37,-2126.41"/>
<polygon fill="black" stroke="black" points="7311.24,-2129.91 7321.39,-2126.88 7311.56,-2122.92 7311.24,-2129.91"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node64" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node64"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="8022,-388.52 6932,-388.52 6932,-311.52 8022,-311.52 8022,-388.52"/>
<text text-anchor="middle" x="7477" y="-334.12" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge74" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6488.24,-1103.45C6609.08,-1104.45 6795.82,-1085.07 6896,-969.02 6952.87,-903.13 6880.57,-649.23 6932,-579.02 7004.59,-479.91 7128.49,-423.41 7239.72,-391.34"/>
<polygon fill="black" stroke="black" points="7240.75,-394.69 7249.42,-388.6 7238.84,-387.95 7240.75,-394.69"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node65" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node65"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="7689.5,-1801.52 7264.5,-1801.52 7264.5,-1762.52 7689.5,-1762.52 7689.5,-1801.52"/>
<text text-anchor="middle" x="7477" y="-1775.12" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge75" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6429.91,-1114.06C6540.32,-1152.91 6785.18,-1255.79 6896,-1435.02 6933.4,-1495.5 6880.24,-1704.24 6932,-1753.02 6978.08,-1796.43 7124.76,-1802.37 7254.21,-1798.15"/>
<polygon fill="black" stroke="black" points="7254.41,-1801.65 7264.29,-1797.8 7254.17,-1794.65 7254.41,-1801.65"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node83" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node83"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="8694.5,-301.02 8335.5,-301.02 8335.5,-265.02 8694.5,-265.02 8694.5,-301.02"/>
<text text-anchor="middle" x="8515" y="-277.32" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge299" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8022.17,-314.82C8131.13,-307.78 8238.55,-300.83 8325.06,-295.23"/>
<polygon fill="black" stroke="black" points="8325.48,-298.71 8335.24,-294.58 8325.03,-291.73 8325.48,-298.71"/>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge300" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7689.52,-1787.53C7909.04,-1793.25 8243.21,-1801.96 8410.7,-1806.32"/>
<polygon fill="black" stroke="black" points="8410.67,-1809.82 8420.76,-1806.59 8410.85,-1802.83 8410.67,-1809.82"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge76" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9461.23,-1517.94C9534.06,-1521.52 9628.71,-1514.31 9696,-1466.02 9912.25,-1310.82 9978.38,-961.21 9994.22,-850.98"/>
<polygon fill="black" stroke="black" points="9997.73,-851.17 9995.64,-840.78 9990.8,-850.2 9997.73,-851.17"/>
</g>
<!-- caption_io.write_caption -->
<g id="node69" class="node">
<title>caption_io.write_caption</title>
<g id="a_node69"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="7643.5,-1522.02 7310.5,-1522.02 7310.5,-1486.02 7643.5,-1486.02 7643.5,-1522.02"/>
<text text-anchor="middle" x="7477" y="-1497.86" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge84" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7643.7,-1513.2C7753.18,-1514.7 7898.68,-1507.87 8022,-1472.02 8039.58,-1466.91 8040.31,-1456.7 8058,-1452.02 8273.45,-1395.03 8932.46,-1418.62 9217.41,-1432.08"/>
<polygon fill="black" stroke="black" points="9217.65,-1435.59 9227.8,-1432.57 9217.98,-1428.6 9217.65,-1435.59"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge85" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7565.81,-1485.98C7685.47,-1466.99 7898.89,-1453.83 8022,-1569.02 8085.4,-1628.33 7994.19,-1702.14 8058,-1761.02 8155.11,-1850.61 8317.97,-1844.2 8420.51,-1828.62"/>
<polygon fill="black" stroke="black" points="8421.22,-1832.05 8430.55,-1827.04 8420.13,-1825.14 8421.22,-1832.05"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge86" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M7643.81,-1504.02C8015.96,-1504.02 8910.31,-1504.02 9232.66,-1504.02"/>
<polygon fill="black" stroke="black" points="9232.96,-1507.52 9242.96,-1504.02 9232.96,-1500.52 9232.96,-1507.52"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge87" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7643.52,-1508.88C8030.06,-1520.42 8960.39,-1549.37 8972,-1561.02 9052,-1641.24 8964.21,-2475.53 9008,-2580.02 9073.85,-2737.12 9241.08,-2866.56 9314.97,-2918.07"/>
<polygon fill="black" stroke="black" points="9313.28,-2921.16 9323.5,-2923.96 9317.26,-2915.4 9313.28,-2921.16"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node70" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node70"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7683,-4634.02 7271,-4634.02 7271,-4596.02 7683,-4596.02 7683,-4634.02"/>
<text text-anchor="middle" x="7477" y="-4608.29" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- build_site._load_ontology -->
<g id="node71" class="node">
<title>build_site._load_ontology</title>
<g id="a_node71"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8671.5,-989.02 8358.5,-989.02 8358.5,-953.02 8671.5,-953.02 8671.5,-989.02"/>
<text text-anchor="middle" x="8515" y="-965.42" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge88" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8671.62,-959C8763.61,-958.37 8879.76,-969.25 8972,-1016.02 9156.27,-1109.45 9292.8,-1333.32 9336.29,-1411.51"/>
<polygon fill="black" stroke="black" points="9333.47,-1413.64 9341.35,-1420.72 9339.6,-1410.27 9333.47,-1413.64"/>
</g>
<!-- build_site._load_clusters -->
<g id="node72" class="node">
<title>build_site._load_clusters</title>
<g id="a_node72"><a xlink:title="Return precomputed item clusters.">
<polygon fill="none" stroke="black" points="8692.5,-900.02 8337.5,-900.02 8337.5,-862.02 8692.5,-862.02 8692.5,-900.02"/>
<text text-anchor="middle" x="8515" y="-874.29" font-family="Times,serif" font-size="27.16">build_site._load_clusters</text>
</a>
</g>
</g>
<!-- build_site._load_clusters&#45;&gt;notes_utils.load_json -->
<g id="edge89" class="edge">
<title>build_site._load_clusters&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8692.69,-874.49C8781.77,-878.58 8888.35,-895.3 8972,-944.02 9171.06,-1059.93 9301.08,-1325.22 9339.28,-1411.42"/>
<polygon fill="black" stroke="black" points="9336.17,-1413.03 9343.38,-1420.79 9342.58,-1410.23 9336.17,-1413.03"/>
</g>
<!-- build_site._compile_locale -->
<g id="node73" class="node">
<title>build_site._compile_locale</title>
<g id="a_node73"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="6540,-585.02 6206,-585.02 6206,-549.02 6540,-549.02 6540,-585.02"/>
<text text-anchor="middle" x="6373" y="-561.14" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node74" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node74"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="5685,-584.52 5308,-584.52 5308,-543.52 5685,-543.52 5685,-584.52"/>
<text text-anchor="middle" x="5496.5" y="-556.77" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge90" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M5685.1,-564.66C5836.33,-565.18 6047.47,-565.9 6195.62,-566.41"/>
<polygon fill="black" stroke="black" points="6195.72,-569.91 6205.74,-566.45 6195.75,-562.91 6195.72,-569.91"/>
</g>
<!-- build_site._iter_lots -->
<g id="node75" class="node">
<title>build_site._iter_lots</title>
<g id="a_node75"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7703,-2877.52 7251,-2877.52 7251,-2820.52 7703,-2820.52 7703,-2877.52"/>
<text text-anchor="middle" x="7477" y="-2838.12" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge91" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7703.21,-2866.92C7804.47,-2866.64 7923.16,-2854.36 8022,-2811.02 8042.15,-2802.18 8040.67,-2790.58 8058,-2777.02 8201.97,-2664.36 8390.02,-2553.96 8472.35,-2507.26"/>
<polygon fill="black" stroke="black" points="8474.41,-2510.12 8481.39,-2502.15 8470.96,-2504.03 8474.41,-2510.12"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge92" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7703.12,-2861.47C7831.99,-2863.35 7976.83,-2854.78 8022,-2811.02 8078.79,-2755.99 8000.98,-2511.8 8058,-2457.02 8102.11,-2414.63 8258.63,-2413.16 8376.07,-2418.68"/>
<polygon fill="black" stroke="black" points="8376.07,-2422.19 8386.23,-2419.18 8376.42,-2415.2 8376.07,-2422.19"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge93" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7651.85,-2820.5C7774.43,-2811.29 7932.19,-2823.51 8022,-2925.02 8101.49,-3014.86 7977.48,-4995.1 8058,-5084.02 8149.47,-5185.03 8322.18,-5174.75 8426.8,-5156.78"/>
<polygon fill="black" stroke="black" points="8427.47,-5160.22 8436.7,-5155.02 8426.24,-5153.33 8427.47,-5160.22"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge95" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7660.55,-2820.5C7781.35,-2812.93 7933.31,-2827.15 8022,-2925.02 8088.24,-2998.1 8005.17,-3728.72 8058,-3812.02 8122.46,-3913.67 8245.46,-3974.26 8347.48,-4008.84"/>
<polygon fill="black" stroke="black" points="8346.38,-4012.16 8356.98,-4012.01 8348.59,-4005.52 8346.38,-4012.16"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge94" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7703.12,-2859.23C7904.3,-2868.36 8193.27,-2881.46 8366.42,-2889.32"/>
<polygon fill="black" stroke="black" points="8366.49,-2892.83 8376.63,-2889.78 8366.8,-2885.83 8366.49,-2892.83"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge96" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7703.02,-2830.77C7809.76,-2833.64 7933.08,-2855.08 8022,-2925.02 8056.19,-2951.9 8032.43,-2980.83 8058,-3016.02 8177.98,-3181.15 8386.46,-3317.08 8473.75,-3369.64"/>
<polygon fill="black" stroke="black" points="8472.17,-3372.78 8482.55,-3374.9 8475.76,-3366.77 8472.17,-3372.78"/>
</g>
<!-- build_site._copy_images -->
<g id="node76" class="node">
<title>build_site._copy_images</title>
<g id="a_node76"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="6536.5,-779.02 6209.5,-779.02 6209.5,-743.02 6536.5,-743.02 6536.5,-779.02"/>
<text text-anchor="middle" x="6373" y="-754.86" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node77" class="node">
<title>build_site._copy_static</title>
<g id="a_node77"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="6501,-531.02 6245,-531.02 6245,-495.02 6501,-495.02 6501,-531.02"/>
<text text-anchor="middle" x="6373" y="-507.72" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node78" class="node">
<title>build_site._load_state</title>
<g id="a_node78"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="5687.5,-760.52 5305.5,-760.52 5305.5,-715.52 5687.5,-715.52 5687.5,-760.52"/>
<text text-anchor="middle" x="5496.5" y="-729.64" font-family="Times,serif" font-size="33.60">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge97" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5594.14,-760.57C5664.63,-775.99 5762.7,-795.33 5850,-805.02 5880,-808.34 7998.11,-858.57 8022,-877.02 8066.41,-911.3 8015,-961.97 8058,-998.02 8098.89,-1032.29 8149.58,-1052.19 8202.16,-1062.89"/>
<polygon fill="black" stroke="black" points="8201.51,-1066.33 8211.99,-1064.78 8202.83,-1059.46 8201.51,-1066.33"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge98" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M5554.37,-715.51C5623.11,-689.58 5742.93,-648.44 5850,-632.02 6105.48,-592.83 6827.37,-599.47 7217.74,-606.43"/>
<polygon fill="black" stroke="black" points="7217.7,-609.92 7227.76,-606.61 7217.82,-602.93 7217.7,-609.92"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge99" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M5687.64,-716.87C5740.21,-711.34 5797.28,-705.65 5850,-701.02 5932.34,-693.78 6022.09,-687.01 6103.58,-681.29"/>
<polygon fill="black" stroke="black" points="6104.26,-684.76 6113.99,-680.57 6103.77,-677.77 6104.26,-684.76"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge100" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M5630.16,-760.57C5696.06,-770.82 5777,-781.99 5850,-788.02 5970.29,-797.95 7919.54,-776.22 8022,-840.02 8051.36,-858.3 8029.7,-889.13 8058,-909.02 8141.57,-967.74 8255.39,-983.27 8348.41,-984.11"/>
<polygon fill="black" stroke="black" points="8348.48,-987.61 8358.49,-984.14 8348.5,-980.61 8348.48,-987.61"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_clusters -->
<g id="edge101" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_clusters</title>
<path fill="none" stroke="black" d="M5687.77,-733.67C6235.95,-721.63 7794.17,-690.98 8022,-726.02 8186.4,-751.3 8371.23,-821.48 8460.3,-858.11"/>
<polygon fill="black" stroke="black" points="8459.08,-861.39 8469.65,-861.97 8461.75,-854.92 8459.08,-861.39"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge102" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M5588.35,-760.58C5663.19,-784.44 5764.72,-830.13 5814,-911.02 5900.92,-1053.67 5752.73,-2278.21 5850,-2414.02 6164.26,-2852.78 6871.39,-2884.87 7240.95,-2868.7"/>
<polygon fill="black" stroke="black" points="7241.14,-2872.19 7250.97,-2868.24 7240.83,-2865.2 7241.14,-2872.19"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge103" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M5687.52,-743.01C5839.77,-747.02 6051.57,-752.59 6199.1,-756.47"/>
<polygon fill="black" stroke="black" points="6199.08,-759.97 6209.17,-756.73 6199.26,-752.97 6199.08,-759.97"/>
</g>
<!-- build_site._categorise -->
<g id="node79" class="node">
<title>build_site._categorise</title>
<g id="a_node79"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal``. ``sell_item`` lots are further&#10;grouped by ``clusters`` when available and fall back to ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="7966,-1304.02 6988,-1304.02 6988,-1200.02 7966,-1200.02 7966,-1304.02"/>
<text text-anchor="middle" x="7477" y="-1230.13" font-family="Times,serif" font-size="87.36">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge104" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7966.04,-1257.2C8130.19,-1258.94 8298.36,-1260.73 8404.33,-1261.85"/>
<polygon fill="black" stroke="black" points="8404.35,-1265.35 8414.39,-1261.96 8404.43,-1258.35 8404.35,-1265.35"/>
</g>
<!-- build_site._render_site -->
<g id="node80" class="node">
<title>build_site._render_site</title>
<g id="a_node80"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="6896,-476.52 5850,-476.52 5850,-369.52 6896,-369.52 6896,-476.52"/>
<text text-anchor="middle" x="6373" y="-400.39" font-family="Times,serif" font-size="90.16">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge105" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6850.84,-476.53C6866.11,-479.53 6881.19,-482.69 6896,-486.02 6912.46,-489.71 6915.42,-494.95 6932,-498.02 7051.21,-520.06 7935.3,-461.28 8022,-546.02 8107.53,-629.61 7987.45,-986.44 8058,-1083.02 8138.49,-1193.21 8297.02,-1235.98 8404.27,-1252.56"/>
<polygon fill="black" stroke="black" points="8404.07,-1256.07 8414.48,-1254.08 8405.11,-1249.14 8404.07,-1256.07"/>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge106" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6879.23,-476.65C6884.91,-479.65 6890.5,-482.77 6896,-486.02 6919.58,-499.94 6907.88,-523.05 6932,-536.02 7038.77,-593.39 7936.13,-493.48 8022,-579.02 8087.4,-644.16 8004.36,-1333.89 8058,-1409.02 8124.12,-1501.62 8245.68,-1546.32 8346.67,-1567.9"/>
<polygon fill="black" stroke="black" points="8346.19,-1571.37 8356.69,-1569.98 8347.61,-1564.52 8346.19,-1571.37"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge107" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6896.2,-419.55C7818.86,-414.66 9645.68,-410.96 9696,-458.02 9727.87,-487.82 9727.51,-805.62 9732,-849.02 9829.45,-1790.31 9971.09,-2944.04 9995.01,-3137.79"/>
<polygon fill="black" stroke="black" points="9991.57,-3138.49 9996.27,-3147.98 9998.51,-3137.63 9991.57,-3138.49"/>
</g>
<!-- build_site.build_page -->
<g id="node81" class="node">
<title>build_site.build_page</title>
<g id="a_node81"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="7946.5,-3036.02 7007.5,-3036.02 7007.5,-2934.02 7946.5,-2934.02 7946.5,-3036.02"/>
<text text-anchor="middle" x="7477" y="-2963.47" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge108" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6887.09,-476.64C6890.13,-479.67 6893.1,-482.79 6896,-486.02 6985.21,-585.13 6845.8,-2784.27 6932,-2886.02 6951.22,-2908.7 6973.75,-2927.35 6998.51,-2942.6"/>
<polygon fill="black" stroke="black" points="6996.98,-2945.76 7007.36,-2947.85 7000.55,-2939.74 6996.98,-2945.76"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge109" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7946.54,-2947.33C7974.76,-2931.28 8000.41,-2911.13 8022,-2886.02 8111.34,-2782.07 7966.68,-1755.22 8058,-1653.02 8144.2,-1556.54 8303.56,-1556.04 8409.19,-1568.74"/>
<polygon fill="black" stroke="black" points="8408.88,-1572.23 8419.24,-1570.01 8409.76,-1565.29 8408.88,-1572.23"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge110" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7946.74,-2986.83C8086.51,-2987.36 8231.11,-2987.92 8339.33,-2988.34"/>
<polygon fill="black" stroke="black" points="8339.34,-2991.84 8349.36,-2988.38 8339.37,-2984.84 8339.34,-2991.84"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge111" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7946.56,-3022.65C7974.68,-3038.49 8000.3,-3058.33 8022,-3083.02 8075.53,-3143.93 8014.27,-3743.72 8058,-3812.02 8123.03,-3913.57 8246.33,-3974.21 8348.33,-4008.84"/>
<polygon fill="black" stroke="black" points="8347.23,-4012.16 8357.82,-4012.01 8349.45,-4005.52 8347.23,-4012.16"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge112" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7866.46,-3036.07C7919.62,-3048.5 7972.8,-3063.92 8022,-3083.02 8213.22,-3157.23 8410.81,-3308.9 8484.22,-3368.34"/>
<polygon fill="black" stroke="black" points="8482.18,-3371.19 8492.15,-3374.79 8486.6,-3365.76 8482.18,-3371.19"/>
</g>
<!-- build_site.main -->
<g id="node82" class="node">
<title>build_site.main</title>
<g id="a_node82"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5107.5,-415.52 4689.5,-415.52 4689.5,-350.52 5107.5,-350.52 5107.5,-415.52"/>
<text text-anchor="middle" x="4898.5" y="-369.96" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge113" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M4916.58,-350.3C4953.69,-283.26 5048.92,-131.75 5179,-74.02 5436.95,40.48 5531.78,-73.12 5814,-74.02 7218,-78.47 7599.05,139.66 8972,-154.02 9307.22,-225.72 9420.2,-216.42 9696,-420.02 9836.06,-523.41 9942.6,-709.03 9981.96,-784.13"/>
<polygon fill="black" stroke="black" points="9978.93,-785.89 9986.64,-793.15 9985.14,-782.66 9978.93,-785.89"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge114" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M4903.42,-415.53C4917.75,-518.23 4977.48,-836.46 5179,-965.02 5348.07,-1072.87 6669.47,-1029.15 7228.05,-1005.45"/>
<polygon fill="black" stroke="black" points="7228.41,-1008.94 7238.25,-1005.02 7228.11,-1001.94 7228.41,-1008.94"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge115" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M4949.17,-415.63C5003.3,-449.46 5093.64,-500.98 5179,-527.02 5216.68,-538.51 5257.89,-546.47 5297.75,-551.98"/>
<polygon fill="black" stroke="black" points="5297.48,-555.47 5307.85,-553.33 5298.4,-548.53 5297.48,-555.47"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge116" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5107.82,-406.24C5131.82,-408.88 5155.94,-411.52 5179,-414.02 5477.14,-446.32 5551.06,-461.2 5850,-485.02 5980.37,-495.4 6129.36,-502.97 6234.71,-507.6"/>
<polygon fill="black" stroke="black" points="6234.63,-511.1 6244.77,-508.04 6234.93,-504.1 6234.63,-511.1"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge117" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M4937.43,-415.71C4989.53,-459.6 5087.21,-538.37 5179,-593.02 5260.67,-641.64 5361.44,-685.24 5427.02,-711.64"/>
<polygon fill="black" stroke="black" points="5425.85,-714.95 5436.44,-715.41 5428.46,-708.45 5425.85,-714.95"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge118" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M4900.21,-415.79C4904.73,-534.77 4937.88,-946.14 5179,-1123.02 5454.65,-1325.21 6388.68,-1314.68 6977.38,-1285.51"/>
<polygon fill="black" stroke="black" points="6977.94,-1288.98 6987.75,-1284.99 6977.59,-1281.99 6977.94,-1288.98"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge119" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5107.74,-388.67C5297.53,-393.83 5586.08,-401.67 5839.63,-408.55"/>
<polygon fill="black" stroke="black" points="5839.68,-412.06 5849.77,-408.83 5839.87,-405.06 5839.68,-412.06"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge120" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5107.68,-354.85C5131.71,-352 5155.87,-349.31 5179,-347.02 5476.49,-317.46 5551.26,-311.42 5850,-300.02 6778.01,-264.59 7889.16,-274.28 8325.24,-280.1"/>
<polygon fill="black" stroke="black" points="8325.37,-283.61 8335.41,-280.24 8325.46,-276.61 8325.37,-283.61"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node84" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node84"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="5814,-136.52 5179,-136.52 5179,-83.52 5814,-83.52 5814,-136.52"/>
<text text-anchor="middle" x="5496.5" y="-99.81" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge121" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M4927.39,-350.13C4973.71,-298.02 5072.04,-197.61 5179,-151.02 5188.53,-146.87 5198.36,-143.1 5208.4,-139.69"/>
<polygon fill="black" stroke="black" points="5209.66,-142.96 5218.08,-136.53 5207.49,-136.31 5209.66,-142.96"/>
</g>
<!-- price_utils.load_price_model -->
<g id="node85" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node85"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="6607.5,-351.02 6138.5,-351.02 6138.5,-309.02 6607.5,-309.02 6607.5,-351.02"/>
<text text-anchor="middle" x="6373" y="-321.93" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge122" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M5107.74,-375.52C5376.48,-365.85 5843.27,-349.05 6128.24,-338.79"/>
<polygon fill="black" stroke="black" points="6128.44,-342.28 6138.3,-338.43 6128.19,-335.29 6128.44,-342.28"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node86" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node86"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6733.5,-252.52 6012.5,-252.52 6012.5,-193.52 6733.5,-193.52 6733.5,-252.52"/>
<text text-anchor="middle" x="6373" y="-211.33" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge123" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M4960.15,-350.4C5015.42,-322.51 5100.21,-284.23 5179,-267.02 5450.23,-207.75 5764.24,-198.46 6002.01,-203.07"/>
<polygon fill="black" stroke="black" points="6002.14,-206.57 6012.21,-203.28 6002.28,-199.57 6002.14,-206.57"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node87" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node87"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="7847,-155.02 7107,-155.02 7107,-97.02 7847,-97.02 7847,-155.02"/>
<text text-anchor="middle" x="7477" y="-114.73" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge124" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M4934.96,-350.32C4984.97,-306.58 5081.11,-230.94 5179,-200.02 5356.13,-144.06 6491.12,-130.36 7096.62,-127.04"/>
<polygon fill="black" stroke="black" points="7096.85,-130.54 7106.83,-126.99 7096.81,-123.54 7096.85,-130.54"/>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge301" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6551.78,-309.01C6656.48,-304.08 6788.96,-311.15 6896,-360.02 6916.87,-369.54 6911.3,-387.12 6932,-397.02 7370.98,-606.77 7580.15,-294.38 8022,-498.02 8042.27,-507.36 8037.58,-524.03 8058,-533.02 8151.11,-573.99 8897.38,-516.87 8972,-586.02 9015.91,-626.71 8988.5,-796.41 9008,-853.02 9088.95,-1087.98 9269.19,-1333.36 9330.28,-1412.66"/>
<polygon fill="black" stroke="black" points="9327.59,-1414.89 9336.48,-1420.65 9333.12,-1410.6 9327.59,-1414.89"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge303" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6630.28,-252.55C6779.46,-269.74 6969.48,-291.64 7131.6,-310.32"/>
<polygon fill="black" stroke="black" points="7131.41,-313.83 7141.74,-311.49 7132.21,-306.87 7131.41,-313.83"/>
</g>
<!-- price_utils.predict_price -->
<g id="node171" class="node">
<title>price_utils.predict_price</title>
<g id="a_node171"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7682,-254.52 7272,-254.52 7272,-211.52 7682,-211.52 7682,-254.52"/>
<text text-anchor="middle" x="7477" y="-224.87" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge304" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6733.69,-226.28C6908.19,-227.86 7111.92,-229.71 7261.76,-231.07"/>
<polygon fill="black" stroke="black" points="7261.97,-234.57 7272,-231.16 7262.03,-227.57 7261.97,-234.57"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node172" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node172"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8708.5,-202.52 8321.5,-202.52 8321.5,-163.52 8708.5,-163.52 8708.5,-202.52"/>
<text text-anchor="middle" x="8515" y="-176.12" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge305" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6733.78,-208.12C6799.71,-205.78 6867.92,-203.61 6932,-202.02 7427.33,-189.72 8010.09,-185.32 8311.13,-183.79"/>
<polygon fill="black" stroke="black" points="8311.3,-187.29 8321.28,-183.74 8311.26,-180.29 8311.3,-187.29"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node174" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node174"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9608.5,-79.02 9095.5,-79.02 9095.5,-41.02 9608.5,-41.02 9608.5,-79.02"/>
<text text-anchor="middle" x="9352" y="-53.29" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge306" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6467.58,-193.5C6577.46,-160.45 6765.85,-108.8 6932,-88.02 7709.55,9.27 8638.63,-20.38 9085.35,-43.61"/>
<polygon fill="black" stroke="black" points="9085.31,-47.12 9095.48,-44.14 9085.68,-40.12 9085.31,-47.12"/>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge307" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7726.03,-155.02C7819.2,-167.4 7925.81,-183.33 8022,-202.02 8038.19,-205.16 8041.84,-207.73 8058,-211.02 8161.71,-232.12 8279.75,-250.61 8369.75,-263.57"/>
<polygon fill="black" stroke="black" points="8369.36,-267.05 8379.76,-265 8370.35,-260.12 8369.36,-267.05"/>
</g>
<!-- caption._identify_size -->
<g id="node88" class="node">
<title>caption._identify_size</title>
<g id="a_node88"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="8643.5,-1346.02 8386.5,-1346.02 8386.5,-1310.02 8643.5,-1310.02 8643.5,-1346.02"/>
<text text-anchor="middle" x="8515" y="-1322.32" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node89" class="node">
<title>caption._prepare_image</title>
<g id="a_node89"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="7694,-1430.02 7260,-1430.02 7260,-1384.02 7694,-1384.02 7694,-1430.02"/>
<text text-anchor="middle" x="7477" y="-1398.58" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge125" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M7694.24,-1416.25C7795.57,-1415.05 7916.85,-1405.59 8022,-1375.02 8039.58,-1369.91 8040.43,-1360.13 8058,-1355.02 8161.67,-1324.85 8284.05,-1319.14 8375.91,-1320.39"/>
<polygon fill="black" stroke="black" points="8376.05,-1323.9 8386.11,-1320.56 8376.17,-1316.9 8376.05,-1323.9"/>
</g>
<!-- caption._guess_chat -->
<g id="node90" class="node">
<title>caption._guess_chat</title>
<g id="a_node90"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="8611,-1400.02 8419,-1400.02 8419,-1364.02 8611,-1364.02 8611,-1400.02"/>
<text text-anchor="middle" x="8515" y="-1377.85" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node91" class="node">
<title>caption.caption_file</title>
<g id="a_node91"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="6676,-1517.52 6070,-1517.52 6070,-1444.52 6676,-1444.52 6676,-1517.52"/>
<text text-anchor="middle" x="6373" y="-1466.03" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge126" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6423.74,-1444.51C6517.41,-1378.3 6728.9,-1240.64 6932,-1191.02 7152.24,-1137.2 8753.46,-1175.64 8972,-1236.02 9110.46,-1274.27 9254.93,-1369.73 9318.13,-1414.77"/>
<polygon fill="black" stroke="black" points="9316.33,-1417.79 9326.49,-1420.78 9320.41,-1412.1 9316.33,-1417.79"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge128" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6448.35,-1517.66C6568.28,-1581.43 6800.63,-1725.33 6896,-1925.02 6930.25,-1996.73 6880.1,-3294.84 6932,-3355.02 7253.17,-3727.4 7554.17,-3393.5 8022,-3545.02 8199.82,-3602.61 8394.8,-3713.36 8475.62,-3761.6"/>
<polygon fill="black" stroke="black" points="8474.08,-3764.75 8484.45,-3766.89 8477.67,-3758.75 8474.08,-3764.75"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge127" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6425.94,-1517.55C6524.76,-1588.64 6743.59,-1753.67 6896,-1925.02 6915.17,-1946.57 6906.92,-1964.76 6932,-1979.02 7129.31,-2091.17 8809.81,-1924.25 8972,-2083.02 9051.13,-2160.47 8963.31,-2478.7 9008,-2580.02 9076.82,-2736.06 9242.83,-2866.31 9315.7,-2918.06"/>
<polygon fill="black" stroke="black" points="9313.92,-2921.08 9324.11,-2923.97 9317.95,-2915.36 9313.92,-2921.08"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge129" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M6676.22,-1487.32C6876.51,-1491.5 7132.31,-1496.84 7299.98,-1500.34"/>
<polygon fill="black" stroke="black" points="7300.07,-1503.84 7310.14,-1500.55 7300.22,-1496.85 7300.07,-1503.84"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge130" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M6676.22,-1460.72C6857.37,-1448.56 7083.94,-1433.34 7249.63,-1422.22"/>
<polygon fill="black" stroke="black" points="7250.22,-1425.68 7259.96,-1421.52 7249.75,-1418.7 7250.22,-1425.68"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge131" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M6676.06,-1478.06C7134.55,-1472.89 7959.78,-1460.64 8022,-1439.02 8040.89,-1432.45 8039.24,-1418.96 8058,-1412.02 8172.32,-1369.69 8313.68,-1367.36 8408.44,-1372.27"/>
<polygon fill="black" stroke="black" points="8408.43,-1375.78 8418.61,-1372.83 8408.82,-1368.79 8408.43,-1375.78"/>
</g>
<!-- caption.main -->
<g id="node92" class="node">
<title>caption.main</title>
<g id="a_node92"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="5589,-1499.02 5404,-1499.02 5404,-1463.02 5589,-1463.02 5589,-1499.02"/>
<text text-anchor="middle" x="5496.5" y="-1474.86" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge132" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M5589.02,-1481.02C5699.92,-1481.02 5892.62,-1481.02 6059.09,-1481.02"/>
<polygon fill="black" stroke="black" points="6059.51,-1484.52 6069.51,-1481.02 6059.51,-1477.52 6059.51,-1484.52"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node93" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node93"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="10143.5,-5538.02 9855.5,-5538.02 9855.5,-5502.02 10143.5,-5502.02 10143.5,-5538.02"/>
<text text-anchor="middle" x="9999.5" y="-5515.23" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node94" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node94"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="10123.5,-5484.02 9875.5,-5484.02 9875.5,-5448.02 10123.5,-5448.02 10123.5,-5484.02"/>
<text text-anchor="middle" x="9999.5" y="-5461.97" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge133" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9647.42,-5505.33C9715.78,-5508.19 9785.86,-5511.12 9845.24,-5513.6"/>
<polygon fill="black" stroke="black" points="9845.3,-5517.11 9855.44,-5514.03 9845.59,-5510.12 9845.3,-5517.11"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge134" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9647.42,-5480.7C9723.64,-5477.51 9801.99,-5474.24 9865.28,-5471.59"/>
<polygon fill="black" stroke="black" points="9865.46,-5475.08 9875.3,-5471.17 9865.16,-5468.09 9865.46,-5475.08"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node97" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node97"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7695,-1366.02 7259,-1366.02 7259,-1322.02 7695,-1322.02 7695,-1366.02"/>
<text text-anchor="middle" x="7477" y="-1335.7" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge137" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7695.04,-1344.77C7795.31,-1341.77 7915.51,-1333.42 8022,-1313.02 8038.56,-1309.84 8041.48,-1304.41 8058,-1301.02 8174.64,-1277.07 8311,-1268.14 8404.02,-1264.85"/>
<polygon fill="black" stroke="black" points="8404.42,-1268.34 8414.29,-1264.5 8404.18,-1261.34 8404.42,-1268.34"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node98" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node98"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7737.5,-4073.52 7216.5,-4073.52 7216.5,-4026.52 7737.5,-4026.52 7737.5,-4073.52"/>
<text text-anchor="middle" x="7477" y="-4041.52" font-family="Times,serif" font-size="35.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge138" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7596.27,-4073.53C7721.99,-4090.88 7916.88,-4094.4 8022,-3978.02 8111.49,-3878.94 7992.26,-2893.21 8058,-2777.02 8142.81,-2627.1 8339.45,-2541.78 8444.65,-2505.32"/>
<polygon fill="black" stroke="black" points="8445.9,-2508.59 8454.23,-2502.05 8443.64,-2501.97 8445.9,-2508.59"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge139" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7737.83,-4033.7C7857.54,-4032.37 7981.9,-4041.92 8022,-4083.02 8099.72,-4162.68 7982.5,-5002.24 8058,-5084.02 8149.92,-5183.57 8320.87,-5174.27 8425.34,-5156.79"/>
<polygon fill="black" stroke="black" points="8425.98,-5160.23 8435.23,-5155.08 8424.78,-5153.33 8425.98,-5160.23"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge142" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7737.76,-4050.02C7886.28,-4050.02 8072.88,-4050.02 8225.9,-4050.02"/>
<polygon fill="black" stroke="black" points="8225.93,-4053.52 8235.93,-4050.02 8225.93,-4046.52 8225.93,-4053.52"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge140" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7597,-4073.54C7722.66,-4090.69 7916.8,-4093.85 8022,-3978.02 8098.02,-3894.31 7982.4,-3045.1 8058,-2961.02 8144.24,-2865.1 8302.83,-2864.24 8408.36,-2876.74"/>
<polygon fill="black" stroke="black" points="8408.05,-2880.23 8418.41,-2877.99 8408.91,-2873.28 8408.05,-2880.23"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge143" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7618.71,-4073.54C7741.78,-4085.45 7916.85,-4079.99 8022,-3978.02 8093.12,-3909.04 8008,-3843.55 8058,-3758.02 8158.17,-3586.66 8371.73,-3463.96 8466.74,-3415.69"/>
<polygon fill="black" stroke="black" points="8468.46,-3418.74 8475.82,-3411.11 8465.32,-3412.48 8468.46,-3418.74"/>
</g>
<!-- oom_utils.prefer_oom_kill -->
<g id="node99" class="node">
<title>oom_utils.prefer_oom_kill</title>
<g id="a_node99"><a xlink:title="Make this process the first OOM victim.">
<polygon fill="none" stroke="black" points="8680,-4440.02 8350,-4440.02 8350,-4404.02 8680,-4404.02 8680,-4440.02"/>
<text text-anchor="middle" x="8515" y="-4416.14" font-family="Times,serif" font-size="24.22">oom_utils.prefer_oom_kill</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge141" class="edge">
<title>moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7737.82,-4035.2C7856.68,-4034.37 7980.28,-4043.91 8022,-4083.02 8115.47,-4170.63 7966.98,-4278.86 8058,-4369.02 8097.33,-4407.98 8228.28,-4420.26 8339.81,-4423.35"/>
<polygon fill="black" stroke="black" points="8339.77,-4426.85 8349.86,-4423.6 8339.95,-4419.85 8339.77,-4426.85"/>
</g>
<!-- telegram_bot._t -->
<g id="node100" class="node">
<title>telegram_bot._t</title>
<g id="a_node100"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5600.5,-5915.02 5392.5,-5915.02 5392.5,-5879.02 5600.5,-5879.02 5600.5,-5915.02"/>
<text text-anchor="middle" x="5496.5" y="-5891.14" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node101" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node101"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5647.5,-5861.02 5345.5,-5861.02 5345.5,-5825.02 5647.5,-5825.02 5647.5,-5861.02"/>
<text text-anchor="middle" x="5496.5" y="-5838.22" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node102" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node102"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6477,-5861.02 6269,-5861.02 6269,-5825.02 6477,-5825.02 6477,-5861.02"/>
<text text-anchor="middle" x="6373" y="-5839.32" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge144" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5647.83,-5843.02C5821.29,-5843.02 6102.61,-5843.02 6258.65,-5843.02"/>
<polygon fill="black" stroke="black" points="6258.75,-5846.52 6268.75,-5843.02 6258.75,-5839.52 6258.75,-5846.52"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node103" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node103"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5647.5,-5417.02 5345.5,-5417.02 5345.5,-5381.02 5647.5,-5381.02 5647.5,-5417.02"/>
<text text-anchor="middle" x="5496.5" y="-5393.72" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge145" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5647.52,-5402.3C6270.97,-5415.64 8640.1,-5462.93 8972,-5419.02 9302.37,-5375.3 9474.56,-5473.05 9696,-5224.02 9979.77,-4904.89 9997.4,-3418.89 9998.44,-3194.44"/>
<polygon fill="black" stroke="black" points="10001.94,-3194.18 9998.48,-3184.17 9994.94,-3194.15 10001.94,-3194.18"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node104" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node104"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9495.5,-5215.02 9208.5,-5215.02 9208.5,-5179.02 9495.5,-5179.02 9495.5,-5215.02"/>
<text text-anchor="middle" x="9352" y="-5191.32" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge146" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9389.54,-5179C9461.37,-5141.52 9620.5,-5047.79 9696,-4919.02 9879.2,-4606.55 9980.64,-3395.02 9996.34,-3194.27"/>
<polygon fill="black" stroke="black" points="9999.84,-3194.47 9997.12,-3184.23 9992.86,-3193.93 9999.84,-3194.47"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node105" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6457,-3384.02 6289,-3384.02 6289,-3348.02 6457,-3348.02 6457,-3384.02"/>
<text text-anchor="middle" x="6373" y="-3362.77" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node106" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node106"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7623,-1068.02 7331,-1068.02 7331,-1032.02 7623,-1032.02 7623,-1068.02"/>
<text text-anchor="middle" x="7477" y="-1045.85" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge147" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7623.14,-1050.02C7772.43,-1050.02 8009.61,-1050.02 8201.72,-1050.02"/>
<polygon fill="black" stroke="black" points="8201.99,-1053.52 8211.99,-1050.02 8201.99,-1046.52 8201.99,-1053.52"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node107" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6534.5,-4532.02 6211.5,-4532.02 6211.5,-4496.02 6534.5,-4496.02 6534.5,-4532.02"/>
<text text-anchor="middle" x="6373" y="-4509.22" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge148" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6534.54,-4512.85C6751.09,-4511.28 7133.16,-4508.5 7337.66,-4507.02"/>
<polygon fill="black" stroke="black" points="7337.88,-4510.52 7347.86,-4506.95 7337.83,-4503.52 7337.88,-4510.52"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node108" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5735,-4916.02 5258,-4916.02 5258,-4876.02 5735,-4876.02 5735,-4916.02"/>
<text text-anchor="middle" x="5496.5" y="-4888.94" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge149" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5586,-4875.98C5658.08,-4865.42 5756.93,-4865.07 5814,-4925.02 5879.41,-4993.72 5785.72,-5708.25 5850,-5778.02 5958.54,-5895.81 6163.37,-5882.71 6281.61,-5862.78"/>
<polygon fill="black" stroke="black" points="6282.47,-5866.18 6291.72,-5861.02 6281.27,-5859.28 6282.47,-5866.18"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge150" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5593.22,-4916.05C5663.79,-4924.77 5757.05,-4922.62 5814,-4867.02 5913.56,-4769.81 5749.9,-4652.67 5850,-4556.02 5969.04,-4441.07 6182.67,-4468.34 6296.22,-4493.7"/>
<polygon fill="black" stroke="black" points="6295.69,-4497.17 6306.22,-4495.99 6297.25,-4490.35 6295.69,-4497.17"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node109" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node109"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5772,-4858.02 5221,-4858.02 5221,-4806.02 5772,-4806.02 5772,-4858.02"/>
<text text-anchor="middle" x="5496.5" y="-4822.32" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge151" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5772.28,-4828.37C5787.68,-4820.33 5801.82,-4810.03 5814,-4797.02 5876.32,-4730.43 5785.3,-4041.29 5850,-3977.02 5932.51,-3895.05 6814.17,-4020.67 6896,-3938.02 6999.3,-3833.67 6829.34,-2722 6932,-2617.02 6994.16,-2553.45 7258.52,-2568.7 7394.49,-2581.28"/>
<polygon fill="black" stroke="black" points="7394.17,-2584.76 7404.45,-2582.21 7394.83,-2577.79 7394.17,-2584.76"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge152" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5772.34,-4835.6C5787.73,-4843.66 5801.85,-4853.97 5814,-4867.02 5883.06,-4941.13 5781.45,-5703.43 5850,-5778.02 5958.38,-5895.95 6163.27,-5882.8 6281.56,-5862.82"/>
<polygon fill="black" stroke="black" points="6282.42,-5866.22 6291.68,-5861.06 6281.22,-5859.33 6282.42,-5866.22"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node110" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node110"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5063.5,-5471.02 4733.5,-5471.02 4733.5,-5435.02 5063.5,-5435.02 5063.5,-5471.02"/>
<text text-anchor="middle" x="4898.5" y="-5446.86" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge153" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5063.52,-5436.86C5101.44,-5433.21 5141.62,-5429.42 5179,-5426.02 5229.74,-5421.4 5285.08,-5416.6 5335.08,-5412.35"/>
<polygon fill="black" stroke="black" points="5335.67,-5415.81 5345.34,-5411.48 5335.08,-5408.84 5335.67,-5415.81"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node111" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node111"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5010.5,-5888.02 4786.5,-5888.02 4786.5,-5852.02 5010.5,-5852.02 5010.5,-5888.02"/>
<text text-anchor="middle" x="4898.5" y="-5865.85" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge154" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5010.55,-5875.05C5116.59,-5879.85 5275.59,-5887.05 5382.32,-5891.89"/>
<polygon fill="black" stroke="black" points="5382.34,-5895.39 5392.49,-5892.35 5382.66,-5888.4 5382.34,-5895.39"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge155" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5010.55,-5864.98C5101.9,-5860.85 5232.55,-5854.93 5335.23,-5850.28"/>
<polygon fill="black" stroke="black" points="5335.56,-5853.76 5345.39,-5849.82 5335.24,-5846.77 5335.56,-5853.76"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node112" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node112"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5073,-5945.52 4724,-5945.52 4724,-5906.52 5073,-5906.52 5073,-5945.52"/>
<text text-anchor="middle" x="4898.5" y="-5919.12" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge156" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5073.09,-5917.57C5172.59,-5912.73 5294.63,-5906.79 5381.91,-5902.54"/>
<polygon fill="black" stroke="black" points="5382.29,-5906.03 5392.11,-5902.05 5381.95,-5899.04 5382.29,-5906.03"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge157" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5073.27,-5916.68C5097.2,-5912.14 5121.07,-5905.8 5143,-5897.02 5161.57,-5889.58 5160.31,-5877.14 5179,-5870.02 5227.79,-5851.41 5283.79,-5842.87 5334.99,-5839.5"/>
<polygon fill="black" stroke="black" points="5335.38,-5842.99 5345.16,-5838.9 5334.97,-5836 5335.38,-5842.99"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge158" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5073.39,-5932.96C5257.57,-5938.6 5556.69,-5942.88 5814,-5924.02 5972.74,-5912.38 6154.93,-5882.85 6266.75,-5862.85"/>
<polygon fill="black" stroke="black" points="6267.45,-5866.28 6276.68,-5861.07 6266.22,-5859.39 6267.45,-5866.28"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node113" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node113"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5113.5,-5833.52 4683.5,-5833.52 4683.5,-5792.52 5113.5,-5792.52 5113.5,-5833.52"/>
<text text-anchor="middle" x="4898.5" y="-5805.77" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge159" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5113.62,-5832.86C5123.67,-5835.83 5133.52,-5839.19 5143,-5843.02 5161.55,-5850.49 5160.31,-5862.89 5179,-5870.02 5243.31,-5894.54 5320.14,-5901.57 5381.99,-5902.33"/>
<polygon fill="black" stroke="black" points="5382.15,-5905.83 5392.18,-5902.4 5382.2,-5898.83 5382.15,-5905.83"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge160" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5113.83,-5823.8C5186.68,-5827.47 5266.79,-5831.5 5334.72,-5834.92"/>
<polygon fill="black" stroke="black" points="5334.92,-5838.44 5345.09,-5835.44 5335.28,-5831.45 5334.92,-5838.44"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge161" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5113.88,-5810.99C5299.23,-5809.9 5574.34,-5809.83 5814,-5816.02 5968.23,-5820 6146.24,-5829.46 6258.93,-5836.05"/>
<polygon fill="black" stroke="black" points="6258.76,-5839.54 6268.95,-5836.64 6259.17,-5832.56 6258.76,-5839.54"/>
</g>
<!-- telegram_bot.main -->
<g id="node114" class="node">
<title>telegram_bot.main</title>
<g id="a_node114"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5064,-4886.02 4733,-4886.02 4733,-4842.02 5064,-4842.02 5064,-4886.02"/>
<text text-anchor="middle" x="4898.5" y="-4855.7" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge162" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5064.27,-4881.64C5094.45,-4892.22 5122.75,-4908.42 5143,-4933.02 5204.51,-5007.73 5111.19,-5297.97 5179,-5367.02 5235.25,-5424.29 5329.66,-5426.84 5400.76,-5418.35"/>
<polygon fill="black" stroke="black" points="5401.6,-5421.77 5411.07,-5417.02 5400.7,-5414.82 5401.6,-5421.77"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge163" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5064.14,-4882.87C5094.05,-4893.39 5122.28,-4909.26 5143,-4933.02 5218.52,-5019.61 5096.63,-5108.91 5179,-5189.02 5460.02,-5462.33 6540.7,-5362.53 6932,-5386.02 7431.56,-5416 7557.54,-5393.02 8058,-5395.02 8261.11,-5395.83 8774.74,-5443.44 8972,-5395.02 9110.75,-5360.96 9255.07,-5266.21 9318.18,-5221.27"/>
<polygon fill="black" stroke="black" points="9320.45,-5223.94 9326.53,-5215.27 9316.37,-5218.26 9320.45,-5223.94"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge164" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M4941.67,-4841.93C4999.3,-4809.1 5100.37,-4741.45 5143,-4651.02 5172.53,-4588.38 5130.13,-3454.08 5179,-3405.02 5255.89,-3327.83 6011.5,-3351.14 6278.85,-3361.92"/>
<polygon fill="black" stroke="black" points="6278.79,-3365.42 6288.92,-3362.33 6279.07,-3358.43 6278.79,-3365.42"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge165" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4942.4,-4841.76C5000.39,-4808.96 5101.34,-4741.59 5143,-4651.02 5184.58,-4560.61 5108.58,-1139.31 5179,-1069.02 5216.92,-1031.17 6810.55,-1043.48 7320.67,-1048.4"/>
<polygon fill="black" stroke="black" points="7320.65,-1051.9 7330.68,-1048.5 7320.72,-1044.9 7320.65,-1051.9"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge166" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5064.33,-4872.87C5121.04,-4875.91 5185.84,-4879.39 5247.68,-4882.71"/>
<polygon fill="black" stroke="black" points="5247.8,-4886.22 5257.97,-4883.26 5248.18,-4879.23 5247.8,-4886.22"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge167" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5064.33,-4855.17C5109.87,-4852.72 5160.64,-4849.99 5210.9,-4847.3"/>
<polygon fill="black" stroke="black" points="5211.14,-4850.79 5220.94,-4846.76 5210.77,-4843.8 5211.14,-4850.79"/>
</g>
<!-- post_io.get_contact -->
<g id="node115" class="node">
<title>post_io.get_contact</title>
<g id="a_node115"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7576.5,-4688.02 7377.5,-4688.02 7377.5,-4652.02 7576.5,-4652.02 7576.5,-4688.02"/>
<text text-anchor="middle" x="7477" y="-4665.23" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node116" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node116"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7648.5,-4746.02 7305.5,-4746.02 7305.5,-4706.02 7648.5,-4706.02 7648.5,-4746.02"/>
<text text-anchor="middle" x="7477" y="-4718.94" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node117" class="node">
<title>post_io.write_post</title>
<g id="a_node117"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6539,-4744.02 6207,-4744.02 6207,-4698.02 6539,-4698.02 6539,-4744.02"/>
<text text-anchor="middle" x="6373" y="-4712.58" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge170" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6539.03,-4730.95C6648.46,-4729.74 6790.72,-4712.54 6896,-4644.02 6921.11,-4627.67 6906.13,-4602.12 6932,-4587.02 7000.91,-4546.78 7215.41,-4547.86 7353.58,-4553.27"/>
<polygon fill="black" stroke="black" points="7353.67,-4556.78 7363.8,-4553.68 7353.95,-4549.78 7353.67,-4556.78"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge171" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6539.28,-4713.37C6767.64,-4702.8 7173.37,-4684.02 7367.13,-4675.05"/>
<polygon fill="black" stroke="black" points="7367.5,-4678.54 7377.33,-4674.58 7367.18,-4671.55 7367.5,-4678.54"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge172" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6539.28,-4721.77C6742.28,-4722.69 7085.43,-4724.24 7295.25,-4725.2"/>
<polygon fill="black" stroke="black" points="7295.44,-4728.7 7305.45,-4725.24 7295.47,-4721.7 7295.44,-4728.7"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node118" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node118"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7622,-3346.02 7332,-3346.02 7332,-3310.02 7622,-3310.02 7622,-3346.02"/>
<text text-anchor="middle" x="7477" y="-3323.85" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge173" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7622.05,-3336.17C7731.71,-3342.45 7886.39,-3351.48 8022,-3360.02 8164.35,-3368.98 8329.8,-3380.25 8427.99,-3387.03"/>
<polygon fill="black" stroke="black" points="8427.94,-3390.54 8438.16,-3387.73 8428.42,-3383.55 8427.94,-3390.54"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node119" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node119"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-5607.02 0,-5607.02 0,-5571.02 282,-5571.02 282,-5607.02"/>
<text text-anchor="middle" x="141" y="-5584.97" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- chop:cli -->
<g id="node120" class="node">
<title>chop:cli</title>
<g id="a_node120"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5589.02" rx="27" ry="18"/>
<text text-anchor="middle" x="602" y="-5587.42" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;chop:cli -->
<!-- similar:cli -->
<g id="node183" class="node">
<title>similar:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5589.02" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5587.42" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;similar:cli -->
<!-- embed.main -->
<g id="node121" class="node">
<title>embed.main</title>
<g id="a_node121"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6461,-1970.02 6285,-1970.02 6285,-1934.02 6461,-1934.02 6461,-1970.02"/>
<text text-anchor="middle" x="6373" y="-1945.86" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge178" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6398.26,-1970.17C6473.14,-2025.15 6708.99,-2190.7 6932,-2266.02 7037.47,-2301.63 7159.87,-2320.57 7261.83,-2330.63"/>
<polygon fill="black" stroke="black" points="7261.66,-2334.13 7271.95,-2331.61 7262.33,-2327.17 7261.66,-2334.13"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node122" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node122"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7689.5,-4128.02 7264.5,-4128.02 7264.5,-4092.02 7689.5,-4092.02 7689.5,-4128.02"/>
<text text-anchor="middle" x="7477" y="-4104.14" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge179" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7689.52,-4127.11C7821.97,-4132.7 7975.97,-4128.1 8022,-4082.02 8078.29,-4025.66 8022.27,-3437.21 8058,-3366.02 8148.04,-3186.58 8366.39,-3061.39 8464.64,-3012.2"/>
<polygon fill="black" stroke="black" points="8466.36,-3015.25 8473.77,-3007.68 8463.25,-3008.98 8466.36,-3015.25"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge180" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7689.55,-4099.79C7790.26,-4094.76 7912.37,-4088.4 8022,-4082.02 8087.94,-4078.17 8158.83,-4073.74 8225.69,-4069.42"/>
<polygon fill="black" stroke="black" points="8226.2,-4072.9 8235.95,-4068.76 8225.75,-4065.91 8226.2,-4072.9"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge181" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7633.56,-4092.01C7758.67,-4087.1 7928.48,-4103.9 8022,-4213.02 8099.7,-4303.67 7974.66,-5201.51 8058,-5287.02 8098.27,-5328.33 8240.04,-5331.4 8354.94,-5326.36"/>
<polygon fill="black" stroke="black" points="8355.44,-5329.84 8365.26,-5325.88 8355.11,-5322.85 8355.44,-5329.84"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node123" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node123"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7626.5,-2196.02 7327.5,-2196.02 7327.5,-2160.02 7626.5,-2160.02 7626.5,-2196.02"/>
<text text-anchor="middle" x="7477" y="-2172.14" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node124" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node124"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8736,-2128.02 8294,-2128.02 8294,-2092.02 8736,-2092.02 8736,-2128.02"/>
<text text-anchor="middle" x="8515" y="-2104.42" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node125" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node125"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7731,-2257.52 7223,-2257.52 7223,-2214.52 7731,-2214.52 7731,-2257.52"/>
<text text-anchor="middle" x="7477" y="-2227.87" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge183" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7731.33,-2250.03C7824.86,-2247.88 7930.33,-2236.61 8022,-2205.02 8040.42,-2198.67 8039.55,-2186.27 8058,-2180.02 8154.28,-2147.36 8899.84,-2208.64 8972,-2137.02 9076.25,-2033.54 8907.08,-1583.74 9008,-1477.02 9069.85,-1411.61 9177.26,-1409.89 9255.44,-1419.63"/>
<polygon fill="black" stroke="black" points="9255.41,-1423.16 9265.78,-1421.01 9256.33,-1416.22 9255.41,-1423.16"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge182" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7731.1,-2236.99C7957.71,-2237.87 8276.87,-2239.1 8428.09,-2239.68"/>
<polygon fill="black" stroke="black" points="8428.23,-2243.18 8438.24,-2239.72 8428.26,-2236.18 8428.23,-2243.18"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node126" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node126"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9578,-1800.02 9126,-1800.02 9126,-1756.02 9578,-1756.02 9578,-1800.02"/>
<text text-anchor="middle" x="9352" y="-1769.7" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge184" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9440.17,-1800.13C9518.65,-1824.56 9631.31,-1871.64 9696,-1953.02 9851.47,-2148.57 9971.95,-2973.33 9994.64,-3137.52"/>
<polygon fill="black" stroke="black" points="9991.22,-3138.34 9996.05,-3147.77 9998.16,-3137.39 9991.22,-3138.34"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node127" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node127"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7724,-2737.52 7230,-2737.52 7230,-2688.52 7724,-2688.52 7724,-2737.52"/>
<text text-anchor="middle" x="7477" y="-2703.84" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge187" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7724.21,-2709.82C7818.01,-2705.43 7925.52,-2696.52 8022,-2679.02 8038.46,-2676.03 8041.62,-2671.4 8058,-2668.02 8258.14,-2626.64 8833.24,-2716.06 8972,-2566.02 9054.2,-2477.13 8925.76,-1565.87 9008,-1477.02 9069.76,-1410.29 9178.83,-1409.32 9257.42,-1419.59"/>
<polygon fill="black" stroke="black" points="9256.95,-1423.06 9267.33,-1420.97 9257.91,-1416.13 9256.95,-1423.06"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge185" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7724.2,-2727.56C7847.32,-2729.12 7979.11,-2720.17 8022,-2679.02 8077.78,-2625.49 8006.07,-2390.28 8058,-2333.02 8151.11,-2230.35 8324.18,-2223.52 8428.25,-2230.18"/>
<polygon fill="black" stroke="black" points="8428.19,-2233.68 8438.41,-2230.89 8428.68,-2226.7 8428.19,-2233.68"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge189" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7724.25,-2697.17C7847.83,-2695.08 7980.04,-2703.76 8022,-2746.02 8074.84,-2799.24 8023.73,-3353.31 8058,-3420.02 8148.34,-3595.87 8365.55,-3715.57 8464,-3762.65"/>
<polygon fill="black" stroke="black" points="8462.61,-3765.87 8473.15,-3766.98 8465.6,-3759.54 8462.61,-3765.87"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge190" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7724.13,-2699.63C7846.35,-2698.43 7977.32,-2707.19 8022,-2746.02 8082.6,-2798.67 7999.64,-2867.89 8058,-2923.02 8139.31,-2999.82 8267.83,-3012.42 8367.73,-3008.03"/>
<polygon fill="black" stroke="black" points="8368.11,-3011.51 8377.92,-3007.52 8367.76,-3004.52 8368.11,-3011.51"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge191" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7724.08,-2698.47C7846.95,-2696.85 7978.53,-2705.57 8022,-2746.02 8110.63,-2828.48 7999.3,-2910.14 8058,-3016.02 8155.97,-3192.72 8372.6,-3320.45 8467.7,-3370.15"/>
<polygon fill="black" stroke="black" points="8466.3,-3373.36 8476.79,-3374.85 8469.52,-3367.14 8466.3,-3373.36"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge186" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7724.31,-2704.92C8084.84,-2694.44 8738.71,-2681.08 8972,-2713.02 9302.98,-2758.32 9400.05,-2760.05 9696,-2915.02 9813.64,-2976.61 9927.22,-3089.59 9974.94,-3140.25"/>
<polygon fill="black" stroke="black" points="9972.64,-3142.91 9982.02,-3147.83 9977.75,-3138.13 9972.64,-3142.91"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge188" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7724.12,-2712.66C8085.61,-2714 8742.11,-2723.99 8972,-2777.02 9102.57,-2807.13 9244.29,-2881.09 9311.44,-2918.92"/>
<polygon fill="black" stroke="black" points="9309.98,-2922.12 9320.41,-2924.01 9313.44,-2916.03 9309.98,-2922.12"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node128" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node128"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7692.5,-2670.02 7261.5,-2670.02 7261.5,-2626.02 7692.5,-2626.02 7692.5,-2670.02"/>
<text text-anchor="middle" x="7477" y="-2639.7" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge193" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7692.76,-2662.42C7795,-2662.64 7917.47,-2653.05 8022,-2617.02 8040.42,-2610.67 8039.69,-2598.65 8058,-2592.02 8249.71,-2522.54 8831.73,-2659.01 8972,-2511.02 9051.08,-2427.58 8929.84,-1561.31 9008,-1477.02 9069.82,-1410.34 9178.88,-1409.36 9257.45,-1419.62"/>
<polygon fill="black" stroke="black" points="9256.97,-1423.09 9267.36,-1421 9257.93,-1416.15 9256.97,-1423.09"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge192" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7692.81,-2662.87C7823.82,-2666.93 7974.88,-2660.98 8022,-2617.02 8115.02,-2530.21 7971.47,-2426.3 8058,-2333.02 8152.12,-2231.55 8324.45,-2224.23 8428.18,-2230.5"/>
<polygon fill="black" stroke="black" points="8428.1,-2234 8438.31,-2231.16 8428.56,-2227.01 8428.1,-2234"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge196" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7692.73,-2632.87C7823.95,-2628.66 7975.27,-2634.55 8022,-2679.02 8076.56,-2730.94 8022.34,-2949.68 8058,-3016.02 8153.66,-3193.99 8371.53,-3321.04 8467.33,-3370.35"/>
<polygon fill="black" stroke="black" points="8465.99,-3373.59 8476.49,-3375.02 8469.17,-3367.36 8465.99,-3373.59"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge194" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7692.75,-2642.89C8047.45,-2636.68 8739.6,-2634.67 8972,-2706.02 9117.79,-2750.77 9263.35,-2866.13 9322.92,-2917.13"/>
<polygon fill="black" stroke="black" points="9320.89,-2920 9330.74,-2923.89 9325.46,-2914.7 9320.89,-2920"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge195" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7692.76,-2650.96C7793.22,-2654.7 7914.22,-2662.62 8022,-2679.02 8038.3,-2681.5 8041.75,-2685.21 8058,-2688.02 8259.09,-2722.75 8827.7,-2632.71 8972,-2777.02 9030.41,-2835.43 8950.91,-3087.3 9008,-3147.02 9068.47,-3210.26 9170.97,-3217.45 9248.21,-3211.87"/>
<polygon fill="black" stroke="black" points="9248.77,-3215.34 9258.45,-3211.05 9248.2,-3208.36 9248.77,-3215.34"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node129" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node129"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9624.5,-4687.52 9079.5,-4687.52 9079.5,-4642.52 9624.5,-4642.52 9624.5,-4687.52"/>
<text text-anchor="middle" x="9352" y="-4656.64" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge197" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9371.28,-4687.7C9463.65,-4802.31 9878.51,-5317.12 9977.33,-5439.74"/>
<polygon fill="black" stroke="black" points="9974.89,-5442.29 9983.89,-5447.88 9980.34,-5437.9 9974.89,-5442.29"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node130" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node130"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9506,-3138.02 9198,-3138.02 9198,-3102.02 9506,-3102.02 9506,-3138.02"/>
<text text-anchor="middle" x="9352" y="-3114.42" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node131" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node131"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7923.5,-3154.02 7030.5,-3154.02 7030.5,-3092.02 7923.5,-3092.02 7923.5,-3154.02"/>
<text text-anchor="middle" x="7477" y="-3110.82" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge199" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7923.71,-3107.42C7959.82,-3092.33 7993.36,-3072.01 8022,-3045.02 8080.11,-2990.26 7997.21,-2920.77 8058,-2869.02 8135.39,-2803.12 8900.67,-2903.42 8972,-2831.02 9077.62,-2723.8 8906.13,-1587.8 9008,-1477.02 9069.74,-1409.88 9179.35,-1409.15 9258.06,-1419.59"/>
<polygon fill="black" stroke="black" points="9257.59,-1423.06 9267.98,-1420.99 9258.57,-1416.13 9257.59,-1423.06"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge198" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7923.69,-3113.83C7960.65,-3097.66 7994.35,-3075.33 8022,-3045.02 8075.38,-2986.49 8006.36,-2393.08 8058,-2333.02 8148.6,-2227.62 8323.34,-2221.87 8428.23,-2229.45"/>
<polygon fill="black" stroke="black" points="8428.23,-2232.96 8438.47,-2230.25 8428.78,-2225.98 8428.23,-2232.96"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge200" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7923.71,-3123.91C7968.23,-3131.99 8003.75,-3144.44 8022,-3163.02 8072.61,-3214.54 8018.87,-3751.31 8058,-3812.02 8123.39,-3913.46 8246.84,-3974.13 8348.81,-4008.8"/>
<polygon fill="black" stroke="black" points="8347.71,-4012.12 8358.3,-4011.97 8349.93,-4005.48 8347.71,-4012.12"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge201" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7923.66,-3142.44C7957.18,-3147.96 7990.27,-3154.73 8022,-3163.02 8201.87,-3209.97 8396.49,-3321.01 8476.47,-3369.58"/>
<polygon fill="black" stroke="black" points="8474.84,-3372.69 8485.2,-3374.92 8478.49,-3366.72 8474.84,-3372.69"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge202" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7923.6,-3123.32C7968.33,-3131.47 8003.94,-3144.09 8022,-3163.02 8124.84,-3270.76 7957.95,-4392.68 8058,-4503.02 8368.26,-4845.2 9006.07,-4744.62 9251.61,-4689.86"/>
<polygon fill="black" stroke="black" points="9252.61,-4693.23 9261.59,-4687.61 9251.07,-4686.4 9252.61,-4693.23"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge203" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7923.66,-3122.3C8330.05,-3121.65 8908.35,-3120.72 9187.61,-3120.28"/>
<polygon fill="black" stroke="black" points="9187.84,-3123.78 9197.83,-3120.26 9187.82,-3116.78 9187.84,-3123.78"/>
</g>
<!-- debug_dump.main -->
<g id="node132" class="node">
<title>debug_dump.main</title>
<g id="a_node132"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6613,-2405.52 6133,-2405.52 6133,-2342.52 6613,-2342.52 6613,-2405.52"/>
<text text-anchor="middle" x="6373" y="-2361.87" font-family="Times,serif" font-size="49.56">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge204" class="edge">
<title>debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6398.49,-2405.8C6486.51,-2522.2 6787.31,-2939.24 6896,-3339.02 6910.96,-3394.05 6891.57,-4324.78 6932,-4365.02 6974.94,-4407.75 7961.46,-4395.62 8022,-4398.02 8127.43,-4402.18 8245.52,-4407.91 8339.57,-4412.72"/>
<polygon fill="black" stroke="black" points="8339.59,-4416.23 8349.75,-4413.24 8339.95,-4409.24 8339.59,-4416.23"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge205" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6455.66,-2342.37C6563.05,-2302.38 6758.47,-2235.13 6932,-2205.02 7060.41,-2182.73 7208.23,-2176.61 7317.34,-2175.72"/>
<polygon fill="black" stroke="black" points="7317.47,-2179.22 7327.44,-2175.65 7317.42,-2172.22 7317.47,-2179.22"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge206" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6418.55,-2342.32C6509.62,-2279.71 6725.96,-2141.97 6932,-2093.02 7181.42,-2033.76 7908.28,-2069.96 8283.66,-2093.91"/>
<polygon fill="black" stroke="black" points="8283.63,-2097.42 8293.83,-2094.57 8284.08,-2090.43 8283.63,-2097.42"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge207" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6520.44,-2342.49C6632.58,-2319.51 6791.39,-2289.46 6932,-2272.02 7023.22,-2260.7 7123.51,-2252.79 7212.86,-2247.33"/>
<polygon fill="black" stroke="black" points="7213.1,-2250.82 7222.87,-2246.72 7212.67,-2243.83 7213.1,-2250.82"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge208" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6448.22,-2342.39C6566.33,-2287.68 6794.09,-2163.24 6896,-1979.02 6940.27,-1898.98 6864.56,-1630.8 6932,-1569.02 6976.65,-1528.11 7967.56,-1542.49 8022,-1569.02 8045.34,-1580.39 8034.9,-1603.16 8058,-1615.02 8148.43,-1661.42 8872,-1634.81 8972,-1653.02 9087.47,-1674.03 9216.07,-1721.97 9289.87,-1751.99"/>
<polygon fill="black" stroke="black" points="9288.89,-1755.38 9299.47,-1755.93 9291.54,-1748.9 9288.89,-1755.38"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge209" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6596.67,-2405.54C6700.26,-2430.93 6817.6,-2476.67 6896,-2559.02 6934.39,-2599.34 6888.39,-2644.4 6932,-2679.02 6976.88,-2714.63 7101.02,-2724.16 7219.4,-2724.32"/>
<polygon fill="black" stroke="black" points="7219.74,-2727.82 7229.74,-2724.31 7219.73,-2720.82 7219.74,-2727.82"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge210" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6550.74,-2405.55C6659.4,-2432.01 6796.4,-2478.81 6896,-2559.02 6919.63,-2578.04 6905.92,-2601.52 6932,-2617.02 6985.2,-2648.62 7126.11,-2656.02 7251.18,-2655.7"/>
<polygon fill="black" stroke="black" points="7251.32,-2659.2 7261.3,-2655.66 7251.29,-2652.2 7251.32,-2659.2"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge211" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6389.3,-2405.58C6444.55,-2515.71 6645.68,-2884.96 6932,-3045.02 6964.4,-3063.13 6999.51,-3077.53 7035.76,-3088.94"/>
<polygon fill="black" stroke="black" points="7034.92,-3092.35 7045.5,-3091.93 7036.97,-3085.65 7034.92,-3092.35"/>
</g>
<!-- cluster_items._iter_items -->
<g id="node133" class="node">
<title>cluster_items._iter_items</title>
<g id="a_node133"><a xlink:title="Yield ``(id, item:type, embedding)`` for ``sell_item`` lots.&#10;&#10;Embeddings are loaded on demand so memory usage stays minimal.">
<polygon fill="none" stroke="black" points="7735,-2478.02 7219,-2478.02 7219,-2426.02 7735,-2426.02 7735,-2478.02"/>
<text text-anchor="middle" x="7477" y="-2442.32" font-family="Times,serif" font-size="39.62">cluster_items._iter_items</text>
</a>
</g>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.read_lots -->
<g id="edge212" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7735.09,-2459.96C7947.5,-2466.52 8239.14,-2475.53 8398.49,-2480.45"/>
<polygon fill="black" stroke="black" points="8398.69,-2483.96 8408.79,-2480.77 8398.9,-2476.96 8398.69,-2483.96"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;notes_utils.load_json -->
<g id="edge216" class="edge">
<title>cluster_items._iter_items&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7735.31,-2476.53C7836.22,-2472.26 7945.85,-2448.33 8022,-2378.02 8077.14,-2327.1 8000.59,-2261.36 8058,-2213.02 8135.76,-2147.54 8899.84,-2244.61 8972,-2173.02 9026.97,-2118.48 8954.87,-1533.35 9008,-1477.02 9069.76,-1411.52 9177.18,-1409.82 9255.39,-1419.59"/>
<polygon fill="black" stroke="black" points="9255.36,-1423.11 9265.74,-1420.97 9256.29,-1416.17 9255.36,-1423.11"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.make_lot_id -->
<g id="edge213" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7735.09,-2429.19C7953.81,-2409.76 8256.52,-2382.88 8412.32,-2369.04"/>
<polygon fill="black" stroke="black" points="8412.72,-2372.52 8422.37,-2368.15 8412.1,-2365.55 8412.72,-2372.52"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.embedding_path -->
<g id="edge214" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M7664.6,-2478.04C7771.07,-2495.85 7906.01,-2523.5 8022,-2563.02 8198.85,-2623.27 8393.97,-2732.95 8475.2,-2780.73"/>
<polygon fill="black" stroke="black" points="8473.69,-2783.9 8484.08,-2785.97 8477.25,-2777.87 8473.69,-2783.9"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.iter_lot_files -->
<g id="edge215" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7735.09,-2446.31C7938.03,-2441.8 8213.28,-2435.69 8376.4,-2432.07"/>
<polygon fill="black" stroke="black" points="8376.58,-2435.57 8386.5,-2431.85 8376.42,-2428.57 8376.58,-2435.57"/>
</g>
<!-- cluster_items.collect_clusters -->
<g id="node134" class="node">
<title>cluster_items.collect_clusters</title>
<g id="a_node134"><a xlink:title="Return mapping of cluster name to lot ids.&#10;&#10;``MiniBatchKMeans`` processes item embeddings in chunks so only a&#10;small batch resides in memory at a time. &#160;Initial centroids come from&#10;the most common ``item:type`` values so existing categories guide the&#10;clustering.">
<polygon fill="none" stroke="black" points="6854,-3929.52 5892,-3929.52 5892,-3852.52 6854,-3852.52 6854,-3929.52"/>
<text text-anchor="middle" x="6373" y="-3875.12" font-family="Times,serif" font-size="63.00">cluster_items.collect_clusters</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim -->
<g id="edge217" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6838.1,-3929.61C6859.3,-3942.67 6878.84,-3958.33 6896,-3977.02 6965.21,-4052.37 6861.47,-4361.89 6932,-4436.02 6985.96,-4492.73 7195.03,-4505.47 7337.7,-4507.32"/>
<polygon fill="black" stroke="black" points="7337.81,-4510.83 7347.85,-4507.44 7337.89,-4503.83 7337.81,-4510.83"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;cluster_items._iter_items -->
<g id="edge218" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;cluster_items._iter_items</title>
<path fill="none" stroke="black" d="M6839.24,-3852.5C6860.15,-3839.15 6879.32,-3823.14 6896,-3804.02 6986.68,-3700.06 6843.21,-2668.59 6932,-2563.02 6999.17,-2483.15 7106.83,-2450.98 7208.72,-2440.45"/>
<polygon fill="black" stroke="black" points="7209.25,-2443.92 7218.87,-2439.47 7208.58,-2436.95 7209.25,-2443.92"/>
</g>
<!-- cluster_items.main -->
<g id="node135" class="node">
<title>cluster_items.main</title>
<g id="a_node135"><a xlink:title="Cluster items and save the result.">
<polygon fill="none" stroke="black" points="5606,-4642.02 5387,-4642.02 5387,-4606.02 5606,-4606.02 5606,-4642.02"/>
<text text-anchor="middle" x="5496.5" y="-4618.72" font-family="Times,serif" font-size="21.00">cluster_items.main</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;notes_utils.write_json -->
<g id="edge220" class="edge">
<title>cluster_items.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5511.73,-4605.59C5564.54,-4535.96 5749.5,-4280.32 5814,-4035.02 5838.05,-3943.55 5794.07,-2409.28 5850,-2333.02 6140.26,-1937.26 6506.65,-2277.81 6896,-1979.02 6918.88,-1961.45 6906.97,-1939.34 6932,-1925.02 7037.28,-1864.76 7901.11,-1873.08 8022,-1863.02 8156.53,-1851.81 8311.24,-1834.02 8410.69,-1821.95"/>
<polygon fill="black" stroke="black" points="8411.23,-1825.41 8420.74,-1820.73 8410.39,-1818.46 8411.23,-1825.41"/>
</g>
<!-- cluster_items.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge219" class="edge">
<title>cluster_items.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5606.14,-4616.43C5675.64,-4617.9 5762.19,-4632.64 5814,-4689.02 5905.77,-4788.86 5750.97,-4899.37 5850,-4992.02 5973.51,-5107.56 6193.85,-5069.18 6304.57,-5039.75"/>
<polygon fill="black" stroke="black" points="6305.56,-5043.11 6314.29,-5037.12 6303.73,-5036.35 6305.56,-5043.11"/>
</g>
<!-- cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge221" class="edge">
<title>cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5606.24,-4624.27C5671.91,-4629.45 5754.19,-4645.36 5814,-4689.02 5840.36,-4708.26 5821.84,-4736.51 5850,-4753.02 5856.68,-4756.93 8021.6,-4755.37 8022,-4755.02 8124.33,-4664.02 7958.4,-4543 8058,-4449.02 8161.3,-4351.53 8343.25,-4377.23 8443.24,-4401.47"/>
<polygon fill="black" stroke="black" points="8442.7,-4404.94 8453.25,-4403.96 8444.39,-4398.15 8442.7,-4404.94"/>
</g>
<!-- cluster_items.main&#45;&gt;cluster_items.collect_clusters -->
<g id="edge222" class="edge">
<title>cluster_items.main&#45;&gt;cluster_items.collect_clusters</title>
<path fill="none" stroke="black" d="M5510.12,-4605.64C5556.49,-4537.41 5719.7,-4291.03 5814,-4068.02 5836.35,-4015.16 5805.91,-3980.75 5850,-3944.02 5860.46,-3935.3 5871.47,-3927.43 5882.94,-3920.32"/>
<polygon fill="black" stroke="black" points="5885.01,-3923.16 5891.8,-3915.03 5881.42,-3917.15 5885.01,-3923.16"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node136" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node136"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4991.5,-5617.02 4805.5,-5617.02 4805.5,-5581.02 4991.5,-5581.02 4991.5,-5617.02"/>
<text text-anchor="middle" x="4898.5" y="-5595.32" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node137" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node137"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1393.5,-3970.02 1163.5,-3970.02 1163.5,-3934.02 1393.5,-3934.02 1393.5,-3970.02"/>
<text text-anchor="middle" x="1278.5" y="-3946.72" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node138" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node138"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5082,-5107.52 4715,-5107.52 4715,-5070.52 5082,-5070.52 5082,-5107.52"/>
<text text-anchor="middle" x="4898.5" y="-5082.57" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node139" class="node">
<title>tg_client._write_md</title>
<g id="a_node139"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5565,-4734.02 5428,-4734.02 5428,-4698.02 5565,-4698.02 5565,-4734.02"/>
<text text-anchor="middle" x="5496.5" y="-4712.77" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge223" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5565.03,-4716.4C5699.11,-4717.17 6002.71,-4718.9 6196.92,-4720.01"/>
<polygon fill="black" stroke="black" points="6196.93,-4723.51 6206.95,-4720.07 6196.97,-4716.51 6196.93,-4723.51"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node140" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node140"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7716.5,-3597.52 7237.5,-3597.52 7237.5,-3554.52 7716.5,-3554.52 7716.5,-3597.52"/>
<text text-anchor="middle" x="7477" y="-3567.87" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge224" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7716.72,-3571.79C7812.24,-3567.09 7922.91,-3557.86 8022,-3540.02 8183.26,-3510.97 8366.58,-3447.85 8457.16,-3414.57"/>
<polygon fill="black" stroke="black" points="8458.51,-3417.8 8466.68,-3411.05 8456.09,-3411.23 8458.51,-3417.8"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node141" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node141"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6506,-3630.02 6240,-3630.02 6240,-3594.02 6506,-3594.02 6506,-3630.02"/>
<text text-anchor="middle" x="6373" y="-3607.23" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge225" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6506.11,-3607.7C6683.85,-3601.89 7003.47,-3591.45 7227.06,-3584.15"/>
<polygon fill="black" stroke="black" points="7227.42,-3587.64 7237.3,-3583.81 7227.19,-3580.64 7227.42,-3587.64"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node142" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node142"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3283,-3285.02 3044,-3285.02 3044,-3249.02 3283,-3249.02 3283,-3285.02"/>
<text text-anchor="middle" x="3163.5" y="-3262.97" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge226" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3283.21,-3268.75C3563.9,-3272.7 4290.48,-3282.02 4897.5,-3282.02 4897.5,-3282.02 4897.5,-3282.02 6374,-3282.02 7106.49,-3282.02 7293.04,-3229.21 8022,-3301.02 8166.64,-3315.26 8332.3,-3350.16 8429.76,-3372.65"/>
<polygon fill="black" stroke="black" points="8429.03,-3376.07 8439.56,-3374.92 8430.61,-3369.25 8429.03,-3376.07"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node143" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node143"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5143,-5052.52 4654,-5052.52 4654,-5009.52 5143,-5009.52 5143,-5052.52"/>
<text text-anchor="middle" x="4898.5" y="-5022.87" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node144" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node144"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5708.5,-4979.52 5284.5,-4979.52 5284.5,-4934.52 5708.5,-4934.52 5708.5,-4979.52"/>
<text text-anchor="middle" x="5496.5" y="-4948.64" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node145" class="node">
<title>tg_client._extract_author</title>
<g id="a_node145"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6736,-4635.02 6010,-4635.02 6010,-4565.02 6736,-4565.02 6736,-4635.02"/>
<text text-anchor="middle" x="6373" y="-4586.22" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge227" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6736.36,-4604.95C6909.75,-4607.31 7111.49,-4610.05 7260.44,-4612.08"/>
<polygon fill="black" stroke="black" points="7260.57,-4615.58 7270.62,-4612.22 7260.67,-4608.58 7260.57,-4615.58"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node146" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node146"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5635.5,-4026.02 5357.5,-4026.02 5357.5,-3990.02 5635.5,-3990.02 5635.5,-4026.02"/>
<text text-anchor="middle" x="5496.5" y="-4003.23" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node147" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node147"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8663,-5516.02 8367,-5516.02 8367,-5480.02 8663,-5480.02 8663,-5516.02"/>
<text text-anchor="middle" x="8515" y="-5492.32" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node148" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node148"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5141,-4991.52 4656,-4991.52 4656,-4942.52 5141,-4942.52 5141,-4991.52"/>
<text text-anchor="middle" x="4898.5" y="-4957.39" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge228" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5074.53,-4942.5C5100.65,-4931.72 5124.86,-4916.48 5143,-4895.02 5229.12,-4793.13 5117.01,-4715.15 5179,-4597.02 5354.13,-4263.3 5628.1,-4362.86 5814,-4035.02 5856.82,-3959.49 5783.84,-3899.23 5850,-3843.02 5875.13,-3821.66 7971.1,-3792.31 8427.08,-3786.17"/>
<polygon fill="black" stroke="black" points="8427.27,-3789.67 8437.22,-3786.03 8427.18,-3782.67 8427.27,-3789.67"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge229" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5134.29,-4991.68C5137.31,-4994.29 5140.22,-4997.07 5143,-5000.02 5216.34,-5077.88 5110.26,-5398.06 5179,-5480.02 5366.18,-5703.17 5607.12,-5436.99 5814,-5642.02 5858.41,-5686.03 5800.45,-5739.88 5850,-5778.02 5895.36,-5812.93 7996.92,-5793.63 8022,-5770.02 8109.06,-5688.01 7979.58,-5323.32 8058,-5233.02 8126.08,-5154.63 8240.5,-5130.71 8337.68,-5126.34"/>
<polygon fill="black" stroke="black" points="8338.08,-5129.83 8347.93,-5125.95 8337.81,-5122.83 8338.08,-5129.83"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node149" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node149"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5629.5,-5471.02 5363.5,-5471.02 5363.5,-5435.02 5629.5,-5435.02 5629.5,-5471.02"/>
<text text-anchor="middle" x="5496.5" y="-5448.85" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge230" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M5134.25,-4991.71C5137.29,-4994.31 5140.21,-4997.08 5143,-5000.02 5208.46,-5068.86 5111.85,-5358.81 5179,-5426.02 5238.19,-5485.26 5338.53,-5483.72 5410.37,-5472.66"/>
<polygon fill="black" stroke="black" points="5411,-5476.1 5420.31,-5471.04 5409.88,-5469.19 5411,-5476.1"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node150" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node150"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6498.5,-5471.02 6247.5,-5471.02 6247.5,-5435.02 6498.5,-5435.02 6498.5,-5471.02"/>
<text text-anchor="middle" x="6373" y="-5448.22" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge231" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5629.84,-5453.02C5793.88,-5453.02 6071.94,-5453.02 6237.14,-5453.02"/>
<polygon fill="black" stroke="black" points="6237.36,-5456.52 6247.36,-5453.02 6237.36,-5449.52 6237.36,-5456.52"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node151" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node151"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7658.5,-5516.02 7295.5,-5516.02 7295.5,-5480.02 7658.5,-5480.02 7658.5,-5516.02"/>
<text text-anchor="middle" x="7477" y="-5492.32" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge234" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6498.54,-5458.1C6690.32,-5465.93 7059.35,-5481 7285.04,-5490.22"/>
<polygon fill="black" stroke="black" points="7285.21,-5493.73 7295.35,-5490.64 7285.5,-5486.73 7285.21,-5493.73"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge232" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7658.51,-5503.31C7781.42,-5496.24 7936.75,-5464.21 8022,-5357.02 8115.68,-5239.23 7976.06,-4129.25 8058,-4003.02 8140.69,-3875.61 8320.04,-3820.83 8427.52,-3798.71"/>
<polygon fill="black" stroke="black" points="8428.26,-3802.13 8437.37,-3796.73 8426.88,-3795.27 8428.26,-3802.13"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge233" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7658.75,-5498.02C7856.05,-5498.02 8168.81,-5498.02 8356.44,-5498.02"/>
<polygon fill="black" stroke="black" points="8356.67,-5501.52 8366.67,-5498.02 8356.67,-5494.52 8356.67,-5501.52"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node152" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node152"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2156,-4728.02 1671,-4728.02 1671,-4684.02 2156,-4684.02 2156,-4728.02"/>
<text text-anchor="middle" x="1913.5" y="-4697.7" font-family="Times,serif" font-size="32.90">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge235" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M1931.57,-4728.05C2032.86,-4856.13 2570.79,-5499.02 3162.5,-5499.02 3162.5,-5499.02 3162.5,-5499.02 5497.5,-5499.02 6153.7,-5499.02 6932.32,-5498.46 7285.22,-5498.18"/>
<polygon fill="black" stroke="black" points="7285.28,-5501.68 7295.28,-5498.17 7285.28,-5494.68 7285.28,-5501.68"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node153" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node153"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7649,-4263.52 7305,-4263.52 7305,-4222.52 7649,-4222.52 7649,-4263.52"/>
<text text-anchor="middle" x="7477" y="-4235.77" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge237" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7649.02,-4258.88C7771.22,-4260 7929.74,-4238.77 8022,-4137.02 8078.83,-4074.34 8017.79,-3832.45 8058,-3758.02 8152.07,-3583.85 8367.81,-3463.07 8464.98,-3415.53"/>
<polygon fill="black" stroke="black" points="8466.53,-3418.67 8474,-3411.16 8463.48,-3412.37 8466.53,-3418.67"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge236" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7649.15,-4250.6C7932.21,-4257.85 8512.26,-4250.14 8972,-4097.02 9325.15,-3979.39 9431.66,-3938.08 9696,-3676.02 9850.05,-3523.3 9955.44,-3276.47 9987.91,-3193.91"/>
<polygon fill="black" stroke="black" points="9991.23,-3195.05 9991.59,-3184.46 9984.7,-3192.51 9991.23,-3195.05"/>
</g>
<!-- tg_client._load_progress -->
<g id="node154" class="node">
<title>tg_client._load_progress</title>
<g id="a_node154"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2078.5,-2613.02 1748.5,-2613.02 1748.5,-2577.02 2078.5,-2577.02 2078.5,-2613.02"/>
<text text-anchor="middle" x="1913.5" y="-2588.86" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge238" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1938.62,-2576.74C2073.79,-2475.62 2754.41,-1983.51 3402,-1826.02 3927.14,-1698.3 4077.68,-1814.28 4618,-1826.02 5631.16,-1848.02 6013.1,-1427.55 6896,-1925.02 6921.13,-1939.17 6906.92,-1964.76 6932,-1979.02 7030.66,-2035.09 8860.16,-2063.77 8972,-2083.02 9302.93,-2139.97 9453.19,-2067.07 9696,-2299.02 9952.27,-2543.82 9991.57,-3017.27 9997.48,-3137.64"/>
<polygon fill="black" stroke="black" points="9993.99,-3138.03 9997.94,-3147.86 10000.98,-3137.72 9993.99,-3138.03"/>
</g>
<!-- tg_client._save_progress -->
<g id="node155" class="node">
<title>tg_client._save_progress</title>
<g id="a_node155"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2673,-3646.02 2444,-3646.02 2444,-3610.02 2673,-3610.02 2673,-3646.02"/>
<text text-anchor="middle" x="2558.5" y="-3623.85" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node156" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node156"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3297,-3611.02 3030,-3611.02 3030,-3575.02 3297,-3575.02 3297,-3611.02"/>
<text text-anchor="middle" x="3163.5" y="-3587.14" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge239" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3297.24,-3594.95C3780.19,-3601.18 5489.2,-3616.29 6896,-3542.02 7483.36,-3511 8187.27,-3431.67 8428.24,-3403.3"/>
<polygon fill="black" stroke="black" points="8428.81,-3406.75 8438.34,-3402.11 8427.99,-3399.8 8428.81,-3406.75"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node157" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node157"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2044,-3554.02 1783,-3554.02 1783,-3518.02 2044,-3518.02 2044,-3554.02"/>
<text text-anchor="middle" x="1913.5" y="-3530.14" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge240" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2044.31,-3534.64C2271.12,-3532.35 2754.35,-3528.02 3162.5,-3528.02 3162.5,-3528.02 3162.5,-3528.02 5497.5,-3528.02 5575.21,-3528.02 6828.57,-3542.63 6896,-3504.02 6922.66,-3488.75 6905.46,-3460.49 6932,-3445.02 6996.97,-3407.13 8107.88,-3396.01 8428.2,-3393.59"/>
<polygon fill="black" stroke="black" points="8428.38,-3397.09 8438.35,-3393.51 8428.33,-3390.09 8428.38,-3397.09"/>
</g>
<!-- tg_client._save_message -->
<g id="node158" class="node">
<title>tg_client._save_message</title>
<g id="a_node158"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4618,-4748.52 3402,-4748.52 3402,-4633.52 4618,-4633.52 4618,-4748.52"/>
<text text-anchor="middle" x="4010" y="-4666.9" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge243" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4325.91,-4633.49C4430.24,-4614.89 4547.01,-4594.55 4654,-4577.02 5659.91,-4412.18 5914.36,-4369.64 6932,-4311.02 7173.98,-4297.08 7786,-4327.23 8022,-4272.02 8180,-4235.05 8349.37,-4146.52 8442.43,-4093.09"/>
<polygon fill="black" stroke="black" points="8444.28,-4096.07 8451.19,-4088.04 8440.78,-4090 8444.28,-4096.07"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge244" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4038.45,-4633.33C4113.27,-4483.12 4336.61,-4078.97 4654,-3897.02 4770.61,-3830.16 5716.4,-3729.79 5850,-3715.02 6329.12,-3662.04 6450.56,-3664.2 6932,-3640.02 7174.03,-3627.86 7785.49,-3658.87 8022,-3606.02 8199.77,-3566.29 8393.28,-3462.82 8474.57,-3416.28"/>
<polygon fill="black" stroke="black" points="8476.54,-3419.19 8483.46,-3411.16 8473.04,-3413.12 8476.54,-3419.19"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge241" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4096.98,-4748.59C4219.99,-4830.8 4453.49,-4986.21 4654,-5116.02 4870.01,-5255.86 4958.96,-5246.16 5143,-5426.02 5163.63,-5446.18 5153.75,-5466.08 5179,-5480.02 5278.29,-5534.8 9563.73,-5575.3 9696,-5525.02 9716.01,-5517.41 9712.4,-5501.62 9732,-5493.02 9773.18,-5474.93 9821.28,-5466.66 9865.2,-5463.36"/>
<polygon fill="black" stroke="black" points="9865.64,-5466.84 9875.38,-5462.68 9865.17,-5459.86 9865.64,-5466.84"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge242" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4618.03,-4687.34C5467.96,-4682.19 6955,-4673.17 7367.31,-4670.67"/>
<polygon fill="black" stroke="black" points="7367.46,-4674.17 7377.43,-4670.61 7367.41,-4667.17 7367.46,-4674.17"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge245" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4149.28,-4748.57C4293.65,-4816.73 4513.33,-4944.98 4618,-5131.02 4666.22,-5216.71 4585.49,-5501.49 4654,-5572.02 4689.77,-5608.83 4745.93,-5616.94 4795.3,-5615.22"/>
<polygon fill="black" stroke="black" points="4795.58,-5618.71 4805.4,-5614.73 4795.25,-5611.72 4795.58,-5618.71"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge246" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4086.74,-4748.54C4202.2,-4832.88 4432.29,-4987.96 4654,-5061.02 4670.22,-5066.36 4687.33,-5070.72 4704.67,-5074.26"/>
<polygon fill="black" stroke="black" points="4704.41,-5077.78 4714.89,-5076.26 4705.75,-5070.91 4704.41,-5077.78"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge247" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4618.02,-4701.24C4926.8,-4706.44 5267.9,-4712.18 5417.71,-4714.71"/>
<polygon fill="black" stroke="black" points="5417.68,-4718.21 5427.74,-4714.87 5417.8,-4711.21 5417.68,-4718.21"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge248" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4035.26,-4633.27C4104.99,-4475.18 4322.42,-4033.82 4654,-3834.02 4918.93,-3674.37 5867.3,-3627.95 6229.77,-3615.87"/>
<polygon fill="black" stroke="black" points="6229.91,-3619.37 6239.79,-3615.54 6229.68,-3612.37 6229.91,-3619.37"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge249" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4105.67,-4748.56C4227.75,-4819.88 4448.81,-4939.39 4654,-5000.02 4662.78,-5002.61 4671.8,-5004.99 4680.96,-5007.16"/>
<polygon fill="black" stroke="black" points="4680.42,-5010.63 4690.95,-5009.45 4681.98,-5003.81 4680.42,-5010.63"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge250" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4158.18,-4748.58C4286.89,-4796.27 4479.92,-4861.47 4654,-4895.02 4684.12,-4900.82 5035.2,-4925.58 5274.26,-4942"/>
<polygon fill="black" stroke="black" points="5274.27,-4945.51 5284.49,-4942.7 5274.75,-4938.53 5274.27,-4945.51"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge251" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4340.41,-4633.48C4440.76,-4618.49 4551.61,-4604.46 4654,-4597.02 5168.2,-4559.63 5298.45,-4595.63 5814,-4597.02 5873.99,-4597.18 5937.61,-4597.44 5999.6,-4597.74"/>
<polygon fill="black" stroke="black" points="5999.91,-4601.24 6009.93,-4597.79 5999.95,-4594.24 5999.91,-4601.24"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge252" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4143.73,-4748.59C4272.08,-4802.17 4473.15,-4880.69 4654,-4928.02 4671.64,-4932.63 4690.15,-4936.79 4708.76,-4940.52"/>
<polygon fill="black" stroke="black" points="4708.31,-4944 4718.79,-4942.49 4709.65,-4937.13 4708.31,-4944"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge253" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3860.09,-4748.62C3879.06,-4759.14 3929.04,-4766.52 4010,-4766.52 4080.21,-4766.52 4127.12,-4760.97 4150.71,-4752.64"/>
<polygon fill="black" stroke="black" points="4152.15,-4755.83 4159.91,-4748.62 4149.35,-4749.41 4152.15,-4755.83"/>
</g>
<!-- tg_client._save_media -->
<g id="node159" class="node">
<title>tg_client._save_media</title>
<g id="a_node159"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5139.5,-3960.02 4657.5,-3960.02 4657.5,-3906.02 5139.5,-3906.02 5139.5,-3960.02"/>
<text text-anchor="middle" x="4898.5" y="-3922.42" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge254" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4042.81,-4633.37C4123.84,-4492.68 4353.05,-4131.47 4654,-3969.02 4657.1,-3967.34 4660.26,-3965.74 4663.46,-3964.2"/>
<polygon fill="black" stroke="black" points="4664.94,-3967.37 4672.6,-3960.05 4662.05,-3961 4664.94,-3967.37"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge256" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4902.59,-3905.87C4915.25,-3808.97 4972.69,-3478.92 5179,-3347.02 5304.64,-3266.69 5700.88,-3339.9 5850,-3339.02 5966.22,-3338.32 6810.28,-3260.53 6896,-3339.02 6963.13,-3400.48 6865.61,-3684.75 6932,-3747.02 6986.81,-3798.42 8103.68,-3789.71 8427.02,-3786.1"/>
<polygon fill="black" stroke="black" points="8427.31,-3789.59 8437.27,-3785.98 8427.23,-3782.59 8427.31,-3789.59"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge255" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M4902.92,-3905.83C4916.76,-3807.8 4977.89,-3469.56 5179,-3306.02 5797.58,-2802.98 6139.26,-3010.17 6932,-2925.02 7413.67,-2873.28 7537.57,-2921.92 8022,-2925.02 8477.07,-2927.93 9019.74,-2936.44 9244.95,-2940.2"/>
<polygon fill="black" stroke="black" points="9245.05,-2943.7 9255.11,-2940.37 9245.17,-2936.7 9245.05,-2943.7"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge257" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5088.07,-3960.03C5106.65,-3962.95 5125.2,-3965.97 5143,-3969.02 5159.07,-3971.76 5162.87,-3973.64 5179,-3976.02 5233.67,-3984.08 5293.95,-3990.72 5347.1,-3995.83"/>
<polygon fill="black" stroke="black" points="5347,-3999.34 5357.29,-3996.8 5347.66,-3992.37 5347,-3999.34"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node160" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node160"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6490.5,-4442.02 6255.5,-4442.02 6255.5,-4406.02 6490.5,-4406.02 6490.5,-4442.02"/>
<text text-anchor="middle" x="6373" y="-4419.97" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge258" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5139.73,-3941.88C5406.54,-3952.27 5801.73,-3969.53 5814,-3981.02 5912.39,-4073.06 5761.96,-4180.03 5850,-4282.02 5947.37,-4394.82 6124.56,-4422.34 6245.23,-4426.96"/>
<polygon fill="black" stroke="black" points="6245.15,-4430.46 6255.27,-4427.3 6245.39,-4423.47 6245.15,-4430.46"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge309" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6490.75,-4413.46C6602.05,-4408.83 6770.77,-4416.4 6896,-4487.02 6918.61,-4499.77 6908.95,-4521.07 6932,-4533.02 7002.75,-4569.68 7216.11,-4569.77 7353.66,-4565.55"/>
<polygon fill="black" stroke="black" points="7353.95,-4569.05 7363.84,-4565.23 7353.73,-4562.05 7353.95,-4569.05"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node161" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node161"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3366,-3768.02 2961,-3768.02 2961,-3726.02 3366,-3726.02 3366,-3768.02"/>
<text text-anchor="middle" x="3163.5" y="-3738.93" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge259" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3183.32,-3768.06C3285.99,-3882.82 3780.02,-4435.06 3950.79,-4625.94"/>
<polygon fill="black" stroke="black" points="3948.18,-4628.28 3957.46,-4633.4 3953.4,-4623.61 3948.18,-4628.28"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node162" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node162"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7762,-3216.02 7192,-3216.02 7192,-3172.02 7762,-3172.02 7762,-3216.02"/>
<text text-anchor="middle" x="7477" y="-3185.7" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge262" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7762.24,-3183.83C7858.18,-3195.73 7957.25,-3227.7 8022,-3301.02 8097.36,-3386.34 7995.61,-3716.8 8058,-3812.02 8124.26,-3913.14 8247.97,-3973.87 8349.83,-4008.65"/>
<polygon fill="black" stroke="black" points="8349.02,-4012.07 8359.62,-4011.93 8351.25,-4005.43 8349.02,-4012.07"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge260" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7762.17,-3183.02C7845.99,-3178.37 7937.8,-3171.91 8022,-3163.02 8446.88,-3118.14 8551.14,-3089.63 8972,-3016.02 9068.07,-2999.21 9177.33,-2977.61 9253.78,-2962.09"/>
<polygon fill="black" stroke="black" points="9254.77,-2965.46 9263.87,-2960.04 9253.37,-2958.6 9254.77,-2965.46"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge261" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7762.21,-3194.32C8187.22,-3194.77 8968.3,-3195.61 9248,-3195.91"/>
<polygon fill="black" stroke="black" points="9248.13,-3199.41 9258.13,-3195.92 9248.14,-3192.41 9248.13,-3199.41"/>
</g>
<!-- tg_client._download_messages -->
<g id="node163" class="node">
<title>tg_client._download_messages</title>
<g id="a_node163"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2913.5,-3759.52 2203.5,-3759.52 2203.5,-3702.52 2913.5,-3702.52 2913.5,-3759.52"/>
<text text-anchor="middle" x="2558.5" y="-3719.68" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge263" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2913.76,-3740.42C2926.17,-3740.74 2938.47,-3741.07 2950.55,-3741.39"/>
<polygon fill="black" stroke="black" points="2950.56,-3744.89 2960.65,-3741.66 2950.74,-3737.9 2950.56,-3744.89"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node164" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node164"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2729.5,-3890.02 2387.5,-3890.02 2387.5,-3854.02 2729.5,-3854.02 2729.5,-3890.02"/>
<text text-anchor="middle" x="2558.5" y="-3866.32" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node165" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node165"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2925,-3268.52 2192,-3268.52 2192,-3203.52 2925,-3203.52 2925,-3268.52"/>
<text text-anchor="middle" x="2558.5" y="-3222.96" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge264" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2562.99,-3203.15C2579.97,-3057.31 2665.62,-2459.75 2961,-2095.02 3467.35,-1469.76 3866.8,-1620.28 4654,-1454.02 5652.7,-1243.08 5913.34,-1227.04 6932,-1162.02 7415.46,-1131.16 7537.56,-1159.98 8022,-1162.02 8444.23,-1163.79 8570.26,-1040.07 8972,-1170.02 9125.61,-1219.7 9270.63,-1356.05 9326.64,-1413.24"/>
<polygon fill="black" stroke="black" points="9324.47,-1416.02 9333.95,-1420.76 9329.5,-1411.15 9324.47,-1416.02"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge265" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2573,-3203.33C2662.62,-2992.23 3193.01,-1830.02 4009,-1830.02 4009,-1830.02 4009,-1830.02 6374,-1830.02 7157.19,-1830.02 8101.54,-1815.78 8410.64,-1810.75"/>
<polygon fill="black" stroke="black" points="8410.98,-1814.24 8420.92,-1810.58 8410.87,-1807.24 8410.98,-1814.24"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge266" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2767.83,-3268.52C3477.49,-3379.67 5759.75,-3740.75 5814,-3796.02 5888.02,-3871.41 5771.26,-3960.56 5850,-4031.02 5936.68,-4108.58 6801.89,-4005.65 6896,-4074.02 6933.2,-4101.04 6894.25,-4144.76 6932,-4171.02 6981.71,-4205.59 7970.99,-4203.65 8022,-4171.02 8054.16,-4150.44 8026.84,-4115.08 8058,-4093.02 8106.79,-4058.46 8166.26,-4040.49 8225.92,-4032.35"/>
<polygon fill="black" stroke="black" points="8226.41,-4035.82 8235.89,-4031.08 8225.52,-4028.88 8226.41,-4035.82"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge267" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2925.08,-3224.27C3218.14,-3215.86 3639.94,-3206.02 4009,-3206.02 4009,-3206.02 4009,-3206.02 4899.5,-3206.02 5073,-3206.02 7850.22,-3235.69 8022,-3260.02 8181.13,-3282.55 8362.12,-3340.06 8453.85,-3371.57"/>
<polygon fill="black" stroke="black" points="8452.92,-3374.95 8463.51,-3374.91 8455.21,-3368.33 8452.92,-3374.95"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge268" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2925.04,-3254.81C2963.6,-3256.79 3000.68,-3258.7 3033.62,-3260.39"/>
<polygon fill="black" stroke="black" points="3033.54,-3263.89 3043.71,-3260.91 3033.9,-3256.9 3033.54,-3263.89"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge269" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2589.29,-3268.65C2653.4,-3337.89 2810.83,-3502.81 2961,-3620.02 3010.96,-3659.01 3073.31,-3696.83 3115.32,-3720.91"/>
<polygon fill="black" stroke="black" points="3113.81,-3724.07 3124.23,-3725.98 3117.27,-3717.99 3113.81,-3724.07"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge270" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2826.48,-3203.5C2871.33,-3198.98 2917.44,-3194.9 2961,-3192.02 3425.88,-3161.28 3543.1,-3168.02 4009,-3168.02 4009,-3168.02 4009,-3168.02 5497.5,-3168.02 6095.5,-3168.02 6795.09,-3180.04 7181.58,-3187.73"/>
<polygon fill="black" stroke="black" points="7181.72,-3191.24 7191.79,-3187.94 7181.86,-3184.24 7181.72,-3191.24"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node166" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node166"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1635,-3642.02 922,-3642.02 922,-3568.02 1635,-3568.02 1635,-3642.02"/>
<text text-anchor="middle" x="1278.5" y="-3590.19" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge271" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1400.74,-3568C1477.42,-3546.41 1579.07,-3521.12 1671,-3509.02 2061.72,-3457.56 2163.41,-3490.02 2557.5,-3490.02 2557.5,-3490.02 2557.5,-3490.02 5497.5,-3490.02 5575.2,-3490.02 6830.63,-3513.01 6896,-3471.02 6927.45,-3450.81 6900.43,-3415.02 6932,-3395.02 6995.49,-3354.78 8107.45,-3381.9 8428.11,-3390.6"/>
<polygon fill="black" stroke="black" points="8428.18,-3394.1 8438.27,-3390.88 8428.37,-3387.1 8428.18,-3394.1"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge272" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1635.04,-3628.89C1647.17,-3629.62 1659.18,-3630.33 1671,-3631.02 2228.08,-3663.28 2367.74,-3664.08 2925,-3693.02 3121.03,-3703.2 3170.04,-3705.68 3366,-3717.02 3638.06,-3732.75 5610.38,-3685.91 5814,-3867.02 5881.49,-3927.04 5781.69,-4007.93 5850,-4067.02 5937.95,-4143.09 6801.54,-4034.19 6896,-4102.02 6933.01,-4128.59 6895.65,-4170.54 6932,-4198.02 6987.64,-4240.07 7159.13,-4248.64 7294.87,-4248.33"/>
<polygon fill="black" stroke="black" points="7295,-4251.83 7304.99,-4248.29 7294.97,-4244.83 7295,-4251.83"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge273" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1302.78,-3567.87C1404.39,-3405.75 1807.84,-2762.01 1895.59,-2621.99"/>
<polygon fill="black" stroke="black" points="1898.79,-2623.48 1901.14,-2613.15 1892.86,-2619.76 1898.79,-2623.48"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge274" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1635.07,-3611.41C1901.65,-3616.21 2250.77,-3622.5 2433.59,-3625.79"/>
<polygon fill="black" stroke="black" points="2433.72,-3629.29 2443.78,-3625.97 2433.85,-3622.29 2433.72,-3629.29"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge275" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1635.06,-3602.75C2053.26,-3600.08 2727.47,-3595.79 3019.75,-3593.93"/>
<polygon fill="black" stroke="black" points="3020.01,-3597.42 3029.99,-3593.86 3019.96,-3590.42 3020.01,-3597.42"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge276" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1619.16,-3567.99C1673.4,-3562.08 1726.73,-3556.27 1772.72,-3551.25"/>
<polygon fill="black" stroke="black" points="1773.17,-3554.72 1782.73,-3550.16 1772.41,-3547.77 1773.17,-3554.72"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge277" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1426.8,-3642.09C1499.78,-3658.96 1589.52,-3677.47 1671,-3688.02 1841.91,-3710.13 2032.7,-3721.13 2193.37,-3726.51"/>
<polygon fill="black" stroke="black" points="2193.31,-3730.01 2203.42,-3726.84 2193.54,-3723.01 2193.31,-3730.01"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node167" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node167"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7793.5,-3969.52 7160.5,-3969.52 7160.5,-3908.52 7793.5,-3908.52 7793.5,-3969.52"/>
<text text-anchor="middle" x="7477" y="-3926.76" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge280" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7793.61,-3962.39C7868.54,-3968.69 7948.16,-3976.01 8022,-3984.02 8092.58,-3991.66 8168.68,-4001.22 8239.44,-4010.67"/>
<polygon fill="black" stroke="black" points="8239.01,-4014.15 8249.39,-4012.01 8239.94,-4007.21 8239.01,-4014.15"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge281" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7594.2,-3908.44C7707.12,-3876.35 7881.64,-3820.36 8022,-3747.02 8212.83,-3647.3 8412.92,-3480.84 8485.56,-3418.03"/>
<polygon fill="black" stroke="black" points="8488.12,-3420.43 8493.38,-3411.24 8483.53,-3415.15 8488.12,-3420.43"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge278" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7793.63,-3915.89C7868.57,-3909.58 7948.18,-3902.19 8022,-3894.02 8038.06,-3892.24 8041.95,-3890.81 8058,-3889.02 8159.29,-3877.72 8901.17,-3885.3 8972,-3812.02 9027.59,-3754.5 8962.63,-3158.89 9008,-3093.02 9061.88,-3014.78 9165.87,-2976.66 9245.29,-2958.36"/>
<polygon fill="black" stroke="black" points="9246.34,-2961.71 9255.34,-2956.12 9244.82,-2954.88 9246.34,-2961.71"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge279" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7793.55,-3949.7C8206.19,-3960.46 8886.88,-3965.98 8972,-3889.02 9016.41,-3848.86 8984.36,-3677.02 9008,-3622.02 9083.85,-3445.56 9253.98,-3281.99 9322.04,-3221.11"/>
<polygon fill="black" stroke="black" points="9324.67,-3223.46 9329.83,-3214.2 9320.02,-3218.22 9324.67,-3223.46"/>
</g>
<!-- tg_client.main -->
<g id="node168" class="node">
<title>tg_client.main</title>
<g id="a_node168"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="886,-3895.02 318,-3895.02 318,-3803.02 886,-3803.02 886,-3895.02"/>
<text text-anchor="middle" x="602" y="-3829.98" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge282" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M613.67,-3895.2C679.37,-4166.7 1054.75,-5543.02 1912.5,-5543.02 1912.5,-5543.02 1912.5,-5543.02 3164.5,-5543.02 3810.56,-5543.02 3978.45,-5470.58 4618,-5562.02 4634.44,-5564.37 4637.7,-5568.87 4654,-5572.02 4700.01,-5580.9 4751.51,-5587.13 4795.26,-5591.36"/>
<polygon fill="black" stroke="black" points="4795.06,-5594.85 4805.34,-5592.31 4795.71,-5587.89 4795.06,-5594.85"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge283" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M790.73,-3895.03C833.67,-3904.37 879.25,-3913.36 922,-3920.02 998.3,-3931.89 1084.54,-3939.79 1152.98,-3944.76"/>
<polygon fill="black" stroke="black" points="1153.15,-3948.28 1163.37,-3945.51 1153.65,-3941.3 1153.15,-3948.28"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge284" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M886.02,-3878.94C898.18,-3880.02 910.21,-3881.05 922,-3882.02 1001.1,-3888.49 1571.57,-3877.31 1635,-3925.02 1886.73,-4114.33 1910.86,-4550.9 1912.57,-4673.48"/>
<polygon fill="black" stroke="black" points="1909.07,-4673.74 1912.66,-4683.7 1916.07,-4673.67 1909.07,-4673.74"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge285" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M886.38,-3814.75C898.41,-3813.74 910.32,-3812.82 922,-3812.02 1810.34,-3750.87 2035.91,-3817.03 2925,-3768.02 2933.39,-3767.55 2941.95,-3767.03 2950.59,-3766.46"/>
<polygon fill="black" stroke="black" points="2951.02,-3769.94 2960.76,-3765.78 2950.55,-3762.96 2951.02,-3769.94"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge286" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M886.16,-3852.35C1294.23,-3857.15 2036.04,-3865.88 2377.12,-3869.89"/>
<polygon fill="black" stroke="black" points="2377.31,-3873.4 2387.35,-3870.01 2377.39,-3866.4 2377.31,-3873.4"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge287" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M639.29,-3802.99C693.45,-3737.7 802,-3619.43 922,-3559.02 1322.62,-3357.32 1837.55,-3281.46 2181.58,-3252.99"/>
<polygon fill="black" stroke="black" points="2182.02,-3256.46 2191.7,-3252.16 2181.45,-3249.49 2182.02,-3256.46"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge288" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M730.26,-3802.98C855.71,-3757.6 1045.55,-3688.92 1165.45,-3645.55"/>
<polygon fill="black" stroke="black" points="1166.82,-3648.78 1175.03,-3642.08 1164.44,-3642.19 1166.82,-3648.78"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge289" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M886.28,-3842.22C1323.67,-3831.7 2189.82,-3810.72 2925,-3792.02 4225.03,-3758.95 4549.66,-3732.13 5850,-3715.02 6082.42,-3711.96 6696.5,-3595.73 6896,-3715.02 6925.01,-3732.36 6905.7,-3760.78 6932,-3782.02 7011.02,-3845.83 7114.87,-3883.71 7210.64,-3906.19"/>
<polygon fill="black" stroke="black" points="7209.95,-3909.62 7220.48,-3908.45 7211.52,-3902.8 7209.95,-3909.62"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node169" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node169"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6831,-3795.52 5915,-3795.52 5915,-3724.52 6831,-3724.52 6831,-3795.52"/>
<text text-anchor="middle" x="6373" y="-3745.37" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge290" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6778.75,-3724.4C6823.77,-3704.73 6864.61,-3677.19 6896,-3639.02 6971.98,-3546.62 6847.47,-2647.66 6932,-2563.02 6974.82,-2520.14 7963.28,-2539.96 8022,-2525.02 8039.34,-2520.6 8040.7,-2511.56 8058,-2507.02 8171.17,-2477.27 8305.45,-2474.18 8398.87,-2476.9"/>
<polygon fill="black" stroke="black" points="8398.8,-2480.4 8408.91,-2477.22 8399.03,-2473.4 8398.8,-2480.4"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge292" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6831.19,-3793.38C6854.9,-3806.76 6876.81,-3823.12 6896,-3843.02 6987.4,-3937.75 6833.42,-4049.77 6932,-4137.02 7022.69,-4217.28 7901.35,-4147.6 8022,-4137.02 8125.38,-4127.95 8239.59,-4108.35 8331.93,-4090.05"/>
<polygon fill="black" stroke="black" points="8332.81,-4093.44 8341.93,-4088.06 8331.44,-4086.58 8332.81,-4093.44"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge293" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6594.75,-3724.5C6697.07,-3709.33 6820.46,-3692.89 6932,-3683.02 7173.47,-3661.64 7787.27,-3700.54 8022,-3640.02 8206.69,-3592.39 8402.41,-3468.92 8479.73,-3416.8"/>
<polygon fill="black" stroke="black" points="8481.83,-3419.6 8488.14,-3411.09 8477.9,-3413.81 8481.83,-3419.6"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge291" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6780.33,-3724.5C6824.87,-3704.77 6865.16,-3677.19 6896,-3639.02 6975.05,-3541.16 6844.89,-1465.77 6932,-1375.02 6975.41,-1329.78 7119.7,-1323.08 7248.77,-1327.13"/>
<polygon fill="black" stroke="black" points="7248.72,-1330.63 7258.83,-1327.47 7248.95,-1323.64 7248.72,-1330.63"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge294" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6831.14,-3794.33C6854.79,-3807.5 6876.69,-3823.55 6896,-3843.02 6971.65,-3919.28 6852.41,-4009.87 6932,-4082.02 6978.86,-4124.49 7125.28,-4130.23 7254.42,-4126.01"/>
<polygon fill="black" stroke="black" points="7254.6,-4129.51 7264.47,-4125.67 7254.36,-4122.51 7254.6,-4129.51"/>
</g>
<!-- scan_ontology.main -->
<g id="node170" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5726,-3933.52 5267,-3933.52 5267,-3876.52 5726,-3876.52 5726,-3933.52"/>
<text text-anchor="middle" x="5496.5" y="-3893.68" font-family="Times,serif" font-size="44.80">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge296" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5527.73,-3876.2C5594.67,-3810.08 5754.21,-3639.25 5814,-3459.02 5840.84,-3378.11 5790.14,-1985.71 5850,-1925.02 5934.79,-1839.04 7901.43,-1850.55 8022,-1844.02 8156.34,-1836.73 8311.08,-1825.21 8410.6,-1817.39"/>
<polygon fill="black" stroke="black" points="8410.96,-1820.87 8420.65,-1816.6 8410.41,-1813.89 8410.96,-1820.87"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge295" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5726.32,-3922.04C5760.13,-3934.41 5791.2,-3953.13 5814,-3981.02 5885.15,-4068.04 5771.16,-4911.9 5850,-4992.02 5969.86,-5113.82 6195.85,-5071.03 6306.96,-5039.89"/>
<polygon fill="black" stroke="black" points="6308.05,-5043.22 6316.71,-5037.11 6306.13,-5036.49 6308.05,-5043.22"/>
</g>
<!-- scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge297" class="edge">
<title>scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5726.17,-3896.1C5758.55,-3904.06 5789.2,-3917.78 5814,-3940.02 5868.91,-3989.26 5799.33,-4048.42 5850,-4102.02 6181.81,-4453.03 6474.07,-4161.88 6896,-4397.02 6914.96,-4407.58 6911.77,-4422.15 6932,-4430.02 7157.75,-4517.83 7779.79,-4431.98 8022,-4430.02 8127.4,-4429.16 8245.48,-4427.27 8339.54,-4425.54"/>
<polygon fill="black" stroke="black" points="8339.79,-4429.04 8349.73,-4425.35 8339.66,-4422.04 8339.79,-4429.04"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge298" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5726.31,-3897.12C5757.22,-3889.54 5787.41,-3878.32 5814,-3862.02 5837.96,-3847.32 5825.75,-3824.23 5850,-3810.02 5867.63,-3799.68 5886.19,-3790.77 5905.36,-3783.11"/>
<polygon fill="black" stroke="black" points="5906.76,-3786.33 5914.83,-3779.46 5904.24,-3779.8 5906.76,-3786.33"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node173" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node173"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10267,-85.02 9732,-85.02 9732,-35.02 10267,-35.02 10267,-85.02"/>
<text text-anchor="middle" x="9999.5" y="-50.33" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge302" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9608.58,-60.02C9645.76,-60.02 9684.19,-60.02 9721.76,-60.02"/>
<polygon fill="black" stroke="black" points="9721.81,-63.52 9731.81,-60.02 9721.81,-56.52 9721.81,-63.52"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node175" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node175"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7591.5,-4914.02 7362.5,-4914.02 7362.5,-4878.02 7591.5,-4878.02 7591.5,-4914.02"/>
<text text-anchor="middle" x="7477" y="-4891.97" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge308" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7591.76,-4908.68C7704.76,-4916.86 7881.06,-4917.59 8022,-4864.02 8234.46,-4783.25 8427.86,-4575.85 8491.78,-4502.33"/>
<polygon fill="black" stroke="black" points="8494.7,-4504.3 8498.59,-4494.45 8489.4,-4499.73 8494.7,-4504.3"/>
</g>
<!-- check_translations.parse_po -->
<g id="node176" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="9644,-4364.02 9060,-4364.02 9060,-4312.02 9644,-4312.02 9644,-4364.02"/>
<text text-anchor="middle" x="9352" y="-4328.32" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node177" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="8847.5,-4360.52 8182.5,-4360.52 8182.5,-4315.52 8847.5,-4315.52 8847.5,-4360.52"/>
<text text-anchor="middle" x="8515" y="-4329.64" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge310" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M8847.51,-4338.02C8914.3,-4338.02 8984.15,-4338.02 9049.83,-4338.02"/>
<polygon fill="black" stroke="black" points="9049.91,-4341.52 9059.91,-4338.02 9049.91,-4334.52 9049.91,-4341.52"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node178" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node178"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8665.5,-5278.02 8364.5,-5278.02 8364.5,-5242.02 8665.5,-5242.02 8665.5,-5278.02"/>
<text text-anchor="middle" x="8515" y="-5255.97" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node179" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6609.5,-4893.52 6136.5,-4893.52 6136.5,-4840.52 6609.5,-4840.52 6609.5,-4893.52"/>
<text text-anchor="middle" x="6373" y="-4856.81" font-family="Times,serif" font-size="40.88">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge311" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6609.54,-4875.98C6713.17,-4866.58 6826.83,-4835.44 6896,-4753.02 6959.41,-4677.46 6862.37,-3935.88 6932,-3866.02 6974.79,-3823.08 7962.14,-3827.52 8022,-3818.02 8038.4,-3815.41 8041.61,-3810.67 8058,-3808.02 8185.27,-3787.39 8334.89,-3783.69 8427.09,-3783.73"/>
<polygon fill="black" stroke="black" points="8427.21,-3787.23 8437.21,-3783.75 8427.22,-3780.23 8427.21,-3787.23"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge312" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6579.14,-4840.51C6687.5,-4838.51 6814.54,-4857.15 6896,-4938.02 6975.98,-5017.41 6846.84,-5115.2 6932,-5189.02 7115.03,-5347.67 7780.11,-5201.76 8022,-5189.02 8139.44,-5182.83 8272,-5168.38 8369.91,-5156.28"/>
<polygon fill="black" stroke="black" points="8370.38,-5159.75 8379.87,-5155.05 8369.52,-5152.81 8370.38,-5159.75"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge314" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6609.8,-4847C6709.22,-4838.82 6826.21,-4829.53 6932,-4822.02 7053.03,-4813.42 7935.4,-4840.01 8022,-4755.02 8093.44,-4684.9 8004.02,-4390.31 8058,-4306.02 8128.15,-4196.47 8262.62,-4129.36 8367.43,-4091.49"/>
<polygon fill="black" stroke="black" points="8368.91,-4094.68 8377.16,-4088.03 8366.56,-4088.09 8368.91,-4094.68"/>
</g>
<!-- pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge313" class="edge">
<title>pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6609.66,-4865.16C7059.08,-4861.07 7996.56,-4849.73 8022,-4826.02 8083.56,-4768.64 7997.43,-4507.44 8058,-4449.02 8160.75,-4349.91 8344.45,-4376.83 8444.47,-4401.54"/>
<polygon fill="black" stroke="black" points="8443.62,-4404.94 8454.18,-4404 8445.34,-4398.15 8443.62,-4404.94"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge315" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6609.73,-4873.22C6837.32,-4879.21 7173.05,-4888.04 7352.39,-4892.76"/>
<polygon fill="black" stroke="black" points="7352.3,-4896.26 7362.39,-4893.03 7352.49,-4889.26 7352.3,-4896.26"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge316" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6557.79,-4840.5C6670.81,-4835.26 6809.98,-4850.56 6896,-4938.02 6990.79,-5034.38 6831.49,-5149.63 6932,-5240.02 7035.88,-5333.43 7973.79,-5291 8354.49,-5269.64"/>
<polygon fill="black" stroke="black" points="8354.7,-5273.14 8364.49,-5269.08 8354.31,-5266.15 8354.7,-5273.14"/>
</g>
<!-- pending_chop.main -->
<g id="node180" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7644.5,-5071.52 7309.5,-5071.52 7309.5,-5028.52 7644.5,-5028.52 7644.5,-5071.52"/>
<text text-anchor="middle" x="7477" y="-5041.87" font-family="Times,serif" font-size="32.06">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge317" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7644.53,-5057.07C7752.3,-5062.23 7895.58,-5070.23 8022,-5081.02 8136.99,-5090.83 8266.68,-5105.75 8364.03,-5117.72"/>
<polygon fill="black" stroke="black" points="8363.89,-5121.23 8374.24,-5118.98 8364.75,-5114.28 8363.89,-5121.23"/>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge319" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7644.59,-5062.19C7784.99,-5068.41 7970.94,-5065.86 8022,-5014.02 8077.27,-4957.89 8016.49,-4372.96 8058,-4306.02 8126.27,-4195.91 8260.11,-4129.01 8365.21,-4091.37"/>
<polygon fill="black" stroke="black" points="8366.38,-4094.66 8374.64,-4088.04 8364.05,-4088.06 8366.38,-4094.66"/>
</g>
<!-- pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge318" class="edge">
<title>pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7644.78,-5062.04C7785.03,-5068.15 7970.65,-5065.49 8022,-5014.02 8110.85,-4924.95 7968.84,-4537.78 8058,-4449.02 8159.58,-4347.89 8345.01,-4376.1 8445.26,-4401.42"/>
<polygon fill="black" stroke="black" points="8444.43,-4404.82 8454.99,-4403.94 8446.19,-4398.04 8444.43,-4404.82"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node181" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node181"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="7886,-1635.52 7068,-1635.52 7068,-1578.52 7886,-1578.52 7886,-1635.52"/>
<text text-anchor="middle" x="7477" y="-1595.68" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge320" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7795.99,-1578.49C8212.25,-1541.16 8923.38,-1477.37 9217.56,-1450.98"/>
<polygon fill="black" stroke="black" points="9218.2,-1454.44 9227.85,-1450.06 9217.57,-1447.47 9218.2,-1454.44"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge321" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7605.43,-1578.49C7725.85,-1559.4 7905.01,-1552.37 8022,-1645.02 8064.32,-1678.53 8016.28,-1726.76 8058,-1761.02 8156.25,-1841.67 8309.35,-1840.38 8410.65,-1828"/>
<polygon fill="black" stroke="black" points="8411.11,-1831.46 8420.59,-1826.72 8410.23,-1824.52 8411.11,-1831.46"/>
</g>
<!-- pending_embed.main -->
<g id="node182" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6639.5,-3462.02 6106.5,-3462.02 6106.5,-3402.02 6639.5,-3402.02 6639.5,-3462.02"/>
<text text-anchor="middle" x="6373" y="-3420.05" font-family="Times,serif" font-size="47.46">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge322" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6639.78,-3443.75C6749.45,-3442.38 6859.47,-3430.77 6896,-3393.02 6962.74,-3324.05 6863.71,-2597.45 6932,-2530.02 6958.06,-2504.28 8038.58,-2489.5 8398.63,-2485.28"/>
<polygon fill="black" stroke="black" points="8398.85,-2488.78 8408.81,-2485.16 8398.77,-2481.78 8398.85,-2488.78"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge323" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6639.74,-3460.13C7055.51,-3497.69 7832.06,-3539.85 8022,-3355.02 8099.61,-3279.49 7984.06,-2948.14 8058,-2869.02 8144.61,-2776.33 8298.98,-2773.56 8403.87,-2784.85"/>
<polygon fill="black" stroke="black" points="8403.53,-2788.33 8413.87,-2785.98 8404.32,-2781.38 8403.53,-2788.33"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge324" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6639.5,-3443.84C6749.31,-3442.5 6859.52,-3430.9 6896,-3393.02 6971.27,-3314.85 6853.86,-2492.32 6932,-2417.02 6983.55,-2367.33 8000.88,-2406.55 8376.34,-2422.81"/>
<polygon fill="black" stroke="black" points="8376.3,-2426.31 8386.45,-2423.25 8376.61,-2419.32 8376.3,-2426.31"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge328" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6639.51,-3449.14C6734.33,-3469.14 6833.15,-3508.63 6896,-3585.02 6951.72,-3652.74 6868.29,-3917.75 6932,-3978.02 6976.02,-4019.65 7961.49,-4013.9 8022,-4017.02 8087.87,-4020.4 8158.65,-4024.74 8225.43,-4029.15"/>
<polygon fill="black" stroke="black" points="8225.47,-4032.66 8235.68,-4029.83 8225.93,-4025.67 8225.47,-4032.66"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge325" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6639.58,-3446.36C6735.6,-3465.87 6835.24,-3505.76 6896,-3585.02 6950.23,-3655.75 6868.95,-5126.02 6932,-5189.02 7012.19,-5269.14 8864.09,-5198.28 8972,-5233.02 9119.5,-5280.5 9261.31,-5405.55 9321.19,-5463.17"/>
<polygon fill="black" stroke="black" points="9318.8,-5465.73 9328.41,-5470.18 9323.67,-5460.71 9318.8,-5465.73"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge326" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6639.57,-3443.9C6749.39,-3442.57 6859.59,-3430.97 6896,-3393.02 6979.74,-3305.73 6845.07,-2389.12 6932,-2305.02 7013.46,-2226.21 8863,-2301.94 8972,-2333.02 8976.67,-2334.35 9214.95,-2473.48 9311.25,-2529.77"/>
<polygon fill="black" stroke="black" points="9309.71,-2532.93 9320.11,-2534.95 9313.25,-2526.89 9309.71,-2532.93"/>
</g>
<!-- pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge327" class="edge">
<title>pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6639.71,-3447.26C6735.3,-3466.94 6834.6,-3506.7 6896,-3585.02 6951.79,-3656.17 6867.14,-4335.01 6932,-4398.02 6981.77,-4446.36 7938.64,-4433.34 8339.59,-4425.7"/>
<polygon fill="black" stroke="black" points="8339.9,-4429.2 8349.83,-4425.51 8339.76,-4422.2 8339.9,-4429.2"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge329" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6639.68,-3445.81C6724.45,-3441.5 6816.76,-3427.29 6896,-3393.02 6915.92,-3384.4 6912.01,-3368.47 6932,-3360.02 7055.58,-3307.71 7209.23,-3303.55 7321.68,-3310.23"/>
<polygon fill="black" stroke="black" points="7321.55,-3313.73 7331.75,-3310.86 7321.99,-3306.74 7321.55,-3313.73"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge330" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6639.78,-3444.1C6749.65,-3442.82 6859.83,-3431.2 6896,-3393.02 6962.8,-3322.5 6865.03,-1715.36 6932,-1645.02 6953.6,-1622.33 7000.38,-1608.83 7057.88,-1601.29"/>
<polygon fill="black" stroke="black" points="7058.47,-1604.74 7067.96,-1600.04 7057.61,-1597.79 7058.47,-1604.74"/>
</g>
<!-- clean_data:cli -->
<g id="node184" class="node">
<title>clean_data:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5589.02" rx="37.29" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5587.42" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;clean_data:cli -->
<!-- price_train:cli -->
<g id="node185" class="node">
<title>price_train:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-5589.02" rx="36.68" ry="18"/>
<text text-anchor="middle" x="2558.5" y="-5587.42" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;price_train:cli -->
<!-- build_site:cli -->
<g id="node186" class="node">
<title>build_site:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-5589.02" rx="34.71" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-5587.42" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;build_site:cli -->
<!-- caption:cli -->
<g id="node187" class="node">
<title>caption:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-5589.02" rx="30.28" ry="18"/>
<text text-anchor="middle" x="4010" y="-5587.42" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;caption:cli -->
<!-- moderation:cli -->
<g id="node188" class="node">
<title>moderation:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5644.02" rx="38.53" ry="18"/>
<text text-anchor="middle" x="141" y="-5642.42" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli -->
<g id="node189" class="node">
<title>telegram_bot:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5644.02" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="602" y="-5639.85" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;telegram_bot:cli -->
<!-- embed:cli -->
<g id="node190" class="node">
<title>embed:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5644.02" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5642.42" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;embed:cli -->
<!-- debug_dump:cli -->
<g id="node191" class="node">
<title>debug_dump:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5644.02" rx="41.11" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5642.42" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;debug_dump:cli -->
<!-- cluster_items:cli -->
<g id="node192" class="node">
<title>cluster_items:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-5644.02" rx="42.34" ry="18"/>
<text text-anchor="middle" x="2558.5" y="-5642.42" font-family="Times,serif" font-size="7.00">cluster_items:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;cluster_items:cli -->
<!-- tg_client:cli -->
<g id="node193" class="node">
<title>tg_client:cli</title>
<g id="a_node193"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-5644.02" rx="32.86" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-5642.42" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- cluster_items:cli&#45;&gt;tg_client:cli -->
<!-- scan_ontology:cli -->
<g id="node194" class="node">
<title>scan_ontology:cli</title>
<g id="a_node194"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-5644.02" rx="44.19" ry="18"/>
<text text-anchor="middle" x="4010" y="-5642.42" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;scan_ontology:cli -->
<!-- check_translations:cli -->
<g id="node195" class="node">
<title>check_translations:cli</title>
<g id="a_node195"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5699.02" rx="73.67" ry="18"/>
<text text-anchor="middle" x="141" y="-5696.56" font-family="Times,serif" font-size="9.94">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli -->
<g id="node196" class="node">
<title>pending_caption:cli</title>
<g id="a_node196"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5699.02" rx="48.62" ry="18"/>
<text text-anchor="middle" x="602" y="-5697.42" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_caption:cli -->
<!-- pending_chop:cli -->
<g id="node197" class="node">
<title>pending_chop:cli</title>
<g id="a_node197"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5699.02" rx="42.96" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5697.42" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;pending_chop:cli -->
<!-- pending_embed:cli -->
<g id="node198" class="node">
<title>pending_embed:cli</title>
<g id="a_node198"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5699.02" rx="47.39" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5697.42" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_embed:cli -->
<!-- build_site -->
<g id="node199" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4010" cy="-383.02" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4010" y="-379.32" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge345" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4066.12,-383.02C4185.9,-383.02 4475.52,-383.02 4679.09,-383.02"/>
<polygon fill="black" stroke="black" points="4679.32,-386.52 4689.32,-383.02 4679.32,-379.52 4679.32,-386.52"/>
</g>
<!-- caption -->
<g id="node200" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-1481.02" rx="44.69" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-1477.32" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge346" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M4943.81,-1481.02C5038.4,-1481.02 5262.15,-1481.02 5393.81,-1481.02"/>
<polygon fill="black" stroke="black" points="5393.91,-1484.52 5403.91,-1481.02 5393.91,-1477.52 5393.91,-1484.52"/>
</g>
<!-- check_translations -->
<g id="node201" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="7477" cy="-4338.02" rx="96.68" ry="18"/>
<text text-anchor="middle" x="7477" y="-4334.32" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge347" class="edge">
<title>check_translations:cli&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7571.47,-4342.19C7679.91,-4347.34 7864.06,-4357.03 8022,-4370.02 8131.86,-4379.05 8255.21,-4392.09 8350.93,-4402.86"/>
<polygon fill="black" stroke="black" points="8350.65,-4406.35 8360.98,-4403.99 8351.44,-4399.39 8350.65,-4406.35"/>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge348" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M7574.07,-4338.02C7709.24,-4338.02 7962.48,-4338.02 8172.07,-4338.02"/>
<polygon fill="black" stroke="black" points="8172.33,-4341.52 8182.33,-4338.02 8172.33,-4334.52 8172.33,-4341.52"/>
</g>
<!-- chop -->
<g id="node202" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-5545.02" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-5541.32" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge349" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4931.27,-5545.22C4978.38,-5546.26 5069.13,-5551.11 5143,-5572.02 5160.03,-5576.83 5162.34,-5583.04 5179,-5589.02 5255.72,-5616.53 5346.12,-5638.38 5410.62,-5652.24"/>
<polygon fill="black" stroke="black" points="5410.23,-5655.74 5420.74,-5654.4 5411.69,-5648.89 5410.23,-5655.74"/>
</g>
<!-- clean_data -->
<g id="node203" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5496.5" cy="-5162.02" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5496.5" y="-5158.32" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge350" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5556.58,-5162.02C5702.48,-5162.02 6081.43,-5162.02 6266.79,-5162.02"/>
<polygon fill="black" stroke="black" points="6266.83,-5165.52 6276.83,-5162.02 6266.83,-5158.52 6266.83,-5165.52"/>
</g>
<!-- cluster_items -->
<g id="node204" class="node">
<title>cluster_items</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-4624.02" rx="73.39" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-4620.32" font-family="Times,serif" font-size="14.00">cluster_items</text>
</g>
<!-- cluster_items&#45;&gt;cluster_items.main -->
<g id="edge351" class="edge">
<title>cluster_items:cli&#45;&gt;cluster_items.main</title>
<path fill="none" stroke="black" d="M4971.99,-4624.02C5072.69,-4624.02 5256.15,-4624.02 5376.94,-4624.02"/>
<polygon fill="black" stroke="black" points="5376.97,-4627.52 5386.97,-4624.02 5376.97,-4620.52 5376.97,-4627.52"/>
</g>
<!-- debug_dump -->
<g id="node205" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5496.5" cy="-2374.02" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5496.5" y="-2370.32" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge352" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5566.85,-2374.02C5685.52,-2374.02 5933.04,-2374.02 6122.5,-2374.02"/>
<polygon fill="black" stroke="black" points="6122.62,-2377.52 6132.62,-2374.02 6122.62,-2370.52 6122.62,-2377.52"/>
</g>
<!-- embed -->
<g id="node206" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5496.5" cy="-1952.02" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5496.5" y="-1948.32" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge353" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5538.8,-1952.02C5670.69,-1952.02 6084.27,-1952.02 6274.5,-1952.02"/>
<polygon fill="black" stroke="black" points="6274.77,-1955.52 6284.77,-1952.02 6274.77,-1948.52 6274.77,-1955.52"/>
</g>
<!-- moderation -->
<g id="node207" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6373" cy="-4004.02" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6373" y="-4000.32" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge354" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6436.41,-4006.62C6581.65,-4012.68 6949.44,-4028.04 7206.09,-4038.75"/>
<polygon fill="black" stroke="black" points="7206.18,-4042.26 7216.32,-4039.18 7206.48,-4035.26 7206.18,-4042.26"/>
</g>
<!-- pending_caption -->
<g id="node208" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5496.5" cy="-4770.02" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5496.5" y="-4766.32" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge355" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5578.85,-4764.14C5644.62,-4762.36 5738.38,-4766.67 5814,-4797.02 5833.07,-4804.67 5830.91,-4818.43 5850,-4826.02 5936.21,-4860.27 6036.64,-4873.73 6126.25,-4877.53"/>
<polygon fill="black" stroke="black" points="6126.15,-4881.03 6136.28,-4877.92 6126.42,-4874.04 6126.15,-4881.03"/>
</g>
<!-- pending_chop -->
<g id="node209" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6373" cy="-4965.02" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6373" y="-4961.32" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge356" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6447.12,-4967.69C6548.14,-4971.64 6736.07,-4979.89 6896,-4992.02 7031.42,-5002.28 7184.24,-5017.72 7299.02,-5030.09"/>
<polygon fill="black" stroke="black" points="7298.98,-5033.61 7309.3,-5031.2 7299.74,-5026.65 7298.98,-5033.61"/>
</g>
<!-- pending_embed -->
<g id="node210" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5496.5" cy="-3432.02" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5496.5" y="-3428.32" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge357" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5580.56,-3432.02C5697.93,-3432.02 5917.89,-3432.02 6096.19,-3432.02"/>
<polygon fill="black" stroke="black" points="6096.26,-3435.52 6106.26,-3432.02 6096.26,-3428.52 6096.26,-3435.52"/>
</g>
<!-- price_train -->
<g id="node211" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5496.5" cy="-1096.02" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5496.5" y="-1092.32" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge358" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5557.61,-1096.02C5699.39,-1096.02 6057.08,-1096.02 6247.78,-1096.02"/>
<polygon fill="black" stroke="black" points="6247.86,-1099.52 6257.86,-1096.02 6247.86,-1092.52 6247.86,-1099.52"/>
</g>
<!-- scan_ontology -->
<g id="node212" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-3996.02" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-3992.32" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge359" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4969.73,-3989.53C5018.46,-3984.71 5084.81,-3977.51 5143,-3969.02 5208,-3959.52 5279.37,-3946.97 5340.79,-3935.49"/>
<polygon fill="black" stroke="black" points="5341.77,-3938.87 5350.95,-3933.59 5340.48,-3931.99 5341.77,-3938.87"/>
</g>
<!-- similar -->
<g id="node213" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5496.5" cy="-938.02" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5496.5" y="-934.32" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge360" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5539.68,-938.02C5667.53,-938.02 6054.09,-938.02 6252.17,-938.02"/>
<polygon fill="black" stroke="black" points="6252.33,-941.52 6262.33,-938.02 6252.33,-934.52 6252.33,-941.52"/>
</g>
<!-- telegram_bot -->
<g id="node214" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4010" cy="-5158.02" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4010" y="-5154.32" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge361" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4042.11,-5174.14C4133.34,-5220.69 4409.2,-5356.03 4654,-5421.02 4676.18,-5426.9 4699.79,-5431.73 4723.25,-5435.68"/>
<polygon fill="black" stroke="black" points="4722.86,-5439.16 4733.3,-5437.32 4723.99,-5432.25 4722.86,-5439.16"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge362" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4050.97,-5143.08C4151.57,-5105.7 4423.68,-5005.87 4654,-4933.02 4703.66,-4917.31 4759.55,-4901.35 4805.24,-4888.74"/>
<polygon fill="black" stroke="black" points="4806.42,-4892.05 4815.13,-4886.02 4804.56,-4885.3 4806.42,-4892.05"/>
</g>
<!-- tg_client -->
<g id="node215" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-3849.02" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-3845.32" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge363" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M191.99,-3849.02C222.07,-3849.02 263.09,-3849.02 307.59,-3849.02"/>
<polygon fill="black" stroke="black" points="307.75,-3852.52 317.75,-3849.02 307.75,-3845.52 307.75,-3852.52"/>
</g>
</g>
</svg>
