<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="1987pt" height="3552pt"
 viewBox="0.00 0.00 1987.00 3552.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 3548.4)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-3548.4 1983,-3548.4 1983,4 -4,4"/>
<!-- post_io._parse_block -->
<g id="node1" class="node">
<title>post_io._parse_block</title>
<g id="a_node1"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="1672,-1385.4 1510,-1385.4 1510,-1349.4 1672,-1349.4 1672,-1385.4"/>
<text text-anchor="middle" x="1591" y="-1363.7" font-family="Times,serif" font-size="14.00">post_io._parse_block</text>
</a>
</g>
</g>
<!-- post_io.get_contact -->
<g id="node2" class="node">
<title>post_io.get_contact</title>
<g id="a_node2"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="769,-3328.4 615,-3328.4 615,-3292.4 769,-3292.4 769,-3328.4"/>
<text text-anchor="middle" x="692" y="-3306.7" font-family="Times,serif" font-size="14.00">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node3" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node3"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="1072,-3282.4 894,-3282.4 894,-3246.4 1072,-3246.4 1072,-3282.4"/>
<text text-anchor="middle" x="983" y="-3260.7" font-family="Times,serif" font-size="14.00">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.read_post -->
<g id="node4" class="node">
<title>post_io.read_post</title>
<g id="a_node4"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="1360.5,-1385.4 1219.5,-1385.4 1219.5,-1349.4 1360.5,-1349.4 1360.5,-1385.4"/>
<text text-anchor="middle" x="1290" y="-1363.7" font-family="Times,serif" font-size="14.00">post_io.read_post</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;post_io._parse_block -->
<g id="edge1" class="edge">
<title>post_io.read_post&#45;&gt;post_io._parse_block</title>
<path fill="none" stroke="black" d="M1360.72,-1367.4C1402.11,-1367.4 1455.03,-1367.4 1499.59,-1367.4"/>
<polygon fill="black" stroke="black" points="1499.85,-1370.9 1509.85,-1367.4 1499.85,-1363.9 1499.85,-1370.9"/>
</g>
<!-- serde_utils.read_md -->
<g id="node5" class="node">
<title>serde_utils.read_md</title>
<g id="a_node5"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="1671.5,-1938.4 1510.5,-1938.4 1510.5,-1902.4 1671.5,-1902.4 1671.5,-1938.4"/>
<text text-anchor="middle" x="1591" y="-1916.7" font-family="Times,serif" font-size="14.00">serde_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;serde_utils.read_md -->
<g id="edge2" class="edge">
<title>post_io.read_post&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1360.54,-1365.76C1384.62,-1368.81 1409.84,-1376.67 1427,-1394.4 1495.31,-1464.95 1436.11,-1517.95 1463,-1612.4 1493.57,-1719.76 1550.22,-1840.29 1576.26,-1893.12"/>
<polygon fill="black" stroke="black" points="1573.17,-1894.77 1580.75,-1902.18 1579.45,-1891.66 1573.17,-1894.77"/>
</g>
<!-- serde_utils.read_text -->
<g id="node16" class="node">
<title>serde_utils.read_text</title>
<g id="a_node16"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="1950.5,-2803.4 1783.5,-2803.4 1783.5,-2767.4 1950.5,-2767.4 1950.5,-2803.4"/>
<text text-anchor="middle" x="1867" y="-2781.7" font-family="Times,serif" font-size="14.00">serde_utils.read_text</text>
</a>
</g>
</g>
<!-- serde_utils.read_md&#45;&gt;serde_utils.read_text -->
<g id="edge127" class="edge">
<title>serde_utils.read_md&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1671.54,-1922.19C1689.36,-1926.35 1706.62,-1933.98 1719,-1947.4 1761.1,-1993.02 1744.97,-2163.14 1755,-2224.4 1788.66,-2429.97 1841.7,-2675.39 1859.75,-2757.27"/>
<polygon fill="black" stroke="black" points="1856.34,-2758.07 1861.92,-2767.08 1863.18,-2756.56 1856.34,-2758.07"/>
</g>
<!-- post_io.write_post -->
<g id="node6" class="node">
<title>post_io.write_post</title>
<g id="a_node6"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="488,-3328.4 342,-3328.4 342,-3292.4 488,-3292.4 488,-3328.4"/>
<text text-anchor="middle" x="415" y="-3306.7" font-family="Times,serif" font-size="14.00">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge3" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M488.25,-3310.4C523.89,-3310.4 567.14,-3310.4 604.53,-3310.4"/>
<polygon fill="black" stroke="black" points="604.9,-3313.9 614.9,-3310.4 604.9,-3306.9 604.9,-3313.9"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge4" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M488.28,-3295.86C514.26,-3291.15 543.85,-3286.38 571,-3283.4 677.5,-3271.71 800.3,-3267.2 883.73,-3265.46"/>
<polygon fill="black" stroke="black" points="884.03,-3268.96 893.96,-3265.26 883.89,-3261.96 884.03,-3268.96"/>
</g>
<!-- serde_utils.write_md -->
<g id="node7" class="node">
<title>serde_utils.write_md</title>
<g id="a_node7"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="775,-3382.4 609,-3382.4 609,-3346.4 775,-3346.4 775,-3382.4"/>
<text text-anchor="middle" x="692" y="-3360.7" font-family="Times,serif" font-size="14.00">serde_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;serde_utils.write_md -->
<g id="edge5" class="edge">
<title>post_io.write_post&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M488.25,-3324.59C522,-3331.22 562.57,-3339.18 598.53,-3346.24"/>
<polygon fill="black" stroke="black" points="598.05,-3349.72 608.54,-3348.21 599.4,-3342.85 598.05,-3349.72"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node8" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node8"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="1377.5,-1712.4 1202.5,-1712.4 1202.5,-1676.4 1377.5,-1676.4 1377.5,-1712.4"/>
<text text-anchor="middle" x="1290" y="-1690.7" font-family="Times,serif" font-size="14.00">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node9" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node9"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="1103.5,-1835.4 862.5,-1835.4 862.5,-1799.4 1103.5,-1799.4 1103.5,-1835.4"/>
<text text-anchor="middle" x="983" y="-1813.7" font-family="Times,serif" font-size="14.00">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge6" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1093.09,-1799.29C1101.6,-1795.49 1109.71,-1790.91 1117,-1785.4 1143.03,-1765.72 1126.58,-1740.55 1153,-1721.4 1164.72,-1712.91 1178.43,-1706.91 1192.56,-1702.71"/>
<polygon fill="black" stroke="black" points="1193.64,-1706.05 1202.39,-1700.09 1191.83,-1699.29 1193.64,-1706.05"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node10" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node10"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="1072.5,-3082.4 893.5,-3082.4 893.5,-3046.4 1072.5,-3046.4 1072.5,-3082.4"/>
<text text-anchor="middle" x="983" y="-3060.7" font-family="Times,serif" font-size="14.00">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node11" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node11"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="1427,-3236.4 1153,-3236.4 1153,-3200.4 1427,-3200.4 1427,-3236.4"/>
<text text-anchor="middle" x="1290" y="-3214.7" font-family="Times,serif" font-size="14.00">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node12" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node12"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="1098,-2869.4 868,-2869.4 868,-2833.4 1098,-2833.4 1098,-2869.4"/>
<text text-anchor="middle" x="983" y="-2847.7" font-family="Times,serif" font-size="14.00">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- serde_utils.load_json -->
<g id="node13" class="node">
<title>serde_utils.load_json</title>
<g id="a_node13"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="1673.5,-2647.4 1508.5,-2647.4 1508.5,-2611.4 1673.5,-2611.4 1673.5,-2647.4"/>
<text text-anchor="middle" x="1591" y="-2625.7" font-family="Times,serif" font-size="14.00">serde_utils.load_json</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;serde_utils.load_json -->
<g id="edge7" class="edge">
<title>debug_dump.load_source_info&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1098.01,-2863.67C1193.51,-2868.14 1329.47,-2860.38 1427,-2796.4 1453.32,-2779.13 1442.62,-2759.39 1463,-2735.4 1490.18,-2703.41 1527.73,-2673.39 1554.94,-2653.52"/>
<polygon fill="black" stroke="black" points="1557.32,-2656.12 1563.39,-2647.44 1553.23,-2650.44 1557.32,-2656.12"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node14" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node14"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="1366.5,-2578.4 1213.5,-2578.4 1213.5,-2542.4 1366.5,-2542.4 1366.5,-2578.4"/>
<text text-anchor="middle" x="1290" y="-2556.7" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge8" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1096.54,-2833.28C1104.1,-2828.98 1111.05,-2823.75 1117,-2817.4 1176.37,-2754.05 1100.1,-2694.25 1153,-2625.4 1167.86,-2606.06 1189.92,-2592.19 1211.97,-2582.37"/>
<polygon fill="black" stroke="black" points="1213.54,-2585.51 1221.4,-2578.4 1210.83,-2579.05 1213.54,-2585.51"/>
</g>
<!-- serde_utils.load_json&#45;&gt;serde_utils.read_text -->
<g id="edge129" class="edge">
<title>serde_utils.load_json&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1623.7,-2647.45C1673.61,-2675.86 1770.46,-2731 1825.39,-2762.28"/>
<polygon fill="black" stroke="black" points="1823.74,-2765.37 1834.16,-2767.27 1827.21,-2759.29 1823.74,-2765.37"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node112" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node112"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="1663.5,-2448.4 1518.5,-2448.4 1518.5,-2412.4 1663.5,-2412.4 1663.5,-2448.4"/>
<text text-anchor="middle" x="1591" y="-2426.7" font-family="Times,serif" font-size="14.00">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge139" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M1332.57,-2542.32C1386.54,-2518.86 1480.66,-2477.94 1538.92,-2452.61"/>
<polygon fill="black" stroke="black" points="1540.52,-2455.73 1548.3,-2448.53 1537.73,-2449.31 1540.52,-2455.73"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node15" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node15"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="1692,-2982.4 1490,-2982.4 1490,-2946.4 1692,-2946.4 1692,-2982.4"/>
<text text-anchor="middle" x="1591" y="-2960.7" font-family="Times,serif" font-size="14.00">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text -->
<g id="edge9" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1687.48,-2946.37C1698.46,-2942.56 1709.21,-2937.96 1719,-2932.4 1773.46,-2901.5 1821.62,-2844.96 1847.01,-2811.73"/>
<polygon fill="black" stroke="black" points="1850.05,-2813.52 1853.25,-2803.42 1844.45,-2809.31 1850.05,-2813.52"/>
</g>
<!-- serde_utils.read_text&#45;&gt;serde_utils.read_text -->
<g id="edge126" class="edge">
<title>serde_utils.read_text&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1817.07,-2803.55C1809.39,-2812.94 1826.03,-2821.4 1867,-2821.4 1892.29,-2821.4 1908.3,-2818.18 1915.06,-2813.5"/>
<polygon fill="black" stroke="black" points="1918.52,-2814.03 1916.93,-2803.55 1911.64,-2812.73 1918.52,-2814.03"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node17" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node17"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="1080.5,-2495.4 885.5,-2495.4 885.5,-2459.4 1080.5,-2459.4 1080.5,-2495.4"/>
<text text-anchor="middle" x="983" y="-2473.7" font-family="Times,serif" font-size="14.00">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge10" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1080.64,-2473.58C1094.56,-2468.89 1107.4,-2461.57 1117,-2450.4 1222.72,-2327.39 1047.02,-1844.19 1153,-1721.4 1163.32,-1709.44 1177.29,-1701.84 1192.35,-1697.15"/>
<polygon fill="black" stroke="black" points="1193.63,-1700.43 1202.39,-1694.47 1191.82,-1693.67 1193.63,-1700.43"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.load_json -->
<g id="edge12" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1080.75,-2485.03C1191.29,-2494.56 1364.92,-2512.2 1427,-2533.4 1476.01,-2550.13 1526.48,-2582.67 1558.02,-2605.2"/>
<polygon fill="black" stroke="black" points="1556.25,-2608.24 1566.4,-2611.27 1560.35,-2602.57 1556.25,-2608.24"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge13" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1080.51,-2492.36C1093.01,-2495.64 1105.47,-2499.61 1117,-2504.4 1134.76,-2511.79 1135.36,-2520.74 1153,-2528.4 1168.81,-2535.26 1186.32,-2540.78 1203.37,-2545.17"/>
<polygon fill="black" stroke="black" points="1202.79,-2548.64 1213.34,-2547.63 1204.47,-2541.84 1202.79,-2548.64"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.read_text -->
<g id="edge11" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1080.67,-2468.16C1231.86,-2458.89 1526.84,-2462.25 1719,-2602.4 1778.44,-2645.75 1827.15,-2718.97 1850.7,-2758.37"/>
<polygon fill="black" stroke="black" points="1847.79,-2760.31 1855.87,-2767.16 1853.82,-2756.76 1847.79,-2760.31"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node18" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node18"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="1701.5,-715.4 1480.5,-715.4 1480.5,-679.4 1701.5,-679.4 1701.5,-715.4"/>
<text text-anchor="middle" x="1591" y="-693.7" font-family="Times,serif" font-size="14.00">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge14" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1080.53,-2472.23C1094.2,-2467.65 1106.99,-2460.72 1117,-2450.4 1182.93,-2382.43 1085.57,-2306.89 1153,-2240.4 1240.78,-2153.85 1345.72,-2290.07 1427,-2197.4 1480.02,-2136.95 1417.58,-816.76 1463,-750.4 1472.05,-737.18 1485.08,-727.24 1499.38,-719.78"/>
<polygon fill="black" stroke="black" points="1500.91,-722.93 1508.42,-715.45 1497.89,-716.62 1500.91,-722.93"/>
</g>
<!-- caption_io.has_caption -->
<g id="node19" class="node">
<title>caption_io.has_caption</title>
<g id="a_node19"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="1378.5,-569.4 1201.5,-569.4 1201.5,-533.4 1378.5,-533.4 1378.5,-569.4"/>
<text text-anchor="middle" x="1290" y="-547.7" font-family="Times,serif" font-size="14.00">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge15" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1080.59,-2473.94C1094.61,-2469.23 1107.5,-2461.8 1117,-2450.4 1183.6,-2370.5 1086.23,-658.16 1153,-578.4 1163.01,-566.44 1176.67,-558.8 1191.49,-554.07"/>
<polygon fill="black" stroke="black" points="1192.65,-557.38 1201.37,-551.36 1190.8,-550.63 1192.65,-557.38"/>
</g>
<!-- caption_io.read_caption -->
<g id="node20" class="node">
<title>caption_io.read_caption</title>
<g id="a_node20"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="1382.5,-1493.4 1197.5,-1493.4 1197.5,-1457.4 1382.5,-1457.4 1382.5,-1493.4"/>
<text text-anchor="middle" x="1290" y="-1471.7" font-family="Times,serif" font-size="14.00">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge16" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M1080.75,-2473.68C1094.66,-2468.98 1107.47,-2461.62 1117,-2450.4 1185.25,-2370.07 1084.58,-1582.59 1153,-1502.4 1162.18,-1491.64 1174.31,-1484.4 1187.54,-1479.63"/>
<polygon fill="black" stroke="black" points="1188.85,-1482.89 1197.35,-1476.57 1186.77,-1476.21 1188.85,-1482.89"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge187" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1378.7,-562.98C1395.14,-566.77 1411.9,-571.78 1427,-578.4 1480.31,-601.78 1533.09,-644.94 1563.56,-672.36"/>
<polygon fill="black" stroke="black" points="1561.43,-675.15 1571.18,-679.3 1566.15,-669.98 1561.43,-675.15"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node22" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node22"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="1698,-1493.4 1484,-1493.4 1484,-1457.4 1698,-1457.4 1698,-1493.4"/>
<text text-anchor="middle" x="1591" y="-1471.7" font-family="Times,serif" font-size="14.00">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge188" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1378.75,-551.64C1397.17,-555.96 1414.71,-564.05 1427,-578.4 1489.92,-651.89 1400.57,-1374.49 1463,-1448.4 1466.55,-1452.6 1470.57,-1456.24 1474.94,-1459.4"/>
<polygon fill="black" stroke="black" points="1473.42,-1462.57 1483.76,-1464.88 1477.12,-1456.63 1473.42,-1462.57"/>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.read_md -->
<g id="edge189" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1382.79,-1479.94C1398.96,-1484.34 1414.57,-1491.38 1427,-1502.4 1465.49,-1536.52 1445.18,-1564.14 1463,-1612.4 1501.76,-1717.37 1554.46,-1839.58 1577.9,-1893.03"/>
<polygon fill="black" stroke="black" points="1574.7,-1894.44 1581.93,-1902.19 1581.11,-1891.63 1574.7,-1894.44"/>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.load_json -->
<g id="edge190" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1382.65,-1476.57C1399.64,-1481.09 1415.6,-1489.03 1427,-1502.4 1495.91,-1583.19 1427.9,-2357.18 1463,-2457.4 1483.7,-2516.5 1532.27,-2572.4 1562.99,-2603.66"/>
<polygon fill="black" stroke="black" points="1560.84,-2606.46 1570.39,-2611.06 1565.79,-2601.51 1560.84,-2606.46"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge192" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1382.51,-1474.11C1399.5,-1469.6 1415.5,-1461.69 1427,-1448.4 1477.81,-1389.67 1418.29,-813.9 1463,-750.4 1472.28,-737.22 1485.5,-727.3 1499.93,-719.84"/>
<polygon fill="black" stroke="black" points="1501.51,-722.97 1509.05,-715.51 1498.51,-716.64 1501.51,-722.97"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge193" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1382.74,-1475.4C1411.43,-1475.4 1443.47,-1475.4 1473.62,-1475.4"/>
<polygon fill="black" stroke="black" points="1473.76,-1478.9 1483.76,-1475.4 1473.76,-1471.9 1473.76,-1478.9"/>
</g>
<!-- caption_io._get_langs -->
<g id="node131" class="node">
<title>caption_io._get_langs</title>
<g id="a_node131"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="1675,-1439.4 1507,-1439.4 1507,-1403.4 1675,-1403.4 1675,-1439.4"/>
<text text-anchor="middle" x="1591" y="-1417.7" font-family="Times,serif" font-size="14.00">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge191" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M1382.74,-1458.83C1418.91,-1452.3 1460.41,-1444.81 1496.72,-1438.25"/>
<polygon fill="black" stroke="black" points="1497.6,-1441.64 1506.82,-1436.42 1496.36,-1434.76 1497.6,-1441.64"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node21" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node21"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="1079.5,-2549.4 886.5,-2549.4 886.5,-2513.4 1079.5,-2513.4 1079.5,-2549.4"/>
<text text-anchor="middle" x="983" y="-2527.7" font-family="Times,serif" font-size="14.00">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge17" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1079.67,-2527.95C1093.97,-2523.27 1107.19,-2515.85 1117,-2504.4 1173.65,-2438.25 1096.21,-1787.43 1153,-1721.4 1163.3,-1709.42 1177.26,-1701.81 1192.32,-1697.12"/>
<polygon fill="black" stroke="black" points="1193.59,-1700.4 1202.35,-1694.44 1191.79,-1693.64 1193.59,-1700.4"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;serde_utils.load_json -->
<g id="edge18" class="edge">
<title>debug_dump.delete_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1079.53,-2545.01C1092.44,-2548.5 1105.27,-2552.89 1117,-2558.4 1135.6,-2567.14 1133.97,-2579.65 1153,-2587.4 1213.49,-2612.05 1388.87,-2622.52 1498.19,-2626.75"/>
<polygon fill="black" stroke="black" points="1498.1,-2630.25 1508.22,-2627.13 1498.36,-2623.25 1498.1,-2630.25"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge19" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1079.67,-2540.5C1119.28,-2544.26 1164.86,-2548.6 1203.35,-2552.26"/>
<polygon fill="black" stroke="black" points="1203.21,-2555.76 1213.5,-2553.22 1203.87,-2548.79 1203.21,-2555.76"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge20" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1079.68,-2526.72C1093.72,-2522.13 1106.85,-2515.06 1117,-2504.4 1190.17,-2427.56 1077.07,-2342.51 1153,-2268.4 1240.86,-2182.65 1344.76,-2324.55 1427,-2233.4 1482.2,-2172.21 1416.48,-818.43 1463,-750.4 1472.05,-737.17 1485.07,-727.24 1499.37,-719.78"/>
<polygon fill="black" stroke="black" points="1500.91,-722.92 1508.41,-715.45 1497.88,-716.61 1500.91,-722.92"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge21" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1079.72,-2526.32C1093.67,-2521.76 1106.75,-2514.81 1117,-2504.4 1178.21,-2442.21 1090.42,-2372.21 1153,-2311.4 1241.41,-2225.5 1344.53,-2360.02 1427,-2268.4 1479.85,-2209.69 1423.66,-1626.9 1463,-1558.4 1478.61,-1531.23 1507.14,-1511.38 1533.21,-1497.93"/>
<polygon fill="black" stroke="black" points="1534.89,-1501 1542.3,-1493.43 1531.79,-1494.73 1534.89,-1501"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node23" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node23"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="1709,-2780.4 1473,-2780.4 1473,-2744.4 1709,-2744.4 1709,-2780.4"/>
<text text-anchor="middle" x="1591" y="-2758.7" font-family="Times,serif" font-size="14.00">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node24" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node24"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="1979,-2215.4 1755,-2215.4 1755,-2179.4 1979,-2179.4 1979,-2215.4"/>
<text text-anchor="middle" x="1867" y="-2193.7" font-family="Times,serif" font-size="14.00">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge22" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M1622.44,-2744.24C1651.22,-2725.6 1693.66,-2694.04 1719,-2656.4 1815.66,-2512.85 1852.09,-2301.65 1862.51,-2225.81"/>
<polygon fill="black" stroke="black" points="1866.02,-2226 1863.87,-2215.63 1859.08,-2225.08 1866.02,-2226"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node25" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node25"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="1687.5,-3090.4 1494.5,-3090.4 1494.5,-3054.4 1687.5,-3054.4 1687.5,-3090.4"/>
<text text-anchor="middle" x="1591" y="-3068.7" font-family="Times,serif" font-size="14.00">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node26" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node26"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="1117,-2808.4 849,-2808.4 849,-2772.4 1117,-2772.4 1117,-2808.4"/>
<text text-anchor="middle" x="983" y="-2786.7" font-family="Times,serif" font-size="14.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge23" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1104.27,-2772.37C1108.95,-2768.94 1113.24,-2764.97 1117,-2760.4 1213.37,-2643.07 1055.12,-1510.47 1153,-1394.4 1166.93,-1377.88 1187.82,-1369.63 1209.07,-1365.87"/>
<polygon fill="black" stroke="black" points="1209.77,-1369.31 1219.17,-1364.41 1208.77,-1362.38 1209.77,-1369.31"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge24" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1104.22,-2772.33C1108.92,-2768.91 1113.23,-2764.96 1117,-2760.4 1190.69,-2671.44 1078.17,-1809.4 1153,-1721.4 1163.23,-1709.37 1177.16,-1701.73 1192.21,-1697.02"/>
<polygon fill="black" stroke="black" points="1193.48,-1700.31 1202.23,-1694.34 1191.67,-1693.54 1193.48,-1700.31"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;serde_utils.load_json -->
<g id="edge27" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1117.42,-2801.85C1207.8,-2804.75 1328.27,-2798.96 1427,-2760.4 1442.41,-2754.38 1518.49,-2690.54 1561.05,-2654.25"/>
<polygon fill="black" stroke="black" points="1563.5,-2656.76 1568.83,-2647.6 1558.96,-2651.44 1563.5,-2656.76"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge28" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1101.21,-2772.33C1106.9,-2768.94 1112.22,-2765 1117,-2760.4 1161.75,-2717.35 1113.34,-2673.18 1153,-2625.4 1168.94,-2606.2 1191.87,-2592.28 1214.38,-2582.38"/>
<polygon fill="black" stroke="black" points="1215.76,-2585.6 1223.64,-2578.51 1213.07,-2579.14 1215.76,-2585.6"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge25" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M1117.3,-2805.5C1205.52,-2812.82 1323.56,-2817.51 1427,-2804.4 1459.69,-2800.26 1495.2,-2791.62 1524.71,-2783.24"/>
<polygon fill="black" stroke="black" points="1525.84,-2786.56 1534.48,-2780.42 1523.9,-2779.83 1525.84,-2786.56"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge26" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M1071.19,-2808.44C1086.74,-2812.85 1102.57,-2818.14 1117,-2824.4 1284.39,-2897.03 1294.16,-2976.21 1463,-3045.4 1469.81,-3048.19 1476.95,-3050.71 1484.23,-3052.98"/>
<polygon fill="black" stroke="black" points="1483.63,-3056.45 1494.21,-3055.92 1485.61,-3049.74 1483.63,-3056.45"/>
</g>
<!-- debug_dump.main -->
<g id="node27" class="node">
<title>debug_dump.main</title>
<polygon fill="none" stroke="black" points="766,-2869.4 618,-2869.4 618,-2833.4 766,-2833.4 766,-2869.4"/>
<text text-anchor="middle" x="692" y="-2847.7" font-family="Times,serif" font-size="14.00">debug_dump.main</text>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge29" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M703.25,-2869.59C725.02,-2906.45 779.59,-2990.06 849,-3032.4 859.64,-3038.89 871.5,-3044.06 883.65,-3048.19"/>
<polygon fill="black" stroke="black" points="882.83,-3051.6 893.42,-3051.28 884.94,-3044.93 882.83,-3051.6"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge30" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M696.76,-2869.6C708.63,-2922.1 750.5,-3074.53 849,-3145.4 933.44,-3206.15 1050.42,-3223.25 1142.54,-3225.77"/>
<polygon fill="black" stroke="black" points="1142.72,-3229.28 1152.79,-3226 1142.87,-3222.28 1142.72,-3229.28"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge31" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M766.3,-2851.4C794.07,-2851.4 826.51,-2851.4 857.67,-2851.4"/>
<polygon fill="black" stroke="black" points="857.73,-2854.9 867.73,-2851.4 857.73,-2847.9 857.73,-2854.9"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge32" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M705.42,-2869.46C728.95,-2901.88 783.6,-2968.96 849,-2994.4 968.71,-3040.96 1299.09,-3006.07 1427,-2994.4 1450.21,-2992.28 1475.06,-2988.5 1498.18,-2984.32"/>
<polygon fill="black" stroke="black" points="1499.12,-2987.7 1508.32,-2982.44 1497.85,-2980.82 1499.12,-2987.7"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge33" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M730.29,-2833.35C757.86,-2817.95 793.81,-2793.1 813,-2760.4 871.17,-2661.32 770.25,-2588.07 849,-2504.4 856.54,-2496.39 865.76,-2490.4 875.79,-2485.96"/>
<polygon fill="black" stroke="black" points="877.14,-2489.19 885.2,-2482.31 874.61,-2482.67 877.14,-2489.19"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge34" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M729.67,-2833.31C757.09,-2817.81 793.14,-2792.85 813,-2760.4 860.6,-2682.62 785.29,-2623.65 849,-2558.4 856.81,-2550.4 866.3,-2544.44 876.58,-2540.03"/>
<polygon fill="black" stroke="black" points="878.08,-2543.2 886.21,-2536.41 875.61,-2536.65 878.08,-2543.2"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge35" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M766.3,-2835.93C802.84,-2828.22 847.47,-2818.8 886.63,-2810.53"/>
<polygon fill="black" stroke="black" points="887.4,-2813.94 896.47,-2808.45 885.96,-2807.1 887.4,-2813.94"/>
</g>
<!-- clean_data._parse_date -->
<g id="node28" class="node">
<title>clean_data._parse_date</title>
<g id="a_node28"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="1381,-1547.4 1199,-1547.4 1199,-1511.4 1381,-1511.4 1381,-1547.4"/>
<text text-anchor="middle" x="1290" y="-1525.7" font-family="Times,serif" font-size="14.00">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;serde_utils.read_text -->
<g id="edge36" class="edge">
<title>clean_data._parse_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1381.08,-1522.19C1492.65,-1515.44 1673.56,-1512.34 1719,-1558.4 1771.04,-1611.16 1745.78,-2150.87 1755,-2224.4 1780.88,-2430.87 1838.78,-2675.29 1858.93,-2757.13"/>
<polygon fill="black" stroke="black" points="1855.61,-2758.28 1861.41,-2767.15 1862.4,-2756.6 1855.61,-2758.28"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node29" class="node">
<title>clean_data._clean_raw</title>
<polygon fill="none" stroke="black" points="1070.5,-1543.4 895.5,-1543.4 895.5,-1507.4 1070.5,-1507.4 1070.5,-1543.4"/>
<text text-anchor="middle" x="983" y="-1521.7" font-family="Times,serif" font-size="14.00">clean_data._clean_raw</text>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge37" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1070.8,-1529.32C1087.7,-1533.64 1104.14,-1540.8 1117,-1552.4 1156.77,-1588.27 1113.15,-1631.62 1153,-1667.4 1164.24,-1677.49 1178.14,-1684.26 1192.72,-1688.73"/>
<polygon fill="black" stroke="black" points="1191.82,-1692.11 1202.38,-1691.34 1193.65,-1685.35 1191.82,-1692.11"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge38" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M1070.58,-1526.54C1107.36,-1527.02 1150.48,-1527.58 1188.64,-1528.08"/>
<polygon fill="black" stroke="black" points="1188.7,-1531.59 1198.74,-1528.22 1188.79,-1524.59 1188.7,-1531.59"/>
</g>
<!-- clean_data._clean_media -->
<g id="node30" class="node">
<title>clean_data._clean_media</title>
<polygon fill="none" stroke="black" points="1078.5,-1381.4 887.5,-1381.4 887.5,-1345.4 1078.5,-1345.4 1078.5,-1381.4"/>
<text text-anchor="middle" x="983" y="-1359.7" font-family="Times,serif" font-size="14.00">clean_data._clean_media</text>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge40" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1078.64,-1360.26C1093.34,-1355.6 1106.95,-1348.11 1117,-1336.4 1171.9,-1272.4 1097.97,-642.28 1153,-578.4 1163.12,-566.66 1176.75,-559.11 1191.49,-554.4"/>
<polygon fill="black" stroke="black" points="1192.6,-557.72 1201.31,-551.69 1190.74,-550.98 1192.6,-557.72"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge39" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M1078.62,-1369.63C1092.7,-1374.05 1106.11,-1380.66 1117,-1390.4 1155.96,-1425.27 1113.96,-1467.62 1153,-1502.4 1163.34,-1511.61 1175.9,-1518.05 1189.16,-1522.49"/>
<polygon fill="black" stroke="black" points="1188.34,-1525.9 1198.92,-1525.39 1190.33,-1519.19 1188.34,-1525.9"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node31" class="node">
<title>clean_data._clean_lots</title>
<polygon fill="none" stroke="black" points="1070,-1435.4 896,-1435.4 896,-1399.4 1070,-1399.4 1070,-1435.4"/>
<text text-anchor="middle" x="983" y="-1413.7" font-family="Times,serif" font-size="14.00">clean_data._clean_lots</text>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge41" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1070.05,-1419.44C1087.61,-1423.76 1104.51,-1431.4 1117,-1444.4 1186.55,-1516.8 1083.3,-1595.15 1153,-1667.4 1163.76,-1678.56 1177.72,-1685.81 1192.57,-1690.41"/>
<polygon fill="black" stroke="black" points="1191.88,-1693.85 1202.44,-1693.07 1193.7,-1687.09 1191.88,-1693.85"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node32" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node32"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="1372,-1000.4 1208,-1000.4 1208,-964.4 1372,-964.4 1372,-1000.4"/>
<text text-anchor="middle" x="1290" y="-978.7" font-family="Times,serif" font-size="14.00">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge42" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M1070.01,-1416.13C1087.78,-1411.81 1104.79,-1403.98 1117,-1390.4 1173.86,-1327.16 1096,-1072.52 1153,-1009.4 1164.73,-996.41 1180.78,-988.62 1197.73,-984.12"/>
<polygon fill="black" stroke="black" points="1198.82,-987.47 1207.8,-981.84 1197.27,-980.64 1198.82,-987.47"/>
</g>
<!-- lot_io.read_lots -->
<g id="node33" class="node">
<title>lot_io.read_lots</title>
<g id="a_node33"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="1352.5,-1439.4 1227.5,-1439.4 1227.5,-1403.4 1352.5,-1403.4 1352.5,-1439.4"/>
<text text-anchor="middle" x="1290" y="-1417.7" font-family="Times,serif" font-size="14.00">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge43" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1070.18,-1418.53C1116.59,-1419.14 1173.18,-1419.88 1217.19,-1420.46"/>
<polygon fill="black" stroke="black" points="1217.18,-1423.96 1227.23,-1420.59 1217.28,-1416.96 1217.18,-1423.96"/>
</g>
<!-- lot_io.read_lots&#45;&gt;serde_utils.load_json -->
<g id="edge133" class="edge">
<title>lot_io.read_lots&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1352.64,-1417.74C1379.53,-1419.67 1408.98,-1427.23 1427,-1448.4 1499.72,-1533.82 1426.03,-2351.49 1463,-2457.4 1483.64,-2516.52 1532.23,-2572.42 1562.97,-2603.66"/>
<polygon fill="black" stroke="black" points="1560.82,-2606.47 1570.37,-2611.06 1565.77,-2601.52 1560.82,-2606.47"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node109" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node109"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="1655.5,-550.4 1526.5,-550.4 1526.5,-514.4 1655.5,-514.4 1655.5,-550.4"/>
<text text-anchor="middle" x="1591" y="-528.7" font-family="Times,serif" font-size="14.00">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge134" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M1352.51,-1424.95C1379.37,-1423 1408.83,-1415.44 1427,-1394.4 1479.64,-1333.44 1431.87,-744.69 1463,-670.4 1482.87,-622.99 1526.54,-581.56 1557.09,-556.78"/>
<polygon fill="black" stroke="black" points="1559.29,-559.5 1564.94,-550.54 1554.94,-554.02 1559.29,-559.5"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node34" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node34"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="1100.5,-1327.4 865.5,-1327.4 865.5,-1291.4 1100.5,-1291.4 1100.5,-1327.4"/>
<text text-anchor="middle" x="983" y="-1305.7" font-family="Times,serif" font-size="14.00">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node35" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node35"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="1411.5,-1151.4 1168.5,-1151.4 1168.5,-1115.4 1411.5,-1115.4 1411.5,-1151.4"/>
<text text-anchor="middle" x="1290" y="-1129.7" font-family="Times,serif" font-size="14.00">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node36" class="node">
<title>clean_data.main</title>
<polygon fill="none" stroke="black" points="758,-1381.4 626,-1381.4 626,-1345.4 758,-1345.4 758,-1381.4"/>
<text text-anchor="middle" x="692" y="-1359.7" font-family="Times,serif" font-size="14.00">clean_data.main</text>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge44" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M755.35,-1381.46C775.7,-1389.78 797.12,-1401.45 813,-1417.4 840.79,-1445.32 818.28,-1473.74 849,-1498.4 859.72,-1507.01 872.46,-1513.09 885.74,-1517.36"/>
<polygon fill="black" stroke="black" points="884.91,-1520.76 895.49,-1520.15 886.84,-1514.03 884.91,-1520.76"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge45" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M758.22,-1363.4C793.36,-1363.4 837.57,-1363.4 877.39,-1363.4"/>
<polygon fill="black" stroke="black" points="877.42,-1366.9 887.42,-1363.4 877.42,-1359.9 877.42,-1366.9"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge46" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M758.22,-1375.59C795.9,-1382.63 844,-1391.62 885.95,-1399.45"/>
<polygon fill="black" stroke="black" points="885.43,-1402.92 895.91,-1401.31 886.72,-1396.04 885.43,-1402.92"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge47" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M758.22,-1351.21C792.83,-1344.75 836.22,-1336.64 875.56,-1329.29"/>
<polygon fill="black" stroke="black" points="876.28,-1332.71 885.47,-1327.44 875,-1325.83 876.28,-1332.71"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge48" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M708.24,-1345.31C734.05,-1315.94 789.4,-1258.16 849,-1228.4 946.22,-1179.87 1067.62,-1156.03 1158.27,-1144.38"/>
<polygon fill="black" stroke="black" points="1158.84,-1147.84 1168.33,-1143.12 1157.97,-1140.89 1158.84,-1147.84"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node37" class="node">
<title>testing_mode.apply_testing_mode</title>
<polygon fill="none" stroke="black" points="259,-3436.4 0,-3436.4 0,-3400.4 259,-3400.4 259,-3436.4"/>
<text text-anchor="middle" x="129.5" y="-3414.7" font-family="Times,serif" font-size="14.00">testing_mode.apply_testing_mode</text>
</g>
<!-- tg_client._mark_activity -->
<g id="node38" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node38"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="508,-3436.4 322,-3436.4 322,-3400.4 508,-3400.4 508,-3436.4"/>
<text text-anchor="middle" x="415" y="-3414.7" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;tg_client._mark_activity -->
<!-- tg_client._progress_logger -->
<g id="node43" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node43"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="794.5,-3436.4 589.5,-3436.4 589.5,-3400.4 794.5,-3400.4 794.5,-3436.4"/>
<text text-anchor="middle" x="692" y="-3414.7" font-family="Times,serif" font-size="14.00">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._mark_activity&#45;&gt;tg_client._progress_logger -->
<!-- embed.embed_file -->
<g id="node39" class="node">
<title>embed.embed_file</title>
<g id="a_node39"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="1056,-439.4 910,-439.4 910,-403.4 1056,-403.4 1056,-439.4"/>
<text text-anchor="middle" x="983" y="-417.7" font-family="Times,serif" font-size="14.00">embed.embed_file</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge51" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1054.24,-439.54C1078.18,-449.38 1102.54,-464.23 1117,-486.4 1172.16,-570.97 1087.4,-1317.65 1153,-1394.4 1168.81,-1412.89 1193.33,-1420.99 1217.22,-1424.02"/>
<polygon fill="black" stroke="black" points="1217.1,-1427.53 1227.39,-1425.03 1217.79,-1420.56 1217.1,-1427.53"/>
</g>
<!-- serde_utils.write_json -->
<g id="node40" class="node">
<title>serde_utils.write_json</title>
<g id="a_node40"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="1376.5,-623.4 1203.5,-623.4 1203.5,-587.4 1376.5,-587.4 1376.5,-623.4"/>
<text text-anchor="middle" x="1290" y="-601.7" font-family="Times,serif" font-size="14.00">serde_utils.write_json</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;serde_utils.write_json -->
<g id="edge50" class="edge">
<title>embed.embed_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1056.3,-424.95C1078.18,-429.38 1100.7,-437.8 1117,-453.4 1158.78,-493.37 1110.43,-539.28 1153,-578.4 1164.34,-588.82 1178.51,-595.72 1193.38,-600.21"/>
<polygon fill="black" stroke="black" points="1192.67,-603.64 1203.23,-602.82 1194.47,-596.87 1192.67,-603.64"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node41" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node41"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="1361.5,-485.4 1218.5,-485.4 1218.5,-449.4 1361.5,-449.4 1361.5,-485.4"/>
<text text-anchor="middle" x="1290" y="-463.7" font-family="Times,serif" font-size="14.00">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge52" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M1056.28,-432.3C1102,-439.2 1161.17,-448.12 1208.4,-455.24"/>
<polygon fill="black" stroke="black" points="1207.88,-458.71 1218.29,-456.74 1208.92,-451.78 1207.88,-458.71"/>
</g>
<!-- embed.main -->
<g id="node42" class="node">
<title>embed.main</title>
<g id="a_node42"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="744,-439.4 640,-439.4 640,-403.4 744,-403.4 744,-439.4"/>
<text text-anchor="middle" x="692" y="-417.7" font-family="Times,serif" font-size="14.00">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge53" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M744,-421.4C787.06,-421.4 849.52,-421.4 899.65,-421.4"/>
<polygon fill="black" stroke="black" points="899.82,-424.9 909.82,-421.4 899.82,-417.9 899.82,-424.9"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node44" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node44"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="1094.5,-3436.4 871.5,-3436.4 871.5,-3400.4 1094.5,-3400.4 1094.5,-3436.4"/>
<text text-anchor="middle" x="983" y="-3414.7" font-family="Times,serif" font-size="14.00">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger&#45;&gt;tg_client._should_skip_media -->
<!-- tg_client._allowed_topic -->
<g id="node49" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node49"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="1383,-3436.4 1197,-3436.4 1197,-3400.4 1383,-3400.4 1383,-3436.4"/>
<text text-anchor="middle" x="1290" y="-3414.7" font-family="Times,serif" font-size="14.00">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._should_skip_media&#45;&gt;tg_client._allowed_topic -->
<!-- tg_client._write_md -->
<g id="node45" class="node">
<title>tg_client._write_md</title>
<g id="a_node45"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="207.5,-3328.4 51.5,-3328.4 51.5,-3292.4 207.5,-3292.4 207.5,-3328.4"/>
<text text-anchor="middle" x="129.5" y="-3306.7" font-family="Times,serif" font-size="14.00">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge56" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M207.59,-3310.4C245.97,-3310.4 292.4,-3310.4 331.5,-3310.4"/>
<polygon fill="black" stroke="black" points="331.8,-3313.9 341.8,-3310.4 331.8,-3306.9 331.8,-3313.9"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node46" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node46"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="1092,-1597.4 874,-1597.4 874,-1561.4 1092,-1561.4 1092,-1597.4"/>
<text text-anchor="middle" x="983" y="-1575.7" font-family="Times,serif" font-size="14.00">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge57" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1092.21,-1593.08C1101.01,-1596.62 1109.42,-1601 1117,-1606.4 1142.64,-1624.67 1127.32,-1649.19 1153,-1667.4 1164.73,-1675.72 1178.38,-1681.62 1192.43,-1685.79"/>
<polygon fill="black" stroke="black" points="1191.63,-1689.2 1202.2,-1688.4 1193.44,-1682.44 1191.63,-1689.2"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node47" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node47"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="794,-1597.4 590,-1597.4 590,-1561.4 794,-1561.4 794,-1597.4"/>
<text text-anchor="middle" x="692" y="-1575.7" font-family="Times,serif" font-size="14.00">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge58" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M794.08,-1579.4C816.48,-1579.4 840.42,-1579.4 863.45,-1579.4"/>
<polygon fill="black" stroke="black" points="863.6,-1582.9 873.6,-1579.4 863.6,-1575.9 863.6,-1582.9"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node48" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node48"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="802.5,-1227.4 581.5,-1227.4 581.5,-1191.4 802.5,-1191.4 802.5,-1227.4"/>
<text text-anchor="middle" x="692" y="-1205.7" font-family="Times,serif" font-size="14.00">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge59" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M802.58,-1198.64C913.2,-1190.43 1073.69,-1186.67 1117,-1228.4 1187.48,-1296.32 1087.85,-1594.35 1153,-1667.4 1163.45,-1679.12 1177.4,-1686.62 1192.39,-1691.29"/>
<polygon fill="black" stroke="black" points="1191.8,-1694.75 1202.37,-1693.96 1193.61,-1687.99 1191.8,-1694.75"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node50" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node50"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="1697,-3436.4 1485,-3436.4 1485,-3400.4 1697,-3400.4 1697,-3436.4"/>
<text text-anchor="middle" x="1591" y="-3414.7" font-family="Times,serif" font-size="14.00">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic&#45;&gt;tg_client._schedule_caption -->
<!-- tg_client._save_progress -->
<g id="node51" class="node">
<title>tg_client._save_progress</title>
<g id="a_node51"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="1962.5,-3436.4 1771.5,-3436.4 1771.5,-3400.4 1962.5,-3400.4 1962.5,-3436.4"/>
<text text-anchor="middle" x="1867" y="-3414.7" font-family="Times,serif" font-size="14.00">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client._schedule_caption&#45;&gt;tg_client._save_progress -->
<!-- tg_client._schedule_chop -->
<g id="node52" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node52"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="1386.5,-285.4 1193.5,-285.4 1193.5,-249.4 1386.5,-249.4 1386.5,-285.4"/>
<text text-anchor="middle" x="1290" y="-263.7" font-family="Times,serif" font-size="14.00">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node53" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node53"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="1078.5,-331.4 887.5,-331.4 887.5,-295.4 1078.5,-295.4 1078.5,-331.4"/>
<text text-anchor="middle" x="983" y="-309.7" font-family="Times,serif" font-size="14.00">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge65" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1078.64,-318.67C1092.89,-323.17 1106.35,-330.06 1117,-340.4 1167.43,-389.37 1107.62,-440.72 1153,-494.4 1166.01,-509.79 1183.87,-521.1 1202.38,-529.39"/>
<polygon fill="black" stroke="black" points="1201.21,-532.7 1211.79,-533.34 1203.92,-526.24 1201.21,-532.7"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node54" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node54"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="1400.5,-339.4 1179.5,-339.4 1179.5,-303.4 1400.5,-303.4 1400.5,-339.4"/>
<text text-anchor="middle" x="1290" y="-317.7" font-family="Times,serif" font-size="14.00">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge63" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M1078.83,-315.89C1107.43,-316.64 1139.19,-317.47 1169.19,-318.26"/>
<polygon fill="black" stroke="black" points="1169.2,-321.76 1179.29,-318.52 1169.38,-314.76 1169.2,-321.76"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node55" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node55"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="1417.5,-778.4 1162.5,-778.4 1162.5,-742.4 1417.5,-742.4 1417.5,-778.4"/>
<text text-anchor="middle" x="1290" y="-756.7" font-family="Times,serif" font-size="14.00">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge64" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M1078.6,-317.4C1093.12,-322 1106.68,-329.25 1117,-340.4 1205.8,-436.38 1093.88,-515.77 1153,-632.4 1175.47,-676.74 1219.8,-713.87 1251.75,-736.53"/>
<polygon fill="black" stroke="black" points="1249.78,-739.43 1259.99,-742.26 1253.78,-733.68 1249.78,-739.43"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node69" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node69"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="1719,-795.4 1463,-795.4 1463,-759.4 1719,-759.4 1719,-795.4"/>
<text text-anchor="middle" x="1591" y="-773.7" font-family="Times,serif" font-size="14.00">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge79" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M1417.8,-767.61C1429.25,-768.26 1440.88,-768.92 1452.42,-769.58"/>
<polygon fill="black" stroke="black" points="1452.34,-773.08 1462.52,-770.15 1452.74,-766.09 1452.34,-773.08"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node56" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node56"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="1100.5,-277.4 865.5,-277.4 865.5,-241.4 1100.5,-241.4 1100.5,-277.4"/>
<text text-anchor="middle" x="983" y="-255.7" font-family="Times,serif" font-size="14.00">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge67" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1100.73,-273.7C1106.66,-277.22 1112.16,-281.42 1117,-286.4 1182.37,-353.69 1094.55,-421.02 1153,-494.4 1165.22,-509.75 1182.32,-521.01 1200.27,-529.27"/>
<polygon fill="black" stroke="black" points="1199.15,-532.59 1209.72,-533.32 1201.9,-526.16 1199.15,-532.59"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge66" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M1100.61,-262.46C1127.75,-263.17 1156.5,-263.93 1183.15,-264.62"/>
<polygon fill="black" stroke="black" points="1183.16,-268.13 1193.25,-264.89 1183.34,-261.13 1183.16,-268.13"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node57" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node57"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="1068.5,-2019.4 897.5,-2019.4 897.5,-1983.4 1068.5,-1983.4 1068.5,-2019.4"/>
<text text-anchor="middle" x="983" y="-1997.7" font-family="Times,serif" font-size="14.00">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge68" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1019.51,-1983.4C1050.23,-1965.92 1093.33,-1936.47 1117,-1898.4 1159.39,-1830.23 1096.1,-1778.03 1153,-1721.4 1163.92,-1710.54 1177.87,-1703.41 1192.67,-1698.85"/>
<polygon fill="black" stroke="black" points="1193.74,-1702.18 1202.48,-1696.2 1191.92,-1695.42 1193.74,-1702.18"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;serde_utils.read_text -->
<g id="edge69" class="edge">
<title>tg_client._get_id_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1068.61,-1994.73C1086.35,-1989.83 1103.69,-1981.94 1117,-1969.4 1156.92,-1931.81 1108.93,-1884.03 1153,-1851.4 1203.68,-1813.88 1675.18,-1848.05 1719,-1893.4 1770.41,-1946.61 1743.81,-2151.26 1755,-2224.4 1786.51,-2430.31 1840.92,-2675.51 1859.54,-2757.3"/>
<polygon fill="black" stroke="black" points="1856.14,-2758.13 1861.78,-2767.1 1862.96,-2756.57 1856.14,-2758.13"/>
</g>
<!-- tg_client._load_progress -->
<g id="node58" class="node">
<title>tg_client._load_progress</title>
<g id="a_node58"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="1685.5,-3036.4 1496.5,-3036.4 1496.5,-3000.4 1685.5,-3000.4 1685.5,-3036.4"/>
<text text-anchor="middle" x="1591" y="-3014.7" font-family="Times,serif" font-size="14.00">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;serde_utils.read_text -->
<g id="edge70" class="edge">
<title>tg_client._load_progress&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1685.75,-3006.86C1697.5,-3003.04 1708.91,-2998.01 1719,-2991.4 1787.49,-2946.5 1834.18,-2857.77 1854.5,-2812.84"/>
<polygon fill="black" stroke="black" points="1857.82,-2814 1858.66,-2803.44 1851.41,-2811.17 1857.82,-2814"/>
</g>
<!-- tg_client.get_first_id -->
<g id="node59" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node59"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="496,-1789.4 334,-1789.4 334,-1753.4 496,-1753.4 496,-1789.4"/>
<text text-anchor="middle" x="415" y="-1767.7" font-family="Times,serif" font-size="14.00">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge71" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M496.05,-1775.9C655.27,-1783.76 1005.93,-1795.35 1117,-1752.4 1136.69,-1744.79 1134.02,-1730.65 1153,-1721.4 1165.28,-1715.42 1178.79,-1710.76 1192.39,-1707.14"/>
<polygon fill="black" stroke="black" points="1193.43,-1710.48 1202.29,-1704.68 1191.74,-1703.69 1193.43,-1710.48"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node60" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node60"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1062.5,-1273.4 903.5,-1273.4 903.5,-1237.4 1062.5,-1237.4 1062.5,-1273.4"/>
<text text-anchor="middle" x="983" y="-1251.7" font-family="Times,serif" font-size="14.00">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge72" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1062.76,-1255.09C1083.1,-1258.97 1103.14,-1266.98 1117,-1282.4 1174.42,-1346.33 1095.44,-1603.6 1153,-1667.4 1163.52,-1679.06 1177.5,-1686.53 1192.5,-1691.19"/>
<polygon fill="black" stroke="black" points="1191.92,-1694.65 1202.48,-1693.86 1193.73,-1687.89 1191.92,-1694.65"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node61" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node61"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="1108.5,-715.4 857.5,-715.4 857.5,-679.4 1108.5,-679.4 1108.5,-715.4"/>
<text text-anchor="middle" x="983" y="-693.7" font-family="Times,serif" font-size="14.00">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge73" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1019.24,-715.45C1050.68,-733.6 1095.03,-764.7 1117,-805.4 1192.32,-944.96 1099.94,-1010.95 1153,-1160.4 1178.61,-1232.54 1234.38,-1304.46 1265.97,-1341.57"/>
<polygon fill="black" stroke="black" points="1263.52,-1344.09 1272.7,-1349.38 1268.82,-1339.52 1263.52,-1344.09"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge74" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1108.83,-697.4C1214.62,-697.4 1365.36,-697.4 1469.81,-697.4"/>
<polygon fill="black" stroke="black" points="1470.08,-700.9 1480.08,-697.4 1470.08,-693.9 1470.08,-700.9"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge75" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1108.53,-714.17C1111.47,-716.07 1114.31,-718.14 1117,-720.4 1153.18,-750.77 1118.64,-787.98 1153,-820.4 1245.36,-907.55 1347.69,-802.22 1427,-901.4 1503.08,-996.54 1383.27,-1356.3 1463,-1448.4 1466.6,-1452.55 1470.66,-1456.16 1475.07,-1459.29"/>
<polygon fill="black" stroke="black" points="1473.58,-1462.49 1483.94,-1464.73 1477.24,-1456.52 1473.58,-1462.49"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node62" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node62"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="1090.5,-531.4 875.5,-531.4 875.5,-495.4 1090.5,-495.4 1090.5,-531.4"/>
<text text-anchor="middle" x="983" y="-509.7" font-family="Times,serif" font-size="14.00">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- price_utils.canonical_currency -->
<g id="node63" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node63"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="1406,-1950.4 1174,-1950.4 1174,-1914.4 1406,-1914.4 1406,-1950.4"/>
<text text-anchor="middle" x="1290" y="-1928.7" font-family="Times,serif" font-size="14.00">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node64" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node64"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="1110.5,-2111.4 855.5,-2111.4 855.5,-2075.4 1110.5,-2075.4 1110.5,-2111.4"/>
<text text-anchor="middle" x="983" y="-2089.7" font-family="Times,serif" font-size="14.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge76" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M1096.32,-2075.37C1103.78,-2071.52 1110.78,-2066.92 1117,-2061.4 1151.4,-2030.88 1118.53,-1994.83 1153,-1964.4 1156.72,-1961.11 1160.72,-1958.15 1164.93,-1955.47"/>
<polygon fill="black" stroke="black" points="1166.89,-1958.38 1173.83,-1950.38 1163.42,-1952.3 1166.89,-1958.38"/>
</g>
<!-- price_utils.predict_price -->
<g id="node65" class="node">
<title>price_utils.predict_price</title>
<g id="a_node65"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="1384.5,-1896.4 1195.5,-1896.4 1195.5,-1860.4 1384.5,-1860.4 1384.5,-1896.4"/>
<text text-anchor="middle" x="1290" y="-1874.7" font-family="Times,serif" font-size="14.00">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node66" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node66"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="1692,-1992.4 1490,-1992.4 1490,-1956.4 1692,-1956.4 1692,-1992.4"/>
<text text-anchor="middle" x="1591" y="-1970.7" font-family="Times,serif" font-size="14.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node67" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node67"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="1086,-2279.4 880,-2279.4 880,-2243.4 1086,-2243.4 1086,-2279.4"/>
<text text-anchor="middle" x="983" y="-2257.7" font-family="Times,serif" font-size="14.00">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- moderation.should_skip_text -->
<g id="node68" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node68"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="1977.5,-795.4 1756.5,-795.4 1756.5,-759.4 1977.5,-759.4 1977.5,-795.4"/>
<text text-anchor="middle" x="1867" y="-773.7" font-family="Times,serif" font-size="14.00">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge78" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M1596.84,-795.73C1615.2,-865.89 1681.43,-1124.2 1719,-1340.4 1741.46,-1469.66 1734.32,-1503.84 1755,-1633.4 1788,-1840.16 1841.46,-2086.83 1859.68,-2169.13"/>
<polygon fill="black" stroke="black" points="1856.29,-2169.98 1861.87,-2178.99 1863.12,-2168.47 1856.29,-2169.98"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge77" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M1719.37,-777.4C1728.21,-777.4 1737.11,-777.4 1745.91,-777.4"/>
<polygon fill="black" stroke="black" points="1746.18,-780.9 1756.18,-777.4 1746.18,-773.9 1746.18,-780.9"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node70" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node70"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="1697,-1603.4 1485,-1603.4 1485,-1567.4 1697,-1567.4 1697,-1603.4"/>
<text text-anchor="middle" x="1591" y="-1581.7" font-family="Times,serif" font-size="14.00">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node71" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node71"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="1396,-1603.4 1184,-1603.4 1184,-1567.4 1396,-1567.4 1396,-1603.4"/>
<text text-anchor="middle" x="1290" y="-1581.7" font-family="Times,serif" font-size="14.00">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge80" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M1396.42,-1585.4C1421.72,-1585.4 1448.88,-1585.4 1474.62,-1585.4"/>
<polygon fill="black" stroke="black" points="1474.78,-1588.9 1484.78,-1585.4 1474.78,-1581.9 1474.78,-1588.9"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node72" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node72"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="1093,-1489.4 873,-1489.4 873,-1453.4 1093,-1453.4 1093,-1489.4"/>
<text text-anchor="middle" x="983" y="-1467.7" font-family="Times,serif" font-size="14.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge81" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1093.05,-1456.45C1101.48,-1453.16 1109.58,-1449.19 1117,-1444.4 1140,-1429.54 1129.97,-1409.21 1153,-1394.4 1169.72,-1383.65 1189.79,-1377.03 1209.33,-1372.99"/>
<polygon fill="black" stroke="black" points="1209.97,-1376.43 1219.16,-1371.15 1208.69,-1369.55 1209.97,-1376.43"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge82" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1093.02,-1482.01C1101.86,-1486.16 1110.05,-1491.52 1117,-1498.4 1171.56,-1552.44 1098.32,-1613.48 1153,-1667.4 1163.9,-1678.15 1177.77,-1685.22 1192.47,-1689.78"/>
<polygon fill="black" stroke="black" points="1191.65,-1693.19 1202.22,-1692.43 1193.49,-1686.43 1191.65,-1693.19"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge85" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1093.25,-1453.49C1134.5,-1446.73 1180.35,-1439.21 1217.3,-1433.16"/>
<polygon fill="black" stroke="black" points="1218.17,-1436.56 1227.47,-1431.49 1217.04,-1429.65 1218.17,-1436.56"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge83" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M1093.16,-1462.27C1102.15,-1457.86 1110.33,-1452.03 1117,-1444.4 1196.59,-1353.35 1104.05,-1011.98 1153,-901.4 1174.8,-852.16 1221.67,-809.88 1254.25,-784.8"/>
<polygon fill="black" stroke="black" points="1256.73,-787.31 1262.61,-778.5 1252.52,-781.72 1256.73,-787.31"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge84" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M1093.09,-1485.67C1101.55,-1489.1 1109.65,-1493.29 1117,-1498.4 1141.91,-1515.73 1128.18,-1538.95 1153,-1556.4 1159.67,-1561.09 1166.95,-1565.05 1174.55,-1568.38"/>
<polygon fill="black" stroke="black" points="1173.39,-1571.69 1183.98,-1572.15 1175.99,-1565.19 1173.39,-1571.69"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node73" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node73"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="1102.5,-2751.4 863.5,-2751.4 863.5,-2715.4 1102.5,-2715.4 1102.5,-2751.4"/>
<text text-anchor="middle" x="983" y="-2729.7" font-family="Times,serif" font-size="14.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;serde_utils.load_json -->
<g id="edge86" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1102.67,-2751.17C1193.37,-2760.54 1320.5,-2764.48 1427,-2733.4 1479.65,-2718.03 1531.5,-2679.91 1562.11,-2654.35"/>
<polygon fill="black" stroke="black" points="1564.44,-2656.96 1569.8,-2647.82 1559.91,-2651.63 1564.44,-2656.96"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node74" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node74"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="1068.5,-1651.4 897.5,-1651.4 897.5,-1615.4 1068.5,-1615.4 1068.5,-1651.4"/>
<text text-anchor="middle" x="983" y="-1629.7" font-family="Times,serif" font-size="14.00">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._format_vector -->
<g id="node75" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node75"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="1397.5,-1766.4 1182.5,-1766.4 1182.5,-1730.4 1397.5,-1730.4 1397.5,-1766.4"/>
<text text-anchor="middle" x="1290" y="-1744.7" font-family="Times,serif" font-size="14.00">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- similar_utils._similar_path -->
<g id="node76" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node76"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="1392,-2134.4 1188,-2134.4 1188,-2098.4 1392,-2098.4 1392,-2134.4"/>
<text text-anchor="middle" x="1290" y="-2112.7" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar -->
<g id="node77" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node77"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="1391,-2670.4 1189,-2670.4 1189,-2634.4 1391,-2634.4 1391,-2670.4"/>
<text text-anchor="middle" x="1290" y="-2648.7" font-family="Times,serif" font-size="14.00">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar&#45;&gt;serde_utils.load_json -->
<g id="edge87" class="edge">
<title>similar_utils._load_similar&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1391.39,-2644.68C1425.83,-2642.03 1464.18,-2639.08 1497.93,-2636.48"/>
<polygon fill="black" stroke="black" points="1498.55,-2639.95 1508.25,-2635.69 1498.01,-2632.97 1498.55,-2639.95"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node78" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node78"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="1085,-2387.4 881,-2387.4 881,-2351.4 1085,-2351.4 1085,-2387.4"/>
<text text-anchor="middle" x="983" y="-2365.7" font-family="Times,serif" font-size="14.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge90" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1085.21,-2380.91C1096.5,-2384.77 1107.37,-2389.82 1117,-2396.4 1141.42,-2413.1 1133.15,-2430.46 1153,-2452.4 1182.92,-2485.47 1223.66,-2516.37 1252.73,-2536.58"/>
<polygon fill="black" stroke="black" points="1250.76,-2539.47 1260.98,-2542.24 1254.72,-2533.7 1250.76,-2539.47"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;serde_utils.write_json -->
<g id="edge89" class="edge">
<title>similar_utils._save_similar&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1085.19,-2364.24C1097.41,-2359.51 1108.54,-2352.52 1117,-2342.4 1174.36,-2273.81 1116.62,-815.08 1153,-733.4 1173.1,-688.27 1217.46,-651.51 1250.08,-629.15"/>
<polygon fill="black" stroke="black" points="1252.15,-631.98 1258.51,-623.51 1248.25,-626.16 1252.15,-631.98"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge88" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M1085.12,-2362.48C1097.04,-2357.95 1108.1,-2351.49 1117,-2342.4 1179.87,-2278.17 1089.99,-2207.49 1153,-2143.4 1160.21,-2136.06 1168.81,-2130.42 1178.13,-2126.12"/>
<polygon fill="black" stroke="black" points="1179.72,-2129.25 1187.66,-2122.24 1177.08,-2122.77 1179.72,-2129.25"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node79" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node79"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="1411.5,-2188.4 1168.5,-2188.4 1168.5,-2152.4 1411.5,-2152.4 1411.5,-2188.4"/>
<text text-anchor="middle" x="1290" y="-2166.7" font-family="Times,serif" font-size="14.00">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node80" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node80"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="1698,-2100.4 1484,-2100.4 1484,-2064.4 1698,-2064.4 1698,-2100.4"/>
<text text-anchor="middle" x="1591" y="-2078.7" font-family="Times,serif" font-size="14.00">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node81" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node81"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="1095,-2441.4 871,-2441.4 871,-2405.4 1095,-2405.4 1095,-2441.4"/>
<text text-anchor="middle" x="983" y="-2419.7" font-family="Times,serif" font-size="14.00">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge91" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M1095.11,-2412.06C1103.18,-2408 1110.64,-2402.87 1117,-2396.4 1178.49,-2333.87 1092.48,-2265.87 1153,-2202.4 1155.84,-2199.42 1158.9,-2196.7 1162.13,-2194.21"/>
<polygon fill="black" stroke="black" points="1164.23,-2197.02 1170.52,-2188.5 1160.29,-2191.23 1164.23,-2197.02"/>
</g>
<!-- scan_ontology._is_misparsed -->
<g id="node82" class="node">
<title>scan_ontology._is_misparsed</title>
<g id="a_node82"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="1092.5,-975.4 873.5,-975.4 873.5,-939.4 1092.5,-939.4 1092.5,-975.4"/>
<text text-anchor="middle" x="983" y="-953.7" font-family="Times,serif" font-size="14.00">scan_ontology._is_misparsed</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node83" class="node">
<title>lot_io.get_seller</title>
<g id="a_node83"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="1354.5,-1054.4 1225.5,-1054.4 1225.5,-1018.4 1354.5,-1018.4 1354.5,-1054.4"/>
<text text-anchor="middle" x="1290" y="-1032.7" font-family="Times,serif" font-size="14.00">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge92" class="edge">
<title>scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M1092.22,-975.46C1100.73,-978.06 1109.09,-981.02 1117,-984.4 1134.91,-992.05 1135.07,-1001.79 1153,-1009.4 1172.52,-1017.69 1194.71,-1023.47 1215.42,-1027.49"/>
<polygon fill="black" stroke="black" points="1214.98,-1030.96 1225.45,-1029.32 1216.24,-1024.08 1214.98,-1030.96"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node84" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node84"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="809,-1052.4 575,-1052.4 575,-1016.4 809,-1016.4 809,-1052.4"/>
<text text-anchor="middle" x="692" y="-1030.7" font-family="Times,serif" font-size="14.00">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge93" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M809.19,-1041.4C926.08,-1049.38 1092.46,-1063.63 1117,-1081.4 1148.25,-1104.03 1134.35,-1126.62 1153,-1160.4 1190.13,-1227.66 1241.68,-1301.87 1269.44,-1340.56"/>
<polygon fill="black" stroke="black" points="1266.95,-1343.1 1275.63,-1349.16 1272.63,-1339 1266.95,-1343.1"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge94" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M715.91,-1052.42C745.15,-1074.54 798.06,-1111.64 849,-1132.4 961.86,-1178.4 1036.96,-1098.5 1117,-1190.4 1186.81,-1270.56 1082.5,-1587.84 1153,-1667.4 1163.41,-1679.15 1177.34,-1686.67 1192.33,-1691.34"/>
<polygon fill="black" stroke="black" points="1191.73,-1694.81 1202.3,-1694.02 1193.55,-1688.05 1191.73,-1694.81"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge97" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M758.57,-1052.45C876.08,-1084.93 1110.95,-1150.49 1117,-1157.4 1187.22,-1237.53 1079.39,-1317.38 1153,-1394.4 1169.59,-1411.76 1193.9,-1419.69 1217.4,-1422.9"/>
<polygon fill="black" stroke="black" points="1217.07,-1426.39 1227.39,-1424.01 1217.83,-1419.43 1217.07,-1426.39"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed -->
<g id="edge95" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed</title>
<path fill="none" stroke="black" d="M744.58,-1016.29C774.78,-1006.09 813.78,-993.59 849,-984.4 857.97,-982.06 867.32,-979.8 876.73,-977.66"/>
<polygon fill="black" stroke="black" points="877.54,-981.06 886.53,-975.46 876.01,-974.23 877.54,-981.06"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node85" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node85"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="1110,-1029.4 856,-1029.4 856,-993.4 1110,-993.4 1110,-1029.4"/>
<text text-anchor="middle" x="983" y="-1007.7" font-family="Times,serif" font-size="14.00">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge96" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M809.3,-1025.15C821.18,-1024.2 833.34,-1023.23 845.41,-1022.27"/>
<polygon fill="black" stroke="black" points="845.84,-1025.75 855.53,-1021.47 845.29,-1018.77 845.84,-1025.75"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge130" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1097.62,-1029.55C1104.64,-1033.38 1111.2,-1037.95 1117,-1043.4 1156.65,-1080.65 1129.83,-1111.17 1153,-1160.4 1185.77,-1230.03 1239.19,-1303.47 1268.37,-1341.36"/>
<polygon fill="black" stroke="black" points="1265.66,-1343.58 1274.55,-1349.33 1271.19,-1339.29 1265.66,-1343.58"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge132" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M1007.73,-1029.41C1038.68,-1054.4 1091.86,-1102.73 1117,-1157.4 1144.22,-1216.6 1108.63,-1400.68 1153,-1448.4 1162.43,-1458.54 1174.49,-1465.49 1187.52,-1470.17"/>
<polygon fill="black" stroke="black" points="1186.57,-1473.54 1197.16,-1473.19 1188.66,-1466.86 1186.57,-1473.54"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node89" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node89"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="1398.5,-946.4 1181.5,-946.4 1181.5,-910.4 1398.5,-910.4 1398.5,-946.4"/>
<text text-anchor="middle" x="1290" y="-924.7" font-family="Times,serif" font-size="14.00">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge131" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M1094.23,-993.39C1102.08,-990.78 1109.75,-987.81 1117,-984.4 1135.6,-975.66 1134.39,-964.1 1153,-955.4 1159.01,-952.59 1165.3,-950.08 1171.74,-947.82"/>
<polygon fill="black" stroke="black" points="1172.85,-951.14 1181.27,-944.71 1170.68,-944.49 1172.85,-951.14"/>
</g>
<!-- scan_ontology.main -->
<g id="node86" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="492.5,-894.4 337.5,-894.4 337.5,-858.4 492.5,-858.4 492.5,-894.4"/>
<text text-anchor="middle" x="415" y="-872.7" font-family="Times,serif" font-size="14.00">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;serde_utils.write_json -->
<g id="edge100" class="edge">
<title>scan_ontology.main&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M437.06,-858.14C496.63,-807.8 673.44,-667.43 849,-616.4 963.75,-583.05 1102.5,-586.34 1193.11,-593.95"/>
<polygon fill="black" stroke="black" points="1192.83,-597.44 1203.09,-594.82 1193.43,-590.47 1192.83,-597.44"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge98" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M447.55,-894.53C497.66,-923.32 595.42,-979.49 650.6,-1011.19"/>
<polygon fill="black" stroke="black" points="648.99,-1014.3 659.4,-1016.24 652.47,-1008.23 648.99,-1014.3"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node87" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node87"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="798.5,-894.4 585.5,-894.4 585.5,-858.4 798.5,-858.4 798.5,-894.4"/>
<text text-anchor="middle" x="692" y="-872.7" font-family="Times,serif" font-size="14.00">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge99" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M492.6,-876.4C518.15,-876.4 547.22,-876.4 575.07,-876.4"/>
<polygon fill="black" stroke="black" points="575.27,-879.9 585.27,-876.4 575.27,-872.9 575.27,-879.9"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node93" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node93"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="1088.5,-921.4 877.5,-921.4 877.5,-885.4 1088.5,-885.4 1088.5,-921.4"/>
<text text-anchor="middle" x="983" y="-899.7" font-family="Times,serif" font-size="14.00">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge115" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M798.56,-886.26C820.9,-888.35 844.57,-890.56 867.22,-892.68"/>
<polygon fill="black" stroke="black" points="866.92,-896.16 877.21,-893.61 867.58,-889.2 866.92,-896.16"/>
</g>
<!-- chop.process_message -->
<g id="node88" class="node">
<title>chop.process_message</title>
<polygon fill="none" stroke="black" points="781.5,-569.4 602.5,-569.4 602.5,-533.4 781.5,-533.4 781.5,-569.4"/>
<text text-anchor="middle" x="692" y="-547.7" font-family="Times,serif" font-size="14.00">chop.process_message</text>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge101" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M698.72,-569.61C714.36,-616.15 762.52,-739.77 849,-797.4 949.57,-864.42 1034.01,-755.55 1117,-843.4 1165.69,-894.94 1128.88,-1093.73 1153,-1160.4 1179.05,-1232.39 1234.64,-1304.36 1266.09,-1341.53"/>
<polygon fill="black" stroke="black" points="1263.62,-1344.03 1272.79,-1349.35 1268.94,-1339.48 1263.62,-1344.03"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge108" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M781.58,-551.4C891.28,-551.4 1077.53,-551.4 1191.29,-551.4"/>
<polygon fill="black" stroke="black" points="1191.39,-554.9 1201.39,-551.4 1191.39,-547.9 1191.39,-554.9"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge109" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M697.13,-569.71C709.76,-621.07 752.98,-767.11 849,-834.4 947.74,-903.59 1035.78,-787.29 1117,-876.4 1202.79,-970.53 1069.13,-1352.55 1153,-1448.4 1162.25,-1458.97 1174.34,-1466.12 1187.51,-1470.87"/>
<polygon fill="black" stroke="black" points="1186.67,-1474.27 1197.26,-1473.92 1188.76,-1467.59 1186.67,-1474.27"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge107" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M700.75,-569.63C719.45,-611.19 771.32,-712.99 849,-760.4 952.09,-823.32 1028.69,-723 1117,-805.4 1167.13,-852.17 1103.57,-907.89 1153,-955.4 1165.33,-967.25 1181.29,-974.61 1197.92,-979.05"/>
<polygon fill="black" stroke="black" points="1197.24,-982.48 1207.77,-981.33 1198.82,-975.66 1197.24,-982.48"/>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge102" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M716.25,-533.37C745.61,-511.43 798.45,-474.69 849,-453.4 865.01,-446.66 882.73,-441.16 899.87,-436.74"/>
<polygon fill="black" stroke="black" points="901.02,-440.06 909.88,-434.26 899.34,-433.27 901.02,-440.06"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge104" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M725.57,-533.35C756.32,-517.41 804.26,-495.35 849,-486.4 907.4,-474.72 1070.12,-449.67 1117,-486.4 1169.61,-527.62 1119.29,-574.69 1153,-632.4 1178.19,-675.52 1222.3,-713.09 1253.44,-736.18"/>
<polygon fill="black" stroke="black" points="1251.71,-739.24 1261.86,-742.3 1255.83,-733.58 1251.71,-739.24"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge103" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M781.67,-539.74C808.05,-536.27 837.36,-532.42 865.24,-528.75"/>
<polygon fill="black" stroke="black" points="865.98,-532.19 875.44,-527.41 865.07,-525.25 865.98,-532.19"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge105" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M703.38,-569.49C725.19,-605.66 779.54,-686.63 849,-724.4 954.98,-782.03 1027.02,-687.05 1117,-767.4 1161.4,-807.05 1110.06,-855.18 1153,-896.4 1158.72,-901.89 1165.2,-906.5 1172.15,-910.37"/>
<polygon fill="black" stroke="black" points="1170.67,-913.54 1181.18,-914.88 1173.8,-907.28 1170.67,-913.54"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node90" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node90"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="1353.5,-231.4 1226.5,-231.4 1226.5,-195.4 1353.5,-195.4 1353.5,-231.4"/>
<text text-anchor="middle" x="1290" y="-209.7" font-family="Times,serif" font-size="14.00">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge106" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M724.54,-533.26C752.52,-515.41 792.1,-485.47 813,-448.4 860.79,-363.62 776.11,-296.9 849,-232.4 901.61,-185.85 1105.41,-196.34 1216.24,-205.96"/>
<polygon fill="black" stroke="black" points="1216.07,-209.46 1226.34,-206.86 1216.69,-202.49 1216.07,-209.46"/>
</g>
<!-- chop.main -->
<g id="node91" class="node">
<title>chop.main</title>
<g id="a_node91"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="460,-569.4 370,-569.4 370,-533.4 460,-533.4 460,-569.4"/>
<text text-anchor="middle" x="415" y="-547.7" font-family="Times,serif" font-size="14.00">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge110" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M460.18,-551.4C495.75,-551.4 547.1,-551.4 592.34,-551.4"/>
<polygon fill="black" stroke="black" points="592.49,-554.9 602.49,-551.4 592.49,-547.9 592.49,-554.9"/>
</g>
<!-- config_utils.load_config -->
<g id="node92" class="node">
<title>config_utils.load_config</title>
<g id="a_node92"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="1958,-1624.4 1776,-1624.4 1776,-1588.4 1958,-1588.4 1958,-1624.4"/>
<text text-anchor="middle" x="1867" y="-1602.7" font-family="Times,serif" font-size="14.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node94" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node94"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="781,-948.4 603,-948.4 603,-912.4 781,-912.4 781,-948.4"/>
<text text-anchor="middle" x="692" y="-926.7" font-family="Times,serif" font-size="14.00">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge111" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M781.28,-922.15C808.38,-919.62 838.6,-916.8 867.2,-914.13"/>
<polygon fill="black" stroke="black" points="867.62,-917.6 877.25,-913.19 866.96,-910.63 867.62,-917.6"/>
</g>
<!-- log_utils.init_logger -->
<g id="node95" class="node">
<title>log_utils.init_logger</title>
<g id="a_node95"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="771,-131.4 613,-131.4 613,-95.4 771,-95.4 771,-131.4"/>
<text text-anchor="middle" x="692" y="-109.7" font-family="Times,serif" font-size="14.00">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge112" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M771.01,-116.1C787.04,-120.36 802.27,-127.8 813,-140.4 855.16,-189.89 826.69,-663.34 849,-724.4 871.76,-786.68 923.59,-845.75 955.41,-878.02"/>
<polygon fill="black" stroke="black" points="953.11,-880.67 962.66,-885.26 958.05,-875.71 953.11,-880.67"/>
</g>
<!-- log_utils.get_logger -->
<g id="node96" class="node">
<title>log_utils.get_logger</title>
<g id="a_node96"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="1061.5,-131.4 904.5,-131.4 904.5,-95.4 1061.5,-95.4 1061.5,-131.4"/>
<text text-anchor="middle" x="983" y="-109.7" font-family="Times,serif" font-size="14.00">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge113" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M771.21,-107.33C809.27,-106.49 855.16,-106.43 894.4,-107.14"/>
<polygon fill="black" stroke="black" points="894.41,-110.64 904.48,-107.34 894.55,-103.64 894.41,-110.64"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge114" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M904.48,-119.46C866.52,-120.3 820.63,-120.37 781.32,-119.68"/>
<polygon fill="black" stroke="black" points="781.27,-116.17 771.21,-119.47 781.14,-123.17 781.27,-116.17"/>
</g>
<!-- telegram_bot._t -->
<g id="node97" class="node">
<title>telegram_bot._t</title>
<g id="a_node97"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="193.5,-3490.4 65.5,-3490.4 65.5,-3454.4 193.5,-3454.4 193.5,-3490.4"/>
<text text-anchor="middle" x="129.5" y="-3468.7" font-family="Times,serif" font-size="14.00">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.save_state -->
<g id="node98" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="510.5,-3490.4 319.5,-3490.4 319.5,-3454.4 510.5,-3454.4 510.5,-3490.4"/>
<text text-anchor="middle" x="415" y="-3468.7" font-family="Times,serif" font-size="14.00">telegram_bot.save_state</text>
</g>
<!-- telegram_bot._t&#45;&gt;telegram_bot.save_state -->
<!-- lot_io.embedding_path -->
<g id="node103" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node103"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="781,-3490.4 603,-3490.4 603,-3454.4 781,-3454.4 781,-3490.4"/>
<text text-anchor="middle" x="692" y="-3468.7" font-family="Times,serif" font-size="14.00">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- telegram_bot.save_state&#45;&gt;lot_io.embedding_path -->
<!-- telegram_bot.ensure_profile -->
<g id="node99" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node99"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="523.5,-1462.4 306.5,-1462.4 306.5,-1426.4 523.5,-1426.4 523.5,-1462.4"/>
<text text-anchor="middle" x="415" y="-1440.7" font-family="Times,serif" font-size="14.00">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node100" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node100"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="796,-1462.4 588,-1462.4 588,-1426.4 796,-1426.4 796,-1462.4"/>
<text text-anchor="middle" x="692" y="-1440.7" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge117" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M523.5,-1444.4C541.13,-1444.4 559.46,-1444.4 577.23,-1444.4"/>
<polygon fill="black" stroke="black" points="577.63,-1447.9 587.63,-1444.4 577.63,-1440.9 577.63,-1447.9"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node101" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node101"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="1393,-3182.4 1187,-3182.4 1187,-3146.4 1393,-3146.4 1393,-3182.4"/>
<text text-anchor="middle" x="1290" y="-3160.7" font-family="Times,serif" font-size="14.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;serde_utils.read_text -->
<g id="edge118" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1377.78,-3182.44C1471.08,-3196.69 1619.41,-3203.86 1719,-3132.4 1826.98,-3054.93 1856.15,-2881.92 1863.6,-2813.77"/>
<polygon fill="black" stroke="black" points="1867.09,-2814.07 1864.61,-2803.77 1860.12,-2813.36 1867.09,-2814.07"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node102" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node102"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="1077,-3136.4 889,-3136.4 889,-3100.4 1077,-3100.4 1077,-3136.4"/>
<text text-anchor="middle" x="983" y="-3114.7" font-family="Times,serif" font-size="14.00">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;serde_utils.read_text -->
<g id="edge119" class="edge">
<title>telegram_bot.load_state&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1077.22,-3121.39C1263.11,-3126.58 1666.63,-3133.67 1719,-3099.4 1820.18,-3033.2 1853.08,-2877.55 1862.56,-2813.6"/>
<polygon fill="black" stroke="black" points="1866.06,-2813.84 1863.98,-2803.45 1859.13,-2812.87 1866.06,-2813.84"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node113" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node113"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="1093.5,-3490.4 872.5,-3490.4 872.5,-3454.4 1093.5,-3454.4 1093.5,-3490.4"/>
<text text-anchor="middle" x="983" y="-3468.7" font-family="Times,serif" font-size="14.00">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- lot_io.embedding_path&#45;&gt;phone_utils.format_georgian -->
<!-- telegram_bot.scan_embeddings -->
<g id="node104" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node104"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="813,-2751.4 571,-2751.4 571,-2715.4 813,-2715.4 813,-2751.4"/>
<text text-anchor="middle" x="692" y="-2729.7" font-family="Times,serif" font-size="14.00">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge121" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M813.05,-2733.4C826.27,-2733.4 839.78,-2733.4 853.1,-2733.4"/>
<polygon fill="black" stroke="black" points="853.25,-2736.9 863.25,-2733.4 853.25,-2729.9 853.25,-2736.9"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node105" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="808.5,-1651.4 575.5,-1651.4 575.5,-1615.4 808.5,-1615.4 808.5,-1651.4"/>
<text text-anchor="middle" x="692" y="-1629.7" font-family="Times,serif" font-size="14.00">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge122" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M808.88,-1633.4C834.83,-1633.4 862.06,-1633.4 887.04,-1633.4"/>
<polygon fill="black" stroke="black" points="887.23,-1636.9 897.23,-1633.4 887.23,-1629.9 887.23,-1636.9"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node106" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="535,-1583.4 295,-1583.4 295,-1547.4 535,-1547.4 535,-1583.4"/>
<text text-anchor="middle" x="415" y="-1561.7" font-family="Times,serif" font-size="14.00">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge123" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M440.18,-1547.29C469.62,-1526.09 521.53,-1491.35 571,-1471.4 576.33,-1469.25 581.86,-1467.26 587.5,-1465.41"/>
<polygon fill="black" stroke="black" points="588.56,-1468.74 597.07,-1462.43 586.48,-1462.06 588.56,-1468.74"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge124" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M481.86,-1583.4C509.35,-1590.76 541.66,-1599.22 571,-1606.4 580.08,-1608.62 589.57,-1610.88 599.06,-1613.08"/>
<polygon fill="black" stroke="black" points="598.39,-1616.52 608.92,-1615.36 599.97,-1609.7 598.39,-1616.52"/>
</g>
<!-- notes_utils.collect_notes -->
<g id="node107" class="node">
<title>notes_utils.collect_notes</title>
<g id="a_node107"><a xlink:title="Return combined notes if ``notes/`` exists.">
<polygon fill="none" stroke="black" points="1385.5,-2410.4 1194.5,-2410.4 1194.5,-2374.4 1385.5,-2374.4 1385.5,-2410.4"/>
<text text-anchor="middle" x="1290" y="-2388.7" font-family="Times,serif" font-size="14.00">notes_utils.collect_notes</text>
</a>
</g>
</g>
<!-- notes_utils.collect_notes&#45;&gt;serde_utils.read_md -->
<g id="edge125" class="edge">
<title>notes_utils.collect_notes&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1385.64,-2389.83C1401.37,-2385.22 1416.08,-2377.59 1427,-2365.4 1489.2,-2295.95 1401.27,-2017.27 1463,-1947.4 1472.88,-1936.21 1486.15,-1929.01 1500.39,-1924.47"/>
<polygon fill="black" stroke="black" points="1501.65,-1927.76 1510.37,-1921.74 1499.81,-1921 1501.65,-1927.76"/>
</g>
<!-- serde_utils.parse_md -->
<g id="node108" class="node">
<title>serde_utils.parse_md</title>
<g id="a_node108"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="1374,-2356.4 1206,-2356.4 1206,-2320.4 1374,-2320.4 1374,-2356.4"/>
<text text-anchor="middle" x="1290" y="-2334.7" font-family="Times,serif" font-size="14.00">serde_utils.parse_md</text>
</a>
</g>
</g>
<!-- serde_utils.parse_md&#45;&gt;serde_utils.read_md -->
<g id="edge128" class="edge">
<title>serde_utils.parse_md&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1374.14,-2335.31C1394.08,-2330.54 1413.49,-2321.81 1427,-2306.4 1532.72,-2185.83 1355.99,-2066.83 1463,-1947.4 1472.9,-1936.35 1486.1,-1929.2 1500.26,-1924.67"/>
<polygon fill="black" stroke="black" points="1501.47,-1927.97 1510.18,-1921.94 1499.61,-1921.22 1501.47,-1927.97"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node110" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node110"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="1373,-393.4 1207,-393.4 1207,-357.4 1373,-357.4 1373,-393.4"/>
<text text-anchor="middle" x="1290" y="-371.7" font-family="Times,serif" font-size="14.00">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node111" class="node">
<title>lot_io.write_lots</title>
<g id="a_node111"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="1048,-385.4 918,-385.4 918,-349.4 1048,-349.4 1048,-385.4"/>
<text text-anchor="middle" x="983" y="-363.7" font-family="Times,serif" font-size="14.00">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;serde_utils.write_json -->
<g id="edge135" class="edge">
<title>lot_io.write_lots&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1048.32,-365.97C1072.84,-368.79 1099.15,-376.43 1117,-394.4 1175.71,-453.53 1094.16,-519.4 1153,-578.4 1164.09,-589.52 1178.35,-596.72 1193.45,-601.29"/>
<polygon fill="black" stroke="black" points="1192.91,-604.76 1203.47,-603.92 1194.69,-597.99 1192.91,-604.76"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge137" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M1048.21,-364.66C1073.32,-367.15 1100.1,-374.91 1117,-394.4 1206.7,-497.82 1063.08,-906.18 1153,-1009.4 1168.5,-1027.19 1192.06,-1035.31 1215.24,-1038.57"/>
<polygon fill="black" stroke="black" points="1215.15,-1042.08 1225.48,-1039.71 1215.93,-1035.12 1215.15,-1042.08"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge136" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M1048.32,-380.21C1070.14,-384.62 1094.65,-389.65 1117,-394.4 1133.03,-397.81 1136.87,-399.49 1153,-402.4 1274,-424.2 1310.53,-401.05 1427,-440.4 1474.84,-456.56 1524.66,-487 1556.43,-508.43"/>
<polygon fill="black" stroke="black" points="1554.66,-511.46 1564.89,-514.22 1558.61,-505.68 1554.66,-511.46"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge138" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M1048.31,-369.09C1091.39,-370.22 1148.77,-371.72 1196.69,-372.98"/>
<polygon fill="black" stroke="black" points="1196.68,-376.48 1206.77,-373.24 1196.87,-369.48 1196.68,-376.48"/>
</g>
<!-- debug_dump:cli -->
<g id="node123" class="node">
<title>debug_dump:cli</title>
<g id="a_node123"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1354.5,-3490.4 1225.5,-3490.4 1225.5,-3454.4 1354.5,-3454.4 1354.5,-3490.4"/>
<text text-anchor="middle" x="1290" y="-3468.7" font-family="Times,serif" font-size="14.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian&#45;&gt;debug_dump:cli -->
<!-- lot_io.iter_lot_files -->
<g id="node114" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node114"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="1363,-1658.4 1217,-1658.4 1217,-1622.4 1363,-1622.4 1363,-1658.4"/>
<text text-anchor="middle" x="1290" y="-1636.7" font-family="Times,serif" font-size="14.00">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node115" class="node">
<title>lot_io.get_lot</title>
<g id="a_node115"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="1037,-2333.4 929,-2333.4 929,-2297.4 1037,-2297.4 1037,-2333.4"/>
<text text-anchor="middle" x="983" y="-2311.7" font-family="Times,serif" font-size="14.00">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge141" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1037.15,-2319.05C1065.2,-2317.87 1097.72,-2310.98 1117,-2288.4 1177.66,-2217.35 1092.19,-1519.32 1153,-1448.4 1168.84,-1429.93 1193.36,-1421.84 1217.25,-1418.81"/>
<polygon fill="black" stroke="black" points="1217.82,-1422.27 1227.42,-1417.8 1217.13,-1415.3 1217.82,-1422.27"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge142" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M1037.26,-2315.3C1063.66,-2317.77 1094.6,-2324.77 1117,-2342.4 1146.68,-2365.77 1121.39,-2398.72 1153,-2419.4 1209.43,-2456.32 1398.08,-2447.28 1508.2,-2438.3"/>
<polygon fill="black" stroke="black" points="1508.61,-2441.78 1518.28,-2437.46 1508.03,-2434.81 1508.61,-2441.78"/>
</g>
<!-- build_site._load_ontology -->
<g id="node116" class="node">
<title>build_site._load_ontology</title>
<polygon fill="none" stroke="black" points="1387.5,-2724.4 1192.5,-2724.4 1192.5,-2688.4 1387.5,-2688.4 1387.5,-2724.4"/>
<text text-anchor="middle" x="1290" y="-2702.7" font-family="Times,serif" font-size="14.00">build_site._load_ontology</text>
</g>
<!-- build_site._load_ontology&#45;&gt;serde_utils.load_json -->
<g id="edge143" class="edge">
<title>build_site._load_ontology&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1387.85,-2688.43C1401.06,-2685.61 1414.4,-2682.58 1427,-2679.4 1460.01,-2671.08 1496.25,-2660.15 1526.17,-2650.63"/>
<polygon fill="black" stroke="black" points="1527.6,-2653.84 1536.05,-2647.46 1525.46,-2647.18 1527.6,-2653.84"/>
</g>
<!-- build_site._compile_locale -->
<g id="node117" class="node">
<title>build_site._compile_locale</title>
<polygon fill="none" stroke="black" points="1691,-2046.4 1491,-2046.4 1491,-2010.4 1691,-2010.4 1691,-2046.4"/>
<text text-anchor="middle" x="1591" y="-2024.7" font-family="Times,serif" font-size="14.00">build_site._compile_locale</text>
</g>
<!-- build_site._env_for_lang -->
<g id="node118" class="node">
<title>build_site._env_for_lang</title>
<polygon fill="none" stroke="black" points="1383.5,-2042.4 1196.5,-2042.4 1196.5,-2006.4 1383.5,-2006.4 1383.5,-2042.4"/>
<text text-anchor="middle" x="1290" y="-2020.7" font-family="Times,serif" font-size="14.00">build_site._env_for_lang</text>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge144" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M1383.56,-2025.64C1414.28,-2026.05 1448.77,-2026.51 1480.63,-2026.94"/>
<polygon fill="black" stroke="black" points="1480.83,-2030.44 1490.88,-2027.07 1480.93,-2023.44 1480.83,-2030.44"/>
</g>
<!-- build_site._iter_lots -->
<g id="node119" class="node">
<title>build_site._iter_lots</title>
<g id="a_node119"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="1060.5,-1743.4 905.5,-1743.4 905.5,-1707.4 1060.5,-1707.4 1060.5,-1743.4"/>
<text text-anchor="middle" x="983" y="-1721.7" font-family="Times,serif" font-size="14.00">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge145" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1060.62,-1722.78C1081.67,-1718.25 1102.63,-1709.54 1117,-1693.4 1205.99,-1593.42 1062.03,-1492.58 1153,-1394.4 1167.55,-1378.7 1188.4,-1370.65 1209.42,-1366.83"/>
<polygon fill="black" stroke="black" points="1210.03,-1370.28 1219.39,-1365.32 1208.98,-1363.35 1210.03,-1370.28"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge146" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1060.57,-1717.62C1100.51,-1713.56 1149.78,-1708.55 1192.33,-1704.23"/>
<polygon fill="black" stroke="black" points="1192.83,-1707.69 1202.43,-1703.2 1192.12,-1700.73 1192.83,-1707.69"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge149" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1060.71,-1722.47C1081.63,-1717.92 1102.5,-1709.27 1117,-1693.4 1191.23,-1612.15 1077.15,-1528.15 1153,-1448.4 1169.55,-1431 1193.85,-1423.06 1217.35,-1419.85"/>
<polygon fill="black" stroke="black" points="1217.79,-1423.33 1227.35,-1418.75 1217.02,-1416.37 1217.79,-1423.33"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge147" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M1053.8,-1707.34C1077.85,-1697.5 1102.38,-1682.62 1117,-1660.4 1163.4,-1589.86 1119.55,-978.92 1153,-901.4 1174.34,-851.95 1221.31,-809.73 1254.05,-784.71"/>
<polygon fill="black" stroke="black" points="1256.54,-787.22 1262.45,-778.42 1252.35,-781.61 1256.54,-787.22"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge148" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M1060.56,-1719.21C1080.63,-1714.5 1101.09,-1706.59 1117,-1693.4 1147.02,-1668.52 1122.57,-1637.78 1153,-1613.4 1159.49,-1608.2 1166.69,-1603.9 1174.31,-1600.34"/>
<polygon fill="black" stroke="black" points="1175.92,-1603.46 1183.78,-1596.36 1173.2,-1597.01 1175.92,-1603.46"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge150" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M1060.63,-1712.33C1079.54,-1707.66 1099.41,-1701.48 1117,-1693.4 1134.93,-1685.16 1134.9,-1675.28 1153,-1667.4 1169.76,-1660.1 1188.54,-1654.76 1206.67,-1650.85"/>
<polygon fill="black" stroke="black" points="1207.56,-1654.24 1216.66,-1648.82 1206.17,-1647.38 1207.56,-1654.24"/>
</g>
<!-- build_site._copy_images -->
<g id="node120" class="node">
<title>build_site._copy_images</title>
<polygon fill="none" stroke="black" points="1685,-2890.4 1497,-2890.4 1497,-2854.4 1685,-2854.4 1685,-2890.4"/>
<text text-anchor="middle" x="1591" y="-2868.7" font-family="Times,serif" font-size="14.00">build_site._copy_images</text>
</g>
<!-- build_site.build_page -->
<g id="node121" class="node">
<title>build_site.build_page</title>
<g id="a_node121"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="1066.5,-1889.4 899.5,-1889.4 899.5,-1853.4 1066.5,-1853.4 1066.5,-1889.4"/>
<text text-anchor="middle" x="983" y="-1867.7" font-family="Times,serif" font-size="14.00">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge151" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1066.7,-1871.05C1085.71,-1866.92 1104.11,-1858.95 1117,-1844.4 1183.54,-1769.32 1086.3,-1469.34 1153,-1394.4 1167.3,-1378.34 1188.19,-1370.19 1209.32,-1366.4"/>
<polygon fill="black" stroke="black" points="1209.97,-1369.85 1219.35,-1364.92 1208.94,-1362.92 1209.97,-1369.85"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge152" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1066.82,-1868.67C1085.16,-1864.48 1103.21,-1857.07 1117,-1844.4 1158.94,-1805.86 1110.98,-1759.85 1153,-1721.4 1164.14,-1711.2 1178,-1704.38 1192.56,-1699.9"/>
<polygon fill="black" stroke="black" points="1193.48,-1703.27 1202.21,-1697.27 1191.65,-1696.52 1193.48,-1703.27"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge155" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M1066.8,-1870.75C1085.69,-1866.61 1104.01,-1858.7 1117,-1844.4 1219.8,-1731.3 1049.96,-1615.28 1153,-1502.4 1162.4,-1492.1 1174.51,-1485.08 1187.63,-1480.38"/>
<polygon fill="black" stroke="black" points="1188.83,-1483.67 1197.33,-1477.36 1186.74,-1476.99 1188.83,-1483.67"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge153" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M1066.63,-1865.92C1084.46,-1861.78 1102.33,-1855.08 1117,-1844.4 1143.38,-1825.19 1126.92,-1800.01 1153,-1780.4 1159.2,-1775.74 1165.98,-1771.74 1173.09,-1768.31"/>
<polygon fill="black" stroke="black" points="1174.51,-1771.51 1182.25,-1764.27 1171.69,-1765.1 1174.51,-1771.51"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge154" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M1017.81,-1889.44C1051.81,-1907.48 1105.79,-1935.84 1153,-1959.4 1182.09,-1973.92 1214.98,-1989.66 1241.12,-2002.01"/>
<polygon fill="black" stroke="black" points="1239.9,-2005.3 1250.43,-2006.4 1242.88,-1998.97 1239.9,-2005.3"/>
</g>
<!-- build_site.main -->
<g id="node122" class="node">
<title>build_site.main</title>
<polygon fill="none" stroke="black" points="754.5,-2195.4 629.5,-2195.4 629.5,-2159.4 754.5,-2159.4 754.5,-2195.4"/>
<text text-anchor="middle" x="692" y="-2173.7" font-family="Times,serif" font-size="14.00">build_site.main</text>
</g>
<!-- build_site.main&#45;&gt;serde_utils.read_text -->
<g id="edge168" class="edge">
<title>build_site.main&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M697.49,-2195.6C714.06,-2263.02 772.85,-2505.07 813,-2706.4 822.22,-2752.62 813.41,-2884.51 849,-2915.4 922.01,-2978.78 1628.95,-2934.59 1719,-2899.4 1768.77,-2879.95 1815.61,-2838.03 1842.51,-2810.8"/>
<polygon fill="black" stroke="black" points="1845.11,-2813.16 1849.56,-2803.54 1840.08,-2808.28 1845.11,-2813.16"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge156" class="edge">
<title>build_site.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M743.59,-2159.31C773.96,-2148.77 813.46,-2135.58 849,-2125.4 862.91,-2121.42 877.74,-2117.52 892.25,-2113.88"/>
<polygon fill="black" stroke="black" points="893.37,-2117.21 902.24,-2111.42 891.69,-2110.42 893.37,-2117.21"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.predict_price -->
<g id="edge157" class="edge">
<title>build_site.main&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M711.85,-2159.3C739.49,-2133.93 793.74,-2088.45 849,-2066.4 960.74,-2021.82 1026.04,-2107.13 1117,-2028.4 1160.07,-1991.12 1110.98,-1943.85 1153,-1905.4 1162.32,-1896.87 1173.53,-1890.71 1185.47,-1886.29"/>
<polygon fill="black" stroke="black" points="1186.76,-1889.55 1195.18,-1883.12 1184.58,-1882.9 1186.76,-1889.55"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.currency_rates -->
<g id="edge158" class="edge">
<title>build_site.main&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M754.81,-2167.45C783.44,-2162.96 817.92,-2157.7 849,-2153.4 908.44,-2145.17 1071.27,-2159.25 1117,-2120.4 1160.41,-2083.52 1108.33,-2032.74 1153,-1997.4 1201.8,-1958.79 1367.07,-1960.18 1479.78,-1966.18"/>
<polygon fill="black" stroke="black" points="1479.66,-1969.68 1489.84,-1966.73 1480.04,-1962.69 1479.66,-1969.68"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.guess_currency -->
<g id="edge159" class="edge">
<title>build_site.main&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M743.59,-2195.49C773.96,-2206.03 813.46,-2219.22 849,-2229.4 862.91,-2233.39 877.74,-2237.29 892.25,-2240.92"/>
<polygon fill="black" stroke="black" points="891.69,-2244.38 902.24,-2243.39 893.37,-2237.59 891.69,-2244.38"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge160" class="edge">
<title>build_site.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M692.62,-2195.69C692.12,-2269.83 700.46,-2550.9 849,-2696.4 854.6,-2701.88 860.94,-2706.57 867.73,-2710.57"/>
<polygon fill="black" stroke="black" points="866.1,-2713.67 876.57,-2715.29 869.39,-2707.49 866.1,-2713.67"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._cos_sim -->
<g id="edge161" class="edge">
<title>build_site.main&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M692.57,-2159.2C691.87,-2085.48 699.52,-1806.22 849,-1665.4 859.81,-1655.21 873.29,-1648.09 887.47,-1643.15"/>
<polygon fill="black" stroke="black" points="888.87,-1646.38 897.38,-1640.07 886.79,-1639.7 888.87,-1646.38"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._format_vector -->
<g id="edge162" class="edge">
<title>build_site.main&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M699.15,-2159.2C715.49,-2113.9 764.6,-1995.85 849,-1941.4 950.37,-1876.01 1026.06,-1977.66 1117,-1898.4 1158.33,-1862.37 1112.99,-1817.89 1153,-1780.4 1158.97,-1774.8 1165.74,-1770.13 1172.98,-1766.22"/>
<polygon fill="black" stroke="black" points="1174.89,-1769.18 1182.38,-1761.68 1171.85,-1762.88 1174.89,-1769.18"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._load_similar -->
<g id="edge163" class="edge">
<title>build_site.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M693.14,-2195.76C694.74,-2264.08 710.36,-2505.12 849,-2612.4 898.76,-2650.9 1065.43,-2656.49 1178.74,-2655.53"/>
<polygon fill="black" stroke="black" points="1178.89,-2659.03 1188.85,-2655.42 1178.81,-2652.03 1178.89,-2659.03"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge164" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M704.43,-2195.48C727.31,-2230.05 782.31,-2305.37 849,-2342.4 856.03,-2346.3 863.55,-2349.65 871.3,-2352.51"/>
<polygon fill="black" stroke="black" points="870.26,-2355.85 880.86,-2355.77 872.52,-2349.23 870.26,-2355.85"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge165" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M754.85,-2180.81C783.49,-2182.23 817.97,-2183.7 849,-2184.4 968.08,-2187.07 1018.98,-2252.08 1117,-2184.4 1154.16,-2158.75 1116.05,-2115.35 1153,-2089.4 1202.84,-2054.4 1362.01,-2060.54 1473.8,-2069.99"/>
<polygon fill="black" stroke="black" points="1473.52,-2073.48 1483.78,-2070.85 1474.12,-2066.51 1473.52,-2073.48"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge166" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M700.34,-2195.67C718.51,-2238.38 769.92,-2345.04 849,-2396.4 853.05,-2399.03 857.3,-2401.41 861.7,-2403.57"/>
<polygon fill="black" stroke="black" points="860.35,-2406.8 870.91,-2407.68 863.2,-2400.41 860.35,-2406.8"/>
</g>
<!-- build_site.main&#45;&gt;lot_io.get_seller -->
<g id="edge169" class="edge">
<title>build_site.main&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M692.64,-2158.99C692.34,-2086.95 701.64,-1822.12 849,-1698.4 941.14,-1621.05 1035.22,-1748.64 1117,-1660.4 1200.86,-1569.91 1085.37,-1209.58 1153,-1106.4 1167.65,-1084.05 1191.8,-1068.45 1215.72,-1057.75"/>
<polygon fill="black" stroke="black" points="1217.35,-1060.86 1225.21,-1053.75 1214.63,-1054.41 1217.35,-1060.86"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge167" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M700.99,-2159.29C720.01,-2118.52 772.19,-2019.6 849,-1974.4 952.79,-1913.33 1024.22,-2011.19 1117,-1934.4 1154.36,-1903.48 1116.48,-1863.31 1153,-1831.4 1246.6,-1749.62 1307.7,-1810.29 1427,-1775.4 1571.81,-1733.05 1736.23,-1663.81 1816.55,-1628.55"/>
<polygon fill="black" stroke="black" points="1818.18,-1631.66 1825.92,-1624.42 1815.36,-1625.25 1818.18,-1631.66"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_ontology -->
<g id="edge170" class="edge">
<title>build_site.main&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M692.72,-2195.56C692.72,-2266.59 702.97,-2527.63 849,-2648.4 898.28,-2689.16 1068.64,-2701.44 1182.34,-2705.05"/>
<polygon fill="black" stroke="black" points="1182.38,-2708.55 1192.48,-2705.35 1182.59,-2701.55 1182.38,-2708.55"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge171" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M754.64,-2181.91C858.18,-2188.2 1061.17,-2194.62 1117,-2153.4 1153.99,-2126.09 1118.53,-2086.83 1153,-2056.4 1162.78,-2047.77 1174.46,-2041.35 1186.8,-2036.59"/>
<polygon fill="black" stroke="black" points="1188.05,-2039.86 1196.34,-2033.27 1185.75,-2033.25 1188.05,-2039.86"/>
</g>
<!-- build_site.main&#45;&gt;build_site._iter_lots -->
<g id="edge172" class="edge">
<title>build_site.main&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M695.62,-2159.15C705.15,-2098.97 743.12,-1904.13 849,-1790.4 866.55,-1771.55 890.73,-1757.5 913.67,-1747.38"/>
<polygon fill="black" stroke="black" points="915.21,-1750.53 923.06,-1743.42 912.49,-1744.08 915.21,-1750.53"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_images -->
<g id="edge173" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M697.26,-2195.65C713,-2263.24 769.26,-2505.82 813,-2706.4 829.64,-2782.71 788.38,-2829.16 849,-2878.4 943.88,-2955.48 1306.21,-2914.82 1486.65,-2888.74"/>
<polygon fill="black" stroke="black" points="1487.29,-2892.19 1496.68,-2887.28 1486.28,-2885.26 1487.29,-2892.19"/>
</g>
<!-- build_site.main&#45;&gt;build_site.build_page -->
<g id="edge174" class="edge">
<title>build_site.main&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M697.8,-2159.33C711.89,-2109.94 757.99,-1971.82 849,-1903.4 860.99,-1894.39 875.16,-1887.87 889.7,-1883.17"/>
<polygon fill="black" stroke="black" points="890.7,-1886.53 899.3,-1880.34 888.72,-1879.82 890.7,-1886.53"/>
</g>
<!-- clean_data:cli -->
<g id="node133" class="node">
<title>clean_data:cli</title>
<g id="a_node133"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1647.5,-3490.4 1534.5,-3490.4 1534.5,-3454.4 1647.5,-3454.4 1647.5,-3490.4"/>
<text text-anchor="middle" x="1591" y="-3468.7" font-family="Times,serif" font-size="14.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;clean_data:cli -->
<!-- caption._identify_size -->
<g id="node124" class="node">
<title>caption._identify_size</title>
<g id="a_node124"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="1676,-105.4 1506,-105.4 1506,-69.4 1676,-69.4 1676,-105.4"/>
<text text-anchor="middle" x="1591" y="-83.7" font-family="Times,serif" font-size="14.00">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node125" class="node">
<title>caption._prepare_image</title>
<g id="a_node125"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="1383.5,-101.4 1196.5,-101.4 1196.5,-65.4 1383.5,-65.4 1383.5,-101.4"/>
<text text-anchor="middle" x="1290" y="-79.7" font-family="Times,serif" font-size="14.00">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge176" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M1383.56,-84.64C1419.07,-85.11 1459.62,-85.66 1495.33,-86.13"/>
<polygon fill="black" stroke="black" points="1495.71,-89.64 1505.76,-86.27 1495.8,-82.64 1495.71,-89.64"/>
</g>
<!-- caption._guess_chat -->
<g id="node126" class="node">
<title>caption._guess_chat</title>
<g id="a_node126"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="1670.5,-51.4 1511.5,-51.4 1511.5,-15.4 1670.5,-15.4 1670.5,-51.4"/>
<text text-anchor="middle" x="1591" y="-29.7" font-family="Times,serif" font-size="14.00">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node127" class="node">
<title>caption.caption_file</title>
<g id="a_node127"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="1060.5,-185.4 905.5,-185.4 905.5,-149.4 1060.5,-149.4 1060.5,-185.4"/>
<text text-anchor="middle" x="983" y="-163.7" font-family="Times,serif" font-size="14.00">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.load_json -->
<g id="edge177" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1060.62,-165.11C1180.68,-162.33 1402.1,-160.82 1427,-186.4 1471.01,-231.61 1442.8,-2397.63 1463,-2457.4 1483.05,-2516.72 1531.83,-2572.56 1562.76,-2603.73"/>
<polygon fill="black" stroke="black" points="1560.65,-2606.57 1570.21,-2611.12 1565.57,-2601.59 1560.65,-2606.57"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge181" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1060.7,-152.72C1173.23,-133.15 1375.35,-106.12 1427,-153.4 1493.82,-214.55 1426.38,-476.56 1463,-559.4 1483.75,-606.36 1527.12,-647.82 1557.37,-672.75"/>
<polygon fill="black" stroke="black" points="1555.55,-675.77 1565.53,-679.33 1559.94,-670.33 1555.55,-675.77"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge182" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1051.03,-185.47C1075.48,-195.39 1101.03,-210.33 1117,-232.4 1185.9,-327.63 1081.38,-401.2 1153,-494.4 1164.82,-509.79 1181.57,-521.06 1199.28,-529.3"/>
<polygon fill="black" stroke="black" points="1198.04,-532.58 1208.61,-533.34 1200.82,-526.16 1198.04,-532.58"/>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.write_json -->
<g id="edge178" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1052.1,-185.48C1076.39,-195.37 1101.54,-210.28 1117,-232.4 1161.28,-295.77 1100.92,-521.27 1153,-578.4 1163.81,-590.26 1178.21,-597.77 1193.61,-602.4"/>
<polygon fill="black" stroke="black" points="1192.73,-605.79 1203.29,-604.92 1194.5,-599.02 1192.73,-605.79"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge179" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M1060.53,-157.38C1079.45,-153.42 1099.34,-147.94 1117,-140.4 1134.91,-132.75 1135.21,-123.33 1153,-115.4 1163.65,-110.66 1175.09,-106.57 1186.65,-103.06"/>
<polygon fill="black" stroke="black" points="1187.74,-106.38 1196.37,-100.24 1185.79,-99.66 1187.74,-106.38"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge180" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M1060.57,-164.55C1080.65,-160.6 1101.1,-153.34 1117,-140.4 1148.5,-114.76 1119.69,-79.64 1153,-56.4 1257,16.17 1411.16,3.88 1505.86,-13.46"/>
<polygon fill="black" stroke="black" points="1505.49,-16.95 1515.97,-15.37 1506.79,-10.07 1505.49,-16.95"/>
</g>
<!-- caption.main -->
<g id="node128" class="node">
<title>caption.main</title>
<polygon fill="none" stroke="black" points="746.5,-185.4 637.5,-185.4 637.5,-149.4 746.5,-149.4 746.5,-185.4"/>
<text text-anchor="middle" x="692" y="-163.7" font-family="Times,serif" font-size="14.00">caption.main</text>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge183" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M746.68,-167.4C788.36,-167.4 847,-167.4 895.31,-167.4"/>
<polygon fill="black" stroke="black" points="895.45,-170.9 905.45,-167.4 895.45,-163.9 895.45,-170.9"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node129" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node129"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="1087.5,-2603.4 878.5,-2603.4 878.5,-2567.4 1087.5,-2567.4 1087.5,-2603.4"/>
<text text-anchor="middle" x="983" y="-2581.7" font-family="Times,serif" font-size="14.00">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;serde_utils.parse_md -->
<g id="edge184" class="edge">
<title>image_io.read_image_meta&#45;&gt;serde_utils.parse_md</title>
<path fill="none" stroke="black" d="M1087.71,-2577.4C1098.63,-2572.94 1108.74,-2566.8 1117,-2558.4 1178.21,-2496.21 1091.66,-2427.46 1153,-2365.4 1164.63,-2353.63 1179.82,-2346.24 1195.82,-2341.72"/>
<polygon fill="black" stroke="black" points="1196.98,-2345.04 1205.86,-2339.26 1195.32,-2338.24 1196.98,-2345.04"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node130" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node130"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="522.5,-3382.4 307.5,-3382.4 307.5,-3346.4 522.5,-3346.4 522.5,-3382.4"/>
<text text-anchor="middle" x="415" y="-3360.7" font-family="Times,serif" font-size="14.00">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;serde_utils.write_md -->
<g id="edge185" class="edge">
<title>image_io.write_image_meta&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M522.72,-3364.4C547.68,-3364.4 574.08,-3364.4 598.38,-3364.4"/>
<polygon fill="black" stroke="black" points="598.65,-3367.9 608.65,-3364.4 598.65,-3360.9 598.65,-3367.9"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge186" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M1675.3,-1431.47C1690.45,-1435.4 1705.66,-1440.84 1719,-1448.4 1776.7,-1481.09 1824.88,-1544.11 1849.13,-1579.89"/>
<polygon fill="black" stroke="black" points="1846.31,-1581.98 1854.77,-1588.36 1852.14,-1578.1 1846.31,-1581.98"/>
</g>
<!-- caption_io.write_caption -->
<g id="node132" class="node">
<title>caption_io.write_caption</title>
<g id="a_node132"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="1078,-661.4 888,-661.4 888,-625.4 1078,-625.4 1078,-661.4"/>
<text text-anchor="middle" x="983" y="-639.7" font-family="Times,serif" font-size="14.00">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.load_json -->
<g id="edge194" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1078.22,-648.64C1092.6,-653.14 1106.22,-660.03 1117,-670.4 1165.78,-717.34 1106.48,-769.22 1153,-818.4 1240.44,-910.84 1350.01,-800.1 1427,-901.4 1479.32,-970.24 1435.02,-2375.59 1463,-2457.4 1483.27,-2516.65 1531.98,-2572.51 1562.84,-2603.71"/>
<polygon fill="black" stroke="black" points="1560.71,-2606.53 1570.27,-2611.1 1565.65,-2601.57 1560.71,-2606.53"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge197" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1078.02,-651.78C1183.55,-661.18 1355.01,-676.46 1470.09,-686.72"/>
<polygon fill="black" stroke="black" points="1470.08,-690.23 1480.36,-687.63 1470.71,-683.26 1470.08,-690.23"/>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.write_json -->
<g id="edge195" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1078.42,-631.64C1114.88,-627.09 1156.55,-621.9 1193.14,-617.34"/>
<polygon fill="black" stroke="black" points="1193.83,-620.79 1203.32,-616.08 1192.96,-613.84 1193.83,-620.79"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge196" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M1078.05,-649.3C1092.36,-653.74 1106,-660.43 1117,-670.4 1157.31,-706.94 1111.25,-752.51 1153,-787.4 1247.12,-866.05 1342.78,-731.22 1427,-820.4 1514.75,-913.32 1379.5,-1297.64 1463,-1394.4 1472.07,-1404.91 1484.11,-1411.92 1497.19,-1416.51"/>
<polygon fill="black" stroke="black" points="1496.28,-1419.9 1506.86,-1419.45 1498.31,-1413.2 1496.28,-1419.9"/>
</g>
<!-- embed:cli -->
<g id="node134" class="node">
<title>embed:cli</title>
<g id="a_node134"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1910,-3490.4 1824,-3490.4 1824,-3454.4 1910,-3454.4 1910,-3490.4"/>
<text text-anchor="middle" x="1867" y="-3468.7" font-family="Times,serif" font-size="14.00">embed:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;embed:cli -->
<!-- tg_client:cli -->
<g id="node135" class="node">
<title>tg_client:cli</title>
<g id="a_node135"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="179,-3544.4 80,-3544.4 80,-3508.4 179,-3508.4 179,-3544.4"/>
<text text-anchor="middle" x="129.5" y="-3522.7" font-family="Times,serif" font-size="14.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- moderation:cli -->
<g id="node136" class="node">
<title>moderation:cli</title>
<g id="a_node136"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="474.5,-3544.4 355.5,-3544.4 355.5,-3508.4 474.5,-3508.4 474.5,-3544.4"/>
<text text-anchor="middle" x="415" y="-3522.7" font-family="Times,serif" font-size="14.00">moderation:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;moderation:cli -->
<!-- scan_ontology:cli -->
<g id="node137" class="node">
<title>scan_ontology:cli</title>
<g id="a_node137"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="761,-3544.4 623,-3544.4 623,-3508.4 761,-3508.4 761,-3544.4"/>
<text text-anchor="middle" x="692" y="-3522.7" font-family="Times,serif" font-size="14.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;scan_ontology:cli -->
<!-- chop:cli -->
<g id="node138" class="node">
<title>chop:cli</title>
<g id="a_node138"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1018.5,-3544.4 947.5,-3544.4 947.5,-3508.4 1018.5,-3508.4 1018.5,-3544.4"/>
<text text-anchor="middle" x="983" y="-3522.7" font-family="Times,serif" font-size="14.00">chop:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;chop:cli -->
<!-- telegram_bot:cli -->
<g id="node139" class="node">
<title>telegram_bot:cli</title>
<g id="a_node139"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1356,-3544.4 1224,-3544.4 1224,-3508.4 1356,-3508.4 1356,-3544.4"/>
<text text-anchor="middle" x="1290" y="-3522.7" font-family="Times,serif" font-size="14.00">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;telegram_bot:cli -->
<!-- build_site:cli -->
<g id="node140" class="node">
<title>build_site:cli</title>
<g id="a_node140"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1644.5,-3544.4 1537.5,-3544.4 1537.5,-3508.4 1644.5,-3508.4 1644.5,-3544.4"/>
<text text-anchor="middle" x="1591" y="-3522.7" font-family="Times,serif" font-size="14.00">build_site:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;build_site:cli -->
<!-- caption:cli -->
<g id="node141" class="node">
<title>caption:cli</title>
<g id="a_node141"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1912,-3544.4 1822,-3544.4 1822,-3508.4 1912,-3508.4 1912,-3544.4"/>
<text text-anchor="middle" x="1867" y="-3522.7" font-family="Times,serif" font-size="14.00">caption:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;caption:cli -->
<!-- build_site -->
<g id="node142" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="415" cy="-2177.4" rx="55.79" ry="18"/>
<text text-anchor="middle" x="415" y="-2173.7" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge206" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M470.99,-2177.4C513.54,-2177.4 572.82,-2177.4 619.13,-2177.4"/>
<polygon fill="black" stroke="black" points="619.4,-2180.9 629.4,-2177.4 619.4,-2173.9 619.4,-2180.9"/>
</g>
<!-- caption -->
<g id="node143" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="415" cy="-167.4" rx="44.69" ry="18"/>
<text text-anchor="middle" x="415" y="-163.7" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge207" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M459.88,-167.4C504.99,-167.4 575.71,-167.4 627.05,-167.4"/>
<polygon fill="black" stroke="black" points="627.37,-170.9 637.37,-167.4 627.37,-163.9 627.37,-170.9"/>
</g>
<!-- chop -->
<g id="node144" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="129.5" cy="-551.4" rx="32.49" ry="18"/>
<text text-anchor="middle" x="129.5" y="-547.7" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge208" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M162.2,-551.4C209.9,-551.4 300.8,-551.4 359.34,-551.4"/>
<polygon fill="black" stroke="black" points="359.51,-554.9 369.51,-551.4 359.51,-547.9 359.51,-554.9"/>
</g>
<!-- clean_data -->
<g id="node145" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="415" cy="-1363.4" rx="59.59" ry="18"/>
<text text-anchor="middle" x="415" y="-1359.7" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge209" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M474.99,-1363.4C516.14,-1363.4 571.38,-1363.4 615.7,-1363.4"/>
<polygon fill="black" stroke="black" points="615.85,-1366.9 625.85,-1363.4 615.85,-1359.9 615.85,-1366.9"/>
</g>
<!-- debug_dump -->
<g id="node146" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="415" cy="-2851.4" rx="70.39" ry="18"/>
<text text-anchor="middle" x="415" y="-2847.7" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge210" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M485.39,-2851.4C522.49,-2851.4 568.44,-2851.4 607.49,-2851.4"/>
<polygon fill="black" stroke="black" points="607.78,-2854.9 617.78,-2851.4 607.78,-2847.9 607.78,-2854.9"/>
</g>
<!-- embed -->
<g id="node147" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="415" cy="-421.4" rx="42.49" ry="18"/>
<text text-anchor="middle" x="415" y="-417.7" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge211" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M457.47,-421.4C503.19,-421.4 577.19,-421.4 629.63,-421.4"/>
<polygon fill="black" stroke="black" points="629.81,-424.9 639.81,-421.4 629.81,-417.9 629.81,-424.9"/>
</g>
<!-- moderation -->
<g id="node148" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="692" cy="-1498.4" rx="63.89" ry="18"/>
<text text-anchor="middle" x="692" y="-1494.7" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge212" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M752.88,-1492.81C784.68,-1489.84 824.91,-1486.08 862.76,-1482.54"/>
<polygon fill="black" stroke="black" points="863.21,-1486.01 872.84,-1481.6 862.56,-1479.04 863.21,-1486.01"/>
</g>
<!-- scan_ontology -->
<g id="node149" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="129.5" cy="-876.4" rx="76.09" ry="18"/>
<text text-anchor="middle" x="129.5" y="-872.7" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge213" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M205.73,-876.4C243.07,-876.4 288.38,-876.4 327.19,-876.4"/>
<polygon fill="black" stroke="black" points="327.43,-879.9 337.43,-876.4 327.43,-872.9 327.43,-879.9"/>
</g>
</g>
</svg>
