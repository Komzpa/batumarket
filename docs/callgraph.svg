<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10447pt" height="6036pt"
 viewBox="0.00 0.00 10447.00 6036.27" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 6032.27)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-6032.27 10443,-6032.27 10443,4 -4,4"/>
<!-- phone_utils.format_georgian -->
<g id="node1" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node1"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7791,-1743.77 7379,-1743.77 7379,-1705.77 7791,-1705.77 7791,-1743.77"/>
<text text-anchor="middle" x="7585" y="-1718.05" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- embed.embed_file -->
<g id="node2" class="node">
<title>embed.embed_file</title>
<g id="a_node2"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7790,-4409.27 7380,-4409.27 7380,-4354.27 7790,-4354.27 7790,-4409.27"/>
<text text-anchor="middle" x="7585" y="-4371.23" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- lot_io.read_lots -->
<g id="node3" class="node">
<title>lot_io.read_lots</title>
<g id="a_node3"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8761,-3877.77 8549,-3877.77 8549,-3841.77 8761,-3841.77 8761,-3877.77"/>
<text text-anchor="middle" x="8655" y="-3853.61" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge1" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7790.13,-4392.45C7924.05,-4394.65 8082.81,-4386.52 8130,-4339.77 8195.77,-4274.63 8102.06,-3991.71 8166,-3924.77 8264.42,-3821.73 8441.62,-3825.33 8553.25,-3840.38"/>
<polygon fill="black" stroke="black" points="8552.78,-3843.85 8563.17,-3841.77 8553.75,-3836.91 8552.78,-3843.85"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node4" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node4"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8747.5,-3969.77 8562.5,-3969.77 8562.5,-3933.77 8747.5,-3933.77 8747.5,-3969.77"/>
<text text-anchor="middle" x="8655" y="-3946.99" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge2" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7790.14,-4391.35C7923.33,-4392.96 8081.2,-4384.58 8130,-4339.77 8202.98,-4272.76 8102.12,-4195.51 8166,-4119.77 8262.32,-4005.59 8440.15,-3968.88 8552.48,-3957.16"/>
<polygon fill="black" stroke="black" points="8552.86,-3960.64 8562.47,-3956.16 8552.17,-3953.67 8552.86,-3960.64"/>
</g>
<!-- notes_utils.write_json -->
<g id="node5" class="node">
<title>notes_utils.write_json</title>
<g id="a_node5"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9618,-4525.77 9430,-4525.77 9430,-4489.77 9618,-4489.77 9618,-4525.77"/>
<text text-anchor="middle" x="9524" y="-4503.73" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge3" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7746.29,-4409.28C7862.67,-4420.39 8018.61,-4416.01 8130,-4339.77 8160.51,-4318.89 8134.71,-4284.47 8166,-4264.77 8533.89,-4033.28 8726.88,-4142.54 9144,-4264.77 9292.29,-4308.23 9437.58,-4429.49 9496.06,-4482.47"/>
<polygon fill="black" stroke="black" points="9493.98,-4485.31 9503.72,-4489.48 9498.7,-4480.15 9493.98,-4485.31"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node23" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node23"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9581.5,-4616.77 9466.5,-4616.77 9466.5,-4580.77 9581.5,-4580.77 9581.5,-4616.77"/>
<text text-anchor="middle" x="9524" y="-4595.53" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge23" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8761.04,-3858.76C8888.81,-3859.98 9093.71,-3870.65 9144,-3924.77 9236.43,-4024.26 9090.19,-4432.92 9180,-4534.77 9248.15,-4612.07 9377.19,-4614.9 9456.1,-4608.1"/>
<polygon fill="black" stroke="black" points="9456.78,-4611.55 9466.41,-4607.13 9456.13,-4604.58 9456.78,-4611.55"/>
</g>
<!-- notes_utils.load_json -->
<g id="node27" class="node">
<title>notes_utils.load_json</title>
<g id="a_node27"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9648,-3253.77 9400,-3253.77 9400,-3217.77 9648,-3217.77 9648,-3253.77"/>
<text text-anchor="middle" x="9524" y="-3230.08" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge24" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8761.24,-3867.08C8886.55,-3873.53 9086.17,-3876.03 9144,-3831.77 9184.18,-3801.03 9157.21,-3768.95 9180,-3723.77 9276.36,-3532.75 9440.59,-3332.22 9500.38,-3261.94"/>
<polygon fill="black" stroke="black" points="9503.31,-3263.9 9507.14,-3254.02 9497.98,-3259.35 9503.31,-3263.9"/>
</g>
<!-- embed.main -->
<g id="node6" class="node">
<title>embed.main</title>
<g id="a_node6"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6569,-4399.77 6393,-4399.77 6393,-4363.77 6569,-4363.77 6569,-4399.77"/>
<text text-anchor="middle" x="6481" y="-4375.61" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge4" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6569.39,-4381.77C6740.99,-4381.77 7126.41,-4381.77 7369.73,-4381.77"/>
<polygon fill="black" stroke="black" points="7369.76,-4385.27 7379.76,-4381.77 7369.76,-4378.27 7369.76,-4385.27"/>
</g>
<!-- clean_data._parse_date -->
<g id="node7" class="node">
<title>clean_data._parse_date</title>
<g id="a_node7"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8794.5,-3359.77 8515.5,-3359.77 8515.5,-3323.77 8794.5,-3323.77 8794.5,-3359.77"/>
<text text-anchor="middle" x="8655" y="-3336.08" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- notes_utils.read_text -->
<g id="node8" class="node">
<title>notes_utils.read_text</title>
<g id="a_node8"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="10278.5,-2907.77 10064.5,-2907.77 10064.5,-2871.77 10278.5,-2871.77 10278.5,-2907.77"/>
<text text-anchor="middle" x="10171.5" y="-2884.99" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge5" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8749.71,-3359.83C8962.6,-3395.94 9493.2,-3457.83 9868,-3262.77 10020.58,-3183.37 10123.69,-2989.72 10157.97,-2917.52"/>
<polygon fill="black" stroke="black" points="10161.28,-2918.7 10162.35,-2908.16 10154.94,-2915.73 10161.28,-2918.7"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge122" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M10064.36,-2904.28C10027.6,-2915 10063.31,-2925.77 10171.5,-2925.77 10267.86,-2925.77 10306.73,-2917.23 10288.1,-2907.79"/>
<polygon fill="black" stroke="black" points="10289.23,-2904.48 10278.64,-2904.28 10286.8,-2911.04 10289.23,-2904.48"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node9" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node9"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7738.5,-3415.77 7431.5,-3415.77 7431.5,-3379.77 7738.5,-3379.77 7738.5,-3415.77"/>
<text text-anchor="middle" x="7585" y="-3391.61" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge6" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7738.72,-3390.43C7847.76,-3385.12 7997.92,-3377.71 8130,-3370.77 8256.6,-3364.13 8400.37,-3356.14 8505.25,-3350.23"/>
<polygon fill="black" stroke="black" points="8505.49,-3353.72 8515.28,-3349.67 8505.1,-3346.74 8505.49,-3353.72"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node10" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node10"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8731.5,-2311.77 8578.5,-2311.77 8578.5,-2275.77 8731.5,-2275.77 8731.5,-2311.77"/>
<text text-anchor="middle" x="8655" y="-2290.53" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge7" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7738.6,-3412.04C7880.24,-3421.54 8076.97,-3423.98 8130,-3370.77 8191.01,-3309.56 8122.09,-2668.21 8166,-2593.77 8258.43,-2437.09 8467.92,-2351.15 8579.99,-2314.85"/>
<polygon fill="black" stroke="black" points="8581.08,-2318.18 8589.54,-2311.81 8578.95,-2311.51 8581.08,-2318.18"/>
</g>
<!-- clean_data._clean_media -->
<g id="node11" class="node">
<title>clean_data._clean_media</title>
<g id="a_node11"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7775,-3361.77 7395,-3361.77 7395,-3321.77 7775,-3321.77 7775,-3361.77"/>
<text text-anchor="middle" x="7585" y="-3334.7" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge8" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7775.09,-3341.77C7983.45,-3341.77 8314.27,-3341.77 8505.05,-3341.77"/>
<polygon fill="black" stroke="black" points="8505.15,-3345.27 8515.15,-3341.77 8505.15,-3338.27 8505.15,-3345.27"/>
</g>
<!-- caption_io.has_caption -->
<g id="node12" class="node">
<title>caption_io.has_caption</title>
<g id="a_node12"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8732.5,-1167.77 8577.5,-1167.77 8577.5,-1131.77 8732.5,-1131.77 8732.5,-1167.77"/>
<text text-anchor="middle" x="8655" y="-1146.53" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge9" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7775.26,-3343.89C7913.12,-3340.93 8083.52,-3326.4 8130,-3274.77 8205.18,-3191.28 8094.46,-1339.4 8166,-1252.77 8262.37,-1136.07 8454.65,-1130.72 8566.93,-1139.06"/>
<polygon fill="black" stroke="black" points="8566.96,-1142.58 8577.21,-1139.88 8567.52,-1135.6 8566.96,-1142.58"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node81" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node81"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9620.5,-1429.77 9427.5,-1429.77 9427.5,-1393.77 9620.5,-1393.77 9620.5,-1429.77"/>
<text text-anchor="middle" x="9524" y="-1408.53" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge200" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8732.71,-1143.91C8854.6,-1136.32 9084.82,-1129.66 9144,-1181.77 9206.86,-1237.14 9118.97,-1309.4 9180,-1366.77 9242.4,-1425.43 9341.71,-1432.71 9417.44,-1427.64"/>
<polygon fill="black" stroke="black" points="9417.79,-1431.12 9427.5,-1426.89 9417.26,-1424.14 9417.79,-1431.12"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node84" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node84"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9617.5,-1357.77 9430.5,-1357.77 9430.5,-1321.77 9617.5,-1321.77 9617.5,-1357.77"/>
<text text-anchor="middle" x="9524" y="-1336.53" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge201" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8724.73,-1131.77C8828.11,-1109.15 9024.24,-1084.12 9144,-1181.77 9190.8,-1219.93 9133.45,-1274.31 9180,-1312.77 9248.75,-1369.58 9353.97,-1369.31 9429.74,-1359.22"/>
<polygon fill="black" stroke="black" points="9430.35,-1362.67 9439.76,-1357.8 9429.37,-1355.74 9430.35,-1362.67"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node13" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node13"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7787,-3893.77 7383,-3893.77 7383,-3847.77 7787,-3847.77 7787,-3893.77"/>
<text text-anchor="middle" x="7585" y="-3862.33" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge11" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7787.2,-3868.7C8009.18,-3866.42 8358.77,-3862.82 8538.63,-3860.96"/>
<polygon fill="black" stroke="black" points="8538.69,-3864.46 8548.65,-3860.86 8538.61,-3857.46 8538.69,-3864.46"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge12" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7787.15,-3886.12C7922.1,-3891.52 8083.38,-3886.81 8130,-3838.77 8178.19,-3789.12 8131.36,-2653.68 8166,-2593.77 8256.82,-2436.71 8466.02,-2351.15 8578.76,-2314.95"/>
<polygon fill="black" stroke="black" points="8579.89,-2318.26 8588.37,-2311.91 8577.78,-2311.59 8579.89,-2318.26"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node14" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node14"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8744.5,-3822.77 8565.5,-3822.77 8565.5,-3786.77 8744.5,-3786.77 8744.5,-3822.77"/>
<text text-anchor="middle" x="8655" y="-3800.73" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge10" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7787.3,-3864.04C7890.07,-3859.31 8016.95,-3851.48 8130,-3838.77 8146.12,-3836.96 8149.88,-3834.57 8166,-3832.77 8300.2,-3817.79 8456.1,-3810.61 8554.89,-3807.33"/>
<polygon fill="black" stroke="black" points="8555.27,-3810.82 8565.16,-3807 8555.05,-3803.82 8555.27,-3810.82"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node15" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node15"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7793,-3829.77 7377,-3829.77 7377,-3793.77 7793,-3793.77 7793,-3829.77"/>
<text text-anchor="middle" x="7585" y="-3805.61" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node16" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node16"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8868.5,-4309.77 8441.5,-4309.77 8441.5,-4273.77 8868.5,-4273.77 8868.5,-4309.77"/>
<text text-anchor="middle" x="8655" y="-4285.61" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node17" class="node">
<title>clean_data.main</title>
<g id="a_node17"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6577,-3829.77 6385,-3829.77 6385,-3793.77 6577,-3793.77 6577,-3829.77"/>
<text text-anchor="middle" x="6481" y="-3806.47" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge13" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6577.18,-3817.93C6695.77,-3819.91 6895.92,-3803.52 7004,-3683.77 7081.87,-3597.5 6954.27,-3503.24 7040,-3424.77 7093.99,-3375.37 7281.56,-3375.84 7421.45,-3383.93"/>
<polygon fill="black" stroke="black" points="7421.25,-3387.42 7431.44,-3384.52 7421.66,-3380.44 7421.25,-3387.42"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge14" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6577.12,-3818.32C6696.11,-3820.78 6897.19,-3804.96 7004,-3683.77 7096.59,-3578.72 6938,-3466.71 7040,-3370.77 7088.81,-3324.86 7250.27,-3320.89 7384.7,-3326.5"/>
<polygon fill="black" stroke="black" points="7384.6,-3330 7394.74,-3326.94 7384.91,-3323.01 7384.6,-3330"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge15" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6577.39,-3816.88C6753.42,-3826.31 7133.18,-3846.64 7372.64,-3859.46"/>
<polygon fill="black" stroke="black" points="7372.69,-3862.97 7382.87,-3860.01 7373.07,-3855.98 7372.69,-3862.97"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge16" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6577.39,-3811.77C6751.94,-3811.77 7126.8,-3811.77 7366.56,-3811.77"/>
<polygon fill="black" stroke="black" points="7366.81,-3815.27 7376.81,-3811.77 7366.81,-3808.27 7366.81,-3815.27"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge17" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6574.17,-3829.81C6695.11,-3858.77 6903.74,-3928.11 7004,-4075.77 7053.76,-4149.06 6974.59,-4413.03 7040,-4472.77 7084.71,-4513.61 8082.56,-4510.41 8130,-4472.77 8185.07,-4429.09 8112.16,-4363.96 8166,-4318.77 8282.8,-4220.75 8476.09,-4247.04 8580.92,-4271.42"/>
<polygon fill="black" stroke="black" points="8580.25,-4274.86 8590.79,-4273.77 8581.87,-4268.05 8580.25,-4274.86"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node18" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node18"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7700.5,-5750.77 7469.5,-5750.77 7469.5,-5714.77 7700.5,-5714.77 7700.5,-5750.77"/>
<text text-anchor="middle" x="7585" y="-5728.73" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node19" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node19"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6622.5,-5750.77 6339.5,-5750.77 6339.5,-5714.77 6622.5,-5714.77 6622.5,-5750.77"/>
<text text-anchor="middle" x="6481" y="-5727.18" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge18" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6622.69,-5732.77C6839.52,-5732.77 7251.93,-5732.77 7458.92,-5732.77"/>
<polygon fill="black" stroke="black" points="7459.23,-5736.27 7469.23,-5732.77 7459.23,-5729.27 7459.23,-5736.27"/>
</g>
<!-- log_utils.init_logger -->
<g id="node20" class="node">
<title>log_utils.init_logger</title>
<g id="a_node20"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6828.5,-5888.77 6133.5,-5888.77 6133.5,-5806.77 6828.5,-5806.77 6828.5,-5888.77"/>
<text text-anchor="middle" x="6481" y="-5830.79" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge19" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6828.79,-5811.58C7043.74,-5789.15 7307,-5761.68 7459.11,-5745.81"/>
<polygon fill="black" stroke="black" points="7459.84,-5749.25 7469.42,-5744.73 7459.11,-5742.29 7459.84,-5749.25"/>
</g>
<!-- log_utils.get_logger -->
<g id="node21" class="node">
<title>log_utils.get_logger</title>
<g id="a_node21"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7653.5,-5865.77 7516.5,-5865.77 7516.5,-5829.77 7653.5,-5829.77 7653.5,-5865.77"/>
<text text-anchor="middle" x="7585" y="-5844.53" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge20" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6828.79,-5841.45C7068.09,-5840.4 7367.25,-5841.28 7506.29,-5844.1"/>
<polygon fill="black" stroke="black" points="7506.35,-5847.6 7516.42,-5844.32 7506.5,-5840.61 7506.35,-5847.6"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge21" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7516.42,-5851.23C7384.1,-5854.18 7082.47,-5855.15 6838.88,-5854.14"/>
<polygon fill="black" stroke="black" points="6838.8,-5850.64 6828.79,-5854.09 6838.77,-5857.64 6838.8,-5850.64"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node22" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node22"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6667.5,-5624.77 6294.5,-5624.77 6294.5,-5588.77 6667.5,-5588.77 6667.5,-5624.77"/>
<text text-anchor="middle" x="6481" y="-5600.61" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge22" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6667.56,-5597.57C6794.77,-5594.81 6949.92,-5599.53 7004,-5634.77 7033.64,-5654.09 7010.32,-5686.52 7040,-5705.77 7106.65,-5749.02 7320.21,-5747.13 7459.08,-5740.72"/>
<polygon fill="black" stroke="black" points="7459.54,-5744.2 7469.36,-5740.23 7459.21,-5737.21 7459.54,-5744.2"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node24" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node24"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="7687,-2847.77 7483,-2847.77 7483,-2811.77 7687,-2811.77 7687,-2847.77"/>
<text text-anchor="middle" x="7585" y="-2823.9" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node25" class="node">
<title>lot_io.get_seller</title>
<g id="a_node25"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="9624.5,-4953.77 9423.5,-4953.77 9423.5,-4917.77 9624.5,-4917.77 9624.5,-4953.77"/>
<text text-anchor="middle" x="9524" y="-4930.18" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node26" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node26"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="9683,-4711.77 9365,-4711.77 9365,-4671.77 9683,-4671.77 9683,-4711.77"/>
<text text-anchor="middle" x="9524" y="-4684.7" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge126" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9558.8,-3217.66C9667.38,-3159.45 10007.29,-2977.26 10127.69,-2912.72"/>
<polygon fill="black" stroke="black" points="10129.49,-2915.73 10136.65,-2907.92 10126.18,-2909.56 10129.49,-2915.73"/>
</g>
<!-- lot_io.write_lots -->
<g id="node28" class="node">
<title>lot_io.write_lots</title>
<g id="a_node28"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="8756.5,-4719.77 8553.5,-4719.77 8553.5,-4683.77 8756.5,-4683.77 8756.5,-4719.77"/>
<text text-anchor="middle" x="8655" y="-4696.18" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge28" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8756.73,-4707.68C8881.54,-4712.9 9084.97,-4713.92 9144,-4669.77 9181.16,-4641.99 9144.56,-4601.72 9180,-4571.77 9245.95,-4516.04 9344.8,-4502.53 9419.47,-4501.5"/>
<polygon fill="black" stroke="black" points="9419.86,-4505 9429.84,-4501.44 9419.82,-4498 9419.86,-4505"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge25" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8756.83,-4698.89C8855.76,-4695.18 9010.75,-4687.03 9144,-4669.77 9160.16,-4667.68 9163.99,-4665.82 9180,-4662.77 9275.99,-4644.49 9387.21,-4623.83 9456.34,-4611.06"/>
<polygon fill="black" stroke="black" points="9457.03,-4614.49 9466.23,-4609.23 9455.76,-4607.61 9457.03,-4614.49"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge26" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8756.73,-4685.08C8865.87,-4673.1 9038.51,-4672.85 9144,-4766.77 9192.63,-4810.07 9130.23,-4866.8 9180,-4908.77 9248.83,-4966.81 9355.52,-4965.87 9431.62,-4955.27"/>
<polygon fill="black" stroke="black" points="9432.3,-4958.71 9441.68,-4953.79 9431.28,-4951.79 9432.3,-4958.71"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge27" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M8756.73,-4700.61C8903.25,-4698.92 9177.03,-4695.76 9354.55,-4693.72"/>
<polygon fill="black" stroke="black" points="9354.82,-4697.21 9364.78,-4693.6 9354.74,-4690.21 9354.82,-4697.21"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node29" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node29"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9649,-3768.77 9399,-3768.77 9399,-3732.77 9649,-3732.77 9649,-3768.77"/>
<text text-anchor="middle" x="9524" y="-3744.61" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node30" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node30"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8731.5,-3576.77 8578.5,-3576.77 8578.5,-3540.77 8731.5,-3540.77 8731.5,-3576.77"/>
<text text-anchor="middle" x="8655" y="-3555.07" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge29" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8731.62,-3564.34C8828.24,-3572.48 9000.17,-3590.42 9144,-3623.77 9262.39,-3651.23 9396.18,-3700.56 9468.88,-3728.98"/>
<polygon fill="black" stroke="black" points="9467.71,-3732.28 9478.3,-3732.68 9470.27,-3725.77 9467.71,-3732.28"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node31" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node31"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8761.5,-3028.77 8548.5,-3028.77 8548.5,-2992.77 8761.5,-2992.77 8761.5,-3028.77"/>
<text text-anchor="middle" x="8655" y="-3006.61" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node32" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node32"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8783.5,-2974.27 8526.5,-2974.27 8526.5,-2937.27 8783.5,-2937.27 8783.5,-2974.27"/>
<text text-anchor="middle" x="8655" y="-2949.33" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node33" class="node">
<title>lot_io.get_lot</title>
<g id="a_node33"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7657.5,-4463.77 7512.5,-4463.77 7512.5,-4427.77 7657.5,-4427.77 7657.5,-4463.77"/>
<text text-anchor="middle" x="7585" y="-4440.98" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge30" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7657.54,-4453.19C7789.78,-4465.17 8064.91,-4481.48 8130,-4417.77 8208.5,-4340.94 8090.67,-4004.73 8166,-3924.77 8264.14,-3820.61 8442.68,-3824.9 8554.45,-3840.33"/>
<polygon fill="black" stroke="black" points="8553.99,-3843.8 8564.38,-3841.76 8554.98,-3836.87 8553.99,-3843.8"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge31" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7657.68,-4452.29C7788.8,-4462.6 8060.26,-4475.99 8130,-4417.77 8183.63,-4373.01 8117.94,-4315.47 8166,-4264.77 8477.56,-3936.11 8729.21,-4160.56 9144,-3978.77 9279.35,-3919.46 9425.38,-3820.47 9489.55,-3774.98"/>
<polygon fill="black" stroke="black" points="9491.94,-3777.58 9498.05,-3768.93 9487.87,-3771.88 9491.94,-3777.58"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node34" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node34"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8804.5,-3082.77 8505.5,-3082.77 8505.5,-3046.77 8804.5,-3046.77 8804.5,-3082.77"/>
<text text-anchor="middle" x="8655" y="-3059.98" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node35" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node35"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7797.5,-2901.77 7372.5,-2901.77 7372.5,-2865.77 7797.5,-2865.77 7797.5,-2901.77"/>
<text text-anchor="middle" x="7585" y="-2877.9" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge32" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7797.57,-2869.68C7927.91,-2865.58 8079.45,-2870.56 8130,-2910.77 8175.91,-2947.3 8120.19,-3001.12 8166,-3037.77 8215.33,-3077.26 8372.44,-3079.94 8495.22,-3075.27"/>
<polygon fill="black" stroke="black" points="8495.64,-3078.76 8505.49,-3074.86 8495.36,-3071.77 8495.64,-3078.76"/>
</g>
<!-- post_io.read_post -->
<g id="node36" class="node">
<title>post_io.read_post</title>
<g id="a_node36"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8934,-1995.77 8376,-1995.77 8376,-1919.77 8934,-1919.77 8934,-1995.77"/>
<text text-anchor="middle" x="8655" y="-1942.61" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge33" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7797.7,-2901.14C7929.99,-2906.89 8083.73,-2902.52 8130,-2856.77 8176.7,-2810.6 8132.59,-2323.32 8166,-2266.77 8246.25,-2130.94 8412.17,-2045.36 8528.16,-1999.57"/>
<polygon fill="black" stroke="black" points="8529.77,-2002.69 8537.82,-1995.8 8527.23,-1996.17 8529.77,-2002.69"/>
</g>
<!-- caption_io.read_caption -->
<g id="node37" class="node">
<title>caption_io.read_caption</title>
<g id="a_node37"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8820.5,-2773.27 8489.5,-2773.27 8489.5,-2736.27 8820.5,-2736.27 8820.5,-2773.27"/>
<text text-anchor="middle" x="8655" y="-2748.33" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge34" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7797.68,-2893.48C7925.98,-2895.53 8075.17,-2889.91 8130,-2856.77 8156.94,-2840.49 8139.34,-2812.52 8166,-2795.77 8274.46,-2727.66 8424.25,-2725.51 8529.18,-2735.28"/>
<polygon fill="black" stroke="black" points="8528.9,-2738.77 8539.19,-2736.26 8529.58,-2731.8 8528.9,-2738.77"/>
</g>
<!-- notes_utils.read_md -->
<g id="node43" class="node">
<title>notes_utils.read_md</title>
<g id="a_node43"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9594,-2288.77 9454,-2288.77 9454,-2252.77 9594,-2252.77 9594,-2288.77"/>
<text text-anchor="middle" x="9524" y="-2267.53" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge36" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8761.44,-1995.84C8945.18,-2062.17 9318.27,-2196.86 9463.38,-2249.25"/>
<polygon fill="black" stroke="black" points="9462.42,-2252.63 9473.02,-2252.73 9464.8,-2246.04 9462.42,-2252.63"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node44" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node44"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9693,-1882.27 9355,-1882.27 9355,-1845.27 9693,-1845.27 9693,-1882.27"/>
<text text-anchor="middle" x="9524" y="-1857.33" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge37" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8934.2,-1927.61C9068.82,-1913.02 9226.46,-1895.93 9344.73,-1883.1"/>
<polygon fill="black" stroke="black" points="9345.41,-1886.55 9354.97,-1881.99 9344.65,-1879.59 9345.41,-1886.55"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge203" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8786.48,-2736.27C8890.46,-2728.12 9036.01,-2732.02 9144,-2795.77 9168.84,-2810.44 9162.38,-2826.94 9180,-2849.77 9290.34,-2992.75 9439.43,-3149.74 9497.95,-3210.14"/>
<polygon fill="black" stroke="black" points="9495.79,-3212.95 9505.27,-3217.69 9500.82,-3208.07 9495.79,-3212.95"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge202" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8820.64,-2741.99C8919.28,-2728.82 9044.44,-2702.07 9144,-2647.77 9187.51,-2624.04 9422.29,-2377.43 9498.84,-2296.41"/>
<polygon fill="black" stroke="black" points="9501.43,-2298.77 9505.75,-2289.1 9496.34,-2293.97 9501.43,-2298.77"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge205" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8820.67,-2766.28C8929.99,-2764.07 9067.07,-2740.46 9144,-2647.77 9227.28,-2547.44 9095.01,-1573.67 9180,-1474.77 9237.03,-1408.42 9338.97,-1396.9 9416.95,-1399.46"/>
<polygon fill="black" stroke="black" points="9417.16,-1402.97 9427.3,-1399.88 9417.45,-1395.97 9417.16,-1402.97"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge206" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8820.73,-2766.33C8930.08,-2764.15 9067.17,-2740.54 9144,-2647.77 9233.55,-2539.65 9085.92,-1488.97 9180,-1384.77 9238.74,-1319.72 9341.99,-1314.21 9419.9,-1321.5"/>
<polygon fill="black" stroke="black" points="9419.93,-1325.02 9430.24,-1322.56 9420.64,-1318.06 9419.93,-1325.02"/>
</g>
<!-- caption_io._get_langs -->
<g id="node134" class="node">
<title>caption_io._get_langs</title>
<g id="a_node134"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9633,-2840.77 9415,-2840.77 9415,-2804.77 9633,-2804.77 9633,-2840.77"/>
<text text-anchor="middle" x="9524" y="-2817.99" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge204" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8820.61,-2767.68C8991.16,-2781.06 9253.48,-2801.64 9404.63,-2813.49"/>
<polygon fill="black" stroke="black" points="9404.62,-2817 9414.87,-2814.29 9405.17,-2810.02 9404.62,-2817"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node38" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node38"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-5077.77 0,-5077.77 0,-5041.77 282,-5041.77 282,-5077.77"/>
<text text-anchor="middle" x="141" y="-5055.73" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- embed:cli -->
<g id="node39" class="node">
<title>embed:cli</title>
<g id="a_node39"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5059.77" rx="29.05" ry="18"/>
<text text-anchor="middle" x="602" y="-5058.17" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;embed:cli -->
<!-- clean_data:cli -->
<g id="node184" class="node">
<title>clean_data:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5059.77" rx="37.29" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5058.17" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;clean_data:cli -->
<!-- token_utils.estimate_tokens -->
<g id="node40" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node40"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="8773,-3136.77 8537,-3136.77 8537,-3100.77 8773,-3100.77 8773,-3136.77"/>
<text text-anchor="middle" x="8655" y="-3114.73" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- post_io.get_contact -->
<g id="node41" class="node">
<title>post_io.get_contact</title>
<g id="a_node41"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7684.5,-1993.77 7485.5,-1993.77 7485.5,-1957.77 7684.5,-1957.77 7684.5,-1993.77"/>
<text text-anchor="middle" x="7585" y="-1970.99" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node42" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node42"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7756.5,-2051.77 7413.5,-2051.77 7413.5,-2011.77 7756.5,-2011.77 7756.5,-2051.77"/>
<text text-anchor="middle" x="7585" y="-2024.7" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge123" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9553.32,-2289.08C9614.2,-2329.07 9760.72,-2428.89 9868,-2530.77 9987.13,-2643.92 10106.22,-2801.48 10151.46,-2863.35"/>
<polygon fill="black" stroke="black" points="10148.87,-2865.74 10157.59,-2871.76 10154.53,-2861.62 10148.87,-2865.74"/>
</g>
<!-- post_io.write_post -->
<g id="node45" class="node">
<title>post_io.write_post</title>
<g id="a_node45"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6647,-2041.77 6315,-2041.77 6315,-1995.77 6647,-1995.77 6647,-2041.77"/>
<text text-anchor="middle" x="6481" y="-2010.33" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge38" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6647.28,-2012.33C6875.64,-2003.41 7281.37,-1987.58 7475.13,-1980.02"/>
<polygon fill="black" stroke="black" points="7475.47,-1983.51 7485.33,-1979.62 7475.2,-1976.52 7475.47,-1983.51"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge39" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6647.28,-2020.72C6850.28,-2023.12 7193.43,-2027.17 7403.25,-2029.64"/>
<polygon fill="black" stroke="black" points="7403.41,-2033.14 7413.45,-2029.76 7403.5,-2026.14 7403.41,-2033.14"/>
</g>
<!-- notes_utils.write_md -->
<g id="node46" class="node">
<title>notes_utils.write_md</title>
<g id="a_node46"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7698,-1939.77 7472,-1939.77 7472,-1903.77 7698,-1903.77 7698,-1939.77"/>
<text text-anchor="middle" x="7585" y="-1916.98" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge40" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6639.8,-1995.76C6751.37,-1980.28 6904.56,-1960.61 7040,-1948.77 7184.56,-1936.14 7351.29,-1928.95 7461.66,-1925.22"/>
<polygon fill="black" stroke="black" points="7461.95,-1928.71 7471.83,-1924.88 7461.72,-1921.71 7461.95,-1928.71"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node47" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node47"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7730,-2433.77 7440,-2433.77 7440,-2397.77 7730,-2397.77 7730,-2433.77"/>
<text text-anchor="middle" x="7585" y="-2411.61" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge41" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7730.12,-2411.67C7839.99,-2407.48 7994.89,-2399.3 8130,-2383.77 8285.53,-2365.9 8464.97,-2332.21 8568.38,-2311.5"/>
<polygon fill="black" stroke="black" points="8569.34,-2314.88 8578.45,-2309.48 8567.96,-2308.02 8569.34,-2314.88"/>
</g>
<!-- cluster_items._iter_items -->
<g id="node48" class="node">
<title>cluster_items._iter_items</title>
<g id="a_node48"><a xlink:title="Yield ``(id, item:type, embedding)`` for ``sell_item`` lots.&#10;&#10;Embeddings are loaded on demand so memory usage stays minimal.">
<polygon fill="none" stroke="black" points="7843,-3485.77 7327,-3485.77 7327,-3433.77 7843,-3433.77 7843,-3485.77"/>
<text text-anchor="middle" x="7585" y="-3450.08" font-family="Times,serif" font-size="39.62">cluster_items._iter_items</text>
</a>
</g>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.read_lots -->
<g id="edge42" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7843.02,-3471.38C7946.21,-3489.41 8057.62,-3528.18 8130,-3608.77 8197.08,-3683.47 8091.46,-3764.52 8166,-3831.77 8218.83,-3879.44 8411.88,-3876.67 8538.75,-3869.09"/>
<polygon fill="black" stroke="black" points="8539.14,-3872.57 8548.91,-3868.46 8538.71,-3865.59 8539.14,-3872.57"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.make_lot_id -->
<g id="edge43" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7843.19,-3470.11C7946.9,-3487.88 8058.65,-3526.78 8130,-3608.77 8211.79,-3702.76 8078.06,-3798.52 8166,-3886.77 8266.04,-3987.17 8441.23,-3984.78 8552.24,-3970.63"/>
<polygon fill="black" stroke="black" points="8552.99,-3974.06 8562.45,-3969.28 8552.07,-3967.13 8552.99,-3974.06"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;notes_utils.load_json -->
<g id="edge46" class="edge">
<title>cluster_items._iter_items&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7843.03,-3452.78C7934.06,-3447.79 8036.96,-3439.28 8130,-3424.77 8146.3,-3422.23 8149.68,-3418.18 8166,-3415.77 8596.51,-3352.25 8716.89,-3452.14 9144,-3368.77 9266.56,-3344.85 9403.11,-3289.32 9474.1,-3258.1"/>
<polygon fill="black" stroke="black" points="9475.95,-3261.11 9483.68,-3253.87 9473.12,-3254.71 9475.95,-3261.11"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.embedding_path -->
<g id="edge44" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M7843.08,-3474.12C7963.11,-3474.84 8088.6,-3465.01 8130,-3424.77 8191.94,-3364.58 8103.79,-3097.69 8166,-3037.77 8217.25,-2988.41 8410.78,-2992.14 8538.19,-3000.58"/>
<polygon fill="black" stroke="black" points="8538.17,-3004.09 8548.39,-3001.28 8538.65,-2997.1 8538.17,-3004.09"/>
</g>
<!-- cluster_items._iter_items&#45;&gt;lot_io.iter_lot_files -->
<g id="edge45" class="edge">
<title>cluster_items._iter_items&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7843.27,-3474.31C7963.35,-3475.09 8088.83,-3465.24 8130,-3424.77 8200.12,-3355.85 8095.64,-3052.46 8166,-2983.77 8214.08,-2936.85 8389.36,-2937.26 8516.11,-2944.4"/>
<polygon fill="black" stroke="black" points="8516.11,-2947.91 8526.3,-2944.99 8516.52,-2940.92 8516.11,-2947.91"/>
</g>
<!-- cluster_items._collect_category_vectors -->
<g id="node49" class="node">
<title>cluster_items._collect_category_vectors</title>
<g id="a_node49"><a xlink:title="Return mean embedding for every ``item:type``.&#10;&#10;Embeddings are streamed from disk so memory use stays manageable.">
<polygon fill="none" stroke="black" points="6744.5,-3431.77 6217.5,-3431.77 6217.5,-3395.77 6744.5,-3395.77 6744.5,-3431.77"/>
<text text-anchor="middle" x="6481" y="-3407.61" font-family="Times,serif" font-size="25.20">cluster_items._collect_category_vectors</text>
</a>
</g>
</g>
<!-- cluster_items._collect_category_vectors&#45;&gt;cluster_items._iter_items -->
<g id="edge47" class="edge">
<title>cluster_items._collect_category_vectors&#45;&gt;cluster_items._iter_items</title>
<path fill="none" stroke="black" d="M6744.56,-3424.73C6917.39,-3431.95 7142.94,-3441.36 7316.72,-3448.62"/>
<polygon fill="black" stroke="black" points="7316.65,-3452.12 7326.78,-3449.04 7316.94,-3445.12 7316.65,-3452.12"/>
</g>
<!-- cluster_items.collect_clusters -->
<g id="node50" class="node">
<title>cluster_items.collect_clusters</title>
<g id="a_node50"><a xlink:title="Return mapping of cluster name to ``item:type`` values.&#10;&#10;Category embeddings are averaged first so clustering deals with a&#10;manageable number of vectors. The number of clusters follows the&#10;square root heuristic.">
<polygon fill="none" stroke="black" points="5922,-3632.27 5179,-3632.27 5179,-3571.27 5922,-3571.27 5922,-3632.27"/>
<text text-anchor="middle" x="5550.5" y="-3589.52" font-family="Times,serif" font-size="48.44">cluster_items.collect_clusters</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;cluster_items._iter_items -->
<g id="edge48" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;cluster_items._iter_items</title>
<path fill="none" stroke="black" d="M5922.22,-3575.87C6325.3,-3547.71 6959.57,-3503.4 7316.64,-3478.45"/>
<polygon fill="black" stroke="black" points="7317.13,-3481.93 7326.86,-3477.74 7316.64,-3474.94 7317.13,-3481.93"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;cluster_items._collect_category_vectors -->
<g id="edge49" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;cluster_items._collect_category_vectors</title>
<path fill="none" stroke="black" d="M5613.38,-3571.16C5691.53,-3534.12 5831.13,-3473.32 5958,-3445.77 6037.88,-3428.43 6126.13,-3419.33 6206.98,-3414.81"/>
<polygon fill="black" stroke="black" points="6207.52,-3418.29 6217.32,-3414.26 6207.14,-3411.3 6207.52,-3418.29"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node51" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node51"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7714,-4061.77 7456,-4061.77 7456,-4025.77 7714,-4025.77 7714,-4061.77"/>
<text text-anchor="middle" x="7585" y="-4038.08" font-family="Times,serif" font-size="22.12">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim -->
<g id="edge50" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M5645.09,-3632.36C5725.2,-3661.95 5840.21,-3712.92 5922,-3784.77 5943.67,-3803.81 5933.73,-3823.19 5958,-3838.77 6203.55,-3996.4 7099.35,-4033.04 7445.85,-4041.38"/>
<polygon fill="black" stroke="black" points="7445.86,-4044.88 7455.94,-4041.62 7446.03,-4037.88 7445.86,-4044.88"/>
</g>
<!-- cluster_items.main -->
<g id="node52" class="node">
<title>cluster_items.main</title>
<g id="a_node52"><a xlink:title="Cluster items and save the result.">
<polygon fill="none" stroke="black" points="5008,-3718.77 4789,-3718.77 4789,-3682.77 5008,-3682.77 5008,-3718.77"/>
<text text-anchor="middle" x="4898.5" y="-3695.47" font-family="Times,serif" font-size="21.00">cluster_items.main</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;notes_utils.write_json -->
<g id="edge53" class="edge">
<title>cluster_items.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M4900.58,-3718.9C4907.02,-3809.6 4948.38,-4217.46 5179,-4408.77 5450.36,-4633.89 5610.77,-4497.6 5958,-4558.77 6434.85,-4642.78 7729.05,-5003.23 8130,-4731.77 8165.67,-4707.62 8130.9,-4666.76 8166,-4641.77 8254.62,-4578.69 9040.65,-4629.74 9144,-4595.77 9162.27,-4589.77 9162.19,-4579.02 9180,-4571.77 9257.02,-4540.45 9350.04,-4524.32 9419.77,-4516.09"/>
<polygon fill="black" stroke="black" points="9420.35,-4519.55 9429.89,-4514.94 9419.55,-4512.6 9420.35,-4519.55"/>
</g>
<!-- cluster_items.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge51" class="edge">
<title>cluster_items.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M4903.76,-3718.99C4929.9,-3831.51 5069.99,-4443.58 5143,-4949.77 5149.09,-4991.97 5148.22,-5302.28 5179,-5331.77 5238.69,-5388.96 5860.18,-5314.89 5922,-5369.77 5992.81,-5432.64 5887.21,-5516.88 5958,-5579.77 6005.39,-5621.88 6156.54,-5626.07 6284.07,-5621.18"/>
<polygon fill="black" stroke="black" points="6284.53,-5624.67 6294.38,-5620.77 6284.24,-5617.67 6284.53,-5624.67"/>
</g>
<!-- cluster_items.main&#45;&gt;cluster_items.collect_clusters -->
<g id="edge52" class="edge">
<title>cluster_items.main&#45;&gt;cluster_items.collect_clusters</title>
<path fill="none" stroke="black" d="M5008.3,-3684.2C5098.28,-3670.5 5228.73,-3650.63 5339.02,-3633.83"/>
<polygon fill="black" stroke="black" points="5339.59,-3637.29 5348.94,-3632.32 5338.53,-3630.37 5339.59,-3637.29"/>
</g>
<!-- oom_utils.prefer_oom_kill -->
<g id="node53" class="node">
<title>oom_utils.prefer_oom_kill</title>
<g id="a_node53"><a xlink:title="Make this process the first OOM victim.">
<polygon fill="none" stroke="black" points="8820,-500.77 8490,-500.77 8490,-464.77 8820,-464.77 8820,-500.77"/>
<text text-anchor="middle" x="8655" y="-476.9" font-family="Times,serif" font-size="24.22">oom_utils.prefer_oom_kill</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge54" class="edge">
<title>cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M4918.4,-3682.68C4967.11,-3634.58 5096.35,-3497.34 5143,-3352.77 5165.4,-3283.35 5136.87,-786.33 5179,-726.77 5559.57,-188.88 7471.69,-409.56 8130,-437.77 8246.87,-442.78 8377.99,-454.05 8479.83,-464.05"/>
<polygon fill="black" stroke="black" points="8479.61,-467.55 8489.91,-465.05 8480.3,-460.58 8479.61,-467.55"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node54" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node54"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4991.5,-3343.77 4805.5,-3343.77 4805.5,-3307.77 4991.5,-3307.77 4991.5,-3343.77"/>
<text text-anchor="middle" x="4898.5" y="-3322.07" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node55" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node55"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1393.5,-3389.77 1163.5,-3389.77 1163.5,-3353.77 1393.5,-3353.77 1393.5,-3389.77"/>
<text text-anchor="middle" x="1278.5" y="-3366.47" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node56" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node56"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5082,-2109.27 4715,-2109.27 4715,-2072.27 5082,-2072.27 5082,-2109.27"/>
<text text-anchor="middle" x="4898.5" y="-2084.33" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node57" class="node">
<title>tg_client._write_md</title>
<g id="a_node57"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5619,-2031.77 5482,-2031.77 5482,-1995.77 5619,-1995.77 5619,-2031.77"/>
<text text-anchor="middle" x="5550.5" y="-2010.53" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge55" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5619.02,-2014.14C5761.6,-2014.91 6097.27,-2016.71 6304.85,-2017.83"/>
<polygon fill="black" stroke="black" points="6304.93,-2021.33 6314.94,-2017.89 6304.96,-2014.33 6304.93,-2021.33"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node58" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node58"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7824.5,-2227.27 7345.5,-2227.27 7345.5,-2184.27 7824.5,-2184.27 7824.5,-2227.27"/>
<text text-anchor="middle" x="7585" y="-2197.63" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge56" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7824.79,-2219.88C7919.82,-2225.93 8030.13,-2233.52 8130,-2241.77 8284.52,-2254.55 8464.29,-2273.22 8568.03,-2284.37"/>
<polygon fill="black" stroke="black" points="8567.82,-2287.87 8578.14,-2285.46 8568.57,-2280.91 8567.82,-2287.87"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node59" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node59"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6614,-2221.77 6348,-2221.77 6348,-2185.77 6614,-2185.77 6614,-2221.77"/>
<text text-anchor="middle" x="6481" y="-2198.99" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge57" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6614.11,-2204.01C6791.85,-2204.34 7111.47,-2204.92 7335.06,-2205.32"/>
<polygon fill="black" stroke="black" points="7335.29,-2208.82 7345.3,-2205.34 7335.3,-2201.82 7335.29,-2208.82"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node60" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node60"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3283,-2319.77 3044,-2319.77 3044,-2283.77 3283,-2283.77 3283,-2319.77"/>
<text text-anchor="middle" x="3163.5" y="-2297.73" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge58" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3283.3,-2301.6C4018.28,-2300.53 7935.23,-2294.82 8567.73,-2293.9"/>
<polygon fill="black" stroke="black" points="8568.13,-2297.4 8578.13,-2293.88 8568.12,-2290.4 8568.13,-2297.4"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node61" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node61"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5143,-3289.27 4654,-3289.27 4654,-3246.27 5143,-3246.27 5143,-3289.27"/>
<text text-anchor="middle" x="4898.5" y="-3259.63" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node62" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node62"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5762.5,-2095.27 5338.5,-2095.27 5338.5,-2050.27 5762.5,-2050.27 5762.5,-2095.27"/>
<text text-anchor="middle" x="5550.5" y="-2064.39" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node63" class="node">
<title>tg_client._extract_author</title>
<g id="a_node63"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6844,-1755.77 6118,-1755.77 6118,-1685.77 6844,-1685.77 6844,-1755.77"/>
<text text-anchor="middle" x="6481" y="-1706.97" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge59" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6844.36,-1722.09C7017.75,-1722.72 7219.49,-1723.45 7368.44,-1723.99"/>
<polygon fill="black" stroke="black" points="7368.61,-1727.49 7378.62,-1724.03 7368.63,-1720.49 7368.61,-1727.49"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node64" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node64"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5689.5,-2415.77 5411.5,-2415.77 5411.5,-2379.77 5689.5,-2379.77 5689.5,-2415.77"/>
<text text-anchor="middle" x="5550.5" y="-2392.99" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node65" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node65"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8803,-377.77 8507,-377.77 8507,-341.77 8803,-341.77 8803,-377.77"/>
<text text-anchor="middle" x="8655" y="-354.08" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node66" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node66"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5141,-664.27 4656,-664.27 4656,-615.27 5141,-615.27 5141,-664.27"/>
<text text-anchor="middle" x="4898.5" y="-630.15" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge61" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4935.92,-664.47C4987.43,-697.88 5085.73,-756.13 5179,-780.77 5979.65,-992.31 6212.61,-837.9 7040,-872.77 7100.54,-875.33 8083.48,-871.95 8130,-910.77 8187.63,-958.86 8111.25,-1024.43 8166,-1075.77 8274.05,-1177.09 8458.67,-1175.32 8567.2,-1163.49"/>
<polygon fill="black" stroke="black" points="8567.6,-1166.97 8577.14,-1162.35 8566.8,-1160.01 8567.6,-1166.97"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node67" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node67"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5683.5,-359.77 5417.5,-359.77 5417.5,-323.77 5683.5,-323.77 5683.5,-359.77"/>
<text text-anchor="middle" x="5550.5" y="-337.61" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge60" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4916.24,-615.06C4954.97,-560.21 5056.86,-428.82 5179,-373.77 5249.69,-341.92 5335.59,-332.91 5406.88,-332.32"/>
<polygon fill="black" stroke="black" points="5407.29,-335.82 5417.28,-332.29 5407.28,-328.82 5407.29,-335.82"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node68" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node68"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8822,-756.77 8488,-756.77 8488,-720.77 8822,-720.77 8822,-756.77"/>
<text text-anchor="middle" x="8655" y="-733.99" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge62" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5141.23,-617.43C5355.6,-598.75 5677.33,-573.49 5958,-562.77 6440.32,-544.36 7735.11,-281.23 8130,-558.77 8168.65,-585.94 8129.69,-628.57 8166,-658.77 8251.75,-730.11 8376.16,-749.64 8477.9,-751.58"/>
<polygon fill="black" stroke="black" points="8477.93,-755.08 8487.98,-751.72 8478.03,-748.08 8477.93,-755.08"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node69" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node69"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6606.5,-359.77 6355.5,-359.77 6355.5,-323.77 6606.5,-323.77 6606.5,-359.77"/>
<text text-anchor="middle" x="6481" y="-336.98" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge63" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5683.55,-341.77C5859.25,-341.77 6168.27,-341.77 6345.3,-341.77"/>
<polygon fill="black" stroke="black" points="6345.46,-345.27 6355.46,-341.77 6345.46,-338.27 6345.46,-345.27"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node162" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node162"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9819,-738.27 9229,-738.27 9229,-693.27 9819,-693.27 9819,-738.27"/>
<text text-anchor="middle" x="9524" y="-707.39" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge258" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8822.14,-734.37C8934.16,-731.4 9085.25,-727.39 9218.46,-723.85"/>
<polygon fill="black" stroke="black" points="9218.93,-727.34 9228.83,-723.58 9218.75,-720.34 9218.93,-727.34"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node70" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node70"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7766.5,-359.77 7403.5,-359.77 7403.5,-323.77 7766.5,-323.77 7766.5,-359.77"/>
<text text-anchor="middle" x="7585" y="-336.08" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge66" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6606.54,-341.77C6798.32,-341.77 7167.35,-341.77 7393.04,-341.77"/>
<polygon fill="black" stroke="black" points="7393.35,-345.27 7403.35,-341.77 7393.35,-338.27 7393.35,-345.27"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge65" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7729.58,-359.82C7854.8,-383.44 8031.41,-437.28 8130,-558.77 8188.84,-631.28 8118.14,-685.59 8166,-765.77 8275.04,-948.45 8505.95,-1077.67 8606.05,-1127.3"/>
<polygon fill="black" stroke="black" points="8604.52,-1130.45 8615.03,-1131.72 8607.6,-1124.17 8604.52,-1130.45"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge64" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7766.57,-344.82C7971.34,-348.27 8301.95,-353.84 8496.6,-357.12"/>
<polygon fill="black" stroke="black" points="8496.57,-360.62 8506.63,-357.29 8496.69,-353.62 8496.57,-360.62"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node71" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node71"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2156,-697.77 1671,-697.77 1671,-653.77 2156,-653.77 2156,-697.77"/>
<text text-anchor="middle" x="1913.5" y="-667.45" font-family="Times,serif" font-size="32.90">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge67" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M1949.68,-653.66C2093.8,-565.21 2655.54,-241.77 3162.5,-241.77 3162.5,-241.77 3162.5,-241.77 5551.5,-241.77 5562.95,-241.77 6889.69,-307.4 7393.18,-332.33"/>
<polygon fill="black" stroke="black" points="7393.3,-335.84 7403.46,-332.83 7393.65,-328.84 7393.3,-335.84"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node72" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node72"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7757,-961.27 7413,-961.27 7413,-920.27 7757,-920.27 7757,-961.27"/>
<text text-anchor="middle" x="7585" y="-933.53" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge69" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7757.28,-922.58C8233.6,-875.95 9559.16,-774.33 9868,-1050.77 10152.06,-1305.04 10169.48,-2649.48 10170.45,-2861.59"/>
<polygon fill="black" stroke="black" points="10166.95,-2861.63 10170.49,-2871.61 10173.95,-2861.6 10166.95,-2861.63"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge68" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7757.07,-936.32C7881.18,-943.21 8042.1,-975.09 8130,-1084.77 8193.97,-1164.6 8113.61,-1916.91 8166,-2004.77 8256.76,-2157.01 8461.16,-2238.04 8574.51,-2272.74"/>
<polygon fill="black" stroke="black" points="8573.6,-2276.12 8584.19,-2275.65 8575.62,-2269.42 8573.6,-2276.12"/>
</g>
<!-- tg_client._load_progress -->
<g id="node73" class="node">
<title>tg_client._load_progress</title>
<g id="a_node73"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2078.5,-1296.77 1748.5,-1296.77 1748.5,-1260.77 2078.5,-1260.77 2078.5,-1296.77"/>
<text text-anchor="middle" x="1913.5" y="-1272.61" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge70" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1923.17,-1260.38C1992.79,-1115.67 2475.91,-165.77 3162.5,-165.77 3162.5,-165.77 3162.5,-165.77 6482,-165.77 7234.77,-165.77 9335.45,266.25 9868,-265.77 9907.72,-305.45 9898.5,-713.9 9904,-769.77 9988.58,-1628.51 10139.49,-2677.05 10166.35,-2861.44"/>
<polygon fill="black" stroke="black" points="10162.9,-2862.03 10167.81,-2871.42 10169.83,-2861.02 10162.9,-2862.03"/>
</g>
<!-- tg_client._save_progress -->
<g id="node74" class="node">
<title>tg_client._save_progress</title>
<g id="a_node74"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2673,-1769.77 2444,-1769.77 2444,-1733.77 2673,-1733.77 2673,-1769.77"/>
<text text-anchor="middle" x="2558.5" y="-1747.61" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node75" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node75"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3297,-1792.77 3030,-1792.77 3030,-1756.77 3297,-1756.77 3297,-1792.77"/>
<text text-anchor="middle" x="3163.5" y="-1768.9" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge71" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3297.17,-1778.8C3698.29,-1790.88 4933.68,-1827.52 5958,-1851.77 6018.33,-1853.2 8081.49,-1858.87 8130,-1894.77 8171.35,-1925.38 8133.81,-1964.65 8166,-2004.77 8280.14,-2147.02 8484.57,-2234.71 8588.89,-2272.33"/>
<polygon fill="black" stroke="black" points="8587.76,-2275.65 8598.36,-2275.71 8590.11,-2269.06 8587.76,-2275.65"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node76" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node76"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2044,-1899.77 1783,-1899.77 1783,-1863.77 2044,-1863.77 2044,-1899.77"/>
<text text-anchor="middle" x="1913.5" y="-1875.9" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge72" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2028.91,-1899.84C2277.86,-1938.37 2887.64,-2028.53 3402,-2070.77 3956.97,-2116.36 4097.37,-2102.76 4654,-2117.77 6198.54,-2159.42 6595.99,-1990.03 8130,-2174.77 8294.93,-2194.64 8483.95,-2244.44 8583.74,-2272.93"/>
<polygon fill="black" stroke="black" points="8582.83,-2276.31 8593.41,-2275.7 8584.76,-2269.58 8582.83,-2276.31"/>
</g>
<!-- tg_client._save_message -->
<g id="node77" class="node">
<title>tg_client._save_message</title>
<g id="a_node77"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4618,-2044.27 3402,-2044.27 3402,-1929.27 4618,-1929.27 4618,-2044.27"/>
<text text-anchor="middle" x="4010" y="-1962.66" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge75" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4123.14,-2044.46C4326.85,-2145.65 4774.13,-2351.36 5179,-2424.77 5503.92,-2483.69 5591.83,-2430.68 5922,-2424.77 6044.73,-2422.58 8007.53,-2354.03 8130,-2345.77 8284.7,-2335.34 8464.41,-2315.91 8568.09,-2303.98"/>
<polygon fill="black" stroke="black" points="8568.66,-2307.44 8578.2,-2302.81 8567.86,-2300.48 8568.66,-2307.44"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge74" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4521.15,-1929.2C4554.96,-1916.66 4587.6,-1901.67 4618,-1883.77 4640.07,-1870.78 4631.22,-1850.48 4654,-1838.77 4716.74,-1806.52 5864.97,-1812.3 5922,-1770.77 5958.17,-1744.44 5921.14,-1702.13 5958,-1676.77 6017.28,-1636 8119.51,-1687.8 8130,-1696.77 8200.93,-1757.51 8097.96,-1839.82 8166,-1903.77 8219.54,-1954.09 8292.35,-1976.65 8365.38,-1984.43"/>
<polygon fill="black" stroke="black" points="8365.39,-1987.95 8375.69,-1985.43 8366.07,-1980.98 8365.39,-1987.95"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge73" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4618.12,-1984.91C5493.51,-1982.21 7051.79,-1977.41 7475.24,-1976.11"/>
<polygon fill="black" stroke="black" points="7475.35,-1979.61 7485.34,-1976.08 7475.33,-1972.61 7475.35,-1979.61"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge76" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4019.57,-2044.51C4054.03,-2254.15 4203.02,-2979.45 4654,-3297.77 4694.4,-3326.29 4748.31,-3334.69 4795.13,-3335.35"/>
<polygon fill="black" stroke="black" points="4795.3,-3338.86 4805.31,-3335.38 4795.32,-3331.86 4795.3,-3338.86"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge77" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4501.25,-2044.29C4583.28,-2053.91 4663.14,-2063.28 4729.42,-2071.06"/>
<polygon fill="black" stroke="black" points="4729.18,-2074.55 4739.51,-2072.24 4729.99,-2067.6 4729.18,-2074.55"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge78" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4618.23,-1997.43C4945.88,-2003.18 5314.62,-2009.65 5471.82,-2012.41"/>
<polygon fill="black" stroke="black" points="5471.8,-2015.91 5481.86,-2012.59 5471.93,-2008.91 5471.8,-2015.91"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge79" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4248.87,-2044.34C4369.51,-2071.21 4518.76,-2100.92 4654,-2117.77 5277.75,-2195.53 6029.35,-2204.45 6337.6,-2204.5"/>
<polygon fill="black" stroke="black" points="6337.93,-2208 6347.93,-2204.5 6337.93,-2201 6337.93,-2208"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge80" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4021.16,-2044.51C4060.21,-2247.62 4220.79,-2933.25 4654,-3236.77 4656.14,-3238.27 4658.31,-3239.72 4660.52,-3241.11"/>
<polygon fill="black" stroke="black" points="4658.81,-3244.16 4669.2,-3246.22 4662.36,-3238.13 4658.81,-3244.16"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge81" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4618.23,-2020.72C4868.44,-2034.7 5142.61,-2050.03 5328.23,-2060.41"/>
<polygon fill="black" stroke="black" points="5328.21,-2063.91 5338.39,-2060.97 5328.6,-2056.92 5328.21,-2063.91"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge82" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4618.12,-1952.68C4788.13,-1941.32 4972.93,-1927.28 5143,-1910.77 5490.38,-1877.07 5619.44,-1985.73 5922,-1811.77 5944.81,-1798.66 5934.92,-1777.4 5958,-1764.77 6003.82,-1739.71 6055.34,-1723.67 6107.71,-1713.88"/>
<polygon fill="black" stroke="black" points="6108.62,-1717.27 6117.85,-1712.06 6107.39,-1710.38 6108.62,-1717.27"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge83" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4049.09,-1928.9C4200.64,-1698.63 4758.24,-851.38 4875.69,-672.91"/>
<polygon fill="black" stroke="black" points="4878.69,-674.73 4881.26,-664.45 4872.84,-670.88 4878.69,-674.73"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge84" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3860.09,-2044.38C3879.06,-2054.9 3929.04,-2062.27 4010,-2062.27 4080.21,-2062.27 4127.12,-2056.73 4150.71,-2048.4"/>
<polygon fill="black" stroke="black" points="4152.15,-2051.59 4159.91,-2044.38 4149.35,-2045.17 4152.15,-2051.59"/>
</g>
<!-- tg_client._save_media -->
<g id="node78" class="node">
<title>tg_client._save_media</title>
<g id="a_node78"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5139.5,-1901.77 4657.5,-1901.77 4657.5,-1847.77 5139.5,-1847.77 5139.5,-1901.77"/>
<text text-anchor="middle" x="4898.5" y="-1864.17" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge85" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4466.26,-1929.26C4538.35,-1920.15 4610.03,-1911.09 4673.64,-1903.06"/>
<polygon fill="black" stroke="black" points="4674.29,-1906.5 4683.77,-1901.78 4673.41,-1899.56 4674.29,-1906.5"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node79" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node79"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="10295.5,-706.77 10047.5,-706.77 10047.5,-670.77 10295.5,-670.77 10295.5,-706.77"/>
<text text-anchor="middle" x="10171.5" y="-684.73" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge86" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4024.06,-1929.27C4072.99,-1725.16 4262.94,-1025.37 4654,-605.77 4835.89,-410.61 4922.41,-387.79 5179,-314.77 6026.74,-73.55 8263.15,-183.79 9144,-214.77 9466.38,-226.11 9586.5,-108.26 9868,-265.77 10032.75,-357.96 10130.19,-581.78 10160.35,-660.68"/>
<polygon fill="black" stroke="black" points="10157.22,-662.28 10164.01,-670.4 10163.77,-659.81 10157.22,-662.28"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge90" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4922.88,-1847.72C4973.53,-1787.3 5092.84,-1634.8 5143,-1483.77 5172.94,-1393.61 5109.15,-1122.17 5179,-1057.77 5239.26,-1002.21 8051.54,-1028.02 8130,-1051.77 8148.4,-1057.35 8148.07,-1068.83 8166,-1075.77 8299.86,-1127.58 8467.46,-1143.27 8567.35,-1147.93"/>
<polygon fill="black" stroke="black" points="8567.25,-1151.43 8577.4,-1148.37 8567.56,-1144.44 8567.25,-1151.43"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge87" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M4956.92,-1901.88C5014.47,-1932.36 5100.46,-1987.59 5143,-2062.77 5176.93,-2122.75 5129.22,-2323.12 5179,-2370.77 5255.89,-2444.38 5387.63,-2434.3 5471.54,-2417.85"/>
<polygon fill="black" stroke="black" points="5472.43,-2421.24 5481.53,-2415.81 5471.03,-2414.38 5472.43,-2421.24"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node80" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node80"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6598.5,-1939.77 6363.5,-1939.77 6363.5,-1903.77 6598.5,-1903.77 6598.5,-1939.77"/>
<text text-anchor="middle" x="6481" y="-1917.73" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge88" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5139.61,-1888.11C5152.93,-1888.71 5166.13,-1889.27 5179,-1889.77 5609.45,-1906.62 6120.39,-1916.12 6353.15,-1919.88"/>
<polygon fill="black" stroke="black" points="6353.29,-1923.38 6363.34,-1920.04 6353.4,-1916.38 6353.29,-1923.38"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge89" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M4922.58,-1847.62C4972.64,-1787 5090.86,-1634.13 5143,-1483.77 5166.74,-1415.33 5126,-1209.17 5179,-1159.77 5330.39,-1018.68 6833.1,-1088.94 7040,-1084.77 7161.09,-1082.34 8029.97,-1016.5 8130,-1084.77 8166.27,-1109.53 8130.72,-1150.63 8166,-1176.77 8341.15,-1306.55 8973.3,-1117.2 9144,-1252.77 9185.61,-1285.82 9139.28,-1332.64 9180,-1366.77 9244.95,-1421.22 9342.51,-1429.32 9417,-1425.62"/>
<polygon fill="black" stroke="black" points="9417.57,-1429.09 9427.35,-1425.02 9417.17,-1422.1 9417.57,-1429.09"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge128" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6598.63,-1921.77C6808.57,-1921.77 7248.1,-1921.77 7461.94,-1921.77"/>
<polygon fill="black" stroke="black" points="7461.95,-1925.27 7471.95,-1921.77 7461.95,-1918.27 7461.95,-1925.27"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node82" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node82"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3366,-1937.77 2961,-1937.77 2961,-1895.77 3366,-1895.77 3366,-1937.77"/>
<text text-anchor="middle" x="3163.5" y="-1908.69" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge91" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3366.24,-1933.5C3374.57,-1934.19 3383.06,-1934.89 3391.69,-1935.61"/>
<polygon fill="black" stroke="black" points="3391.62,-1939.11 3401.88,-1936.45 3392.2,-1932.14 3391.62,-1939.11"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node83" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node83"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7870,-863.77 7300,-863.77 7300,-819.77 7870,-819.77 7870,-863.77"/>
<text text-anchor="middle" x="7585" y="-833.45" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge92" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7690.5,-819.75C7815.08,-800.31 8020.16,-791.11 8130,-910.77 8196.63,-983.36 8106.66,-1718.12 8166,-1796.77 8214.44,-1860.97 8289.27,-1899.92 8365.91,-1923.44"/>
<polygon fill="black" stroke="black" points="8365.16,-1926.88 8375.75,-1926.38 8367.16,-1920.17 8365.16,-1926.88"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge93" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7673.6,-819.69C7791.07,-795.67 7999.87,-773.39 8130,-877.77 8174.43,-913.42 8122.62,-963.86 8166,-1000.77 8499.59,-1284.66 8830.82,-816.52 9144,-1122.77 9222.37,-1199.41 9101.87,-1289.89 9180,-1366.77 9241.14,-1426.95 9340.84,-1433.98 9417.03,-1428.44"/>
<polygon fill="black" stroke="black" points="9417.46,-1431.92 9427.14,-1427.62 9416.89,-1424.94 9417.46,-1431.92"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge94" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7870.16,-853.04C7954.08,-858.4 8045.95,-866.27 8130,-877.77 8586.15,-940.24 8826.02,-756.81 9144,-1089.77 9213.34,-1162.38 9106.18,-1244.74 9180,-1312.77 9248.52,-1375.92 9360.89,-1372.14 9438.24,-1359.54"/>
<polygon fill="black" stroke="black" points="9439.17,-1362.93 9448.43,-1357.8 9437.99,-1356.03 9439.17,-1362.93"/>
</g>
<!-- tg_client._download_messages -->
<g id="node85" class="node">
<title>tg_client._download_messages</title>
<g id="a_node85"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2918,-1891.77 2199,-1891.77 2199,-1833.77 2918,-1833.77 2918,-1891.77"/>
<text text-anchor="middle" x="2558.5" y="-1851.49" font-family="Times,serif" font-size="45.36">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge95" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2883.51,-1891.79C2906.25,-1893.83 2928.83,-1895.85 2950.72,-1897.81"/>
<polygon fill="black" stroke="black" points="2950.45,-1901.3 2960.72,-1898.7 2951.07,-1894.33 2950.45,-1901.3"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node86" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node86"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2729.5,-3435.77 2387.5,-3435.77 2387.5,-3399.77 2729.5,-3399.77 2729.5,-3435.77"/>
<text text-anchor="middle" x="2558.5" y="-3412.08" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node87" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node87"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2925,-2247.27 2192,-2247.27 2192,-2182.27 2925,-2182.27 2925,-2247.27"/>
<text text-anchor="middle" x="2558.5" y="-2201.72" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge102" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2568.94,-2247.45C2621.33,-2423.36 2892.52,-3266.92 3402,-3727.77 4040.07,-4304.95 4361.95,-4226.16 5179,-4495.77 5516.64,-4607.19 5607.52,-4617.95 5958,-4677.77 6434.49,-4759.11 7742.52,-5084.76 8130,-4795.77 8174.98,-4762.23 8121.75,-4709.28 8166,-4674.77 8251.77,-4607.89 9050.73,-4688.72 9144,-4632.77 9171,-4616.58 9154.22,-4589.84 9180,-4571.77 9249.89,-4522.81 9346.73,-4508.36 9419.69,-4505.26"/>
<polygon fill="black" stroke="black" points="9419.96,-4508.75 9429.82,-4504.89 9419.7,-4501.76 9419.96,-4508.75"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge97" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2925.04,-2230.83C3218.08,-2242.32 3639.87,-2255.77 4009,-2255.77 4009,-2255.77 4009,-2255.77 6482,-2255.77 7293.6,-2255.77 8275.53,-2282.63 8567.91,-2291.19"/>
<polygon fill="black" stroke="black" points="8567.93,-2294.69 8578.02,-2291.48 8568.13,-2287.69 8567.93,-2294.69"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge101" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2583.95,-2247.44C2711.91,-2414.31 3324.71,-3163.77 4009,-3163.77 4009,-3163.77 4009,-3163.77 6482,-3163.77 7073.57,-3163.77 8553.91,-3142.91 9144,-3184.77 9232.41,-3191.05 9331.69,-3204.65 9406.45,-3216.23"/>
<polygon fill="black" stroke="black" points="9405.95,-3219.69 9416.37,-3217.77 9407.03,-3212.77 9405.95,-3219.69"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge96" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2925.05,-2187.75C3076,-2160.19 3243.85,-2106.27 3366,-2001.77 3396.24,-1975.9 3369.83,-1943.21 3402,-1919.77 4050.67,-1447.19 6201.44,-1655.28 7004,-1657.77 7129.11,-1658.16 8035.43,-1582.87 8130,-1664.77 8211.2,-1735.1 8088.56,-1829.32 8166,-1903.77 8219.18,-1954.91 8292.19,-1977.64 8365.53,-1985.33"/>
<polygon fill="black" stroke="black" points="8365.6,-1988.85 8375.88,-1986.31 8366.26,-1981.88 8365.6,-1988.85"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge98" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2784.89,-2247.29C2868.92,-2259.42 2961.38,-2272.76 3033.78,-2283.2"/>
<polygon fill="black" stroke="black" points="3033.47,-2286.69 3043.86,-2284.66 3034.47,-2279.77 3033.47,-2286.69"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge99" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2611.32,-2182.11C2686.47,-2135.58 2830.94,-2049.29 2961,-1989.77 3001.55,-1971.22 3048.29,-1954.04 3086.54,-1941.01"/>
<polygon fill="black" stroke="black" points="3087.72,-1944.31 3096.08,-1937.79 3085.48,-1937.68 3087.72,-1944.31"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge100" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2617.89,-2182.15C2694.47,-2140.65 2834.04,-2069.37 2961,-2027.77 3135.44,-1970.62 3225.1,-2064.43 3366,-1946.77 3399.39,-1918.9 3372.21,-1887.46 3402,-1855.77 3999.47,-1220.29 4335.34,-1244.26 5179,-1022.77 5920.23,-828.18 6830.88,-819.32 7289.83,-830.07"/>
<polygon fill="black" stroke="black" points="7289.83,-833.58 7299.91,-830.32 7290,-826.58 7289.83,-833.58"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node88" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node88"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1635,-1811.77 922,-1811.77 922,-1737.77 1635,-1737.77 1635,-1811.77"/>
<text text-anchor="middle" x="1278.5" y="-1759.95" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge103" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1635.23,-1745.26C1891.48,-1726.52 2245.59,-1705.77 2557.5,-1705.77 2557.5,-1705.77 2557.5,-1705.77 4011,-1705.77 4877.79,-1705.77 5091.83,-1786.08 5958,-1818.77 6018.3,-1821.05 8082.88,-1819.07 8130,-1856.77 8182.86,-1899.07 8125.72,-1950.37 8166,-2004.77 8273.67,-2150.19 8478.22,-2235.75 8585.08,-2272.46"/>
<polygon fill="black" stroke="black" points="8584.2,-2275.86 8594.8,-2275.76 8586.45,-2269.23 8584.2,-2275.86"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge104" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1396.35,-1737.69C1714.7,-1638.07 2625.49,-1362.5 3402,-1218.77 4929.51,-936.04 6817.76,-931.54 7402.72,-937.84"/>
<polygon fill="black" stroke="black" points="7402.89,-941.34 7412.93,-937.95 7402.97,-934.34 7402.89,-941.34"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge105" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1298.23,-1737.56C1346.11,-1646.79 1482.63,-1413.89 1671,-1310.77 1691.79,-1299.4 1715.04,-1291.47 1738.69,-1286.02"/>
<polygon fill="black" stroke="black" points="1739.45,-1289.44 1748.48,-1283.91 1737.97,-1282.59 1739.45,-1289.44"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge106" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1635.07,-1768.38C1901.65,-1763.58 2250.77,-1757.29 2433.59,-1754"/>
<polygon fill="black" stroke="black" points="2433.85,-1757.5 2443.78,-1753.82 2433.72,-1750.5 2433.85,-1757.5"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge107" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1635.05,-1777.59C1647.18,-1777.66 1659.19,-1777.72 1671,-1777.77 2228.33,-1780.44 2367.69,-1783.47 2925,-1778.77 2955.7,-1778.52 2988.63,-1778.07 3019.89,-1777.57"/>
<polygon fill="black" stroke="black" points="3020.04,-1781.06 3029.98,-1777.4 3019.92,-1774.07 3020.04,-1781.06"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge108" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1461.37,-1811.87C1527.26,-1824.71 1602.34,-1838.66 1671,-1849.77 1703.82,-1855.09 1739.26,-1860.16 1772.61,-1864.63"/>
<polygon fill="black" stroke="black" points="1772.52,-1868.15 1782.89,-1866 1773.44,-1861.21 1772.52,-1868.15"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge109" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1635,-1808.94C1647.15,-1809.93 1659.17,-1810.88 1671,-1811.77 1840.78,-1824.68 2029.08,-1835.94 2188.31,-1844.57"/>
<polygon fill="black" stroke="black" points="2188.58,-1848.09 2198.75,-1845.14 2188.96,-1841.1 2188.58,-1848.09"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node89" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node89"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7901.5,-1431.27 7268.5,-1431.27 7268.5,-1370.27 7901.5,-1370.27 7901.5,-1431.27"/>
<text text-anchor="middle" x="7585" y="-1388.52" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge111" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7901.74,-1389.49C8002.06,-1393.04 8095.89,-1406.33 8130,-1440.77 8218.37,-1530.01 8100.36,-1897.7 8166,-2004.77 8258.88,-2156.29 8463.37,-2237.81 8575.92,-2272.72"/>
<polygon fill="black" stroke="black" points="8574.93,-2276.08 8585.52,-2275.66 8576.98,-2269.39 8574.93,-2276.08"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge110" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7901.58,-1390.03C8001.71,-1393.66 8095.44,-1406.86 8130,-1440.77 8191.96,-1501.58 8109.86,-1763.56 8166,-1829.77 8216.28,-1889.07 8290.36,-1922.64 8365.7,-1941.19"/>
<polygon fill="black" stroke="black" points="8365.31,-1944.69 8375.85,-1943.6 8366.93,-1937.88 8365.31,-1944.69"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge112" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7901.52,-1402.57C8345.74,-1405.09 9133.02,-1409.56 9417.09,-1411.17"/>
<polygon fill="black" stroke="black" points="9417.37,-1414.67 9427.39,-1411.23 9417.41,-1407.67 9417.37,-1414.67"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge113" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7901.52,-1390.84C8347.33,-1376.8 9138.66,-1351.88 9420.11,-1343.01"/>
<polygon fill="black" stroke="black" points="9420.43,-1346.51 9430.31,-1342.69 9420.21,-1339.51 9420.43,-1346.51"/>
</g>
<!-- tg_client.main -->
<g id="node90" class="node">
<title>tg_client.main</title>
<g id="a_node90"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="886,-2014.77 318,-2014.77 318,-1922.77 886,-1922.77 886,-2014.77"/>
<text text-anchor="middle" x="602" y="-1949.73" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge114" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M620.23,-2015.09C712,-2252.92 1167.27,-3325.77 1912.5,-3325.77 1912.5,-3325.77 1912.5,-3325.77 3164.5,-3325.77 3783.85,-3325.77 4527.7,-3325.77 4795.35,-3325.77"/>
<polygon fill="black" stroke="black" points="4795.44,-3329.27 4805.44,-3325.77 4795.44,-3322.27 4795.44,-3329.27"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge115" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M606.65,-2014.82C624.95,-2232.9 714.12,-3158.92 922,-3339.77 992.28,-3400.91 1102.6,-3401.29 1181.7,-3391.17"/>
<polygon fill="black" stroke="black" points="1182.24,-3394.63 1191.67,-3389.82 1181.3,-3387.7 1182.24,-3394.63"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge116" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M611.61,-1922.57C637.34,-1795.71 724.48,-1436.96 922,-1218.77 1184.93,-928.34 1640.7,-760.52 1828.2,-700.82"/>
<polygon fill="black" stroke="black" points="1829.26,-704.15 1837.74,-697.8 1827.15,-697.48 1829.26,-704.15"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge117" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M886.08,-1963.02C1403.56,-1952.51 2491.17,-1930.41 2950.55,-1921.08"/>
<polygon fill="black" stroke="black" points="2950.69,-1924.58 2960.61,-1920.88 2950.54,-1917.58 2950.69,-1924.58"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge118" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M605.87,-2014.88C620.89,-2239.7 698.52,-3217.51 922,-3398.77 1408.74,-3793.56 2271.83,-3521.76 2500.56,-3439.3"/>
<polygon fill="black" stroke="black" points="2501.82,-3442.57 2510.02,-3435.87 2499.43,-3435.99 2501.82,-3442.57"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge119" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M886.16,-2004.41C1262.01,-2051.72 1920.95,-2134.66 2289.18,-2181"/>
<polygon fill="black" stroke="black" points="2288.81,-2184.48 2299.17,-2182.26 2289.69,-2177.54 2288.81,-2184.48"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge120" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M763.27,-1922.68C877.58,-1889.8 1029.74,-1846.03 1138.84,-1814.66"/>
<polygon fill="black" stroke="black" points="1139.95,-1817.98 1148.6,-1811.85 1138.02,-1811.25 1139.95,-1817.98"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge121" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M661.37,-1922.7C724.58,-1873.32 828.87,-1793.32 922,-1728.77 1246.38,-1503.97 1296.72,-1376.97 1671,-1251.77 1773.1,-1217.62 1804.83,-1232.77 1912.5,-1232.77 1912.5,-1232.77 1912.5,-1232.77 5551.5,-1232.77 6198.87,-1232.77 6381.89,-1162.71 7004,-1341.77 7021.39,-1346.78 7022.61,-1355.78 7040,-1360.77 7109.22,-1380.64 7185.32,-1392.24 7258.11,-1398.72"/>
<polygon fill="black" stroke="black" points="7258.09,-1402.23 7268.36,-1399.6 7258.69,-1395.26 7258.09,-1402.23"/>
</g>
<!-- notes_utils.parse_md -->
<g id="node91" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node91"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8738.5,-1787.77 8571.5,-1787.77 8571.5,-1751.77 8738.5,-1751.77 8738.5,-1787.77"/>
<text text-anchor="middle" x="8655" y="-1766.07" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge124" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8732.82,-1751.71C8836.6,-1732.03 9022.56,-1713.98 9144,-1801.77 9178.58,-1826.77 9157.36,-1854.61 9180,-1890.77 9274.29,-2041.4 9430.53,-2188.55 9494.43,-2245.76"/>
<polygon fill="black" stroke="black" points="9492.32,-2248.57 9502.11,-2252.6 9496.97,-2243.34 9492.32,-2248.57"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge125" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8738.68,-1772.76C8835.91,-1776.83 9002.07,-1785.55 9144,-1801.77 9236.24,-1812.32 9340.27,-1829.74 9415.97,-1843.43"/>
<polygon fill="black" stroke="black" points="9415.53,-1846.91 9425.99,-1845.25 9416.78,-1840.02 9415.53,-1846.91"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node92" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node92"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7699.5,-1351.77 7470.5,-1351.77 7470.5,-1315.77 7699.5,-1315.77 7699.5,-1351.77"/>
<text text-anchor="middle" x="7585" y="-1329.73" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge127" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7699.63,-1319.95C7812.53,-1310.64 7988.75,-1308.22 8130,-1360.77 8133.68,-1362.15 8511.23,-1657.89 8623.1,-1745.56"/>
<polygon fill="black" stroke="black" points="8620.96,-1748.33 8630.99,-1751.74 8625.28,-1742.82 8620.96,-1748.33"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node93" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node93"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6939,-3263.27 6023,-3263.27 6023,-3192.27 6939,-3192.27 6939,-3263.27"/>
<text text-anchor="middle" x="6481" y="-3213.13" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge129" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6809.06,-3263.37C6883.76,-3287.13 6955.37,-3325.44 7004,-3386.77 7079.95,-3482.58 6950.76,-3852.2 7040,-3935.77 7128.4,-4018.56 8020.56,-3987.64 8130,-3935.77 8152.83,-3924.95 8143.53,-3903.34 8166,-3891.77 8282.17,-3831.99 8435,-3832.52 8538.44,-3842.45"/>
<polygon fill="black" stroke="black" points="8538.31,-3845.95 8548.61,-3843.47 8539.01,-3838.99 8538.31,-3845.95"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge132" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6711.52,-3192.2C6817.93,-3163.31 6935.69,-3111.08 7004,-3016.77 7074.03,-2920.09 6954.24,-2563.82 7040,-2480.77 7083.53,-2438.62 8070.14,-2452.19 8130,-2442.77 8303.21,-2415.54 8500.34,-2349.62 8595.92,-2315.32"/>
<polygon fill="black" stroke="black" points="8597.18,-2318.58 8605.4,-2311.9 8594.81,-2312 8597.18,-2318.58"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge130" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6672.19,-3192.22C6782.46,-3162.52 6916.39,-3109.5 7004,-3016.77 7038.17,-2980.61 7000.29,-2940.75 7040,-2910.77 7090.11,-2872.96 7234.58,-2867.11 7362.05,-2870.23"/>
<polygon fill="black" stroke="black" points="7362.28,-2873.74 7372.37,-2870.51 7362.47,-2866.74 7362.28,-2873.74"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge131" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6712.92,-3192.21C6819.16,-3163.33 6936.37,-3111.11 7004,-3016.77 7085.44,-2903.17 6945.3,-2491.59 7040,-2388.77 7205.7,-2208.86 7897.33,-2311.23 8130,-2235.77 8306.39,-2178.57 8493.89,-2064.3 8589.6,-2001.54"/>
<polygon fill="black" stroke="black" points="8591.58,-2004.43 8598.01,-1996 8587.73,-1998.58 8591.58,-2004.43"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node94" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node94"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="8873,-4951.77 8437,-4951.77 8437,-4907.77 8873,-4907.77 8873,-4951.77"/>
<text text-anchor="middle" x="8655" y="-4921.45" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge133" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6814.33,-3263.37C6887.64,-3287.24 6957.28,-3325.6 7004,-3386.77 7087.11,-3495.62 6952.35,-4513.55 7040,-4618.77 7214.17,-4827.85 8024.61,-4898.01 8426.63,-4920.2"/>
<polygon fill="black" stroke="black" points="8426.46,-4923.7 8436.64,-4920.75 8426.84,-4916.71 8426.46,-4923.7"/>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge260" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8873.1,-4931.28C9044.93,-4932.47 9277.77,-4934.08 9413.05,-4935.01"/>
<polygon fill="black" stroke="black" points="9413.4,-4938.52 9423.42,-4935.09 9413.45,-4931.52 9413.4,-4938.52"/>
</g>
<!-- scan_ontology.main -->
<g id="node95" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5780,-3256.27 5321,-3256.27 5321,-3199.27 5780,-3199.27 5780,-3256.27"/>
<text text-anchor="middle" x="5550.5" y="-3216.43" font-family="Times,serif" font-size="44.80">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge135" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5604.07,-3256.34C5688.91,-3305.75 5853.42,-3416.03 5922,-3561.77 5962.11,-3647.01 5898.64,-4335.63 5958,-4408.77 6270.74,-4794.12 6547.58,-4622.96 7040,-4684.77 7280.34,-4714.94 7926.9,-4816.76 8130,-4684.77 8163.03,-4663.31 8133.46,-4625.98 8166,-4603.77 8255.85,-4542.47 9035.67,-4569.62 9144,-4559.77 9237.68,-4551.26 9343.72,-4536.25 9419.76,-4524.54"/>
<polygon fill="black" stroke="black" points="9420.47,-4527.97 9429.82,-4522.98 9419.4,-4521.05 9420.47,-4527.97"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge134" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5604.82,-3256.35C5690.34,-3305.59 5855.31,-3415.39 5922,-3561.77 5968.49,-3663.81 5880.07,-5499.16 5958,-5579.77 6002.34,-5625.64 6155.4,-5629.27 6284.41,-5623.22"/>
<polygon fill="black" stroke="black" points="6284.62,-5626.72 6294.44,-5622.73 6284.28,-5619.73 6284.62,-5626.72"/>
</g>
<!-- scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge136" class="edge">
<title>scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5636.31,-3199.12C5725.47,-3163.93 5861.08,-3094.86 5922,-2983.77 5986.68,-2865.83 5866.81,-661.66 5958,-562.77 6121.79,-385.16 7888.45,-453.25 8130,-458.77 8246.64,-461.44 8377.76,-467.45 8479.66,-472.79"/>
<polygon fill="black" stroke="black" points="8479.57,-476.29 8489.74,-473.32 8479.94,-469.3 8479.57,-476.29"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge137" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5780.12,-3227.77C5850.93,-3227.77 5931.68,-3227.77 6012.57,-3227.77"/>
<polygon fill="black" stroke="black" points="6012.95,-3231.27 6022.95,-3227.77 6012.95,-3224.27 6012.95,-3231.27"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node96" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node96"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="9703.5,-5604.77 9344.5,-5604.77 9344.5,-5568.77 9703.5,-5568.77 9703.5,-5604.77"/>
<text text-anchor="middle" x="9524" y="-5581.08" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node97" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node97"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6798.5,-5696.27 6163.5,-5696.27 6163.5,-5643.27 6798.5,-5643.27 6798.5,-5696.27"/>
<text text-anchor="middle" x="6481" y="-5659.57" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node98" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node98"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="8130,-5413.27 7040,-5413.27 7040,-5336.27 8130,-5336.27 8130,-5413.27"/>
<text text-anchor="middle" x="7585" y="-5358.87" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge138" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8130.14,-5345.08C8514.05,-5335.32 8986.84,-5349.43 9144,-5464.77 9180.4,-5491.49 9143.88,-5532.68 9180,-5559.77 9247.43,-5610.35 9344.74,-5613.38 9418.5,-5605.9"/>
<polygon fill="black" stroke="black" points="9419.19,-5609.35 9428.75,-5604.78 9418.43,-5602.39 9419.19,-5609.35"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node99" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node99"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="8867.5,-4551.27 8442.5,-4551.27 8442.5,-4512.27 8867.5,-4512.27 8867.5,-4551.27"/>
<text text-anchor="middle" x="8655" y="-4524.87" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge139" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8867.54,-4525.92C9042.56,-4521.07 9283.69,-4514.4 9419.37,-4510.64"/>
<polygon fill="black" stroke="black" points="9419.86,-4514.13 9429.76,-4510.36 9419.67,-4507.13 9419.86,-4514.13"/>
</g>
<!-- price_utils.load_price_model -->
<g id="node100" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node100"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="8889.5,-3235.77 8420.5,-3235.77 8420.5,-3193.77 8889.5,-3193.77 8889.5,-3235.77"/>
<text text-anchor="middle" x="8655" y="-3206.69" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge140" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8889.77,-3220.44C9049.97,-3224.32 9256.75,-3229.33 9389.64,-3232.54"/>
<polygon fill="black" stroke="black" points="9389.79,-3236.05 9399.87,-3232.79 9389.96,-3229.05 9389.79,-3236.05"/>
</g>
<!-- price_utils.predict_price -->
<g id="node101" class="node">
<title>price_utils.predict_price</title>
<g id="a_node101"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7790,-5474.27 7380,-5474.27 7380,-5431.27 7790,-5431.27 7790,-5474.27"/>
<text text-anchor="middle" x="7585" y="-5444.63" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node102" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node102"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8848.5,-5512.27 8461.5,-5512.27 8461.5,-5473.27 8848.5,-5473.27 8848.5,-5512.27"/>
<text text-anchor="middle" x="8655" y="-5485.87" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node103" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node103"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10439,-5556.77 9904,-5556.77 9904,-5506.77 10439,-5506.77 10439,-5556.77"/>
<text text-anchor="middle" x="10171.5" y="-5522.09" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node104" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node104"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9780.5,-5550.77 9267.5,-5550.77 9267.5,-5512.77 9780.5,-5512.77 9780.5,-5550.77"/>
<text text-anchor="middle" x="9524" y="-5525.05" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge141" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9780.58,-5531.77C9817.76,-5531.77 9856.19,-5531.77 9893.76,-5531.77"/>
<polygon fill="black" stroke="black" points="9893.81,-5535.27 9903.81,-5531.77 9893.81,-5528.27 9893.81,-5535.27"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node105" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node105"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6841.5,-5434.27 6120.5,-5434.27 6120.5,-5375.27 6841.5,-5375.27 6841.5,-5434.27"/>
<text text-anchor="middle" x="6481" y="-5393.09" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge142" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6841.69,-5394.98C6901.9,-5393.34 6965.59,-5391.61 7029.34,-5389.87"/>
<polygon fill="black" stroke="black" points="7029.67,-5393.37 7039.57,-5389.6 7029.48,-5386.37 7029.67,-5393.37"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge143" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6841.69,-5420.44C7016.19,-5428.04 7219.92,-5436.92 7369.76,-5443.44"/>
<polygon fill="black" stroke="black" points="7369.85,-5446.95 7380,-5443.89 7370.16,-5439.96 7369.85,-5446.95"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge144" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6841.69,-5402.47C6897.69,-5411.28 6953.62,-5425.81 7004,-5448.77 7024.31,-5458.03 7019.35,-5475.32 7040,-5483.77 7167.15,-5535.81 8046.64,-5513.4 8451.19,-5500.07"/>
<polygon fill="black" stroke="black" points="8451.37,-5503.57 8461.25,-5499.74 8451.14,-5496.57 8451.37,-5503.57"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge145" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6841.69,-5388.82C6899.2,-5398.94 6955.62,-5417.45 7004,-5448.77 7031.72,-5466.72 7011.61,-5496.91 7040,-5513.77 7133.89,-5569.56 8635.33,-5548.3 9256.83,-5537.02"/>
<polygon fill="black" stroke="black" points="9257.34,-5540.51 9267.28,-5536.83 9257.22,-5533.51 9257.34,-5540.51"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node106" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node106"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="9025,-5735.77 8285,-5735.77 8285,-5677.77 9025,-5677.77 9025,-5735.77"/>
<text text-anchor="middle" x="8655" y="-5695.49" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge146" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8865.6,-5677.76C9026,-5655.56 9242.76,-5625.56 9382.74,-5606.19"/>
<polygon fill="black" stroke="black" points="9383.26,-5609.65 9392.68,-5604.81 9382.3,-5602.72 9383.26,-5609.65"/>
</g>
<!-- caption._identify_size -->
<g id="node107" class="node">
<title>caption._identify_size</title>
<g id="a_node107"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9652.5,-1303.77 9395.5,-1303.77 9395.5,-1267.77 9652.5,-1267.77 9652.5,-1303.77"/>
<text text-anchor="middle" x="9524" y="-1280.08" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node108" class="node">
<title>caption._prepare_image</title>
<g id="a_node108"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8872,-1307.77 8438,-1307.77 8438,-1261.77 8872,-1261.77 8872,-1307.77"/>
<text text-anchor="middle" x="8655" y="-1276.33" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge147" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8872.27,-1285.02C9032.88,-1285.21 9247.15,-1285.46 9385.12,-1285.62"/>
<polygon fill="black" stroke="black" points="9385.33,-1289.12 9395.33,-1285.63 9385.33,-1282.12 9385.33,-1289.12"/>
</g>
<!-- caption._guess_chat -->
<g id="node109" class="node">
<title>caption._guess_chat</title>
<g id="a_node109"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9620,-1249.77 9428,-1249.77 9428,-1213.77 9620,-1213.77 9620,-1249.77"/>
<text text-anchor="middle" x="9524" y="-1227.61" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node110" class="node">
<title>caption.caption_file</title>
<g id="a_node110"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="7888,-1297.27 7282,-1297.27 7282,-1224.27 7888,-1224.27 7888,-1297.27"/>
<text text-anchor="middle" x="7585" y="-1245.79" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge152" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7888.24,-1233.55C7966.98,-1226.16 8051.69,-1217.93 8130,-1209.77 8284.02,-1193.74 8463.23,-1172.7 8567.12,-1160.27"/>
<polygon fill="black" stroke="black" points="8567.74,-1163.73 8577.25,-1159.06 8566.9,-1156.78 8567.74,-1163.73"/>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge148" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7748.68,-1224.24C7870.83,-1207.27 8033.11,-1208.81 8130,-1306.77 8206.78,-1384.4 8087.28,-1721.11 8166,-1796.77 8244.39,-1872.12 9067.06,-1752.95 9144,-1829.77 9224.25,-1909.9 9137.84,-2744.5 9180,-2849.77 9246.29,-3015.32 9416.65,-3156.65 9489.33,-3211.45"/>
<polygon fill="black" stroke="black" points="9487.59,-3214.52 9497.69,-3217.7 9491.78,-3208.91 9487.59,-3214.52"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge151" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7888.02,-1276.23C7967.15,-1283.03 8052.1,-1292.79 8130,-1306.77 8146.34,-1309.71 8149.63,-1313.96 8166,-1316.77 8406.25,-1358.12 9141.53,-1394.56 9417.16,-1407.12"/>
<polygon fill="black" stroke="black" points="9417.02,-1410.62 9427.17,-1407.58 9417.34,-1403.63 9417.02,-1410.62"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge149" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M7888.12,-1267.56C8059.53,-1271.42 8270.49,-1276.16 8427.58,-1279.69"/>
<polygon fill="black" stroke="black" points="8427.77,-1283.19 8437.85,-1279.92 8427.93,-1276.19 8427.77,-1283.19"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge150" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M7888.12,-1256.25C8329.94,-1249.64 9130.89,-1237.64 9417.49,-1233.35"/>
<polygon fill="black" stroke="black" points="9417.93,-1236.85 9427.88,-1233.2 9417.82,-1229.85 9417.93,-1236.85"/>
</g>
<!-- caption_io.write_caption -->
<g id="node111" class="node">
<title>caption_io.write_caption</title>
<g id="a_node111"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8821.5,-2840.77 8488.5,-2840.77 8488.5,-2804.77 8821.5,-2804.77 8821.5,-2840.77"/>
<text text-anchor="middle" x="8655" y="-2816.61" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge153" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M7741.23,-1224.24C7865.06,-1205.25 8033.26,-1204.05 8130,-1306.77 8186.2,-1366.45 8109.79,-2722.12 8166,-2781.77 8271.45,-2893.68 8471.46,-2867.94 8579.8,-2843.18"/>
<polygon fill="black" stroke="black" points="8580.73,-2846.55 8589.67,-2840.87 8579.14,-2839.74 8580.73,-2846.55"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge208" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8821.71,-2810.61C8930.78,-2812.52 9067.13,-2835.74 9144,-2927.77 9222.18,-3021.38 9141.04,-3909.21 9180,-4024.77 9247.54,-4225.13 9427.8,-4415.17 9496.18,-4482.26"/>
<polygon fill="black" stroke="black" points="9493.97,-4484.99 9503.58,-4489.46 9498.86,-4479.98 9493.97,-4484.99"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge207" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8821.76,-2817.56C8919.64,-2820.51 9043.62,-2835.03 9144,-2881.77 9311.94,-2959.98 9454.76,-3141.16 9504.34,-3209.26"/>
<polygon fill="black" stroke="black" points="9501.76,-3211.67 9510.45,-3217.73 9507.44,-3207.57 9501.76,-3211.67"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge210" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8720.29,-2840.83C8825.86,-2866.1 9035.08,-2897.01 9144,-2781.77 9243.8,-2676.2 9085.49,-1585.1 9180,-1474.77 9236.92,-1408.33 9338.88,-1396.82 9416.89,-1399.41"/>
<polygon fill="black" stroke="black" points="9417.11,-1402.92 9427.24,-1399.84 9417.4,-1395.92 9417.11,-1402.92"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge209" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8821.63,-2822.77C8992.19,-2822.77 9253.75,-2822.77 9404.6,-2822.77"/>
<polygon fill="black" stroke="black" points="9404.82,-2826.27 9414.82,-2822.77 9404.82,-2819.27 9404.82,-2826.27"/>
</g>
<!-- caption.main -->
<g id="node112" class="node">
<title>caption.main</title>
<g id="a_node112"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6573.5,-1204.77 6388.5,-1204.77 6388.5,-1168.77 6573.5,-1168.77 6573.5,-1204.77"/>
<text text-anchor="middle" x="6481" y="-1180.61" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge154" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6573.96,-1192.1C6678.25,-1198.22 6853.39,-1208.71 7004,-1218.77 7090.93,-1224.59 7185.16,-1231.25 7271.9,-1237.54"/>
<polygon fill="black" stroke="black" points="7271.66,-1241.03 7281.89,-1238.26 7272.17,-1234.05 7271.66,-1241.03"/>
</g>
<!-- build_site._load_ontology -->
<g id="node113" class="node">
<title>build_site._load_ontology</title>
<g id="a_node113"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8811.5,-3520.77 8498.5,-3520.77 8498.5,-3484.77 8811.5,-3484.77 8811.5,-3520.77"/>
<text text-anchor="middle" x="8655" y="-3497.18" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge155" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8811.52,-3512.05C8909.2,-3513.25 9036.58,-3506.21 9144,-3471.77 9288.87,-3425.34 9434.38,-3311.39 9494.39,-3260.74"/>
<polygon fill="black" stroke="black" points="9496.93,-3263.17 9502.28,-3254.03 9492.4,-3257.84 9496.93,-3263.17"/>
</g>
<!-- build_site._load_clusters -->
<g id="node114" class="node">
<title>build_site._load_clusters</title>
<g id="a_node114"><a xlink:title="Return precomputed item clusters.">
<polygon fill="none" stroke="black" points="8832.5,-3462.77 8477.5,-3462.77 8477.5,-3424.77 8832.5,-3424.77 8832.5,-3462.77"/>
<text text-anchor="middle" x="8655" y="-3437.05" font-family="Times,serif" font-size="27.16">build_site._load_clusters</text>
</a>
</g>
</g>
<!-- build_site._load_clusters&#45;&gt;notes_utils.load_json -->
<g id="edge156" class="edge">
<title>build_site._load_clusters&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8832.52,-3442.96C8926.28,-3439.04 9042.76,-3428.56 9144,-3402.77 9273.77,-3369.72 9415.31,-3296.37 9482.82,-3258.85"/>
<polygon fill="black" stroke="black" points="9484.82,-3261.74 9491.84,-3253.81 9481.41,-3255.63 9484.82,-3261.74"/>
</g>
<!-- build_site._compile_locale -->
<g id="node115" class="node">
<title>build_site._compile_locale</title>
<g id="a_node115"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="7752,-5696.77 7418,-5696.77 7418,-5660.77 7752,-5660.77 7752,-5696.77"/>
<text text-anchor="middle" x="7585" y="-5672.9" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node116" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node116"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="6669.5,-5570.27 6292.5,-5570.27 6292.5,-5529.27 6669.5,-5529.27 6669.5,-5570.27"/>
<text text-anchor="middle" x="6481" y="-5542.53" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge157" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M6669.67,-5541.21C6796.54,-5539.02 6950.36,-5544.46 7004,-5579.77 7033.88,-5599.45 7010.04,-5632.22 7040,-5651.77 7098.76,-5690.13 7272.22,-5693.09 7407.64,-5688.8"/>
<polygon fill="black" stroke="black" points="7407.86,-5692.3 7417.74,-5688.47 7407.62,-5685.3 7407.86,-5692.3"/>
</g>
<!-- build_site._iter_lots -->
<g id="node117" class="node">
<title>build_site._iter_lots</title>
<g id="a_node117"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7811,-2614.27 7359,-2614.27 7359,-2557.27 7811,-2557.27 7811,-2614.27"/>
<text text-anchor="middle" x="7585" y="-2574.88" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge158" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7811.11,-2571.8C7940.67,-2569.17 8086.26,-2577.34 8130,-2622.77 8223.2,-2719.6 8072.29,-3735.44 8166,-3831.77 8215.76,-3882.93 8410.79,-3878.95 8538.72,-3870.21"/>
<polygon fill="black" stroke="black" points="8539.23,-3873.68 8548.96,-3869.49 8538.74,-3866.7 8539.23,-3873.68"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge161" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7811.15,-2589.17C7910.35,-2585.8 8027.43,-2575.12 8130,-2547.77 8325.57,-2495.63 8535.73,-2369.7 8618.05,-2317.28"/>
<polygon fill="black" stroke="black" points="8619.99,-2320.19 8626.53,-2311.85 8616.22,-2314.29 8619.99,-2320.19"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge159" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7811.11,-2573.24C7939.74,-2571.28 8084.33,-2579.63 8130,-2622.77 8223.45,-2711.06 8073.71,-2820.28 8166,-2909.77 8214.37,-2956.67 8389.59,-2963.16 8516.24,-2961.28"/>
<polygon fill="black" stroke="black" points="8516.48,-2964.77 8526.42,-2961.1 8516.36,-2957.77 8516.48,-2964.77"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge160" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7811.09,-2597.83C7939.72,-2599.53 8084.3,-2590.91 8130,-2547.77 8221.56,-2461.35 8098.39,-2372.99 8166,-2266.77 8251.44,-2132.55 8418.43,-2046.01 8533.06,-1999.61"/>
<polygon fill="black" stroke="black" points="8534.62,-2002.75 8542.6,-1995.79 8532.01,-1996.25 8534.62,-2002.75"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge162" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7811.2,-2599.38C7940.8,-2601.78 8086.4,-2593.36 8130,-2547.77 8184.74,-2490.55 8130.51,-1193.57 8166,-1122.77 8260.73,-933.8 8496.64,-809.03 8601.88,-760.98"/>
<polygon fill="black" stroke="black" points="8603.38,-764.14 8611.05,-756.84 8600.49,-757.77 8603.38,-764.14"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node118" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node118"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8793,-2638.77 8517,-2638.77 8517,-2602.77 8793,-2602.77 8793,-2638.77"/>
<text text-anchor="middle" x="8655" y="-2615.99" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge163" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7811.19,-2593.15C8020.66,-2600.02 8326.72,-2610.05 8506.62,-2615.94"/>
<polygon fill="black" stroke="black" points="8506.58,-2619.44 8516.68,-2616.27 8506.8,-2612.45 8506.58,-2619.44"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node163" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node163"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9700.5,-2664.77 9347.5,-2664.77 9347.5,-2628.77 9700.5,-2628.77 9700.5,-2664.77"/>
<text text-anchor="middle" x="9524" y="-2640.9" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge259" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8793.38,-2624.89C8940.23,-2629.3 9173.94,-2636.31 9337.16,-2641.2"/>
<polygon fill="black" stroke="black" points="9337.21,-2644.7 9347.31,-2641.51 9337.42,-2637.71 9337.21,-2644.7"/>
</g>
<!-- build_site._copy_images -->
<g id="node119" class="node">
<title>build_site._copy_images</title>
<g id="a_node119"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="9687.5,-4765.77 9360.5,-4765.77 9360.5,-4729.77 9687.5,-4729.77 9687.5,-4765.77"/>
<text text-anchor="middle" x="9524" y="-4741.61" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node120" class="node">
<title>build_site._copy_static</title>
<g id="a_node120"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="7713,-5642.77 7457,-5642.77 7457,-5606.77 7713,-5606.77 7713,-5642.77"/>
<text text-anchor="middle" x="7585" y="-5619.47" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node121" class="node">
<title>build_site._load_state</title>
<g id="a_node121"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="6672,-3675.27 6290,-3675.27 6290,-3630.27 6672,-3630.27 6672,-3675.27"/>
<text text-anchor="middle" x="6481" y="-3644.39" font-family="Times,serif" font-size="33.60">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge164" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6672.11,-3637.29C6779.99,-3628.63 6917.53,-3617.79 7040,-3608.77 7540.26,-3571.95 7665.41,-3563.76 8166,-3531.77 8273.26,-3524.92 8393.82,-3517.75 8488.27,-3512.26"/>
<polygon fill="black" stroke="black" points="8488.71,-3515.74 8498.49,-3511.66 8488.3,-3508.75 8488.71,-3515.74"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_clusters -->
<g id="edge165" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_clusters</title>
<path fill="none" stroke="black" d="M6563.93,-3630.16C6672,-3601.45 6868.59,-3553.09 7040,-3531.77 7280.51,-3501.86 7895.77,-3557.03 8130,-3494.77 8147.48,-3490.13 8148.59,-3480.7 8166,-3475.77 8263.06,-3448.33 8375.12,-3439.47 8467.37,-3437.85"/>
<polygon fill="black" stroke="black" points="8467.42,-3441.35 8477.37,-3437.7 8467.32,-3434.35 8467.42,-3441.35"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge166" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6659.36,-3630.22C6777.66,-3605.1 6925.4,-3552.16 7004,-3440.77 7056.45,-3366.44 6976.44,-2687.87 7040,-2622.77 7082.86,-2578.88 7221.77,-2569.95 7348.48,-2571.83"/>
<polygon fill="black" stroke="black" points="7348.69,-2575.33 7358.75,-2572 7348.81,-2568.33 7348.69,-2575.33"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge167" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6672.08,-3648.04C6786.66,-3656.25 6925.23,-3687.98 7004,-3784.77 7062.55,-3856.71 6973.99,-4553.61 7040,-4618.77 7126.23,-4703.9 8028.77,-4585.18 8130,-4651.77 8161.56,-4672.54 8134.27,-4708.27 8166,-4728.77 8214.85,-4760.34 8995.81,-4754.51 9350.33,-4750.2"/>
<polygon fill="black" stroke="black" points="9350.48,-4753.7 9360.43,-4750.07 9350.39,-4746.7 9350.48,-4753.7"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node122" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node122"><a xlink:title="Return mapping of lot id to embedding vector.&#10;&#10;Vectors are stored as ``numpy.float16`` arrays which halves the&#10;memory footprint compared to ``float32`` and drastically reduces&#10;memory usage compared to plain Python lists.">
<polygon fill="none" stroke="black" points="8958,-3305.27 8352,-3305.27 8352,-3256.27 8958,-3256.27 8958,-3305.27"/>
<text text-anchor="middle" x="8655" y="-3271.59" font-family="Times,serif" font-size="37.10">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge168" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6672.09,-3649.78C6784.27,-3637.6 6920.26,-3602.94 7004,-3511.77 7064.8,-3445.58 6971.59,-3371.08 7040,-3312.77 7088.6,-3271.35 7886.27,-3272.69 8341.65,-3276.9"/>
<polygon fill="black" stroke="black" points="8341.64,-3280.4 8351.67,-3277 8341.71,-3273.4 8341.64,-3280.4"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node123" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node123"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7834,-4127.77 7336,-4127.77 7336,-4079.77 7834,-4079.77 7834,-4127.77"/>
<text text-anchor="middle" x="7585" y="-4094.65" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge169" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6672.27,-3650.55C6785.25,-3659.96 6922.02,-3692.09 7004,-3784.77 7088.88,-3880.74 6946.53,-3983.16 7040,-4070.77 7081.92,-4110.07 7206.52,-4119.51 7325.91,-4118.57"/>
<polygon fill="black" stroke="black" points="7326,-4122.07 7335.97,-4118.47 7325.93,-4115.07 7326,-4122.07"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node124" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node124"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8914,-3678.27 8396,-3678.27 8396,-3633.27 8914,-3633.27 8914,-3678.27"/>
<text text-anchor="middle" x="8655" y="-3647.39" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge170" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M6672.11,-3660C6780,-3663.74 6917.53,-3667.91 7040,-3669.77 7524.39,-3677.15 7645.6,-3676.24 8130,-3669.77 8213.09,-3668.66 8303.58,-3666.57 8385.61,-3664.32"/>
<polygon fill="black" stroke="black" points="8385.93,-3667.82 8395.83,-3664.04 8385.74,-3660.82 8385.93,-3667.82"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge235" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8958.02,-3265.1C9105.31,-3257.45 9274.98,-3248.65 9389.63,-3242.7"/>
<polygon fill="black" stroke="black" points="9390.06,-3246.18 9399.86,-3242.17 9389.7,-3239.19 9390.06,-3246.18"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge236" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7834.07,-4116.45C7955.37,-4117.29 8084.85,-4108.41 8130,-4070.77 8181.34,-4027.99 8114.2,-3967 8166,-3924.77 8250.29,-3856.06 9060.55,-3956.51 9144,-3886.77 9200.93,-3839.2 9150.09,-3791.67 9180,-3723.77 9266.24,-3528.05 9436.59,-3330.49 9499.19,-3261.46"/>
<polygon fill="black" stroke="black" points="9501.79,-3263.81 9505.94,-3254.06 9496.62,-3259.1 9501.79,-3263.81"/>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge237" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8914.13,-3670C8990.97,-3665.44 9073.44,-3651.41 9144,-3618.77 9320.69,-3537.06 9460.56,-3335.11 9506.72,-3262.4"/>
<polygon fill="black" stroke="black" points="9509.76,-3264.13 9512.12,-3253.8 9503.84,-3260.41 9509.76,-3264.13"/>
</g>
<!-- build_site._categorise -->
<g id="node125" class="node">
<title>build_site._categorise</title>
<g id="a_node125"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal``. ``sell_item`` lots are further&#10;grouped by ``clusters`` when available and fall back to ``item:type``.&#10;``clusters`` maps ``item:type`` values to cluster names. Stats include price&#10;range, last timestamp and embedding centroid so the sorting logic used on&#10;item pages also works for categories.">
<polygon fill="none" stroke="black" points="9144,-5203.77 8166,-5203.77 8166,-5099.77 9144,-5099.77 9144,-5203.77"/>
<text text-anchor="middle" x="8655" y="-5129.89" font-family="Times,serif" font-size="87.36">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge171" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M9084.97,-5099.77C9105.01,-5095.46 9124.77,-5090.8 9144,-5085.77 9268.08,-5053.35 9406.41,-4991.66 9476.64,-4958.39"/>
<polygon fill="black" stroke="black" points="9478.57,-4961.35 9486.09,-4953.89 9475.56,-4955.03 9478.57,-4961.35"/>
</g>
<!-- build_site._render_site -->
<g id="node126" class="node">
<title>build_site._render_site</title>
<g id="a_node126"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="7004,-5204.27 5958,-5204.27 5958,-5097.27 7004,-5097.27 7004,-5204.27"/>
<text text-anchor="middle" x="6481" y="-5128.15" font-family="Times,serif" font-size="90.16">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge173" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7004.27,-5183.76C7659.69,-5221.53 8746.15,-5271.12 9144,-5212.77 9476.37,-5164.04 9662.54,-5261.54 9868,-4995.77 9901.39,-4952.58 9896.67,-4067.87 9904,-4013.77 9964.26,-3569.19 10122.71,-3043.28 10161.73,-2917.69"/>
<polygon fill="black" stroke="black" points="10165.09,-2918.65 10164.73,-2908.06 10158.41,-2916.56 10165.09,-2918.65"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge172" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7004.35,-5131.97C7775.82,-5104.13 9130.96,-5054.99 9144,-5052.77 9262.74,-5032.62 9396.14,-4985.4 9468.74,-4957.49"/>
<polygon fill="black" stroke="black" points="9470.08,-4960.73 9478.14,-4953.86 9467.55,-4954.2 9470.08,-4960.73"/>
</g>
<!-- build_site.build_page -->
<g id="node127" class="node">
<title>build_site.build_page</title>
<g id="a_node127"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="8054.5,-3021.77 7115.5,-3021.77 7115.5,-2919.77 8054.5,-2919.77 8054.5,-3021.77"/>
<text text-anchor="middle" x="7585" y="-2949.23" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge174" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6951.52,-5097.15C6970.84,-5083.81 6988.55,-5068.14 7004,-5049.77 7069.45,-4972.02 6984.32,-3305.79 7040,-3220.77 7104.68,-3122.02 7219.04,-3061.69 7326.27,-3025.12"/>
<polygon fill="black" stroke="black" points="7327.58,-3028.37 7335.95,-3021.87 7325.36,-3021.73 7327.58,-3028.37"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node128" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node128"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8819.5,-5043.77 8490.5,-5043.77 8490.5,-5007.77 8819.5,-5007.77 8819.5,-5043.77"/>
<text text-anchor="middle" x="8655" y="-5020.08" font-family="Times,serif" font-size="22.12">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge175" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6962.83,-5097.21C6976.82,-5092.76 6990.57,-5087.96 7004,-5082.77 7022.17,-5075.76 7021.47,-5063.78 7040,-5057.77 7303.15,-4972.49 8120.14,-4999.7 8480.38,-5016.63"/>
<polygon fill="black" stroke="black" points="8480.22,-5020.13 8490.38,-5017.1 8480.55,-5013.14 8480.22,-5020.13"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge177" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M8054.66,-2963.9C8082.27,-2950.34 8107.79,-2932.91 8130,-2910.77 8180.21,-2860.72 8127.96,-2653.6 8166,-2593.77 8264.16,-2439.4 8473.21,-2351.98 8583.12,-2315"/>
<polygon fill="black" stroke="black" points="8584.4,-2318.27 8592.79,-2311.79 8582.2,-2311.62 8584.4,-2318.27"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge176" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8054.57,-2966.11C8082.44,-2952.1 8108.03,-2933.97 8130,-2910.77 8179.29,-2858.75 8129.7,-2328.57 8166,-2266.77 8245.92,-2130.71 8411.98,-2045.16 8528.08,-1999.44"/>
<polygon fill="black" stroke="black" points="8529.35,-2002.71 8537.4,-1995.82 8526.81,-1996.18 8529.35,-2002.71"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge178" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M8054.65,-2956.87C8081.64,-2944.8 8107.07,-2929.64 8130,-2910.77 8171.35,-2876.74 8124.21,-2829.27 8166,-2795.77 8277.83,-2706.15 8453.97,-2716.78 8561.24,-2734.49"/>
<polygon fill="black" stroke="black" points="8560.95,-2737.99 8571.4,-2736.22 8562.13,-2731.09 8560.95,-2737.99"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge179" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7833.65,-3021.79C7943.7,-3057.99 8063.25,-3118.97 8130,-3220.77 8183.02,-3301.63 8101.56,-4888.7 8166,-4960.77 8262.91,-5069.17 8446.52,-5062.21 8558.8,-5045.33"/>
<polygon fill="black" stroke="black" points="8559.43,-5048.78 8568.77,-5043.78 8558.35,-5041.86 8559.43,-5048.78"/>
</g>
<!-- build_site.main -->
<g id="node129" class="node">
<title>build_site.main</title>
<g id="a_node129"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5759.5,-5322.27 5341.5,-5322.27 5341.5,-5257.27 5759.5,-5257.27 5759.5,-5322.27"/>
<text text-anchor="middle" x="5550.5" y="-5276.72" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge180" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5759.54,-5270.45C5817.48,-5275.18 5876.85,-5290.81 5922,-5327.77 5963.77,-5361.97 5915.05,-5411.08 5958,-5443.77 6050.52,-5514.21 6905.53,-5414.94 7004,-5476.77 7033.29,-5495.17 7010.57,-5527.6 7040,-5545.77 7137.04,-5605.7 8770.64,-5594.57 9333.9,-5588.91"/>
<polygon fill="black" stroke="black" points="9334.19,-5592.4 9344.15,-5588.8 9334.12,-5585.4 9334.19,-5592.4"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge181" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5759.79,-5291.06C5819.84,-5301.9 5880.31,-5324.74 5922,-5369.77 6002.44,-5456.68 5871.52,-5552.88 5958,-5633.77 5988.98,-5662.76 6066.84,-5675.38 6153.25,-5679.73"/>
<polygon fill="black" stroke="black" points="6153.12,-5683.23 6163.27,-5680.19 6153.45,-5676.23 6153.12,-5683.23"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge182" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M5759.82,-5275.48C5821.56,-5260.43 5883.02,-5232.51 5922,-5181.77 5974.85,-5112.99 5901.34,-3686.46 5958,-3620.77 6266.1,-3263.57 6671.82,-3775.7 7004,-3440.77 7073.77,-3370.43 6964.62,-3285.07 7040,-3220.77 7091.12,-3177.18 7971.64,-3195.54 8410.05,-3207.49"/>
<polygon fill="black" stroke="black" points="8410.23,-3211 8420.33,-3207.77 8410.42,-3204 8410.23,-3211"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge183" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5759.58,-5315.55C5899.25,-5332.85 6083.95,-5355.72 6231.37,-5373.98"/>
<polygon fill="black" stroke="black" points="6231.11,-5377.48 6241.47,-5375.23 6231.97,-5370.53 6231.11,-5377.48"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge184" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5759.54,-5289.72C5820.13,-5300.39 5880.98,-5323.48 5922,-5369.77 5979.72,-5434.91 5893.69,-5701.13 5958,-5759.77 6047.16,-5841.08 8009.49,-5765.85 8130,-5759.77 8220.79,-5755.19 8320.09,-5746.18 8407.6,-5736.86"/>
<polygon fill="black" stroke="black" points="8408.09,-5740.33 8417.66,-5735.78 8407.35,-5733.37 8408.09,-5740.33"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge185" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5759.52,-5272.98C5818.49,-5278.78 5878.42,-5296.28 5922,-5336.77 5981.13,-5391.72 5897.27,-5461.61 5958,-5514.77 6005.45,-5556.32 6155.02,-5563.09 6281.95,-5560.59"/>
<polygon fill="black" stroke="black" points="6282.29,-5564.08 6292.21,-5560.37 6282.14,-5557.08 6282.29,-5564.08"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge186" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5759.68,-5274.55C5818.14,-5280.53 5877.74,-5297.75 5922,-5336.77 5970.19,-5379.27 5908.07,-5436.35 5958,-5476.77 6048.41,-5549.97 6906.36,-5457.55 7004,-5520.77 7034.03,-5540.22 7010.13,-5573.08 7040,-5592.77 7104.39,-5635.23 7307.42,-5636.59 7446.38,-5631.97"/>
<polygon fill="black" stroke="black" points="7446.82,-5635.46 7456.69,-5631.62 7446.58,-5628.47 7446.82,-5635.46"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge187" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5759.74,-5275.42C5821.47,-5260.36 5882.95,-5232.46 5922,-5181.77 6016.77,-5058.77 5861.04,-3906.05 5958,-3784.77 6033.79,-3689.98 6166.96,-3657.39 6279.83,-3648.28"/>
<polygon fill="black" stroke="black" points="6280.28,-3651.76 6289.99,-3647.52 6279.75,-3644.78 6280.28,-3651.76"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge188" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5759.58,-5280.52C6245.22,-5258.92 7464.54,-5204.68 8155.7,-5173.94"/>
<polygon fill="black" stroke="black" points="8156,-5177.43 8165.84,-5173.49 8155.69,-5170.44 8156,-5177.43"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge189" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5759.58,-5258.62C5863.59,-5243.05 5992.55,-5223.75 6112.51,-5205.79"/>
<polygon fill="black" stroke="black" points="6113.23,-5209.22 6122.6,-5204.28 6112.19,-5202.3 6113.23,-5209.22"/>
</g>
<!-- config_utils.load_config -->
<g id="node130" class="node">
<title>config_utils.load_config</title>
<g id="a_node130"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10388,-4070.27 9955,-4070.27 9955,-4023.27 10388,-4023.27 10388,-4070.27"/>
<text text-anchor="middle" x="10171.5" y="-4038.27" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge190" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5759.67,-5292.95C6610.97,-5305.5 9786.39,-5347.92 9868,-5283.77 10066.86,-5127.46 10151.9,-4262.33 10167.72,-4080.37"/>
<polygon fill="black" stroke="black" points="10171.21,-4080.58 10168.58,-4070.32 10164.24,-4079.98 10171.21,-4080.58"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node131" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node131"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7823.5,-4239.77 7346.5,-4239.77 7346.5,-4199.77 7823.5,-4199.77 7823.5,-4239.77"/>
<text text-anchor="middle" x="7585" y="-4212.7" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge191" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5759.78,-5274.95C5821.32,-5259.85 5882.67,-5232.03 5922,-5181.77 5982.51,-5104.44 5888.74,-4368.38 5958,-4298.77 5999.03,-4257.54 6945.9,-4253.72 7004,-4250.77 7020,-4249.96 7024,-4249.65 7040,-4248.77 7136.81,-4243.5 7243.32,-4237.81 7336.24,-4232.86"/>
<polygon fill="black" stroke="black" points="7336.54,-4236.35 7346.34,-4232.33 7336.17,-4229.36 7336.54,-4236.35"/>
</g>
<!-- price_train._iter_lots -->
<g id="node132" class="node">
<title>price_train._iter_lots</title>
<g id="a_node132"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7740.5,-4297.27 7429.5,-4297.27 7429.5,-4258.27 7740.5,-4258.27 7740.5,-4297.27"/>
<text text-anchor="middle" x="7585" y="-4270.87" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge192" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7648.89,-4297.34C7761.73,-4328.13 7999,-4372.47 8130,-4248.77 8235.35,-4149.31 8064.67,-4028.33 8166,-3924.77 8264.69,-3823.92 8439.05,-3826.11 8550.43,-3840.39"/>
<polygon fill="black" stroke="black" points="8550.3,-3843.9 8560.68,-3841.76 8551.23,-3836.96 8550.3,-3843.9"/>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge193" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7740.52,-4291.75C7882.22,-4300.77 8077.74,-4302.34 8130,-4248.77 8228.19,-4148.12 8068.02,-3084.63 8166,-2983.77 8212.89,-2935.51 8388.94,-2936.3 8516.15,-2943.89"/>
<polygon fill="black" stroke="black" points="8516.17,-2947.39 8526.37,-2944.52 8516.61,-2940.41 8516.17,-2947.39"/>
</g>
<!-- price_train.main -->
<g id="node133" class="node">
<title>price_train.main</title>
<g id="a_node133"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6596,-4343.77 6366,-4343.77 6366,-4307.77 6596,-4307.77 6596,-4343.77"/>
<text text-anchor="middle" x="6481" y="-4319.61" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge194" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6596.12,-4315.32C6732.3,-4305.6 6948.61,-4299.85 7004,-4354.77 7048.51,-4398.91 7011.72,-4861.83 7040,-4917.77 7140.72,-5117.06 7371.03,-5263.03 7497.28,-5331.42"/>
<polygon fill="black" stroke="black" points="7495.72,-5334.56 7506.18,-5336.22 7499.04,-5328.4 7495.72,-5334.56"/>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge195" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6596.08,-4315.93C6731.66,-4306.92 6946.77,-4301.95 7004,-4354.77 7091.02,-4435.09 6950.79,-4540.9 7040,-4618.77 7222.48,-4778.06 7915.95,-4732.14 8130,-4618.77 8155.16,-4605.45 8141.31,-4579.97 8166,-4565.77 8274.57,-4503.35 8419.98,-4501.56 8523.77,-4511.26"/>
<polygon fill="black" stroke="black" points="8523.7,-4514.77 8534,-4512.27 8524.39,-4507.81 8523.7,-4514.77"/>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge197" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6596.1,-4328.65C6960.42,-4337.29 8075.23,-4359.24 8130,-4305.77 8208.85,-4228.81 8089.39,-3393.97 8166,-3314.77 8193,-3286.86 8263,-3274.55 8341.83,-3270.26"/>
<polygon fill="black" stroke="black" points="8342.18,-3273.75 8351.99,-3269.75 8341.83,-3266.76 8342.18,-3273.75"/>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge198" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6596.22,-4341.36C6706.41,-4351.1 6875.02,-4351.78 7004,-4288.77 7025.49,-4278.28 7018.42,-4259.08 7040,-4248.77 7166.64,-4188.28 7329.26,-4188.18 7443.59,-4198.77"/>
<polygon fill="black" stroke="black" points="7443.51,-4202.28 7453.81,-4199.76 7444.19,-4195.32 7443.51,-4202.28"/>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge196" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6596.04,-4320.81C6791.81,-4312.28 7192.56,-4294.82 7418.88,-4284.97"/>
<polygon fill="black" stroke="black" points="7419.35,-4288.45 7429.19,-4284.52 7419.05,-4281.46 7419.35,-4288.45"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge199" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9546.18,-2841.12C9605.03,-2893.11 9772.47,-3048.11 9868,-3208.77 10038.93,-3496.24 10136.92,-3895.93 10163.24,-4013.19"/>
<polygon fill="black" stroke="black" points="10159.84,-4014.02 10165.43,-4023.02 10166.67,-4012.5 10159.84,-4014.02"/>
</g>
<!-- telegram_bot._t -->
<g id="node135" class="node">
<title>telegram_bot._t</title>
<g id="a_node135"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5654.5,-5996.77 5446.5,-5996.77 5446.5,-5960.77 5654.5,-5960.77 5654.5,-5996.77"/>
<text text-anchor="middle" x="5550.5" y="-5972.9" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node136" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node136"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5701.5,-5942.77 5399.5,-5942.77 5399.5,-5906.77 5701.5,-5906.77 5701.5,-5942.77"/>
<text text-anchor="middle" x="5550.5" y="-5919.98" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node137" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node137"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6585,-5942.77 6377,-5942.77 6377,-5906.77 6585,-5906.77 6585,-5942.77"/>
<text text-anchor="middle" x="6481" y="-5921.07" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge211" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5701.71,-5924.77C5887.47,-5924.77 6199.5,-5924.77 6366.47,-5924.77"/>
<polygon fill="black" stroke="black" points="6366.77,-5928.27 6376.77,-5924.77 6366.77,-5921.27 6366.77,-5928.27"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node138" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node138"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5701.5,-4994.77 5399.5,-4994.77 5399.5,-4958.77 5701.5,-4958.77 5701.5,-4994.77"/>
<text text-anchor="middle" x="5550.5" y="-4971.47" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge212" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5701.77,-4977.69C6459.84,-4982.12 9829.73,-4999.74 9868,-4962.77 9905.95,-4926.12 9896.88,-4066.05 9904,-4013.77 9964.54,-3569.23 10122.79,-3043.29 10161.74,-2917.69"/>
<polygon fill="black" stroke="black" points="10165.11,-2918.65 10164.74,-2908.06 10158.42,-2916.57 10165.11,-2918.65"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node139" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node139"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="5694,-5172.77 5407,-5172.77 5407,-5136.77 5694,-5136.77 5694,-5172.77"/>
<text text-anchor="middle" x="5550.5" y="-5149.08" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge213" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5650.08,-5172.81C5732.14,-5186.93 5852.24,-5205.51 5958,-5213.77 6391.26,-5247.62 9582.67,-5442.57 9868,-5114.77 9908.18,-5068.61 9895.9,-4074.44 9904,-4013.77 9963.38,-3569.07 10122.49,-3043.25 10161.68,-2917.68"/>
<polygon fill="black" stroke="black" points="10165.05,-2918.64 10164.7,-2908.05 10158.37,-2916.55 10165.05,-2918.64"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node140" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6565,-5040.77 6397,-5040.77 6397,-5004.77 6565,-5004.77 6565,-5040.77"/>
<text text-anchor="middle" x="6481" y="-5019.53" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node141" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node141"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7731,-3265.77 7439,-3265.77 7439,-3229.77 7731,-3229.77 7731,-3265.77"/>
<text text-anchor="middle" x="7585" y="-3243.61" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge214" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7731.15,-3252.26C7887.21,-3257.08 8140.05,-3264.89 8341.64,-3271.12"/>
<polygon fill="black" stroke="black" points="8341.71,-3274.63 8351.81,-3271.44 8341.92,-3267.63 8341.71,-3274.63"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node142" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6642.5,-4120.77 6319.5,-4120.77 6319.5,-4084.77 6642.5,-4084.77 6642.5,-4120.77"/>
<text text-anchor="middle" x="6481" y="-4097.98" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge215" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6642.54,-4093.24C6754.03,-4086.7 6906.04,-4077.94 7040,-4070.77 7178.04,-4063.39 7335.82,-4055.64 7445.78,-4050.34"/>
<polygon fill="black" stroke="black" points="7446.11,-4053.83 7455.93,-4049.85 7445.78,-4046.84 7446.11,-4053.83"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node143" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5789,-5418.77 5312,-5418.77 5312,-5378.77 5789,-5378.77 5789,-5418.77"/>
<text text-anchor="middle" x="5550.5" y="-5391.7" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge216" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5629.39,-5378.75C5713.81,-5362.23 5846.56,-5352.21 5922,-5427.77 5996.01,-5501.91 5883.02,-5824.63 5958,-5897.77 6079.85,-6016.64 6303.41,-5975.8 6414.2,-5945.49"/>
<polygon fill="black" stroke="black" points="6415.22,-5948.83 6423.91,-5942.78 6413.34,-5942.09 6415.22,-5948.83"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge217" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5789.08,-5403.16C5839.77,-5392.36 5888.17,-5371 5922,-5331.77 6004.99,-5235.55 5874.26,-4284.34 5958,-4188.77 6055.95,-4076.98 6238.65,-4072.16 6359.82,-4083.74"/>
<polygon fill="black" stroke="black" points="6359.59,-4087.24 6369.89,-4084.75 6360.29,-4080.27 6359.59,-4087.24"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node144" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node144"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5826,-5488.77 5275,-5488.77 5275,-5436.77 5826,-5436.77 5826,-5488.77"/>
<text text-anchor="middle" x="5550.5" y="-5453.08" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge218" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5691.73,-5488.81C5769.83,-5494.73 5862.95,-5486.14 5922,-5427.77 5975.88,-5374.52 5902.63,-5140.48 5958,-5088.77 6043.01,-5009.4 6920.56,-5130.79 7004,-5049.77 7090.12,-4966.15 6957.36,-4597.85 7040,-4510.77 7101.5,-4445.97 7365.68,-4441.27 7501.96,-4443.36"/>
<polygon fill="black" stroke="black" points="7502.28,-4446.87 7512.34,-4443.54 7502.4,-4439.87 7502.28,-4446.87"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge219" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5575.45,-5488.93C5660.74,-5581.99 5945.26,-5891.85 5958,-5897.77 6088.25,-5958.37 6257.03,-5954.35 6366.87,-5942.45"/>
<polygon fill="black" stroke="black" points="6367.44,-5945.91 6376.98,-5941.32 6366.66,-5938.96 6367.44,-5945.91"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node145" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node145"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5063.5,-4994.77 4733.5,-4994.77 4733.5,-4958.77 5063.5,-4958.77 5063.5,-4994.77"/>
<text text-anchor="middle" x="4898.5" y="-4970.61" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge220" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5063.52,-4976.77C5163.33,-4976.77 5290.24,-4976.77 5389.34,-4976.77"/>
<polygon fill="black" stroke="black" points="5389.45,-4980.27 5399.45,-4976.77 5389.45,-4973.27 5389.45,-4980.27"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node146" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node146"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5010.5,-5968.77 4786.5,-5968.77 4786.5,-5932.77 5010.5,-5932.77 5010.5,-5968.77"/>
<text text-anchor="middle" x="4898.5" y="-5946.61" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge221" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5010.5,-5955.56C5129.23,-5960.67 5316.56,-5968.74 5436.18,-5973.89"/>
<polygon fill="black" stroke="black" points="5436.32,-5977.4 5446.46,-5974.34 5436.62,-5970.41 5436.32,-5977.4"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge222" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5010.5,-5946.33C5114.61,-5942.17 5271.47,-5935.9 5389.16,-5931.19"/>
<polygon fill="black" stroke="black" points="5389.5,-5934.68 5399.35,-5930.78 5389.22,-5927.68 5389.5,-5934.68"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node147" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node147"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5073,-5914.27 4724,-5914.27 4724,-5875.27 5073,-5875.27 5073,-5914.27"/>
<text text-anchor="middle" x="4898.5" y="-5887.87" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge223" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5073.09,-5903.69C5097.11,-5908.29 5121.05,-5914.76 5143,-5923.77 5161.75,-5931.48 5160.08,-5944.5 5179,-5951.77 5260.93,-5983.26 5360.47,-5988.9 5435.73,-5987.28"/>
<polygon fill="black" stroke="black" points="5436.28,-5990.76 5446.18,-5987 5436.09,-5983.76 5436.28,-5990.76"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge224" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5073.26,-5902.79C5171.51,-5907.33 5293.49,-5912.96 5389.4,-5917.39"/>
<polygon fill="black" stroke="black" points="5389.34,-5920.89 5399.49,-5917.85 5389.66,-5913.89 5389.34,-5920.89"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge225" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5073.22,-5892.88C5276.68,-5891.23 5623.87,-5890.13 5922,-5897.77 6076.23,-5901.73 6254.24,-5911.19 6366.93,-5917.79"/>
<polygon fill="black" stroke="black" points="6366.76,-5921.29 6376.95,-5918.38 6367.17,-5914.3 6366.76,-5921.29"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node148" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node148"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5113.5,-6028.27 4683.5,-6028.27 4683.5,-5987.27 5113.5,-5987.27 5113.5,-6028.27"/>
<text text-anchor="middle" x="4898.5" y="-6000.53" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge226" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5113.69,-5998.22C5221.25,-5993.42 5347.21,-5987.8 5435.98,-5983.84"/>
<polygon fill="black" stroke="black" points="5436.24,-5987.33 5446.07,-5983.39 5435.93,-5980.34 5436.24,-5987.33"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge227" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5113.54,-5987.72C5123.61,-5984.81 5133.48,-5981.51 5143,-5977.77 5161.37,-5970.56 5160.45,-5958.53 5179,-5951.77 5245.15,-5927.7 5322.24,-5919.24 5388.92,-5917.46"/>
<polygon fill="black" stroke="black" points="5389.18,-5920.96 5399.1,-5917.24 5389.03,-5913.96 5389.18,-5920.96"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge228" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5113.79,-6016.19C5320.9,-6022.24 5643.38,-6026.17 5922,-6005.77 6080.74,-5994.16 6262.93,-5964.62 6374.75,-5944.62"/>
<polygon fill="black" stroke="black" points="6375.45,-5948.05 6384.68,-5942.83 6374.22,-5941.16 6375.45,-5948.05"/>
</g>
<!-- telegram_bot.main -->
<g id="node149" class="node">
<title>telegram_bot.main</title>
<g id="a_node149"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5064,-5056.77 4733,-5056.77 4733,-5012.77 5064,-5012.77 5064,-5056.77"/>
<text text-anchor="middle" x="4898.5" y="-5026.45" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge229" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5064.27,-5019.26C5101.97,-5015.77 5141.87,-5012.11 5179,-5008.77 5247.96,-5002.59 5324.17,-4995.97 5389.44,-4990.37"/>
<polygon fill="black" stroke="black" points="5389.74,-4993.85 5399.41,-4989.51 5389.14,-4986.88 5389.74,-4993.85"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge230" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5018.72,-5056.78C5139.71,-5079.12 5325.35,-5113.39 5441.96,-5134.92"/>
<polygon fill="black" stroke="black" points="5441.51,-5138.4 5451.98,-5136.77 5442.78,-5131.51 5441.51,-5138.4"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge231" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5064.17,-5033.52C5394.2,-5031.02 6127.17,-5025.45 6386.7,-5023.48"/>
<polygon fill="black" stroke="black" points="6386.87,-5026.98 6396.85,-5023.41 6386.82,-5019.98 6386.87,-5026.98"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge232" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M5064.18,-5045.04C5094.18,-5038.96 5122.43,-5026.55 5143,-5003.77 5196.71,-4944.3 5128.15,-3623.71 5179,-3561.77 5340.68,-3364.83 6997.33,-3274.98 7040,-3271.77 7170.95,-3261.94 7319.97,-3255.71 7428.88,-3252.07"/>
<polygon fill="black" stroke="black" points="7429.09,-3255.56 7438.97,-3251.74 7428.86,-3248.57 7429.09,-3255.56"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge233" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M4931.78,-5056.96C4983.33,-5093.96 5084.39,-5173.08 5143,-5262.77 5169.3,-5303.02 5141.07,-5335.24 5179,-5364.77 5245.83,-5416.8 5341.39,-5424.45 5418.72,-5419.54"/>
<polygon fill="black" stroke="black" points="5419.29,-5423.01 5429.02,-5418.8 5418.8,-5416.02 5419.29,-5423.01"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge234" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M4934.4,-5057.04C4988.16,-5093.29 5090.52,-5170.37 5143,-5262.77 5180.07,-5328.04 5122.82,-5378 5179,-5427.77 5203.76,-5449.71 5233.44,-5464.28 5265.07,-5473.54"/>
<polygon fill="black" stroke="black" points="5264.38,-5476.98 5274.95,-5476.24 5266.23,-5470.23 5264.38,-5476.98"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node150" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node150"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8757,-4363.77 8553,-4363.77 8553,-4327.77 8757,-4327.77 8757,-4363.77"/>
<text text-anchor="middle" x="8655" y="-4342.07" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._more_user_path -->
<g id="node151" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node151"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8770,-4455.77 8540,-4455.77 8540,-4419.77 8770,-4419.77 8770,-4455.77"/>
<text text-anchor="middle" x="8655" y="-4434.07" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar -->
<g id="node152" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node152"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7733,-4555.77 7437,-4555.77 7437,-4519.77 7733,-4519.77 7733,-4555.77"/>
<text text-anchor="middle" x="7585" y="-4532.47" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge239" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7733.05,-4546.58C7872.37,-4551.88 8069.1,-4550.52 8130,-4505.77 8166.39,-4479.04 8128.84,-4436.43 8166,-4410.77 8255.42,-4349.03 9036.18,-4397.2 9144,-4410.77 9257.67,-4425.09 9386.08,-4462.65 9460.47,-4486.61"/>
<polygon fill="black" stroke="black" points="9459.56,-4490 9470.15,-4489.75 9461.72,-4483.34 9459.56,-4490"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge238" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7733.32,-4540.77C7875.91,-4540.19 8077.93,-4528.99 8130,-4472.77 8194.16,-4403.51 8102.31,-3693.48 8166,-3623.77 8266.78,-3513.49 8457.44,-3523.5 8568.26,-3540.95"/>
<polygon fill="black" stroke="black" points="8567.97,-3544.45 8578.4,-3542.61 8569.09,-3537.54 8567.97,-3544.45"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge240" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7733.25,-4547.67C7873.28,-4553.87 8071.04,-4553.23 8130,-4505.77 8176.04,-4468.72 8120.09,-4414.98 8166,-4377.77 8221.79,-4332.56 8416.95,-4333.13 8542.91,-4338.72"/>
<polygon fill="black" stroke="black" points="8542.84,-4342.22 8552.99,-4339.18 8543.16,-4335.22 8542.84,-4342.22"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node153" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node153"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7752.5,-4609.77 7417.5,-4609.77 7417.5,-4573.77 7752.5,-4573.77 7752.5,-4609.77"/>
<text text-anchor="middle" x="7585" y="-4586.47" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge242" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7752.68,-4600.56C7888.95,-4604.66 8068.73,-4602.1 8130,-4564.77 8157.21,-4548.2 8138.39,-4518.67 8166,-4502.77 8260.18,-4448.56 9035.34,-4502.06 9144,-4502.77 9237.36,-4503.39 9343.65,-4504.86 9419.86,-4506.05"/>
<polygon fill="black" stroke="black" points="9419.89,-4509.55 9429.94,-4506.2 9420,-4502.55 9419.89,-4509.55"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge241" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7752.57,-4607.03C7892.95,-4615.81 8078.89,-4616.47 8130,-4564.77 8203.56,-4490.37 8095.58,-3701.16 8166,-3623.77 8266.55,-3513.28 8457.3,-3523.37 8568.19,-3540.89"/>
<polygon fill="black" stroke="black" points="8567.91,-3544.39 8578.34,-3542.55 8569.04,-3537.48 8567.91,-3544.39"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge243" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7752.61,-4602.92C7890.11,-4608.66 8071.75,-4607.16 8130,-4564.77 8166.51,-4538.21 8129.7,-4496.63 8166,-4469.77 8221.65,-4428.59 8404.44,-4426.9 8529.8,-4431.09"/>
<polygon fill="black" stroke="black" points="8529.74,-4434.59 8539.85,-4431.44 8529.98,-4427.59 8529.74,-4434.59"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node154" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node154"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9765,-4823.77 9283,-4823.77 9283,-4783.77 9765,-4783.77 9765,-4823.77"/>
<text text-anchor="middle" x="9524" y="-4796.7" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node155" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node155"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7724,-4181.77 7446,-4181.77 7446,-4145.77 7724,-4145.77 7724,-4181.77"/>
<text text-anchor="middle" x="7585" y="-4158.99" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node156" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node156"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="9117,-4851.27 8193,-4851.27 8193,-4776.27 9117,-4776.27 9117,-4851.27"/>
<text text-anchor="middle" x="8655" y="-4798.44" font-family="Times,serif" font-size="61.04">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge244" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M9117.11,-4808.46C9170.67,-4807.84 9223.67,-4807.23 9272.82,-4806.66"/>
<polygon fill="black" stroke="black" points="9272.96,-4810.16 9282.92,-4806.54 9272.88,-4803.16 9272.96,-4810.16"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node157" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node157"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9868,-4899.27 9180,-4899.27 9180,-4842.27 9868,-4842.27 9868,-4899.27"/>
<text text-anchor="middle" x="9524" y="-4859.43" font-family="Times,serif" font-size="44.80">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- chop.has_misc_deal -->
<g id="node158" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node158"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="9638,-4015.77 9410,-4015.77 9410,-3979.77 9638,-3979.77 9638,-4015.77"/>
<text text-anchor="middle" x="9524" y="-3992.47" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node159" class="node">
<title>chop.process_message</title>
<g id="a_node159"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6982,-3007.77 5980,-3007.77 5980,-2905.77 6982,-2905.77 6982,-3007.77"/>
<text text-anchor="middle" x="6481" y="-2935.45" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge245" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6744.23,-3007.84C6842.23,-3040.82 6944.17,-3094.78 7004,-3182.77 7074.19,-3286.01 6956.56,-4212.91 7040,-4305.77 7129.97,-4405.9 7286.12,-4418.72 7408.11,-4410.06"/>
<polygon fill="black" stroke="black" points="7408.61,-4413.54 7418.31,-4409.28 7408.08,-4406.56 7408.61,-4413.54"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge251" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6635.24,-2905.68C6758.79,-2855.53 6924.57,-2765.93 7004,-2625.77 7042.66,-2557.55 6984.94,-1270.61 7040,-1214.77 7082.55,-1171.62 8069.45,-1174.24 8130,-1171.77 8283.86,-1165.51 8463.12,-1157.92 8567.07,-1153.49"/>
<polygon fill="black" stroke="black" points="8567.36,-1156.98 8577.2,-1153.06 8567.06,-1149.99 8567.36,-1156.98"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge247" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6739.2,-3007.82C6837.98,-3040.88 6941.84,-3094.89 7004,-3182.77 7071.02,-3277.52 6957.67,-3621.98 7040,-3703.77 7067.03,-3730.63 8209.07,-3784.58 8555.44,-3800.35"/>
<polygon fill="black" stroke="black" points="8555.3,-3803.85 8565.45,-3800.8 8555.62,-3796.85 8555.3,-3803.85"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge246" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6727.88,-2905.72C6824.74,-2887.44 6937.2,-2868.49 7040,-2856.77 7189.19,-2839.77 7362.6,-2833.48 7472.79,-2831.14"/>
<polygon fill="black" stroke="black" points="7473,-2834.64 7482.92,-2830.94 7472.85,-2827.64 7473,-2834.64"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge248" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6696.92,-3007.82C6800.04,-3029.78 6925.73,-3052.88 7040,-3063.77 7571.19,-3114.41 8205.2,-3090.27 8495.13,-3074.58"/>
<polygon fill="black" stroke="black" points="8495.5,-3078.06 8505.3,-3074.02 8495.12,-3071.07 8495.5,-3078.06"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge250" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6630.57,-2905.68C6753.19,-2855.06 6920.18,-2764.76 7004,-2625.77 7055.92,-2539.68 6968.62,-2245.58 7040,-2174.77 7126.21,-2089.27 8010.24,-2116.76 8130,-2096.77 8267.51,-2073.82 8421.32,-2030.9 8526.53,-1998.79"/>
<polygon fill="black" stroke="black" points="8527.71,-2002.09 8536.24,-1995.82 8525.66,-1995.4 8527.71,-2002.09"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge252" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6629.12,-2905.76C6740.43,-2869.72 6897.89,-2824.18 7040,-2802.77 7558.89,-2724.61 8181.88,-2735.09 8479.31,-2746.37"/>
<polygon fill="black" stroke="black" points="8479.19,-2749.87 8489.32,-2746.76 8479.46,-2742.88 8479.19,-2749.87"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge249" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6647.4,-3007.78C6757.47,-3039.13 6905.94,-3076.5 7040,-3093.77 7589.52,-3164.57 8252.91,-3140.93 8526.53,-3126.49"/>
<polygon fill="black" stroke="black" points="8527.09,-3129.96 8536.89,-3125.94 8526.72,-3122.97 8527.09,-3129.96"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge254" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6635.76,-2905.67C6759.39,-2855.57 6925.03,-2766.04 7004,-2625.77 7053.48,-2537.89 6969.57,-882.97 7040,-810.77 7089.55,-759.99 8069.34,-744.5 8477.69,-740.24"/>
<polygon fill="black" stroke="black" points="8477.86,-743.74 8487.83,-740.14 8477.79,-736.74 8477.86,-743.74"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge253" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6742.15,-3007.87C6840.46,-3040.89 6943.18,-3094.86 7004,-3182.77 7051.21,-3251.02 6981.21,-3870.21 7040,-3928.77 7124.3,-4012.75 8909.31,-4003.21 9399.45,-3998.99"/>
<polygon fill="black" stroke="black" points="9399.77,-4002.48 9409.74,-3998.9 9399.71,-3995.49 9399.77,-4002.48"/>
</g>
<!-- chop.main -->
<g id="node160" class="node">
<title>chop.main</title>
<g id="a_node160"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5626,-2974.77 5475,-2974.77 5475,-2938.77 5626,-2938.77 5626,-2974.77"/>
<text text-anchor="middle" x="5550.5" y="-2950.61" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge255" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5626.3,-2956.77C5704.52,-2956.77 5834.52,-2956.77 5969.78,-2956.77"/>
<polygon fill="black" stroke="black" points="5969.95,-2960.27 5979.95,-2956.77 5969.95,-2953.27 5969.95,-2960.27"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node161" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node161"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="10315.5,-760.77 10027.5,-760.77 10027.5,-724.77 10315.5,-724.77 10315.5,-760.77"/>
<text text-anchor="middle" x="10171.5" y="-737.99" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge257" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9819.42,-703.46C9895.64,-700.27 9973.99,-696.99 10037.28,-694.35"/>
<polygon fill="black" stroke="black" points="10037.46,-697.84 10047.3,-693.93 10037.16,-690.85 10037.46,-697.84"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge256" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9819.42,-728.09C9887.78,-730.95 9957.86,-733.88 10017.24,-736.36"/>
<polygon fill="black" stroke="black" points="10017.3,-739.87 10027.44,-736.79 10017.59,-732.88 10017.3,-739.87"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node164" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node164"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7845.5,-1809.27 7324.5,-1809.27 7324.5,-1762.27 7845.5,-1762.27 7845.5,-1809.27"/>
<text text-anchor="middle" x="7585" y="-1777.27" font-family="Times,serif" font-size="35.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge261" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7845.56,-1772.06C7949.84,-1781.25 8061.39,-1812.62 8130,-1894.77 8198.99,-1977.38 8091.38,-3754.21 8166,-3831.77 8215.48,-3883.21 8410.59,-3879.14 8538.62,-3870.3"/>
<polygon fill="black" stroke="black" points="8539.14,-3873.78 8548.87,-3869.58 8538.64,-3866.79 8539.14,-3873.78"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge263" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7845.53,-1774.75C7963.9,-1775.42 8087.15,-1786.03 8130,-1823.77 8191.55,-1877.99 8118.6,-1937.84 8166,-2004.77 8270.13,-2151.8 8474.71,-2236.3 8582.95,-2272.53"/>
<polygon fill="black" stroke="black" points="8581.89,-2275.87 8592.48,-2275.68 8584.09,-2269.22 8581.89,-2275.87"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge262" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7845.6,-1778.89C7962.14,-1780.77 8083.75,-1791.21 8130,-1823.77 8162.55,-1846.69 8133.88,-1882.27 8166,-1905.77 8223.38,-1947.76 8295.21,-1967.89 8365.97,-1975.97"/>
<polygon fill="black" stroke="black" points="8365.63,-1979.45 8375.94,-1977.03 8366.37,-1972.49 8365.63,-1979.45"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge264" class="edge">
<title>moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7845.54,-1802.17C7965.38,-1803.54 8089.95,-1794.01 8130,-1752.77 8218.91,-1661.23 8085.9,-704.12 8166,-604.77 8240.02,-512.97 8371.73,-484.07 8479.67,-477.26"/>
<polygon fill="black" stroke="black" points="8479.93,-480.75 8489.71,-476.69 8479.53,-473.76 8479.93,-480.75"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge265" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7845.84,-1801.74C7965.34,-1802.95 8089.51,-1793.41 8130,-1752.77 8179.49,-1703.11 8133.59,-1184.95 8166,-1122.77 8263.75,-935.29 8498.15,-809.69 8602.45,-761.2"/>
<polygon fill="black" stroke="black" points="8604.2,-764.24 8611.83,-756.88 8601.28,-757.88 8604.2,-764.24"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge266" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7845.8,-1774.53C7948.84,-1784.42 8059.37,-1815.64 8130,-1894.77 8193.26,-1965.65 8116.18,-2239.88 8166,-2320.77 8261.67,-2476.14 8470.85,-2562.89 8581.71,-2599.59"/>
<polygon fill="black" stroke="black" points="8580.88,-2603 8591.47,-2602.77 8583.05,-2596.34 8580.88,-2603"/>
</g>
<!-- similar._iter_lots -->
<g id="node165" class="node">
<title>similar._iter_lots</title>
<g id="a_node165"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7739,-2679.27 7431,-2679.27 7431,-2632.27 7739,-2632.27 7739,-2679.27"/>
<text text-anchor="middle" x="7585" y="-2647.27" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge267" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7739.12,-2651.28C7865.39,-2656.72 8038.16,-2687.07 8130,-2802.77 8201.13,-2892.38 8086.01,-3749.98 8166,-3831.77 8215.86,-3882.76 8410.6,-3878.87 8538.49,-3870.18"/>
<polygon fill="black" stroke="black" points="8538.99,-3873.65 8548.73,-3869.46 8538.51,-3866.67 8538.99,-3873.65"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge270" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7739.01,-2670.83C7851.03,-2676.13 8004.7,-2671.28 8130,-2622.77 8149.16,-2615.36 8149.21,-2605.62 8166,-2593.77 8325.33,-2481.31 8526.92,-2365.1 8612.53,-2316.89"/>
<polygon fill="black" stroke="black" points="8614.41,-2319.84 8621.41,-2311.89 8610.98,-2313.74 8614.41,-2319.84"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge268" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7739.03,-2646.83C7860.51,-2648.33 8026.59,-2670.93 8130,-2769.77 8176.44,-2814.17 8117.13,-2868.06 8166,-2909.77 8217.09,-2953.38 8390.71,-2960.7 8516.33,-2959.9"/>
<polygon fill="black" stroke="black" points="8516.46,-2963.4 8526.43,-2959.82 8516.4,-2956.4 8516.46,-2963.4"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge269" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7739.09,-2667.67C7880.27,-2674.99 8075.92,-2674.72 8130,-2622.77 8187.34,-2567.69 8124.2,-2334.41 8166,-2266.77 8249.32,-2131.95 8415.78,-2045.82 8530.95,-1999.65"/>
<polygon fill="black" stroke="black" points="8532.53,-2002.79 8540.54,-1995.85 8529.96,-1996.28 8532.53,-2002.79"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge271" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7739.3,-2668.51C7881.2,-2676.54 8077.87,-2676.84 8130,-2622.77 8187.85,-2562.76 8128.69,-1197.32 8166,-1122.77 8260.61,-933.74 8496.59,-809 8601.86,-760.97"/>
<polygon fill="black" stroke="black" points="8603.36,-764.13 8611.03,-756.83 8600.48,-757.75 8603.36,-764.13"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge272" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7739.02,-2650.76C7943.92,-2644.04 8304.98,-2632.21 8506.85,-2625.6"/>
<polygon fill="black" stroke="black" points="8507.06,-2629.09 8516.94,-2625.27 8506.83,-2622.1 8507.06,-2629.09"/>
</g>
<!-- similar.main -->
<g id="node166" class="node">
<title>similar.main</title>
<g id="a_node166"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6591.5,-4241.77 6370.5,-4241.77 6370.5,-4197.77 6591.5,-4197.77 6591.5,-4241.77"/>
<text text-anchor="middle" x="6481" y="-4211.45" font-family="Times,serif" font-size="32.90">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge273" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6591.71,-4236.18C6712,-4247.29 6901.53,-4243.24 7004,-4129.77 7081.78,-4043.65 6959.4,-3692.27 7040,-3608.77 7209.15,-3433.56 7949.95,-3658.78 8130,-3494.77 8190.31,-3439.84 8104.74,-3368.66 8166,-3314.77 8194.82,-3289.42 8264.12,-3277.74 8341.72,-3273.22"/>
<polygon fill="black" stroke="black" points="8341.92,-3276.72 8351.72,-3272.68 8341.55,-3269.73 8341.92,-3276.72"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge274" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6591.75,-4200.56C6704.02,-4181.59 6883.66,-4153.11 7040,-4136.77 7132.97,-4127.06 7235.21,-4119.93 7325.71,-4114.83"/>
<polygon fill="black" stroke="black" points="7326.04,-4118.32 7335.83,-4114.27 7325.65,-4111.33 7326.04,-4118.32"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge279" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6591.69,-4219.77C6764.02,-4219.77 7102.56,-4219.77 7335.92,-4219.77"/>
<polygon fill="black" stroke="black" points="7336.26,-4223.27 7346.26,-4219.77 7336.25,-4216.27 7336.26,-4223.27"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge275" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6591.73,-4202.56C6710.01,-4190.77 6895.81,-4192.94 7004,-4298.77 7070.75,-4364.07 6970.33,-4443.59 7040,-4505.77 7095.27,-4555.11 7286.52,-4556.05 7426.69,-4549.36"/>
<polygon fill="black" stroke="black" points="7426.87,-4552.85 7436.69,-4548.86 7426.53,-4545.86 7426.87,-4552.85"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge276" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6591.69,-4201.88C6710.59,-4189.33 6897.58,-4190.67 7004,-4298.77 7087.69,-4383.79 6952.14,-4484.07 7040,-4564.77 7170.94,-4685.04 7402.99,-4643.21 7516.99,-4612.52"/>
<polygon fill="black" stroke="black" points="7517.94,-4615.89 7526.65,-4609.86 7516.08,-4609.14 7517.94,-4615.89"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge277" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6591.58,-4214C6704.09,-4208.1 6884.26,-4198.69 7040,-4190.77 7173.94,-4183.97 7326.43,-4176.42 7435.82,-4171.04"/>
<polygon fill="black" stroke="black" points="7436.12,-4174.53 7445.93,-4170.54 7435.77,-4167.53 7436.12,-4174.53"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge278" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6591.55,-4201.32C6711.01,-4188.1 6899.14,-4188.69 7004,-4298.77 7058.39,-4355.87 6984.2,-4596.06 7040,-4651.77 7195.92,-4807.45 7764.26,-4833.34 8182.58,-4829.94"/>
<polygon fill="black" stroke="black" points="8182.77,-4833.44 8192.74,-4829.85 8182.71,-4826.44 8182.77,-4833.44"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge280" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6591.75,-4200.91C6711.62,-4187.25 6900.33,-4187.41 7004,-4298.77 7073.41,-4373.34 6968.45,-4683.26 7040,-4755.77 7186.02,-4903.77 8519.23,-4894.12 9169.52,-4880.3"/>
<polygon fill="black" stroke="black" points="9170.07,-4883.79 9179.99,-4880.08 9169.92,-4876.79 9170.07,-4883.79"/>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge281" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6591.5,-4236.86C6712.54,-4248.8 6903.63,-4245.71 7004,-4129.77 7100.55,-4018.26 6948.75,-2918.66 7040,-2802.77 7129.05,-2689.68 7295.45,-2658.03 7420.86,-2651.56"/>
<polygon fill="black" stroke="black" points="7421.13,-2655.05 7430.96,-2651.09 7420.81,-2648.06 7421.13,-2655.05"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node167" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node167"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7734.5,-1129.77 7435.5,-1129.77 7435.5,-1093.77 7734.5,-1093.77 7734.5,-1129.77"/>
<text text-anchor="middle" x="7585" y="-1105.9" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node168" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node168"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8876,-649.77 8434,-649.77 8434,-613.77 8876,-613.77 8876,-649.77"/>
<text text-anchor="middle" x="8655" y="-626.18" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node169" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node169"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7839,-3661.27 7331,-3661.27 7331,-3618.27 7839,-3618.27 7839,-3661.27"/>
<text text-anchor="middle" x="7585" y="-3631.63" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge283" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7839.01,-3632.12C8276.44,-3618.72 9129.12,-3591.89 9144,-3585.77 9314.79,-3515.54 9456.32,-3331.41 9504.93,-3262.4"/>
<polygon fill="black" stroke="black" points="9507.8,-3264.4 9510.65,-3254.2 9502.06,-3260.4 9507.8,-3264.4"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge282" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7839.2,-3637.73C7931.5,-3633.14 8036.2,-3623.41 8130,-3603.77 8146.65,-3600.29 8149.35,-3594.25 8166,-3590.77 8304.66,-3561.8 8469.87,-3557 8568.12,-3557.17"/>
<polygon fill="black" stroke="black" points="8568.28,-3560.67 8578.29,-3557.21 8568.3,-3553.67 8568.28,-3560.67"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node170" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node170"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9750,-1103.77 9298,-1103.77 9298,-1059.77 9750,-1059.77 9750,-1103.77"/>
<text text-anchor="middle" x="9524" y="-1073.45" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge284" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9686.82,-1103.85C9752.14,-1120.91 9822.65,-1151.16 9868,-1204.77 10092.87,-1470.64 10159.52,-2661.49 10169.2,-2861.29"/>
<polygon fill="black" stroke="black" points="10165.71,-2861.72 10169.69,-2871.54 10172.71,-2861.39 10165.71,-2861.72"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node171" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node171"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7832,-2539.27 7338,-2539.27 7338,-2490.27 7832,-2490.27 7832,-2539.27"/>
<text text-anchor="middle" x="7585" y="-2505.59" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge287" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7832.22,-2505.54C8344.05,-2489.67 9505.37,-2471.84 9868,-2619.77 9997.57,-2672.63 10108.32,-2806.21 10151.35,-2863.27"/>
<polygon fill="black" stroke="black" points="10148.65,-2865.51 10157.43,-2871.43 10154.26,-2861.32 10148.65,-2865.51"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge286" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7832.27,-2510.81C7926.2,-2505.73 8033.78,-2495.57 8130,-2475.77 8310.16,-2438.7 8513.16,-2355.65 8604.64,-2315.85"/>
<polygon fill="black" stroke="black" points="8606.17,-2319 8613.93,-2311.79 8603.37,-2312.59 8606.17,-2319"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge290" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7711.78,-2539.29C7837.64,-2555.72 8026.94,-2556.85 8130,-2442.77 8218.68,-2344.62 8081.13,-1354.25 8166,-1252.77 8263.1,-1136.68 8455.11,-1131.1 8567.15,-1139.24"/>
<polygon fill="black" stroke="black" points="8567.16,-1142.76 8577.41,-1140.04 8567.71,-1135.78 8567.16,-1142.76"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge288" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7832.3,-2499.99C7955.23,-2498.3 8086.82,-2507.03 8130,-2547.77 8228.32,-2640.54 8068.57,-2756.08 8166,-2849.77 8323.15,-3000.9 8941.61,-2846.7 9144,-2927.77 9303.69,-2991.74 9448.32,-3147.78 9501.45,-3209.77"/>
<polygon fill="black" stroke="black" points="9498.91,-3212.18 9508.05,-3217.53 9504.24,-3207.64 9498.91,-3212.18"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge285" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7832.16,-2498.66C7955.92,-2496.46 8088.36,-2505.12 8130,-2547.77 8206.28,-2625.9 8089.68,-3451.7 8166,-3529.77 8219.88,-3584.9 8442.99,-3576.39 8568.04,-3566.81"/>
<polygon fill="black" stroke="black" points="8568.66,-3570.27 8578.35,-3566 8568.11,-3563.29 8568.66,-3570.27"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge291" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7832.2,-2504C7953.17,-2503.71 8082.91,-2512.5 8130,-2547.77 8167.81,-2576.09 8130.5,-2616.61 8166,-2647.77 8251.23,-2722.61 8376.73,-2748.91 8479.11,-2756.73"/>
<polygon fill="black" stroke="black" points="8479.03,-2760.24 8489.26,-2757.46 8479.53,-2753.26 8479.03,-2760.24"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge289" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7714.81,-2539.29C7840.26,-2554.91 8026.71,-2554.7 8130,-2442.77 8182.82,-2385.54 8116.73,-1803.09 8166,-1742.77 8449.98,-1395.16 8720.12,-1638.43 9144,-1490.77 9160.53,-1485.01 9163.27,-1479.95 9180,-1474.77 9257.87,-1450.69 9348.7,-1434.51 9417.32,-1424.59"/>
<polygon fill="black" stroke="black" points="9417.87,-1428.05 9427.28,-1423.17 9416.89,-1421.12 9417.87,-1428.05"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node172" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node172"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7800.5,-1493.77 7369.5,-1493.77 7369.5,-1449.77 7800.5,-1449.77 7800.5,-1493.77"/>
<text text-anchor="middle" x="7585" y="-1463.45" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge293" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7800.57,-1472.04C7932.67,-1477.14 8085.07,-1493.6 8130,-1540.77 8201.33,-1615.66 8111.35,-1916.97 8166,-2004.77 8260.04,-2155.85 8464.53,-2237.66 8576.64,-2272.7"/>
<polygon fill="black" stroke="black" points="8575.61,-2276.04 8586.2,-2275.64 8577.68,-2269.35 8575.61,-2276.04"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge294" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7800.61,-1454.97C7931.78,-1449.77 8083.09,-1454.54 8130,-1498.77 8183.83,-1549.53 8111.9,-1779.31 8166,-1829.77 8245.52,-1903.95 9067.19,-1790.79 9144,-1867.77 9221.12,-1945.06 9139.34,-2748.44 9180,-2849.77 9246.4,-3015.27 9416.7,-3156.63 9489.34,-3211.44"/>
<polygon fill="black" stroke="black" points="9487.6,-3214.51 9497.71,-3217.69 9491.79,-3208.9 9487.6,-3214.51"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge292" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7800.76,-1471.17C7933.43,-1475.86 8086.41,-1492.19 8130,-1540.77 8203.81,-1623.03 8089.48,-3450.03 8166,-3529.77 8219.37,-3585.39 8442.69,-3576.68 8567.91,-3566.93"/>
<polygon fill="black" stroke="black" points="8568.55,-3570.39 8578.24,-3566.11 8567.99,-3563.42 8568.55,-3570.39"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge295" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7800.55,-1479.55C8101.28,-1488.43 8665.08,-1497.71 9144,-1463.77 9236.73,-1457.2 9341.35,-1442.27 9417.14,-1430.09"/>
<polygon fill="black" stroke="black" points="9417.86,-1433.52 9427.18,-1428.47 9416.75,-1426.61 9417.86,-1433.52"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge296" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7800.78,-1462.95C8101.5,-1449.78 8664.95,-1422.13 9144,-1381.77 9237.75,-1373.88 9344.22,-1361.8 9420.39,-1352.63"/>
<polygon fill="black" stroke="black" points="9420.95,-1356.08 9430.46,-1351.41 9420.11,-1349.13 9420.95,-1356.08"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node173" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node173"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9796.5,-1529.27 9251.5,-1529.27 9251.5,-1484.27 9796.5,-1484.27 9796.5,-1529.27"/>
<text text-anchor="middle" x="9524" y="-1498.39" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge297" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9796.56,-1489.63C9823.74,-1477.84 9848.46,-1461.4 9868,-1438.77 9920.58,-1377.9 9848.6,-774.09 9904,-715.77 9945.02,-672.6 10011.69,-665.86 10068.08,-669.91"/>
<polygon fill="black" stroke="black" points="10067.86,-673.41 10078.12,-670.75 10068.45,-666.43 10067.86,-673.41"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node174" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node174"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9678,-1619.77 9370,-1619.77 9370,-1583.77 9678,-1583.77 9678,-1619.77"/>
<text text-anchor="middle" x="9524" y="-1596.18" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node175" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node175"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="8031.5,-1611.77 7138.5,-1611.77 7138.5,-1549.77 8031.5,-1549.77 8031.5,-1611.77"/>
<text text-anchor="middle" x="7585" y="-1568.57" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge300" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M8003.03,-1611.85C8051.01,-1631.14 8095.14,-1658.48 8130,-1696.77 8222.78,-1798.69 8090.91,-1889.21 8166,-2004.77 8263.39,-2154.65 8468.02,-2237.28 8578.85,-2272.68"/>
<polygon fill="black" stroke="black" points="8578.03,-2276.09 8588.62,-2275.76 8580.13,-2269.41 8578.03,-2276.09"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge301" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7720.79,-1549.74C7843.71,-1530.1 8022.11,-1524.7 8130,-1625.77 8209.35,-1700.12 8085.23,-1794.97 8166,-1867.77 8246.8,-1940.6 9067.3,-1833.65 9144,-1910.77 9217.62,-1984.81 9141.04,-2752.91 9180,-2849.77 9246.54,-3015.22 9416.76,-3156.6 9489.37,-3211.43"/>
<polygon fill="black" stroke="black" points="9487.62,-3214.5 9497.72,-3217.69 9491.81,-3208.89 9487.62,-3214.5"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge298" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M8013.84,-1611.88C8058.39,-1631.48 8098.72,-1658.89 8130,-1696.77 8194.85,-1775.32 8095.42,-3456.34 8166,-3529.77 8219.41,-3585.35 8442.71,-3576.66 8567.93,-3566.92"/>
<polygon fill="black" stroke="black" points="8568.56,-3570.38 8578.25,-3566.1 8568,-3563.41 8568.56,-3570.38"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge299" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7718.3,-1549.74C7841.63,-1529.36 8022.26,-1522.82 8130,-1625.77 8220.71,-1712.46 8076.32,-1818.02 8166,-1905.77 8218.85,-1957.49 8291.96,-1980.12 8365.52,-1987.44"/>
<polygon fill="black" stroke="black" points="8365.62,-1990.96 8375.9,-1988.37 8366.25,-1983.99 8365.62,-1990.96"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge302" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M8031.6,-1563.75C8404.02,-1549.52 8923.77,-1529.67 9241.08,-1517.54"/>
<polygon fill="black" stroke="black" points="9241.49,-1521.03 9251.35,-1517.15 9241.22,-1514.04 9241.49,-1521.03"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge303" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M8031.6,-1585.61C8455.27,-1590.2 9069.59,-1596.86 9359.66,-1600"/>
<polygon fill="black" stroke="black" points="9359.81,-1603.51 9369.84,-1600.11 9359.88,-1596.51 9359.81,-1603.51"/>
</g>
<!-- debug_dump.main -->
<g id="node176" class="node">
<title>debug_dump.main</title>
<g id="a_node176"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6721,-1414.27 6241,-1414.27 6241,-1351.27 6721,-1351.27 6721,-1414.27"/>
<text text-anchor="middle" x="6481" y="-1370.63" font-family="Times,serif" font-size="49.56">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge304" class="edge">
<title>debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6721.12,-1364.57C6824.54,-1343.67 6937.01,-1300.75 7004,-1213.77 7048.48,-1156.03 6988.26,-610.11 7040,-558.77 7090.45,-508.72 8072.69,-490.29 8479.67,-484.78"/>
<polygon fill="black" stroke="black" points="8479.82,-488.28 8489.77,-484.64 8479.72,-481.28 8479.82,-488.28"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge305" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6701.45,-1351.24C6802.75,-1327.45 6919.08,-1285.95 7004,-1213.77 7030.66,-1191.12 7010.68,-1162.87 7040,-1143.77 7101.39,-1103.79 7287.6,-1100.48 7425.14,-1104.09"/>
<polygon fill="black" stroke="black" points="7425.28,-1107.6 7435.37,-1104.38 7425.47,-1100.6 7425.28,-1107.6"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge306" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6721.04,-1364.18C6824.29,-1343.19 6936.63,-1300.31 7004,-1213.77 7079.24,-1117.13 6951.44,-748.39 7040,-663.77 7089.1,-616.86 7989.28,-622.65 8423.48,-628.22"/>
<polygon fill="black" stroke="black" points="8423.6,-631.72 8433.65,-628.35 8423.69,-624.72 8423.6,-631.72"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge307" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6607.35,-1414.35C6732.33,-1453.2 6917.74,-1532.49 7004,-1676.77 7055.84,-1763.48 6977.66,-3415.28 7040,-3494.77 7106.54,-3579.62 7216.75,-3618.27 7320.64,-3634.78"/>
<polygon fill="black" stroke="black" points="7320.26,-3638.26 7330.67,-3636.31 7321.31,-3631.34 7320.26,-3638.26"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge308" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6721.22,-1355.65C6820.73,-1332.8 6930.04,-1290.83 7004,-1213.77 7045.22,-1170.83 6992.61,-1120.79 7040,-1084.77 7215.89,-951.08 8702.46,-1029.59 9287.66,-1066.17"/>
<polygon fill="black" stroke="black" points="9287.71,-1069.68 9297.91,-1066.81 9288.15,-1062.7 9287.71,-1069.68"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge309" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6604.83,-1414.29C6729.17,-1453.34 6915.38,-1533.01 7004,-1676.77 7048.71,-1749.31 6982.35,-2380.03 7040,-2442.77 7140.49,-2552.15 7320.34,-2555.01 7445.62,-2540.52"/>
<polygon fill="black" stroke="black" points="7446.17,-2543.98 7455.68,-2539.31 7445.33,-2537.03 7446.17,-2543.98"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge310" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6721.09,-1409.48C6819.75,-1419.9 6935.29,-1431.35 7040,-1439.77 7144.85,-1448.21 7261.23,-1455.35 7359.36,-1460.74"/>
<polygon fill="black" stroke="black" points="7359.23,-1464.23 7369.4,-1461.29 7359.61,-1457.25 7359.23,-1464.23"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge311" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6576.06,-1414.32C6686,-1449.84 6874.07,-1506.42 7040,-1535.77 7068.61,-1540.84 7098.17,-1545.33 7128.04,-1549.32"/>
<polygon fill="black" stroke="black" points="7127.81,-1552.82 7138.18,-1550.65 7128.73,-1545.88 7127.81,-1552.82"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node177" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node177"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8805.5,-259.77 8504.5,-259.77 8504.5,-223.77 8805.5,-223.77 8805.5,-259.77"/>
<text text-anchor="middle" x="8655" y="-237.73" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node178" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6717.5,-780.27 6244.5,-780.27 6244.5,-727.27 6717.5,-727.27 6717.5,-780.27"/>
<text text-anchor="middle" x="6481" y="-743.57" font-family="Times,serif" font-size="40.88">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge315" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6717.81,-754.98C7141.37,-758.17 7999.2,-769.68 8130,-810.77 8343.93,-877.98 8554.43,-1058.08 8627.23,-1124.62"/>
<polygon fill="black" stroke="black" points="8624.9,-1127.23 8634.63,-1131.43 8629.64,-1122.08 8624.9,-1127.23"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge312" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6542.17,-780.45C6654.96,-834.03 6896.52,-966.33 7004,-1159.77 7041.22,-1226.77 6983.95,-1450.5 7040,-1502.77 7128.63,-1585.43 8041.17,-1458.35 8130,-1540.77 8183.59,-1590.5 8116.22,-1814.24 8166,-1867.77 8217.58,-1923.25 8291.3,-1951.23 8365.86,-1964.07"/>
<polygon fill="black" stroke="black" points="8365.47,-1967.55 8375.91,-1965.71 8366.6,-1960.64 8365.47,-1967.55"/>
</g>
<!-- pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge314" class="edge">
<title>pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6717.72,-742.88C6817.77,-726.53 6928.47,-691.14 7004,-616.77 7046.41,-575.01 6992.65,-523.84 7040,-487.77 7096.44,-444.79 8074,-466.7 8479.71,-477.72"/>
<polygon fill="black" stroke="black" points="8479.69,-481.22 8489.78,-477.99 8479.88,-474.22 8479.69,-481.22"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge316" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6717.51,-746.59C6817.01,-743.88 6934.14,-741.14 7040,-739.77 7562.65,-733.06 8180.58,-735.6 8477.44,-737.47"/>
<polygon fill="black" stroke="black" points="8477.84,-740.97 8487.86,-737.54 8477.89,-733.97 8477.84,-740.97"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge313" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6536.85,-780.38C6644.26,-835.42 6882.42,-972.47 7004,-1159.77 7040.39,-1215.83 6988.47,-1263.22 7040,-1305.77 7101.73,-1356.75 7319.76,-1352.54 7460.34,-1343.85"/>
<polygon fill="black" stroke="black" points="7460.57,-1347.35 7470.33,-1343.22 7460.13,-1340.36 7460.57,-1347.35"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge317" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6717.56,-749.59C6820.55,-734.94 6933.67,-699.02 7004,-616.77 7055.68,-556.34 6981.33,-314.44 7040,-260.77 7093.01,-212.28 8097.14,-229.3 8494.28,-237.98"/>
<polygon fill="black" stroke="black" points="8494.34,-241.48 8504.42,-238.2 8494.5,-234.48 8494.34,-241.48"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node179" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node179"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="9064,-3753.27 8246,-3753.27 8246,-3696.27 9064,-3696.27 9064,-3753.27"/>
<text text-anchor="middle" x="8655" y="-3713.43" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge319" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8816.05,-3696.27C8922.92,-3687.04 9058.95,-3695.78 9144,-3777.77 9223.87,-3854.77 9138.74,-3921.8 9180,-4024.77 9258.83,-4221.49 9432.98,-4414.46 9497.93,-4482.26"/>
<polygon fill="black" stroke="black" points="9495.48,-4484.76 9504.94,-4489.54 9500.52,-4479.91 9495.48,-4484.76"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge318" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M9064.05,-3717.96C9091.83,-3709.97 9118.78,-3699.74 9144,-3686.77 9336.3,-3587.93 9469.45,-3344.77 9510.01,-3263.06"/>
<polygon fill="black" stroke="black" points="9513.23,-3264.44 9514.5,-3253.92 9506.95,-3261.36 9513.23,-3264.44"/>
</g>
<!-- pending_embed.main -->
<g id="node180" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6747.5,-2616.77 6214.5,-2616.77 6214.5,-2556.77 6747.5,-2556.77 6747.5,-2616.77"/>
<text text-anchor="middle" x="6481" y="-2574.81" font-family="Times,serif" font-size="47.46">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge320" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6590.68,-2616.86C6715.04,-2657.67 6913.2,-2743.68 7004,-2896.77 7061.06,-2992.98 6959.51,-3825.11 7040,-3902.77 7083.58,-3944.82 8071.38,-3917.96 8130,-3902.77 8147.72,-3898.18 8148.39,-3887.78 8166,-3882.77 8289.83,-3847.56 8438.37,-3846.01 8538.79,-3850.6"/>
<polygon fill="black" stroke="black" points="8538.81,-3854.1 8548.97,-3851.09 8539.15,-3847.11 8538.81,-3854.1"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge321" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6584.09,-2616.79C6695.21,-2648.22 6878.64,-2696.43 7040,-2721.77 7159.97,-2740.62 8039,-2722.35 8130,-2802.77 8191.13,-2856.8 8104.42,-2929.26 8166,-2982.77 8219.6,-3029.35 8411.65,-3027 8538.24,-3019.78"/>
<polygon fill="black" stroke="black" points="8538.6,-3023.27 8548.38,-3019.19 8538.19,-3016.28 8538.6,-3023.27"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge322" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6574.26,-2616.83C6691.87,-2659.94 6893.2,-2750.63 7004,-2896.77 7041.26,-2945.92 6991.06,-2993.25 7040,-3030.77 7088.05,-3067.62 8075.7,-3057.58 8130,-3030.77 8153.59,-3019.13 8142.75,-2996.09 8166,-2983.77 8280.3,-2923.21 8431.49,-2924.84 8535.12,-2936.08"/>
<polygon fill="black" stroke="black" points="8534.98,-2939.58 8545.31,-2937.23 8535.77,-2932.63 8534.98,-2939.58"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge323" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6555.58,-2556.59C6669.16,-2506.2 6886.35,-2394.1 7004,-2230.77 7038.29,-2183.17 6993.91,-2140.07 7040,-2103.77 7087.61,-2066.28 8069.81,-2067.83 8130,-2060.77 8249.53,-2046.75 8382.58,-2020.47 8484.69,-1997.96"/>
<polygon fill="black" stroke="black" points="8485.47,-2001.37 8494.48,-1995.8 8483.96,-1994.54 8485.47,-2001.37"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge324" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6579.16,-2556.73C6689.62,-2523.95 6875.92,-2472.81 7040,-2447.77 7170.49,-2427.86 7320.32,-2420.15 7429.66,-2417.25"/>
<polygon fill="black" stroke="black" points="7429.87,-2420.75 7439.78,-2416.99 7429.7,-2413.75 7429.87,-2420.75"/>
</g>
<!-- pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge325" class="edge">
<title>pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6568.29,-2556.72C6690.32,-2509.04 6909,-2403.4 7004,-2230.77 7060.77,-2127.63 6956.59,-1254.87 7040,-1171.77 7125.84,-1086.26 8042.75,-1222.85 8130,-1138.77 8215.64,-1056.25 8089.69,-696 8166,-604.77 8241.38,-514.65 8372.31,-485.56 8479.58,-478.24"/>
<polygon fill="black" stroke="black" points="8480.12,-481.72 8489.88,-477.6 8479.69,-474.73 8480.12,-481.72"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge326" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6568.78,-2556.74C6691.13,-2509.17 6909.91,-2403.74 7004,-2230.77 7043.54,-2158.09 6981.56,-800.36 7040,-741.77 7115.68,-665.91 8572.11,-692.22 9218.46,-707.74"/>
<polygon fill="black" stroke="black" points="9218.78,-711.25 9228.86,-707.99 9218.95,-704.25 9218.78,-711.25"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge327" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6610.49,-2616.8C6723.02,-2641.46 6891.32,-2674.43 7040,-2687.77 7895.41,-2764.57 8923.06,-2697.02 9336.91,-2663.27"/>
<polygon fill="black" stroke="black" points="9337.49,-2666.73 9347.18,-2662.43 9336.92,-2659.76 9337.49,-2666.73"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge328" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6589.84,-2616.84C6713.89,-2657.75 6912.24,-2743.95 7004,-2896.77 7048.26,-2970.49 6978.74,-3609.44 7040,-3669.77 7083.17,-3712.28 8069.45,-3701.62 8130,-3703.77 8164.31,-3705 8199.88,-3706.31 8235.59,-3707.67"/>
<polygon fill="black" stroke="black" points="8235.54,-3711.17 8245.66,-3708.06 8235.81,-3704.18 8235.54,-3711.17"/>
</g>
<!-- pending_chop.main -->
<g id="node181" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7752.5,-611.27 7417.5,-611.27 7417.5,-568.27 7752.5,-568.27 7752.5,-611.27"/>
<text text-anchor="middle" x="7585" y="-581.63" font-family="Times,serif" font-size="32.06">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge329" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7752.76,-609.39C7878.87,-633.83 8044.43,-688.53 8130,-810.77 8192.87,-900.59 8100.15,-1709.12 8166,-1796.77 8214.37,-1861.16 8289.3,-1900.16 8366.04,-1923.66"/>
<polygon fill="black" stroke="black" points="8365.32,-1927.1 8375.9,-1926.6 8367.31,-1920.39 8365.32,-1927.1"/>
</g>
<!-- pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge330" class="edge">
<title>pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7752.58,-573.09C7950.4,-553.27 8278.81,-520.36 8479.88,-500.22"/>
<polygon fill="black" stroke="black" points="8480.35,-503.69 8489.95,-499.21 8479.65,-496.72 8480.35,-503.69"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge331" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7740.16,-611.28C7947.93,-640.27 8314.76,-691.45 8514.65,-719.33"/>
<polygon fill="black" stroke="black" points="8514.24,-722.81 8524.62,-720.72 8515.2,-715.88 8514.24,-722.81"/>
</g>
<!-- check_translations.parse_po -->
<g id="node182" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="9816,-326.77 9232,-326.77 9232,-274.77 9816,-274.77 9816,-326.77"/>
<text text-anchor="middle" x="9524" y="-291.08" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node183" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="8987.5,-323.27 8322.5,-323.27 8322.5,-278.27 8987.5,-278.27 8987.5,-323.27"/>
<text text-anchor="middle" x="8655" y="-292.39" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge332" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M8987.8,-300.77C9064.75,-300.77 9146.24,-300.77 9221.79,-300.77"/>
<polygon fill="black" stroke="black" points="9221.93,-304.27 9231.93,-300.77 9221.93,-297.27 9221.93,-304.27"/>
</g>
<!-- cluster_items:cli -->
<g id="node185" class="node">
<title>cluster_items:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5059.77" rx="42.34" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5058.17" font-family="Times,serif" font-size="7.00">cluster_items:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;cluster_items:cli -->
<!-- tg_client:cli -->
<g id="node186" class="node">
<title>tg_client:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-5059.77" rx="32.86" ry="18"/>
<text text-anchor="middle" x="2558.5" y="-5058.17" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- cluster_items:cli&#45;&gt;tg_client:cli -->
<!-- scan_ontology:cli -->
<g id="node187" class="node">
<title>scan_ontology:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-5059.77" rx="44.19" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-5058.17" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;scan_ontology:cli -->
<!-- caption:cli -->
<g id="node188" class="node">
<title>caption:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-5059.77" rx="30.28" ry="18"/>
<text text-anchor="middle" x="4010" y="-5058.17" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;caption:cli -->
<!-- build_site:cli -->
<g id="node189" class="node">
<title>build_site:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5114.77" rx="34.71" ry="18"/>
<text text-anchor="middle" x="141" y="-5113.17" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- price_train:cli -->
<g id="node190" class="node">
<title>price_train:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5114.77" rx="36.68" ry="18"/>
<text text-anchor="middle" x="602" y="-5113.17" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;price_train:cli -->
<!-- telegram_bot:cli -->
<g id="node191" class="node">
<title>telegram_bot:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5114.77" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="1278.5" y="-5110.61" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;telegram_bot:cli -->
<!-- chop:cli -->
<g id="node192" class="node">
<title>chop:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5114.77" rx="27" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5113.17" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;chop:cli -->
<!-- moderation:cli -->
<g id="node193" class="node">
<title>moderation:cli</title>
<g id="a_node193"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-5114.77" rx="38.53" ry="18"/>
<text text-anchor="middle" x="2558.5" y="-5113.17" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;moderation:cli -->
<!-- similar:cli -->
<g id="node194" class="node">
<title>similar:cli</title>
<g id="a_node194"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-5114.77" rx="29.05" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-5113.17" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;similar:cli -->
<!-- debug_dump:cli -->
<g id="node195" class="node">
<title>debug_dump:cli</title>
<g id="a_node195"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-5114.77" rx="41.11" ry="18"/>
<text text-anchor="middle" x="4010" y="-5113.17" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;debug_dump:cli -->
<!-- pending_caption:cli -->
<g id="node196" class="node">
<title>pending_caption:cli</title>
<g id="a_node196"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5169.77" rx="48.62" ry="18"/>
<text text-anchor="middle" x="141" y="-5168.17" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli -->
<g id="node197" class="node">
<title>pending_embed:cli</title>
<g id="a_node197"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5169.77" rx="47.39" ry="18"/>
<text text-anchor="middle" x="602" y="-5168.17" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;pending_embed:cli -->
<!-- pending_chop:cli -->
<g id="node198" class="node">
<title>pending_chop:cli</title>
<g id="a_node198"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5169.77" rx="42.96" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5168.17" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli&#45;&gt;pending_chop:cli -->
<!-- check_translations:cli -->
<g id="node199" class="node">
<title>check_translations:cli</title>
<g id="a_node199"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5169.77" rx="73.67" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5167.32" font-family="Times,serif" font-size="9.94">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;check_translations:cli -->
<!-- build_site -->
<g id="node200" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-5289.77" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-5286.07" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge347" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4954.64,-5289.77C5037.17,-5289.77 5197.39,-5289.77 5330.78,-5289.77"/>
<polygon fill="black" stroke="black" points="5331.15,-5293.27 5341.15,-5289.77 5331.15,-5286.27 5331.15,-5293.27"/>
</g>
<!-- caption -->
<g id="node201" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-1186.77" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-1183.07" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge348" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5595.35,-1186.77C5735.79,-1186.77 6177.04,-1186.77 6378.22,-1186.77"/>
<polygon fill="black" stroke="black" points="6378.5,-1190.27 6388.5,-1186.77 6378.5,-1183.27 6378.5,-1190.27"/>
</g>
<!-- check_translations -->
<g id="node202" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="7585" cy="-287.77" rx="96.68" ry="18"/>
<text text-anchor="middle" x="7585" y="-284.07" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge349" class="edge">
<title>check_translations:cli&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7676.08,-281.56C7811.03,-273.99 8057.6,-267.51 8130,-314.77 8159.96,-334.33 8137.53,-365.1 8166,-386.77 8255.09,-454.6 8379.15,-478.35 8479.88,-485.26"/>
<polygon fill="black" stroke="black" points="8479.67,-488.76 8489.87,-485.9 8480.11,-481.77 8479.67,-488.76"/>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge350" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M7681.72,-288.94C7822.47,-290.65 8092.36,-293.94 8312.15,-296.61"/>
<polygon fill="black" stroke="black" points="8312.2,-300.11 8322.24,-296.74 8312.29,-293.11 8312.2,-300.11"/>
</g>
<!-- chop -->
<g id="node203" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-2956.77" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-2953.07" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge351" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4931.29,-2956.77C5027.68,-2956.77 5318.95,-2956.77 5464.63,-2956.77"/>
<polygon fill="black" stroke="black" points="5464.86,-2960.27 5474.86,-2956.77 5464.86,-2953.27 5464.86,-2960.27"/>
</g>
<!-- clean_data -->
<g id="node204" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-3811.77" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-3808.07" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge352" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5610.64,-3811.77C5764.55,-3811.77 6179.15,-3811.77 6374.91,-3811.77"/>
<polygon fill="black" stroke="black" points="6374.92,-3815.27 6384.92,-3811.77 6374.92,-3808.27 6374.92,-3815.27"/>
</g>
<!-- cluster_items -->
<g id="node205" class="node">
<title>cluster_items</title>
<ellipse fill="none" stroke="black" cx="4010" cy="-3700.77" rx="73.39" ry="18"/>
<text text-anchor="middle" x="4010" y="-3697.07" font-family="Times,serif" font-size="14.00">cluster_items</text>
</g>
<!-- cluster_items&#45;&gt;cluster_items.main -->
<g id="edge353" class="edge">
<title>cluster_items:cli&#45;&gt;cluster_items.main</title>
<path fill="none" stroke="black" d="M4083.55,-3700.77C4236.32,-3700.77 4592.43,-3700.77 4778.88,-3700.77"/>
<polygon fill="black" stroke="black" points="4779,-3704.27 4789,-3700.77 4779,-3697.27 4779,-3704.27"/>
</g>
<!-- debug_dump -->
<g id="node206" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-1382.77" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-1379.07" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge354" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5620.91,-1382.77C5748.39,-1382.77 6025.55,-1382.77 6230.76,-1382.77"/>
<polygon fill="black" stroke="black" points="6230.79,-1386.27 6240.79,-1382.77 6230.79,-1379.27 6230.79,-1386.27"/>
</g>
<!-- embed -->
<g id="node207" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-4381.77" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-4378.07" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge355" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5592.9,-4381.77C5731.6,-4381.77 6182.47,-4381.77 6382.68,-4381.77"/>
<polygon fill="black" stroke="black" points="6382.89,-4385.27 6392.89,-4381.77 6382.89,-4378.27 6382.89,-4385.27"/>
</g>
<!-- moderation -->
<g id="node208" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6481" cy="-1791.77" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6481" y="-1788.07" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge356" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6544.81,-1791.43C6690.31,-1790.64 7057.64,-1788.64 7314.06,-1787.24"/>
<polygon fill="black" stroke="black" points="7314.3,-1790.74 7324.28,-1787.19 7314.26,-1783.74 7314.3,-1790.74"/>
</g>
<!-- pending_caption -->
<g id="node209" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-753.77" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-750.07" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge357" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5637.6,-753.77C5772.05,-753.77 6036.82,-753.77 6233.82,-753.77"/>
<polygon fill="black" stroke="black" points="6234.03,-757.27 6244.03,-753.77 6234.03,-750.27 6234.03,-757.27"/>
</g>
<!-- pending_chop -->
<g id="node210" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6481" cy="-589.77" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6481" y="-586.07" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge358" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6556.02,-589.77C6728.68,-589.77 7162.03,-589.77 7407.4,-589.77"/>
<polygon fill="black" stroke="black" points="7407.5,-593.27 7417.5,-589.77 7407.5,-586.27 7407.5,-593.27"/>
</g>
<!-- pending_embed -->
<g id="node211" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-2343.77" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-2340.07" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge359" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5634.56,-2342.84C5710.33,-2343.63 5824.94,-2348.96 5922,-2370.77 6104.99,-2411.89 6307.42,-2502.45 6410.85,-2552.26"/>
<polygon fill="black" stroke="black" points="6409.41,-2555.46 6419.94,-2556.66 6412.46,-2549.15 6409.41,-2555.46"/>
</g>
<!-- price_train -->
<g id="node212" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-4325.77" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-4322.07" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge360" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5611.71,-4325.77C5761.58,-4325.77 6153.83,-4325.77 6355.83,-4325.77"/>
<polygon fill="black" stroke="black" points="6355.89,-4329.27 6365.89,-4325.77 6355.89,-4322.27 6355.89,-4329.27"/>
</g>
<!-- scan_ontology -->
<g id="node213" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-3209.77" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-3206.07" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge361" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4974.06,-3211.84C5055.96,-3214.11 5191.69,-3217.87 5310.77,-3221.16"/>
<polygon fill="black" stroke="black" points="5310.68,-3224.66 5320.77,-3221.44 5310.87,-3217.66 5310.68,-3224.66"/>
</g>
<!-- similar -->
<g id="node214" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5550.5" cy="-4219.77" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5550.5" y="-4216.07" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge362" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5593.5,-4219.77C5727.88,-4219.77 6150.66,-4219.77 6360.06,-4219.77"/>
<polygon fill="black" stroke="black" points="6360.17,-4223.27 6370.17,-4219.77 6360.17,-4216.27 6360.17,-4223.27"/>
</g>
<!-- telegram_bot -->
<g id="node215" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4010" cy="-5005.77" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4010" y="-5002.07" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge363" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4081.67,-5003.46C4219.46,-4998.95 4527.61,-4988.87 4723.27,-4982.47"/>
<polygon fill="black" stroke="black" points="4723.49,-4985.97 4733.37,-4982.14 4723.27,-4978.97 4723.49,-4985.97"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge364" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4081.67,-5008.09C4219.36,-5012.59 4527.16,-5022.66 4722.84,-5029.06"/>
<polygon fill="black" stroke="black" points="4722.84,-5032.56 4732.95,-5029.39 4723.07,-5025.57 4722.84,-5032.56"/>
</g>
<!-- tg_client -->
<g id="node216" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-1968.77" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-1965.07" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge365" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M191.99,-1968.77C222.07,-1968.77 263.09,-1968.77 307.59,-1968.77"/>
<polygon fill="black" stroke="black" points="307.75,-1972.27 317.75,-1968.77 307.75,-1965.27 307.75,-1972.27"/>
</g>
</g>
</svg>
