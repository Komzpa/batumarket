<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="9921pt" height="5471pt"
 viewBox="0.00 0.00 9921.00 5471.28" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5467.28)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5467.28 9917,-5467.28 9917,4 -4,4"/>
<!-- message_utils.build_prompt -->
<g id="node1" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node1"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8483.5,-2865.78 8184.5,-2865.78 8184.5,-2829.78 8483.5,-2829.78 8483.5,-2865.78"/>
<text text-anchor="middle" x="8334" y="-2842.99" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node2" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node2"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7508.5,-2954.78 7083.5,-2954.78 7083.5,-2918.78 7508.5,-2918.78 7508.5,-2954.78"/>
<text text-anchor="middle" x="7296" y="-2930.9" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge1" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7508.5,-2950.71C7611.41,-2950.93 7735.38,-2941.3 7841,-2904.78 7859.41,-2898.41 7858.63,-2886.25 7877,-2879.78 7971.87,-2846.38 8084.58,-2838.2 8174.2,-2838.47"/>
<polygon fill="black" stroke="black" points="8174.43,-2841.97 8184.45,-2838.53 8174.48,-2834.97 8174.43,-2841.97"/>
</g>
<!-- post_io.read_post -->
<g id="node3" class="node">
<title>post_io.read_post</title>
<g id="a_node3"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8613,-3373.78 8055,-3373.78 8055,-3297.78 8613,-3297.78 8613,-3373.78"/>
<text text-anchor="middle" x="8334" y="-3320.61" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge2" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7508.59,-2920.62C7640.11,-2915.49 7793.01,-2920.1 7841,-2963.78 7923.69,-3039.04 7802.81,-3129.12 7877,-3212.78 7920.66,-3262.01 7981.76,-3292.47 8045.08,-3311.08"/>
<polygon fill="black" stroke="black" points="8044.27,-3314.49 8054.84,-3313.85 8046.18,-3307.75 8044.27,-3314.49"/>
</g>
<!-- caption_io.read_caption -->
<g id="node4" class="node">
<title>caption_io.read_caption</title>
<g id="a_node4"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8499.5,-3149.28 8168.5,-3149.28 8168.5,-3112.28 8499.5,-3112.28 8499.5,-3149.28"/>
<text text-anchor="middle" x="8334" y="-3124.33" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge3" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7508.51,-2933.7C7609.88,-2935.67 7732.55,-2943.1 7841,-2963.78 8007.28,-2995.48 8194.16,-3070.45 8282.09,-3108.21"/>
<polygon fill="black" stroke="black" points="8280.73,-3111.44 8291.3,-3112.18 8283.5,-3105.01 8280.73,-3111.44"/>
</g>
<!-- notes_utils.read_md -->
<g id="node46" class="node">
<title>notes_utils.read_md</title>
<g id="a_node46"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9205.5,-4242.78 9065.5,-4242.78 9065.5,-4206.78 9205.5,-4206.78 9205.5,-4242.78"/>
<text text-anchor="middle" x="9135.5" y="-4221.53" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge50" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8613.18,-3362.1C8681.3,-3382.19 8747.15,-3415.88 8791,-3471.78 8840.85,-3535.32 8770.99,-4139.59 8827,-4197.78 8884.48,-4257.48 8984.72,-4254.91 9055.09,-4243.51"/>
<polygon fill="black" stroke="black" points="9055.98,-4246.91 9065.25,-4241.77 9054.8,-4240.01 9055.98,-4246.91"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node47" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node47"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9304.5,-4352.28 8966.5,-4352.28 8966.5,-4315.28 9304.5,-4315.28 9304.5,-4352.28"/>
<text text-anchor="middle" x="9135.5" y="-4327.33" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge51" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8613.12,-3361.82C8681.34,-3381.91 8747.26,-3415.66 8791,-3471.78 8848.02,-3544.94 8763,-4238.65 8827,-4305.78 8881.56,-4363 8975.33,-4363.58 9045.01,-4353.79"/>
<polygon fill="black" stroke="black" points="9045.74,-4357.22 9055.11,-4352.28 9044.7,-4350.3 9045.74,-4357.22"/>
</g>
<!-- notes_utils.load_json -->
<g id="node25" class="node">
<title>notes_utils.load_json</title>
<g id="a_node25"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9259.5,-2368.78 9011.5,-2368.78 9011.5,-2332.78 9259.5,-2332.78 9259.5,-2368.78"/>
<text text-anchor="middle" x="9135.5" y="-2345.08" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge63" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8452.05,-3149.29C8557.19,-3158.57 8707.5,-3152.24 8791,-3059.78 8892.72,-2947.15 8721.57,-2486.95 8827,-2377.78 8882.89,-2319.91 8978.97,-2320.62 9048.88,-2331.12"/>
<polygon fill="black" stroke="black" points="9048.58,-2334.61 9059,-2332.73 9049.68,-2327.7 9048.58,-2334.61"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node29" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node29"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9232,-3249.78 9039,-3249.78 9039,-3213.78 9232,-3213.78 9232,-3249.78"/>
<text text-anchor="middle" x="9135.5" y="-3228.53" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge60" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8499.68,-3135.01C8586.62,-3138.72 8694.92,-3145.69 8791,-3158.78 8882.26,-3171.21 8985.43,-3194.39 9054.68,-3211.3"/>
<polygon fill="black" stroke="black" points="9054.1,-3214.77 9064.64,-3213.75 9055.77,-3207.97 9054.1,-3214.77"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node32" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node32"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9229,-4188.78 9042,-4188.78 9042,-4152.78 9229,-4152.78 9229,-4188.78"/>
<text text-anchor="middle" x="9135.5" y="-4167.53" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge61" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8499.71,-3122.14C8611.32,-3119.73 8746.33,-3124.65 8791,-3158.78 8796.31,-3162.83 9070.39,-3979.6 9125.07,-4142.65"/>
<polygon fill="black" stroke="black" points="9121.85,-4144.06 9128.35,-4152.43 9128.49,-4141.84 9121.85,-4144.06"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge62" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8499.68,-3118.59C8613.55,-3114.16 8751.4,-3118.11 8791,-3158.78 8871.58,-3241.54 8747.51,-4113.96 8827,-4197.78 8884.12,-4258 8984.68,-4255.24 9055.21,-4243.66"/>
<polygon fill="black" stroke="black" points="9056.13,-4247.05 9065.39,-4241.89 9054.94,-4240.15 9056.13,-4247.05"/>
</g>
<!-- caption_io._get_langs -->
<g id="node50" class="node">
<title>caption_io._get_langs</title>
<g id="a_node50"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9244.5,-2422.78 9026.5,-2422.78 9026.5,-2386.78 9244.5,-2386.78 9244.5,-2422.78"/>
<text text-anchor="middle" x="9135.5" y="-2399.99" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge59" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8460.93,-3149.3C8564.9,-3156.81 8708.33,-3147.84 8791,-3059.78 8851.03,-2995.84 8786.64,-2744.64 8827,-2666.78 8886.54,-2551.92 9019.94,-2466.55 9089.84,-2427.81"/>
<polygon fill="black" stroke="black" points="9091.76,-2430.75 9098.86,-2422.88 9088.4,-2424.61 9091.76,-2430.75"/>
</g>
<!-- similar._iter_lots -->
<g id="node5" class="node">
<title>similar._iter_lots</title>
<g id="a_node5"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7450,-2290.28 7142,-2290.28 7142,-2243.28 7450,-2243.28 7450,-2290.28"/>
<text text-anchor="middle" x="7296" y="-2258.28" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge4" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7450.15,-2262.53C7576.2,-2268.15 7748.65,-2298.63 7841,-2413.78 7896.6,-2483.11 7821.39,-3143.46 7877,-3212.78 7918.91,-3265.02 7980.51,-3296.44 8044.95,-3315.02"/>
<polygon fill="black" stroke="black" points="8044.32,-3318.48 8054.89,-3317.78 8046.19,-3311.73 8044.32,-3318.48"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node6" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node6"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8410.5,-3577.78 8257.5,-3577.78 8257.5,-3541.78 8410.5,-3541.78 8410.5,-3577.78"/>
<text text-anchor="middle" x="8334" y="-3556.53" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge5" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7450.2,-2262.23C7576.52,-2267.62 7749.31,-2297.95 7841,-2413.78 7917.73,-2510.7 7791.44,-3436.55 7877,-3525.78 7926.11,-3577 8129.04,-3573.26 8246.98,-3566.34"/>
<polygon fill="black" stroke="black" points="8247.3,-3569.83 8257.07,-3565.73 8246.88,-3562.84 8247.3,-3569.83"/>
</g>
<!-- lot_io.read_lots -->
<g id="node7" class="node">
<title>lot_io.read_lots</title>
<g id="a_node7"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8440,-2566.78 8228,-2566.78 8228,-2530.78 8440,-2530.78 8440,-2566.78"/>
<text text-anchor="middle" x="8334" y="-2542.62" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge6" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7450.08,-2257.78C7571.58,-2259.26 7737.67,-2281.84 7841,-2380.78 7887.72,-2425.51 7827.12,-2480.61 7877,-2521.78 7983.88,-2609.99 8157.33,-2590.35 8256.65,-2569"/>
<polygon fill="black" stroke="black" points="8257.61,-2572.38 8266.62,-2566.8 8256.1,-2565.54 8257.61,-2572.38"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node8" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node8"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8462.5,-2160.28 8205.5,-2160.28 8205.5,-2123.28 8462.5,-2123.28 8462.5,-2160.28"/>
<text text-anchor="middle" x="8334" y="-2135.33" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge7" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7415.55,-2290.31C7532.83,-2306.95 7712.9,-2314 7841,-2233.78 7868.66,-2216.46 7849.35,-2187.11 7877,-2169.78 7983.56,-2102.99 8133.04,-2108.19 8231.41,-2121.83"/>
<polygon fill="black" stroke="black" points="8230.96,-2125.3 8241.36,-2123.26 8231.96,-2118.37 8230.96,-2125.3"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node9" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node9"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8501,-2214.78 8167,-2214.78 8167,-2178.78 8501,-2178.78 8501,-2214.78"/>
<text text-anchor="middle" x="8334" y="-2191.99" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge8" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7450.04,-2258.09C7559.07,-2251.75 7709.08,-2242.74 7841,-2233.78 7945.72,-2226.66 8062.91,-2217.88 8156.64,-2210.66"/>
<polygon fill="black" stroke="black" points="8157.09,-2214.14 8166.8,-2209.88 8156.56,-2207.16 8157.09,-2214.14"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node10" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node10"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8472,-2276.78 8196,-2276.78 8196,-2240.78 8472,-2240.78 8472,-2276.78"/>
<text text-anchor="middle" x="8334" y="-2253.99" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge9" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7450.14,-2265.6C7648.14,-2264.07 7990.6,-2261.42 8185.7,-2259.92"/>
<polygon fill="black" stroke="black" points="8185.76,-2263.42 8195.74,-2259.84 8185.71,-2256.42 8185.76,-2263.42"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge103" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8401.04,-2566.78C8498.31,-2588.97 8680.52,-2613.42 8791,-2521.78 8841.77,-2479.66 8776.83,-2420.61 8827,-2377.78 8882.24,-2330.61 8965.19,-2325.82 9031.02,-2331.76"/>
<polygon fill="black" stroke="black" points="9030.71,-2335.25 9041.01,-2332.75 9031.41,-2328.28 9030.71,-2335.25"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node72" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node72"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9193,-2006.78 9078,-2006.78 9078,-1970.78 9193,-1970.78 9193,-2006.78"/>
<text text-anchor="middle" x="9135.5" y="-1985.53" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge102" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8398.19,-2566.83C8495.52,-2590.39 8682.23,-2618.15 8791,-2521.78 8857.95,-2462.46 8787.19,-2403.87 8827,-2323.78 8895.43,-2186.09 9037.71,-2064.01 9101.87,-2013.48"/>
<polygon fill="black" stroke="black" points="9104.3,-2016.03 9110.03,-2007.12 9099.99,-2010.51 9104.3,-2016.03"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node148" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node148"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9430.5,-1312.28 8840.5,-1312.28 8840.5,-1267.28 9430.5,-1267.28 9430.5,-1312.28"/>
<text text-anchor="middle" x="9135.5" y="-1281.4" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge234" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8501.27,-2208.55C8614.48,-2212.6 8750.8,-2208.36 8791,-2168.78 8865.32,-2095.59 8790.3,-1798.42 8827,-1700.78 8888.47,-1537.26 9036.11,-1383.17 9101.9,-1319.95"/>
<polygon fill="black" stroke="black" points="9104.69,-1322.13 9109.51,-1312.7 9099.86,-1317.07 9104.69,-1322.13"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node149" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node149"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9312,-1745.78 8959,-1745.78 8959,-1709.78 9312,-1709.78 9312,-1745.78"/>
<text text-anchor="middle" x="9135.5" y="-1721.9" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge235" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8402.13,-2276.81C8501.24,-2298.94 8686.24,-2322.44 8791,-2223.78 8876.57,-2143.19 8767.74,-2063.28 8827,-1961.78 8887.61,-1857.96 9014.05,-1784.82 9084.45,-1750.29"/>
<polygon fill="black" stroke="black" points="9086.1,-1753.38 9093.58,-1745.87 9083.06,-1747.08 9086.1,-1753.38"/>
</g>
<!-- similar.main -->
<g id="node11" class="node">
<title>similar.main</title>
<g id="a_node11"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6316.5,-1537.78 6106.5,-1537.78 6106.5,-1495.78 6316.5,-1495.78 6316.5,-1537.78"/>
<text text-anchor="middle" x="6211.5" y="-1508.69" font-family="Times,serif" font-size="31.36">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge10" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6288.18,-1537.9C6402.55,-1574.21 6616.48,-1660.19 6715,-1817.78 6764.19,-1896.46 6684.55,-2169.02 6751,-2233.78 6803.44,-2284.89 6991.34,-2286.26 7131.72,-2279.35"/>
<polygon fill="black" stroke="black" points="7131.94,-2282.84 7141.75,-2278.84 7131.58,-2275.85 7131.94,-2282.84"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node12" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node12"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8590,-2033.78 8078,-2033.78 8078,-1991.78 8590,-1991.78 8590,-2033.78"/>
<text text-anchor="middle" x="8334" y="-2004.69" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge11" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6278.1,-1537.92C6385.93,-1576.09 6600.13,-1666.87 6715,-1817.78 6751.31,-1865.48 6704.01,-1910.55 6751,-1947.78 6798.5,-1985.41 7780.45,-1988.23 7841,-1990.78 7914.53,-1993.87 7994.24,-1997.37 8067.65,-2000.66"/>
<polygon fill="black" stroke="black" points="8067.82,-2004.17 8077.97,-2001.12 8068.14,-1997.18 8067.82,-2004.17"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node13" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node13"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7545,-1065.78 7047,-1065.78 7047,-1017.78 7545,-1017.78 7545,-1065.78"/>
<text text-anchor="middle" x="7296" y="-1032.66" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge12" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6316.59,-1516.85C6432.58,-1510.84 6616.69,-1482.02 6715,-1365.78 6797.73,-1267.96 6657.93,-1167.82 6751,-1079.78 6792.77,-1040.27 6917.36,-1029.69 7036.78,-1029.49"/>
<polygon fill="black" stroke="black" points="7036.84,-1032.99 7046.84,-1029.5 7036.84,-1025.99 7036.84,-1032.99"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node14" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node14"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7444,-1585.78 7148,-1585.78 7148,-1549.78 7444,-1549.78 7444,-1585.78"/>
<text text-anchor="middle" x="7296" y="-1562.48" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge13" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6316.79,-1521.69C6507.4,-1530.67 6913.04,-1549.78 7137.46,-1560.36"/>
<polygon fill="black" stroke="black" points="7137.53,-1563.86 7147.68,-1560.84 7137.86,-1556.87 7137.53,-1563.86"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node15" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node15"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7463.5,-1531.78 7128.5,-1531.78 7128.5,-1495.78 7463.5,-1495.78 7463.5,-1531.78"/>
<text text-anchor="middle" x="7296" y="-1508.48" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge14" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6316.79,-1516.49C6502.01,-1515.98 6890.28,-1514.9 7118.01,-1514.27"/>
<polygon fill="black" stroke="black" points="7118.06,-1517.77 7128.06,-1514.24 7118.05,-1510.77 7118.06,-1517.77"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node16" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node16"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7435,-1639.78 7157,-1639.78 7157,-1603.78 7435,-1603.78 7435,-1639.78"/>
<text text-anchor="middle" x="7296" y="-1616.99" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge15" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6316.64,-1534.84C6424.85,-1552.9 6599.27,-1580.06 6751,-1594.78 6884.6,-1607.74 7037.29,-1614.63 7146.83,-1618.19"/>
<polygon fill="black" stroke="black" points="7146.85,-1621.7 7156.96,-1618.52 7147.07,-1614.7 7146.85,-1621.7"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node17" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node17"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="8791,-1091.28 7877,-1091.28 7877,-1016.28 8791,-1016.28 8791,-1091.28"/>
<text text-anchor="middle" x="8334" y="-1038.78" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge16" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6316.59,-1517.31C6433.03,-1511.76 6617.99,-1483.4 6715,-1365.78 6765.74,-1304.27 6691.86,-1062.26 6751,-1008.78 6840.83,-927.55 7720.01,-1003.26 7841,-1008.78 7877.28,-1010.43 7915.02,-1012.77 7952.74,-1015.52"/>
<polygon fill="black" stroke="black" points="7952.62,-1019.02 7962.85,-1016.27 7953.13,-1012.04 7952.62,-1019.02"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node18" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node18"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7534.5,-1439.78 7057.5,-1439.78 7057.5,-1399.78 7534.5,-1399.78 7534.5,-1439.78"/>
<text text-anchor="middle" x="7296" y="-1412.71" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge17" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6316.79,-1507.43C6487.46,-1492.14 6830.51,-1461.4 7061.53,-1440.7"/>
<polygon fill="black" stroke="black" points="7062.11,-1444.16 7071.75,-1439.78 7061.48,-1437.19 7062.11,-1444.16"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node19" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node19"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9444,-1144.78 8827,-1144.78 8827,-1092.78 9444,-1092.78 9444,-1144.78"/>
<text text-anchor="middle" x="9135.5" y="-1108.63" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge18" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6316.51,-1516.54C6432.2,-1510.24 6615.83,-1481.13 6715,-1365.78 6789.04,-1279.65 6665.22,-1187.22 6751,-1112.78 6770.24,-1096.08 8171.75,-1108.64 8816.41,-1115.31"/>
<polygon fill="black" stroke="black" points="8816.75,-1118.82 8826.79,-1115.42 8816.82,-1111.82 8816.75,-1118.82"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge87" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8501.24,-2033.79C8589.84,-2048.86 8699.2,-2073.77 8791,-2113.78 8920.15,-2170.06 9051.27,-2277.56 9106.87,-2326.02"/>
<polygon fill="black" stroke="black" points="9104.69,-2328.76 9114.51,-2332.72 9109.3,-2323.5 9104.69,-2328.76"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge88" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7528.7,-1065.79C7634.82,-1076.56 7762.25,-1089.21 7877,-1099.78 7978.49,-1109.13 8720.43,-1103.25 8791,-1176.78 8855.61,-1244.1 8791.29,-1929.57 8827,-2015.78 8885.82,-2157.76 9033,-2277.53 9100.14,-2326.76"/>
<polygon fill="black" stroke="black" points="9098.16,-2329.64 9108.3,-2332.69 9102.27,-2323.98 9098.16,-2329.64"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node24" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node24"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8410.5,-3203.78 8257.5,-3203.78 8257.5,-3167.78 8410.5,-3167.78 8410.5,-3203.78"/>
<text text-anchor="middle" x="8334" y="-3182.08" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge91" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7444.2,-1553.64C7586.42,-1543.62 7787.89,-1540.24 7841,-1594.78 7901.6,-1657.01 7816.77,-3095.2 7877,-3157.78 7926.17,-3208.87 8129.07,-3202.25 8247,-3193.62"/>
<polygon fill="black" stroke="black" points="8247.38,-3197.1 8257.09,-3192.86 8246.85,-3190.12 8247.38,-3197.1"/>
</g>
<!-- notes_utils.write_json -->
<g id="node52" class="node">
<title>notes_utils.write_json</title>
<g id="a_node52"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="8428,-1662.78 8240,-1662.78 8240,-1626.78 8428,-1626.78 8428,-1662.78"/>
<text text-anchor="middle" x="8334" y="-1640.73" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge92" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7444.03,-1573.02C7553.57,-1577.42 7706.75,-1584.63 7841,-1594.78 7975.5,-1604.94 8130.21,-1621.46 8229.67,-1632.71"/>
<polygon fill="black" stroke="black" points="8229.39,-1636.2 8239.72,-1633.85 8230.18,-1629.24 8229.39,-1636.2"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node66" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node66"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8436,-1585.78 8232,-1585.78 8232,-1549.78 8436,-1549.78 8436,-1585.78"/>
<text text-anchor="middle" x="8334" y="-1564.08" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge90" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7444.06,-1567.78C7653.66,-1567.78 8033.69,-1567.78 8221.62,-1567.78"/>
<polygon fill="black" stroke="black" points="8221.79,-1571.28 8231.79,-1567.78 8221.79,-1564.28 8221.79,-1571.28"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge94" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7463.77,-1498.33C7604.28,-1489.42 7790.31,-1488.68 7841,-1540.78 7903.66,-1605.18 7814.72,-3093.01 7877,-3157.78 7926.15,-3208.88 8129.06,-3202.26 8246.99,-3193.62"/>
<polygon fill="black" stroke="black" points="8247.37,-3197.1 8257.08,-3192.86 8246.85,-3190.12 8247.37,-3197.1"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge95" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7463.79,-1505.93C7599.62,-1502.46 7778.7,-1505.42 7841,-1540.78 7866.09,-1555.02 7852.35,-1579.8 7877,-1594.78 7983.98,-1659.78 8131.51,-1663.81 8229.45,-1657.24"/>
<polygon fill="black" stroke="black" points="8229.94,-1660.71 8239.66,-1656.5 8229.43,-1653.73 8229.94,-1660.71"/>
</g>
<!-- similar_utils._more_user_path -->
<g id="node67" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node67"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8449,-1531.78 8219,-1531.78 8219,-1495.78 8449,-1495.78 8449,-1531.78"/>
<text text-anchor="middle" x="8334" y="-1510.08" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge93" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7463.74,-1513.78C7671.75,-1513.78 8022.65,-1513.78 8208.62,-1513.78"/>
<polygon fill="black" stroke="black" points="8208.72,-1517.28 8218.72,-1513.78 8208.72,-1510.28 8208.72,-1517.28"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node69" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node69"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9376.5,-1073.78 8894.5,-1073.78 8894.5,-1033.78 9376.5,-1033.78 9376.5,-1073.78"/>
<text text-anchor="middle" x="9135.5" y="-1046.71" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge96" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M8791.09,-1053.78C8822.89,-1053.78 8854.21,-1053.78 8884.21,-1053.78"/>
<polygon fill="black" stroke="black" points="8884.33,-1057.28 8894.33,-1053.78 8884.33,-1050.28 8884.33,-1057.28"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node64" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node64"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="9813,-857.78 9580,-857.78 9580,-821.78 9813,-821.78 9813,-857.78"/>
<text text-anchor="middle" x="9696.5" y="-834.99" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge97" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9428.85,-1092.72C9434.05,-1089.64 9439.1,-1086.33 9444,-1082.78 9474.91,-1060.36 9456.14,-1034.59 9480,-1004.78 9529.37,-943.08 9606.53,-891.41 9653.89,-863.11"/>
<polygon fill="black" stroke="black" points="9655.82,-866.03 9662.66,-857.93 9652.27,-860 9655.82,-866.03"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node20" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node20"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7502,-4764.78 7090,-4764.78 7090,-4726.78 7502,-4726.78 7502,-4764.78"/>
<text text-anchor="middle" x="7296" y="-4739.05" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- debug_dump.parse_url -->
<g id="node21" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node21"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7445.5,-2862.78 7146.5,-2862.78 7146.5,-2826.78 7445.5,-2826.78 7445.5,-2862.78"/>
<text text-anchor="middle" x="7296" y="-2838.9" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node22" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node22"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8555,-2811.78 8113,-2811.78 8113,-2775.78 8555,-2775.78 8555,-2811.78"/>
<text text-anchor="middle" x="8334" y="-2788.19" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node23" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node23"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7550,-3016.28 7042,-3016.28 7042,-2973.28 7550,-2973.28 7550,-3016.28"/>
<text text-anchor="middle" x="7296" y="-2986.63" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge19" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7550.15,-2981.52C7669.73,-2980.66 7796.02,-2989.35 7841,-3025.78 7888.26,-3064.05 7829.83,-3119.4 7877,-3157.78 7931.72,-3202.3 8130.56,-3198.47 8246.82,-3191.98"/>
<polygon fill="black" stroke="black" points="8247.33,-3195.46 8257.11,-3191.39 8246.93,-3188.47 8247.33,-3195.46"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge20" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7427.76,-3016.3C7543.2,-3028.82 7712.64,-3030.9 7841,-2963.78 7864.01,-2951.75 7853.94,-2929.69 7877,-2917.78 7967.32,-2871.11 8718.21,-2945.75 8791,-2874.78 8870.28,-2797.47 8749.3,-2456.67 8827,-2377.78 8883.09,-2320.82 8978.22,-2321.07 9047.84,-2331.2"/>
<polygon fill="black" stroke="black" points="9047.5,-2334.69 9057.92,-2332.76 9048.58,-2327.77 9047.5,-2334.69"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node76" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node76"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9260.5,-4296.78 9010.5,-4296.78 9010.5,-4260.78 9260.5,-4260.78 9260.5,-4296.78"/>
<text text-anchor="middle" x="9135.5" y="-4272.62" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge108" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8410.94,-3177.66C8514.82,-3171.27 8698.84,-3177.79 8791,-3288.78 8859.41,-3371.15 8753.21,-4174.19 8827,-4251.78 8882.79,-4310.44 8979.82,-4309.27 9049.99,-4298.46"/>
<polygon fill="black" stroke="black" points="9050.83,-4301.87 9060.14,-4296.8 9049.7,-4294.96 9050.83,-4301.87"/>
</g>
<!-- notes_utils.read_text -->
<g id="node27" class="node">
<title>notes_utils.read_text</title>
<g id="a_node27"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="9803.5,-5093.78 9589.5,-5093.78 9589.5,-5057.78 9803.5,-5057.78 9803.5,-5093.78"/>
<text text-anchor="middle" x="9696.5" y="-5070.99" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge122" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9214.48,-2332.77C9284.48,-2321.67 9385.01,-2319.11 9444,-2377.78 9643.96,-2576.66 9689.98,-4770.31 9695.01,-5047.13"/>
<polygon fill="black" stroke="black" points="9691.52,-5047.59 9695.19,-5057.52 9698.51,-5047.46 9691.52,-5047.59"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node26" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node26"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9361.5,-5122.78 8909.5,-5122.78 8909.5,-5078.78 9361.5,-5078.78 9361.5,-5122.78"/>
<text text-anchor="middle" x="9135.5" y="-5092.46" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge21" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9361.85,-5090.7C9436.24,-5087.37 9515.95,-5083.81 9578.8,-5081"/>
<polygon fill="black" stroke="black" points="9579.3,-5084.48 9589.13,-5080.54 9578.99,-5077.49 9579.3,-5084.48"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge118" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9595.19,-5093.93C9579.61,-5103.32 9613.38,-5111.78 9696.5,-5111.78 9748.45,-5111.78 9781.13,-5108.47 9794.52,-5103.7"/>
<polygon fill="black" stroke="black" points="9797.94,-5104.53 9797.81,-5093.93 9791.3,-5102.29 9797.94,-5104.53"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node28" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node28"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7543,-3340.28 7049,-3340.28 7049,-3291.28 7543,-3291.28 7543,-3340.28"/>
<text text-anchor="middle" x="7296" y="-3306.6" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge25" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7543.05,-3303.37C7641.62,-3289.23 7752.53,-3261.04 7841,-3205.78 7863.32,-3191.84 7853.77,-3171.14 7877,-3158.78 7977.75,-3105.14 8109.33,-3102.96 8205.23,-3111.33"/>
<polygon fill="black" stroke="black" points="8205,-3114.82 8215.28,-3112.26 8205.64,-3107.85 8205,-3114.82"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge22" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7543.16,-3305.4C7665.4,-3305.64 7796.36,-3315.83 7841,-3354.78 7899.52,-3405.84 7818.55,-3474.63 7877,-3525.78 7930.21,-3572.34 8130.14,-3570.57 8246.85,-3565.18"/>
<polygon fill="black" stroke="black" points="8247.36,-3568.66 8257.18,-3564.68 8247.03,-3561.67 8247.36,-3568.66"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge26" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7492.47,-3291.25C7719.2,-3262.8 8082.84,-3217.17 8247.3,-3196.53"/>
<polygon fill="black" stroke="black" points="8247.88,-3199.99 8257.37,-3195.27 8247.01,-3193.04 8247.88,-3199.99"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge28" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7543.21,-3317.76C7645.87,-3306.48 7759.84,-3276.54 7841,-3205.78 7877.55,-3173.91 7839.06,-3132.98 7877,-3102.78 8036.88,-2975.51 8650.34,-3150.01 8791,-3001.78 8886.61,-2901.02 8730.27,-2477.45 8827,-2377.78 8882.94,-2320.14 8978.78,-2320.74 9048.62,-2331.14"/>
<polygon fill="black" stroke="black" points="9048.31,-2334.63 9058.73,-2332.74 9049.4,-2327.72 9048.31,-2334.63"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge27" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7423.8,-3291.25C7549.53,-3275.09 7737.87,-3274.4 7841,-3387.78 7913.87,-3467.89 7799.94,-4285.69 7877,-4361.78 8000.93,-4484.15 9302.2,-4298.66 9444,-4399.78 9667.28,-4558.99 9692.6,-4940.51 9695.25,-5047.47"/>
<polygon fill="black" stroke="black" points="9691.76,-5047.85 9695.45,-5057.78 9698.76,-5047.71 9691.76,-5047.85"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge23" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7543.28,-3303.27C7638.95,-3306.09 7747.73,-3319 7841,-3354.78 7859.93,-3362.04 7857.83,-3376.2 7877,-3382.78 8261.23,-3514.61 8393.46,-3466.3 8791,-3382.78 8908.03,-3358.19 9033.85,-3291.22 9095.68,-3255.29"/>
<polygon fill="black" stroke="black" points="9097.83,-3258.09 9104.68,-3250.02 9094.29,-3252.05 9097.83,-3258.09"/>
</g>
<!-- caption_io.has_caption -->
<g id="node30" class="node">
<title>caption_io.has_caption</title>
<g id="a_node30"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8411.5,-4298.78 8256.5,-4298.78 8256.5,-4262.78 8411.5,-4262.78 8411.5,-4298.78"/>
<text text-anchor="middle" x="8334" y="-4277.53" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge24" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7425.82,-3291.26C7551.28,-3275.62 7737.73,-3275.83 7841,-3387.78 7894.26,-3445.51 7831.6,-4029.68 7877,-4093.78 7962.28,-4214.18 8139.57,-4257.23 8246.22,-4272.5"/>
<polygon fill="black" stroke="black" points="8245.93,-4275.99 8256.32,-4273.89 8246.89,-4269.06 8245.93,-4275.99"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge57" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8411.6,-4282.02C8511.21,-4279.5 8684.97,-4260.35 8791,-4164.78 9077.85,-3906.23 9125.68,-3386.99 9133.18,-3260.19"/>
<polygon fill="black" stroke="black" points="9136.67,-3260.3 9133.73,-3250.12 9129.69,-3259.91 9136.67,-3260.3"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge58" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8411.9,-4293.62C8507.25,-4305.56 8671.73,-4312.84 8791,-4246.78 8814.64,-4233.69 8803.45,-4211.03 8827,-4197.78 8888.72,-4163.06 8968.66,-4156.99 9031.56,-4159.24"/>
<polygon fill="black" stroke="black" points="9031.75,-4162.76 9041.9,-4159.69 9032.06,-4155.76 9031.75,-4162.76"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node31" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node31"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7511.5,-3196.78 7080.5,-3196.78 7080.5,-3152.78 7511.5,-3152.78 7511.5,-3196.78"/>
<text text-anchor="middle" x="7296" y="-3166.46" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge29" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7511.65,-3161.67C7625.01,-3166.87 7757.56,-3194.26 7841,-3281.78 7916.64,-3361.12 7796.75,-3451.11 7877,-3525.78 7928.89,-3574.05 8130.21,-3571.53 8247.28,-3565.58"/>
<polygon fill="black" stroke="black" points="8247.5,-3569.08 8257.3,-3565.05 8247.13,-3562.09 8247.5,-3569.08"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge32" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7511.66,-3177.06C7739.14,-3179.47 8087.14,-3183.17 8247.12,-3184.87"/>
<polygon fill="black" stroke="black" points="8247.34,-3188.37 8257.38,-3184.98 8247.42,-3181.37 8247.34,-3188.37"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge33" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7511.53,-3193.48C7619.43,-3192.19 7746.9,-3173.25 7841,-3105.78 7870.72,-3084.47 7846.97,-3052.66 7877,-3031.78 8044.55,-2915.28 8649.13,-3089.47 8791,-2942.78 8878.46,-2852.34 8739.11,-2467.8 8827,-2377.78 8883.02,-2320.4 8978.62,-2320.87 9048.38,-2331.17"/>
<polygon fill="black" stroke="black" points="9048.06,-2334.67 9058.48,-2332.76 9049.14,-2327.75 9048.06,-2334.67"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge30" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7511.63,-3189.09C7669.02,-3199.55 7858.43,-3212.03 7877,-3212.78 8303.56,-3229.96 8812.07,-3231.98 9028.53,-3231.98"/>
<polygon fill="black" stroke="black" points="9028.62,-3235.48 9038.62,-3231.97 9028.62,-3228.48 9028.62,-3235.48"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge31" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7511.5,-3161.89C7613.97,-3162.48 7736.7,-3173.2 7841,-3210.78 7859.57,-3217.47 7858.4,-3230.18 7877,-3236.78 8068.71,-3304.85 8626.39,-3169.23 8791,-3288.78 9088.18,-3504.6 9128.27,-4015.87 9133.67,-4142.18"/>
<polygon fill="black" stroke="black" points="9130.18,-4142.69 9134.07,-4152.55 9137.18,-4142.42 9130.18,-4142.69"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node33" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node33"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9408,-2721.28 8863,-2721.28 8863,-2676.28 9408,-2676.28 9408,-2721.28"/>
<text text-anchor="middle" x="9135.5" y="-2690.4" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node34" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node34"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="9820.5,-1334.78 9572.5,-1334.78 9572.5,-1298.78 9820.5,-1298.78 9820.5,-1334.78"/>
<text text-anchor="middle" x="9696.5" y="-1312.73" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge34" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9175.89,-2676.26C9242.29,-2636.14 9375.89,-2545.71 9444,-2431.78 9673.03,-2048.67 9693.75,-1478.03 9695.41,-1345.14"/>
<polygon fill="black" stroke="black" points="9698.91,-1345.02 9695.5,-1334.98 9691.91,-1344.95 9698.91,-1345.02"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node35" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node35"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9289.5,-3101.78 8981.5,-3101.78 8981.5,-3065.78 9289.5,-3065.78 9289.5,-3101.78"/>
<text text-anchor="middle" x="9135.5" y="-3078.19" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node36" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node36"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7742.5,-3096.78 6849.5,-3096.78 6849.5,-3034.78 7742.5,-3034.78 7742.5,-3096.78"/>
<text text-anchor="middle" x="7296" y="-3053.58" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge37" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7742.53,-3092.92C7777.54,-3105.84 7810.92,-3122.48 7841,-3143.78 7869.23,-3163.77 7850.03,-3191.12 7877,-3212.78 7925.47,-3251.71 7985.23,-3278.37 8045.33,-3296.61"/>
<polygon fill="black" stroke="black" points="8044.4,-3299.98 8054.98,-3299.47 8046.39,-3293.27 8044.4,-3299.98"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge38" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7742.64,-3076.78C7779.35,-3092.66 7813.03,-3114.42 7841,-3143.78 7899.81,-3205.51 7816.12,-3466.08 7877,-3525.78 7927.67,-3575.47 8129.98,-3572.33 8247.41,-3565.93"/>
<polygon fill="black" stroke="black" points="8247.67,-3569.42 8257.45,-3565.36 8247.27,-3562.43 8247.67,-3569.42"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge39" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7600.52,-3096.8C7679.53,-3108.27 7764.06,-3123.59 7841,-3143.78 7857.6,-3148.14 7860.23,-3154.1 7877,-3157.78 8003.76,-3185.61 8154.75,-3189.3 8247.23,-3188.34"/>
<polygon fill="black" stroke="black" points="8247.42,-3191.84 8257.38,-3188.22 8247.33,-3184.84 8247.42,-3191.84"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge40" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7486.66,-3096.78C7599.18,-3104.85 7739.25,-3095.78 7841,-3024.78 7872.64,-3002.7 7844.95,-2967.27 7877,-2945.78 7961.41,-2889.17 8718.1,-2981.59 8791,-2910.78 8876.16,-2828.07 8743.91,-2462.56 8827,-2377.78 8883.04,-2320.6 8978.4,-2320.96 9048.1,-2331.18"/>
<polygon fill="black" stroke="black" points="9047.77,-2334.67 9058.19,-2332.75 9048.85,-2327.75 9047.77,-2334.67"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge35" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7742.68,-3056.39C8111.93,-3043.76 8605.14,-3014.29 8791,-2945.78 8922.97,-2897.13 9049.71,-2783.06 9105.2,-2728.66"/>
<polygon fill="black" stroke="black" points="9107.9,-2730.91 9112.55,-2721.39 9102.98,-2725.93 9107.9,-2730.91"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge36" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7742.69,-3070.14C8139.36,-3074.03 8697.84,-3079.5 8971.04,-3082.18"/>
<polygon fill="black" stroke="black" points="8971.41,-3085.68 8981.44,-3082.28 8971.47,-3078.68 8971.41,-3085.68"/>
</g>
<!-- debug_dump.main -->
<g id="node37" class="node">
<title>debug_dump.main</title>
<g id="a_node37"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6449.5,-3096.78 5973.5,-3096.78 5973.5,-3034.78 6449.5,-3034.78 6449.5,-3096.78"/>
<text text-anchor="middle" x="6211.5" y="-3053.58" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge41" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6449.67,-3075.26C6541.71,-3067.19 6642.24,-3042.38 6715,-2980.78 6752.33,-2949.17 6712.01,-2906.31 6751,-2876.78 6809.59,-2832.41 6997.42,-2830.11 7136.05,-2835.16"/>
<polygon fill="black" stroke="black" points="7136.24,-2838.67 7146.36,-2835.55 7136.5,-2831.67 7136.24,-2838.67"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge42" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6449.52,-3079.69C6543.19,-3072.65 6644.97,-3047.41 6715,-2980.78 6768.75,-2929.64 6693.51,-2864.68 6751,-2817.78 6802.36,-2775.88 7675.96,-2783.52 8102.44,-2789.82"/>
<polygon fill="black" stroke="black" points="8102.69,-2793.32 8112.74,-2789.97 8102.79,-2786.32 8102.69,-2793.32"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge43" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6449.69,-3047.27C6543.51,-3040.19 6652.31,-3032.26 6751,-3025.78 6842.35,-3019.78 6942.37,-3013.89 7031.45,-3008.88"/>
<polygon fill="black" stroke="black" points="7031.91,-3012.36 7041.7,-3008.31 7031.52,-3005.37 7031.91,-3012.36"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge44" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6366.79,-3096.81C6484.25,-3129.34 6638.35,-3193.19 6715,-3313.78 6768.42,-3397.81 6679.89,-5036.08 6751,-5105.78 6770.02,-5124.42 8301.7,-5109.83 8899.36,-5103.41"/>
<polygon fill="black" stroke="black" points="8899.44,-5106.91 8909.4,-5103.3 8899.36,-5099.91 8899.44,-5106.91"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge45" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6273.57,-3096.79C6371.45,-3144.84 6570.8,-3236.01 6751,-3276.78 6843.58,-3297.72 6947.06,-3308.25 7038.72,-3313.3"/>
<polygon fill="black" stroke="black" points="7038.81,-3316.81 7048.98,-3313.84 7039.18,-3309.82 7038.81,-3316.81"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge46" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6449.72,-3089.67C6634.32,-3108.25 6888.76,-3133.87 7070.14,-3152.14"/>
<polygon fill="black" stroke="black" points="7070.05,-3155.65 7080.35,-3153.16 7070.75,-3148.68 7070.05,-3155.65"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge47" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6449.72,-3065.78C6564.09,-3065.78 6705.26,-3065.78 6839.25,-3065.78"/>
<polygon fill="black" stroke="black" points="6839.3,-3069.28 6849.3,-3065.78 6839.3,-3062.28 6839.3,-3069.28"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node38" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node38"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7410.5,-4708.78 7181.5,-4708.78 7181.5,-4672.78 7410.5,-4672.78 7410.5,-4708.78"/>
<text text-anchor="middle" x="7296" y="-4686.73" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node39" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node39"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8417.5,-4352.78 8250.5,-4352.78 8250.5,-4316.78 8417.5,-4316.78 8417.5,-4352.78"/>
<text text-anchor="middle" x="8334" y="-4331.08" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge48" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7410.63,-4700.89C7522.96,-4707.04 7698.24,-4706.18 7841,-4658.78 8040.54,-4592.53 8236.88,-4423.74 8306.48,-4359.83"/>
<polygon fill="black" stroke="black" points="8308.99,-4362.27 8313.96,-4352.91 8304.24,-4357.13 8308.99,-4362.27"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge120" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8417.55,-4351.06C8514.12,-4365.57 8675.49,-4375.35 8791,-4307.78 8816.54,-4292.84 8801.68,-4267.08 8827,-4251.78 8895.68,-4210.28 8989.22,-4208.09 9055.04,-4213.42"/>
<polygon fill="black" stroke="black" points="9055.09,-4216.94 9065.36,-4214.34 9055.71,-4209.97 9055.09,-4216.94"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge121" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8417.55,-4334.68C8543.84,-4334.52 8788,-4334.21 8956.02,-4334"/>
<polygon fill="black" stroke="black" points="8956.23,-4337.5 8966.22,-4333.99 8956.22,-4330.5 8956.23,-4337.5"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node40" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node40"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6329,-4778.78 6094,-4778.78 6094,-4742.78 6329,-4742.78 6329,-4778.78"/>
<text text-anchor="middle" x="6211.5" y="-4756.73" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.write_md -->
<g id="node41" class="node">
<title>notes_utils.write_md</title>
<g id="a_node41"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7409,-4818.78 7183,-4818.78 7183,-4782.78 7409,-4782.78 7409,-4818.78"/>
<text text-anchor="middle" x="7296" y="-4795.99" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge49" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6329.12,-4765.09C6535.28,-4772.71 6962.15,-4788.48 7172.46,-4796.25"/>
<polygon fill="black" stroke="black" points="7172.49,-4799.75 7182.61,-4796.63 7172.75,-4792.76 7172.49,-4799.75"/>
</g>
<!-- config_utils.load_config -->
<g id="node42" class="node">
<title>config_utils.load_config</title>
<g id="a_node42"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="9913,-1061.28 9480,-1061.28 9480,-1014.28 9913,-1014.28 9913,-1061.28"/>
<text text-anchor="middle" x="9696.5" y="-1029.28" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node43" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node43"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="7414,-3432.78 7178,-3432.78 7178,-3396.78 7414,-3396.78 7414,-3432.78"/>
<text text-anchor="middle" x="7296" y="-3410.73" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- post_io.get_contact -->
<g id="node44" class="node">
<title>post_io.get_contact</title>
<g id="a_node44"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7395.5,-4930.78 7196.5,-4930.78 7196.5,-4894.78 7395.5,-4894.78 7395.5,-4930.78"/>
<text text-anchor="middle" x="7296" y="-4907.99" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node45" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node45"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7467.5,-4876.78 7124.5,-4876.78 7124.5,-4836.78 7467.5,-4836.78 7467.5,-4876.78"/>
<text text-anchor="middle" x="7296" y="-4849.71" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge119" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9205.69,-4210.55C9273.92,-4200.74 9377.38,-4197.79 9444,-4251.78 9574.83,-4357.8 9670.08,-4914.8 9691.13,-5047.42"/>
<polygon fill="black" stroke="black" points="9687.71,-5048.24 9692.73,-5057.58 9694.63,-5047.15 9687.71,-5048.24"/>
</g>
<!-- post_io.write_post -->
<g id="node48" class="node">
<title>post_io.write_post</title>
<g id="a_node48"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6377.5,-4842.78 6045.5,-4842.78 6045.5,-4796.78 6377.5,-4796.78 6377.5,-4842.78"/>
<text text-anchor="middle" x="6211.5" y="-4811.34" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge54" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6377.79,-4816.88C6596.64,-4813.04 6977.55,-4806.35 7172.46,-4802.93"/>
<polygon fill="black" stroke="black" points="7172.8,-4806.42 7182.74,-4802.75 7172.68,-4799.42 7172.8,-4806.42"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge52" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6377.79,-4802.63C6479.14,-4798.7 6609.28,-4805.8 6715,-4851.78 6735.18,-4860.56 6730.76,-4877.14 6751,-4885.78 6892.1,-4945.97 7072.83,-4940.72 7186.3,-4928.79"/>
<polygon fill="black" stroke="black" points="7186.82,-4932.26 7196.39,-4927.7 7186.07,-4925.3 7186.82,-4932.26"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge53" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6377.79,-4825.43C6576.48,-4832.22 6908.75,-4843.58 7114.13,-4850.6"/>
<polygon fill="black" stroke="black" points="7114.31,-4854.1 7124.42,-4850.95 7114.54,-4847.11 7114.31,-4854.1"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node49" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node49"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7441,-2694.78 7151,-2694.78 7151,-2658.78 7441,-2658.78 7441,-2694.78"/>
<text text-anchor="middle" x="7296" y="-2672.61" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge55" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7441.13,-2670.61C7567.62,-2673.82 7745.83,-2701.04 7841,-2817.78 7890.77,-2878.83 7821.96,-3469.43 7877,-3525.78 7926.59,-3576.55 8129.33,-3572.99 8247.11,-3566.22"/>
<polygon fill="black" stroke="black" points="8247.41,-3569.71 8257.19,-3565.62 8247,-3562.72 8247.41,-3569.71"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge56" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9210.61,-2422.81C9281.35,-2435.13 9385.55,-2439.6 9444,-2377.78 9487.61,-2331.65 9453.56,-1293.49 9480,-1235.78 9514.61,-1160.24 9592.94,-1100.41 9645.02,-1067.05"/>
<polygon fill="black" stroke="black" points="9647.18,-1069.82 9653.78,-1061.52 9643.45,-1063.89 9647.18,-1069.82"/>
</g>
<!-- caption_io.write_caption -->
<g id="node51" class="node">
<title>caption_io.write_caption</title>
<g id="a_node51"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="7462.5,-1785.78 7129.5,-1785.78 7129.5,-1749.78 7462.5,-1749.78 7462.5,-1785.78"/>
<text text-anchor="middle" x="7296" y="-1761.62" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge66" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7462.55,-1775.49C7846.3,-1793.7 8765.98,-1839.45 8791,-1860.78 8844.82,-1906.66 8794,-1953.23 8827,-2015.78 8898.91,-2152.1 9039.99,-2275.34 9102.9,-2326.16"/>
<polygon fill="black" stroke="black" points="9100.9,-2329.04 9110.89,-2332.56 9105.28,-2323.57 9100.9,-2329.04"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge65" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7462.77,-1756C7600.77,-1749.75 7783.61,-1750.84 7841,-1794.78 7882.18,-1826.3 7836.37,-1873.55 7877,-1905.78 8036.69,-2032.45 8650.68,-1834.94 8791,-1982.78 8877.33,-2073.73 8754.76,-3008.28 8827,-3110.78 8872.83,-3175.81 8959.25,-3205.89 9028.82,-3219.81"/>
<polygon fill="black" stroke="black" points="9028.48,-3223.31 9038.96,-3221.75 9029.8,-3216.43 9028.48,-3223.31"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge64" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M7462.73,-1760.66C7598.38,-1757.62 7777.81,-1760.8 7841,-1794.78 7864.8,-1807.58 7853.56,-1830.33 7877,-1843.78 8054.14,-1945.42 8648.23,-1793.74 8791,-1939.78 8859.27,-2009.61 8758.14,-2308.53 8827,-2377.78 8883.1,-2434.19 8977.54,-2434.26 9046.98,-2424.36"/>
<polygon fill="black" stroke="black" points="9047.68,-2427.79 9057.04,-2422.83 9046.63,-2420.87 9047.68,-2427.79"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge67" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7462.52,-1766.81C7570.66,-1764.4 7714.72,-1757.82 7841,-1740.78 7857.24,-1738.59 7860.95,-1736.11 7877,-1732.78 7997.92,-1707.68 8137.38,-1681.11 8229.91,-1663.82"/>
<polygon fill="black" stroke="black" points="8230.65,-1667.24 8239.84,-1661.97 8229.36,-1660.36 8230.65,-1667.24"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node53" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node53"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="8448,-3516.78 8220,-3516.78 8220,-3480.78 8448,-3480.78 8448,-3516.78"/>
<text text-anchor="middle" x="8334" y="-3493.48" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node54" class="node">
<title>chop.process_message</title>
<g id="a_node54"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6712.5,-3424.78 5710.5,-3424.78 5710.5,-3322.78 6712.5,-3322.78 6712.5,-3424.78"/>
<text text-anchor="middle" x="6211.5" y="-3352.46" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge68" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6390.98,-3322.75C6501.3,-3281.91 6636.37,-3213.33 6715,-3105.78 6767.27,-3034.28 6683.95,-2967.64 6751,-2909.78 6796.87,-2870.19 7780.46,-2874.31 7841,-2871.78 7952.41,-2867.12 8077.96,-2860.98 8174.35,-2856.08"/>
<polygon fill="black" stroke="black" points="8174.66,-2859.57 8184.47,-2855.56 8174.3,-2852.58 8174.66,-2859.57"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge70" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6603.19,-3424.8C6674.59,-3433.75 6732.51,-3440.62 6751,-3441.78 7234.49,-3472.18 7359.28,-3493.08 7841,-3441.78 7957.87,-3429.33 8087.75,-3400.7 8184.7,-3376.33"/>
<polygon fill="black" stroke="black" points="8185.74,-3379.68 8194.58,-3373.84 8184.02,-3372.89 8185.74,-3379.68"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge72" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6301.78,-3322.55C6405.76,-3266.06 6584.57,-3178.55 6751,-3143.78 7014.97,-3088.64 7804.76,-3110.44 8158.41,-3123.59"/>
<polygon fill="black" stroke="black" points="8158.37,-3127.09 8168.49,-3123.97 8158.63,-3120.09 8158.37,-3127.09"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge77" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6406.75,-3322.7C6517.1,-3282.82 6646.53,-3215.29 6715,-3105.78 6772.77,-3013.39 6672.55,-2201.4 6751,-2125.78 6794.6,-2083.75 7786.13,-2100.16 7841,-2125.78 7863.58,-2136.32 7854.75,-2157.54 7877,-2168.78 7976.06,-2218.79 8103.03,-2222.5 8197.83,-2215.58"/>
<polygon fill="black" stroke="black" points="8198.36,-2219.05 8208.06,-2214.79 8197.82,-2212.07 8198.36,-2219.05"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge71" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6539.32,-3424.89C6607.37,-3450.8 6671.54,-3489.64 6715,-3547.78 6766.61,-3616.82 6688.65,-4263.25 6751,-4322.78 6838.6,-4406.41 7722.24,-4346.53 7841,-4322.78 7858,-4319.38 7860.11,-4311.68 7877,-4307.78 8003.06,-4278.67 8153.63,-4275.69 8246.28,-4277.37"/>
<polygon fill="black" stroke="black" points="8246.38,-4280.87 8256.45,-4277.57 8246.53,-4273.87 8246.38,-4280.87"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge69" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6712.56,-3392.72C6880.74,-3399.09 7054.25,-3405.66 7167.64,-3409.95"/>
<polygon fill="black" stroke="black" points="7167.62,-3413.46 7177.75,-3410.34 7167.89,-3406.46 7167.62,-3413.46"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge73" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6682.28,-3424.9C6693.41,-3429.2 6704.33,-3433.82 6715,-3438.78 6734.68,-3447.93 6730.84,-3463.74 6751,-3471.78 6884.79,-3525.14 7861.3,-3509.19 8209.82,-3501.68"/>
<polygon fill="black" stroke="black" points="8210.03,-3505.18 8219.95,-3501.46 8209.87,-3498.18 8210.03,-3505.18"/>
</g>
<!-- embed.embed_file -->
<g id="node55" class="node">
<title>embed.embed_file</title>
<g id="a_node55"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7501,-2576.28 7091,-2576.28 7091,-2521.28 7501,-2521.28 7501,-2576.28"/>
<text text-anchor="middle" x="7296" y="-2538.23" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge74" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6403.28,-3322.69C6513.64,-3282.62 6644.29,-3214.89 6715,-3105.78 6777.99,-3008.57 6669.04,-2667.63 6751,-2585.78 6796.78,-2540.06 6948.76,-2532.61 7080.48,-2535.61"/>
<polygon fill="black" stroke="black" points="7080.65,-2539.11 7090.73,-2535.86 7080.82,-2532.11 7080.65,-2539.11"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node56" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node56"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="9237.5,-4444.78 9033.5,-4444.78 9033.5,-4408.78 9237.5,-4408.78 9237.5,-4444.78"/>
<text text-anchor="middle" x="9135.5" y="-4420.9" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge75" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6539.41,-3424.82C6607.46,-3450.74 6671.6,-3489.6 6715,-3547.78 6768.93,-3620.08 6686.82,-4295.39 6751,-4358.78 6832.68,-4439.46 8563.12,-4431.37 9023.06,-4427.78"/>
<polygon fill="black" stroke="black" points="9023.39,-4431.27 9033.36,-4427.7 9023.33,-4424.27 9023.39,-4431.27"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node57" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node57"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8423.5,-4084.78 8244.5,-4084.78 8244.5,-4048.78 8423.5,-4048.78 8423.5,-4084.78"/>
<text text-anchor="middle" x="8334" y="-4062.73" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge76" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6536.97,-3424.83C6605.64,-3450.72 6670.68,-3489.56 6715,-3547.78 6790.81,-3647.35 6659.72,-4024.16 6751,-4109.78 6795.17,-4151.21 7781.11,-4118.72 7841,-4109.78 7857.55,-4107.31 7860.55,-4101.83 7877,-4098.78 7998.66,-4076.23 8141.26,-4069.27 8234.17,-4067.29"/>
<polygon fill="black" stroke="black" points="8234.48,-4070.78 8244.41,-4067.08 8234.34,-4063.78 8234.48,-4070.78"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge98" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7501.06,-2548.78C7715.35,-2548.78 8044.71,-2548.78 8217.73,-2548.78"/>
<polygon fill="black" stroke="black" points="8217.88,-2552.28 8227.88,-2548.78 8217.88,-2545.28 8217.88,-2552.28"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge100" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7463.45,-2576.3C7586.38,-2586.22 7747.91,-2575.49 7841,-2473.78 7896.65,-2412.97 7823,-1795.06 7877,-1732.78 7962.97,-1633.64 8123.93,-1624.99 8229.79,-1631.84"/>
<polygon fill="black" stroke="black" points="8229.63,-1635.34 8239.85,-1632.55 8230.12,-1628.35 8229.63,-1635.34"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node70" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node70"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8426.5,-2512.78 8241.5,-2512.78 8241.5,-2476.78 8426.5,-2476.78 8426.5,-2512.78"/>
<text text-anchor="middle" x="8334" y="-2489.99" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge99" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7501.06,-2538.14C7721.02,-2526.68 8062.22,-2508.89 8231.13,-2500.09"/>
<polygon fill="black" stroke="black" points="8231.46,-2503.58 8241.27,-2499.56 8231.1,-2496.59 8231.46,-2503.58"/>
</g>
<!-- chop.main -->
<g id="node58" class="node">
<title>chop.main</title>
<g id="a_node58"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5472,-3391.78 5321,-3391.78 5321,-3355.78 5472,-3355.78 5472,-3391.78"/>
<text text-anchor="middle" x="5396.5" y="-3367.62" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge78" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5472.17,-3373.78C5528.26,-3373.78 5610.55,-3373.78 5700.05,-3373.78"/>
<polygon fill="black" stroke="black" points="5700.14,-3377.28 5710.14,-3373.78 5700.14,-3370.28 5700.14,-3377.28"/>
</g>
<!-- caption._identify_size -->
<g id="node59" class="node">
<title>caption._identify_size</title>
<g id="a_node59"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="8462.5,-1275.78 8205.5,-1275.78 8205.5,-1239.78 8462.5,-1239.78 8462.5,-1275.78"/>
<text text-anchor="middle" x="8334" y="-1252.08" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node60" class="node">
<title>caption._prepare_image</title>
<g id="a_node60"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="7513,-1267.78 7079,-1267.78 7079,-1221.78 7513,-1221.78 7513,-1267.78"/>
<text text-anchor="middle" x="7296" y="-1236.34" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge79" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M7513.23,-1247.49C7718.46,-1250.07 8020.73,-1253.86 8195.12,-1256.05"/>
<polygon fill="black" stroke="black" points="8195.09,-1259.55 8205.13,-1256.17 8195.18,-1252.55 8195.09,-1259.55"/>
</g>
<!-- caption._guess_chat -->
<g id="node61" class="node">
<title>caption._guess_chat</title>
<g id="a_node61"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="8430,-1221.78 8238,-1221.78 8238,-1185.78 8430,-1185.78 8430,-1221.78"/>
<text text-anchor="middle" x="8334" y="-1199.61" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node62" class="node">
<title>caption.caption_file</title>
<g id="a_node62"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="6514.5,-1900.28 5908.5,-1900.28 5908.5,-1827.28 6514.5,-1827.28 6514.5,-1900.28"/>
<text text-anchor="middle" x="6211.5" y="-1848.79" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge85" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6242.17,-1900.56C6316.51,-1989.44 6521.31,-2214.77 6751,-2298.78 6857.05,-2337.57 8514.75,-2348.01 9001.26,-2350.25"/>
<polygon fill="black" stroke="black" points="9001.47,-2353.75 9011.49,-2350.3 9001.5,-2346.75 9001.47,-2353.75"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge80" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6239.84,-1900.41C6311.5,-1993.11 6515.58,-2236.57 6751,-2333.78 6960.96,-2420.47 8631.15,-2306.38 8791,-2467.78 8841.35,-2518.62 8785.08,-3052.79 8827,-3110.78 8873.45,-3175.03 8959.37,-3205.18 9028.6,-3219.31"/>
<polygon fill="black" stroke="black" points="9028.2,-3222.8 9038.69,-3221.28 9029.54,-3215.93 9028.2,-3222.8"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge81" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6265.23,-1900.52C6373.91,-1979.84 6620.59,-2179.3 6715,-2416.78 6753.45,-2513.49 6676.7,-4216.9 6751,-4289.78 6804.64,-4342.4 7922.97,-4298.46 8246.22,-4284.61"/>
<polygon fill="black" stroke="black" points="8246.62,-4288.1 8256.46,-4284.17 8246.32,-4281.1 8246.62,-4288.1"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge82" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M6465.45,-1827.24C6555.44,-1815.34 6657.58,-1803.07 6751,-1794.78 6873.73,-1783.89 7012.45,-1777.09 7119.09,-1773.04"/>
<polygon fill="black" stroke="black" points="7119.45,-1776.53 7129.31,-1772.65 7119.19,-1769.53 7119.45,-1776.53"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge83" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M6320.88,-1827.23C6438.72,-1781.41 6622.56,-1690.91 6715,-1546.78 6780.36,-1444.87 6662.3,-1359.17 6751,-1276.78 6796.81,-1234.23 6940.32,-1227.09 7068.44,-1230.13"/>
<polygon fill="black" stroke="black" points="7068.73,-1233.64 7078.82,-1230.4 7068.91,-1226.64 7068.73,-1233.64"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge84" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M6322.62,-1827.24C6441.11,-1781.68 6624.66,-1691.62 6715,-1546.78 6754.51,-1483.44 6695.6,-1262.81 6751,-1212.78 6805.74,-1163.34 7882.66,-1190.54 8227.65,-1200.57"/>
<polygon fill="black" stroke="black" points="8227.79,-1204.07 8237.89,-1200.86 8227.99,-1197.07 8227.79,-1204.07"/>
</g>
<!-- caption.main -->
<g id="node63" class="node">
<title>caption.main</title>
<g id="a_node63"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="5489,-1881.78 5304,-1881.78 5304,-1845.78 5489,-1845.78 5489,-1881.78"/>
<text text-anchor="middle" x="5396.5" y="-1857.62" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge86" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M5489.18,-1863.78C5588.33,-1863.78 5751.87,-1863.78 5898.19,-1863.78"/>
<polygon fill="black" stroke="black" points="5898.24,-1867.28 5908.24,-1863.78 5898.24,-1860.28 5898.24,-1867.28"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node65" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node65"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8462.5,-1452.78 8205.5,-1452.78 8205.5,-1416.78 8462.5,-1416.78 8462.5,-1452.78"/>
<text text-anchor="middle" x="8334" y="-1430.61" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- similar_utils._load_more_user -->
<g id="node68" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node68"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8593,-905.28 8075,-905.28 8075,-860.28 8593,-860.28 8593,-905.28"/>
<text text-anchor="middle" x="8334" y="-874.4" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge89" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8593.14,-863.93C8667.24,-872.42 8741.34,-896.86 8791,-952.78 8869.47,-1041.14 8782.26,-1906.39 8827,-2015.78 8885.18,-2158.03 9032.69,-2277.65 9100.03,-2326.81"/>
<polygon fill="black" stroke="black" points="9098.06,-2329.7 9108.22,-2332.72 9102.16,-2324.03 9098.06,-2329.7"/>
</g>
<!-- embed.main -->
<g id="node71" class="node">
<title>embed.main</title>
<g id="a_node71"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6299.5,-2566.78 6123.5,-2566.78 6123.5,-2530.78 6299.5,-2530.78 6299.5,-2566.78"/>
<text text-anchor="middle" x="6211.5" y="-2542.62" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge101" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6299.71,-2548.78C6468.03,-2548.78 6842.06,-2548.78 7080.63,-2548.78"/>
<polygon fill="black" stroke="black" points="7080.82,-2552.28 7090.82,-2548.78 7080.82,-2545.28 7080.82,-2552.28"/>
</g>
<!-- lot_io.get_seller -->
<g id="node73" class="node">
<title>lot_io.get_seller</title>
<g id="a_node73"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8434.5,-787.78 8233.5,-787.78 8233.5,-751.78 8434.5,-751.78 8434.5,-787.78"/>
<text text-anchor="middle" x="8334" y="-764.19" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node74" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node74"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8493,-1781.78 8175,-1781.78 8175,-1741.78 8493,-1741.78 8493,-1781.78"/>
<text text-anchor="middle" x="8334" y="-1754.71" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node75" class="node">
<title>lot_io.write_lots</title>
<g id="a_node75"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7397.5,-1731.78 7194.5,-1731.78 7194.5,-1695.78 7397.5,-1695.78 7397.5,-1731.78"/>
<text text-anchor="middle" x="7296" y="-1708.19" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge107" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7397.54,-1708.36C7506.75,-1702.35 7686.31,-1692.14 7841,-1681.78 7975.27,-1672.78 8130.04,-1660.89 8229.57,-1653.05"/>
<polygon fill="black" stroke="black" points="8229.93,-1656.53 8239.63,-1652.26 8229.38,-1649.55 8229.93,-1656.53"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge104" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7397.56,-1707.05C7689.46,-1688.77 8532.49,-1645.22 8791,-1732.78 8809.16,-1738.93 9020.99,-1901.31 9102.66,-1964.22"/>
<polygon fill="black" stroke="black" points="9101,-1967.35 9111.06,-1970.68 9105.27,-1961.81 9101,-1967.35"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge105" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7397.58,-1716.61C7538.2,-1718.19 7782.91,-1711.5 7841,-1648.78 7905.38,-1579.26 7810.57,-864.34 7877,-796.78 7923.46,-749.52 8103.61,-752.46 8223.09,-760.2"/>
<polygon fill="black" stroke="black" points="8223.17,-763.71 8233.38,-760.88 8223.63,-756.72 8223.17,-763.71"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge106" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7397.75,-1718.45C7575.69,-1726.69 7947.3,-1743.91 8164.71,-1753.98"/>
<polygon fill="black" stroke="black" points="8164.79,-1757.49 8174.94,-1754.46 8165.11,-1750.5 8164.79,-1757.49"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node77" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node77"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8440.5,-997.78 8227.5,-997.78 8227.5,-961.78 8440.5,-961.78 8440.5,-997.78"/>
<text text-anchor="middle" x="8334" y="-975.61" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node78" class="node">
<title>lot_io.get_lot</title>
<g id="a_node78"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7368.5,-4578.78 7223.5,-4578.78 7223.5,-4542.78 7368.5,-4542.78 7368.5,-4578.78"/>
<text text-anchor="middle" x="7296" y="-4555.99" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge109" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7368.68,-4563.27C7501.82,-4566.19 7779.4,-4563.74 7841,-4495.78 7905.52,-4424.59 7824.93,-2847.52 7877,-2766.78 7952.41,-2649.86 8109.32,-2594.15 8217.86,-2568.67"/>
<polygon fill="black" stroke="black" points="8218.91,-2572.02 8227.88,-2566.37 8217.35,-2565.2 8218.91,-2572.02"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge110" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7368.52,-4559.2C7472.74,-4556.3 7672.33,-4548.5 7841,-4528.78 8266.8,-4479 8434,-4599.12 8791,-4361.78 8815.64,-4345.4 8801.68,-4321.08 8827,-4305.78 8878.17,-4274.86 8943.13,-4265.76 9000.15,-4265.34"/>
<polygon fill="black" stroke="black" points="9000.32,-4268.84 9010.33,-4265.35 9000.33,-4261.84 9000.32,-4268.84"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node79" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node79"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="8513.5,-357.78 8154.5,-357.78 8154.5,-321.78 8513.5,-321.78 8513.5,-357.78"/>
<text text-anchor="middle" x="8334" y="-334.08" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node80" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node80"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6529,-311.28 5894,-311.28 5894,-258.28 6529,-258.28 6529,-311.28"/>
<text text-anchor="middle" x="6211.5" y="-274.57" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node81" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node81"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="7841,-311.28 6751,-311.28 6751,-234.28 7841,-234.28 7841,-311.28"/>
<text text-anchor="middle" x="7296" y="-256.88" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge111" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7841.17,-307.97C7950.13,-315.02 8057.55,-321.96 8144.06,-327.56"/>
<polygon fill="black" stroke="black" points="8144.03,-331.06 8154.24,-328.22 8144.48,-324.08 8144.03,-331.06"/>
</g>
<!-- price_utils.predict_price -->
<g id="node82" class="node">
<title>price_utils.predict_price</title>
<g id="a_node82"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="8539,-177.28 8129,-177.28 8129,-134.28 8539,-134.28 8539,-177.28"/>
<text text-anchor="middle" x="8334" y="-147.63" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node83" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node83"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="9329,-130.28 8942,-130.28 8942,-91.28 9329,-91.28 9329,-130.28"/>
<text text-anchor="middle" x="9135.5" y="-103.88" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node84" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node84"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="8601.5,-245.78 8066.5,-245.78 8066.5,-195.78 8601.5,-195.78 8601.5,-245.78"/>
<text text-anchor="middle" x="8334" y="-211.09" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node85" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node85"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="7552.5,-215.78 7039.5,-215.78 7039.5,-177.78 7552.5,-177.78 7552.5,-215.78"/>
<text text-anchor="middle" x="7296" y="-190.05" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge112" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M7552.76,-202.7C7705.49,-206.24 7899.54,-210.74 8055.91,-214.36"/>
<polygon fill="black" stroke="black" points="8056.07,-217.86 8066.15,-214.6 8056.23,-210.87 8056.07,-217.86"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node86" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node86"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6526.5,-223.28 5896.5,-223.28 5896.5,-170.28 6526.5,-170.28 6526.5,-223.28"/>
<text text-anchor="middle" x="6211.5" y="-186.57" font-family="Times,serif" font-size="40.88">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge113" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6526.69,-218.84C6594.07,-223.57 6667.18,-228.7 6740.61,-233.86"/>
<polygon fill="black" stroke="black" points="6740.75,-237.37 6750.97,-234.58 6741.24,-230.39 6740.75,-237.37"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge114" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6526.7,-178.12C6600.27,-174.4 6678.36,-170.96 6751,-168.78 7239.96,-154.06 7814.28,-153.53 8118.52,-154.57"/>
<polygon fill="black" stroke="black" points="8118.77,-158.07 8128.79,-154.61 8118.8,-151.07 8118.77,-158.07"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge115" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6484.15,-170.26C6569.48,-162.82 6664.1,-155.49 6751,-150.78 7557.58,-107.06 8519.74,-106.75 8931.4,-109.08"/>
<polygon fill="black" stroke="black" points="8931.6,-112.58 8941.62,-109.13 8931.64,-105.58 8931.6,-112.58"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge116" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6526.69,-196.78C6685.82,-196.78 6876.93,-196.78 7028.73,-196.78"/>
<polygon fill="black" stroke="black" points="7029.14,-200.28 7039.14,-196.78 7029.14,-193.28 7029.14,-200.28"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node87" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node87"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="7666,-425.78 6926,-425.78 6926,-367.78 7666,-367.78 7666,-425.78"/>
<text text-anchor="middle" x="7296" y="-385.49" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge117" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7666.27,-376.46C7827.99,-367.56 8010.85,-357.5 8144.11,-350.17"/>
<polygon fill="black" stroke="black" points="8144.63,-353.65 8154.43,-349.6 8144.25,-346.66 8144.63,-353.65"/>
</g>
<!-- telegram_bot._t -->
<g id="node88" class="node">
<title>telegram_bot._t</title>
<g id="a_node88"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5500.5,-5384.78 5292.5,-5384.78 5292.5,-5348.78 5500.5,-5348.78 5500.5,-5384.78"/>
<text text-anchor="middle" x="5396.5" y="-5360.9" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node89" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node89"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5547.5,-5438.78 5245.5,-5438.78 5245.5,-5402.78 5547.5,-5402.78 5547.5,-5438.78"/>
<text text-anchor="middle" x="5396.5" y="-5415.99" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node90" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node90"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6315.5,-5438.78 6107.5,-5438.78 6107.5,-5402.78 6315.5,-5402.78 6315.5,-5438.78"/>
<text text-anchor="middle" x="6211.5" y="-5417.08" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge123" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5547.56,-5420.78C5706.51,-5420.78 5953.87,-5420.78 6097.23,-5420.78"/>
<polygon fill="black" stroke="black" points="6097.37,-5424.28 6107.37,-5420.78 6097.37,-5417.28 6097.37,-5424.28"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node91" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node91"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5547.5,-5136.78 5245.5,-5136.78 5245.5,-5100.78 5547.5,-5100.78 5547.5,-5136.78"/>
<text text-anchor="middle" x="5396.5" y="-5113.48" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge124" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5495.15,-5136.79C5717.25,-5176.92 6277.7,-5273.59 6751,-5316.78 6991.94,-5338.77 7053.06,-5336.78 7295,-5336.78 7295,-5336.78 7295,-5336.78 8335,-5336.78 8581.8,-5336.78 9213.9,-5366.03 9444,-5276.78 9542.81,-5238.45 9633.22,-5146.63 9673.47,-5101.59"/>
<polygon fill="black" stroke="black" points="9676.17,-5103.81 9680.17,-5094 9670.92,-5099.18 9676.17,-5103.81"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node92" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node92"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9279,-5217.78 8992,-5217.78 8992,-5181.78 9279,-5181.78 9279,-5217.78"/>
<text text-anchor="middle" x="9135.5" y="-5194.08" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge125" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9218.08,-5181.77C9280.06,-5168.08 9367.4,-5148.78 9444,-5131.78 9497.21,-5119.97 9556.73,-5106.72 9604.51,-5096.07"/>
<polygon fill="black" stroke="black" points="9605.52,-5099.43 9614.52,-5093.84 9604,-5092.6 9605.52,-5099.43"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node93" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6295.5,-4896.78 6127.5,-4896.78 6127.5,-4860.78 6295.5,-4860.78 6295.5,-4896.78"/>
<text text-anchor="middle" x="6211.5" y="-4875.53" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node94" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node94"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7442,-2035.78 7150,-2035.78 7150,-1999.78 7442,-1999.78 7442,-2035.78"/>
<text text-anchor="middle" x="7296" y="-2013.61" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge126" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7442.14,-2017.08C7603.9,-2016.3 7868.85,-2015.02 8067.84,-2014.06"/>
<polygon fill="black" stroke="black" points="8067.88,-2017.56 8077.86,-2014.01 8067.85,-2010.56 8067.88,-2017.56"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node95" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="9297,-581.78 8974,-581.78 8974,-545.78 9297,-545.78 9297,-581.78"/>
<text text-anchor="middle" x="9135.5" y="-558.99" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge127" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9297.13,-560.52C9346.11,-564.71 9398.9,-574.71 9444,-595.78 9551.34,-645.91 9640.9,-760.96 9677.62,-813.16"/>
<polygon fill="black" stroke="black" points="9674.88,-815.34 9683.46,-821.56 9680.63,-811.35 9674.88,-815.34"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node96" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5635,-4844.78 5158,-4844.78 5158,-4804.78 5635,-4804.78 5635,-4844.78"/>
<text text-anchor="middle" x="5396.5" y="-4817.71" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge128" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5595.88,-4844.84C5624.3,-4855.28 5650.98,-4870.31 5672,-4891.78 5723.61,-4944.47 5667.62,-4992.06 5708,-5053.78 5823.56,-5230.42 6055.47,-5351.22 6158.78,-5398.51"/>
<polygon fill="black" stroke="black" points="6157.52,-5401.79 6168.08,-5402.73 6160.41,-5395.41 6157.52,-5401.79"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge129" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5535.88,-4804.73C5587.33,-4789.85 5640.74,-4763.93 5672,-4718.78 5735.56,-4626.99 5631.23,-780.83 5708,-699.78 5764.57,-640.06 8278.79,-582.06 8963.74,-567.35"/>
<polygon fill="black" stroke="black" points="8964.02,-570.84 8973.94,-567.13 8963.87,-563.84 8964.02,-570.84"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node97" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node97"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5672,-4952.78 5121,-4952.78 5121,-4900.78 5672,-4900.78 5672,-4952.78"/>
<text text-anchor="middle" x="5396.5" y="-4917.08" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge130" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5605.01,-4900.75C5630.42,-4889.72 5653.79,-4874.54 5672,-4853.78 5754.13,-4760.1 5614.81,-4658.47 5708,-4575.78 5764.69,-4525.48 6896.47,-4550.57 7213.25,-4558.61"/>
<polygon fill="black" stroke="black" points="7213.19,-4562.11 7223.27,-4558.86 7213.37,-4555.11 7213.19,-4562.11"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge131" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5571.46,-4952.79C5606.88,-4963.47 5642.33,-4978.54 5672,-4999.78 5695.45,-5016.57 5688.05,-5032.95 5708,-5053.78 5856.84,-5209.13 6078.23,-5344.89 6169.2,-5397.51"/>
<polygon fill="black" stroke="black" points="6167.69,-5400.68 6178.1,-5402.64 6171.18,-5394.61 6167.69,-5400.68"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node98" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node98"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5005.5,-5090.78 4675.5,-5090.78 4675.5,-5054.78 5005.5,-5054.78 5005.5,-5090.78"/>
<text text-anchor="middle" x="4840.5" y="-5066.62" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge132" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5005.84,-5086.42C5078.36,-5092.45 5163.29,-5099.5 5235.31,-5105.48"/>
<polygon fill="black" stroke="black" points="5235.13,-5108.97 5245.39,-5106.31 5235.71,-5102 5235.13,-5108.97"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node99" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node99"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="4952.5,-5405.78 4728.5,-5405.78 4728.5,-5369.78 4952.5,-5369.78 4952.5,-5405.78"/>
<text text-anchor="middle" x="4840.5" y="-5383.61" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge133" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4952.61,-5383.57C5048.25,-5379.94 5185.66,-5374.73 5281.99,-5371.08"/>
<polygon fill="black" stroke="black" points="5282.2,-5374.58 5292.06,-5370.7 5281.94,-5367.58 5282.2,-5374.58"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge134" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4952.61,-5394.4C5033.67,-5399.23 5144.74,-5405.84 5235.37,-5411.24"/>
<polygon fill="black" stroke="black" points="5235.28,-5414.74 5245.47,-5411.84 5235.7,-5407.75 5235.28,-5414.74"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node100" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node100"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5015,-5463.28 4666,-5463.28 4666,-5424.28 5015,-5424.28 5015,-5463.28"/>
<text text-anchor="middle" x="4840.5" y="-5436.88" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge135" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5015.05,-5431.98C5038.9,-5427.8 5062.8,-5422.22 5085,-5414.78 5102.56,-5408.89 5103.38,-5399.48 5121,-5393.78 5172.36,-5377.15 5231.72,-5369.93 5282.07,-5367.06"/>
<polygon fill="black" stroke="black" points="5282.54,-5370.54 5292.34,-5366.53 5282.17,-5363.55 5282.54,-5370.54"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge136" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5015.27,-5436.56C5085.59,-5433.64 5166.27,-5430.3 5235.16,-5427.44"/>
<polygon fill="black" stroke="black" points="5235.39,-5430.93 5245.24,-5427.02 5235.1,-5423.93 5235.39,-5430.93"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge137" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5015.19,-5446.65C5050.22,-5447.12 5086.79,-5447.53 5121,-5447.78 5365.88,-5449.53 5427.19,-5453.91 5672,-5447.78 5819.01,-5444.1 5988.37,-5434.77 6097.3,-5428.11"/>
<polygon fill="black" stroke="black" points="6097.56,-5431.6 6107.32,-5427.49 6097.13,-5424.61 6097.56,-5431.6"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node101" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node101"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5055.5,-5351.28 4625.5,-5351.28 4625.5,-5310.28 5055.5,-5310.28 5055.5,-5351.28"/>
<text text-anchor="middle" x="4840.5" y="-5323.53" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge138" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5055.69,-5344.7C5132.86,-5349.71 5216.89,-5355.17 5282.09,-5359.41"/>
<polygon fill="black" stroke="black" points="5282.18,-5362.92 5292.39,-5360.08 5282.63,-5355.94 5282.18,-5362.92"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge139" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5055.8,-5349.38C5065.83,-5352.67 5075.62,-5356.45 5085,-5360.78 5104.71,-5369.87 5101.18,-5384.93 5121,-5393.78 5156.22,-5409.51 5196.45,-5418.01 5235.06,-5422.28"/>
<polygon fill="black" stroke="black" points="5235.06,-5425.8 5245.36,-5423.32 5235.77,-5418.83 5235.06,-5425.8"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge140" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5055.59,-5311.79C5265.46,-5296.94 5568.48,-5286.67 5672,-5339.78 5696.04,-5352.11 5684.29,-5375.81 5708,-5388.78 5828.37,-5454.6 5990,-5451.74 6097.07,-5439.68"/>
<polygon fill="black" stroke="black" points="6097.74,-5443.12 6107.26,-5438.48 6096.92,-5436.17 6097.74,-5443.12"/>
</g>
<!-- telegram_bot.main -->
<g id="node102" class="node">
<title>telegram_bot.main</title>
<g id="a_node102"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5006,-4948.78 4675,-4948.78 4675,-4904.78 5006,-4904.78 5006,-4948.78"/>
<text text-anchor="middle" x="4840.5" y="-4918.46" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge141" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4902.81,-4948.85C4954.46,-4969.22 5028.73,-5002.79 5085,-5045.78 5104.27,-5060.5 5099.53,-5075.51 5121,-5086.78 5155.61,-5104.94 5196,-5114.78 5234.97,-5119.76"/>
<polygon fill="black" stroke="black" points="5235.04,-5123.29 5245.38,-5120.98 5235.86,-5116.34 5235.04,-5123.29"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge142" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M4878.33,-4948.84C4930.33,-4978.73 5029.19,-5030.96 5121,-5053.78 5465.4,-5139.39 6408.83,-4971.34 6715,-5150.78 6740.53,-5165.74 6725.16,-5192.36 6751,-5206.78 6860.27,-5267.76 7751.87,-5226.61 7877,-5227.78 8283.2,-5231.57 8385.74,-5255.79 8791,-5227.78 8807.12,-5226.66 8810.94,-5224.49 8827,-5222.78 8877.3,-5217.41 8932.36,-5212.87 8981.81,-5209.28"/>
<polygon fill="black" stroke="black" points="8982.23,-5212.76 8991.95,-5208.55 8981.73,-5205.78 8982.23,-5212.76"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge143" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M4992.06,-4904.77C5033.73,-4899.54 5079.04,-4894.65 5121,-4891.78 5489.08,-4866.62 5928.69,-4872.25 6117.19,-4876.36"/>
<polygon fill="black" stroke="black" points="6117.26,-4879.86 6127.34,-4876.58 6117.42,-4872.86 6117.26,-4879.86"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge144" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4878.24,-4904.6C4935,-4867.92 5041.97,-4788.67 5085,-4688.78 5132.63,-4578.2 5046.59,-2616.44 5121,-2521.78 5373.4,-2200.68 6684.56,-2066.63 7139.41,-2029.32"/>
<polygon fill="black" stroke="black" points="7139.98,-2032.79 7149.66,-2028.49 7139.41,-2025.81 7139.98,-2032.79"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge145" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M4921.39,-4904.74C4977.01,-4890.04 5053.09,-4871.2 5121,-4858.78 5146.45,-4854.12 5173.34,-4849.92 5199.94,-4846.19"/>
<polygon fill="black" stroke="black" points="5200.69,-4849.62 5210.12,-4844.78 5199.73,-4842.68 5200.69,-4849.62"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge146" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5006.22,-4926.78C5039.31,-4926.78 5074.97,-4926.78 5110.81,-4926.78"/>
<polygon fill="black" stroke="black" points="5110.92,-4930.28 5120.92,-4926.78 5110.92,-4923.28 5110.92,-4930.28"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node103" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node103"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4933.5,-4679.78 4747.5,-4679.78 4747.5,-4643.78 4933.5,-4643.78 4933.5,-4679.78"/>
<text text-anchor="middle" x="4840.5" y="-4658.08" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node104" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node104"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-4558.78 1260.5,-4558.78 1260.5,-4522.78 1490.5,-4522.78 1490.5,-4558.78"/>
<text text-anchor="middle" x="1375.5" y="-4535.48" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node105" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node105"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5024,-4440.28 4657,-4440.28 4657,-4403.28 5024,-4403.28 5024,-4440.28"/>
<text text-anchor="middle" x="4840.5" y="-4415.33" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node106" class="node">
<title>tg_client._write_md</title>
<g id="a_node106"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5465,-4709.78 5328,-4709.78 5328,-4673.78 5465,-4673.78 5465,-4709.78"/>
<text text-anchor="middle" x="5396.5" y="-4688.53" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge147" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5443.72,-4709.85C5503.63,-4732.39 5611.86,-4770.11 5708,-4787.78 5815.53,-4807.54 5937.94,-4815.63 6035.02,-4818.74"/>
<polygon fill="black" stroke="black" points="6035.12,-4822.24 6045.23,-4819.05 6035.34,-4815.24 6035.12,-4822.24"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node107" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node107"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7535.5,-4036.28 7056.5,-4036.28 7056.5,-3993.28 7535.5,-3993.28 7535.5,-4036.28"/>
<text text-anchor="middle" x="7296" y="-4006.63" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge148" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7535.71,-4028.46C7661.06,-4030.06 7797.5,-4021.11 7841,-3978.78 7902.58,-3918.85 7815.67,-3653.97 7877,-3593.78 7927.65,-3544.07 8129.97,-3547.21 8247.4,-3553.63"/>
<polygon fill="black" stroke="black" points="8247.27,-3557.12 8257.45,-3554.19 8247.66,-3550.14 8247.27,-3557.12"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node108" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node108"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6344.5,-4290.78 6078.5,-4290.78 6078.5,-4254.78 6344.5,-4254.78 6344.5,-4290.78"/>
<text text-anchor="middle" x="6211.5" y="-4267.99" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge149" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6334.22,-4254.76C6443.3,-4233.54 6602.94,-4189.42 6715,-4101.78 6738.31,-4083.55 6725.44,-4060.69 6751,-4045.78 6880.31,-3970.33 7057.65,-3976.32 7174.21,-3991.89"/>
<polygon fill="black" stroke="black" points="7173.86,-3995.38 7184.24,-3993.27 7174.82,-3988.44 7173.86,-3995.38"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node109" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node109"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3225,-3485.78 2986,-3485.78 2986,-3449.78 3225,-3449.78 3225,-3485.78"/>
<text text-anchor="middle" x="3105.5" y="-3463.73" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge150" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3225.21,-3466.04C3505.9,-3462.09 4232.48,-3452.78 4839.5,-3452.78 4839.5,-3452.78 4839.5,-3452.78 5397.5,-3452.78 5999.52,-3452.78 6149.39,-3483.73 6751,-3505.78 7321.98,-3526.7 8008.98,-3549.26 8246.94,-3556.99"/>
<polygon fill="black" stroke="black" points="8247.14,-3560.5 8257.25,-3557.33 8247.37,-3553.5 8247.14,-3560.5"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node110" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node110"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5085,-4346.28 4596,-4346.28 4596,-4303.28 5085,-4303.28 5085,-4346.28"/>
<text text-anchor="middle" x="4840.5" y="-4316.63" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node111" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node111"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5608.5,-4397.28 5184.5,-4397.28 5184.5,-4352.28 5608.5,-4352.28 5608.5,-4397.28"/>
<text text-anchor="middle" x="5396.5" y="-4366.4" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node112" class="node">
<title>tg_client._extract_author</title>
<g id="a_node112"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6574.5,-4724.78 5848.5,-4724.78 5848.5,-4654.78 6574.5,-4654.78 6574.5,-4724.78"/>
<text text-anchor="middle" x="6211.5" y="-4675.98" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge151" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6574.58,-4708.63C6633.54,-4711.69 6693.97,-4714.83 6751,-4717.78 6859.31,-4723.38 6979.76,-4729.58 7079.73,-4734.72"/>
<polygon fill="black" stroke="black" points="7079.79,-4738.23 7089.95,-4735.25 7080.15,-4731.24 7079.79,-4738.23"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node113" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node113"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="7435,-4486.78 7157,-4486.78 7157,-4450.78 7435,-4450.78 7435,-4486.78"/>
<text text-anchor="middle" x="7296" y="-4463.99" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node114" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node114"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8482,-3638.78 8186,-3638.78 8186,-3602.78 8482,-3602.78 8482,-3638.78"/>
<text text-anchor="middle" x="8334" y="-3615.08" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node115" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node115"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5083,-4095.28 4598,-4095.28 4598,-4046.28 5083,-4046.28 5083,-4095.28"/>
<text text-anchor="middle" x="4840.5" y="-4061.15" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge154" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4853.69,-4046.03C4895.48,-3959.72 5033.26,-3663.05 5085,-3400.78 5103.92,-3304.88 5059.66,-2597.89 5121,-2521.78 5590.79,-1938.85 6008.42,-2192 6751,-2096.78 6871.13,-2081.38 7737.98,-2033.11 7841,-2096.78 7871.43,-2115.59 7847.16,-2149.05 7877,-2168.78 7985.26,-2240.36 8141.42,-2231.88 8240.02,-2216.43"/>
<polygon fill="black" stroke="black" points="8240.66,-2219.87 8249.97,-2214.82 8239.54,-2212.96 8240.66,-2219.87"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge152" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4914.04,-4095.3C5061.55,-4143.96 5407.95,-4252.14 5708,-4299.78 5942.16,-4336.95 7630.49,-4467.86 7841,-4358.78 7865.63,-4346.01 7852.75,-4321.27 7877,-4307.78 7992.13,-4243.74 8149.86,-4251.44 8246.42,-4264.74"/>
<polygon fill="black" stroke="black" points="8246.04,-4268.23 8256.43,-4266.17 8247.03,-4261.3 8246.04,-4268.23"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node116" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node116"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5529.5,-4006.78 5263.5,-4006.78 5263.5,-3970.78 5529.5,-3970.78 5529.5,-4006.78"/>
<text text-anchor="middle" x="5396.5" y="-3984.61" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge153" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M5007.34,-4046.23C5089.26,-4034.11 5186.72,-4019.68 5263.49,-4008.32"/>
<polygon fill="black" stroke="black" points="5264.32,-4011.73 5273.7,-4006.81 5263.3,-4004.81 5264.32,-4011.73"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node117" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node117"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6337,-3592.78 6086,-3592.78 6086,-3556.78 6337,-3556.78 6337,-3592.78"/>
<text text-anchor="middle" x="6211.5" y="-3569.99" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge155" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5405.34,-3970.51C5434.23,-3905.85 5541.7,-3687.13 5708,-3601.78 5829.61,-3539.37 5990.26,-3543.16 6096.81,-3555.54"/>
<polygon fill="black" stroke="black" points="6096.6,-3559.04 6106.95,-3556.76 6097.44,-3552.09 6096.6,-3559.04"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node118" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node118"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7477.5,-3638.78 7114.5,-3638.78 7114.5,-3602.78 7477.5,-3602.78 7477.5,-3638.78"/>
<text text-anchor="middle" x="7296" y="-3615.08" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge158" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6337.2,-3580.08C6525.28,-3588.07 6882.97,-3603.27 7104.02,-3612.66"/>
<polygon fill="black" stroke="black" points="7103.98,-3616.16 7114.12,-3613.09 7104.28,-3609.17 7103.98,-3616.16"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge156" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7477.55,-3605.21C7615.61,-3597.65 7790.59,-3598.91 7841,-3647.78 7912.39,-3716.99 7818.33,-4013.5 7877,-4093.78 7963.93,-4212.74 8140.23,-4256.27 8246.34,-4272.02"/>
<polygon fill="black" stroke="black" points="8245.99,-4275.51 8256.38,-4273.46 8246.98,-4268.58 8245.99,-4275.51"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge157" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7477.75,-3620.78C7675.05,-3620.78 7987.81,-3620.78 8175.44,-3620.78"/>
<polygon fill="black" stroke="black" points="8175.67,-3624.28 8185.67,-3620.78 8175.67,-3617.28 8175.67,-3624.28"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node119" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node119"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="4170,-2464.28 3734,-2464.28 3734,-2423.28 4170,-2423.28 4170,-2464.28"/>
<text text-anchor="middle" x="3952" y="-2436.53" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge159" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M3959.34,-2464.64C3996.46,-2582.77 4197.88,-3170.59 4596,-3400.78 4800.32,-3518.91 6480.1,-3524.87 6715,-3547.78 6867.01,-3562.61 7040.73,-3585.23 7158.11,-3601.35"/>
<polygon fill="black" stroke="black" points="7157.84,-3604.85 7168.22,-3602.75 7158.79,-3597.92 7157.84,-3604.85"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node120" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node120"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7468,-5308.28 7124,-5308.28 7124,-5267.28 7468,-5267.28 7468,-5308.28"/>
<text text-anchor="middle" x="7296" y="-5280.53" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge160" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7468.06,-5280.17C7593.23,-5264.62 7755.54,-5221.56 7841,-5105.78 7890.9,-5038.18 7819.11,-3654.68 7877,-3593.78 7925.96,-3542.27 8129.46,-3546.18 8247.4,-3553.18"/>
<polygon fill="black" stroke="black" points="8247.3,-3556.68 8257.49,-3553.8 8247.73,-3549.7 8247.3,-3556.68"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge161" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7468.27,-5294.53C7909.57,-5310.08 9076.55,-5338.98 9444,-5226.78 9532.04,-5199.89 9621.13,-5135.7 9665.9,-5100.28"/>
<polygon fill="black" stroke="black" points="9668.11,-5103 9673.74,-5094.02 9663.74,-5097.53 9668.11,-5103"/>
</g>
<!-- tg_client._load_progress -->
<g id="node121" class="node">
<title>tg_client._load_progress</title>
<g id="a_node121"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2098,-4427.78 1768,-4427.78 1768,-4391.78 2098,-4391.78 2098,-4427.78"/>
<text text-anchor="middle" x="1933" y="-4403.62" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge162" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2098.19,-4404.35C2293.1,-4404.8 2622.47,-4427.8 2867,-4559.78 3143.56,-4709.04 3061.54,-4943.99 3344,-5081.78 3541.82,-5178.28 7074.9,-5374.78 7295,-5374.78 7295,-5374.78 7295,-5374.78 8335,-5374.78 8828.41,-5374.78 8991.91,-5521.44 9444,-5323.78 9553.94,-5275.71 9642.75,-5156.23 9678.5,-5102.59"/>
<polygon fill="black" stroke="black" points="9681.6,-5104.25 9684.17,-5093.97 9675.75,-5100.4 9681.6,-5104.25"/>
</g>
<!-- tg_client._save_progress -->
<g id="node122" class="node">
<title>tg_client._save_progress</title>
<g id="a_node122"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2615,-4238.78 2386,-4238.78 2386,-4202.78 2615,-4202.78 2615,-4238.78"/>
<text text-anchor="middle" x="2500.5" y="-4216.61" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node123" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node123"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3239,-4069.78 2972,-4069.78 2972,-4033.78 3239,-4033.78 3239,-4069.78"/>
<text text-anchor="middle" x="3105.5" y="-4045.9" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge163" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3239.05,-4045.04C3561.25,-4028.85 4411.21,-3987.21 5121,-3961.78 5196.56,-3959.07 7785.34,-3915.94 7841,-3864.78 7930.45,-3782.55 7788.64,-3677.18 7877,-3593.78 7928.54,-3545.13 8130,-3547.8 8247.19,-3553.87"/>
<polygon fill="black" stroke="black" points="8247.04,-3557.37 8257.21,-3554.41 8247.41,-3550.38 8247.04,-3557.37"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node124" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node124"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2063.5,-4023.78 1802.5,-4023.78 1802.5,-3987.78 2063.5,-3987.78 2063.5,-4023.78"/>
<text text-anchor="middle" x="1933" y="-3999.9" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge164" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2063.69,-4003.08C2816.81,-3987.35 6598.34,-3907.13 6715,-3880.78 6732.08,-3876.92 6733.94,-3868.71 6751,-3864.78 6810.04,-3851.17 7795.69,-3867.01 7841,-3826.78 7919.35,-3757.2 7800.04,-3664.89 7877,-3593.78 7929.05,-3545.68 8130.31,-3548.14 8247.33,-3554.02"/>
<polygon fill="black" stroke="black" points="8247.17,-3557.52 8257.34,-3554.55 8247.53,-3550.53 8247.17,-3557.52"/>
</g>
<!-- tg_client._save_message -->
<g id="node125" class="node">
<title>tg_client._save_message</title>
<g id="a_node125"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4560,-4407.28 3344,-4407.28 3344,-4292.28 4560,-4292.28 4560,-4407.28"/>
<text text-anchor="middle" x="3952" y="-4325.66" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge166" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4217.75,-4292.23C4333.68,-4267.54 4471.41,-4238.89 4596,-4214.78 5088.78,-4119.42 5211.07,-4088.39 5708,-4017.78 5826,-4001.01 7756.47,-3872.79 7841,-3788.78 7941.57,-3688.82 7785.98,-3580.5 7877,-3471.78 7919.88,-3420.56 7981.15,-3388.13 8044.93,-3367.73"/>
<polygon fill="black" stroke="black" points="8046.25,-3370.99 8054.77,-3364.68 8044.18,-3364.3 8046.25,-3370.99"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge167" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4439.65,-4292.24C5228.95,-4198.8 6702.2,-4023.78 6715,-4017.78 6734.93,-4008.44 6730.71,-3992.31 6751,-3983.78 6862.73,-3936.79 7752.6,-4023.7 7841,-3940.78 7897.54,-3887.74 7821.39,-3647.8 7877,-3593.78 7927.83,-3544.4 8129.57,-3547.36 8246.99,-3553.67"/>
<polygon fill="black" stroke="black" points="8246.86,-3557.17 8257.04,-3554.23 8247.25,-3550.18 8246.86,-3557.17"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge178" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3977.75,-4292.03C4073.6,-4065.36 4421.81,-3212.59 4560,-2472.78 4585.99,-2333.63 4538.88,-1966.3 4596,-1836.78 4612.54,-1799.28 5668.68,-717.71 5708,-699.78 5927.37,-599.74 7635.89,-635.1 7877,-634.78 8283.22,-634.24 8384.78,-634.16 8791,-634.78 8936.11,-635 9338.76,-536.87 9444,-636.78 9496.7,-686.81 9430.44,-1236.64 9480,-1289.78 9501.29,-1312.61 9531.35,-1323.49 9562.28,-1327.77"/>
<polygon fill="black" stroke="black" points="9562.01,-1331.27 9572.34,-1328.94 9562.81,-1324.31 9562.01,-1331.27"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge165" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4009.12,-4407.45C4151.87,-4553.46 4522.69,-4928.28 4596,-4957.78 4717.85,-5006.8 6696.63,-4935.43 7186.14,-4916.95"/>
<polygon fill="black" stroke="black" points="7186.52,-4920.44 7196.38,-4916.57 7186.26,-4913.45 7186.52,-4920.44"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge168" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4453.16,-4407.33C4492.42,-4426.31 4528.85,-4450.38 4560,-4480.78 4608.76,-4528.36 4545.33,-4584.23 4596,-4629.78 4633.67,-4663.64 4688.82,-4672.97 4737.11,-4673.24"/>
<polygon fill="black" stroke="black" points="4737.32,-4676.73 4747.3,-4673.16 4737.27,-4669.73 4737.32,-4676.73"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge169" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4560.22,-4399.1C4590.34,-4401.54 4619.28,-4403.89 4646.37,-4406.09"/>
<polygon fill="black" stroke="black" points="4646.41,-4409.61 4656.66,-4406.93 4646.97,-4402.63 4646.41,-4409.61"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge170" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4445.18,-4407.38C4487.03,-4426.21 4526.21,-4450.24 4560,-4480.78 4598.48,-4515.55 4555.43,-4559.47 4596,-4591.78 4681.34,-4659.73 4976.9,-4620.14 5085,-4634.78 5164.91,-4645.6 5255.53,-4662.81 5318.15,-4675.49"/>
<polygon fill="black" stroke="black" points="5317.46,-4678.92 5327.95,-4677.49 5318.85,-4672.06 5317.46,-4678.92"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge171" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4560.42,-4295.67C4572.38,-4295 4584.25,-4294.37 4596,-4293.78 5139.25,-4266.63 5786.52,-4268.57 6068.02,-4271.1"/>
<polygon fill="black" stroke="black" points="6068.26,-4274.6 6078.29,-4271.2 6068.32,-4267.6 6068.26,-4274.6"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge172" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4560.22,-4332.65C4568.85,-4332.41 4577.37,-4332.17 4585.79,-4331.93"/>
<polygon fill="black" stroke="black" points="4586.1,-4335.43 4596,-4331.65 4585.9,-4328.43 4586.1,-4335.43"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge173" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4560.05,-4360.3C4777.89,-4364.07 5009.99,-4368.1 5174.13,-4370.94"/>
<polygon fill="black" stroke="black" points="5174.29,-4374.45 5184.35,-4371.12 5174.41,-4367.45 5174.29,-4374.45"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge174" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4240.55,-4407.34C4587.12,-4474.62 5187.86,-4584.52 5708,-4645.78 5750.15,-4650.74 5794.34,-4655.4 5838.3,-4659.7"/>
<polygon fill="black" stroke="black" points="5837.98,-4663.18 5848.27,-4660.67 5838.66,-4656.22 5837.98,-4663.18"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge175" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4135.88,-4292.22C4324.06,-4233 4609.25,-4143.24 4751.85,-4098.36"/>
<polygon fill="black" stroke="black" points="4752.96,-4101.68 4761.45,-4095.34 4750.86,-4095.01 4752.96,-4101.68"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge176" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3802.09,-4407.39C3821.06,-4417.9 3871.04,-4425.28 3952,-4425.28 4022.21,-4425.28 4069.12,-4419.73 4092.71,-4411.4"/>
<polygon fill="black" stroke="black" points="4094.15,-4414.59 4101.91,-4407.39 4091.35,-4408.18 4094.15,-4414.59"/>
</g>
<!-- tg_client._save_media -->
<g id="node126" class="node">
<title>tg_client._save_media</title>
<g id="a_node126"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5637.5,-4495.78 5155.5,-4495.78 5155.5,-4441.78 5637.5,-4441.78 5637.5,-4495.78"/>
<text text-anchor="middle" x="5396.5" y="-4458.18" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge177" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4272.95,-4407.28C4375.77,-4423.54 4490.39,-4439.37 4596,-4448.78 4779.37,-4465.12 4987.26,-4469.9 5145.08,-4470.71"/>
<polygon fill="black" stroke="black" points="5145.39,-4474.21 5155.4,-4470.76 5145.42,-4467.21 5145.39,-4474.21"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge180" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5628.52,-4441.74C5645,-4432.44 5659.87,-4420.65 5672,-4405.78 5725.2,-4340.6 5650.97,-2953.64 5708,-2891.78 5824.18,-2765.74 8663.64,-2652.05 8791,-2766.78 8848.11,-2818.22 8780.48,-3049.59 8827,-3110.78 8874.82,-3173.68 8960.19,-3203.92 9028.86,-3218.44"/>
<polygon fill="black" stroke="black" points="9028.37,-3221.91 9038.87,-3220.47 9029.77,-3215.05 9028.37,-3221.91"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge181" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5637.76,-4480.39C5661.49,-4481.3 5685.21,-4482.12 5708,-4482.78 5826.45,-4486.19 7749.67,-4571.28 7841,-4495.78 7906.57,-4441.57 7813.06,-4363.9 7877,-4307.78 7982.45,-4215.22 8159.95,-4237.7 8259.54,-4260.42"/>
<polygon fill="black" stroke="black" points="8258.98,-4263.89 8269.52,-4262.76 8260.58,-4257.07 8258.98,-4263.89"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge179" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5637.75,-4480.04C5650.19,-4486.65 5661.76,-4494.8 5672,-4504.78 5745.78,-4576.69 5631.52,-4664.74 5708,-4733.78 5761.29,-4781.88 5953.25,-4779.35 6083.88,-4771.37"/>
<polygon fill="black" stroke="black" points="6084.2,-4774.86 6093.96,-4770.74 6083.76,-4767.87 6084.2,-4774.86"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge182" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5637.82,-4468.78C6035.84,-4468.78 6820.32,-4468.78 7146.9,-4468.78"/>
<polygon fill="black" stroke="black" points="7146.9,-4472.28 7156.9,-4468.78 7146.9,-4465.28 7146.9,-4472.28"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node127" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node127"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3308,-4329.78 2903,-4329.78 2903,-4287.78 3308,-4287.78 3308,-4329.78"/>
<text text-anchor="middle" x="3105.5" y="-4300.69" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge183" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3308.24,-4318.57C3316.57,-4318.98 3325.06,-4319.39 3333.69,-4319.81"/>
<polygon fill="black" stroke="black" points="3333.72,-4323.31 3343.88,-4320.3 3334.06,-4316.32 3333.72,-4323.31"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node128" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node128"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7581,-4280.78 7011,-4280.78 7011,-4236.78 7581,-4236.78 7581,-4280.78"/>
<text text-anchor="middle" x="7296" y="-4250.46" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge184" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7581.04,-4275.56C7692.77,-4275.5 7803.37,-4264.83 7841,-4226.78 7900.06,-4167.06 7825.22,-3537.9 7877,-3471.78 7918.66,-3418.57 7980.26,-3385.48 8044.79,-3365.08"/>
<polygon fill="black" stroke="black" points="8046.21,-3368.31 8054.75,-3362.04 8044.17,-3361.62 8046.21,-3368.31"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge185" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7480.01,-4280.79C7589.62,-4286.18 7728.96,-4278.92 7841,-4226.78 7862.09,-4216.96 7855.94,-4198.65 7877,-4188.78 8061.28,-4102.37 8627.14,-4250.5 8791,-4129.78 9091.99,-3908.03 9129.24,-3386.93 9133.85,-3260.02"/>
<polygon fill="black" stroke="black" points="9137.35,-3260.05 9134.17,-3249.94 9130.35,-3259.82 9137.35,-3260.05"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge186" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7581.06,-4247.91C7881.67,-4236.01 8369.88,-4215.56 8791,-4192.78 8871.88,-4188.4 8963.41,-4182.49 9031.63,-4177.9"/>
<polygon fill="black" stroke="black" points="9032.21,-4181.37 9041.95,-4177.2 9031.74,-4174.39 9032.21,-4181.37"/>
</g>
<!-- tg_client._download_messages -->
<g id="node129" class="node">
<title>tg_client._download_messages</title>
<g id="a_node129"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2855.5,-4314.28 2145.5,-4314.28 2145.5,-4257.28 2855.5,-4257.28 2855.5,-4314.28"/>
<text text-anchor="middle" x="2500.5" y="-4274.44" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge187" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2855.76,-4299.29C2868.17,-4299.76 2880.47,-4300.23 2892.55,-4300.69"/>
<polygon fill="black" stroke="black" points="2892.52,-4304.2 2902.65,-4301.08 2892.79,-4297.2 2892.52,-4304.2"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node130" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node130"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2671.5,-4604.78 2329.5,-4604.78 2329.5,-4568.78 2671.5,-4568.78 2671.5,-4604.78"/>
<text text-anchor="middle" x="2500.5" y="-4581.08" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node131" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node131"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2867,-3699.28 2134,-3699.28 2134,-3634.28 2867,-3634.28 2867,-3699.28"/>
<text text-anchor="middle" x="2500.5" y="-3653.73" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge188" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2677.9,-3699.32C2950.1,-3746.62 3489.36,-3828.78 3951,-3828.78 3951,-3828.78 3951,-3828.78 5397.5,-3828.78 5690.31,-3828.78 6425.72,-3855.12 6715,-3809.78 6731.53,-3807.19 6734.51,-3801.58 6751,-3798.78 6810.75,-3788.65 7796.33,-3796.73 7841,-3755.78 7934.78,-3669.79 7794.69,-3568.8 7877,-3471.78 7920.14,-3420.92 7981.43,-3388.61 8045.11,-3368.22"/>
<polygon fill="black" stroke="black" points="8046.43,-3371.47 8054.94,-3365.17 8044.35,-3364.79 8046.43,-3371.47"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge189" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2710.94,-3634.25C2992.23,-3593.45 3507.99,-3528.78 3951,-3528.78 3951,-3528.78 3951,-3528.78 5397.5,-3528.78 5974.17,-3528.78 7825.08,-3553 8246.88,-3558.62"/>
<polygon fill="black" stroke="black" points="8247.13,-3562.13 8257.17,-3558.76 8247.22,-3555.13 8247.13,-3562.13"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge190" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2519.56,-3634.15C2627.18,-3444.54 3204.56,-2492.78 3951,-2492.78 3951,-2492.78 3951,-2492.78 6212.5,-2492.78 6936.33,-2492.78 7120,-2537.69 7841,-2473.78 7857.16,-2472.35 7860.92,-2469.88 7877,-2467.78 8297.54,-2412.88 8404.64,-2416.33 8827,-2377.78 8884.15,-2372.56 8947.29,-2366.99 9001.42,-2362.26"/>
<polygon fill="black" stroke="black" points="9001.76,-2365.75 9011.41,-2361.39 9001.15,-2358.77 9001.76,-2365.75"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge191" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2506.1,-3633.99C2546.47,-3360.44 2865.03,-1467.78 3951,-1467.78 3951,-1467.78 3951,-1467.78 6212.5,-1467.78 6302.98,-1467.78 7767.91,-1433.45 7841,-1486.78 7881.87,-1516.6 7837.63,-1563 7877,-1594.78 7975.86,-1674.58 8128.57,-1674.34 8229.64,-1662.83"/>
<polygon fill="black" stroke="black" points="8230.35,-1666.27 8239.87,-1661.6 8229.52,-1659.32 8230.35,-1666.27"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge192" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2578.17,-3634.26C2658.19,-3601.15 2787.85,-3549.84 2903,-3514.78 2936.01,-3504.73 2972.62,-3495.6 3005.48,-3488.12"/>
<polygon fill="black" stroke="black" points="3006.56,-3491.47 3015.55,-3485.86 3005.02,-3484.64 3006.56,-3491.47"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge193" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2532.23,-3699.5C2637.01,-3811.05 2979.18,-4175.36 3077.72,-4280.27"/>
<polygon fill="black" stroke="black" points="3075.26,-4282.76 3084.66,-4287.65 3080.36,-4277.97 3075.26,-4282.76"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge194" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2559.54,-3699.44C2635.74,-3740.61 2774.9,-3809.95 2903,-3842.78 3846.12,-4084.5 4116.37,-3938.5 5085,-4036.78 5826.44,-4112.01 6008.52,-4162.65 6751,-4226.78 6831.79,-4233.76 6919.46,-4239.65 7000.34,-4244.4"/>
<polygon fill="black" stroke="black" points="7000.5,-4247.91 7010.69,-4245 7000.91,-4240.93 7000.5,-4247.91"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node132" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node132"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-4289.78 1019,-4289.78 1019,-4215.78 1732,-4215.78 1732,-4289.78"/>
<text text-anchor="middle" x="1375.5" y="-4237.95" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge195" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1476.03,-4215.69C1553.82,-4182.56 1660.41,-4127.53 1732,-4051.78 1756.85,-4025.49 1738.82,-4000.16 1768,-3978.78 2033.32,-3784.4 2170.6,-3866.78 2499.5,-3866.78 2499.5,-3866.78 2499.5,-3866.78 5397.5,-3866.78 5690.35,-3866.78 6425.86,-3884.23 6715,-3837.78 6731.52,-3835.12 6734.5,-3829.52 6751,-3826.78 6810.77,-3816.87 7795.11,-3831.34 7841,-3791.78 7908.74,-3733.37 7810.51,-3653.6 7877,-3593.78 7929.68,-3546.38 8130.69,-3548.56 8247.5,-3554.21"/>
<polygon fill="black" stroke="black" points="8247.33,-3557.71 8257.49,-3554.72 8247.68,-3550.72 8247.33,-3557.71"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge196" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1732.04,-4285.76C2288.06,-4337.54 3301.2,-4432.76 3308,-4439.78 3393.25,-4527.73 3258.36,-4902.21 3344,-4989.78 3477.59,-5126.38 6356.11,-5250.36 7113.66,-5280.71"/>
<polygon fill="black" stroke="black" points="7113.7,-5284.22 7123.84,-5281.12 7113.98,-5277.22 7113.7,-5284.22"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge197" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1507.44,-4289.79C1616.89,-4320.72 1769.01,-4363.71 1858.33,-4388.96"/>
<polygon fill="black" stroke="black" points="1857.53,-4392.37 1868.1,-4391.72 1859.43,-4385.63 1857.53,-4392.37"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge198" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1732.21,-4242.64C1952.35,-4236.37 2221.46,-4228.7 2375.42,-4224.31"/>
<polygon fill="black" stroke="black" points="2375.96,-4227.8 2385.85,-4224.02 2375.76,-4220.8 2375.96,-4227.8"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge199" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1694.7,-4215.77C2072.42,-4171.83 2685.83,-4100.48 2961.89,-4068.37"/>
<polygon fill="black" stroke="black" points="2962.44,-4071.83 2971.97,-4067.19 2961.63,-4064.87 2962.44,-4071.83"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge200" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1459.96,-4215.67C1577.21,-4163.53 1787,-4070.25 1882.37,-4027.85"/>
<polygon fill="black" stroke="black" points="1883.8,-4031.04 1891.51,-4023.78 1880.95,-4024.65 1883.8,-4031.04"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge201" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1732.21,-4263.23C1860.73,-4267.01 2005.95,-4271.28 2135.21,-4275.07"/>
<polygon fill="black" stroke="black" points="2135.18,-4278.57 2145.27,-4275.37 2135.38,-4271.58 2135.18,-4278.57"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node133" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node133"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7612.5,-4218.28 6979.5,-4218.28 6979.5,-4157.28 7612.5,-4157.28 7612.5,-4218.28"/>
<text text-anchor="middle" x="7296" y="-4175.53" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge202" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7612.63,-4211.82C7698.01,-4201.64 7782.79,-4173.23 7841,-4109.78 7937,-4005.14 7788.97,-3583.2 7877,-3471.78 7918.83,-3418.83 7980.39,-3385.82 8044.83,-3365.43"/>
<polygon fill="black" stroke="black" points="8046.24,-3368.66 8054.78,-3362.38 8044.19,-3361.96 8046.24,-3368.66"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge203" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7612.81,-4211.25C7697.94,-4200.98 7782.53,-4172.67 7841,-4109.78 7919.27,-4025.6 7795.92,-3675.25 7877,-3593.78 7927.06,-3543.48 8129.61,-3546.85 8247.24,-3553.46"/>
<polygon fill="black" stroke="black" points="8247.12,-3556.96 8257.3,-3554.05 8247.52,-3549.97 8247.12,-3556.96"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge204" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7612.51,-4157.69C7698.26,-4150.15 7791.15,-4142.57 7877,-4136.78 7978.44,-4129.94 8708.21,-4152.79 8791,-4093.78 9083.87,-3885 9127.17,-3384.75 9133.45,-3260.22"/>
<polygon fill="black" stroke="black" points="9136.96,-3260.14 9133.93,-3249.99 9129.97,-3259.82 9136.96,-3260.14"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge205" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7612.62,-4184.86C8035.52,-4180.95 8763.89,-4174.21 9031.78,-4171.73"/>
<polygon fill="black" stroke="black" points="9031.91,-4175.23 9041.88,-4171.64 9031.85,-4168.23 9031.91,-4175.23"/>
</g>
<!-- tg_client.main -->
<g id="node134" class="node">
<title>tg_client.main</title>
<g id="a_node134"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-4455.78 366.5,-4455.78 366.5,-4363.78 934.5,-4363.78 934.5,-4455.78"/>
<text text-anchor="middle" x="650.5" y="-4390.74" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge206" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M899.97,-4455.8C939.66,-4461.77 980.37,-4467.08 1019,-4470.78 1423.07,-4509.44 1526.08,-4494.78 1932,-4494.78 1932,-4494.78 1932,-4494.78 3106.5,-4494.78 3428.6,-4494.78 4415.5,-4610.52 4737.05,-4649.29"/>
<polygon fill="black" stroke="black" points="4736.94,-4652.81 4747.29,-4650.53 4737.78,-4645.86 4736.94,-4652.81"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge207" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M799.04,-4455.8C865.63,-4474.94 945.66,-4495.7 1019,-4508.78 1095.17,-4522.36 1181.61,-4530.31 1250.18,-4534.88"/>
<polygon fill="black" stroke="black" points="1249.95,-4538.38 1260.16,-4535.53 1250.41,-4531.39 1249.95,-4538.38"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge208" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M657.93,-4363.74C702,-4068.19 986.47,-2449.78 1932,-2449.78 1932,-2449.78 1932,-2449.78 2501.5,-2449.78 2933.78,-2449.78 3438.56,-2447.08 3723.92,-2445.3"/>
<polygon fill="black" stroke="black" points="3724,-2448.8 3733.98,-2445.24 3723.96,-2441.8 3724,-2448.8"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge209" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M934.86,-4400.43C1356.27,-4386.13 2173.03,-4356.85 2867,-4322.78 2875.38,-4322.37 2883.92,-4321.93 2892.55,-4321.48"/>
<polygon fill="black" stroke="black" points="2892.91,-4324.97 2902.71,-4320.95 2892.54,-4317.98 2892.91,-4324.97"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge210" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M733.05,-4455.95C805.55,-4494.25 915.74,-4545.83 1019,-4567.78 1485.62,-4666.96 2053.74,-4632.33 2330.98,-4605.77"/>
<polygon fill="black" stroke="black" points="2331.51,-4609.24 2341.13,-4604.79 2330.84,-4602.27 2331.51,-4609.24"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge211" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M731.37,-4363.75C805.29,-4321.61 918.59,-4258.17 1019,-4206.78 1346.76,-4039.01 1421.53,-3977.39 1768,-3852.78 1953.62,-3786.02 2173.89,-3733.45 2323.87,-3701.48"/>
<polygon fill="black" stroke="black" points="2325.04,-3704.81 2334.09,-3699.31 2323.58,-3697.96 2325.04,-3704.81"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge212" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M863.54,-4363.73C968.48,-4340.95 1093.82,-4313.73 1194.1,-4291.95"/>
<polygon fill="black" stroke="black" points="1195,-4295.34 1204.03,-4289.8 1193.52,-4288.5 1195,-4295.34"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge213" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M934.66,-4424.94C1226.35,-4438.24 1694.1,-4453.11 2098,-4436.78 2367.55,-4425.88 3076.64,-4477.51 3308,-4338.78 3333.38,-4323.56 3318.2,-4297.27 3344,-4282.78 3655.77,-4107.67 6079.58,-4154.75 6969.08,-4178.27"/>
<polygon fill="black" stroke="black" points="6969.06,-4181.77 6979.15,-4178.54 6969.24,-4174.78 6969.06,-4181.77"/>
</g>
<!-- clean_data._parse_date -->
<g id="node135" class="node">
<title>clean_data._parse_date</title>
<g id="a_node135"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8473.5,-5068.78 8194.5,-5068.78 8194.5,-5032.78 8473.5,-5032.78 8473.5,-5068.78"/>
<text text-anchor="middle" x="8334" y="-5045.08" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge214" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8473.75,-5052.86C8683.74,-5056.07 9094.81,-5062.62 9444,-5069.78 9488.16,-5070.68 9536.69,-5071.81 9579.23,-5072.84"/>
<polygon fill="black" stroke="black" points="9579.26,-5076.34 9589.35,-5073.09 9579.43,-5069.35 9579.26,-5076.34"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node136" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node136"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7449.5,-5038.78 7142.5,-5038.78 7142.5,-5002.78 7449.5,-5002.78 7449.5,-5038.78"/>
<text text-anchor="middle" x="7296" y="-5014.62" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge215" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7449.83,-5035.28C7591.66,-5044.96 7788.52,-5047.52 7841,-4993.78 7895.35,-4938.11 7823.34,-3650.12 7877,-3593.78 7925.94,-3542.39 8128.94,-3546.2 8246.94,-3553.17"/>
<polygon fill="black" stroke="black" points="8246.84,-3556.67 8257.03,-3553.78 8247.26,-3549.68 8246.84,-3556.67"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge216" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7449.59,-5025.2C7647.02,-5030.91 7988.77,-5040.81 8184.29,-5046.47"/>
<polygon fill="black" stroke="black" points="8184.26,-5049.97 8194.36,-5046.76 8184.46,-5042.98 8184.26,-5049.97"/>
</g>
<!-- clean_data._clean_media -->
<g id="node137" class="node">
<title>clean_data._clean_media</title>
<g id="a_node137"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7486,-5096.78 7106,-5096.78 7106,-5056.78 7486,-5056.78 7486,-5096.78"/>
<text text-anchor="middle" x="7296" y="-5069.71" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge217" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7486.08,-5092.47C7623.08,-5099.25 7792.42,-5096.59 7841,-5047.78 7899.07,-4989.43 7819.1,-4366.29 7877,-4307.78 7926.73,-4257.52 8128.4,-4264.17 8246.23,-4272.84"/>
<polygon fill="black" stroke="black" points="8246.08,-4276.34 8256.31,-4273.6 8246.6,-4269.36 8246.08,-4276.34"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge218" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7486.11,-5072.03C7687.03,-5066.99 8000.5,-5059.12 8184.43,-5054.51"/>
<polygon fill="black" stroke="black" points="8184.54,-5058.01 8194.45,-5054.26 8184.36,-5051.01 8184.54,-5058.01"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node138" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node138"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7498,-4100.78 7094,-4100.78 7094,-4054.78 7498,-4054.78 7498,-4100.78"/>
<text text-anchor="middle" x="7296" y="-4069.34" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge219" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7498.16,-4092.04C7632.62,-4096.78 7793.3,-4091.58 7841,-4044.78 7912.77,-3974.37 7805.72,-3664.69 7877,-3593.78 7927.31,-3543.73 8129.77,-3547 8247.31,-3553.53"/>
<polygon fill="black" stroke="black" points="8247.18,-3557.03 8257.37,-3554.11 8247.58,-3550.04 8247.18,-3557.03"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge221" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7498.18,-4092.74C7633.15,-4097.88 7794.44,-4092.87 7841,-4044.78 7890.4,-3993.75 7838.28,-2826.33 7877,-2766.78 7952.72,-2650.32 8109.17,-2594.53 8217.55,-2568.91"/>
<polygon fill="black" stroke="black" points="8218.6,-2572.26 8227.55,-2566.6 8217.02,-2565.44 8218.6,-2572.26"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge220" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7498.29,-4075.64C7719.47,-4073.29 8065.69,-4069.62 8234.21,-4067.83"/>
<polygon fill="black" stroke="black" points="8234.35,-4071.33 8244.31,-4067.72 8234.27,-4064.33 8234.35,-4071.33"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node139" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node139"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7504,-4984.78 7088,-4984.78 7088,-4948.78 7504,-4948.78 7504,-4984.78"/>
<text text-anchor="middle" x="7296" y="-4960.62" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node140" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node140"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8547.5,-5218.78 8120.5,-5218.78 8120.5,-5182.78 8547.5,-5182.78 8547.5,-5218.78"/>
<text text-anchor="middle" x="8334" y="-5194.62" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node141" class="node">
<title>clean_data.main</title>
<g id="a_node141"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6307.5,-5044.78 6115.5,-5044.78 6115.5,-5008.78 6307.5,-5008.78 6307.5,-5044.78"/>
<text text-anchor="middle" x="6211.5" y="-5021.48" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge222" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6307.62,-5026.25C6492.66,-5025.23 6902.99,-5022.95 7132.16,-5021.68"/>
<polygon fill="black" stroke="black" points="7132.28,-5025.18 7142.26,-5021.63 7132.24,-5018.18 7132.28,-5025.18"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge223" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6307.62,-5031.17C6483.28,-5039.29 6861.96,-5056.78 7095.96,-5067.59"/>
<polygon fill="black" stroke="black" points="7095.81,-5071.08 7105.96,-5068.05 7096.13,-5064.09 7095.81,-5071.08"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge224" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6307.53,-5034.66C6423.61,-5038.45 6616.64,-5024.72 6715,-4905.78 6768.73,-4840.8 6693.83,-4209.75 6751,-4147.78 6855.75,-4034.24 7046.21,-4036.49 7171.67,-4053.37"/>
<polygon fill="black" stroke="black" points="7171.33,-4056.86 7181.72,-4054.77 7172.3,-4049.93 7171.33,-4056.86"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge225" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6307.81,-5020.6C6415.42,-5013.71 6595.75,-5002.39 6751,-4993.78 6858.6,-4987.81 6978.2,-4981.81 7077.8,-4976.98"/>
<polygon fill="black" stroke="black" points="7078.17,-4980.47 7087.99,-4976.49 7077.83,-4973.47 7078.17,-4980.47"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge226" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6307.85,-5011.07C6417.63,-4998.54 6597.84,-4995.7 6715,-5085.78 6749.48,-5112.29 6715.22,-5152.05 6751,-5176.78 6805.83,-5214.67 7687.06,-5208.9 8109.94,-5203.89"/>
<polygon fill="black" stroke="black" points="8110.19,-5207.39 8120.15,-5203.77 8110.11,-5200.39 8110.19,-5207.39"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node142" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node142"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7411.5,-3746.78 7180.5,-3746.78 7180.5,-3710.78 7411.5,-3710.78 7411.5,-3746.78"/>
<text text-anchor="middle" x="7296" y="-3724.73" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node143" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node143"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6353,-3800.78 6070,-3800.78 6070,-3764.78 6353,-3764.78 6353,-3800.78"/>
<text text-anchor="middle" x="6211.5" y="-3777.19" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge227" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6353.19,-3775.76C6566.21,-3765.13 6967.26,-3745.13 7170.37,-3735"/>
<polygon fill="black" stroke="black" points="7170.67,-3738.49 7180.48,-3734.49 7170.32,-3731.49 7170.67,-3738.49"/>
</g>
<!-- log_utils.init_logger -->
<g id="node144" class="node">
<title>log_utils.init_logger</title>
<g id="a_node144"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6559,-3692.78 5864,-3692.78 5864,-3610.78 6559,-3610.78 6559,-3692.78"/>
<text text-anchor="middle" x="6211.5" y="-3634.79" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge228" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6559.21,-3686.18C6622.96,-3691.88 6688.95,-3697.36 6751,-3701.78 6894.6,-3712 7059.8,-3719.62 7170.13,-3724.11"/>
<polygon fill="black" stroke="black" points="7170.16,-3727.61 7180.29,-3724.52 7170.44,-3720.62 7170.16,-3727.61"/>
</g>
<!-- log_utils.get_logger -->
<g id="node145" class="node">
<title>log_utils.get_logger</title>
<g id="a_node145"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7364.5,-3692.78 7227.5,-3692.78 7227.5,-3656.78 7364.5,-3656.78 7364.5,-3692.78"/>
<text text-anchor="middle" x="7296" y="-3671.53" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge229" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6559.1,-3652.8C6792.23,-3656.74 7080.95,-3663.76 7217.05,-3669.42"/>
<polygon fill="black" stroke="black" points="7217.24,-3672.93 7227.38,-3669.86 7217.53,-3665.93 7217.24,-3672.93"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge230" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7227.38,-3676.83C7097.89,-3676.98 6806.71,-3671.76 6569.3,-3665.75"/>
<polygon fill="black" stroke="black" points="6569.19,-3662.24 6559.1,-3665.49 6569.01,-3669.24 6569.19,-3662.24"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node146" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node146"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6398,-3746.78 6025,-3746.78 6025,-3710.78 6398,-3710.78 6398,-3746.78"/>
<text text-anchor="middle" x="6211.5" y="-3722.62" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge231" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6398.28,-3728.78C6618.85,-3728.78 6980.61,-3728.78 7170.19,-3728.78"/>
<polygon fill="black" stroke="black" points="7170.2,-3732.28 7180.2,-3728.78 7170.2,-3725.28 7170.2,-3732.28"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node147" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node147"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="9840.5,-1280.78 9552.5,-1280.78 9552.5,-1244.78 9840.5,-1244.78 9840.5,-1280.78"/>
<text text-anchor="middle" x="9696.5" y="-1257.99" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge233" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9430.73,-1303.99C9476.8,-1306.22 9522.34,-1308.41 9562.31,-1310.35"/>
<polygon fill="black" stroke="black" points="9562.2,-1313.84 9572.35,-1310.83 9562.54,-1306.85 9562.2,-1313.84"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge232" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9430.73,-1275.57C9469.16,-1273.71 9507.21,-1271.87 9541.97,-1270.19"/>
<polygon fill="black" stroke="black" points="9542.35,-1273.68 9552.17,-1269.7 9542.01,-1266.69 9542.35,-1273.68"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node150" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node150"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7514,-1165.78 7078,-1165.78 7078,-1121.78 7514,-1121.78 7514,-1165.78"/>
<text text-anchor="middle" x="7296" y="-1135.46" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge236" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7411.63,-1165.8C7535.35,-1182.29 7729.61,-1185.87 7841,-1074.78 7929.21,-986.8 7785.89,-881.75 7877,-796.78 7925.36,-751.68 8104.22,-753.88 8223.03,-760.89"/>
<polygon fill="black" stroke="black" points="8223.07,-764.4 8233.27,-761.52 8223.5,-757.41 8223.07,-764.4"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node151" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node151"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7552,-2640.78 7040,-2640.78 7040,-2594.78 7552,-2594.78 7552,-2640.78"/>
<text text-anchor="middle" x="7296" y="-2609.34" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge237" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7552.27,-2601.48C7673.08,-2599.79 7799.84,-2608.82 7841,-2649.78 7929.87,-2738.2 7797.63,-3115.74 7877,-3212.78 7919.28,-3264.47 7980.81,-3295.72 8045.07,-3314.3"/>
<polygon fill="black" stroke="black" points="8044.41,-3317.75 8054.98,-3317.07 8046.29,-3311.01 8044.41,-3317.75"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge238" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7552.28,-2601.1C7673.31,-2599.28 7800.26,-2608.32 7841,-2649.78 7909.27,-2719.27 7809.28,-3455.76 7877,-3525.78 7926.34,-3576.79 8129.18,-3573.13 8247.04,-3566.29"/>
<polygon fill="black" stroke="black" points="8247.36,-3569.77 8257.13,-3565.68 8246.94,-3562.79 8247.36,-3569.77"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge239" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7552.34,-2602.95C7643.45,-2597.48 7746.83,-2591.08 7841,-2584.78 7970.09,-2576.14 8118.15,-2565.16 8217.84,-2557.61"/>
<polygon fill="black" stroke="black" points="8218.23,-2561.09 8227.93,-2556.85 8217.7,-2554.11 8218.23,-2561.09"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge240" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7552.04,-2632.95C7672.57,-2634.21 7799.15,-2624.95 7841,-2584.78 7897.89,-2530.18 7820.55,-2286.83 7877,-2231.78 7916.24,-2193.5 8045.82,-2186.34 8156.86,-2187.85"/>
<polygon fill="black" stroke="black" points="8156.81,-2191.35 8166.86,-2188.01 8156.92,-2184.35 8156.81,-2191.35"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge241" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7552.29,-2629.45C7670.99,-2629.55 7795.82,-2620.31 7841,-2584.78 7883.76,-2551.15 7841.14,-2508.69 7877,-2467.78 7970.43,-2361.2 8129.37,-2305.66 8232.76,-2279.35"/>
<polygon fill="black" stroke="black" points="8233.73,-2282.71 8242.59,-2276.89 8232.03,-2275.92 8233.73,-2282.71"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node152" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node152"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-5270.78 0,-5270.78 0,-5234.78 282,-5234.78 282,-5270.78"/>
<text text-anchor="middle" x="141" y="-5248.73" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- similar:cli -->
<g id="node153" class="node">
<title>similar:cli</title>
<g id="a_node153"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5252.78" rx="29.05" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5251.18" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;similar:cli -->
<!-- debug_dump:cli -->
<g id="node174" class="node">
<title>debug_dump:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5252.78" rx="41.11" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5251.18" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;debug_dump:cli -->
<!-- build_site._load_ontology -->
<g id="node154" class="node">
<title>build_site._load_ontology</title>
<g id="a_node154"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8490.5,-841.78 8177.5,-841.78 8177.5,-805.78 8490.5,-805.78 8490.5,-841.78"/>
<text text-anchor="middle" x="8334" y="-818.19" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge243" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8490.51,-811.56C8606.04,-806.28 8750.37,-808.98 8791,-850.78 8836.14,-897.21 8802.58,-1955.81 8827,-2015.78 8884.97,-2158.11 9032.59,-2277.7 9100,-2326.82"/>
<polygon fill="black" stroke="black" points="9098.03,-2329.72 9108.19,-2332.73 9102.13,-2324.04 9098.03,-2329.72"/>
</g>
<!-- build_site._compile_locale -->
<g id="node155" class="node">
<title>build_site._compile_locale</title>
<g id="a_node155"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="9302.5,-527.78 8968.5,-527.78 8968.5,-491.78 9302.5,-491.78 9302.5,-527.78"/>
<text text-anchor="middle" x="9135.5" y="-503.9" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node156" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node156"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="8522.5,-531.28 8145.5,-531.28 8145.5,-490.28 8522.5,-490.28 8522.5,-531.28"/>
<text text-anchor="middle" x="8334" y="-503.53" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge244" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M8522.7,-510.54C8654.26,-510.38 8828.95,-510.16 8957.97,-510"/>
<polygon fill="black" stroke="black" points="8958.36,-513.5 8968.35,-509.99 8958.35,-506.5 8958.36,-513.5"/>
</g>
<!-- build_site._iter_lots -->
<g id="node157" class="node">
<title>build_site._iter_lots</title>
<g id="a_node157"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7522,-2225.28 7070,-2225.28 7070,-2168.28 7522,-2168.28 7522,-2225.28"/>
<text text-anchor="middle" x="7296" y="-2185.89" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge245" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7522.36,-2182.9C7651.79,-2180.34 7797.14,-2188.54 7841,-2233.78 7916.76,-2311.94 7809.23,-3127.6 7877,-3212.78 7918.76,-3265.27 7980.39,-3296.77 8044.93,-3315.34"/>
<polygon fill="black" stroke="black" points="8044.32,-3318.8 8054.89,-3318.1 8046.19,-3312.06 8044.32,-3318.8"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge246" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7522.14,-2182.77C7651.71,-2180.14 7797.31,-2188.3 7841,-2233.78 7940.49,-2337.34 7777.84,-3421.89 7877,-3525.78 7926,-3577.11 8128.97,-3573.33 8246.95,-3566.38"/>
<polygon fill="black" stroke="black" points="8247.28,-3569.86 8257.05,-3565.76 8246.85,-3562.87 8247.28,-3569.86"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge247" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7522.11,-2184.24C7650.75,-2182.27 7795.33,-2190.62 7841,-2233.78 7934.75,-2322.38 7782.86,-2433.59 7877,-2521.78 7980.51,-2618.75 8161.97,-2593.4 8261.93,-2569.32"/>
<polygon fill="black" stroke="black" points="8263.07,-2572.64 8271.94,-2566.85 8261.39,-2565.85 8263.07,-2572.64"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge248" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7522.12,-2184.83C7727.09,-2173.95 8023.19,-2158.23 8195.09,-2149.1"/>
<polygon fill="black" stroke="black" points="8195.42,-2152.59 8205.22,-2148.56 8195.05,-2145.6 8195.42,-2152.59"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge249" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7522.12,-2196.78C7712.59,-2196.78 7981.77,-2196.78 8156.84,-2196.78"/>
<polygon fill="black" stroke="black" points="8156.93,-2200.28 8166.93,-2196.78 8156.93,-2193.28 8156.93,-2200.28"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge250" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7522.12,-2210.25C7723.3,-2222.29 8012.27,-2239.58 8185.42,-2249.95"/>
<polygon fill="black" stroke="black" points="8185.44,-2253.45 8195.63,-2250.56 8185.86,-2246.47 8185.44,-2253.45"/>
</g>
<!-- build_site._copy_images -->
<g id="node158" class="node">
<title>build_site._copy_images</title>
<g id="a_node158"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="9299,-711.78 8972,-711.78 8972,-675.78 9299,-675.78 9299,-711.78"/>
<text text-anchor="middle" x="9135.5" y="-687.62" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node159" class="node">
<title>build_site._copy_static</title>
<g id="a_node159"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="8462,-471.78 8206,-471.78 8206,-435.78 8462,-435.78 8462,-471.78"/>
<text text-anchor="middle" x="8334" y="-448.48" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node160" class="node">
<title>build_site._load_state</title>
<g id="a_node160"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="6361,-867.28 6062,-867.28 6062,-830.28 6361,-830.28 6361,-867.28"/>
<text text-anchor="middle" x="6211.5" y="-842.33" font-family="Times,serif" font-size="26.18">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge251" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6249.45,-867.38C6346.74,-918.67 6609.74,-1072.65 6715,-1287.78 6745.67,-1350.46 6700.99,-1866.11 6751,-1914.78 6794.42,-1957.03 7782.59,-1931.7 7841,-1947.78 7858.65,-1952.64 7859.53,-1962.32 7877,-1967.78 7937.37,-1986.63 8004.21,-1998.12 8067.69,-2004.99"/>
<polygon fill="black" stroke="black" points="8067.54,-2008.49 8077.85,-2006.05 8068.27,-2001.53 8067.54,-2008.49"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge252" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6316.29,-867.28C6510.3,-901.87 6928.28,-976.39 7150,-1015.93"/>
<polygon fill="black" stroke="black" points="7149.63,-1019.42 7160.09,-1017.72 7150.86,-1012.52 7149.63,-1019.42"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge253" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M6361.19,-851.16C6715.33,-856.84 7612.77,-871.23 8064.52,-878.47"/>
<polygon fill="black" stroke="black" points="8064.73,-881.98 8074.78,-878.64 8064.84,-874.98 8064.73,-881.98"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge254" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6361,-840.03C6469.11,-834.11 6619.07,-826.84 6751,-823.78 7267.6,-811.79 7879.36,-817.42 8167.36,-821.25"/>
<polygon fill="black" stroke="black" points="8167.43,-824.75 8177.47,-821.39 8167.52,-817.75 8167.43,-824.75"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge255" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6249.57,-867.33C6347.15,-918.47 6610.8,-1072.13 6715,-1287.78 6751.64,-1363.6 6698.52,-1978.93 6751,-2044.78 6824.35,-2136.8 6948.47,-2175.95 7059.64,-2191.58"/>
<polygon fill="black" stroke="black" points="7059.29,-2195.06 7069.67,-2192.93 7060.23,-2188.12 7059.29,-2195.06"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge256" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6290.05,-867.35C6395.97,-888.01 6587.31,-908.03 6715,-820.78 6746.86,-799.01 6718.88,-763.15 6751,-741.78 6959.42,-603.09 7626.71,-711.96 7877,-706.78 8264.34,-698.76 8718.9,-695.61 8961.39,-694.43"/>
<polygon fill="black" stroke="black" points="8961.72,-697.93 8971.7,-694.38 8961.69,-690.93 8961.72,-697.93"/>
</g>
<!-- build_site._categorise -->
<g id="node161" class="node">
<title>build_site._categorise</title>
<g id="a_node161"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="6650.5,-613.78 5772.5,-613.78 5772.5,-519.78 6650.5,-519.78 6650.5,-613.78"/>
<text text-anchor="middle" x="6211.5" y="-547.17" font-family="Times,serif" font-size="78.26">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge257" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6650.58,-608.72C7150.67,-656.59 7936.54,-731.82 8223.47,-759.29"/>
<polygon fill="black" stroke="black" points="8223.17,-762.78 8233.46,-760.25 8223.84,-755.81 8223.17,-762.78"/>
</g>
<!-- build_site._render_site -->
<g id="node162" class="node">
<title>build_site._render_site</title>
<g id="a_node162"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD. &#160;The values&#10;are embedded into the pages so the front&#45;end can convert prices on the fly.">
<polygon fill="none" stroke="black" points="6715,-812.28 5708,-812.28 5708,-709.28 6715,-709.28 6715,-812.28"/>
<text text-anchor="middle" x="6211.5" y="-739.06" font-family="Times,serif" font-size="86.52">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge260" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6675.94,-709.21C6689.22,-704.77 6702.27,-699.97 6715,-694.78 6733.52,-687.23 6732.03,-674.11 6751,-667.78 6821.96,-644.11 9389.72,-615.31 9444,-666.78 9471.33,-692.69 9477.91,-1306.17 9480,-1343.78 9565.7,-2888.97 9678.72,-4793.56 9693.81,-5047.37"/>
<polygon fill="black" stroke="black" points="9690.33,-5047.81 9694.42,-5057.58 9697.32,-5047.39 9690.33,-5047.81"/>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge258" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6715.25,-806.65C7164.18,-852.52 7762.79,-927.73 7841,-1008.78 7926.9,-1097.8 7798.13,-1189.48 7877,-1284.78 7954.47,-1378.39 8091.6,-1414.02 8195.31,-1427.36"/>
<polygon fill="black" stroke="black" points="8194.89,-1430.83 8205.24,-1428.58 8195.75,-1423.89 8194.89,-1430.83"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge259" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6715.03,-762.91C7215.33,-765.03 7947.24,-768.14 8222.71,-769.31"/>
<polygon fill="black" stroke="black" points="8223.09,-772.81 8233.11,-769.35 8223.12,-765.81 8223.09,-772.81"/>
</g>
<!-- build_site.build_page -->
<g id="node163" class="node">
<title>build_site.build_page</title>
<g id="a_node163"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion.">
<polygon fill="none" stroke="black" points="7762,-1905.78 6830,-1905.78 6830,-1803.78 7762,-1803.78 7762,-1905.78"/>
<text text-anchor="middle" x="7296" y="-1833.68" font-family="Times,serif" font-size="85.12">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge261" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6706.78,-812.3C6709.58,-815.05 6712.32,-817.87 6715,-820.78 6788.38,-900.43 6677.26,-1715.46 6751,-1794.78 6771.4,-1816.72 6795.03,-1834.17 6820.78,-1847.9"/>
<polygon fill="black" stroke="black" points="6819.48,-1851.16 6829.97,-1852.6 6822.66,-1844.93 6819.48,-1851.16"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge262" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7732.13,-1905.81C7773.88,-1926.55 7811.55,-1954.18 7841,-1990.78 7926.16,-2096.6 7792.82,-3106.17 7877,-3212.78 7918.63,-3265.5 7980.31,-3297.07 8044.94,-3315.63"/>
<polygon fill="black" stroke="black" points="8044.35,-3319.1 8054.92,-3318.39 8046.21,-3312.35 8044.35,-3319.1"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge264" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7731.07,-1905.81C7773.15,-1926.54 7811.19,-1954.16 7841,-1990.78 7903.06,-2067.01 7825.62,-2790.97 7877,-2874.78 7958.79,-3008.19 8137.17,-3078.01 8244.99,-3109.38"/>
<polygon fill="black" stroke="black" points="8244.3,-3112.82 8254.87,-3112.21 8246.22,-3106.09 8244.3,-3112.82"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge263" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7732.67,-1905.79C7774.25,-1926.55 7811.74,-1954.19 7841,-1990.78 7894.28,-2057.39 7818.24,-3463.94 7877,-3525.78 7925.95,-3577.29 8129.46,-3573.38 8247.4,-3566.38"/>
<polygon fill="black" stroke="black" points="8247.72,-3569.86 8257.49,-3565.76 8247.29,-3562.88 8247.72,-3569.86"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge265" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7762.11,-1849.49C7791.07,-1835.72 7817.83,-1817.8 7841,-1794.78 7938.77,-1697.64 7779.41,-1584.1 7877,-1486.78 7971.05,-1392.99 8135.97,-1399.3 8239.58,-1415.11"/>
<polygon fill="black" stroke="black" points="8239.3,-1418.61 8249.72,-1416.72 8240.4,-1411.69 8239.3,-1418.61"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge266" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M7762.1,-1852.67C7791.41,-1838.28 7818.23,-1819.34 7841,-1794.78 7920.52,-1709.01 7814.16,-841.42 7877,-742.78 7953.09,-623.33 8111.27,-562.68 8219.78,-533.92"/>
<polygon fill="black" stroke="black" points="8220.67,-537.31 8229.47,-531.4 8218.91,-530.53 8220.67,-537.31"/>
</g>
<!-- build_site.main -->
<g id="node164" class="node">
<title>build_site.main</title>
<g id="a_node164"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5589.5,-484.28 5203.5,-484.28 5203.5,-423.28 5589.5,-423.28 5589.5,-484.28"/>
<text text-anchor="middle" x="5396.5" y="-441.86" font-family="Times,serif" font-size="48.02">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge268" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5406.85,-484.37C5454.52,-639.99 5669.82,-1337.45 5708,-1365.78 5812.59,-1443.38 6627.47,-1435.84 7047.05,-1426.57"/>
<polygon fill="black" stroke="black" points="7047.28,-1430.07 7057.2,-1426.35 7047.12,-1423.07 7047.28,-1430.07"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge267" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5418.37,-423.04C5462.95,-360.33 5574.37,-218.7 5708,-160.78 6356.38,120.29 6588.32,-62.78 7295,-62.78 7295,-62.78 7295,-62.78 8335,-62.78 8581.48,-62.78 9267.23,89.99 9444,-81.78 9506.62,-142.63 9440.23,-789.05 9480,-866.78 9513.55,-932.36 9584.9,-980.99 9636.32,-1009.29"/>
<polygon fill="black" stroke="black" points="9634.9,-1012.49 9645.36,-1014.16 9638.22,-1006.33 9634.9,-1012.49"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge269" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5577.71,-423.25C5620.32,-416.93 5665.68,-410.94 5708,-406.78 6617.28,-317.28 7711.75,-326.85 8144.12,-335.23"/>
<polygon fill="black" stroke="black" points="8144.14,-338.73 8154.21,-335.42 8144.28,-331.73 8144.14,-338.73"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge270" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5456.05,-423.2C5517.14,-392.85 5616.59,-347.78 5708,-325.78 5764.11,-312.27 5824.65,-303 5883.62,-296.69"/>
<polygon fill="black" stroke="black" points="5884.25,-300.14 5893.84,-295.62 5883.53,-293.18 5884.25,-300.14"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge271" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5431.69,-422.98C5485.85,-376.23 5596.69,-288.57 5708,-248.78 5764.13,-228.71 5825.88,-215.64 5886.3,-207.25"/>
<polygon fill="black" stroke="black" points="5886.93,-210.7 5896.38,-205.9 5886,-203.76 5886.93,-210.7"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge272" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5589.61,-444.58C5628.78,-442.85 5669.71,-441.16 5708,-439.78 6120.64,-424.89 6593.81,-412.7 6915.35,-405.15"/>
<polygon fill="black" stroke="black" points="6915.86,-408.64 6925.77,-404.91 6915.69,-401.64 6915.86,-408.64"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge273" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5589.6,-463.3C5628.77,-465 5669.71,-466.6 5708,-467.78 6614.29,-495.63 7697.19,-506.16 8134.94,-509.47"/>
<polygon fill="black" stroke="black" points="8135.13,-512.97 8145.16,-509.55 8135.19,-505.97 8135.13,-512.97"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge274" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5589.54,-453.78C6141.03,-453.78 7720.43,-453.78 8195.92,-453.78"/>
<polygon fill="black" stroke="black" points="8195.93,-457.28 8205.93,-453.78 8195.93,-450.28 8195.93,-457.28"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge275" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5412.28,-484.47C5449.7,-558.27 5556.16,-745.15 5708,-820.78 5825.63,-879.37 5978.48,-878.78 6084.57,-868.33"/>
<polygon fill="black" stroke="black" points="6085.1,-871.79 6094.69,-867.28 6084.38,-864.83 6085.1,-871.79"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge276" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5571.36,-484.32C5615.84,-491.74 5663.64,-499.37 5708,-505.78 5737.73,-510.07 5768.47,-514.3 5799.43,-518.42"/>
<polygon fill="black" stroke="black" points="5799.12,-521.9 5809.49,-519.75 5800.04,-514.96 5799.12,-521.9"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge277" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5445.27,-484.32C5504.82,-521.31 5610.66,-583.54 5708,-622.78 5791.32,-656.37 5885.6,-684.66 5969.81,-706.72"/>
<polygon fill="black" stroke="black" points="5968.94,-710.11 5979.5,-709.24 5970.71,-703.33 5968.94,-710.11"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node165" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node165"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6669.5,-2972.28 5753.5,-2972.28 5753.5,-2901.28 6669.5,-2901.28 6669.5,-2972.28"/>
<text text-anchor="middle" x="6211.5" y="-2922.13" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge278" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6669.62,-2936.78C6809.27,-2936.78 6956.59,-2936.78 7073.15,-2936.78"/>
<polygon fill="black" stroke="black" points="7073.26,-2940.28 7083.26,-2936.78 7073.26,-2933.28 7073.26,-2940.28"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge279" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6641.15,-2972.33C6668.26,-2986.36 6693.32,-3003.92 6715,-3025.78 6782.62,-3093.93 6678.91,-3175.37 6751,-3238.78 6796.51,-3278.8 7780.56,-3277.28 7841,-3281.78 7907.02,-3286.7 7977.87,-3293.55 8044.65,-3300.72"/>
<polygon fill="black" stroke="black" points="8044.59,-3304.23 8054.9,-3301.83 8045.34,-3297.27 8044.59,-3304.23"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge280" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6645.14,-2972.38C6670.93,-2986.49 6694.62,-3004.05 6715,-3025.78 6764.4,-3078.46 6698.05,-3299.67 6751,-3348.78 6839.86,-3431.19 7746.44,-3311.98 7841,-3387.78 7890.46,-3427.42 7828.32,-3485.19 7877,-3525.78 7931.3,-3571.06 8130.8,-3569.79 8247.16,-3564.82"/>
<polygon fill="black" stroke="black" points="8247.62,-3568.31 8257.46,-3564.37 8247.31,-3561.31 8247.62,-3568.31"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge281" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6312.25,-2901.26C6419.25,-2864.77 6594.87,-2809.52 6751,-2781.78 7229.19,-2696.81 7363.9,-2794.7 7841,-2703.78 8004.18,-2672.68 8189.19,-2605.27 8278.73,-2570.5"/>
<polygon fill="black" stroke="black" points="8280.08,-2573.73 8288.13,-2566.83 8277.54,-2567.2 8280.08,-2573.73"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge282" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6341.89,-2901.28C6461.93,-2860.77 6633.88,-2781.73 6715,-2644.78 6755.56,-2576.31 6697.64,-1271.82 6751,-1212.78 6857.59,-1094.84 7056.57,-1101.4 7182.07,-1120.22"/>
<polygon fill="black" stroke="black" points="7181.68,-1123.7 7192.1,-1121.78 7182.75,-1116.79 7181.68,-1123.7"/>
</g>
<!-- scan_ontology.main -->
<g id="node166" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5624,-2965.28 5169,-2965.28 5169,-2908.28 5624,-2908.28 5624,-2965.28"/>
<text text-anchor="middle" x="5396.5" y="-2925.89" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge283" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5429.76,-2907.9C5490.42,-2851.25 5620.07,-2718.59 5672,-2575.78 5700.82,-2496.54 5650.73,-1879.66 5708,-1817.78 6025.31,-1474.87 6285.14,-1722.13 6751,-1686.78 7039.83,-1664.86 7926.1,-1650.55 8229.71,-1646.19"/>
<polygon fill="black" stroke="black" points="8229.87,-1649.69 8239.82,-1646.05 8229.77,-1642.69 8229.87,-1649.69"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge284" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5565.58,-2965.4C5606.59,-2980.51 5646.08,-3003.57 5672,-3038.78 5715.74,-3098.19 5655.82,-3649.63 5708,-3701.78 5750.49,-3744.24 5892.31,-3748.88 6014.5,-3744.07"/>
<polygon fill="black" stroke="black" points="6014.91,-3747.56 6024.76,-3743.64 6014.62,-3740.56 6014.91,-3747.56"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge285" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5624.24,-2936.78C5661.89,-2936.78 5702.12,-2936.78 5743.19,-2936.78"/>
<polygon fill="black" stroke="black" points="5743.37,-2940.28 5753.37,-2936.78 5743.37,-2933.28 5743.37,-2940.28"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node167" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node167"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8484.5,-5164.78 8183.5,-5164.78 8183.5,-5128.78 8484.5,-5128.78 8484.5,-5164.78"/>
<text text-anchor="middle" x="8334" y="-5142.73" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node168" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6445.5,-4636.78 5977.5,-4636.78 5977.5,-4584.78 6445.5,-4584.78 6445.5,-4636.78"/>
<text text-anchor="middle" x="6211.5" y="-4600.63" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge287" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6445.91,-4611.61C6890.37,-4612.63 7816.49,-4611.85 7841,-4587.78 7929.52,-4500.85 7801.27,-3570.05 7877,-3471.78 7918.46,-3417.99 7980.31,-3384.72 8045.19,-3364.34"/>
<polygon fill="black" stroke="black" points="8046.23,-3367.68 8054.78,-3361.42 8044.19,-3360.98 8046.23,-3367.68"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge289" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6302.66,-4584.73C6421.45,-4545.02 6625.73,-4456.89 6715,-4299.78 6773.77,-4196.35 6666.18,-2242.19 6751,-2158.78 6794.18,-2116.32 7781,-2150.6 7841,-2158.78 7857.45,-2161.02 7860.62,-2166.03 7877,-2168.78 7968.61,-2184.14 8071.83,-2191.31 8156.87,-2194.56"/>
<polygon fill="black" stroke="black" points="8156.77,-2198.06 8166.89,-2194.93 8157.02,-2191.06 8156.77,-2198.06"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge288" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6445.74,-4616.05C6540.46,-4617.95 6650.95,-4619.85 6751,-4620.78 6872.11,-4621.9 7750.6,-4701.38 7841,-4620.78 7945.52,-4527.59 7775.28,-4404.01 7877,-4307.78 7980.28,-4210.06 8162.54,-4235.97 8262.51,-4260.27"/>
<polygon fill="black" stroke="black" points="8261.67,-4263.67 8272.22,-4262.69 8263.36,-4256.88 8261.67,-4263.67"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge286" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6445.76,-4613.6C6531.18,-4618.15 6628.15,-4627.45 6715,-4645.78 6731.64,-4649.29 6734.34,-4655.35 6751,-4658.78 6892.99,-4687.95 7059.88,-4693.67 7171,-4693.55"/>
<polygon fill="black" stroke="black" points="7171.26,-4697.05 7181.25,-4693.53 7171.24,-4690.05 7171.26,-4697.05"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge290" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6445.57,-4598.57C6557.98,-4598.13 6676.67,-4607.58 6715,-4645.78 6792.8,-4723.32 6670.74,-5063.78 6751,-5138.78 6802.3,-5186.71 7781.15,-5163.17 8172.91,-5151.76"/>
<polygon fill="black" stroke="black" points="8173.3,-5155.25 8183.19,-5151.46 8173.1,-5148.25 8173.3,-5155.25"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node169" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node169"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="7705,-1343.28 6887,-1343.28 6887,-1286.28 7705,-1286.28 7705,-1343.28"/>
<text text-anchor="middle" x="7296" y="-1303.44" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge291" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7705.19,-1312.91C8121.11,-1315.28 8715.63,-1332.12 8791,-1407.78 8838.76,-1455.73 8800.59,-1953.47 8827,-2015.78 8886.97,-2157.28 9033.55,-2277.3 9100.34,-2326.68"/>
<polygon fill="black" stroke="black" points="9098.32,-2329.54 9108.46,-2332.62 9102.46,-2323.89 9098.32,-2329.54"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge292" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7705.11,-1314.41C7766.34,-1322.08 7817.03,-1335.47 7841,-1357.78 7918.99,-1430.36 7800.12,-1521.02 7877,-1594.78 7972.67,-1686.55 8136.72,-1680.12 8239.77,-1664.39"/>
<polygon fill="black" stroke="black" points="8240.53,-1667.81 8249.86,-1662.79 8239.44,-1660.9 8240.53,-1667.81"/>
</g>
<!-- pending_embed.main -->
<g id="node170" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6473.5,-1356.78 5949.5,-1356.78 5949.5,-1296.78 6473.5,-1296.78 6473.5,-1356.78"/>
<text text-anchor="middle" x="6211.5" y="-1315.26" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge293" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6473.63,-1348.42C6564.61,-1369.89 6658.07,-1410.6 6715,-1486.78 6772.18,-1563.3 6683.77,-3137.92 6751,-3205.78 6793.64,-3248.82 7785.72,-3214 7841,-3238.78 7862.23,-3248.29 7856.26,-3266.23 7877,-3276.78 7928.37,-3302.91 7987.03,-3318.99 8044.79,-3328.62"/>
<polygon fill="black" stroke="black" points="8044.38,-3332.1 8054.81,-3330.22 8045.49,-3325.18 8044.38,-3332.1"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge295" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6473.68,-1349.37C6564.23,-1370.98 6657.39,-1411.54 6715,-1486.78 6769.9,-1558.49 6689.11,-2233.01 6751,-2298.78 6917.91,-2476.16 7651.16,-2261.18 7841,-2413.78 7880.44,-2445.48 7836.85,-2490.99 7877,-2521.78 7985.16,-2604.7 8153.59,-2588.46 8252.63,-2568.82"/>
<polygon fill="black" stroke="black" points="8253.49,-2572.22 8262.59,-2566.79 8252.09,-2565.36 8253.49,-2572.22"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge297" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6473.7,-1339.46C6561.78,-1343.59 6660.64,-1348.06 6751,-1351.78 6811.54,-1354.27 7797.74,-1348.35 7841,-1390.78 7892.8,-1441.58 7829.92,-1987.57 7877,-2042.78 7953.69,-2132.71 8091.07,-2152.29 8195.05,-2152.5"/>
<polygon fill="black" stroke="black" points="8195.34,-2156 8205.33,-2152.46 8195.31,-2149 8195.34,-2156"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge294" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6473.56,-1348.8C6564.38,-1370.33 6657.76,-1410.97 6715,-1486.78 6792.91,-1589.95 6660.44,-2557.51 6751,-2649.78 6803.44,-2703.2 6999.09,-2700.87 7140.75,-2691.32"/>
<polygon fill="black" stroke="black" points="7141.12,-2694.8 7150.86,-2690.62 7140.64,-2687.82 7141.12,-2694.8"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge296" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6243.69,-1296.71C6321.43,-1224.11 6533.31,-1040.46 6751,-975.78 7025.2,-894.3 7900.57,-948.06 8217.26,-970.93"/>
<polygon fill="black" stroke="black" points="8217.15,-974.43 8227.38,-971.66 8217.65,-967.45 8217.15,-974.43"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge298" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6239.18,-1296.52C6312,-1216.17 6523.95,-996.98 6751,-899.78 7215.51,-700.93 7372.93,-777.75 7877,-742.78 7978.31,-735.75 8716.12,-674.17 8791,-742.78 8858.6,-804.72 8773.66,-1079.21 8827,-1153.78 8868.26,-1211.47 8939.64,-1245.04 9003.24,-1264.38"/>
<polygon fill="black" stroke="black" points="9002.38,-1267.78 9012.96,-1267.25 9004.36,-1261.06 9002.38,-1267.78"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge299" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6239.28,-1296.61C6311.93,-1217.31 6522.72,-1003.98 6751,-928.78 6804.83,-911.05 8749.51,-914.18 8791,-952.78 8851.16,-1008.74 8797.11,-1244.24 8827,-1320.78 8891.72,-1486.51 9044.24,-1642.78 9106.9,-1702.37"/>
<polygon fill="black" stroke="black" points="9104.75,-1705.16 9114.43,-1709.48 9109.56,-1700.07 9104.75,-1705.16"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge300" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6473.51,-1323.89C6594.36,-1322.55 6740.95,-1320.92 6876.66,-1319.42"/>
<polygon fill="black" stroke="black" points="6876.87,-1322.91 6886.83,-1319.3 6876.79,-1315.91 6876.87,-1322.91"/>
</g>
<!-- check_translations.parse_po -->
<g id="node171" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-5340.78 1083.5,-5340.78 1083.5,-5288.78 1667.5,-5288.78 1667.5,-5340.78"/>
<text text-anchor="middle" x="1375.5" y="-5305.08" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node172" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-5337.28 318,-5337.28 318,-5292.28 983,-5292.28 983,-5337.28"/>
<text text-anchor="middle" x="650.5" y="-5306.4" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge301" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-5314.78C1013.14,-5314.78 1043.45,-5314.78 1073.19,-5314.78"/>
<polygon fill="black" stroke="black" points="1073.26,-5318.28 1083.26,-5314.78 1073.26,-5311.28 1073.26,-5318.28"/>
</g>
<!-- pending_chop.main -->
<g id="node173" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7459.5,-2464.78 7132.5,-2464.78 7132.5,-2422.78 7459.5,-2422.78 7459.5,-2464.78"/>
<text text-anchor="middle" x="7296" y="-2435.69" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge302" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7394.78,-2422.77C7518.36,-2402.6 7728.49,-2390.74 7841,-2511.78 7894.1,-2568.9 7828,-3152.1 7877,-3212.78 7919.02,-3264.81 7980.55,-3296.17 8044.9,-3314.75"/>
<polygon fill="black" stroke="black" points="8044.25,-3318.21 8054.82,-3317.52 8046.13,-3311.46 8044.25,-3318.21"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge303" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7459.79,-2434.34C7576.66,-2420.07 7732.13,-2384.87 7841,-2298.78 7867.51,-2277.81 7848.67,-2250.22 7877,-2231.78 7980.25,-2164.55 8125.87,-2165.96 8224.56,-2177.5"/>
<polygon fill="black" stroke="black" points="8224.2,-2180.99 8234.55,-2178.73 8225.05,-2174.04 8224.2,-2180.99"/>
</g>
<!-- chop:cli -->
<g id="node175" class="node">
<title>chop:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1933" cy="-5252.78" rx="27" ry="18"/>
<text text-anchor="middle" x="1933" y="-5251.18" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;chop:cli -->
<!-- caption:cli -->
<g id="node176" class="node">
<title>caption:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2500.5" cy="-5252.78" rx="30.28" ry="18"/>
<text text-anchor="middle" x="2500.5" y="-5251.18" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;caption:cli -->
<!-- embed:cli -->
<g id="node177" class="node">
<title>embed:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3105.5" cy="-5252.78" rx="29.05" ry="18"/>
<text text-anchor="middle" x="3105.5" y="-5251.18" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;embed:cli -->
<!-- telegram_bot:cli -->
<g id="node178" class="node">
<title>telegram_bot:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3952" cy="-5252.78" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="3952" y="-5248.61" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;telegram_bot:cli -->
<!-- tg_client:cli -->
<g id="node179" class="node">
<title>tg_client:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5376.78" rx="32.86" ry="18"/>
<text text-anchor="middle" x="141" y="-5375.18" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node180" class="node">
<title>clean_data:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5376.78" rx="37.29" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5375.18" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;clean_data:cli -->
<!-- moderation:cli -->
<g id="node181" class="node">
<title>moderation:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5376.78" rx="38.53" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5375.18" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;moderation:cli -->
<!-- build_site:cli -->
<g id="node182" class="node">
<title>build_site:cli</title>
<g id="a_node182"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1933" cy="-5376.78" rx="34.71" ry="18"/>
<text text-anchor="middle" x="1933" y="-5375.18" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;build_site:cli -->
<!-- scan_ontology:cli -->
<g id="node183" class="node">
<title>scan_ontology:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2500.5" cy="-5376.78" rx="44.19" ry="18"/>
<text text-anchor="middle" x="2500.5" y="-5375.18" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;scan_ontology:cli -->
<!-- pending_caption:cli -->
<g id="node184" class="node">
<title>pending_caption:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3105.5" cy="-5376.78" rx="48.62" ry="18"/>
<text text-anchor="middle" x="3105.5" y="-5375.18" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;pending_caption:cli -->
<!-- pending_embed:cli -->
<g id="node185" class="node">
<title>pending_embed:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3952" cy="-5376.78" rx="47.39" ry="18"/>
<text text-anchor="middle" x="3952" y="-5375.18" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;pending_embed:cli -->
<!-- check_translations:cli -->
<g id="node186" class="node">
<title>check_translations:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5430.78" rx="53.05" ry="18"/>
<text text-anchor="middle" x="141" y="-5429.18" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli -->
<g id="node187" class="node">
<title>pending_chop:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5430.78" rx="42.96" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5429.18" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- build_site -->
<g id="node188" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-453.78" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-450.08" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge316" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4896.65,-453.78C4965.51,-453.78 5087.18,-453.78 5193.12,-453.78"/>
<polygon fill="black" stroke="black" points="5193.32,-457.28 5203.32,-453.78 5193.32,-450.28 5193.32,-457.28"/>
</g>
<!-- caption -->
<g id="node189" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-1863.78" rx="44.69" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-1860.08" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge317" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M4885.43,-1863.78C4973.12,-1863.78 5171.86,-1863.78 5293.75,-1863.78"/>
<polygon fill="black" stroke="black" points="5293.85,-1867.28 5303.85,-1863.78 5293.85,-1860.28 5293.85,-1867.28"/>
</g>
<!-- check_translations -->
<g id="node190" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-5314.78" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-5311.08" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge318" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-5314.78C259.3,-5314.78 282.99,-5314.78 307.97,-5314.78"/>
<polygon fill="black" stroke="black" points="307.99,-5318.28 317.99,-5314.78 307.99,-5311.28 307.99,-5318.28"/>
</g>
<!-- chop -->
<g id="node191" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-3373.78" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-3370.08" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge319" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4873.28,-3373.78C4956.91,-3373.78 5185.32,-3373.78 5310.56,-3373.78"/>
<polygon fill="black" stroke="black" points="5310.88,-3377.28 5320.88,-3373.78 5310.88,-3370.28 5310.88,-3377.28"/>
</g>
<!-- clean_data -->
<g id="node192" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-5026.78" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-5023.08" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge320" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5456.3,-5026.78C5592.64,-5026.78 5931.91,-5026.78 6105.12,-5026.78"/>
<polygon fill="black" stroke="black" points="6105.27,-5030.28 6115.27,-5026.78 6105.27,-5023.28 6105.27,-5030.28"/>
</g>
<!-- debug_dump -->
<g id="node193" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-3065.78" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-3062.08" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge321" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5466.82,-3065.78C5575.62,-3065.78 5791.77,-3065.78 5963.13,-3065.78"/>
<polygon fill="black" stroke="black" points="5963.32,-3069.28 5973.32,-3065.78 5963.32,-3062.28 5963.32,-3069.28"/>
</g>
<!-- embed -->
<g id="node194" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-2548.78" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-2545.08" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge322" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5438.93,-2548.78C5563.2,-2548.78 5935.15,-2548.78 6113.3,-2548.78"/>
<polygon fill="black" stroke="black" points="6113.46,-2552.28 6123.46,-2548.78 6113.46,-2545.28 6113.46,-2552.28"/>
</g>
<!-- moderation -->
<g id="node195" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6211.5" cy="-2617.78" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6211.5" y="-2614.08" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge323" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6275.38,-2617.78C6419.09,-2617.78 6778.56,-2617.78 7029.75,-2617.78"/>
<polygon fill="black" stroke="black" points="7029.76,-2621.28 7039.76,-2617.78 7029.76,-2614.28 7029.76,-2621.28"/>
</g>
<!-- pending_caption -->
<g id="node196" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-4531.78" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-4528.08" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge324" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5475.82,-4539.39C5588.2,-4550.31 5800.09,-4570.9 5967.54,-4587.17"/>
<polygon fill="black" stroke="black" points="5967.2,-4590.65 5977.49,-4588.14 5967.88,-4583.69 5967.2,-4590.65"/>
</g>
<!-- pending_chop -->
<g id="node197" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6211.5" cy="-2443.78" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6211.5" y="-2440.08" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge325" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6286.48,-2443.78C6457.09,-2443.78 6881.9,-2443.78 7122.21,-2443.78"/>
<polygon fill="black" stroke="black" points="7122.45,-2447.28 7132.45,-2443.78 7122.45,-2440.28 7122.45,-2447.28"/>
</g>
<!-- pending_embed -->
<g id="node198" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-1326.78" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-1323.08" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge326" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5480.68,-1326.78C5587.81,-1326.78 5779.25,-1326.78 5939.18,-1326.78"/>
<polygon fill="black" stroke="black" points="5939.18,-1330.28 5949.18,-1326.78 5939.18,-1323.28 5939.18,-1330.28"/>
</g>
<!-- scan_ontology -->
<g id="node199" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-2936.78" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-2933.08" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge327" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4916.79,-2936.78C4979.32,-2936.78 5071.8,-2936.78 5158.85,-2936.78"/>
<polygon fill="black" stroke="black" points="5158.88,-2940.28 5168.88,-2936.78 5158.88,-2933.28 5158.88,-2940.28"/>
</g>
<!-- similar -->
<g id="node200" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-1516.78" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-1513.08" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge328" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5439.5,-1516.78C5560.45,-1516.78 5912.59,-1516.78 6096.17,-1516.78"/>
<polygon fill="black" stroke="black" points="6096.4,-1520.28 6106.4,-1516.78 6096.4,-1513.28 6096.4,-1520.28"/>
</g>
<!-- telegram_bot -->
<g id="node201" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="3952" cy="-4962.78" rx="72.29" ry="18"/>
<text text-anchor="middle" x="3952" y="-4959.08" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge329" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4017.11,-4970.73C4155.79,-4987.94 4487.01,-5029.04 4684.19,-5053.51"/>
<polygon fill="black" stroke="black" points="4684,-5057.01 4694.35,-5054.77 4684.86,-5050.06 4684,-5057.01"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge330" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4023.3,-4959.92C4160.77,-4954.34 4468.79,-4941.83 4664.66,-4933.88"/>
<polygon fill="black" stroke="black" points="4664.92,-4937.37 4674.77,-4933.47 4664.64,-4930.38 4664.92,-4937.37"/>
</g>
<!-- tg_client -->
<g id="node202" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4409.78" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-4406.08" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge331" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-4409.78C232.34,-4409.78 292.58,-4409.78 356.22,-4409.78"/>
<polygon fill="black" stroke="black" points="356.46,-4413.28 366.46,-4409.78 356.46,-4406.28 356.46,-4413.28"/>
</g>
</g>
</svg>
