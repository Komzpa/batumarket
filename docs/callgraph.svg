<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="3695pt" height="4009pt"
 viewBox="0.00 0.00 3695.00 4009.14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 4005.14)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-4005.14 3691,-4005.14 3691,4 -4,4"/>
<!-- message_utils.build_prompt -->
<g id="node1" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node1"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="3106.5,-1482.14 2889.5,-1482.14 2889.5,-1446.14 3106.5,-1446.14 3106.5,-1482.14"/>
<text text-anchor="middle" x="2998" y="-1460.44" font-family="Times,serif" font-size="14.00">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node2" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node2"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="2818,-1317.14 2564,-1317.14 2564,-1281.14 2818,-1281.14 2818,-1317.14"/>
<text text-anchor="middle" x="2691" y="-1295.44" font-family="Times,serif" font-size="14.00">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge1" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M2714.66,-1317.4C2741.19,-1338.8 2786.41,-1375.4 2825,-1407.14 2841.08,-1420.37 2842.2,-1428.17 2861,-1437.14 2866.98,-1440 2873.26,-1442.55 2879.68,-1444.84"/>
<polygon fill="black" stroke="black" points="2878.6,-1448.17 2889.19,-1447.99 2880.81,-1441.52 2878.6,-1448.17"/>
</g>
<!-- caption_io.read_caption -->
<g id="node3" class="node">
<title>caption_io.read_caption</title>
<g id="a_node3"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="3090.5,-1428.14 2905.5,-1428.14 2905.5,-1392.14 3090.5,-1392.14 3090.5,-1428.14"/>
<text text-anchor="middle" x="2998" y="-1406.44" font-family="Times,serif" font-size="14.00">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge2" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M2741.68,-1317.22C2795.3,-1336.73 2880.65,-1367.8 2937.73,-1388.57"/>
<polygon fill="black" stroke="black" points="2936.74,-1391.94 2947.34,-1392.07 2939.14,-1385.36 2936.74,-1391.94"/>
</g>
<!-- post_io.read_post -->
<g id="node4" class="node">
<title>post_io.read_post</title>
<g id="a_node4"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="3068.5,-1136.14 2927.5,-1136.14 2927.5,-1100.14 3068.5,-1100.14 3068.5,-1136.14"/>
<text text-anchor="middle" x="2998" y="-1114.44" font-family="Times,serif" font-size="14.00">post_io.read_post</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge3" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2813.58,-1280.97C2817.63,-1278.36 2821.46,-1275.42 2825,-1272.14 2868.03,-1232.26 2817.88,-1184.93 2861,-1145.14 2876.35,-1130.97 2896.93,-1123.31 2917.42,-1119.36"/>
<polygon fill="black" stroke="black" points="2918.15,-1122.79 2927.45,-1117.72 2917.02,-1115.88 2918.15,-1122.79"/>
</g>
<!-- serde_utils.read_md -->
<g id="node6" class="node">
<title>serde_utils.read_md</title>
<g id="a_node6"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="3379.5,-1263.14 3218.5,-1263.14 3218.5,-1227.14 3379.5,-1227.14 3379.5,-1263.14"/>
<text text-anchor="middle" x="3299" y="-1241.44" font-family="Times,serif" font-size="14.00">serde_utils.read_md</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.read_md -->
<g id="edge21" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3057.5,-1392.09C3083.71,-1381.69 3113.5,-1366.38 3135,-1345.14 3160.74,-1319.72 3142.45,-1294.35 3171,-1272.14 3181.95,-1263.62 3194.98,-1257.64 3208.45,-1253.46"/>
<polygon fill="black" stroke="black" points="3209.62,-1256.77 3218.32,-1250.73 3207.75,-1250.03 3209.62,-1256.77"/>
</g>
<!-- serde_utils.load_json -->
<g id="node9" class="node">
<title>serde_utils.load_json</title>
<g id="a_node9"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3381.5,-2067.14 3216.5,-2067.14 3216.5,-2031.14 3381.5,-2031.14 3381.5,-2067.14"/>
<text text-anchor="middle" x="3299" y="-2045.44" font-family="Times,serif" font-size="14.00">serde_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.load_json -->
<g id="edge22" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3090.59,-1413.94C3106.97,-1418.37 3122.71,-1425.62 3135,-1437.14 3223.11,-1519.76 3280.04,-1911.33 3294.41,-2020.71"/>
<polygon fill="black" stroke="black" points="3290.98,-2021.49 3295.74,-2030.95 3297.93,-2020.59 3290.98,-2021.49"/>
</g>
<!-- caption_io._get_langs -->
<g id="node25" class="node">
<title>caption_io._get_langs</title>
<g id="a_node25"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="3383,-1317.14 3215,-1317.14 3215,-1281.14 3383,-1281.14 3383,-1317.14"/>
<text text-anchor="middle" x="3299" y="-1295.44" font-family="Times,serif" font-size="14.00">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge23" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3047.7,-1392.06C3100.27,-1372.55 3183.94,-1341.49 3239.89,-1320.71"/>
<polygon fill="black" stroke="black" points="3241.16,-1323.98 3249.32,-1317.21 3238.72,-1317.41 3241.16,-1323.98"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node27" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node27"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="3409.5,-3249.14 3188.5,-3249.14 3188.5,-3213.14 3409.5,-3213.14 3409.5,-3249.14"/>
<text text-anchor="middle" x="3299" y="-3227.44" font-family="Times,serif" font-size="14.00">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge24" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3090.82,-1411.16C3107.8,-1415.69 3123.71,-1423.68 3135,-1437.14 3197.58,-1511.79 3112.86,-3111.98 3171,-3190.14 3176.22,-3197.16 3182.66,-3202.99 3189.84,-3207.85"/>
<polygon fill="black" stroke="black" points="3188.22,-3210.96 3198.59,-3213.11 3191.83,-3204.96 3188.22,-3210.96"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node28" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node28"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="3406,-3181.14 3192,-3181.14 3192,-3145.14 3406,-3145.14 3406,-3181.14"/>
<text text-anchor="middle" x="3299" y="-3159.44" font-family="Times,serif" font-size="14.00">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge25" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3090.8,-1411.18C3107.78,-1415.71 3123.7,-1423.69 3135,-1437.14 3192.36,-1505.44 3134.96,-2960.56 3171,-3042.14 3189.39,-3083.77 3229.59,-3118.03 3259.87,-3139.34"/>
<polygon fill="black" stroke="black" points="3257.9,-3142.23 3268.12,-3145 3261.86,-3136.46 3257.9,-3142.23"/>
</g>
<!-- post_io.read_post&#45;&gt;serde_utils.read_md -->
<g id="edge73" class="edge">
<title>post_io.read_post&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3068.84,-1127.12C3090.5,-1131.19 3114.15,-1136.98 3135,-1145.14 3183.89,-1164.28 3234.57,-1197.93 3266.18,-1220.86"/>
<polygon fill="black" stroke="black" points="3264.44,-1223.93 3274.57,-1227.03 3268.59,-1218.28 3264.44,-1223.93"/>
</g>
<!-- post_io._parse_block -->
<g id="node62" class="node">
<title>post_io._parse_block</title>
<g id="a_node62"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="3380,-1136.14 3218,-1136.14 3218,-1100.14 3380,-1100.14 3380,-1136.14"/>
<text text-anchor="middle" x="3299" y="-1114.44" font-family="Times,serif" font-size="14.00">post_io._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;post_io._parse_block -->
<g id="edge74" class="edge">
<title>post_io.read_post&#45;&gt;post_io._parse_block</title>
<path fill="none" stroke="black" d="M3068.72,-1118.14C3110.11,-1118.14 3163.03,-1118.14 3207.59,-1118.14"/>
<polygon fill="black" stroke="black" points="3207.85,-1121.64 3217.85,-1118.14 3207.85,-1114.64 3207.85,-1121.64"/>
</g>
<!-- serde_utils.read_text -->
<g id="node5" class="node">
<title>serde_utils.read_text</title>
<g id="a_node5"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="3658.5,-2638.14 3491.5,-2638.14 3491.5,-2602.14 3658.5,-2602.14 3658.5,-2638.14"/>
<text text-anchor="middle" x="3575" y="-2616.44" font-family="Times,serif" font-size="14.00">serde_utils.read_text</text>
</a>
</g>
</g>
<!-- serde_utils.read_text&#45;&gt;serde_utils.read_text -->
<g id="edge4" class="edge">
<title>serde_utils.read_text&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3525.07,-2638.29C3517.39,-2647.68 3534.03,-2656.14 3575,-2656.14 3600.29,-2656.14 3616.3,-2652.92 3623.06,-2648.24"/>
<polygon fill="black" stroke="black" points="3626.52,-2648.77 3624.93,-2638.29 3619.64,-2647.47 3626.52,-2648.77"/>
</g>
<!-- serde_utils.read_md&#45;&gt;serde_utils.read_text -->
<g id="edge5" class="edge">
<title>serde_utils.read_md&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3379.74,-1246.75C3397.55,-1250.92 3414.76,-1258.6 3427,-1272.14 3518.9,-1373.81 3565.24,-2405.85 3572.87,-2591.59"/>
<polygon fill="black" stroke="black" points="3569.37,-2591.81 3573.28,-2601.66 3576.37,-2591.53 3569.37,-2591.81"/>
</g>
<!-- serde_utils.write_md -->
<g id="node7" class="node">
<title>serde_utils.write_md</title>
<g id="a_node7"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="2774,-3693.14 2608,-3693.14 2608,-3657.14 2774,-3657.14 2774,-3693.14"/>
<text text-anchor="middle" x="2691" y="-3671.44" font-family="Times,serif" font-size="14.00">serde_utils.write_md</text>
</a>
</g>
</g>
<!-- serde_utils.parse_md -->
<g id="node8" class="node">
<title>serde_utils.parse_md</title>
<g id="a_node8"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="3082,-1190.14 2914,-1190.14 2914,-1154.14 3082,-1154.14 3082,-1190.14"/>
<text text-anchor="middle" x="2998" y="-1168.44" font-family="Times,serif" font-size="14.00">serde_utils.parse_md</text>
</a>
</g>
</g>
<!-- serde_utils.parse_md&#45;&gt;serde_utils.read_md -->
<g id="edge6" class="edge">
<title>serde_utils.parse_md&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3076.72,-1190.21C3095.79,-1194.71 3116.15,-1199.55 3135,-1204.14 3161.77,-1210.66 3190.98,-1217.95 3217.17,-1224.55"/>
<polygon fill="black" stroke="black" points="3216.5,-1227.99 3227.05,-1227.04 3218.21,-1221.2 3216.5,-1227.99"/>
</g>
<!-- serde_utils.load_json&#45;&gt;serde_utils.read_text -->
<g id="edge7" class="edge">
<title>serde_utils.load_json&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3345.88,-2067.25C3373.08,-2080.16 3406.2,-2100.05 3427,-2127.14 3540.78,-2275.3 3566.77,-2510.46 3572.46,-2591.55"/>
<polygon fill="black" stroke="black" points="3569,-2592.19 3573.14,-2601.94 3575.98,-2591.74 3569,-2592.19"/>
</g>
<!-- serde_utils.write_json -->
<g id="node10" class="node">
<title>serde_utils.write_json</title>
<g id="a_node10"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="3084.5,-1628.14 2911.5,-1628.14 2911.5,-1592.14 3084.5,-1592.14 3084.5,-1628.14"/>
<text text-anchor="middle" x="2998" y="-1606.44" font-family="Times,serif" font-size="14.00">serde_utils.write_json</text>
</a>
</g>
</g>
<!-- lot_io._clean_lot -->
<g id="node11" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node11"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="3363.5,-966.14 3234.5,-966.14 3234.5,-930.14 3363.5,-930.14 3363.5,-966.14"/>
<text text-anchor="middle" x="3299" y="-944.44" font-family="Times,serif" font-size="14.00">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.valid_lots -->
<g id="node12" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node12"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="2754.5,-1815.14 2627.5,-1815.14 2627.5,-1779.14 2754.5,-1779.14 2754.5,-1815.14"/>
<text text-anchor="middle" x="2691" y="-1793.44" font-family="Times,serif" font-size="14.00">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node13" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node13"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="3080,-2113.14 2916,-2113.14 2916,-2077.14 3080,-2077.14 3080,-2113.14"/>
<text text-anchor="middle" x="2998" y="-2091.44" font-family="Times,serif" font-size="14.00">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node14" class="node">
<title>lot_io.get_seller</title>
<g id="a_node14"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3062.5,-616.14 2933.5,-616.14 2933.5,-580.14 3062.5,-580.14 3062.5,-616.14"/>
<text text-anchor="middle" x="2998" y="-594.44" font-family="Times,serif" font-size="14.00">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node15" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node15"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3081,-689.14 2915,-689.14 2915,-653.14 3081,-653.14 3081,-689.14"/>
<text text-anchor="middle" x="2998" y="-667.44" font-family="Times,serif" font-size="14.00">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.read_lots -->
<g id="node16" class="node">
<title>lot_io.read_lots</title>
<g id="a_node16"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3060.5,-1080.14 2935.5,-1080.14 2935.5,-1044.14 3060.5,-1044.14 3060.5,-1080.14"/>
<text text-anchor="middle" x="2998" y="-1058.44" font-family="Times,serif" font-size="14.00">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;serde_utils.load_json -->
<g id="edge8" class="edge">
<title>lot_io.read_lots&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3060.68,-1060.53C3087.08,-1063.18 3116.11,-1071.12 3135,-1091.14 3171.26,-1129.57 3162.43,-1274.01 3171,-1326.14 3215.59,-1597.35 3275.18,-1924.72 3292.86,-2021.15"/>
<polygon fill="black" stroke="black" points="3289.42,-2021.8 3294.66,-2031.01 3296.3,-2020.54 3289.42,-2021.8"/>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge9" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3060.56,-1057.01C3085.42,-1052.56 3113.3,-1044.32 3135,-1029.14 3158.64,-1012.61 3147.13,-991.34 3171,-975.14 3186.73,-964.47 3205.88,-957.9 3224.49,-953.88"/>
<polygon fill="black" stroke="black" points="3225.3,-957.29 3234.45,-951.96 3223.97,-950.42 3225.3,-957.29"/>
</g>
<!-- lot_io.write_lots -->
<g id="node17" class="node">
<title>lot_io.write_lots</title>
<g id="a_node17"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="2756,-689.14 2626,-689.14 2626,-653.14 2756,-653.14 2756,-689.14"/>
<text text-anchor="middle" x="2691" y="-667.44" font-family="Times,serif" font-size="14.00">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;serde_utils.write_json -->
<g id="edge10" class="edge">
<title>lot_io.write_lots&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2756.27,-686.99C2782.03,-696.76 2809.29,-712.18 2825,-736.14 2923.67,-886.63 2761.67,-1395.08 2861,-1545.14 2873.83,-1564.53 2894.14,-1578.29 2915.19,-1587.99"/>
<polygon fill="black" stroke="black" points="2913.99,-1591.29 2924.56,-1592.04 2916.77,-1584.86 2913.99,-1591.29"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge11" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M2756.15,-681.71C2787.71,-686.83 2826.32,-692.97 2861,-698.14 2921.8,-707.21 3090.37,-693.87 3135,-736.14 3195.82,-793.74 3112.28,-861.4 3171,-921.14 3185.06,-935.44 3204.68,-943.07 3224.31,-946.92"/>
<polygon fill="black" stroke="black" points="3223.79,-950.39 3234.23,-948.57 3224.94,-943.48 3223.79,-950.39"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge12" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2756.1,-658.95C2778.02,-654.57 2802.64,-649.4 2825,-644.14 2857.45,-636.52 2893.08,-627.15 2923.45,-618.87"/>
<polygon fill="black" stroke="black" points="2924.4,-622.24 2933.12,-616.22 2922.55,-615.49 2924.4,-622.24"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge13" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M2756.31,-671.14C2799.39,-671.14 2856.77,-671.14 2904.69,-671.14"/>
<polygon fill="black" stroke="black" points="2904.77,-674.64 2914.77,-671.14 2904.77,-667.64 2904.77,-674.64"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node18" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node18"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="3069.5,-1682.14 2926.5,-1682.14 2926.5,-1646.14 3069.5,-1646.14 3069.5,-1682.14"/>
<text text-anchor="middle" x="2998" y="-1660.44" font-family="Times,serif" font-size="14.00">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node19" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node19"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="3371.5,-2596.14 3226.5,-2596.14 3226.5,-2560.14 3371.5,-2560.14 3371.5,-2596.14"/>
<text text-anchor="middle" x="3299" y="-2574.44" font-family="Times,serif" font-size="14.00">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node20" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node20"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="3074.5,-2693.14 2921.5,-2693.14 2921.5,-2657.14 3074.5,-2657.14 3074.5,-2693.14"/>
<text text-anchor="middle" x="2998" y="-2671.44" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge14" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3074.72,-2659.43C3094.5,-2654.75 3115.68,-2649.23 3135,-2643.14 3173.58,-2630.98 3215.98,-2613.95 3247.87,-2600.38"/>
<polygon fill="black" stroke="black" points="3249.6,-2603.44 3257.41,-2596.28 3246.84,-2597.01 3249.6,-2603.44"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node21" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node21"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="178,-3947.14 0,-3947.14 0,-3911.14 178,-3911.14 178,-3947.14"/>
<text text-anchor="middle" x="89" y="-3925.44" font-family="Times,serif" font-size="14.00">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node22" class="node">
<title>testing_mode.apply_testing_mode</title>
<polygon fill="none" stroke="black" points="473,-3947.14 214,-3947.14 214,-3911.14 473,-3911.14 473,-3947.14"/>
<text text-anchor="middle" x="343.5" y="-3925.44" font-family="Times,serif" font-size="14.00">testing_mode.apply_testing_mode</text>
</g>
<!-- lot_io.embedding_path&#45;&gt;testing_mode.apply_testing_mode -->
<!-- build_site:cli -->
<g id="node33" class="node">
<title>build_site:cli</title>
<g id="a_node33"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="653,-3947.14 546,-3947.14 546,-3911.14 653,-3911.14 653,-3947.14"/>
<text text-anchor="middle" x="599.5" y="-3925.44" font-family="Times,serif" font-size="14.00">build_site:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;build_site:cli -->
<!-- lot_io.iter_lot_files -->
<g id="node23" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node23"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="3071,-966.14 2925,-966.14 2925,-930.14 3071,-930.14 3071,-966.14"/>
<text text-anchor="middle" x="2998" y="-944.44" font-family="Times,serif" font-size="14.00">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node24" class="node">
<title>lot_io.get_lot</title>
<g id="a_node24"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="2745,-2113.14 2637,-2113.14 2637,-2077.14 2745,-2077.14 2745,-2113.14"/>
<text text-anchor="middle" x="2691" y="-2091.44" font-family="Times,serif" font-size="14.00">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge16" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2718.02,-2077C2749.9,-2053.06 2802.45,-2007.63 2825,-1954.14 2862.28,-1865.71 2799.08,-1164.47 2861,-1091.14 2876.74,-1072.5 2901.25,-1064.06 2925.15,-1060.67"/>
<polygon fill="black" stroke="black" points="2925.79,-1064.12 2935.33,-1059.51 2924.99,-1057.16 2925.79,-1064.12"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge17" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M2745.19,-2098.91C2770.52,-2102.42 2800.54,-2109.17 2825,-2122.14 3015.18,-2223.03 3014.92,-2312.86 3171,-2461.14 3204.88,-2493.33 3244.58,-2529.7 3270.46,-2553.22"/>
<polygon fill="black" stroke="black" points="3268.27,-2555.96 3278.03,-2560.09 3272.98,-2550.78 3268.27,-2555.96"/>
</g>
<!-- config_utils.load_config -->
<g id="node26" class="node">
<title>config_utils.load_config</title>
<g id="a_node26"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="3666,-1142.14 3484,-1142.14 3484,-1106.14 3666,-1106.14 3666,-1142.14"/>
<text text-anchor="middle" x="3575" y="-1120.44" font-family="Times,serif" font-size="14.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge18" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M3383.1,-1288.72C3398.27,-1284.82 3413.54,-1279.48 3427,-1272.14 3482.31,-1241.99 3530.33,-1184.48 3555.43,-1150.71"/>
<polygon fill="black" stroke="black" points="3558.52,-1152.4 3561.59,-1142.26 3552.87,-1148.28 3558.52,-1152.4"/>
</g>
<!-- caption_io.has_caption -->
<g id="node29" class="node">
<title>caption_io.has_caption</title>
<g id="a_node29"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="3086.5,-3387.14 2909.5,-3387.14 2909.5,-3351.14 3086.5,-3351.14 3086.5,-3387.14"/>
<text text-anchor="middle" x="2998" y="-3365.44" font-family="Times,serif" font-size="14.00">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge19" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3086.53,-3357.16C3102.99,-3353.41 3119.79,-3348.52 3135,-3342.14 3186.59,-3320.52 3238.73,-3281.28 3269.7,-3255.72"/>
<polygon fill="black" stroke="black" points="3272.05,-3258.31 3277.48,-3249.21 3267.56,-3252.94 3272.05,-3258.31"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge20" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3086.76,-3366.39C3104.52,-3362.07 3121.77,-3354.61 3135,-3342.14 3181.13,-3298.67 3127.48,-3250.22 3171,-3204.14 3177.92,-3196.81 3186.16,-3190.79 3195.06,-3185.85"/>
<polygon fill="black" stroke="black" points="3196.81,-3188.88 3204.16,-3181.25 3193.66,-3182.63 3196.81,-3188.88"/>
</g>
<!-- caption_io.write_caption -->
<g id="node30" class="node">
<title>caption_io.write_caption</title>
<g id="a_node30"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="2786,-1485.14 2596,-1485.14 2596,-1449.14 2786,-1449.14 2786,-1485.14"/>
<text text-anchor="middle" x="2691" y="-1463.44" font-family="Times,serif" font-size="14.00">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.load_json -->
<g id="edge26" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2786.12,-1481.36C2799.8,-1485.78 2813.21,-1491.56 2825,-1499.14 2846.84,-1513.18 2838.5,-1532.19 2861,-1545.14 2967.55,-1606.47 3039.87,-1505.26 3135,-1583.14 3274.31,-1697.2 3294.75,-1937.85 3297.6,-2020.54"/>
<polygon fill="black" stroke="black" points="3294.1,-2020.79 3297.88,-2030.69 3301.1,-2020.6 3294.1,-2020.79"/>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.write_json -->
<g id="edge27" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2786.15,-1478.39C2800.2,-1483.17 2813.73,-1489.85 2825,-1499.14 2854.77,-1523.69 2831.17,-1553.67 2861,-1578.14 2872.77,-1587.8 2886.94,-1594.64 2901.63,-1599.47"/>
<polygon fill="black" stroke="black" points="2900.75,-1602.86 2911.33,-1602.37 2902.75,-1596.16 2900.75,-1602.86"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge28" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M2713.48,-1449.04C2742.15,-1423.94 2793.03,-1375.99 2825,-1326.14 2848.04,-1290.23 2825.62,-1260.99 2861,-1237.14 2911.49,-1203.1 3078.58,-1214.24 3135,-1237.14 3155.68,-1245.54 3151.31,-1261.63 3171,-1272.14 3181.56,-1277.78 3193.21,-1282.24 3205.04,-1285.77"/>
<polygon fill="black" stroke="black" points="3204.43,-1289.24 3215,-1288.52 3206.29,-1282.49 3204.43,-1289.24"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge29" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2761.29,-1485.16C2785.43,-1495.01 2810.16,-1509.91 2825,-1532.14 2897.93,-1641.39 2810.38,-2000.93 2861,-2122.14 2931.35,-2290.59 3065.81,-2259.21 3135,-2428.14 3167.13,-2506.58 3119.51,-3122.81 3171,-3190.14 3176.36,-3197.15 3182.94,-3202.98 3190.25,-3207.83"/>
<polygon fill="black" stroke="black" points="3188.76,-3211.02 3199.15,-3213.09 3192.32,-3204.99 3188.76,-3211.02"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node31" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node31"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="2795.5,-1263.14 2586.5,-1263.14 2586.5,-1227.14 2795.5,-1227.14 2795.5,-1263.14"/>
<text text-anchor="middle" x="2691" y="-1241.44" font-family="Times,serif" font-size="14.00">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;serde_utils.parse_md -->
<g id="edge30" class="edge">
<title>image_io.read_image_meta&#45;&gt;serde_utils.parse_md</title>
<path fill="none" stroke="black" d="M2767.64,-1227.07C2786.39,-1222.55 2806.43,-1217.7 2825,-1213.14 2841.02,-1209.21 2844.97,-1208.03 2861,-1204.14 2876.71,-1200.33 2893.47,-1196.33 2909.65,-1192.5"/>
<polygon fill="black" stroke="black" points="2910.71,-1195.85 2919.64,-1190.15 2909.1,-1189.04 2910.71,-1195.85"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node32" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node32"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="2501,-3671.14 2286,-3671.14 2286,-3635.14 2501,-3635.14 2501,-3671.14"/>
<text text-anchor="middle" x="2393.5" y="-3649.44" font-family="Times,serif" font-size="14.00">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;serde_utils.write_md -->
<g id="edge31" class="edge">
<title>image_io.write_image_meta&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M2501.18,-3661.08C2532.67,-3663.43 2566.86,-3665.97 2597.39,-3668.25"/>
<polygon fill="black" stroke="black" points="2597.36,-3671.75 2607.59,-3669.01 2597.88,-3664.77 2597.36,-3671.75"/>
</g>
<!-- embed:cli -->
<g id="node159" class="node">
<title>embed:cli</title>
<g id="a_node159"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="876.5,-3947.14 790.5,-3947.14 790.5,-3911.14 876.5,-3911.14 876.5,-3947.14"/>
<text text-anchor="middle" x="833.5" y="-3925.44" font-family="Times,serif" font-size="14.00">embed:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;embed:cli -->
<!-- build_site._load_ontology -->
<g id="node34" class="node">
<title>build_site._load_ontology</title>
<polygon fill="none" stroke="black" points="2491,-1327.14 2296,-1327.14 2296,-1291.14 2491,-1291.14 2491,-1327.14"/>
<text text-anchor="middle" x="2393.5" y="-1305.44" font-family="Times,serif" font-size="14.00">build_site._load_ontology</text>
</g>
<!-- build_site._load_ontology&#45;&gt;serde_utils.load_json -->
<g id="edge33" class="edge">
<title>build_site._load_ontology&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2491.16,-1319.35C2512.82,-1321.61 2535.69,-1323.98 2557,-1326.14 2589.1,-1329.4 3110.63,-1362 3135,-1383.14 3234.52,-1469.47 3283.81,-1904.46 3295.32,-2020.6"/>
<polygon fill="black" stroke="black" points="3291.86,-2021.21 3296.32,-2030.82 3298.83,-2020.53 3291.86,-2021.21"/>
</g>
<!-- build_site._compile_locale -->
<g id="node35" class="node">
<title>build_site._compile_locale</title>
<polygon fill="none" stroke="black" points="3399,-421.14 3199,-421.14 3199,-385.14 3399,-385.14 3399,-421.14"/>
<text text-anchor="middle" x="3299" y="-399.44" font-family="Times,serif" font-size="14.00">build_site._compile_locale</text>
</g>
<!-- build_site._env_for_lang -->
<g id="node36" class="node">
<title>build_site._env_for_lang</title>
<polygon fill="none" stroke="black" points="3091.5,-421.14 2904.5,-421.14 2904.5,-385.14 3091.5,-385.14 3091.5,-421.14"/>
<text text-anchor="middle" x="2998" y="-399.44" font-family="Times,serif" font-size="14.00">build_site._env_for_lang</text>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge34" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M3091.56,-403.14C3122.28,-403.14 3156.77,-403.14 3188.63,-403.14"/>
<polygon fill="black" stroke="black" points="3188.88,-406.64 3198.88,-403.14 3188.88,-399.64 3188.88,-406.64"/>
</g>
<!-- build_site._iter_lots -->
<g id="node37" class="node">
<title>build_site._iter_lots</title>
<g id="a_node37"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="2768.5,-965.14 2613.5,-965.14 2613.5,-929.14 2768.5,-929.14 2768.5,-965.14"/>
<text text-anchor="middle" x="2691" y="-943.44" font-family="Times,serif" font-size="14.00">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge37" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2768.76,-948.82C2789.08,-952.73 2809.6,-960.26 2825,-974.14 2864.77,-1010.01 2821.4,-1053.08 2861,-1089.14 2876.42,-1103.18 2896.91,-1111.05 2917.3,-1115.31"/>
<polygon fill="black" stroke="black" points="2916.81,-1118.78 2927.28,-1117.12 2918.07,-1111.89 2916.81,-1118.78"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge35" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2768.56,-952.15C2788.19,-956.15 2808.42,-962.9 2825,-974.14 2849.18,-990.54 2837.13,-1012.29 2861,-1029.14 2879.76,-1042.38 2903.21,-1050.35 2925.33,-1055.12"/>
<polygon fill="black" stroke="black" points="2924.88,-1058.6 2935.37,-1057.1 2926.24,-1051.74 2924.88,-1058.6"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge36" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M2768.57,-947.39C2813.11,-947.54 2869.25,-947.72 2914.73,-947.87"/>
<polygon fill="black" stroke="black" points="2914.85,-951.37 2924.86,-947.9 2914.87,-944.37 2914.85,-951.37"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node38" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node38"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="3085.5,-2473.14 2910.5,-2473.14 2910.5,-2437.14 3085.5,-2437.14 3085.5,-2473.14"/>
<text text-anchor="middle" x="2998" y="-2451.44" font-family="Times,serif" font-size="14.00">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge38" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2768.6,-945.79C2789.91,-949.43 2811.02,-957.58 2825,-974.14 2866.15,-1022.91 2847.73,-2059.73 2861,-2122.14 2886.42,-2241.67 2952.44,-2373.03 2982.14,-2428.3"/>
<polygon fill="black" stroke="black" points="2979.07,-2429.98 2986.92,-2437.11 2985.23,-2426.65 2979.07,-2429.98"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node39" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node39"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="3125.5,-912.14 2870.5,-912.14 2870.5,-876.14 3125.5,-876.14 3125.5,-912.14"/>
<text text-anchor="middle" x="2998" y="-890.44" font-family="Times,serif" font-size="14.00">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge39" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2768.57,-933.84C2803.24,-927.81 2844.93,-920.57 2883.15,-913.93"/>
<polygon fill="black" stroke="black" points="2884.05,-917.32 2893.31,-912.16 2882.86,-910.42 2884.05,-917.32"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node40" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node40"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="3104,-1020.14 2892,-1020.14 2892,-984.14 3104,-984.14 3104,-1020.14"/>
<text text-anchor="middle" x="2998" y="-998.44" font-family="Times,serif" font-size="14.00">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge40" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M2768.57,-960.95C2804.44,-967.42 2847.83,-975.24 2887.12,-982.33"/>
<polygon fill="black" stroke="black" points="2886.55,-985.78 2897.02,-984.11 2887.8,-978.89 2886.55,-985.78"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node132" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node132"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="3427,-912.14 3171,-912.14 3171,-876.14 3427,-876.14 3427,-912.14"/>
<text text-anchor="middle" x="3299" y="-890.44" font-family="Times,serif" font-size="14.00">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge219" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M3125.8,-894.14C3137.25,-894.14 3148.88,-894.14 3160.42,-894.14"/>
<polygon fill="black" stroke="black" points="3160.52,-897.64 3170.52,-894.14 3160.52,-890.64 3160.52,-897.64"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node133" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node133"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3405,-1020.14 3193,-1020.14 3193,-984.14 3405,-984.14 3405,-1020.14"/>
<text text-anchor="middle" x="3299" y="-998.44" font-family="Times,serif" font-size="14.00">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge220" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M3104.42,-1002.14C3129.72,-1002.14 3156.88,-1002.14 3182.62,-1002.14"/>
<polygon fill="black" stroke="black" points="3182.78,-1005.64 3192.78,-1002.14 3182.78,-998.64 3182.78,-1005.64"/>
</g>
<!-- build_site._copy_images -->
<g id="node41" class="node">
<title>build_site._copy_images</title>
<polygon fill="none" stroke="black" points="2785,-873.14 2597,-873.14 2597,-837.14 2785,-837.14 2785,-873.14"/>
<text text-anchor="middle" x="2691" y="-851.44" font-family="Times,serif" font-size="14.00">build_site._copy_images</text>
</g>
<!-- build_site._copy_static -->
<g id="node42" class="node">
<title>build_site._copy_static</title>
<g id="a_node42"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="2198,-114.14 2022,-114.14 2022,-78.14 2198,-78.14 2198,-114.14"/>
<text text-anchor="middle" x="2110" y="-92.44" font-family="Times,serif" font-size="14.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node43" class="node">
<title>build_site._load_state</title>
<g id="a_node43"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="2195,-1298.14 2025,-1298.14 2025,-1262.14 2195,-1262.14 2195,-1298.14"/>
<text text-anchor="middle" x="2110" y="-1276.44" font-family="Times,serif" font-size="14.00">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge41" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M2195.08,-1288.8C2223.53,-1291.73 2255.7,-1295.05 2285.68,-1298.14"/>
<polygon fill="black" stroke="black" points="2285.45,-1301.63 2295.76,-1299.18 2286.17,-1294.67 2285.45,-1301.63"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge42" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M2151.47,-1262.07C2178.13,-1247.99 2211.44,-1225.84 2230,-1196.14 2282.96,-1111.37 2191.97,-1041.3 2266,-974.14 2360.61,-888.31 2521.27,-906.25 2615.3,-926.84"/>
<polygon fill="black" stroke="black" points="2614.79,-930.32 2625.31,-929.1 2616.33,-923.49 2614.79,-930.32"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge43" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M2152.11,-1262.13C2178.88,-1248.15 2212.06,-1226.08 2230,-1196.14 2296.75,-1084.73 2173.99,-997.8 2266,-906.14 2349.58,-822.88 2493.06,-823.42 2589.7,-835.75"/>
<polygon fill="black" stroke="black" points="2589.4,-839.24 2599.78,-837.1 2590.33,-832.31 2589.4,-839.24"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node44" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node44"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="3117.5,-1791.14 2878.5,-1791.14 2878.5,-1755.14 3117.5,-1755.14 3117.5,-1791.14"/>
<text text-anchor="middle" x="2998" y="-1769.44" font-family="Times,serif" font-size="14.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge44" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M2137.45,-1298.24C2206.09,-1346.03 2393.46,-1481.73 2521,-1624.14 2540.24,-1645.63 2532.59,-1662.78 2557,-1678.14 2658.81,-1742.23 2707.88,-1688.67 2825,-1716.14 2864.3,-1725.36 2907.43,-1739.66 2940.66,-1751.63"/>
<polygon fill="black" stroke="black" points="2939.61,-1754.97 2950.2,-1755.1 2942,-1748.39 2939.61,-1754.97"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node45" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node45"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="3099,-1536.14 2897,-1536.14 2897,-1500.14 3099,-1500.14 3099,-1536.14"/>
<text text-anchor="middle" x="2998" y="-1514.44" font-family="Times,serif" font-size="14.00">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge45" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M2155.15,-1298.27C2185.83,-1310.32 2227.9,-1325.79 2266,-1336.14 2509.86,-1402.41 2612.25,-1303.76 2825,-1440.14 2848.36,-1455.11 2837.73,-1476.03 2861,-1491.14 2869.09,-1496.4 2877.98,-1500.67 2887.22,-1504.14"/>
<polygon fill="black" stroke="black" points="2886.37,-1507.54 2896.96,-1507.46 2888.63,-1500.92 2886.37,-1507.54"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;serde_utils.load_json -->
<g id="edge188" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3117.51,-1790.42C3123.63,-1793.22 3129.51,-1796.44 3135,-1800.14 3217.51,-1855.82 3268.15,-1968.72 3288.16,-2021.18"/>
<polygon fill="black" stroke="black" points="3284.98,-2022.68 3291.75,-2030.83 3291.54,-2020.24 3284.98,-2022.68"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;serde_utils.load_json -->
<g id="edge189" class="edge">
<title>similar_utils._load_similar&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M3099.32,-1529.13C3112.43,-1534.01 3124.82,-1540.79 3135,-1550.14 3276.77,-1680.39 3295.56,-1935.45 3297.8,-2020.66"/>
<polygon fill="black" stroke="black" points="3294.3,-2020.93 3298,-2030.86 3301.3,-2020.79 3294.3,-2020.93"/>
</g>
<!-- build_site._sync_embeddings -->
<g id="node46" class="node">
<title>build_site._sync_embeddings</title>
<g id="a_node46"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="2505,-321.14 2282,-321.14 2282,-285.14 2505,-285.14 2505,-321.14"/>
<text text-anchor="middle" x="2393.5" y="-299.44" font-family="Times,serif" font-size="14.00">build_site._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model -->
<g id="node47" class="node">
<title>build_site._apply_price_model</title>
<g id="a_node47"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="2224.5,-168.14 1995.5,-168.14 1995.5,-132.14 2224.5,-132.14 2224.5,-168.14"/>
<text text-anchor="middle" x="2110" y="-146.44" font-family="Times,serif" font-size="14.00">build_site._apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node48" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node48"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="2521,-99.14 2266,-99.14 2266,-63.14 2521,-63.14 2521,-99.14"/>
<text text-anchor="middle" x="2393.5" y="-77.44" font-family="Times,serif" font-size="14.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge46" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M2192.74,-132.14C2205.24,-129.23 2217.98,-126.17 2230,-123.14 2246.1,-119.08 2249.95,-117.4 2266,-113.14 2280.14,-109.39 2295.2,-105.49 2309.82,-101.76"/>
<polygon fill="black" stroke="black" points="2311.02,-105.07 2319.85,-99.21 2309.29,-98.29 2311.02,-105.07"/>
</g>
<!-- price_utils.predict_price -->
<g id="node49" class="node">
<title>price_utils.predict_price</title>
<g id="a_node49"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="2785.5,-45.14 2596.5,-45.14 2596.5,-9.14 2785.5,-9.14 2785.5,-45.14"/>
<text text-anchor="middle" x="2691" y="-23.44" font-family="Times,serif" font-size="14.00">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge47" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M2216,-132.06C2220.93,-129.46 2225.64,-126.5 2230,-123.14 2257.4,-102.03 2237.01,-73 2266,-54.14 2362.69,8.76 2499.48,4.89 2591.29,-7.65"/>
<polygon fill="black" stroke="black" points="2591.03,-11.15 2601.42,-9.1 2592.01,-4.22 2591.03,-11.15"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node50" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node50"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="3099,-145.14 2897,-145.14 2897,-109.14 3099,-109.14 3099,-145.14"/>
<text text-anchor="middle" x="2998" y="-123.44" font-family="Times,serif" font-size="14.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge48" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M2224.56,-147.19C2395.7,-142.75 2717.65,-134.39 2886.79,-130"/>
<polygon fill="black" stroke="black" points="2887.06,-133.5 2896.96,-129.74 2886.88,-126.5 2887.06,-133.5"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node51" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node51"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="2496.5,-191.14 2290.5,-191.14 2290.5,-155.14 2496.5,-155.14 2496.5,-191.14"/>
<text text-anchor="middle" x="2393.5" y="-169.44" font-family="Times,serif" font-size="14.00">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.guess_currency -->
<g id="edge49" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M2224.69,-159.43C2242.97,-160.92 2261.88,-162.47 2280.13,-163.96"/>
<polygon fill="black" stroke="black" points="2279.95,-167.46 2290.2,-164.78 2280.52,-160.48 2279.95,-167.46"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node118" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node118"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="2807,-99.14 2575,-99.14 2575,-63.14 2807,-63.14 2807,-99.14"/>
<text text-anchor="middle" x="2691" y="-77.44" font-family="Times,serif" font-size="14.00">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge187" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M2521.1,-81.14C2535.47,-81.14 2550.12,-81.14 2564.47,-81.14"/>
<polygon fill="black" stroke="black" points="2564.87,-84.64 2574.87,-81.14 2564.87,-77.64 2564.87,-84.64"/>
</g>
<!-- build_site._similar_by_user -->
<g id="node52" class="node">
<title>build_site._similar_by_user</title>
<g id="a_node52"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="2795.5,-1761.14 2586.5,-1761.14 2586.5,-1725.14 2795.5,-1725.14 2795.5,-1761.14"/>
<text text-anchor="middle" x="2691" y="-1739.44" font-family="Times,serif" font-size="14.00">build_site._similar_by_user</text>
</a>
</g>
</g>
<!-- similar_utils._cos_sim -->
<g id="node53" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node53"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="3083.5,-1845.14 2912.5,-1845.14 2912.5,-1809.14 3083.5,-1809.14 3083.5,-1845.14"/>
<text text-anchor="middle" x="2998" y="-1823.44" font-family="Times,serif" font-size="14.00">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- build_site._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge50" class="edge">
<title>build_site._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M2795.68,-1758.9C2805.82,-1762 2815.76,-1765.71 2825,-1770.14 2843.78,-1779.15 2842.2,-1791.17 2861,-1800.14 2873.88,-1806.29 2888.1,-1811.04 2902.34,-1814.71"/>
<polygon fill="black" stroke="black" points="2901.64,-1818.14 2912.18,-1817.08 2903.28,-1811.34 2901.64,-1818.14"/>
</g>
<!-- build_site._categorise -->
<g id="node54" class="node">
<title>build_site._categorise</title>
<g id="a_node54"><a xlink:title="Return category info and recent lot list.">
<polygon fill="none" stroke="black" points="2195.5,-413.14 2024.5,-413.14 2024.5,-377.14 2195.5,-377.14 2195.5,-413.14"/>
<text text-anchor="middle" x="2110" y="-391.44" font-family="Times,serif" font-size="14.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge51" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2195.51,-388.1C2359.69,-375.78 2715.23,-356.09 2825,-406.14 2864.18,-424.01 2941.65,-523.51 2977.71,-571.82"/>
<polygon fill="black" stroke="black" points="2974.96,-574 2983.73,-579.94 2980.58,-569.82 2974.96,-574"/>
</g>
<!-- build_site._render_site -->
<g id="node55" class="node">
<title>build_site._render_site</title>
<polygon fill="none" stroke="black" points="2482.5,-667.14 2304.5,-667.14 2304.5,-631.14 2482.5,-631.14 2482.5,-667.14"/>
<text text-anchor="middle" x="2393.5" y="-645.44" font-family="Times,serif" font-size="14.00">build_site._render_site</text>
</g>
<!-- build_site._render_site&#45;&gt;serde_utils.read_text -->
<g id="edge52" class="edge">
<title>build_site._render_site&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2482.69,-640.44C2496.37,-636.33 2509.7,-630.46 2521,-622.14 2547.29,-602.8 2528.83,-574.62 2557,-558.14 2591.03,-538.24 3133.39,-570.43 3135,-571.14 3303.96,-646 3349.77,-699.26 3427,-867.14 3445.87,-908.16 3555.34,-2369.59 3571.9,-2591.91"/>
<polygon fill="black" stroke="black" points="3568.43,-2592.39 3572.66,-2602.1 3575.41,-2591.87 3568.43,-2592.39"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge53" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2482.6,-636.5C2495.86,-632.86 2509.08,-628.17 2521,-622.14 2540.1,-612.48 2536.99,-597.75 2557,-590.14 2678.84,-543.82 2833.7,-562.79 2923.45,-580.6"/>
<polygon fill="black" stroke="black" points="2922.77,-584.03 2933.27,-582.6 2924.17,-577.17 2922.77,-584.03"/>
</g>
<!-- build_site.build_page -->
<g id="node56" class="node">
<title>build_site.build_page</title>
<g id="a_node56"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="2774.5,-781.14 2607.5,-781.14 2607.5,-745.14 2774.5,-745.14 2774.5,-781.14"/>
<text text-anchor="middle" x="2691" y="-759.44" font-family="Times,serif" font-size="14.00">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge54" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M2425,-667.23C2456.96,-685.53 2509.09,-713.56 2557,-731.14 2569.83,-735.85 2583.61,-740.06 2597.26,-743.75"/>
<polygon fill="black" stroke="black" points="2596.61,-747.2 2607.17,-746.35 2598.39,-740.43 2596.61,-747.2"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node57" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node57"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="3105.5,-781.14 2890.5,-781.14 2890.5,-745.14 3105.5,-745.14 3105.5,-781.14"/>
<text text-anchor="middle" x="2998" y="-759.44" font-family="Times,serif" font-size="14.00">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge55" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M2447.02,-667.2C2478.59,-677.49 2519.73,-689.93 2557,-698.14 2674.48,-724.03 2706.02,-718.37 2825,-736.14 2842.87,-738.81 2861.76,-741.7 2880.24,-744.57"/>
<polygon fill="black" stroke="black" points="2879.73,-748.04 2890.15,-746.12 2880.8,-741.12 2879.73,-748.04"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge56" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M2761.19,-781.23C2785.32,-791.09 2810.07,-805.97 2825,-828.14 2889.35,-923.65 2796.23,-1249.91 2861,-1345.14 2874.2,-1364.56 2894.86,-1378.35 2916.12,-1388.07"/>
<polygon fill="black" stroke="black" points="2915,-1391.4 2925.57,-1392.12 2917.76,-1384.97 2915,-1391.4"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge58" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2759.02,-781.21C2783.48,-791.14 2809.02,-806.08 2825,-828.14 2893.67,-922.99 2781.28,-1003.37 2861,-1089.14 2875.61,-1104.86 2896.48,-1113.16 2917.5,-1117.3"/>
<polygon fill="black" stroke="black" points="2917.03,-1120.77 2927.47,-1118.96 2918.19,-1113.87 2917.03,-1120.77"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge57" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M2754.4,-745.13C2779.52,-735.02 2806.79,-719.93 2825,-698.14 2862.63,-653.13 2833.99,-623.22 2861,-571.14 2890.14,-514.94 2939.94,-459.85 2970.51,-428.82"/>
<polygon fill="black" stroke="black" points="2973.26,-431.01 2977.84,-421.46 2968.3,-426.07 2973.26,-431.01"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge59" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2762.38,-781.19C2786.34,-791.01 2810.67,-805.88 2825,-828.14 2863.93,-888.61 2846.16,-2051.77 2861,-2122.14 2886.21,-2241.71 2952.34,-2373.05 2982.1,-2428.31"/>
<polygon fill="black" stroke="black" points="2979.04,-2430 2986.89,-2437.11 2985.19,-2426.66 2979.04,-2430"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge60" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M2774.54,-763.14C2806.97,-763.14 2844.8,-763.14 2879.96,-763.14"/>
<polygon fill="black" stroke="black" points="2880.29,-766.64 2890.29,-763.14 2880.29,-759.64 2880.29,-766.64"/>
</g>
<!-- build_site.main -->
<g id="node58" class="node">
<title>build_site.main</title>
<polygon fill="none" stroke="black" points="1905,-390.14 1780,-390.14 1780,-354.14 1905,-354.14 1905,-390.14"/>
<text text-anchor="middle" x="1842.5" y="-368.44" font-family="Times,serif" font-size="14.00">build_site.main</text>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge69" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M1864.11,-353.84C1891,-331.08 1940.51,-292.92 1990,-274.14 2158.81,-210.08 2211.95,-219.14 2392.5,-219.14 2392.5,-219.14 2392.5,-219.14 2999,-219.14 3201.62,-219.14 3312.99,-208.64 3427,-376.14 3495.3,-476.48 3429.09,-804.6 3463,-921.14 3482.9,-989.52 3528.47,-1060.55 3554.61,-1097.76"/>
<polygon fill="black" stroke="black" points="3551.86,-1099.92 3560.5,-1106.04 3557.56,-1095.86 3551.86,-1099.92"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge61" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M1875.56,-354.13C1904.53,-338.74 1948.82,-317.35 1990,-306.14 2109.06,-273.73 2142.79,-282.82 2266,-276.14 2379.17,-270.01 2410.14,-252.61 2521,-276.14 2538.13,-279.78 2540.45,-286.42 2557,-292.14 2671.3,-331.63 2806.72,-363.67 2896.84,-383"/>
<polygon fill="black" stroke="black" points="2896.27,-386.46 2906.78,-385.12 2897.73,-379.61 2896.27,-386.46"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge62" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M1848.64,-353.99C1862.76,-307.58 1906.78,-183.95 1990,-123.14 1996.82,-118.16 2004.41,-114.07 2012.36,-110.72"/>
<polygon fill="black" stroke="black" points="2013.72,-113.95 2021.82,-107.12 2011.23,-107.4 2013.72,-113.95"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge63" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M1844.87,-390.48C1853.24,-498.76 1900.1,-1054.65 1990,-1196.14 2006.79,-1222.56 2035.17,-1243.08 2060,-1257.21"/>
<polygon fill="black" stroke="black" points="2058.51,-1260.39 2068.96,-1262.13 2061.88,-1254.25 2058.51,-1260.39"/>
</g>
<!-- build_site.main&#45;&gt;build_site._sync_embeddings -->
<g id="edge64" class="edge">
<title>build_site.main&#45;&gt;build_site._sync_embeddings</title>
<path fill="none" stroke="black" d="M1905.03,-354.15C1931.04,-347.19 1961.79,-339.79 1990,-335.14 2083.86,-319.67 2191.3,-311.61 2271.56,-307.45"/>
<polygon fill="black" stroke="black" points="2271.9,-310.94 2281.71,-306.94 2271.54,-303.95 2271.9,-310.94"/>
</g>
<!-- build_site.main&#45;&gt;build_site._apply_price_model -->
<g id="edge65" class="edge">
<title>build_site.main&#45;&gt;build_site._apply_price_model</title>
<path fill="none" stroke="black" d="M1855.45,-354.1C1878.21,-320.87 1930.84,-249.36 1990,-205.14 2007.71,-191.91 2029.1,-180.8 2048.84,-172.11"/>
<polygon fill="black" stroke="black" points="2050.26,-175.31 2058.08,-168.16 2047.51,-168.87 2050.26,-175.31"/>
</g>
<!-- build_site.main&#45;&gt;build_site._similar_by_user -->
<g id="edge66" class="edge">
<title>build_site.main&#45;&gt;build_site._similar_by_user</title>
<path fill="none" stroke="black" d="M1846.62,-390.27C1861.08,-474.96 1922.25,-840.28 1954,-1142.14 1960.24,-1201.5 1948.34,-1635.4 1990,-1678.14 2068.77,-1758.94 2398.95,-1756.93 2576.26,-1749.58"/>
<polygon fill="black" stroke="black" points="2576.57,-1753.07 2586.41,-1749.15 2576.27,-1746.08 2576.57,-1753.07"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge67" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M1905.08,-377.48C1937.49,-380.28 1977.95,-383.79 2014.26,-386.93"/>
<polygon fill="black" stroke="black" points="2014.11,-390.43 2024.38,-387.81 2014.72,-383.46 2014.11,-390.43"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge68" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M1867.74,-390.4C1930.21,-436.53 2103.22,-558.65 2266,-622.14 2275.1,-625.69 2284.76,-628.81 2294.53,-631.55"/>
<polygon fill="black" stroke="black" points="2293.75,-634.97 2304.31,-634.16 2295.56,-628.2 2293.75,-634.97"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node59" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node59"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="2793,-1577.14 2589,-1577.14 2589,-1541.14 2793,-1541.14 2793,-1577.14"/>
<text text-anchor="middle" x="2691" y="-1555.44" font-family="Times,serif" font-size="14.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge70" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M1846.11,-390.42C1864.54,-519.45 1974.89,-1288.39 1990,-1307.14 2135.38,-1487.64 2420.86,-1538.91 2578.62,-1553.44"/>
<polygon fill="black" stroke="black" points="2578.56,-1556.95 2588.83,-1554.34 2579.17,-1549.97 2578.56,-1556.95"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node60" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node60"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="2500.5,-505.14 2286.5,-505.14 2286.5,-469.14 2500.5,-469.14 2500.5,-505.14"/>
<text text-anchor="middle" x="2393.5" y="-483.44" font-family="Times,serif" font-size="14.00">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge71" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M1889.74,-390.17C1918.28,-400.73 1955.84,-413.62 1990,-422.14 2085.17,-445.89 2195.24,-462.97 2276.2,-473.65"/>
<polygon fill="black" stroke="black" points="2276.06,-477.16 2286.43,-474.98 2276.96,-470.22 2276.06,-477.16"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node61" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node61"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="2803,-283.14 2579,-283.14 2579,-247.14 2803,-247.14 2803,-283.14"/>
<text text-anchor="middle" x="2691" y="-261.44" font-family="Times,serif" font-size="14.00">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge72" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M1905,-369.4C2060.6,-362.31 2461.81,-343.04 2521,-330.14 2563.77,-320.82 2610.02,-302.41 2643.3,-287.55"/>
<polygon fill="black" stroke="black" points="2645.1,-290.58 2652.76,-283.27 2642.21,-284.2 2645.1,-290.58"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;serde_utils.write_json -->
<g id="edge190" class="edge">
<title>similar_utils._save_similar&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2793.14,-1576.05C2828.02,-1581.89 2866.95,-1588.4 2901.38,-1594.15"/>
<polygon fill="black" stroke="black" points="2900.99,-1597.64 2911.43,-1595.83 2902.15,-1590.73 2900.99,-1597.64"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge191" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M2762.26,-1577.27C2786.21,-1587.1 2810.56,-1601.96 2825,-1624.14 2882.51,-1712.48 2812.3,-2478.66 2861,-2572.14 2879.68,-2608 2917.12,-2634.91 2947.99,-2652.21"/>
<polygon fill="black" stroke="black" points="2946.46,-2655.36 2956.92,-2657.05 2949.8,-2649.21 2946.46,-2655.36"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node119" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node119"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="3100,-1282.14 2896,-1282.14 2896,-1246.14 3100,-1246.14 3100,-1282.14"/>
<text text-anchor="middle" x="2998" y="-1260.44" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge192" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M2757.9,-1541.03C2782.5,-1531.06 2808.45,-1516.1 2825,-1494.14 2880.15,-1420.97 2796.87,-1356.59 2861,-1291.14 2868.34,-1283.65 2877.12,-1277.92 2886.64,-1273.58"/>
<polygon fill="black" stroke="black" points="2888,-1276.81 2895.97,-1269.83 2885.39,-1270.32 2888,-1276.81"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node120" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node120"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="3119.5,-283.14 2876.5,-283.14 2876.5,-247.14 3119.5,-247.14 3119.5,-283.14"/>
<text text-anchor="middle" x="2998" y="-261.44" font-family="Times,serif" font-size="14.00">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge193" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M2803.41,-265.14C2823.81,-265.14 2845.27,-265.14 2866.17,-265.14"/>
<polygon fill="black" stroke="black" points="2866.39,-268.64 2876.39,-265.14 2866.39,-261.64 2866.39,-268.64"/>
</g>
<!-- post_io.get_contact -->
<g id="node63" class="node">
<title>post_io.get_contact</title>
<g id="a_node63"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="2768,-3801.14 2614,-3801.14 2614,-3765.14 2768,-3765.14 2768,-3801.14"/>
<text text-anchor="middle" x="2691" y="-3779.44" font-family="Times,serif" font-size="14.00">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node64" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node64"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="2780,-3747.14 2602,-3747.14 2602,-3711.14 2780,-3711.14 2780,-3747.14"/>
<text text-anchor="middle" x="2691" y="-3725.44" font-family="Times,serif" font-size="14.00">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node65" class="node">
<title>post_io.write_post</title>
<g id="a_node65"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="2466.5,-3725.14 2320.5,-3725.14 2320.5,-3689.14 2466.5,-3689.14 2466.5,-3725.14"/>
<text text-anchor="middle" x="2393.5" y="-3703.44" font-family="Times,serif" font-size="14.00">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;serde_utils.write_md -->
<g id="edge75" class="edge">
<title>post_io.write_post&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M2466.79,-3699.31C2506.25,-3695.04 2555.54,-3689.7 2597.75,-3685.13"/>
<polygon fill="black" stroke="black" points="2598.2,-3688.6 2607.76,-3684.05 2597.44,-3681.64 2598.2,-3688.6"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge76" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M2466.67,-3718.15C2484.77,-3722.1 2503.9,-3727.32 2521,-3734.14 2538.42,-3741.09 2539.55,-3749.28 2557,-3756.14 2571.8,-3761.96 2588.04,-3766.58 2603.93,-3770.24"/>
<polygon fill="black" stroke="black" points="2603.25,-3773.68 2613.77,-3772.4 2604.75,-3766.84 2603.25,-3773.68"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge77" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M2466.79,-3712.52C2504.43,-3715.33 2551.02,-3718.79 2591.87,-3721.84"/>
<polygon fill="black" stroke="black" points="2591.62,-3725.33 2601.85,-3722.58 2592.14,-3718.35 2591.62,-3725.33"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node66" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node66"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="2811.5,-2427.14 2570.5,-2427.14 2570.5,-2391.14 2811.5,-2391.14 2811.5,-2427.14"/>
<text text-anchor="middle" x="2691" y="-2405.44" font-family="Times,serif" font-size="14.00">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge78" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2811.67,-2427.19C2840.95,-2431.61 2871.93,-2436.28 2900,-2440.51"/>
<polygon fill="black" stroke="black" points="2899.79,-2444.02 2910.2,-2442.05 2900.83,-2437.1 2899.79,-2444.02"/>
</g>
<!-- embed.embed_file -->
<g id="node67" class="node">
<title>embed.embed_file</title>
<g id="a_node67"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="2764,-1669.14 2618,-1669.14 2618,-1633.14 2764,-1633.14 2764,-1669.14"/>
<text text-anchor="middle" x="2691" y="-1647.44" font-family="Times,serif" font-size="14.00">embed.embed_file</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;serde_utils.write_json -->
<g id="edge79" class="edge">
<title>embed.embed_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2764.28,-1641.43C2805.31,-1635.91 2857.16,-1628.94 2901.5,-1622.98"/>
<polygon fill="black" stroke="black" points="2901.98,-1626.45 2911.42,-1621.65 2901.05,-1619.51 2901.98,-1626.45"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge80" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2761.15,-1633.03C2785.27,-1623.16 2810.03,-1608.29 2825,-1586.14 2886.76,-1494.77 2788.55,-1174.3 2861,-1091.14 2876.96,-1072.82 2901.38,-1064.43 2925.15,-1060.98"/>
<polygon fill="black" stroke="black" points="2925.75,-1064.43 2935.27,-1059.79 2924.93,-1057.48 2925.75,-1064.43"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge81" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M2764.28,-1654.22C2809.9,-1656.17 2868.92,-1658.68 2916.1,-1660.69"/>
<polygon fill="black" stroke="black" points="2916.15,-1664.2 2926.29,-1661.13 2916.45,-1657.2 2916.15,-1664.2"/>
</g>
<!-- embed.main -->
<g id="node68" class="node">
<title>embed.main</title>
<g id="a_node68"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="2445.5,-1669.14 2341.5,-1669.14 2341.5,-1633.14 2445.5,-1633.14 2445.5,-1669.14"/>
<text text-anchor="middle" x="2393.5" y="-1647.44" font-family="Times,serif" font-size="14.00">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge82" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M2445.63,-1651.14C2490.24,-1651.14 2555.75,-1651.14 2607.72,-1651.14"/>
<polygon fill="black" stroke="black" points="2607.93,-1654.64 2617.93,-1651.14 2607.93,-1647.64 2607.93,-1654.64"/>
</g>
<!-- caption._identify_size -->
<g id="node69" class="node">
<title>caption._identify_size</title>
<g id="a_node69"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="3384,-3563.14 3214,-3563.14 3214,-3527.14 3384,-3527.14 3384,-3563.14"/>
<text text-anchor="middle" x="3299" y="-3541.44" font-family="Times,serif" font-size="14.00">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node70" class="node">
<title>caption._prepare_image</title>
<g id="a_node70"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="3091.5,-3555.14 2904.5,-3555.14 2904.5,-3519.14 3091.5,-3519.14 3091.5,-3555.14"/>
<text text-anchor="middle" x="2998" y="-3533.44" font-family="Times,serif" font-size="14.00">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge83" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M3091.56,-3539.62C3127.07,-3540.57 3167.62,-3541.65 3203.33,-3542.61"/>
<polygon fill="black" stroke="black" points="3203.67,-3546.12 3213.76,-3542.89 3203.85,-3539.12 3203.67,-3546.12"/>
</g>
<!-- caption._guess_chat -->
<g id="node71" class="node">
<title>caption._guess_chat</title>
<g id="a_node71"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="3378.5,-3509.14 3219.5,-3509.14 3219.5,-3473.14 3378.5,-3473.14 3378.5,-3509.14"/>
<text text-anchor="middle" x="3299" y="-3487.44" font-family="Times,serif" font-size="14.00">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node72" class="node">
<title>caption.caption_file</title>
<g id="a_node72"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="2768.5,-3493.14 2613.5,-3493.14 2613.5,-3457.14 2768.5,-3457.14 2768.5,-3493.14"/>
<text text-anchor="middle" x="2691" y="-3471.44" font-family="Times,serif" font-size="14.00">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.load_json -->
<g id="edge84" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2768.79,-3458.53C2787.33,-3454.01 2806.98,-3448.78 2825,-3443.14 2841.38,-3438.01 2844.35,-3433.31 2861,-3429.14 2920.49,-3414.24 3093.48,-3441.28 3135,-3396.14 3172.22,-3355.68 3160.69,-2461.15 3171,-2407.14 3195.43,-2279.16 3257.8,-2135.49 3284.99,-2076.58"/>
<polygon fill="black" stroke="black" points="3288.3,-2077.76 3289.34,-2067.22 3281.95,-2074.81 3288.3,-2077.76"/>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.write_json -->
<g id="edge85" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2711.65,-3457.11C2742.66,-3427.2 2801.77,-3363.89 2825,-3296.14 2854.9,-3208.94 2801.73,-1707.75 2861,-1637.14 2871.44,-1624.7 2885.84,-1616.94 2901.36,-1612.26"/>
<polygon fill="black" stroke="black" points="2902.35,-1615.62 2911.16,-1609.73 2900.6,-1608.84 2902.35,-1615.62"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge86" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2768.82,-3474.11C2878.5,-3471.48 3073.52,-3462.15 3135,-3429.14 3208.09,-3389.9 3261.14,-3302.89 3284.59,-3258.43"/>
<polygon fill="black" stroke="black" points="3287.79,-3259.86 3289.28,-3249.37 3281.58,-3256.65 3287.79,-3259.86"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge87" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2768.74,-3465.23C2788.05,-3460.5 2808.09,-3453.49 2825,-3443.14 2845.97,-3430.31 2840,-3413.92 2861,-3401.14 2872.76,-3393.99 2885.98,-3388.43 2899.44,-3384.12"/>
<polygon fill="black" stroke="black" points="2900.69,-3387.4 2909.27,-3381.2 2898.69,-3380.69 2900.69,-3387.4"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge88" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M2768.66,-3490.7C2787.11,-3494.44 2806.76,-3498.43 2825,-3502.14 2848.75,-3506.97 2874.35,-3512.18 2898.35,-3517.06"/>
<polygon fill="black" stroke="black" points="2897.68,-3520.49 2908.17,-3519.06 2899.07,-3513.63 2897.68,-3520.49"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge89" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M2768.75,-3477.17C2881.24,-3480.14 3090.4,-3485.66 3209.31,-3488.8"/>
<polygon fill="black" stroke="black" points="3209.39,-3492.3 3219.48,-3489.07 3209.57,-3485.31 3209.39,-3492.3"/>
</g>
<!-- caption.main -->
<g id="node73" class="node">
<title>caption.main</title>
<polygon fill="none" stroke="black" points="2448,-3449.14 2339,-3449.14 2339,-3413.14 2448,-3413.14 2448,-3449.14"/>
<text text-anchor="middle" x="2393.5" y="-3427.44" font-family="Times,serif" font-size="14.00">caption.main</text>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge90" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M2448.01,-3439.11C2491.28,-3445.55 2553.06,-3454.75 2603.36,-3462.24"/>
<polygon fill="black" stroke="black" points="2602.85,-3465.7 2613.26,-3463.71 2603.88,-3458.78 2602.85,-3465.7"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node74" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node74"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="1935.5,-3817.14 1749.5,-3817.14 1749.5,-3781.14 1935.5,-3781.14 1935.5,-3817.14"/>
<text text-anchor="middle" x="1842.5" y="-3795.44" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node75" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node75"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="679,-2389.14 520,-2389.14 520,-2353.14 679,-2353.14 679,-2389.14"/>
<text text-anchor="middle" x="599.5" y="-2367.44" font-family="Times,serif" font-size="14.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node76" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node76"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="1945,-3469.14 1740,-3469.14 1740,-3433.14 1945,-3433.14 1945,-3469.14"/>
<text text-anchor="middle" x="1842.5" y="-3447.44" font-family="Times,serif" font-size="14.00">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node77" class="node">
<title>tg_client._write_md</title>
<g id="a_node77"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="2188,-3714.14 2032,-3714.14 2032,-3678.14 2188,-3678.14 2188,-3714.14"/>
<text text-anchor="middle" x="2110" y="-3692.44" font-family="Times,serif" font-size="14.00">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge91" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M2188.29,-3699.16C2226.09,-3700.64 2271.62,-3702.42 2310.08,-3703.92"/>
<polygon fill="black" stroke="black" points="2310.09,-3707.42 2320.21,-3704.32 2310.36,-3700.43 2310.09,-3707.42"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node78" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node78"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="2800,-2595.14 2582,-2595.14 2582,-2559.14 2800,-2559.14 2800,-2595.14"/>
<text text-anchor="middle" x="2691" y="-2573.44" font-family="Times,serif" font-size="14.00">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge92" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2787.72,-2559.12C2800.54,-2555.27 2813.29,-2550.65 2825,-2545.14 2843.1,-2536.63 2843.83,-2528.4 2861,-2518.14 2886.85,-2502.7 2917.12,-2488.34 2942.53,-2477.25"/>
<polygon fill="black" stroke="black" points="2944.21,-2480.33 2952.01,-2473.16 2941.44,-2473.9 2944.21,-2480.33"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node79" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node79"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="2495.5,-2668.14 2291.5,-2668.14 2291.5,-2632.14 2495.5,-2632.14 2495.5,-2668.14"/>
<text text-anchor="middle" x="2393.5" y="-2646.44" font-family="Times,serif" font-size="14.00">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge93" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M2465.25,-2632.11C2493.74,-2624.9 2526.91,-2616.56 2557,-2609.14 2572.37,-2605.35 2588.76,-2601.37 2604.59,-2597.54"/>
<polygon fill="black" stroke="black" points="2605.45,-2600.94 2614.35,-2595.19 2603.81,-2594.13 2605.45,-2600.94"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node80" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node80"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="1468,-2290.14 1247,-2290.14 1247,-2254.14 1468,-2254.14 1468,-2290.14"/>
<text text-anchor="middle" x="1357.5" y="-2268.44" font-family="Times,serif" font-size="14.00">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge94" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1461.75,-2290.16C1586.47,-2311.08 1802.87,-2344.69 1990,-2360.14 2359.98,-2390.7 2462.22,-2303.35 2825,-2382.14 2871.65,-2392.27 2921.51,-2414.88 2955.47,-2432.27"/>
<polygon fill="black" stroke="black" points="2954.12,-2435.52 2964.61,-2437.02 2957.35,-2429.31 2954.12,-2435.52"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node81" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node81"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="1954,-3415.14 1731,-3415.14 1731,-3379.14 1954,-3379.14 1954,-3415.14"/>
<text text-anchor="middle" x="1842.5" y="-3393.44" font-family="Times,serif" font-size="14.00">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node82" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node82"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="2203,-3611.14 2017,-3611.14 2017,-3575.14 2203,-3575.14 2203,-3611.14"/>
<text text-anchor="middle" x="2110" y="-3589.44" font-family="Times,serif" font-size="14.00">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node83" class="node">
<title>tg_client._extract_author</title>
<g id="a_node83"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="2490.5,-3617.14 2296.5,-3617.14 2296.5,-3581.14 2490.5,-3581.14 2490.5,-3617.14"/>
<text text-anchor="middle" x="2393.5" y="-3595.44" font-family="Times,serif" font-size="14.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node84" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node84"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="2801.5,-3639.14 2580.5,-3639.14 2580.5,-3603.14 2801.5,-3603.14 2801.5,-3639.14"/>
<text text-anchor="middle" x="2691" y="-3617.44" font-family="Times,serif" font-size="14.00">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge95" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M2490.85,-3606.31C2516.24,-3608.2 2543.94,-3610.27 2570.39,-3612.24"/>
<polygon fill="black" stroke="black" points="2570.23,-3615.73 2580.46,-3612.99 2570.75,-3608.75 2570.23,-3615.73"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node85" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node85"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="2797,-3547.14 2585,-3547.14 2585,-3511.14 2797,-3511.14 2797,-3547.14"/>
<text text-anchor="middle" x="2691" y="-3525.44" font-family="Times,serif" font-size="14.00">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node86" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node86"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="3094.5,-3855.14 2901.5,-3855.14 2901.5,-3819.14 3094.5,-3819.14 3094.5,-3855.14"/>
<text text-anchor="middle" x="2998" y="-3833.44" font-family="Times,serif" font-size="14.00">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node87" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node87"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="1938,-3523.14 1747,-3523.14 1747,-3487.14 1938,-3487.14 1938,-3523.14"/>
<text text-anchor="middle" x="1842.5" y="-3501.44" font-family="Times,serif" font-size="14.00">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge96" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1938.22,-3488.28C1943.84,-3485.4 1949.16,-3482.05 1954,-3478.14 1982.47,-3455.18 1959.33,-3424.07 1990,-3404.14 2064.87,-3355.47 2660.96,-3362.18 2899.17,-3366.88"/>
<polygon fill="black" stroke="black" points="2899.14,-3370.38 2909.21,-3367.08 2899.28,-3363.38 2899.14,-3370.38"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge98" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M1938.24,-3491.91C1944.2,-3488.23 1949.57,-3483.7 1954,-3478.14 2034.93,-3376.67 1943.37,-1263.27 1990,-1142.14 2056.87,-968.43 2096.47,-904 2266,-827.14 2279.93,-820.83 2793.86,-822.32 2825,-828.14 2869.83,-836.52 2918.08,-856.04 2952.04,-871.7"/>
<polygon fill="black" stroke="black" points="2950.68,-874.92 2961.22,-875.99 2953.65,-868.58 2950.68,-874.92"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node88" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node88"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="2220.5,-3557.14 1999.5,-3557.14 1999.5,-3521.14 2220.5,-3521.14 2220.5,-3557.14"/>
<text text-anchor="middle" x="2110" y="-3535.44" font-family="Times,serif" font-size="14.00">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge97" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M1938.23,-3517.27C1954.78,-3519.39 1972.2,-3521.62 1989.33,-3523.82"/>
<polygon fill="black" stroke="black" points="1989.01,-3527.3 1999.37,-3525.1 1989.9,-3520.36 1989.01,-3527.3"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node89" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node89"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="2483.5,-3779.14 2303.5,-3779.14 2303.5,-3743.14 2483.5,-3743.14 2483.5,-3779.14"/>
<text text-anchor="middle" x="2393.5" y="-3757.44" font-family="Times,serif" font-size="14.00">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge99" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M2219.3,-3557.27C2223.13,-3559.88 2226.72,-3562.83 2230,-3566.14 2283.67,-3620.46 2211.98,-3680.17 2266,-3734.14 2273.84,-3741.98 2283.37,-3747.8 2293.64,-3752.09"/>
<polygon fill="black" stroke="black" points="2292.65,-3755.45 2303.24,-3755.61 2295.06,-3748.88 2292.65,-3755.45"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node90" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node90"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="2808.5,-3855.14 2573.5,-3855.14 2573.5,-3819.14 2808.5,-3819.14 2808.5,-3855.14"/>
<text text-anchor="middle" x="2691" y="-3833.44" font-family="Times,serif" font-size="14.00">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge102" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2449.8,-3779.2C2481.07,-3789.07 2521,-3801.08 2557,-3810.14 2566.34,-3812.49 2576.09,-3814.78 2585.87,-3816.97"/>
<polygon fill="black" stroke="black" points="2585.14,-3820.39 2595.66,-3819.12 2586.65,-3813.55 2585.14,-3820.39"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge100" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2808.74,-3823.32C2814.71,-3819.69 2820.21,-3815.34 2825,-3810.14 2870.52,-3760.78 2832.19,-3570.79 2861,-3510.14 2884.17,-3461.35 2930.93,-3418.83 2963.1,-3393.58"/>
<polygon fill="black" stroke="black" points="2965.55,-3396.11 2971.34,-3387.23 2961.28,-3390.56 2965.55,-3396.11"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge101" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M2808.61,-3837.14C2835.75,-3837.14 2864.5,-3837.14 2891.15,-3837.14"/>
<polygon fill="black" stroke="black" points="2891.25,-3840.64 2901.25,-3837.14 2891.25,-3833.64 2891.25,-3840.64"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node91" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node91"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="941,-3775.14 726,-3775.14 726,-3739.14 941,-3739.14 941,-3775.14"/>
<text text-anchor="middle" x="833.5" y="-3753.44" font-family="Times,serif" font-size="14.00">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge103" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M878.32,-3775.19C966.99,-3810.03 1174.71,-3883.14 1356.5,-3883.14 1356.5,-3883.14 1356.5,-3883.14 1600.5,-3883.14 1949.11,-3883.14 2359.91,-3859.34 2563.07,-3845.98"/>
<polygon fill="black" stroke="black" points="2563.43,-3849.46 2573.18,-3845.31 2562.97,-3842.48 2563.43,-3849.46"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node92" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node92"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="2776.5,-2221.14 2605.5,-2221.14 2605.5,-2185.14 2776.5,-2185.14 2776.5,-2221.14"/>
<text text-anchor="middle" x="2691" y="-2199.44" font-family="Times,serif" font-size="14.00">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;serde_utils.read_text -->
<g id="edge104" class="edge">
<title>tg_client._get_id_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2776.51,-2199.77C2867.2,-2198.58 3014.47,-2203.69 3135,-2241.14 3277.56,-2285.44 3316.94,-2306.28 3427,-2407.14 3488.13,-2463.16 3537.52,-2549.1 3560.32,-2592.71"/>
<polygon fill="black" stroke="black" points="3557.34,-2594.57 3565.03,-2601.85 3563.56,-2591.36 3557.34,-2594.57"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge105" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2734.55,-2221.14C2761.75,-2233.68 2797.04,-2251.93 2825,-2273.14 2887.31,-2320.41 2946.98,-2391.12 2976.95,-2428.98"/>
<polygon fill="black" stroke="black" points="2974.31,-2431.28 2983.23,-2436.99 2979.81,-2426.96 2974.31,-2431.28"/>
</g>
<!-- tg_client._load_progress -->
<g id="node93" class="node">
<title>tg_client._load_progress</title>
<g id="a_node93"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="928,-3057.14 739,-3057.14 739,-3021.14 928,-3021.14 928,-3057.14"/>
<text text-anchor="middle" x="833.5" y="-3035.44" font-family="Times,serif" font-size="14.00">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;serde_utils.read_text -->
<g id="edge106" class="edge">
<title>tg_client._load_progress&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M847.8,-3057.25C921.87,-3156.55 1295.96,-3637.27 1731,-3826.14 2123.88,-3996.71 2261.69,-3921.14 2690,-3921.14 2690,-3921.14 2690,-3921.14 2999,-3921.14 3244.45,-3921.14 3326.97,-3796.28 3427,-3572.14 3487.23,-3437.2 3432.05,-3052.64 3463,-2908.14 3484.36,-2808.42 3535.31,-2697.8 3560.04,-2647.6"/>
<polygon fill="black" stroke="black" points="3563.31,-2648.9 3564.63,-2638.39 3557.04,-2645.78 3563.31,-2648.9"/>
</g>
<!-- tg_client._save_progress -->
<g id="node94" class="node">
<title>tg_client._save_progress</title>
<g id="a_node94"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="1189.5,-2649.14 998.5,-2649.14 998.5,-2613.14 1189.5,-2613.14 1189.5,-2649.14"/>
<text text-anchor="middle" x="1094" y="-2627.44" font-family="Times,serif" font-size="14.00">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node95" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node95"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1438.5,-2519.14 1276.5,-2519.14 1276.5,-2483.14 1438.5,-2483.14 1438.5,-2519.14"/>
<text text-anchor="middle" x="1357.5" y="-2497.44" font-family="Times,serif" font-size="14.00">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge107" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1438.83,-2499C1534.67,-2496.63 1699.77,-2493.14 1841.5,-2493.14 1841.5,-2493.14 1841.5,-2493.14 2394.5,-2493.14 2573.23,-2493.14 2781.19,-2476.28 2900.13,-2465.02"/>
<polygon fill="black" stroke="black" points="2900.68,-2468.48 2910.3,-2464.05 2900.02,-2461.52 2900.68,-2468.48"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node96" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node96"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="913,-2603.14 754,-2603.14 754,-2567.14 913,-2567.14 913,-2603.14"/>
<text text-anchor="middle" x="833.5" y="-2581.44" font-family="Times,serif" font-size="14.00">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge108" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M913.21,-2587.35C1096.54,-2591.87 1547.63,-2599.12 1695,-2566.14 1712.09,-2562.32 1713.97,-2554.21 1731,-2550.14 1894.62,-2511.1 1940.79,-2531.14 2109,-2531.14 2109,-2531.14 2109,-2531.14 2394.5,-2531.14 2586.5,-2531.14 2635.33,-2524.97 2825,-2495.14 2856.29,-2490.22 2890.34,-2482.76 2919.83,-2475.6"/>
<polygon fill="black" stroke="black" points="2920.76,-2478.98 2929.64,-2473.19 2919.09,-2472.18 2920.76,-2478.98"/>
</g>
<!-- tg_client._save_message -->
<g id="node97" class="node">
<title>tg_client._save_message</title>
<g id="a_node97"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="1695,-3546.14 1504,-3546.14 1504,-3510.14 1695,-3510.14 1695,-3546.14"/>
<text text-anchor="middle" x="1599.5" y="-3524.44" font-family="Times,serif" font-size="14.00">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge110" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1602.66,-3509.83C1614.06,-3412.7 1667.64,-2947.79 1695,-2566.14 1701.33,-2477.83 1684.62,-1845.56 1731,-1770.14 1940.85,-1428.9 2279.55,-1655.81 2521,-1336.14 2565.19,-1277.63 2502.24,-1223.9 2557,-1175.14 2601.72,-1135.32 2765.67,-1155.23 2825,-1147.14 2855.2,-1143.02 2888.23,-1137.66 2917.21,-1132.67"/>
<polygon fill="black" stroke="black" points="2918.02,-1136.08 2927.27,-1130.92 2916.82,-1129.18 2918.02,-1136.08"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge111" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1605.65,-3510.04C1631.36,-3422.83 1754.11,-3042.01 1990,-2842.14 2076.68,-2768.7 2129.19,-2806.53 2230,-2754.14 2247.29,-2745.16 2248.09,-2736.8 2266,-2729.14 2372.35,-2683.67 2418.74,-2731.19 2521,-2677.14 2540.73,-2666.71 2536.97,-2651.97 2557,-2642.14 2665.01,-2589.16 2729.79,-2677.67 2825,-2604.14 2857.79,-2578.81 2832.25,-2547.98 2861,-2518.14 2878.37,-2500.11 2901.91,-2486.73 2924.51,-2477.05"/>
<polygon fill="black" stroke="black" points="2925.85,-2480.29 2933.78,-2473.26 2923.2,-2473.81 2925.85,-2480.29"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge109" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M1609.44,-3546.27C1627.35,-3580.52 1671.11,-3654.49 1731,-3690.14 1756.96,-3705.6 2235.91,-3785.41 2266,-3788.14 2378.87,-3798.39 2407.68,-3789.82 2521,-3788.14 2547.94,-3787.74 2577.28,-3786.99 2603.84,-3786.18"/>
<polygon fill="black" stroke="black" points="2603.99,-3789.68 2613.87,-3785.87 2603.77,-3782.68 2603.99,-3789.68"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge112" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M1613.07,-3546.58C1632.13,-3574.96 1668.86,-3631.38 1695,-3682.14 1713.78,-3718.62 1700.32,-3739.9 1731,-3767.14 1734.72,-3770.45 1738.77,-3773.41 1743.04,-3776.07"/>
<polygon fill="black" stroke="black" points="1741.66,-3779.31 1752.1,-3781.12 1745.06,-3773.19 1741.66,-3779.31"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge113" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M1643.52,-3510.09C1668.73,-3499.9 1701.36,-3487.4 1731,-3478.14 1737.93,-3475.98 1745.16,-3473.87 1752.44,-3471.87"/>
<polygon fill="black" stroke="black" points="1753.65,-3475.16 1762.39,-3469.18 1751.83,-3468.41 1753.65,-3475.16"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge114" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M1613.26,-3546.43C1634.19,-3574.78 1678.74,-3628.63 1731,-3653.14 1823.42,-3696.49 1942.03,-3703.17 2021.52,-3701.66"/>
<polygon fill="black" stroke="black" points="2022.07,-3705.14 2031.98,-3701.41 2021.9,-3698.15 2022.07,-3705.14"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge115" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M1601.09,-3509.93C1604.8,-3408.29 1628,-2912.02 1731,-2809.14 1740.96,-2799.19 2217.33,-2725.3 2230,-2719.14 2249.25,-2709.78 2247.27,-2697.51 2266,-2687.14 2276.98,-2681.06 2289.06,-2675.89 2301.26,-2671.52"/>
<polygon fill="black" stroke="black" points="2302.73,-2674.72 2311.06,-2668.18 2300.47,-2668.09 2302.73,-2674.72"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge116" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M1618.16,-3509.8C1641.72,-3486.42 1685.75,-3446.35 1731,-3424.14 1734.84,-3422.26 1738.82,-3420.5 1742.89,-3418.86"/>
<polygon fill="black" stroke="black" points="1744.4,-3422.03 1752.53,-3415.24 1741.93,-3415.48 1744.4,-3422.03"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge117" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M1695.18,-3545.56C1707.22,-3547.56 1719.39,-3549.47 1731,-3551.14 1824.04,-3564.5 1930.5,-3575.99 2006.67,-3583.56"/>
<polygon fill="black" stroke="black" points="2006.45,-3587.05 2016.75,-3584.55 2007.14,-3580.08 2006.45,-3587.05"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge118" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M1641.22,-3546.22C1666.6,-3556.87 1700.19,-3569.84 1731,-3578.14 1945.89,-3636.07 2007.9,-3634.43 2230,-3620.14 2248.29,-3618.96 2267.66,-3617.05 2286.42,-3614.84"/>
<polygon fill="black" stroke="black" points="2286.95,-3618.3 2296.46,-3613.63 2286.11,-3611.36 2286.95,-3618.3"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge119" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M1695.06,-3519.12C1708.75,-3517.81 1722.9,-3516.46 1736.78,-3515.14"/>
<polygon fill="black" stroke="black" points="1737.2,-3518.61 1746.82,-3514.18 1736.53,-3511.64 1737.2,-3518.61"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge120" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M1555.72,-3546.29C1548.98,-3555.68 1563.58,-3564.14 1599.5,-3564.14 1621.39,-3564.14 1635.36,-3561 1641.41,-3556.42"/>
<polygon fill="black" stroke="black" points="1644.91,-3556.76 1643.28,-3546.29 1638.02,-3555.49 1644.91,-3556.76"/>
</g>
<!-- tg_client._save_media -->
<g id="node98" class="node">
<title>tg_client._save_media</title>
<g id="a_node98"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="2196,-3503.14 2024,-3503.14 2024,-3467.14 2196,-3467.14 2196,-3503.14"/>
<text text-anchor="middle" x="2110" y="-3481.44" font-family="Times,serif" font-size="14.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge121" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M1695.29,-3531.39C1707.31,-3531.7 1719.44,-3531.96 1731,-3532.14 1830.1,-3533.66 1858.06,-3557 1954,-3532.14 1971.72,-3527.55 1972.9,-3518.68 1990,-3512.14 1997.75,-3509.18 2005.92,-3506.49 2014.19,-3504.06"/>
<polygon fill="black" stroke="black" points="2015.25,-3507.4 2023.93,-3501.33 2013.35,-3500.66 2015.25,-3507.4"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node99" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node99"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="3687,-2953.14 3463,-2953.14 3463,-2917.14 3687,-2917.14 3687,-2953.14"/>
<text text-anchor="middle" x="3575" y="-2931.44" font-family="Times,serif" font-size="14.00">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge122" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M1606.91,-3546.43C1621.85,-3586.16 1662.98,-3680.48 1731,-3726.14 1779.7,-3758.84 1932.22,-3767.02 1990,-3777.14 2299.94,-3831.41 2375.34,-3883.14 2690,-3883.14 2690,-3883.14 2690,-3883.14 2999,-3883.14 3234.14,-3883.14 3313.01,-3777.8 3427,-3572.14 3544.89,-3359.44 3568.42,-3056.55 3572.95,-2963.45"/>
<polygon fill="black" stroke="black" points="3576.45,-2963.54 3573.41,-2953.4 3569.46,-2963.23 3576.45,-2963.54"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge123" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2190.45,-3503.17C2227.46,-3511.55 2263.89,-3519.77 2266,-3520.14 2527.23,-3565.68 2595.86,-3560.65 2861,-3564.14 2982.77,-3565.74 3035.37,-3634.17 3135,-3564.14 3173.65,-3536.98 3151.64,-3507.23 3171,-3464.14 3205.66,-3387.02 3255.9,-3300.72 3281.56,-3258.04"/>
<polygon fill="black" stroke="black" points="3284.62,-3259.74 3286.8,-3249.37 3278.63,-3256.12 3284.62,-3259.74"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge124" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2196,-3484.61C2279.34,-3482.9 2409.71,-3477.06 2521,-3458.14 2537.37,-3455.36 2540.78,-3451.68 2557,-3448.14 2674.86,-3422.4 2708.2,-3435.32 2825,-3405.14 2841.47,-3400.89 2844.55,-3396.47 2861,-3392.14 2873.37,-3388.89 2886.49,-3386 2899.51,-3383.45"/>
<polygon fill="black" stroke="black" points="2900.27,-3386.87 2909.44,-3381.57 2898.97,-3379.99 2900.27,-3386.87"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge125" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M2196.1,-3492.94C2208.57,-3497.18 2220.41,-3503.32 2230,-3512.14 2269.09,-3548.13 2226.68,-3590.41 2266,-3626.14 2269.41,-3629.24 2273.09,-3632.02 2276.97,-3634.5"/>
<polygon fill="black" stroke="black" points="2275.33,-3637.6 2285.75,-3639.49 2278.78,-3631.51 2275.33,-3637.6"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge126" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M2196.12,-3491.61C2296.26,-3499.22 2462.97,-3511.89 2574.65,-3520.38"/>
<polygon fill="black" stroke="black" points="2574.71,-3523.89 2584.95,-3521.16 2575.24,-3516.91 2574.71,-3523.89"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node100" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node100"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="1452.5,-2726.14 1262.5,-2726.14 1262.5,-2690.14 1452.5,-2690.14 1452.5,-2726.14"/>
<text text-anchor="middle" x="1357.5" y="-2704.44" font-family="Times,serif" font-size="14.00">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge127" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M1363.85,-2726.42C1394.93,-2832.61 1552.21,-3369.97 1590.22,-3499.85"/>
<polygon fill="black" stroke="black" points="1586.97,-3501.21 1593.14,-3509.82 1593.69,-3499.24 1586.97,-3501.21"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node101" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node101"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="2816.5,-3233.14 2565.5,-3233.14 2565.5,-3197.14 2816.5,-3197.14 2816.5,-3233.14"/>
<text text-anchor="middle" x="2691" y="-3211.44" font-family="Times,serif" font-size="14.00">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge130" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2762.85,-3197.02C2786.71,-3187.21 2810.85,-3172.36 2825,-3150.14 2884.84,-3056.17 2789.54,-1230.61 2861,-1145.14 2874.93,-1128.48 2895.93,-1120.21 2917.29,-1116.48"/>
<polygon fill="black" stroke="black" points="2918.03,-1119.91 2927.44,-1115.04 2917.04,-1112.98 2918.03,-1119.91"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge128" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2816.83,-3218.44C2922.62,-3221.23 3073.36,-3225.21 3177.81,-3227.97"/>
<polygon fill="black" stroke="black" points="3178,-3231.47 3188.08,-3228.24 3178.18,-3224.48 3178,-3231.47"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge129" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M2763.08,-3197.14C2793.09,-3190.28 2828.55,-3183.16 2861,-3179.14 2969.1,-3165.75 3093.29,-3162.35 3181.58,-3161.94"/>
<polygon fill="black" stroke="black" points="3181.64,-3165.44 3191.62,-3161.9 3181.61,-3158.44 3181.64,-3165.44"/>
</g>
<!-- tg_client._download_messages -->
<g id="node102" class="node">
<title>tg_client._download_messages</title>
<g id="a_node102"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="1211,-2703.14 977,-2703.14 977,-2667.14 1211,-2667.14 1211,-2703.14"/>
<text text-anchor="middle" x="1094" y="-2681.44" font-family="Times,serif" font-size="14.00">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge131" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1211.22,-2695.36C1224.81,-2696.56 1238.61,-2697.77 1252.02,-2698.95"/>
<polygon fill="black" stroke="black" points="1251.93,-2702.46 1262.19,-2699.85 1252.54,-2695.48 1251.93,-2702.46"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node103" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node103"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="1205,-1983.14 983,-1983.14 983,-1947.14 1205,-1947.14 1205,-1983.14"/>
<text text-anchor="middle" x="1094" y="-1961.44" font-family="Times,serif" font-size="14.00">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node104" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node104"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="1199,-2267.14 989,-2267.14 989,-2231.14 1199,-2231.14 1199,-2267.14"/>
<text text-anchor="middle" x="1094" y="-2245.44" font-family="Times,serif" font-size="14.00">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge134" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1105.66,-2230.87C1129.07,-2189.77 1184.99,-2086.27 1211,-1992.14 1248.06,-1858.02 1202.69,-1813.04 1247,-1681.14 1344.92,-1389.62 1290.98,-1085.14 1598.5,-1085.14 1598.5,-1085.14 1598.5,-1085.14 2394.5,-1085.14 2582.12,-1085.14 2802.1,-1101.29 2917.34,-1111"/>
<polygon fill="black" stroke="black" points="2917.23,-1114.5 2927.49,-1111.86 2917.82,-1107.52 2917.23,-1114.5"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;serde_utils.load_json -->
<g id="edge132" class="edge">
<title>tg_client.refetch_messages&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1112.36,-2231.04C1138.85,-2204.51 1192.1,-2155.39 1247,-2129.14 1391.54,-2060.02 1438.28,-2049.14 1598.5,-2049.14 1598.5,-2049.14 1598.5,-2049.14 2692,-2049.14 2874.22,-2049.14 3087.27,-2049.14 3206.02,-2049.14"/>
<polygon fill="black" stroke="black" points="3206.16,-2052.64 3216.16,-2049.14 3206.16,-2045.64 3206.16,-2052.64"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;serde_utils.write_json -->
<g id="edge133" class="edge">
<title>tg_client.refetch_messages&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1104.3,-2230.91C1158.33,-2126.1 1435.11,-1605.14 1598.5,-1605.14 1598.5,-1605.14 1598.5,-1605.14 2394.5,-1605.14 2573.39,-1605.14 2782.15,-1607.37 2901.03,-1608.85"/>
<polygon fill="black" stroke="black" points="2901.15,-1612.36 2911.2,-1608.98 2901.24,-1605.36 2901.15,-1612.36"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge135" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1135.85,-2231.07C1220.41,-2195.35 1421.55,-2119.14 1598.5,-2119.14 1598.5,-2119.14 1598.5,-2119.14 1843.5,-2119.14 1994.16,-2119.14 2403.74,-2049.54 2521,-2144.14 2571.34,-2184.75 2510.59,-2240.09 2557,-2285.14 2644.58,-2370.16 2712.32,-2298.22 2825,-2345.14 2878.17,-2367.28 2933.13,-2405.63 2966.19,-2430.69"/>
<polygon fill="black" stroke="black" points="2964.45,-2433.77 2974.52,-2437.07 2968.71,-2428.21 2964.45,-2433.77"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge136" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M1199.1,-2258.3C1211.47,-2259.39 1224.16,-2260.5 1236.72,-2261.61"/>
<polygon fill="black" stroke="black" points="1236.48,-2265.1 1246.75,-2262.49 1237.1,-2258.13 1236.48,-2265.1"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge137" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1102.45,-2267.35C1122.79,-2316.36 1182.15,-2454.6 1247,-2561.14 1274.11,-2605.68 1311.36,-2653.41 1334.68,-2682.01"/>
<polygon fill="black" stroke="black" points="1332.1,-2684.39 1341.15,-2689.9 1337.51,-2679.95 1332.1,-2684.39"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge138" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M1101.33,-2267.34C1118.54,-2314.8 1170.1,-2444.48 1247,-2528.14 1263.73,-2546.34 1967.51,-3007.86 1990,-3018.14 2188.76,-3108.98 2438.76,-3167.04 2579.84,-3195.12"/>
<polygon fill="black" stroke="black" points="2579.32,-3198.59 2589.81,-3197.09 2580.68,-3191.72 2579.32,-3198.59"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node105" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node105"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="690,-2626.14 509,-2626.14 509,-2590.14 690,-2590.14 690,-2626.14"/>
<text text-anchor="middle" x="599.5" y="-2604.44" font-family="Times,serif" font-size="14.00">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge139" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M620.11,-2589.94C643.47,-2569.34 684.58,-2536.4 726,-2519.14 878.84,-2455.47 927.43,-2455.14 1093,-2455.14 1093,-2455.14 1093,-2455.14 2394.5,-2455.14 2572.88,-2455.14 2780.96,-2455.14 2900.02,-2455.14"/>
<polygon fill="black" stroke="black" points="2900.2,-2458.64 2910.2,-2455.14 2900.2,-2451.64 2900.2,-2458.64"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge140" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M610.46,-2589.95C665.86,-2489.9 938.99,-2011.14 1093,-2011.14 1093,-2011.14 1093,-2011.14 2111,-2011.14 2296.66,-2011.14 2376.8,-1974.19 2521,-2091.14 2552.86,-2116.98 2525.23,-2150.18 2557,-2176.14 2568.19,-2185.29 2581.66,-2191.6 2595.66,-2195.91"/>
<polygon fill="black" stroke="black" points="2594.85,-2199.32 2605.42,-2198.59 2596.7,-2192.57 2594.85,-2199.32"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge141" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M610.32,-2626.39C646.79,-2694.13 774.54,-2931.47 817.94,-3012.1"/>
<polygon fill="black" stroke="black" points="814.98,-3013.99 822.81,-3021.13 821.15,-3010.67 814.98,-3013.99"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge142" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M690.26,-2612.33C774.28,-2616.26 899.8,-2622.12 988.34,-2626.25"/>
<polygon fill="black" stroke="black" points="988.25,-2629.75 998.4,-2626.72 988.58,-2622.76 988.25,-2629.75"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge143" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M637.47,-2590.12C661.99,-2579 695.21,-2565.5 726,-2558.14 914.45,-2513.09 1142.36,-2503.06 1266,-2501.18"/>
<polygon fill="black" stroke="black" points="1266.23,-2504.67 1276.18,-2501.04 1266.13,-2497.67 1266.23,-2504.67"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge144" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M690.2,-2599.25C707.78,-2597.51 726.22,-2595.68 743.78,-2593.94"/>
<polygon fill="black" stroke="black" points="744.39,-2597.39 754,-2592.92 743.7,-2590.43 744.39,-2597.39"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge145" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M687.81,-2626.19C700.6,-2628.64 713.63,-2631.03 726,-2633.14 805.66,-2646.71 895.48,-2659.48 966.32,-2668.97"/>
<polygon fill="black" stroke="black" points="966.25,-2672.49 976.63,-2670.34 967.18,-2665.55 966.25,-2672.49"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node106" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node106"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="2789,-3287.14 2593,-3287.14 2593,-3251.14 2789,-3251.14 2789,-3287.14"/>
<text text-anchor="middle" x="2691" y="-3265.44" font-family="Times,serif" font-size="14.00">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge148" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2789.28,-3265.47C2803.04,-3260.75 2815.66,-3253.37 2825,-3242.14 2899.51,-3152.56 2786.3,-1234.56 2861,-1145.14 2874.92,-1128.48 2895.92,-1120.2 2917.28,-1116.48"/>
<polygon fill="black" stroke="black" points="2918.02,-1119.91 2927.43,-1115.03 2917.04,-1112.98 2918.02,-1119.91"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge146" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2789.03,-3263.06C2894.84,-3256.42 3064.28,-3245.8 3178.28,-3238.65"/>
<polygon fill="black" stroke="black" points="3178.69,-3242.13 3188.45,-3238.01 3178.25,-3235.14 3178.69,-3242.13"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge147" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M2789.4,-3251.79C2812.84,-3247.63 2837.81,-3243.22 2861,-3239.14 2970.55,-3219.89 3095.58,-3198.17 3183.76,-3182.9"/>
<polygon fill="black" stroke="black" points="3184.54,-3186.31 3193.79,-3181.16 3183.34,-3179.42 3184.54,-3186.31"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge149" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2789.3,-3265.1C2802.97,-3260.4 2815.55,-3253.13 2825,-3242.14 2877.51,-3181.07 2815.97,-2584.92 2861,-2518.14 2873.43,-2499.71 2892.7,-2486.57 2912.87,-2477.23"/>
<polygon fill="black" stroke="black" points="2914.39,-2480.39 2922.18,-2473.21 2911.61,-2473.97 2914.39,-2480.39"/>
</g>
<!-- tg_client.main -->
<g id="node107" class="node">
<title>tg_client.main</title>
<polygon fill="none" stroke="black" points="402.5,-2676.14 284.5,-2676.14 284.5,-2640.14 402.5,-2640.14 402.5,-2676.14"/>
<text text-anchor="middle" x="343.5" y="-2654.44" font-family="Times,serif" font-size="14.00">tg_client.main</text>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge150" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M344.37,-2676.16C344.34,-2813.99 362.55,-3696.14 832.5,-3696.14 832.5,-3696.14 832.5,-3696.14 1358.5,-3696.14 1436.71,-3696.14 1648.74,-3748.45 1764.14,-3778.51"/>
<polygon fill="black" stroke="black" points="1763.42,-3781.94 1773.98,-3781.08 1765.19,-3775.17 1763.42,-3781.94"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge151" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M351.41,-2639.8C369.8,-2593.4 424.39,-2470.26 509,-2403.14 513.28,-2399.74 517.95,-2396.69 522.85,-2393.95"/>
<polygon fill="black" stroke="black" points="524.54,-2397.01 531.85,-2389.34 521.35,-2390.78 524.54,-2397.01"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge152" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M344.53,-2676.33C345.11,-2803.43 355.07,-3557.87 509,-3710.14 562.26,-3762.83 646.61,-3773.68 715.83,-3771.82"/>
<polygon fill="black" stroke="black" points="716.06,-3775.32 725.92,-3771.46 715.81,-3768.32 716.06,-3775.32"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge153" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M402.82,-2664.79C514.21,-2677.13 765.04,-2703.11 977,-2712.14 1080.91,-2716.57 1107.01,-2713.57 1211,-2712.14 1224.32,-2711.96 1238.32,-2711.68 1252.16,-2711.36"/>
<polygon fill="black" stroke="black" points="1252.28,-2714.85 1262.19,-2711.11 1252.11,-2707.86 1252.28,-2714.85"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge154" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M348.33,-2640.08C368.37,-2550.7 470.06,-2153.87 726,-1997.14 799.21,-1952.31 896.54,-1945.69 972.57,-1949.54"/>
<polygon fill="black" stroke="black" points="972.49,-1953.04 982.68,-1950.12 972.9,-1946.06 972.49,-1953.04"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge155" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M375.45,-2640.05C440.14,-2602.34 594.57,-2512.87 726,-2441.14 841.38,-2378.17 979.1,-2307.24 1048.43,-2271.82"/>
<polygon fill="black" stroke="black" points="1050.04,-2274.93 1057.35,-2267.26 1046.85,-2268.69 1050.04,-2274.93"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge156" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M402.77,-2646.67C431.18,-2641.08 466.15,-2634.2 498.63,-2627.8"/>
<polygon fill="black" stroke="black" points="499.49,-2631.2 508.62,-2625.83 498.13,-2624.33 499.49,-2631.2"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge157" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M347.8,-2676.22C368.75,-2784.93 493.53,-3347.14 832.5,-3347.14 832.5,-3347.14 832.5,-3347.14 2111,-3347.14 2284.28,-3347.14 2484.15,-3312.4 2597.94,-3289.29"/>
<polygon fill="black" stroke="black" points="2598.91,-3292.67 2608.01,-3287.23 2597.51,-3285.81 2598.91,-3292.67"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node108" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node108"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="2780.5,-3141.14 2601.5,-3141.14 2601.5,-3105.14 2780.5,-3105.14 2780.5,-3141.14"/>
<text text-anchor="middle" x="2691" y="-3119.44" font-family="Times,serif" font-size="14.00">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node109" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node109"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="3135,-3333.14 2861,-3333.14 2861,-3297.14 3135,-3297.14 3135,-3333.14"/>
<text text-anchor="middle" x="2998" y="-3311.44" font-family="Times,serif" font-size="14.00">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node110" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node110"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="2806,-2833.14 2576,-2833.14 2576,-2797.14 2806,-2797.14 2806,-2833.14"/>
<text text-anchor="middle" x="2691" y="-2811.44" font-family="Times,serif" font-size="14.00">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;serde_utils.load_json -->
<g id="edge158" class="edge">
<title>debug_dump.load_source_info&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2806.08,-2802.02C2813,-2798.28 2819.41,-2793.71 2825,-2788.14 2880.67,-2732.74 2804.11,-2669.28 2861,-2615.14 2950.29,-2530.16 3045.3,-2656.69 3135,-2572.14 3189.62,-2520.66 3150.41,-2479.32 3171,-2407.14 3206.74,-2281.85 3262.96,-2136.72 3286.76,-2077"/>
<polygon fill="black" stroke="black" points="3290.09,-2078.09 3290.55,-2067.51 3283.59,-2075.49 3290.09,-2078.09"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge159" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M2806.1,-2799.99C2812.84,-2796.7 2819.21,-2792.79 2825,-2788.14 2855.72,-2763.48 2830.66,-2732.27 2861,-2707.14 2875.33,-2695.27 2893.28,-2687.64 2911.4,-2682.78"/>
<polygon fill="black" stroke="black" points="2912.27,-2686.17 2921.17,-2680.41 2910.62,-2679.36 2912.27,-2686.17"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node111" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node111"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="3400,-3033.14 3198,-3033.14 3198,-2997.14 3400,-2997.14 3400,-3033.14"/>
<text text-anchor="middle" x="3299" y="-3011.44" font-family="Times,serif" font-size="14.00">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text -->
<g id="edge160" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3369.69,-2997.05C3390.13,-2989.04 3411.21,-2977.77 3427,-2962.14 3474.4,-2915.24 3540.9,-2721.74 3564.91,-2648.45"/>
<polygon fill="black" stroke="black" points="3568.36,-2649.13 3568.13,-2638.54 3561.71,-2646.97 3568.36,-2649.13"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node112" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node112"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="2788.5,-2941.14 2593.5,-2941.14 2593.5,-2905.14 2788.5,-2905.14 2788.5,-2941.14"/>
<text text-anchor="middle" x="2691" y="-2919.44" font-family="Times,serif" font-size="14.00">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge166" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M2788.54,-2919.64C2802.57,-2914.93 2815.46,-2907.52 2825,-2896.14 2929.17,-2771.86 2756.57,-1561.2 2861,-1437.14 2870.11,-1426.32 2882.19,-1419.05 2895.42,-1414.26"/>
<polygon fill="black" stroke="black" points="2896.72,-1417.52 2905.22,-1411.2 2894.63,-1410.84 2896.72,-1417.52"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.read_text -->
<g id="edge161" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2788.6,-2929.56C2937.45,-2934.78 3226.62,-2925.95 3427,-2800.14 3489,-2761.21 3536.96,-2687.04 3559.64,-2647.14"/>
<polygon fill="black" stroke="black" points="3562.79,-2648.68 3564.6,-2638.24 3556.67,-2645.27 3562.79,-2648.68"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.load_json -->
<g id="edge162" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2788.68,-2916.28C2802.01,-2911.86 2814.65,-2905.43 2825,-2896.14 2864.23,-2860.94 2823.34,-2820.02 2861,-2783.14 2951.73,-2694.29 3052.96,-2799.07 3135,-2702.14 3177.67,-2651.73 3155.87,-2471.43 3171,-2407.14 3200.85,-2280.31 3260.27,-2136.02 3285.84,-2076.76"/>
<polygon fill="black" stroke="black" points="3289.15,-2077.91 3289.92,-2067.34 3282.73,-2075.12 3289.15,-2077.91"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge163" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M2788.63,-2917.18C2802.13,-2912.67 2814.84,-2905.97 2825,-2896.14 2874.6,-2848.19 2818.44,-2799.44 2861,-2745.14 2877.92,-2723.55 2903.33,-2707.99 2927.62,-2697.1"/>
<polygon fill="black" stroke="black" points="2929.04,-2700.3 2936.86,-2693.15 2926.29,-2693.86 2929.04,-2700.3"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge164" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2788.71,-2915.34C2889.34,-2912.9 3044.59,-2926.04 3135,-3017.14 3190.32,-3072.89 3118.52,-3131.72 3171,-3190.14 3177.49,-3197.37 3185.27,-3203.33 3193.73,-3208.24"/>
<polygon fill="black" stroke="black" points="3192.29,-3211.44 3202.77,-3212.99 3195.54,-3205.24 3192.29,-3211.44"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge165" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2788.57,-2927.42C2802.42,-2932.07 2815.25,-2939.27 2825,-2950.14 2883.4,-3015.27 2802.46,-3277.14 2861,-3342.14 2871.31,-3353.59 2884.96,-3361 2899.64,-3365.67"/>
<polygon fill="black" stroke="black" points="2898.84,-3369.08 2909.41,-3368.37 2900.7,-3362.34 2898.84,-3369.08"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge167" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2788.54,-2918.83C2802.39,-2914.18 2815.23,-2907 2825,-2896.14 2881.44,-2833.42 2812.25,-2587.01 2861,-2518.14 2874.04,-2499.72 2893.85,-2486.55 2914.35,-2477.19"/>
<polygon fill="black" stroke="black" points="2915.97,-2480.3 2923.79,-2473.15 2913.22,-2473.87 2915.97,-2480.3"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node113" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node113"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="2787.5,-2995.14 2594.5,-2995.14 2594.5,-2959.14 2787.5,-2959.14 2787.5,-2995.14"/>
<text text-anchor="middle" x="2691" y="-2973.44" font-family="Times,serif" font-size="14.00">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;serde_utils.load_json -->
<g id="edge168" class="edge">
<title>debug_dump.delete_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2787.71,-2971.14C2801.49,-2966.67 2814.53,-2959.98 2825,-2950.14 2869.94,-2907.91 2816.31,-2858.64 2861,-2816.14 2951.27,-2730.3 3051.87,-2849.92 3135,-2757.14 3187.18,-2698.91 3153.81,-2483.42 3171,-2407.14 3199.65,-2280.04 3259.72,-2135.89 3285.65,-2076.71"/>
<polygon fill="black" stroke="black" points="3288.96,-2077.88 3289.79,-2067.32 3282.56,-2075.05 3288.96,-2077.88"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge169" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M2787.81,-2971.7C2801.66,-2967.18 2814.69,-2960.33 2825,-2950.14 2879.01,-2896.78 2820.93,-2847.63 2861,-2783.14 2883.67,-2746.66 2923.21,-2717.34 2953.84,-2698.51"/>
<polygon fill="black" stroke="black" points="2955.85,-2701.39 2962.62,-2693.24 2952.25,-2695.38 2955.85,-2701.39"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge170" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2787.75,-2993.06C2800.44,-2996.18 2813.15,-2999.86 2825,-3004.14 2989.2,-3063.48 3010.38,-3121.71 3171,-3190.14 3188.09,-3197.42 3206.92,-3204.16 3224.74,-3209.99"/>
<polygon fill="black" stroke="black" points="3223.92,-3213.4 3234.51,-3213.13 3226.06,-3206.74 3223.92,-3213.4"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge171" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M2787.55,-2986.48C2879.12,-2997.65 3019.98,-3020.7 3135,-3065.14 3183.42,-3083.85 3233.85,-3116.54 3265.55,-3138.99"/>
<polygon fill="black" stroke="black" points="3263.81,-3142.04 3273.98,-3145.02 3267.89,-3136.35 3263.81,-3142.04"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge172" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2787.65,-2973.27C2801.87,-2968.62 2815.06,-2961.32 2825,-2950.14 2889.01,-2878.15 2805.81,-2597.1 2861,-2518.14 2873.86,-2499.74 2893.51,-2486.58 2913.9,-2477.23"/>
<polygon fill="black" stroke="black" points="2915.49,-2480.36 2923.3,-2473.2 2912.73,-2473.92 2915.49,-2480.36"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node114" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node114"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="3417,-2953.14 3181,-2953.14 3181,-2917.14 3417,-2917.14 3417,-2953.14"/>
<text text-anchor="middle" x="3299" y="-2931.44" font-family="Times,serif" font-size="14.00">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge173" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3417.39,-2935.14C3429.08,-2935.14 3440.95,-2935.14 3452.68,-2935.14"/>
<polygon fill="black" stroke="black" points="3452.93,-2938.64 3462.93,-2935.14 3452.93,-2931.64 3452.93,-2938.64"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node115" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node115"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="3395.5,-2739.14 3202.5,-2739.14 3202.5,-2703.14 3395.5,-2703.14 3395.5,-2739.14"/>
<text text-anchor="middle" x="3299" y="-2717.44" font-family="Times,serif" font-size="14.00">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node116" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node116"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="2825,-2887.14 2557,-2887.14 2557,-2851.14 2825,-2851.14 2825,-2887.14"/>
<text text-anchor="middle" x="2691" y="-2865.44" font-family="Times,serif" font-size="14.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge176" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2816.07,-2850.96C2819.29,-2848.33 2822.28,-2845.4 2825,-2842.14 2885.45,-2769.77 2800.39,-1217.39 2861,-1145.14 2874.96,-1128.5 2895.97,-1120.24 2917.32,-1116.51"/>
<polygon fill="black" stroke="black" points="2918.06,-1119.94 2927.47,-1115.07 2917.08,-1113.01 2918.06,-1119.94"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;serde_utils.load_json -->
<g id="edge174" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M2814.55,-2850.98C2818.28,-2848.35 2821.78,-2845.42 2825,-2842.14 2886.49,-2779.61 2797.81,-2708.94 2861,-2648.14 2949.68,-2562.81 3046.58,-2693.75 3135,-2608.14 3200.2,-2545.01 3147.75,-2494.87 3171,-2407.14 3204.38,-2281.2 3261.88,-2136.42 3286.39,-2076.89"/>
<polygon fill="black" stroke="black" points="3289.71,-2078.02 3290.3,-2067.44 3283.24,-2075.34 3289.71,-2078.02"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge175" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M2813.65,-2851.04C2817.68,-2848.41 2821.48,-2845.45 2825,-2842.14 2870.21,-2799.58 2816.45,-2750.4 2861,-2707.14 2874.78,-2693.76 2893.05,-2685.6 2911.72,-2680.7"/>
<polygon fill="black" stroke="black" points="2912.54,-2684.1 2921.49,-2678.43 2910.96,-2677.28 2912.54,-2684.1"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge177" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2815.14,-2851.06C2818.67,-2848.41 2821.98,-2845.45 2825,-2842.14 2922.76,-2735.2 2776.37,-2635.74 2861,-2518.14 2874.31,-2499.65 2894.42,-2486.44 2915.12,-2477.06"/>
<polygon fill="black" stroke="black" points="2916.5,-2480.28 2924.33,-2473.14 2913.76,-2473.84 2916.5,-2480.28"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge178" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M2825.36,-2883.67C2928.23,-2894.87 3069.57,-2910.26 3170.84,-2921.29"/>
<polygon fill="black" stroke="black" points="3170.5,-2924.78 3180.82,-2922.38 3171.26,-2917.82 3170.5,-2924.78"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge179" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M2800.64,-2851.13C2809.02,-2848.53 2817.23,-2845.54 2825,-2842.14 2843.08,-2834.22 2842.98,-2824.19 2861,-2816.14 2968.29,-2768.26 3101.44,-2743.79 3192.38,-2731.78"/>
<polygon fill="black" stroke="black" points="3192.96,-2735.24 3202.43,-2730.49 3192.06,-2728.3 3192.96,-2735.24"/>
</g>
<!-- debug_dump.main -->
<g id="node117" class="node">
<title>debug_dump.main</title>
<polygon fill="none" stroke="black" points="2467.5,-2968.14 2319.5,-2968.14 2319.5,-2932.14 2467.5,-2932.14 2467.5,-2968.14"/>
<text text-anchor="middle" x="2393.5" y="-2946.44" font-family="Times,serif" font-size="14.00">debug_dump.main</text>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge180" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M2410.02,-2968.38C2436.82,-2998.67 2494.9,-3059.17 2557,-3091.14 2567.83,-3096.72 2579.66,-3101.34 2591.65,-3105.17"/>
<polygon fill="black" stroke="black" points="2590.7,-3108.54 2601.29,-3108.08 2592.73,-3101.84 2590.7,-3108.54"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge181" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M2396.59,-2968.25C2404.5,-3027.65 2438.51,-3217.25 2557,-3296.14 2603.71,-3327.24 2741.52,-3328.92 2850.6,-3324.7"/>
<polygon fill="black" stroke="black" points="2850.88,-3328.19 2860.73,-3324.29 2850.6,-3321.2 2850.88,-3328.19"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge182" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M2416.06,-2931.79C2445.78,-2907.47 2501.94,-2865 2557,-2842.14 2562.1,-2840.02 2567.38,-2838.07 2572.77,-2836.26"/>
<polygon fill="black" stroke="black" points="2574.08,-2839.52 2582.56,-2833.17 2571.97,-2832.84 2574.08,-2839.52"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge183" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M2413.53,-2968.38C2442.01,-2994.28 2498.63,-3040.51 2557,-3058.14 2792.88,-3129.38 3089.8,-3070.21 3224.97,-3035.7"/>
<polygon fill="black" stroke="black" points="3226.01,-3039.04 3234.81,-3033.15 3224.25,-3032.27 3226.01,-3039.04"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge184" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M2467.54,-2943.47C2502.37,-2940.28 2544.72,-2936.42 2583.08,-2932.91"/>
<polygon fill="black" stroke="black" points="2583.62,-2936.38 2593.26,-2931.98 2582.98,-2929.41 2583.62,-2936.38"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge185" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M2467.54,-2956.82C2502.69,-2960.03 2545.48,-2963.94 2584.12,-2967.47"/>
<polygon fill="black" stroke="black" points="2584.09,-2970.98 2594.37,-2968.4 2584.73,-2964.01 2584.09,-2970.98"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge186" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M2443.82,-2932.03C2475.79,-2920.72 2518.51,-2906.4 2557,-2896.14 2565.78,-2893.8 2574.93,-2891.55 2584.14,-2889.42"/>
<polygon fill="black" stroke="black" points="2585.16,-2892.78 2594.14,-2887.16 2583.62,-2885.95 2585.16,-2892.78"/>
</g>
<!-- chop.process_message -->
<g id="node121" class="node">
<title>chop.process_message</title>
<polygon fill="none" stroke="black" points="2483,-1815.14 2304,-1815.14 2304,-1779.14 2483,-1779.14 2483,-1815.14"/>
<text text-anchor="middle" x="2393.5" y="-1793.44" font-family="Times,serif" font-size="14.00">chop.process_message</text>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge194" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M2474.38,-1815.15C2584.52,-1837.87 2775.13,-1868.91 2825,-1824.14 2880.39,-1774.42 2810.74,-1546.04 2861,-1491.14 2866.54,-1485.09 2873.02,-1480.17 2880.09,-1476.18"/>
<polygon fill="black" stroke="black" points="2881.91,-1479.19 2889.33,-1471.63 2878.81,-1472.91 2881.91,-1479.19"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge198" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M2422.87,-1779.05C2452.58,-1758.45 2498.03,-1721.93 2521,-1678.14 2570.69,-1583.4 2478.31,-1512.62 2557,-1440.14 2655.41,-1349.49 2824.49,-1368.62 2921.9,-1389.89"/>
<polygon fill="black" stroke="black" points="2921.16,-1393.31 2931.68,-1392.09 2922.69,-1386.48 2921.16,-1393.31"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge199" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2424.04,-1778.98C2454.28,-1758.59 2499.75,-1722.46 2521,-1678.14 2565.32,-1585.68 2487.49,-1293.52 2557,-1218.14 2638.78,-1129.46 2715.19,-1225.09 2825,-1175.14 2843.96,-1166.52 2842.2,-1154.11 2861,-1145.14 2878.48,-1136.8 2898.41,-1131.03 2917.52,-1127.05"/>
<polygon fill="black" stroke="black" points="2918.28,-1130.46 2927.42,-1125.12 2916.94,-1123.59 2918.28,-1130.46"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge195" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M2483.16,-1797.14C2525.94,-1797.14 2576.64,-1797.14 2617.14,-1797.14"/>
<polygon fill="black" stroke="black" points="2617.2,-1800.64 2627.2,-1797.14 2617.2,-1793.64 2617.2,-1800.64"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge196" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M2408.38,-1815.18C2434.2,-1847.57 2492.87,-1915.77 2557,-1954.14 2667.75,-2020.4 2813.08,-2059.07 2905.79,-2078.65"/>
<polygon fill="black" stroke="black" points="2905.2,-2082.11 2915.7,-2080.72 2906.63,-2075.25 2905.2,-2082.11"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge197" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2403.51,-1815.35C2428.02,-1865.96 2495.76,-2013.18 2521,-2144.14 2533.12,-2207.02 2514.84,-3247.95 2557,-3296.14 2600.68,-3346.06 2782.97,-3361.86 2898.78,-3366.85"/>
<polygon fill="black" stroke="black" points="2898.94,-3370.36 2909.07,-3367.27 2899.23,-3363.37 2898.94,-3370.36"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge202" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2424.31,-1779.11C2454.77,-1758.82 2500.44,-1722.78 2521,-1678.14 2556.28,-1601.56 2497.72,-980.11 2557,-920.14 2578.13,-898.77 2738.99,-893.84 2860.15,-893.21"/>
<polygon fill="black" stroke="black" points="2860.29,-896.71 2870.27,-893.17 2860.26,-889.71 2860.29,-896.71"/>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge200" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M2430.6,-1779.04C2463.51,-1762.58 2513.47,-1737.63 2557,-1716.14 2585.74,-1701.96 2618.03,-1686.17 2643.6,-1673.71"/>
<polygon fill="black" stroke="black" points="2645.24,-1676.8 2652.7,-1669.28 2642.18,-1670.51 2645.24,-1676.8"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node122" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node122"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="3105.5,-1899.14 2890.5,-1899.14 2890.5,-1863.14 3105.5,-1863.14 3105.5,-1899.14"/>
<text text-anchor="middle" x="2998" y="-1877.44" font-family="Times,serif" font-size="14.00">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge201" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M2433.26,-1815.21C2465.59,-1829.35 2513.27,-1848.09 2557,-1857.14 2664.84,-1879.46 2790.53,-1884.27 2879.89,-1884.2"/>
<polygon fill="black" stroke="black" points="2880.07,-1887.7 2890.06,-1884.17 2880.05,-1880.7 2880.07,-1887.7"/>
</g>
<!-- chop.main -->
<g id="node123" class="node">
<title>chop.main</title>
<g id="a_node123"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="2155,-1815.14 2065,-1815.14 2065,-1779.14 2155,-1779.14 2155,-1815.14"/>
<text text-anchor="middle" x="2110" y="-1793.44" font-family="Times,serif" font-size="14.00">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge203" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M2155.29,-1797.14C2192.29,-1797.14 2246.43,-1797.14 2293.64,-1797.14"/>
<polygon fill="black" stroke="black" points="2293.91,-1800.64 2303.91,-1797.14 2293.91,-1793.64 2293.91,-1800.64"/>
</g>
<!-- clean_data._parse_date -->
<g id="node124" class="node">
<title>clean_data._parse_date</title>
<g id="a_node124"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="3089,-2861.14 2907,-2861.14 2907,-2825.14 3089,-2825.14 3089,-2861.14"/>
<text text-anchor="middle" x="2998" y="-2839.44" font-family="Times,serif" font-size="14.00">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;serde_utils.read_text -->
<g id="edge204" class="edge">
<title>clean_data._parse_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3089.4,-2836.14C3179.15,-2826.26 3318.62,-2802.84 3427,-2748.14 3477.81,-2722.5 3525.31,-2675.3 3551.91,-2645.94"/>
<polygon fill="black" stroke="black" points="3554.8,-2647.96 3558.85,-2638.16 3549.58,-2643.3 3554.8,-2647.96"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node125" class="node">
<title>clean_data._clean_raw</title>
<polygon fill="none" stroke="black" points="2778.5,-2779.14 2603.5,-2779.14 2603.5,-2743.14 2778.5,-2743.14 2778.5,-2779.14"/>
<text text-anchor="middle" x="2691" y="-2757.44" font-family="Times,serif" font-size="14.00">clean_data._clean_raw</text>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge205" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2756.94,-2743.11C2781.71,-2733.11 2808.03,-2718.1 2825,-2696.14 2874.35,-2632.27 2810.99,-2581.49 2861,-2518.14 2875.47,-2499.82 2896.5,-2486.6 2917.72,-2477.16"/>
<polygon fill="black" stroke="black" points="2919.26,-2480.31 2927.13,-2473.21 2916.55,-2473.85 2919.26,-2480.31"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge206" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M2778.53,-2777.28C2794.07,-2780.58 2810.07,-2784.25 2825,-2788.14 2862.12,-2797.81 2903.04,-2810.8 2935.66,-2821.73"/>
<polygon fill="black" stroke="black" points="2934.9,-2825.17 2945.5,-2825.05 2937.14,-2818.54 2934.9,-2825.17"/>
</g>
<!-- clean_data._clean_media -->
<g id="node126" class="node">
<title>clean_data._clean_media</title>
<polygon fill="none" stroke="black" points="2786.5,-3049.14 2595.5,-3049.14 2595.5,-3013.14 2786.5,-3013.14 2786.5,-3049.14"/>
<text text-anchor="middle" x="2691" y="-3027.44" font-family="Times,serif" font-size="14.00">clean_data._clean_media</text>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge207" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2758.93,-3049.28C2783.37,-3059.22 2808.93,-3074.14 2825,-3096.14 2890.17,-3185.38 2784.87,-3262.05 2861,-3342.14 2871.48,-3353.16 2885.06,-3360.39 2899.58,-3365.02"/>
<polygon fill="black" stroke="black" points="2898.67,-3368.4 2909.24,-3367.7 2900.54,-3361.65 2898.67,-3368.4"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge208" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M2786.52,-3018.72C2799.85,-3015.05 2813.07,-3010.3 2825,-3004.14 2889.78,-2970.72 2947.72,-2905.81 2976.95,-2869.44"/>
<polygon fill="black" stroke="black" points="2979.95,-2871.29 2983.42,-2861.28 2974.47,-2866.95 2979.95,-2871.29"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node127" class="node">
<title>clean_data._clean_lots</title>
<polygon fill="none" stroke="black" points="2778,-2167.14 2604,-2167.14 2604,-2131.14 2778,-2131.14 2778,-2167.14"/>
<text text-anchor="middle" x="2691" y="-2145.44" font-family="Times,serif" font-size="14.00">clean_data._clean_lots</text>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge209" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M2778.18,-2133.88C2818.05,-2126.82 2865.43,-2118.44 2905.89,-2111.27"/>
<polygon fill="black" stroke="black" points="2906.51,-2114.72 2915.75,-2109.53 2905.29,-2107.82 2906.51,-2114.72"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge210" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2778.26,-2148.47C2796.14,-2144.15 2813.12,-2136.17 2825,-2122.14 2899.08,-2034.67 2787.35,-1178.97 2861,-1091.14 2876.68,-1072.45 2901.17,-1063.99 2925.08,-1060.61"/>
<polygon fill="black" stroke="black" points="2925.72,-1064.06 2935.26,-1059.45 2924.93,-1057.1 2925.72,-1064.06"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge211" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2778.14,-2155.98C2794.71,-2160.14 2811.19,-2166.5 2825,-2176.14 2831.01,-2180.34 2938.97,-2358.85 2980.71,-2428.09"/>
<polygon fill="black" stroke="black" points="2977.76,-2429.97 2985.92,-2436.73 2983.76,-2426.36 2977.76,-2429.97"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node128" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node128"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="2808.5,-2687.14 2573.5,-2687.14 2573.5,-2651.14 2808.5,-2651.14 2808.5,-2687.14"/>
<text text-anchor="middle" x="2691" y="-2665.44" font-family="Times,serif" font-size="14.00">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node129" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node129"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="3119.5,-2563.14 2876.5,-2563.14 2876.5,-2527.14 3119.5,-2527.14 3119.5,-2563.14"/>
<text text-anchor="middle" x="2998" y="-2541.44" font-family="Times,serif" font-size="14.00">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node130" class="node">
<title>clean_data.main</title>
<polygon fill="none" stroke="black" points="2459.5,-2774.14 2327.5,-2774.14 2327.5,-2738.14 2459.5,-2738.14 2459.5,-2774.14"/>
<text text-anchor="middle" x="2393.5" y="-2752.44" font-family="Times,serif" font-size="14.00">clean_data.main</text>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge212" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M2459.71,-2757.24C2498.9,-2757.91 2549.49,-2758.76 2593.26,-2759.5"/>
<polygon fill="black" stroke="black" points="2593.3,-2763.01 2603.36,-2759.68 2593.42,-2756.01 2593.3,-2763.01"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge213" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M2410.4,-2774.18C2435.96,-2803.79 2486.8,-2865.2 2521,-2923.14 2541.03,-2957.07 2526.28,-2979.48 2557,-3004.14 2565.51,-3010.97 2575.3,-3016.22 2585.62,-3020.22"/>
<polygon fill="black" stroke="black" points="2584.63,-3023.59 2595.22,-3023.57 2586.93,-3016.97 2584.63,-3023.59"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge214" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M2444.6,-2738.08C2472.03,-2725.44 2503.83,-2705.64 2521,-2677.14 2578.59,-2581.53 2483.31,-2259.98 2557,-2176.14 2566.8,-2165 2579.82,-2157.7 2593.89,-2153.04"/>
<polygon fill="black" stroke="black" points="2595.12,-2156.33 2603.77,-2150.21 2593.19,-2149.6 2595.12,-2156.33"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge215" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M2452.67,-2738.06C2474.23,-2731.16 2498.82,-2723.04 2521,-2715.14 2537.17,-2709.38 2540.62,-2706.27 2557,-2701.14 2569.95,-2697.09 2583.74,-2693.25 2597.36,-2689.73"/>
<polygon fill="black" stroke="black" points="2598.39,-2693.08 2607.23,-2687.23 2596.67,-2686.29 2598.39,-2693.08"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge216" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M2459.57,-2747.3C2579.46,-2730.97 2823.27,-2697.62 2825,-2696.14 2866.98,-2660.22 2820.72,-2614.97 2861,-2577.14 2864.37,-2573.97 2868,-2571.1 2871.82,-2568.49"/>
<polygon fill="black" stroke="black" points="2873.77,-2571.41 2880.48,-2563.21 2870.12,-2565.43 2873.77,-2571.41"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node131" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node131"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="3685.5,-912.14 3464.5,-912.14 3464.5,-876.14 3685.5,-876.14 3685.5,-912.14"/>
<text text-anchor="middle" x="3575" y="-890.44" font-family="Times,serif" font-size="14.00">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge218" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3417.99,-912.23C3421.25,-914.88 3424.27,-917.84 3427,-921.14 3488.76,-995.82 3443.24,-2570.27 3463,-2665.14 3482.43,-2758.44 3533.21,-2860.36 3558.8,-2907.89"/>
<polygon fill="black" stroke="black" points="3555.85,-2909.81 3563.71,-2916.92 3562,-2906.46 3555.85,-2909.81"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge217" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M3427.37,-894.14C3436.21,-894.14 3445.11,-894.14 3453.91,-894.14"/>
<polygon fill="black" stroke="black" points="3454.18,-897.64 3464.18,-894.14 3454.18,-890.64 3454.18,-897.64"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node134" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node134"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="2801,-1019.14 2581,-1019.14 2581,-983.14 2801,-983.14 2801,-1019.14"/>
<text text-anchor="middle" x="2691" y="-997.44" font-family="Times,serif" font-size="14.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge222" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2726.38,-1019.35C2773.74,-1044.38 2854.02,-1086.63 2861,-1089.14 2878.81,-1095.54 2898.47,-1100.75 2917.18,-1104.88"/>
<polygon fill="black" stroke="black" points="2916.64,-1108.35 2927.15,-1107.01 2918.1,-1101.5 2916.64,-1108.35"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge221" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2782.27,-1019.2C2827.97,-1028.34 2882.66,-1039.27 2925.41,-1047.82"/>
<polygon fill="black" stroke="black" points="2924.96,-1051.3 2935.46,-1049.83 2926.34,-1044.44 2924.96,-1051.3"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge223" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2707.7,-1019.27C2737.21,-1054.64 2800.22,-1136.54 2825,-1218.14 2883.42,-1410.51 2818.35,-1925.67 2861,-2122.14 2886.92,-2241.56 2952.68,-2372.98 2982.22,-2428.28"/>
<polygon fill="black" stroke="black" points="2979.15,-2429.95 2986.97,-2437.1 2985.31,-2426.63 2979.15,-2429.95"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge224" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2801.2,-986.41C2809.59,-983.08 2817.64,-979.04 2825,-974.14 2848.71,-958.36 2837.26,-936.87 2861,-921.14 2863.32,-919.61 2865.71,-918.15 2868.15,-916.78"/>
<polygon fill="black" stroke="black" points="2869.91,-919.81 2877.23,-912.15 2866.73,-913.58 2869.91,-919.81"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge225" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M2801.25,-1001.5C2827.4,-1001.59 2855.39,-1001.68 2881.8,-1001.76"/>
<polygon fill="black" stroke="black" points="2881.82,-1005.26 2891.83,-1001.8 2881.84,-998.26 2881.82,-1005.26"/>
</g>
<!-- scan_ontology._is_misparsed -->
<g id="node135" class="node">
<title>scan_ontology._is_misparsed</title>
<g id="a_node135"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="2800.5,-635.14 2581.5,-635.14 2581.5,-599.14 2800.5,-599.14 2800.5,-635.14"/>
<text text-anchor="middle" x="2691" y="-613.44" font-family="Times,serif" font-size="14.00">scan_ontology._is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge226" class="edge">
<title>scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M2800.82,-610.36C2841.32,-607.84 2886.31,-605.04 2922.98,-602.75"/>
<polygon fill="black" stroke="black" points="2923.33,-606.24 2933.09,-602.12 2922.89,-599.25 2923.33,-606.24"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node136" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node136"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="2510.5,-1168.14 2276.5,-1168.14 2276.5,-1132.14 2510.5,-1132.14 2510.5,-1168.14"/>
<text text-anchor="middle" x="2393.5" y="-1146.44" font-family="Times,serif" font-size="14.00">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge227" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M2412.7,-1168.24C2441.01,-1195.27 2498.43,-1245.84 2557,-1272.14 2561.47,-1274.15 2566.08,-1276.01 2570.8,-1277.73"/>
<polygon fill="black" stroke="black" points="2570,-1281.15 2580.6,-1281.07 2572.26,-1274.53 2570,-1281.15"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge229" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2510.67,-1143.97C2630.13,-1137.63 2813,-1127.91 2917.13,-1122.38"/>
<polygon fill="black" stroke="black" points="2917.46,-1125.87 2927.26,-1121.85 2917.09,-1118.88 2917.46,-1125.87"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge228" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M2505.47,-1132.1C2522.71,-1129.38 2540.33,-1126.65 2557,-1124.14 2686.7,-1104.63 2838.2,-1083.69 2925.33,-1071.82"/>
<polygon fill="black" stroke="black" points="2925.93,-1075.27 2935.37,-1070.46 2924.99,-1068.34 2925.93,-1075.27"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge230" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2420.87,-1168.2C2451.35,-1190.8 2500,-1232.61 2521,-1282.14 2562.15,-1379.19 2492.57,-2146.72 2557,-2230.14 2633.06,-2328.62 2715.52,-2252 2825,-2311.14 2884.32,-2343.18 2942.07,-2397.74 2973.24,-2429.71"/>
<polygon fill="black" stroke="black" points="2970.75,-2432.17 2980.21,-2436.94 2975.79,-2427.31 2970.75,-2432.17"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed -->
<g id="edge231" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed</title>
<path fill="none" stroke="black" d="M2422.81,-1132.05C2452.93,-1111.07 2499.17,-1073.51 2521,-1028.14 2558.16,-950.91 2499.72,-707.89 2557,-644.14 2561.5,-639.14 2566.64,-634.92 2572.24,-631.36"/>
<polygon fill="black" stroke="black" points="2574.32,-634.21 2581.38,-626.31 2570.93,-628.08 2574.32,-634.21"/>
</g>
<!-- scan_ontology.main -->
<g id="node137" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="2187.5,-1187.14 2032.5,-1187.14 2032.5,-1151.14 2187.5,-1151.14 2187.5,-1187.14"/>
<text text-anchor="middle" x="2110" y="-1165.44" font-family="Times,serif" font-size="14.00">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;serde_utils.write_json -->
<g id="edge232" class="edge">
<title>scan_ontology.main&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M2146.48,-1187.24C2172.49,-1202 2207.11,-1224.99 2230,-1253.14 2255.37,-1284.34 2237.87,-1307.41 2266,-1336.14 2353.24,-1425.23 2421,-1378.65 2521,-1453.14 2540.45,-1467.63 2535.67,-1482.61 2557,-1494.14 2662.83,-1551.35 2720.83,-1471.97 2825,-1532.14 2847.48,-1545.13 2839.13,-1564.16 2861,-1578.14 2873.29,-1586 2887.3,-1591.93 2901.56,-1596.41"/>
<polygon fill="black" stroke="black" points="2900.87,-1599.85 2911.45,-1599.28 2902.82,-1593.13 2900.87,-1599.85"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge233" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M2187.55,-1163.97C2211.8,-1162.34 2239.29,-1160.48 2266.08,-1158.67"/>
<polygon fill="black" stroke="black" points="2266.57,-1162.15 2276.31,-1157.98 2266.1,-1155.17 2266.57,-1162.15"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node138" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node138"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="2500,-613.14 2287,-613.14 2287,-577.14 2500,-577.14 2500,-613.14"/>
<text text-anchor="middle" x="2393.5" y="-591.44" font-family="Times,serif" font-size="14.00">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge234" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M2113.62,-1150.94C2126.38,-1064.69 2184.76,-698.2 2266,-622.14 2269.65,-618.72 2273.62,-615.7 2277.83,-613.02"/>
<polygon fill="black" stroke="black" points="2279.78,-615.94 2286.78,-607.99 2276.35,-609.84 2279.78,-615.94"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node154" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node154"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="2796.5,-505.14 2585.5,-505.14 2585.5,-469.14 2796.5,-469.14 2796.5,-505.14"/>
<text text-anchor="middle" x="2691" y="-483.44" font-family="Times,serif" font-size="14.00">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge263" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2500.11,-578.92C2507.44,-575.91 2514.49,-572.35 2521,-568.14 2543.7,-553.47 2534.49,-534.1 2557,-519.14 2562.98,-515.16 2569.41,-511.68 2576.09,-508.63"/>
<polygon fill="black" stroke="black" points="2577.49,-511.84 2585.34,-504.73 2574.77,-505.39 2577.49,-511.84"/>
</g>
<!-- telegram_bot._t -->
<g id="node139" class="node">
<title>telegram_bot._t</title>
<g id="a_node139"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="2174,-2687.14 2046,-2687.14 2046,-2651.14 2174,-2651.14 2174,-2687.14"/>
<text text-anchor="middle" x="2110" y="-2665.44" font-family="Times,serif" font-size="14.00">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node140" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node140"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="2218.5,-2633.14 2001.5,-2633.14 2001.5,-2597.14 2218.5,-2597.14 2218.5,-2633.14"/>
<text text-anchor="middle" x="2110" y="-2611.44" font-family="Times,serif" font-size="14.00">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node141" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node141"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="2497.5,-2595.14 2289.5,-2595.14 2289.5,-2559.14 2497.5,-2559.14 2497.5,-2595.14"/>
<text text-anchor="middle" x="2393.5" y="-2573.44" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge235" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2218.63,-2600.61C2238.41,-2597.94 2259.12,-2595.15 2279.07,-2592.45"/>
<polygon fill="black" stroke="black" points="2279.67,-2595.9 2289.11,-2591.1 2278.73,-2588.97 2279.67,-2595.9"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node142" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node142"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="2213,-3009.14 2007,-3009.14 2007,-2973.14 2213,-2973.14 2213,-3009.14"/>
<text text-anchor="middle" x="2110" y="-2987.44" font-family="Times,serif" font-size="14.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;serde_utils.read_text -->
<g id="edge236" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2202.62,-3009.18C2288.51,-3028.54 2418.67,-3064.27 2521,-3120.14 2539.28,-3130.12 2537.42,-3143.05 2557,-3150.14 2669,-3190.69 2706.36,-3160.7 2825,-3150.14 2960.38,-3138.09 3326.9,-3134.08 3427,-3042.14 3472.42,-3000.43 3443.88,-2966.77 3463,-2908.14 3494.69,-2810.95 3540.79,-2698.67 3562.23,-2647.77"/>
<polygon fill="black" stroke="black" points="3565.51,-2649 3566.17,-2638.43 3559.06,-2646.28 3565.51,-2649"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node143" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node143"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="3393,-2452.14 3205,-2452.14 3205,-2416.14 3393,-2416.14 3393,-2452.14"/>
<text text-anchor="middle" x="3299" y="-2430.44" font-family="Times,serif" font-size="14.00">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;serde_utils.read_text -->
<g id="edge237" class="edge">
<title>telegram_bot.load_state&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M3326.77,-2452.31C3376.49,-2486.07 3483.08,-2558.42 3538.66,-2596.15"/>
<polygon fill="black" stroke="black" points="3536.88,-2599.17 3547.12,-2601.89 3540.81,-2593.38 3536.88,-2599.17"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node144" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="2489,-2189.14 2298,-2189.14 2298,-2153.14 2489,-2153.14 2489,-2189.14"/>
<text text-anchor="middle" x="2393.5" y="-2167.44" font-family="Times,serif" font-size="14.00">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node145" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node145"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="2812,-1945.14 2570,-1945.14 2570,-1909.14 2812,-1909.14 2812,-1945.14"/>
<text text-anchor="middle" x="2691" y="-1923.44" font-family="Times,serif" font-size="14.00">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge238" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M2740.42,-1909C2767.48,-1897.17 2800.57,-1879.72 2825,-1857.14 2847.01,-1836.81 2836.3,-1817.1 2861,-1800.14 2863.73,-1798.27 2866.56,-1796.52 2869.46,-1794.88"/>
<polygon fill="black" stroke="black" points="2871.1,-1797.98 2878.41,-1790.32 2867.92,-1791.74 2871.1,-1797.98"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node146" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="2510,-2243.14 2277,-2243.14 2277,-2207.14 2510,-2207.14 2510,-2243.14"/>
<text text-anchor="middle" x="2393.5" y="-2221.44" font-family="Times,serif" font-size="14.00">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge239" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M2509.63,-2207.01C2513.67,-2204.4 2517.49,-2201.45 2521,-2198.14 2564.64,-2157.04 2517.5,-2113.24 2557,-2068.14 2642.29,-1970.78 2736.1,-2048.22 2825,-1954.14 2857.44,-1919.81 2825.2,-1884.95 2861,-1854.14 2872.75,-1844.03 2887.19,-1837.3 2902.23,-1832.88"/>
<polygon fill="black" stroke="black" points="2903.38,-1836.2 2912.18,-1830.3 2901.62,-1829.43 2903.38,-1836.2"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node147" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="2230,-2297.14 1990,-2297.14 1990,-2261.14 2230,-2261.14 2230,-2297.14"/>
<text text-anchor="middle" x="2110" y="-2275.44" font-family="Times,serif" font-size="14.00">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge240" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2215.19,-2297.25C2220.39,-2299.84 2225.37,-2302.79 2230,-2306.14 2316.79,-2369.01 2365.74,-2493.72 2384.07,-2549.3"/>
<polygon fill="black" stroke="black" points="2380.75,-2550.39 2387.14,-2558.84 2387.41,-2548.25 2380.75,-2550.39"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge241" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M2205.13,-2261.09C2231.89,-2255.95 2261.19,-2250.33 2288.5,-2245.09"/>
<polygon fill="black" stroke="black" points="2289.3,-2248.5 2298.46,-2243.18 2287.98,-2241.63 2289.3,-2248.5"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node148" class="node">
<title>telegram_bot._send_queue</title>
<polygon fill="none" stroke="black" points="2213,-2351.14 2007,-2351.14 2007,-2315.14 2213,-2315.14 2213,-2351.14"/>
<text text-anchor="middle" x="2110" y="-2329.44" font-family="Times,serif" font-size="14.00">telegram_bot._send_queue</text>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge242" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M2213.15,-2340.97C2305.21,-2342.23 2438.41,-2328.75 2521,-2252.14 2564.95,-2211.37 2513.15,-2163.03 2557,-2122.14 2575.63,-2104.77 2602.24,-2097.26 2626.77,-2094.37"/>
<polygon fill="black" stroke="black" points="2627.14,-2097.85 2636.77,-2093.43 2626.48,-2090.88 2627.14,-2097.85"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge243" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2132.16,-2351.48C2182,-2394.69 2306.87,-2502.92 2363.62,-2552.11"/>
<polygon fill="black" stroke="black" points="2361.63,-2555.02 2371.48,-2558.92 2366.22,-2549.73 2361.63,-2555.02"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node149" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node149"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="1937.5,-2757.14 1747.5,-2757.14 1747.5,-2721.14 1937.5,-2721.14 1937.5,-2757.14"/>
<text text-anchor="middle" x="1842.5" y="-2735.44" font-family="Times,serif" font-size="14.00">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge244" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M1849.87,-2757.45C1865.96,-2800.81 1912.54,-2910.19 1990,-2964.14 1992.44,-2965.84 1994.98,-2967.44 1997.59,-2968.94"/>
<polygon fill="black" stroke="black" points="1996.22,-2972.17 2006.71,-2973.66 1999.44,-2965.96 1996.22,-2972.17"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node150" class="node">
<title>telegram_bot.start_cmd</title>
<polygon fill="none" stroke="black" points="1936,-2649.14 1749,-2649.14 1749,-2613.14 1936,-2613.14 1936,-2649.14"/>
<text text-anchor="middle" x="1842.5" y="-2627.44" font-family="Times,serif" font-size="14.00">telegram_bot.start_cmd</text>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge245" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M1936.36,-2644.43C1968.87,-2649.09 2004.9,-2654.24 2035.6,-2658.64"/>
<polygon fill="black" stroke="black" points="2035.4,-2662.14 2045.8,-2660.1 2036.39,-2655.21 2035.4,-2662.14"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge246" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M1936.36,-2625.55C1954.02,-2624.48 1972.73,-2623.35 1991.05,-2622.25"/>
<polygon fill="black" stroke="black" points="1991.41,-2625.73 2001.18,-2621.64 1990.99,-2618.75 1991.41,-2625.73"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node151" class="node">
<title>telegram_bot.lang_cmd</title>
<polygon fill="none" stroke="black" points="1934,-2703.14 1751,-2703.14 1751,-2667.14 1934,-2667.14 1934,-2703.14"/>
<text text-anchor="middle" x="1842.5" y="-2681.44" font-family="Times,serif" font-size="14.00">telegram_bot.lang_cmd</text>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge247" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M1934.13,-2679.68C1967.34,-2677.68 2004.47,-2675.44 2035.95,-2673.54"/>
<polygon fill="black" stroke="black" points="2036.19,-2677.04 2045.96,-2672.94 2035.77,-2670.05 2036.19,-2677.04"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge248" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M1924.55,-2667.11C1934.55,-2664.36 1944.56,-2661.36 1954,-2658.14 1970.57,-2652.49 1973.38,-2647.66 1990,-2642.14 1996.7,-2639.91 2003.68,-2637.81 2010.74,-2635.83"/>
<polygon fill="black" stroke="black" points="2011.67,-2639.21 2020.41,-2633.22 2009.85,-2632.45 2011.67,-2639.21"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge249" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M1934.35,-2699C2032.88,-2712.08 2182.47,-2725.7 2230,-2696.14 2260.72,-2677.04 2239.06,-2647.28 2266,-2623.14 2277.21,-2613.1 2290.78,-2605.2 2304.82,-2599"/>
<polygon fill="black" stroke="black" points="2306.19,-2602.22 2314.09,-2595.16 2303.51,-2595.75 2306.19,-2602.22"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node152" class="node">
<title>telegram_bot.vote_callback</title>
<polygon fill="none" stroke="black" points="1948,-2595.14 1737,-2595.14 1737,-2559.14 1948,-2559.14 1948,-2595.14"/>
<text text-anchor="middle" x="1842.5" y="-2573.44" font-family="Times,serif" font-size="14.00">telegram_bot.vote_callback</text>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge250" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M1935.57,-2595.23C1941.98,-2597.82 1948.19,-2600.77 1954,-2604.14 1974.12,-2615.82 1969.78,-2630.63 1990,-2642.14 2004.02,-2650.13 2020.24,-2655.75 2036.1,-2659.72"/>
<polygon fill="black" stroke="black" points="2035.38,-2663.14 2045.91,-2661.97 2036.95,-2656.32 2035.38,-2663.14"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge251" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M1948.05,-2592.11C1962.32,-2594.15 1977.04,-2596.25 1991.52,-2598.33"/>
<polygon fill="black" stroke="black" points="1991.1,-2601.8 2001.49,-2599.75 1992.09,-2594.87 1991.1,-2601.8"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge252" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M1948.05,-2577.14C2042.7,-2577.14 2181.8,-2577.14 2279.1,-2577.14"/>
<polygon fill="black" stroke="black" points="2279.27,-2580.64 2289.27,-2577.14 2279.26,-2573.64 2279.27,-2580.64"/>
</g>
<!-- telegram_bot.main -->
<g id="node153" class="node">
<title>telegram_bot.main</title>
<polygon fill="none" stroke="black" points="1918,-2297.14 1767,-2297.14 1767,-2261.14 1918,-2261.14 1918,-2297.14"/>
<text text-anchor="middle" x="1842.5" y="-2275.44" font-family="Times,serif" font-size="14.00">telegram_bot.main</text>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge253" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M1853.12,-2297.23C1875.31,-2339.87 1929.97,-2450.62 1954,-2550.14 1975.68,-2639.91 1929.3,-2894.54 1990,-2964.14 1992.59,-2967.11 1995.43,-2969.79 1998.47,-2972.21"/>
<polygon fill="black" stroke="black" points="1996.73,-2975.26 2006.96,-2978.01 2000.68,-2969.48 1996.73,-2975.26"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge254" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M1918.04,-2262.69C1941,-2258.36 1966.43,-2254.29 1990,-2252.14 2096.22,-2242.43 2123.68,-2243.53 2230,-2252.14 2597.76,-2281.92 3029.02,-2372.93 3210.52,-2413.84"/>
<polygon fill="black" stroke="black" points="3210.01,-2417.32 3220.54,-2416.11 3211.56,-2410.49 3210.01,-2417.32"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge255" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M1879.89,-2261.01C1908.97,-2247.31 1951.16,-2229.21 1990,-2219.14 2089.07,-2193.45 2205.48,-2181.46 2287.55,-2175.89"/>
<polygon fill="black" stroke="black" points="2287.89,-2179.38 2297.64,-2175.23 2287.43,-2172.39 2287.89,-2179.38"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge256" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M1866.29,-2260.81C1894.24,-2238.92 1943.63,-2202.15 1990,-2177.14 2228.93,-2048.31 2295.83,-2024.12 2557,-1950.14 2560,-1949.29 2563.05,-1948.47 2566.14,-1947.67"/>
<polygon fill="black" stroke="black" points="2567.23,-1951 2576.09,-1945.2 2565.55,-1944.21 2567.23,-1951"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge257" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M1918.16,-2279.14C1937.43,-2279.14 1958.73,-2279.14 1979.9,-2279.14"/>
<polygon fill="black" stroke="black" points="1979.94,-2282.64 1989.94,-2279.14 1979.94,-2275.64 1979.94,-2282.64"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge258" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M1918.16,-2294.33C1946.81,-2300.15 1979.96,-2306.9 2010.5,-2313.11"/>
<polygon fill="black" stroke="black" points="2009.82,-2316.54 2020.32,-2315.1 2011.22,-2309.68 2009.82,-2316.54"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node155" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node155"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="2482.5,-559.14 2304.5,-559.14 2304.5,-523.14 2482.5,-523.14 2482.5,-559.14"/>
<text text-anchor="middle" x="2393.5" y="-537.44" font-family="Times,serif" font-size="14.00">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge259" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2482.76,-525.01C2513.74,-519.35 2548.91,-512.93 2581.36,-506.99"/>
<polygon fill="black" stroke="black" points="2582.13,-510.41 2591.34,-505.17 2580.87,-503.53 2582.13,-510.41"/>
</g>
<!-- log_utils.init_logger -->
<g id="node156" class="node">
<title>log_utils.init_logger</title>
<g id="a_node156"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="2472.5,-451.14 2314.5,-451.14 2314.5,-415.14 2472.5,-415.14 2472.5,-451.14"/>
<text text-anchor="middle" x="2393.5" y="-429.44" font-family="Times,serif" font-size="14.00">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge260" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M2472.53,-447.4C2505.82,-453.48 2545.24,-460.69 2581.31,-467.28"/>
<polygon fill="black" stroke="black" points="2580.92,-470.77 2591.39,-469.12 2582.18,-463.88 2580.92,-470.77"/>
</g>
<!-- log_utils.get_logger -->
<g id="node157" class="node">
<title>log_utils.get_logger</title>
<g id="a_node157"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="2769.5,-451.14 2612.5,-451.14 2612.5,-415.14 2769.5,-415.14 2769.5,-451.14"/>
<text text-anchor="middle" x="2691" y="-429.44" font-family="Times,serif" font-size="14.00">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge261" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M2472.53,-427.11C2512.41,-426.22 2561.1,-426.16 2602.28,-426.91"/>
<polygon fill="black" stroke="black" points="2602.24,-430.41 2612.31,-427.12 2602.38,-423.41 2602.24,-430.41"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge262" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M2612.31,-439.17C2572.47,-440.06 2523.79,-440.13 2482.56,-439.38"/>
<polygon fill="black" stroke="black" points="2482.59,-435.88 2472.53,-439.17 2482.45,-442.87 2482.59,-435.88"/>
</g>
<!-- notes_utils.collect_notes -->
<g id="node158" class="node">
<title>notes_utils.collect_notes</title>
<g id="a_node158"><a xlink:title="Return combined notes if ``notes/`` exists.">
<polygon fill="none" stroke="black" points="3093.5,-1336.14 2902.5,-1336.14 2902.5,-1300.14 3093.5,-1300.14 3093.5,-1336.14"/>
<text text-anchor="middle" x="2998" y="-1314.44" font-family="Times,serif" font-size="14.00">notes_utils.collect_notes</text>
</a>
</g>
</g>
<!-- notes_utils.collect_notes&#45;&gt;serde_utils.read_md -->
<g id="edge264" class="edge">
<title>notes_utils.collect_notes&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M3093.61,-1303.05C3107.66,-1299.75 3121.84,-1295.81 3135,-1291.14 3152.05,-1285.09 3153.99,-1278.3 3171,-1272.14 3182.99,-1267.8 3195.88,-1264.06 3208.7,-1260.86"/>
<polygon fill="black" stroke="black" points="3209.55,-1264.25 3218.46,-1258.52 3207.92,-1257.45 3209.55,-1264.25"/>
</g>
<!-- caption:cli -->
<g id="node160" class="node">
<title>caption:cli</title>
<g id="a_node160"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1139,-3947.14 1049,-3947.14 1049,-3911.14 1139,-3911.14 1139,-3947.14"/>
<text text-anchor="middle" x="1094" y="-3925.44" font-family="Times,serif" font-size="14.00">caption:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;caption:cli -->
<!-- tg_client:cli -->
<g id="node161" class="node">
<title>tg_client:cli</title>
<g id="a_node161"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1407,-3947.14 1308,-3947.14 1308,-3911.14 1407,-3911.14 1407,-3947.14"/>
<text text-anchor="middle" x="1357.5" y="-3925.44" font-family="Times,serif" font-size="14.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;tg_client:cli -->
<!-- debug_dump:cli -->
<g id="node162" class="node">
<title>debug_dump:cli</title>
<g id="a_node162"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1664,-3947.14 1535,-3947.14 1535,-3911.14 1664,-3911.14 1664,-3947.14"/>
<text text-anchor="middle" x="1599.5" y="-3925.44" font-family="Times,serif" font-size="14.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;debug_dump:cli -->
<!-- chop:cli -->
<g id="node163" class="node">
<title>chop:cli</title>
<g id="a_node163"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="124.5,-4001.14 53.5,-4001.14 53.5,-3965.14 124.5,-3965.14 124.5,-4001.14"/>
<text text-anchor="middle" x="89" y="-3979.44" font-family="Times,serif" font-size="14.00">chop:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node164" class="node">
<title>clean_data:cli</title>
<g id="a_node164"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="400,-4001.14 287,-4001.14 287,-3965.14 400,-3965.14 400,-4001.14"/>
<text text-anchor="middle" x="343.5" y="-3979.44" font-family="Times,serif" font-size="14.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;clean_data:cli -->
<!-- moderation:cli -->
<g id="node165" class="node">
<title>moderation:cli</title>
<g id="a_node165"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="659,-4001.14 540,-4001.14 540,-3965.14 659,-3965.14 659,-4001.14"/>
<text text-anchor="middle" x="599.5" y="-3979.44" font-family="Times,serif" font-size="14.00">moderation:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;moderation:cli -->
<!-- scan_ontology:cli -->
<g id="node166" class="node">
<title>scan_ontology:cli</title>
<g id="a_node166"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="902.5,-4001.14 764.5,-4001.14 764.5,-3965.14 902.5,-3965.14 902.5,-4001.14"/>
<text text-anchor="middle" x="833.5" y="-3979.44" font-family="Times,serif" font-size="14.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;scan_ontology:cli -->
<!-- telegram_bot:cli -->
<g id="node167" class="node">
<title>telegram_bot:cli</title>
<g id="a_node167"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1160,-4001.14 1028,-4001.14 1028,-3965.14 1160,-3965.14 1160,-4001.14"/>
<text text-anchor="middle" x="1094" y="-3979.44" font-family="Times,serif" font-size="14.00">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;telegram_bot:cli -->
<!-- build_site -->
<g id="node168" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="1599.5" cy="-372.14" rx="55.79" ry="18"/>
<text text-anchor="middle" x="1599.5" y="-368.44" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge273" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M1655.49,-372.14C1689.39,-372.14 1733.24,-372.14 1769.85,-372.14"/>
<polygon fill="black" stroke="black" points="1769.96,-375.64 1779.96,-372.14 1769.96,-368.64 1769.96,-375.64"/>
</g>
<!-- caption -->
<g id="node169" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="2110" cy="-3431.14" rx="44.69" ry="18"/>
<text text-anchor="middle" x="2110" y="-3427.44" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge274" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M2154.98,-3431.14C2201.52,-3431.14 2275.41,-3431.14 2328.41,-3431.14"/>
<polygon fill="black" stroke="black" points="2328.72,-3434.64 2338.72,-3431.14 2328.72,-3427.64 2328.72,-3434.64"/>
</g>
<!-- chop -->
<g id="node170" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="1842.5" cy="-1797.14" rx="32.49" ry="18"/>
<text text-anchor="middle" x="1842.5" y="-1793.44" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge275" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M1875,-1797.14C1919.26,-1797.14 2000.5,-1797.14 2054.63,-1797.14"/>
<polygon fill="black" stroke="black" points="2054.75,-1800.64 2064.75,-1797.14 2054.75,-1793.64 2054.75,-1800.64"/>
</g>
<!-- clean_data -->
<g id="node171" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="2110" cy="-2869.14" rx="59.59" ry="18"/>
<text text-anchor="middle" x="2110" y="-2865.44" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge276" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M2158.6,-2858.65C2180.65,-2853.21 2207,-2845.87 2230,-2837.14 2272.92,-2820.86 2319.59,-2796.89 2351.86,-2779.25"/>
<polygon fill="black" stroke="black" points="2353.91,-2782.12 2360.98,-2774.22 2350.53,-2775.99 2353.91,-2782.12"/>
</g>
<!-- debug_dump -->
<g id="node172" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="2110" cy="-2937.14" rx="70.39" ry="18"/>
<text text-anchor="middle" x="2110" y="-2933.44" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge277" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M2179.14,-2940.29C2218.23,-2942.09 2267.6,-2944.37 2309,-2946.29"/>
<polygon fill="black" stroke="black" points="2308.92,-2949.79 2319.07,-2946.75 2309.24,-2942.79 2308.92,-2949.79"/>
</g>
<!-- embed -->
<g id="node173" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="2110" cy="-1651.14" rx="42.49" ry="18"/>
<text text-anchor="middle" x="2110" y="-1647.44" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge278" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M2152.54,-1651.14C2199.66,-1651.14 2276.98,-1651.14 2331.08,-1651.14"/>
<polygon fill="black" stroke="black" points="2331.24,-1654.64 2341.24,-1651.14 2331.24,-1647.64 2331.24,-1654.64"/>
</g>
<!-- moderation -->
<g id="node174" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="2393.5" cy="-1001.14" rx="63.89" ry="18"/>
<text text-anchor="middle" x="2393.5" y="-997.44" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge279" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M2457.53,-1001.14C2490.44,-1001.14 2531.82,-1001.14 2570.51,-1001.14"/>
<polygon fill="black" stroke="black" points="2570.81,-1004.64 2580.81,-1001.14 2570.81,-997.64 2570.81,-1004.64"/>
</g>
<!-- scan_ontology -->
<g id="node175" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="1842.5" cy="-1169.14" rx="76.09" ry="18"/>
<text text-anchor="middle" x="1842.5" y="-1165.44" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge280" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M1918.87,-1169.14C1950.97,-1169.14 1988.6,-1169.14 2021.88,-1169.14"/>
<polygon fill="black" stroke="black" points="2022.06,-1172.64 2032.06,-1169.14 2022.06,-1165.64 2022.06,-1172.64"/>
</g>
<!-- telegram_bot -->
<g id="node176" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="1599.5" cy="-2539.14" rx="72.29" ry="18"/>
<text text-anchor="middle" x="1599.5" y="-2535.44" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge281" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M1608.76,-2557.06C1626.08,-2592.54 1669.72,-2671.81 1731,-2712.14 1733.32,-2713.67 1735.71,-2715.11 1738.17,-2716.46"/>
<polygon fill="black" stroke="black" points="1736.81,-2719.7 1747.32,-2721.03 1739.94,-2713.43 1736.81,-2719.7"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge282" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M1617.06,-2521.27C1658.84,-2476.2 1768.63,-2357.75 1817.48,-2305.06"/>
<polygon fill="black" stroke="black" points="1820.27,-2307.2 1824.5,-2297.48 1815.13,-2302.44 1820.27,-2307.2"/>
</g>
<!-- tg_client -->
<g id="node177" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="89" cy="-2658.14" rx="50.89" ry="18"/>
<text text-anchor="middle" x="89" y="-2654.44" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge283" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M139.89,-2658.14C178.26,-2658.14 231.71,-2658.14 274.07,-2658.14"/>
<polygon fill="black" stroke="black" points="274.31,-2661.64 284.31,-2658.14 274.31,-2654.64 274.31,-2661.64"/>
</g>
</g>
</svg>
