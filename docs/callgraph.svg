<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10252pt" height="5851pt"
 viewBox="0.00 0.00 10252.00 5851.41" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5847.41)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5847.41 10248,-5847.41 10248,4 -4,4"/>
<!-- post_io.get_contact -->
<g id="node1" class="node">
<title>post_io.get_contact</title>
<g id="a_node1"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7624.5,-3850.41 7425.5,-3850.41 7425.5,-3814.41 7624.5,-3814.41 7624.5,-3850.41"/>
<text text-anchor="middle" x="7525" y="-3827.62" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node2" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node2"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7696.5,-3908.41 7353.5,-3908.41 7353.5,-3868.41 7696.5,-3868.41 7696.5,-3908.41"/>
<text text-anchor="middle" x="7525" y="-3881.33" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.read_post -->
<g id="node3" class="node">
<title>post_io.read_post</title>
<g id="a_node3"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8842,-1630.41 8284,-1630.41 8284,-1554.41 8842,-1554.41 8842,-1630.41"/>
<text text-anchor="middle" x="8563" y="-1577.24" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- notes_utils.read_md -->
<g id="node4" class="node">
<title>notes_utils.read_md</title>
<g id="a_node4"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9434.5,-1625.41 9294.5,-1625.41 9294.5,-1589.41 9434.5,-1589.41 9434.5,-1625.41"/>
<text text-anchor="middle" x="9364.5" y="-1604.16" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge1" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8842.22,-1597.63C8998.23,-1600.55 9181.53,-1603.99 9283.93,-1605.91"/>
<polygon fill="black" stroke="black" points="9284.12,-1609.42 9294.19,-1606.1 9284.25,-1602.42 9284.12,-1609.42"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node5" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node5"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9533.5,-1392.91 9195.5,-1392.91 9195.5,-1355.91 9533.5,-1355.91 9533.5,-1392.91"/>
<text text-anchor="middle" x="9364.5" y="-1367.96" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge2" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8703.72,-1554.31C8872.61,-1508.26 9150.88,-1432.38 9285.61,-1395.64"/>
<polygon fill="black" stroke="black" points="9286.72,-1398.97 9295.45,-1392.96 9284.88,-1392.22 9286.72,-1398.97"/>
</g>
<!-- notes_utils.read_text -->
<g id="node10" class="node">
<title>notes_utils.read_text</title>
<g id="a_node10"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="10083.5,-4971.41 9869.5,-4971.41 9869.5,-4935.41 10083.5,-4935.41 10083.5,-4971.41"/>
<text text-anchor="middle" x="9976.5" y="-4948.62" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge8" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9434.52,-1596.06C9505.16,-1588.79 9612.84,-1590.51 9673,-1654.41 9910.93,-1907.11 9969.12,-4616.49 9974.98,-4924.87"/>
<polygon fill="black" stroke="black" points="9971.49,-4925.26 9975.18,-4935.2 9978.49,-4925.13 9971.49,-4925.26"/>
</g>
<!-- post_io.write_post -->
<g id="node6" class="node">
<title>post_io.write_post</title>
<g id="a_node6"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6587,-3838.41 6255,-3838.41 6255,-3792.41 6587,-3792.41 6587,-3838.41"/>
<text text-anchor="middle" x="6421" y="-3806.97" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge3" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6587.28,-3817.95C6815.64,-3821.48 7221.37,-3827.74 7415.13,-3830.73"/>
<polygon fill="black" stroke="black" points="7415.28,-3834.23 7425.33,-3830.88 7415.38,-3827.23 7415.28,-3834.23"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge4" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6587.08,-3814.58C6690.47,-3816.76 6826.01,-3824.53 6944,-3847.41 6960.56,-3850.62 6963.43,-3856.26 6980,-3859.41 7099.61,-3882.1 7236.47,-3889.3 7343,-3890.86"/>
<polygon fill="black" stroke="black" points="7343.17,-3894.36 7353.21,-3890.99 7343.26,-3887.36 7343.17,-3894.36"/>
</g>
<!-- notes_utils.write_md -->
<g id="node7" class="node">
<title>notes_utils.write_md</title>
<g id="a_node7"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7638,-3962.41 7412,-3962.41 7412,-3926.41 7638,-3926.41 7638,-3962.41"/>
<text text-anchor="middle" x="7525" y="-3939.61" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge5" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6533.47,-3792.37C6646.43,-3775.44 6821.51,-3767.42 6944,-3847.41 6973.29,-3866.53 6950.6,-3898.45 6980,-3917.41 7047.16,-3960.71 7262.77,-3958.6 7401.54,-3952.17"/>
<polygon fill="black" stroke="black" points="7401.98,-3955.65 7411.81,-3951.68 7401.65,-3948.66 7401.98,-3955.65"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node8" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node8"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8639.5,-3899.41 8486.5,-3899.41 8486.5,-3863.41 8639.5,-3863.41 8639.5,-3899.41"/>
<text text-anchor="middle" x="8563" y="-3878.16" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node9" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node9"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7670,-3492.41 7380,-3492.41 7380,-3456.41 7670,-3456.41 7670,-3492.41"/>
<text text-anchor="middle" x="7525" y="-3470.24" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge6" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7670.21,-3474.68C7782.51,-3479.18 7940.54,-3495.04 8070,-3544.41 8095.81,-3554.25 8420.68,-3782 8527.91,-3857.41"/>
<polygon fill="black" stroke="black" points="8525.94,-3860.3 8536.13,-3863.19 8529.97,-3854.57 8525.94,-3860.3"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge7" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9869.38,-4969.88C9844.57,-4979.91 9880.28,-4989.41 9976.5,-4989.41 10050.17,-4989.41 10088.37,-4983.84 10091.09,-4976.73"/>
<polygon fill="black" stroke="black" points="10093.36,-4974.06 10083.62,-4969.88 10088.63,-4979.22 10093.36,-4974.06"/>
</g>
<!-- notes_utils.parse_md -->
<g id="node11" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node11"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8646.5,-1346.41 8479.5,-1346.41 8479.5,-1310.41 8646.5,-1310.41 8646.5,-1346.41"/>
<text text-anchor="middle" x="8563" y="-1324.71" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge9" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8628.16,-1310.33C8725.51,-1287.18 8910.73,-1260.5 9020,-1355.41 9080.94,-1408.33 8999.98,-1475.3 9056,-1533.41 9114.75,-1594.35 9214.26,-1608.73 9284.13,-1610.52"/>
<polygon fill="black" stroke="black" points="9284.16,-1614.02 9294.22,-1610.7 9284.28,-1607.02 9284.16,-1614.02"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge10" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8646.55,-1333.15C8772.84,-1340.42 9017,-1354.47 9185.02,-1364.14"/>
<polygon fill="black" stroke="black" points="9185.04,-1367.64 9195.22,-1364.72 9185.44,-1360.65 9185.04,-1367.64"/>
</g>
<!-- notes_utils.load_json -->
<g id="node12" class="node">
<title>notes_utils.load_json</title>
<g id="a_node12"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9488.5,-3671.41 9240.5,-3671.41 9240.5,-3635.41 9488.5,-3635.41 9488.5,-3671.41"/>
<text text-anchor="middle" x="9364.5" y="-3647.71" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge11" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9374.12,-3671.78C9441.38,-3815.13 9881.54,-4753.16 9962.66,-4926.04"/>
<polygon fill="black" stroke="black" points="9959.56,-4927.67 9966.97,-4935.23 9965.89,-4924.69 9959.56,-4927.67"/>
</g>
<!-- notes_utils.write_json -->
<g id="node13" class="node">
<title>notes_utils.write_json</title>
<g id="a_node13"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="8657,-2798.41 8469,-2798.41 8469,-2762.41 8657,-2762.41 8657,-2798.41"/>
<text text-anchor="middle" x="8563" y="-2776.36" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- chop.has_misc_deal -->
<g id="node14" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node14"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="7639,-2064.41 7411,-2064.41 7411,-2028.41 7639,-2028.41 7639,-2064.41"/>
<text text-anchor="middle" x="7525" y="-2041.11" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node15" class="node">
<title>chop.process_message</title>
<g id="a_node15"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6922,-2236.41 5920,-2236.41 5920,-2134.41 6922,-2134.41 6922,-2236.41"/>
<text text-anchor="middle" x="6421" y="-2164.09" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge12" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6830.57,-2134.27C6873.58,-2114.18 6912.88,-2087.27 6944,-2051.41 6991.77,-1996.36 6927,-1775.43 6980,-1725.41 7068.2,-1642.16 7949.36,-1680.84 8070,-1668.41 8157.66,-1659.37 8253.54,-1645.47 8337.19,-1632.02"/>
<polygon fill="black" stroke="black" points="8337.75,-1635.48 8347.07,-1630.43 8336.64,-1628.57 8337.75,-1635.48"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge13" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6637.41,-2134.4C6740.49,-2111.99 6866.02,-2087.59 6980,-2073.41 7123.66,-2055.52 7290.05,-2049.37 7400.6,-2047.32"/>
<polygon fill="black" stroke="black" points="7400.86,-2050.81 7410.79,-2047.14 7400.73,-2043.81 7400.86,-2050.81"/>
</g>
<!-- embed.embed_file -->
<g id="node16" class="node">
<title>embed.embed_file</title>
<g id="a_node16"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7730,-2521.91 7320,-2521.91 7320,-2466.91 7730,-2466.91 7730,-2521.91"/>
<text text-anchor="middle" x="7525" y="-2483.86" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge14" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6503.79,-2236.52C6609.35,-2299.61 6800.79,-2404.41 6980,-2452.41 7086.37,-2480.89 7208.32,-2492.17 7309.76,-2495.99"/>
<polygon fill="black" stroke="black" points="7309.7,-2499.49 7319.82,-2496.35 7309.95,-2492.49 7309.7,-2499.49"/>
</g>
<!-- caption_io.has_caption -->
<g id="node17" class="node">
<title>caption_io.has_caption</title>
<g id="a_node17"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8640.5,-2733.41 8485.5,-2733.41 8485.5,-2697.41 8640.5,-2697.41 8640.5,-2733.41"/>
<text text-anchor="middle" x="8563" y="-2712.16" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge15" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6516.94,-2236.45C6625.4,-2291.85 6809.9,-2377.36 6980,-2414.41 7098.43,-2440.2 7966.6,-2394.16 8070,-2457.41 8097.84,-2474.43 8081.69,-2499.63 8106,-2521.41 8213.51,-2617.68 8375.9,-2671.08 8475.1,-2696.46"/>
<polygon fill="black" stroke="black" points="8474.54,-2699.92 8485.1,-2698.97 8476.25,-2693.14 8474.54,-2699.92"/>
</g>
<!-- caption_io.read_caption -->
<g id="node18" class="node">
<title>caption_io.read_caption</title>
<g id="a_node18"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8728.5,-2380.91 8397.5,-2380.91 8397.5,-2343.91 8728.5,-2343.91 8728.5,-2380.91"/>
<text text-anchor="middle" x="8563" y="-2355.96" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge16" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6575.42,-2236.42C6686.4,-2270.7 6840.71,-2313.02 6980,-2332.41 7487.03,-2402.96 8094.18,-2386.69 8387.02,-2372.62"/>
<polygon fill="black" stroke="black" points="8387.48,-2376.1 8397.3,-2372.12 8387.14,-2369.11 8387.48,-2376.1"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node19" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node19"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="8665,-2018.41 8461,-2018.41 8461,-1982.41 8665,-1982.41 8665,-2018.41"/>
<text text-anchor="middle" x="8563" y="-1994.53" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge17" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6721.72,-2134.32C6796.94,-2114.63 6875.65,-2087.77 6944,-2051.41 6962.9,-2041.35 6960.04,-2027.13 6980,-2019.41 7115.87,-1966.81 8113.16,-1988.34 8450.69,-1997.26"/>
<polygon fill="black" stroke="black" points="8450.64,-2000.76 8460.73,-1997.53 8450.83,-1993.76 8450.64,-2000.76"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node20" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node20"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8652.5,-3158.41 8473.5,-3158.41 8473.5,-3122.41 8652.5,-3122.41 8652.5,-3158.41"/>
<text text-anchor="middle" x="8563" y="-3136.36" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge18" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6612.16,-2236.5C6728.69,-2278.41 6869.38,-2350.37 6944,-2467.41 6980.02,-2523.91 6932.27,-3022.38 6980,-3069.41 7032.94,-3121.56 8125.31,-3136.27 8463.25,-3139.57"/>
<polygon fill="black" stroke="black" points="8463.24,-3143.07 8473.27,-3139.67 8463.31,-3136.07 8463.24,-3143.07"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node21" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node21"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8730,-965.41 8396,-965.41 8396,-929.41 8730,-929.41 8730,-965.41"/>
<text text-anchor="middle" x="8563" y="-942.62" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge19" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6837.67,-2134.39C6878.48,-2114.14 6915.31,-2087.16 6944,-2051.41 7020.25,-1956.37 6892.66,-1040.36 6980,-955.41 7029.64,-907.12 7983.11,-929.96 8385.36,-941.82"/>
<polygon fill="black" stroke="black" points="8385.54,-945.32 8395.64,-942.12 8385.75,-938.33 8385.54,-945.32"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node22" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node22"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="9482.5,-1052.41 9246.5,-1052.41 9246.5,-1016.41 9482.5,-1016.41 9482.5,-1052.41"/>
<text text-anchor="middle" x="9364.5" y="-1030.36" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge20" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6837.56,-2134.3C6878.38,-2114.07 6915.25,-2087.12 6944,-2051.41 7013.58,-1964.97 6900.44,-1130.76 6980,-1053.41 7020.75,-1013.79 8747.75,-1028.18 9236.08,-1033.06"/>
<polygon fill="black" stroke="black" points="9236.3,-1036.56 9246.34,-1033.16 9236.37,-1029.56 9236.3,-1036.56"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node23" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node23"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8712.5,-2286.41 8413.5,-2286.41 8413.5,-2250.41 8712.5,-2250.41 8712.5,-2286.41"/>
<text text-anchor="middle" x="8563" y="-2263.61" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge21" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6610.85,-2236.44C6718.19,-2262.81 6855.6,-2292.18 6980,-2305.41 7498.54,-2360.53 8117.84,-2313.57 8403.42,-2285.6"/>
<polygon fill="black" stroke="black" points="8403.83,-2289.08 8413.43,-2284.61 8403.14,-2282.11 8403.83,-2289.08"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge134" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7730.12,-2469.45C7844.02,-2467.25 7980.56,-2485.86 8070,-2569.41 8127.39,-2623.01 8047.18,-2690.36 8106,-2742.41 8207.77,-2832.45 8377.12,-2819.13 8478.31,-2800.37"/>
<polygon fill="black" stroke="black" points="8479.02,-2803.8 8488.19,-2798.49 8477.71,-2796.93 8479.02,-2803.8"/>
</g>
<!-- lot_io.read_lots -->
<g id="node26" class="node">
<title>lot_io.read_lots</title>
<g id="a_node26"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8669,-1942.41 8457,-1942.41 8457,-1906.41 8669,-1906.41 8669,-1942.41"/>
<text text-anchor="middle" x="8563" y="-1918.25" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge135" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7730.1,-2476.53C7847.9,-2454.98 7988.44,-2407.89 8070,-2305.41 8116.21,-2247.34 8053.5,-2025.85 8106,-1973.41 8201.26,-1878.23 8369.67,-1887.42 8473,-1904.62"/>
<polygon fill="black" stroke="black" points="8472.65,-1908.11 8483.1,-1906.36 8473.84,-1901.21 8472.65,-1908.11"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node92" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node92"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8655.5,-2512.41 8470.5,-2512.41 8470.5,-2476.41 8655.5,-2476.41 8655.5,-2512.41"/>
<text text-anchor="middle" x="8563" y="-2489.62" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge136" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7730.06,-2494.41C7950.02,-2494.41 8291.22,-2494.41 8460.13,-2494.41"/>
<polygon fill="black" stroke="black" points="8460.27,-2497.91 8470.27,-2494.41 8460.27,-2490.91 8460.27,-2497.91"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node83" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node83"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9461,-2890.41 9268,-2890.41 9268,-2854.41 9461,-2854.41 9461,-2890.41"/>
<text text-anchor="middle" x="9364.5" y="-2869.16" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge139" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8640.69,-2715.97C8731.99,-2717.97 8888.65,-2725.64 9020,-2753.41 9127.26,-2776.08 9247.11,-2822.77 9313.09,-2850.45"/>
<polygon fill="black" stroke="black" points="9311.85,-2853.73 9322.42,-2854.39 9314.57,-2847.28 9311.85,-2853.73"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node85" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node85"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9458,-2353.41 9271,-2353.41 9271,-2317.41 9458,-2317.41 9458,-2353.41"/>
<text text-anchor="middle" x="9364.5" y="-2332.16" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge140" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8640.9,-2704.54C8743.31,-2685.89 8922.83,-2637.81 9020,-2521.41 9066.43,-2465.78 9001.43,-2410.06 9056,-2362.41 9111.67,-2313.79 9196.61,-2309.72 9263.12,-2316.31"/>
<polygon fill="black" stroke="black" points="9262.89,-2319.8 9273.21,-2317.4 9263.65,-2312.85 9262.89,-2319.8"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge141" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8728.69,-2373.98C8822.16,-2372.36 8936.72,-2355.72 9020,-2295.41 9256.77,-2123.93 9339.82,-1742.41 9358.88,-1635.65"/>
<polygon fill="black" stroke="black" points="9362.36,-1636.09 9360.62,-1625.64 9355.46,-1634.89 9362.36,-1636.09"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge142" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8728.54,-2355.21C8828.04,-2360.4 8948.99,-2385.43 9020,-2467.41 9083.07,-2540.22 9033.55,-2805.72 9056,-2899.41 9127.26,-3196.8 9297.66,-3529.97 9348.76,-3626.11"/>
<polygon fill="black" stroke="black" points="9345.8,-3627.99 9353.6,-3635.17 9351.98,-3624.7 9345.8,-3627.99"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge144" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8728.62,-2374.8C8819.85,-2387.7 8932.22,-2413.97 9020,-2467.41 9183.55,-2566.97 9307.8,-2771.52 9348.88,-2845.2"/>
<polygon fill="black" stroke="black" points="9346.02,-2847.25 9353.91,-2854.31 9352.14,-2843.87 9346.02,-2847.25"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge145" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8728.69,-2356.84C8888.4,-2351.45 9125.76,-2343.43 9260.41,-2338.89"/>
<polygon fill="black" stroke="black" points="9260.85,-2342.37 9270.73,-2338.54 9260.61,-2335.38 9260.85,-2342.37"/>
</g>
<!-- caption_io._get_langs -->
<g id="node94" class="node">
<title>caption_io._get_langs</title>
<g id="a_node94"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9473.5,-2407.41 9255.5,-2407.41 9255.5,-2371.41 9473.5,-2371.41 9473.5,-2407.41"/>
<text text-anchor="middle" x="9364.5" y="-2384.62" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge143" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8728.69,-2367.97C8882.54,-2373.16 9108.45,-2380.79 9245.19,-2385.41"/>
<polygon fill="black" stroke="black" points="9245.17,-2388.91 9255.28,-2385.75 9245.41,-2381.91 9245.17,-2388.91"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node168" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node168"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9659.5,-762.91 9069.5,-762.91 9069.5,-717.91 9659.5,-717.91 9659.5,-762.91"/>
<text text-anchor="middle" x="9364.5" y="-732.03" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge284" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8730.03,-944.09C8817.59,-939 8926.04,-927.35 9020,-901.41 9132.47,-870.35 9253.79,-805.17 9317.84,-767.97"/>
<polygon fill="black" stroke="black" points="9319.62,-770.98 9326.49,-762.91 9316.09,-764.94 9319.62,-770.98"/>
</g>
<!-- chop.main -->
<g id="node24" class="node">
<title>chop.main</title>
<g id="a_node24"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5620,-2203.41 5469,-2203.41 5469,-2167.41 5620,-2167.41 5620,-2203.41"/>
<text text-anchor="middle" x="5544.5" y="-2179.25" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge22" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5620.06,-2185.41C5688.24,-2185.41 5795.6,-2185.41 5909.79,-2185.41"/>
<polygon fill="black" stroke="black" points="5909.79,-2188.91 5919.79,-2185.41 5909.79,-2181.91 5909.79,-2188.91"/>
</g>
<!-- price_train._iter_lots -->
<g id="node25" class="node">
<title>price_train._iter_lots</title>
<g id="a_node25"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7680.5,-2121.91 7369.5,-2121.91 7369.5,-2082.91 7680.5,-2082.91 7680.5,-2121.91"/>
<text text-anchor="middle" x="7525" y="-2095.51" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge23" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7680.74,-2112.64C7819.61,-2118.57 8010.46,-2117.66 8070,-2073.41 8107.91,-2045.22 8068.86,-2002.6 8106,-1973.41 8201.93,-1898.01 8346.4,-1895.32 8446.93,-1905.31"/>
<polygon fill="black" stroke="black" points="8446.82,-1908.81 8457.13,-1906.38 8447.55,-1901.85 8446.82,-1908.81"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node27" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node27"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8691.5,-1401.91 8434.5,-1401.91 8434.5,-1364.91 8691.5,-1364.91 8691.5,-1401.91"/>
<text text-anchor="middle" x="8563" y="-1376.96" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge24" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7680.55,-2116.1C7822,-2124.88 8017.1,-2126.25 8070,-2073.41 8174.23,-1969.28 8002.19,-1515.95 8106,-1411.41 8149.17,-1367.93 8306.32,-1366.73 8424.15,-1372.62"/>
<polygon fill="black" stroke="black" points="8424.18,-1376.12 8434.35,-1373.15 8424.54,-1369.13 8424.18,-1376.12"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge236" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8638.69,-1906.35C8741.1,-1886.55 8923.39,-1869.98 9020,-1973.41 9055.14,-2011.03 9045.11,-2849.09 9056,-2899.41 9120.66,-3198.3 9295.61,-3530.44 9348.29,-3626.22"/>
<polygon fill="black" stroke="black" points="9345.37,-3628.18 9353.27,-3635.24 9351.5,-3624.8 9345.37,-3628.18"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node137" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node137"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9422,-1524.41 9307,-1524.41 9307,-1488.41 9422,-1488.41 9422,-1524.41"/>
<text text-anchor="middle" x="9364.5" y="-1503.16" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge237" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8605.87,-1906.36C8691.87,-1867.69 8891.15,-1769.65 9020,-1639.41 9041.6,-1617.57 9031.17,-1598.49 9056,-1580.41 9127.24,-1528.51 9230.03,-1512.6 9296.8,-1507.95"/>
<polygon fill="black" stroke="black" points="9297.03,-1511.44 9306.79,-1507.32 9296.59,-1504.46 9297.03,-1511.44"/>
</g>
<!-- price_train.main -->
<g id="node28" class="node">
<title>price_train.main</title>
<g id="a_node28"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6536,-2616.41 6306,-2616.41 6306,-2580.41 6536,-2580.41 6536,-2616.41"/>
<text text-anchor="middle" x="6421" y="-2592.25" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge25" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6522.63,-2616.42C6641.58,-2631.33 6836.84,-2634.56 6944,-2521.41 7003.85,-2458.21 6917.27,-2191.74 6980,-2131.41 7032.54,-2080.86 7219.11,-2080.68 7359.21,-2088.53"/>
<polygon fill="black" stroke="black" points="7359.03,-2092.03 7369.21,-2089.11 7359.43,-2085.04 7359.03,-2092.03"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node29" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node29"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="8070,-385.91 6980,-385.91 6980,-308.91 8070,-308.91 8070,-385.91"/>
<text text-anchor="middle" x="7525" y="-331.51" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge26" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6514.68,-2616.42C6633.96,-2633.6 6838.37,-2641.53 6944,-2521.41 7016.43,-2439.04 6916.42,-636.78 6980,-547.41 7038.02,-465.86 7133.07,-417.48 7227.61,-388.82"/>
<polygon fill="black" stroke="black" points="7228.76,-392.13 7237.35,-385.94 7226.77,-385.42 7228.76,-392.13"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node30" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node30"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="7737.5,-2617.91 7312.5,-2617.91 7312.5,-2578.91 7737.5,-2578.91 7737.5,-2617.91"/>
<text text-anchor="middle" x="7525" y="-2591.51" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge27" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6536.04,-2598.41C6716.32,-2598.41 7070.42,-2598.41 7302.07,-2598.41"/>
<polygon fill="black" stroke="black" points="7302.32,-2601.91 7312.32,-2598.41 7302.32,-2594.91 7302.32,-2601.91"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node31" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node31"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8819,-4401.41 8307,-4401.41 8307,-4359.41 8819,-4359.41 8819,-4401.41"/>
<text text-anchor="middle" x="8563" y="-4372.32" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge28" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6479.65,-2616.54C6592.03,-2655.32 6838.59,-2757.94 6944,-2940.41 7014.37,-3062.21 6888.46,-3465.59 6980,-3572.41 7302.37,-3948.56 7698.41,-3477.8 8070,-3805.41 8106.38,-3837.47 8080.56,-3867.12 8106,-3908.41 8227.03,-4104.85 8441.92,-4285.85 8526.44,-4352.92"/>
<polygon fill="black" stroke="black" points="8524.43,-4355.79 8534.45,-4359.24 8528.77,-4350.3 8524.43,-4355.79"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node32" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node32"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7763.5,-2676.41 7286.5,-2676.41 7286.5,-2636.41 7763.5,-2636.41 7763.5,-2676.41"/>
<text text-anchor="middle" x="7525" y="-2649.33" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge29" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6536.04,-2604.41C6709.68,-2613.55 7044.57,-2631.17 7275.98,-2643.35"/>
<polygon fill="black" stroke="black" points="7276.06,-2646.86 7286.23,-2643.89 7276.43,-2639.87 7276.06,-2646.86"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node65" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node65"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="8742.5,-142.41 8383.5,-142.41 8383.5,-106.41 8742.5,-106.41 8742.5,-142.41"/>
<text text-anchor="middle" x="8563" y="-118.71" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge96" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8057.09,-308.8C8061.46,-305.78 8065.77,-302.65 8070,-299.41 8107.13,-270.88 8070,-230.34 8106,-200.41 8179.46,-139.33 8283.2,-118.62 8373.18,-113.94"/>
<polygon fill="black" stroke="black" points="8373.41,-117.44 8383.24,-113.48 8373.09,-110.44 8373.41,-117.44"/>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge97" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7737.62,-2585.58C7867.74,-2582.2 8019.02,-2587.81 8070,-2627.41 8112.3,-2660.26 8064.2,-2708.93 8106,-2742.41 8208.96,-2824.86 8370.2,-2816.34 8470.8,-2800.17"/>
<polygon fill="black" stroke="black" points="8471.66,-2803.58 8480.95,-2798.48 8470.51,-2796.67 8471.66,-2803.58"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge150" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8603.39,-4359.4C8686.02,-4314.24 8881.26,-4201.72 9020,-4075.41 9164.06,-3944.24 9298.95,-3750.52 9345.94,-3680.17"/>
<polygon fill="black" stroke="black" points="9349.11,-3681.72 9351.73,-3671.46 9343.28,-3677.85 9349.11,-3681.72"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node33" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node33"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-5665.41 0,-5665.41 0,-5629.41 282,-5629.41 282,-5665.41"/>
<text text-anchor="middle" x="141" y="-5643.36" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- chop:cli -->
<g id="node34" class="node">
<title>chop:cli</title>
<g id="a_node34"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5647.41" rx="27" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5645.81" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;chop:cli -->
<!-- price_train:cli -->
<g id="node178" class="node">
<title>price_train:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5647.41" rx="36.68" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5645.81" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;price_train:cli -->
<!-- clean_data._parse_date -->
<g id="node35" class="node">
<title>clean_data._parse_date</title>
<g id="a_node35"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8702.5,-4542.41 8423.5,-4542.41 8423.5,-4506.41 8702.5,-4506.41 8702.5,-4542.41"/>
<text text-anchor="middle" x="8563" y="-4518.71" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge31" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8702.88,-4507.95C8921.51,-4488.4 9353.87,-4475.85 9673,-4632.41 9812.57,-4700.87 9921.02,-4862.62 9959.93,-4926.64"/>
<polygon fill="black" stroke="black" points="9957.01,-4928.59 9965.16,-4935.36 9963.01,-4924.98 9957.01,-4928.59"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node36" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node36"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7678.5,-4648.41 7371.5,-4648.41 7371.5,-4612.41 7678.5,-4612.41 7678.5,-4648.41"/>
<text text-anchor="middle" x="7525" y="-4624.25" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge32" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7678.53,-4643.62C7819.29,-4652.23 8014.64,-4653.91 8070,-4603.41 8153.91,-4526.86 8055.95,-4452.36 8106,-4350.41 8208.43,-4141.74 8438.58,-3966.93 8526.73,-3905.23"/>
<polygon fill="black" stroke="black" points="8528.83,-3908.03 8535.05,-3899.45 8524.84,-3902.28 8528.83,-3908.03"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge33" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7678.64,-4636.92C7815.46,-4640.23 8004.43,-4637.82 8070,-4603.41 8093.3,-4591.18 8082.83,-4568.87 8106,-4556.41 8203.27,-4504.07 8329.56,-4499.18 8424.56,-4505.62"/>
<polygon fill="black" stroke="black" points="8424.59,-4509.13 8434.82,-4506.37 8425.1,-4502.15 8424.59,-4509.13"/>
</g>
<!-- clean_data._clean_media -->
<g id="node37" class="node">
<title>clean_data._clean_media</title>
<g id="a_node37"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7715,-4540.41 7335,-4540.41 7335,-4500.41 7715,-4500.41 7715,-4540.41"/>
<text text-anchor="middle" x="7525" y="-4513.33" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge35" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7715.21,-4522.48C7853.04,-4519.49 8023.43,-4504.95 8070,-4453.41 8133.33,-4383.31 8041.3,-2822.24 8106,-2753.41 8202.75,-2650.47 8385.12,-2672.2 8487.47,-2695.08"/>
<polygon fill="black" stroke="black" points="8486.9,-2698.53 8497.43,-2697.36 8488.46,-2691.71 8486.9,-2698.53"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge34" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7715.11,-4521.14C7916.03,-4521.91 8229.5,-4523.12 8413.43,-4523.83"/>
<polygon fill="black" stroke="black" points="8413.43,-4527.33 8423.45,-4523.87 8413.46,-4520.33 8413.43,-4527.33"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node38" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node38"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7727,-3438.41 7323,-3438.41 7323,-3392.41 7727,-3392.41 7727,-3438.41"/>
<text text-anchor="middle" x="7525" y="-3406.97" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge36" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7727.07,-3403.99C7859.53,-3400.76 8017.81,-3406.44 8070,-3447.41 8112.8,-3481 8073.91,-3520.47 8106,-3564.41 8214.6,-3713.06 8414.88,-3816.32 8509.66,-3859.2"/>
<polygon fill="black" stroke="black" points="8508.49,-3862.5 8519.04,-3863.4 8511.35,-3856.12 8508.49,-3862.5"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge37" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7653.53,-3438.43C7769.92,-3452.7 7942.7,-3456.43 8070,-3383.41 8095.02,-3369.05 8083.71,-3347.72 8106,-3329.41 8215.3,-3239.59 8373.25,-3187.02 8471.66,-3161"/>
<polygon fill="black" stroke="black" points="8472.79,-3164.33 8481.59,-3158.42 8471.03,-3157.55 8472.79,-3164.33"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge38" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7727.2,-3430.8C7862.17,-3436.22 8023.46,-3431.52 8070,-3383.41 8124.48,-3327.08 8052.9,-2031.03 8106,-1973.41 8199.18,-1872.3 8374.13,-1885.3 8478.14,-1904.47"/>
<polygon fill="black" stroke="black" points="8477.5,-1907.91 8487.98,-1906.34 8478.81,-1901.03 8477.5,-1907.91"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node39" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node39"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7733,-4594.41 7317,-4594.41 7317,-4558.41 7733,-4558.41 7733,-4594.41"/>
<text text-anchor="middle" x="7525" y="-4570.25" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node40" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node40"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8776.5,-4986.41 8349.5,-4986.41 8349.5,-4950.41 8776.5,-4950.41 8776.5,-4986.41"/>
<text text-anchor="middle" x="8563" y="-4962.25" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node41" class="node">
<title>clean_data.main</title>
<g id="a_node41"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6517,-4594.41 6325,-4594.41 6325,-4558.41 6517,-4558.41 6517,-4594.41"/>
<text text-anchor="middle" x="6421" y="-4571.11" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge39" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6517.39,-4581.08C6705.83,-4590.31 7127.72,-4610.99 7361.06,-4622.42"/>
<polygon fill="black" stroke="black" points="7361.18,-4625.93 7371.34,-4622.92 7361.52,-4618.94 7361.18,-4625.93"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge40" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6517.39,-4571.56C6696.38,-4562.46 7086.03,-4542.66 7324.61,-4530.54"/>
<polygon fill="black" stroke="black" points="7324.99,-4534.02 7334.8,-4530.02 7324.63,-4527.03 7324.99,-4534.02"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge41" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6512.03,-4594.42C6630.56,-4612.3 6836.48,-4622.06 6944,-4502.41 7022.4,-4415.16 6898.09,-3531.36 6980,-3447.41 7025.56,-3400.71 7179.9,-3395.04 7312.6,-3399.74"/>
<polygon fill="black" stroke="black" points="7312.8,-3403.25 7322.92,-3400.13 7313.06,-3396.26 7312.8,-3403.25"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge42" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6517.39,-4576.41C6691.94,-4576.41 7066.8,-4576.41 7306.56,-4576.41"/>
<polygon fill="black" stroke="black" points="7306.81,-4579.91 7316.81,-4576.41 7306.81,-4572.91 7306.81,-4579.91"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge43" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6486.31,-4594.47C6595.18,-4628.19 6816.37,-4710.72 6944,-4855.41 6973.59,-4888.95 6943.29,-4923.83 6980,-4949.41 7034.68,-4987.5 7915.99,-4978.75 8338.91,-4972.29"/>
<polygon fill="black" stroke="black" points="8339.18,-4975.79 8349.13,-4972.13 8339.07,-4968.79 8339.18,-4975.79"/>
</g>
<!-- similar._iter_lots -->
<g id="node42" class="node">
<title>similar._iter_lots</title>
<g id="a_node42"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7679,-1461.91 7371,-1461.91 7371,-1414.91 7679,-1414.91 7679,-1461.91"/>
<text text-anchor="middle" x="7525" y="-1429.91" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge44" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7679.19,-1440.33C7788.62,-1443.49 7939.04,-1451.5 8070,-1471.41 8191.51,-1489.88 8326.94,-1524.23 8424.9,-1551.63"/>
<polygon fill="black" stroke="black" points="8423.99,-1555 8434.56,-1554.34 8425.88,-1548.26 8423.99,-1555"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge45" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7679.05,-1425.61C7821.03,-1417.5 8018.02,-1417.12 8070,-1471.41 8150.43,-1555.4 8051.24,-3461.81 8106,-3564.41 8191.19,-3724.01 8396.48,-3819.95 8500.05,-3859.81"/>
<polygon fill="black" stroke="black" points="8498.85,-3863.1 8509.44,-3863.38 8501.33,-3856.56 8498.85,-3863.1"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge48" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7679.08,-1450.28C7820.25,-1457.6 8015.89,-1457.32 8070,-1405.41 8126.74,-1350.97 8054.03,-1112.41 8106,-1053.41 8174.82,-975.28 8288.93,-948.8 8385.78,-941.84"/>
<polygon fill="black" stroke="black" points="8386.25,-945.32 8396,-941.17 8385.79,-938.33 8386.25,-945.32"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge46" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7679.21,-1427.79C7819.38,-1421.52 8013.32,-1422.67 8070,-1471.41 8127.9,-1521.19 8062.15,-1576.89 8106,-1639.41 8204.67,-1780.09 8397.18,-1865.8 8497.59,-1902.87"/>
<polygon fill="black" stroke="black" points="8496.42,-1906.16 8507.01,-1906.3 8498.81,-1899.59 8496.42,-1906.16"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge47" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7679.14,-1430.27C7880.36,-1419.59 8230.77,-1400.99 8424.1,-1390.73"/>
<polygon fill="black" stroke="black" points="8424.52,-1394.21 8434.32,-1390.18 8424.15,-1387.22 8424.52,-1394.21"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node43" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node43"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8701,-1456.41 8425,-1456.41 8425,-1420.41 8701,-1420.41 8701,-1456.41"/>
<text text-anchor="middle" x="8563" y="-1433.62" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge49" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7679.14,-1438.41C7877.14,-1438.41 8219.6,-1438.41 8414.7,-1438.41"/>
<polygon fill="black" stroke="black" points="8414.74,-1441.91 8424.74,-1438.41 8414.74,-1434.91 8414.74,-1441.91"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node169" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node169"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9541,-1198.41 9188,-1198.41 9188,-1162.41 9541,-1162.41 9541,-1198.41"/>
<text text-anchor="middle" x="9364.5" y="-1174.53" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge285" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8652.53,-1456.45C8750.3,-1471.37 8908.61,-1480.22 9020,-1410.41 9047.65,-1393.07 9032.72,-1369.28 9056,-1346.41 9127.14,-1276.49 9233.74,-1227.91 9300.91,-1202.1"/>
<polygon fill="black" stroke="black" points="9302.41,-1205.27 9310.52,-1198.45 9299.93,-1198.72 9302.41,-1205.27"/>
</g>
<!-- similar.main -->
<g id="node44" class="node">
<title>similar.main</title>
<g id="a_node44"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6526,-4493.41 6316,-4493.41 6316,-4451.41 6526,-4451.41 6526,-4493.41"/>
<text text-anchor="middle" x="6421" y="-4464.32" font-family="Times,serif" font-size="31.36">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge51" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6526.34,-4476.1C6787.12,-4484.28 7488.13,-4499.71 8070,-4453.41 8196.91,-4443.31 8340.83,-4420.63 8440.07,-4403.21"/>
<polygon fill="black" stroke="black" points="8440.9,-4406.61 8450.14,-4401.43 8439.68,-4399.72 8440.9,-4406.61"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge57" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6476.04,-4451.23C6587.55,-4404.22 6841.31,-4279.42 6944,-4081.41 7007.66,-3958.65 6897.5,-2948.38 6980,-2837.41 7049.03,-2744.55 7167.53,-2698.7 7276.35,-2676.32"/>
<polygon fill="black" stroke="black" points="7277.05,-2679.75 7286.17,-2674.35 7275.68,-2672.88 7277.05,-2679.75"/>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge50" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6476.27,-4451.35C6588.24,-4404.58 6842.81,-4280.19 6944,-4081.41 6976.89,-4016.79 6929.94,-1523.86 6980,-1471.41 7030.67,-1418.3 7219.74,-1417.45 7360.84,-1425.01"/>
<polygon fill="black" stroke="black" points="7360.73,-1428.51 7370.91,-1425.57 7361.12,-1421.52 7360.73,-1428.51"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node45" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node45"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7774,-4352.41 7276,-4352.41 7276,-4304.41 7774,-4304.41 7774,-4352.41"/>
<text text-anchor="middle" x="7525" y="-4319.29" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge52" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6526.13,-4458.77C6638.21,-4444.1 6821.73,-4420.09 6980,-4399.41 7096.08,-4384.24 7226.09,-4367.27 7329.91,-4353.72"/>
<polygon fill="black" stroke="black" points="7330.41,-4357.19 7339.87,-4352.42 7329.5,-4350.25 7330.41,-4357.19"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node46" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node46"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7673,-4824.41 7377,-4824.41 7377,-4788.41 7673,-4788.41 7673,-4824.41"/>
<text text-anchor="middle" x="7525" y="-4801.11" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge53" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6526.14,-4455.02C6644.31,-4441.78 6834.75,-4441.18 6944,-4549.41 7017.2,-4621.91 6903.44,-4709.46 6980,-4778.41 7035.07,-4828 7226.63,-4827.36 7366.9,-4819.41"/>
<polygon fill="black" stroke="black" points="7367.13,-4822.9 7376.91,-4818.83 7366.72,-4815.92 7367.13,-4822.9"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node47" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node47"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7692.5,-4878.41 7357.5,-4878.41 7357.5,-4842.41 7692.5,-4842.41 7692.5,-4878.41"/>
<text text-anchor="middle" x="7525" y="-4855.11" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge54" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6526.19,-4454.51C6644.86,-4440.67 6836.21,-4439.4 6944,-4549.41 7033.05,-4640.28 6886.66,-4746.94 6980,-4833.41 7031.9,-4881.48 7208.98,-4882.58 7347.17,-4875.19"/>
<polygon fill="black" stroke="black" points="7347.68,-4878.67 7357.47,-4874.62 7347.29,-4871.68 7347.68,-4878.67"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node48" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node48"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7664,-4444.41 7386,-4444.41 7386,-4408.41 7664,-4408.41 7664,-4444.41"/>
<text text-anchor="middle" x="7525" y="-4421.62" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge55" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6526.17,-4468.06C6722.74,-4459.85 7148.91,-4442.06 7375.45,-4432.61"/>
<polygon fill="black" stroke="black" points="7375.91,-4436.09 7385.75,-4432.18 7375.61,-4429.1 7375.91,-4436.09"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node49" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node49"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="9020,-5231.91 8106,-5231.91 8106,-5156.91 9020,-5156.91 9020,-5231.91"/>
<text text-anchor="middle" x="8563" y="-5179.41" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge56" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6526.11,-4453.49C6645.85,-4438.39 6839.36,-4435.63 6944,-4549.41 7030.22,-4643.15 6888.69,-5032.62 6980,-5121.41 7023.44,-5163.65 8009.49,-5156.2 8070,-5159.41 8078.45,-5159.85 8086.98,-5160.32 8095.58,-5160.8"/>
<polygon fill="black" stroke="black" points="8095.51,-5164.3 8105.69,-5161.37 8095.91,-5157.31 8095.51,-5164.3"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node50" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node50"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9673,-5417.41 9056,-5417.41 9056,-5365.41 9673,-5365.41 9673,-5417.41"/>
<text text-anchor="middle" x="9364.5" y="-5381.26" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge58" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6526.18,-4453.22C6646.23,-4437.79 6840.25,-4434.65 6944,-4549.41 7002.56,-4614.17 6917.59,-5273.35 6980,-5334.41 7052.55,-5405.38 8413.36,-5401.05 9045.57,-5395.15"/>
<polygon fill="black" stroke="black" points="9045.79,-5398.65 9055.75,-5395.06 9045.72,-5391.65 9045.79,-5398.65"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge151" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7774.16,-4327.36C7867.82,-4322.73 7974.73,-4312.31 8070,-4290.41 8513.5,-4188.42 8622.93,-4130.75 9020,-3908.41 9146,-3837.85 9278.76,-3727.37 9335.32,-3678.31"/>
<polygon fill="black" stroke="black" points="9337.86,-3680.74 9343.1,-3671.53 9333.26,-3675.46 9337.86,-3680.74"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge153" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7673.25,-4820.28C7815.51,-4830.05 8017.01,-4833.07 8070,-4778.41 8138.57,-4707.67 8053.14,-3088.54 8106,-3005.41 8183.97,-2882.78 8350.21,-2824.82 8458.96,-2799.07"/>
<polygon fill="black" stroke="black" points="8460.02,-2802.42 8468.98,-2796.75 8458.44,-2795.6 8460.02,-2802.42"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node80" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node80"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8639.5,-4932.41 8486.5,-4932.41 8486.5,-4896.41 8639.5,-4896.41 8639.5,-4932.41"/>
<text text-anchor="middle" x="8563" y="-4910.71" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge155" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7673.26,-4809.19C7782.9,-4812.36 7936.13,-4819.11 8070,-4833.41 8213.34,-4848.71 8378.39,-4878.38 8476.25,-4897.25"/>
<polygon fill="black" stroke="black" points="8475.61,-4900.69 8486.09,-4899.15 8476.94,-4893.82 8475.61,-4900.69"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node97" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node97"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8665,-4710.41 8461,-4710.41 8461,-4674.41 8665,-4674.41 8665,-4710.41"/>
<text text-anchor="middle" x="8563" y="-4688.71" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge154" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7673.3,-4813.96C7811.2,-4818.36 8005.41,-4816.88 8070,-4778.41 8096.39,-4762.69 8079.67,-4735.23 8106,-4719.41 8213.62,-4654.74 8362.52,-4659.73 8460.49,-4672.95"/>
<polygon fill="black" stroke="black" points="8460.01,-4676.42 8470.4,-4674.34 8460.98,-4669.49 8460.01,-4676.42"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge156" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7692.8,-4875.89C7833.33,-4884.81 8019.37,-4885.57 8070,-4833.41 8140.74,-4760.51 8051.52,-3091.14 8106,-3005.41 8183.94,-2882.75 8350.18,-2824.81 8458.95,-2799.06"/>
<polygon fill="black" stroke="black" points="8460.01,-2802.41 8468.96,-2796.74 8458.43,-2795.59 8460.01,-2802.41"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge158" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7692.67,-4868.45C7800.34,-4873.71 7943.46,-4880.79 8070,-4887.41 8212.33,-4894.84 8377.78,-4904.03 8475.98,-4909.55"/>
<polygon fill="black" stroke="black" points="8475.97,-4913.05 8486.15,-4910.12 8476.36,-4906.06 8475.97,-4913.05"/>
</g>
<!-- similar_utils._more_user_path -->
<g id="node98" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node98"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8678,-4764.41 8448,-4764.41 8448,-4728.41 8678,-4728.41 8678,-4764.41"/>
<text text-anchor="middle" x="8563" y="-4742.71" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge157" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7692.53,-4868.38C7828.45,-4871.94 8007.8,-4869.05 8070,-4833.41 8095.35,-4818.88 8080.8,-4793.19 8106,-4778.41 8208.63,-4718.18 8347.48,-4717.53 8444.9,-4727.32"/>
<polygon fill="black" stroke="black" points="8444.77,-4730.83 8455.09,-4728.4 8445.51,-4723.87 8444.77,-4730.83"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node99" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node99"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9605.5,-5214.41 9123.5,-5214.41 9123.5,-5174.41 9605.5,-5174.41 9605.5,-5214.41"/>
<text text-anchor="middle" x="9364.5" y="-5187.33" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge159" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M9020.09,-5194.41C9051.89,-5194.41 9083.21,-5194.41 9113.21,-5194.41"/>
<polygon fill="black" stroke="black" points="9113.33,-5197.91 9123.33,-5194.41 9113.33,-5190.91 9113.33,-5197.91"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node96" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node96"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="10093,-5510.41 9860,-5510.41 9860,-5474.41 10093,-5474.41 10093,-5510.41"/>
<text text-anchor="middle" x="9976.5" y="-5487.61" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge160" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9587.09,-5417.46C9616.03,-5421.47 9645.26,-5425.81 9673,-5430.41 9745.02,-5442.33 9826.01,-5459.12 9886.05,-5472.21"/>
<polygon fill="black" stroke="black" points="9885.36,-5475.64 9895.88,-5474.36 9886.86,-5468.8 9885.36,-5475.64"/>
</g>
<!-- build_site._load_ontology -->
<g id="node51" class="node">
<title>build_site._load_ontology</title>
<g id="a_node51"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="6577.5,-3595.41 6264.5,-3595.41 6264.5,-3559.41 6577.5,-3559.41 6577.5,-3595.41"/>
<text text-anchor="middle" x="6421" y="-3571.81" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge59" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6577.73,-3575.69C6981.41,-3572.16 8094.73,-3568.38 9020,-3620.41 9089.55,-3624.32 9166.79,-3631.48 9230.38,-3638.14"/>
<polygon fill="black" stroke="black" points="9230.15,-3641.64 9240.47,-3639.2 9230.89,-3634.67 9230.15,-3641.64"/>
</g>
<!-- build_site._compile_locale -->
<g id="node52" class="node">
<title>build_site._compile_locale</title>
<g id="a_node52"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="6588,-632.41 6254,-632.41 6254,-596.41 6588,-596.41 6588,-632.41"/>
<text text-anchor="middle" x="6421" y="-608.53" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node53" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node53"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="5733,-631.91 5356,-631.91 5356,-590.91 5733,-590.91 5733,-631.91"/>
<text text-anchor="middle" x="5544.5" y="-604.16" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge60" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M5733.1,-612.05C5884.33,-612.57 6095.47,-613.29 6243.62,-613.8"/>
<polygon fill="black" stroke="black" points="6243.72,-617.3 6253.74,-613.83 6243.75,-610.3 6243.72,-617.3"/>
</g>
<!-- build_site._iter_lots -->
<g id="node54" class="node">
<title>build_site._iter_lots</title>
<g id="a_node54"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7751,-1303.91 7299,-1303.91 7299,-1246.91 7751,-1246.91 7751,-1303.91"/>
<text text-anchor="middle" x="7525" y="-1264.51" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge61" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7653.71,-1246.9C7775.19,-1227.79 7955.88,-1221.35 8070,-1318.41 8121.24,-1361.98 8059.19,-1417.1 8106,-1465.41 8151.15,-1512 8211.82,-1541.93 8274.14,-1561.05"/>
<polygon fill="black" stroke="black" points="8273.17,-1564.41 8283.75,-1563.91 8275.16,-1557.7 8273.17,-1564.41"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge62" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7699.54,-1246.9C7822.17,-1237.64 7980.13,-1249.79 8070,-1351.41 8151.46,-1443.51 8048.15,-3455.9 8106,-3564.41 8191.11,-3724.05 8396.44,-3819.97 8500.03,-3859.82"/>
<polygon fill="black" stroke="black" points="8498.84,-3863.11 8509.43,-3863.39 8501.32,-3856.56 8498.84,-3863.11"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge65" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7751.28,-1278.19C7859.39,-1268.11 7983.81,-1238.2 8070,-1161.41 8107.78,-1127.75 8068.59,-1087.47 8106,-1053.41 8181.3,-984.83 8292.14,-957.99 8385.69,-948.46"/>
<polygon fill="black" stroke="black" points="8386.22,-951.92 8395.84,-947.48 8385.55,-944.95 8386.22,-951.92"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge63" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7751.01,-1247.96C7861.74,-1247.53 7988.58,-1268.8 8070,-1351.41 8160.55,-1443.28 8036.58,-1530.68 8106,-1639.41 8197.75,-1783.09 8390.63,-1866.8 8493.68,-1902.99"/>
<polygon fill="black" stroke="black" points="8492.77,-1906.38 8503.36,-1906.35 8495.06,-1899.77 8492.77,-1906.38"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge64" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7751.21,-1258.04C7852.89,-1258.87 7971.92,-1272.35 8070,-1318.41 8090.77,-1328.16 8085.15,-1345.84 8106,-1355.41 8205.46,-1401.05 8330.17,-1405.62 8424.02,-1400.14"/>
<polygon fill="black" stroke="black" points="8424.39,-1403.63 8434.15,-1399.5 8423.95,-1396.64 8424.39,-1403.63"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge66" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7678.26,-1246.88C7796.49,-1233.57 7958.54,-1235.7 8070,-1318.41 8105.26,-1344.57 8070.51,-1384.55 8106,-1410.41 8214.16,-1489.19 8377.8,-1476.3 8476.82,-1458.34"/>
<polygon fill="black" stroke="black" points="8477.61,-1461.76 8486.79,-1456.48 8476.32,-1454.88 8477.61,-1461.76"/>
</g>
<!-- build_site._copy_images -->
<g id="node55" class="node">
<title>build_site._copy_images</title>
<g id="a_node55"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="7688.5,-1396.41 7361.5,-1396.41 7361.5,-1360.41 7688.5,-1360.41 7688.5,-1396.41"/>
<text text-anchor="middle" x="7525" y="-1372.25" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node56" class="node">
<title>build_site._copy_static</title>
<g id="a_node56"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="6549,-578.41 6293,-578.41 6293,-542.41 6549,-542.41 6549,-578.41"/>
<text text-anchor="middle" x="6421" y="-555.11" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node57" class="node">
<title>build_site._load_state</title>
<g id="a_node57"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="5694,-3538.91 5395,-3538.91 5395,-3501.91 5694,-3501.91 5694,-3538.91"/>
<text text-anchor="middle" x="5544.5" y="-3513.96" font-family="Times,serif" font-size="26.18">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge70" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5593.25,-3538.94C5665.39,-3569.72 5800.29,-3638.77 5862,-3745.41 5903.6,-3817.29 5843.07,-4055.12 5898,-4117.41 6224.07,-4487.13 6490.4,-4303.91 6980,-4361.41 7226.66,-4390.37 7914.23,-4387.9 8296.73,-4383.94"/>
<polygon fill="black" stroke="black" points="8296.87,-4387.44 8306.83,-4383.84 8296.79,-4380.44 8296.87,-4387.44"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge71" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M5593.12,-3539.01C5665.08,-3569.9 5799.74,-3639.09 5862,-3745.41 5899.95,-3810.21 5843.19,-4030.08 5898,-4081.41 5982.91,-4160.91 6831.36,-4095.36 6944,-4124.41 6961.32,-4128.87 6963.5,-4135.5 6980,-4142.41 7135.95,-4207.71 7323.69,-4268.02 7432.88,-4301.36"/>
<polygon fill="black" stroke="black" points="7431.96,-4304.74 7442.55,-4304.31 7434,-4298.05 7431.96,-4304.74"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge67" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M5694.34,-3530.11C5849.79,-3540.24 6093.02,-3556.09 6254.44,-3566.61"/>
<polygon fill="black" stroke="black" points="6254.26,-3570.11 6264.47,-3567.27 6254.72,-3563.12 6254.26,-3570.11"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge68" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M5580.12,-3501.82C5649.06,-3462.59 5802.01,-3363.93 5862,-3231.41 5904.6,-3137.3 5826.44,-1446.9 5898,-1372.41 5945.36,-1323.1 6849.31,-1292.93 7288.46,-1281.12"/>
<polygon fill="black" stroke="black" points="7288.85,-1284.61 7298.75,-1280.85 7288.66,-1277.62 7288.85,-1284.61"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge69" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M5580.11,-3501.81C5649.03,-3462.57 5801.93,-3363.89 5862,-3231.41 5902.27,-3142.59 5830.61,-1546.9 5898,-1476.41 5996.72,-1373.14 6952.68,-1371.84 7351.07,-1375.87"/>
<polygon fill="black" stroke="black" points="7351.21,-1379.37 7361.25,-1375.98 7351.28,-1372.37 7351.21,-1379.37"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node58" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node58"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8822,-3555.91 8304,-3555.91 8304,-3510.91 8822,-3510.91 8822,-3555.91"/>
<text text-anchor="middle" x="8563" y="-3525.03" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge72" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M5694.06,-3521.05C6172.22,-3523.11 7676.01,-3529.59 8293.4,-3532.25"/>
<polygon fill="black" stroke="black" points="8293.76,-3535.75 8303.77,-3532.29 8293.79,-3528.75 8293.76,-3535.75"/>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge152" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8814.56,-3555.92C8881.47,-3563.14 8953.63,-3572 9020,-3582.41 9108.02,-3596.2 9207.62,-3617.42 9276.82,-3633.07"/>
<polygon fill="black" stroke="black" points="9276.28,-3636.53 9286.81,-3635.33 9277.83,-3629.71 9276.28,-3636.53"/>
</g>
<!-- build_site._categorise -->
<g id="node59" class="node">
<title>build_site._categorise</title>
<g id="a_node59"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="7995.5,-656.41 7054.5,-656.41 7054.5,-556.41 7995.5,-556.41 7995.5,-656.41"/>
<text text-anchor="middle" x="7525" y="-585.21" font-family="Times,serif" font-size="84.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node60" class="node">
<title>lot_io.get_seller</title>
<g id="a_node60"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8663.5,-892.41 8462.5,-892.41 8462.5,-856.41 8663.5,-856.41 8663.5,-892.41"/>
<text text-anchor="middle" x="8563" y="-868.81" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge73" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7995.72,-624.92C8022.28,-636.95 8047.34,-651.92 8070,-670.41 8109.53,-702.66 8067.93,-745.44 8106,-779.41 8200.59,-863.82 8350.35,-880.47 8452.23,-880.7"/>
<polygon fill="black" stroke="black" points="8452.25,-884.2 8462.24,-880.67 8452.23,-877.2 8452.25,-884.2"/>
</g>
<!-- build_site._render_site -->
<g id="node61" class="node">
<title>build_site._render_site</title>
<g id="a_node61"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="6944,-1727.91 5898,-1727.91 5898,-1620.91 6944,-1620.91 6944,-1727.91"/>
<text text-anchor="middle" x="6421" y="-1651.78" font-family="Times,serif" font-size="90.16">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge74" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6944.28,-1667.18C7647.52,-1660.37 8832.79,-1660.29 9020,-1733.41 9380.2,-1874.08 9493.97,-1965.65 9673,-2308.41 9928.26,-2797.1 9970.47,-4672.17 9975.03,-4925.11"/>
<polygon fill="black" stroke="black" points="9971.54,-4925.37 9975.21,-4935.31 9978.54,-4925.25 9971.54,-4925.37"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge77" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6824.68,-1620.81C6870.56,-1599.23 6912.18,-1569.96 6944,-1530.41 6991.08,-1471.88 6925.5,-907.08 6980,-855.41 7033.31,-804.86 8102.51,-852.07 8452.3,-868.95"/>
<polygon fill="black" stroke="black" points="8452.28,-872.45 8462.44,-869.44 8452.62,-865.46 8452.28,-872.45"/>
</g>
<!-- build_site.build_page -->
<g id="node62" class="node">
<title>build_site.build_page</title>
<g id="a_node62"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="7994.5,-2296.41 7055.5,-2296.41 7055.5,-2194.41 7994.5,-2194.41 7994.5,-2296.41"/>
<text text-anchor="middle" x="7525" y="-2223.86" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge75" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6602.29,-1727.96C6718.36,-1771.99 6862.31,-1846.35 6944,-1962.41 7001.79,-2044.5 6907.25,-2116.22 6980,-2185.41 6999.84,-2204.28 7022.11,-2219.66 7046.01,-2232.1"/>
<polygon fill="black" stroke="black" points="7044.74,-2235.37 7055.25,-2236.72 7047.87,-2229.12 7044.74,-2235.37"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node63" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node63"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8691.5,-2193.41 8434.5,-2193.41 8434.5,-2157.41 8691.5,-2157.41 8691.5,-2193.41"/>
<text text-anchor="middle" x="8563" y="-2171.24" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge76" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6528.6,-1727.94C6638.74,-1780.75 6817.08,-1859.36 6980,-1900.41 7452.56,-2019.45 7593.17,-1918.82 8070,-2019.41 8231.79,-2053.53 8415.97,-2119.51 8506.2,-2153.7"/>
<polygon fill="black" stroke="black" points="8505.09,-2157.02 8515.68,-2157.3 8507.58,-2150.48 8505.09,-2157.02"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge78" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7994.69,-2238.09C8022.25,-2224.62 8047.75,-2207.33 8070,-2185.41 8161.87,-2094.86 8038.27,-2007.19 8106,-1897.41 8185.82,-1768.04 8343.34,-1681.43 8450.67,-1634.55"/>
<polygon fill="black" stroke="black" points="8452.13,-1637.73 8459.92,-1630.55 8449.35,-1631.3 8452.13,-1637.73"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge79" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7829.86,-2296.52C7921.82,-2327.53 8013.35,-2377.35 8070,-2457.41 8141.09,-2557.86 8047.23,-3456.28 8106,-3564.41 8192.52,-3723.56 8397.66,-3819.85 8500.71,-3859.82"/>
<polygon fill="black" stroke="black" points="8499.46,-3863.09 8510.05,-3863.4 8501.96,-3856.56 8499.46,-3863.09"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge80" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7977.77,-2296.43C8123.01,-2312.83 8275.31,-2330.03 8387.99,-2342.75"/>
<polygon fill="black" stroke="black" points="8387.75,-2346.25 8398.08,-2343.89 8388.53,-2339.29 8387.75,-2346.25"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge81" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7994.74,-2213.73C8151.01,-2203.17 8313.31,-2192.21 8424.06,-2184.73"/>
<polygon fill="black" stroke="black" points="8424.54,-2188.2 8434.28,-2184.03 8424.07,-2181.22 8424.54,-2188.2"/>
</g>
<!-- build_site.main -->
<g id="node64" class="node">
<title>build_site.main</title>
<g id="a_node64"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5155.5,-567.91 4737.5,-567.91 4737.5,-502.91 5155.5,-502.91 5155.5,-567.91"/>
<text text-anchor="middle" x="4946.5" y="-522.35" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge92" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M4953.31,-568.15C4982.88,-735.83 5118.08,-1515.39 5191,-2158.41 5196.86,-2210.12 5189.05,-2589.79 5227,-2625.41 5300.68,-2694.55 6697.5,-2673.64 7276.16,-2661.93"/>
<polygon fill="black" stroke="black" points="7276.38,-2665.43 7286.31,-2661.72 7276.24,-2658.43 7276.38,-2665.43"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge82" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5155.72,-566.78C5179.74,-570.15 5203.89,-573.43 5227,-576.41 5265.42,-581.35 5306.51,-586.2 5345.94,-590.65"/>
<polygon fill="black" stroke="black" points="5345.6,-594.14 5355.93,-591.78 5346.38,-587.18 5345.6,-594.14"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge83" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5155.83,-540.85C5179.83,-541.41 5203.95,-541.94 5227,-542.41 5609.43,-550.08 6060.89,-556.05 6282.8,-558.78"/>
<polygon fill="black" stroke="black" points="6282.83,-562.28 6292.87,-558.9 6282.91,-555.28 6282.83,-562.28"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge84" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M4953.84,-568.1C4986.03,-735.51 5132.04,-1513.96 5191,-2158.41 5201.87,-2277.2 5177.04,-3123.08 5227,-3231.41 5285.5,-3358.24 5428.39,-3454.46 5500.45,-3496.76"/>
<polygon fill="black" stroke="black" points="5498.89,-3499.91 5509.3,-3501.9 5502.4,-3493.85 5498.89,-3499.91"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge85" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5062.76,-502.87C5112.79,-490.35 5172.34,-477.58 5227,-471.41 5985.78,-385.64 6183.57,-463.84 6944,-533.41 7009.74,-539.42 7079.53,-547.09 7147.05,-555.19"/>
<polygon fill="black" stroke="black" points="7146.65,-558.67 7157,-556.39 7147.49,-551.72 7146.65,-558.67"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge86" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M4950.52,-568.02C4962.73,-681.38 5018.23,-1062.68 5227,-1272.41 5420.15,-1466.44 5709.91,-1566.84 5955.5,-1618.77"/>
<polygon fill="black" stroke="black" points="5954.81,-1622.21 5965.31,-1620.83 5956.24,-1615.36 5954.81,-1622.21"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge87" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M4960.96,-502.85C4993.73,-428.33 5085.47,-245.94 5227,-169.41 5776.45,127.74 7768.52,-44.01 8381.35,-105.36"/>
<polygon fill="black" stroke="black" points="8381.3,-108.87 8391.6,-106.39 8382,-101.9 8381.3,-108.87"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node66" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node66"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="5862,-533.91 5227,-533.91 5227,-480.91 5862,-480.91 5862,-533.91"/>
<text text-anchor="middle" x="5544.5" y="-497.2" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge88" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5155.53,-525.63C5175.45,-524.7 5195.95,-523.73 5216.64,-522.76"/>
<polygon fill="black" stroke="black" points="5216.99,-526.25 5226.81,-522.28 5216.66,-519.26 5216.99,-526.25"/>
</g>
<!-- price_utils.load_price_model -->
<g id="node67" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node67"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="6655.5,-3331.41 6186.5,-3331.41 6186.5,-3289.41 6655.5,-3289.41 6655.5,-3331.41"/>
<text text-anchor="middle" x="6421" y="-3302.32" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge89" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M4953.6,-568.12C4984.62,-735.64 5125.76,-1514.57 5191,-2158.41 5198.61,-2233.46 5177.47,-2779.5 5227,-2836.41 5415.74,-3053.23 5666.98,-2748.2 5862,-2959.41 5959.39,-3064.88 5793.77,-3181.68 5898,-3280.41 5938.5,-3318.77 6060.46,-3327.21 6176.3,-3325.62"/>
<polygon fill="black" stroke="black" points="6176.47,-3329.11 6186.41,-3325.45 6176.36,-3322.11 6176.47,-3329.11"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node68" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node68"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6781.5,-298.91 6060.5,-298.91 6060.5,-239.91 6781.5,-239.91 6781.5,-298.91"/>
<text text-anchor="middle" x="6421" y="-257.72" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge90" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5000.72,-502.88C5055.39,-471.14 5144,-424.24 5227,-400.41 5496,-323.15 5811.15,-290.9 6049.96,-277.7"/>
<polygon fill="black" stroke="black" points="6050.41,-281.18 6060.21,-277.14 6050.03,-274.19 6050.41,-281.18"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node69" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node69"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="7895,-153.41 7155,-153.41 7155,-95.41 7895,-95.41 7895,-153.41"/>
<text text-anchor="middle" x="7525" y="-113.12" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge91" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M4972.58,-502.83C5017.02,-447.9 5115.48,-338.14 5227,-290.41 5561.78,-147.1 6583.17,-123.69 7144.52,-122.1"/>
<polygon fill="black" stroke="black" points="7144.82,-125.6 7154.81,-122.08 7144.8,-118.6 7144.82,-125.6"/>
</g>
<!-- config_utils.load_config -->
<g id="node70" class="node">
<title>config_utils.load_config</title>
<g id="a_node70"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10193,-655.91 9760,-655.91 9760,-608.91 10193,-608.91 10193,-655.91"/>
<text text-anchor="middle" x="9976.5" y="-623.91" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge93" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5014.23,-502.83C5069.7,-477.61 5151.48,-444.65 5227,-430.41 5748.09,-332.14 5889.73,-414.41 6420,-414.41 6420,-414.41 6420,-414.41 8564,-414.41 9057,-414.41 9201.43,-294.62 9673,-438.41 9781.99,-471.63 9889.42,-556.18 9942.05,-601.92"/>
<polygon fill="black" stroke="black" points="9939.89,-604.68 9949.72,-608.64 9944.51,-599.42 9939.89,-604.68"/>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge98" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6655.56,-3307.49C7273.49,-3300.39 8911.48,-3285.84 9020,-3329.41 9175.49,-3391.83 9301.65,-3561.1 9346.2,-3626.82"/>
<polygon fill="black" stroke="black" points="9343.47,-3629.02 9351.94,-3635.38 9349.28,-3625.13 9343.47,-3629.02"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge100" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6781.69,-294.86C6841.9,-299.13 6905.59,-303.63 6969.34,-308.15"/>
<polygon fill="black" stroke="black" points="6969.35,-311.66 6979.57,-308.87 6969.84,-304.67 6969.35,-311.66"/>
</g>
<!-- price_utils.predict_price -->
<g id="node73" class="node">
<title>price_utils.predict_price</title>
<g id="a_node73"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7730,-290.91 7320,-290.91 7320,-247.91 7730,-247.91 7730,-290.91"/>
<text text-anchor="middle" x="7525" y="-261.26" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge101" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6781.69,-269.41C6956.19,-269.41 7159.92,-269.41 7309.76,-269.41"/>
<polygon fill="black" stroke="black" points="7310,-272.91 7320,-269.41 7310,-265.91 7310,-272.91"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node74" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node74"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8756.5,-248.91 8369.5,-248.91 8369.5,-209.91 8756.5,-209.91 8756.5,-248.91"/>
<text text-anchor="middle" x="8563" y="-222.51" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge102" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6781.71,-246.78C6847.64,-243.38 6915.87,-240.37 6980,-238.41 7475.22,-223.25 8058.03,-224.98 8359.1,-227.33"/>
<polygon fill="black" stroke="black" points="8359.23,-230.83 8369.25,-227.41 8359.28,-223.83 8359.23,-230.83"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node76" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node76"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9621,-200.41 9108,-200.41 9108,-162.41 9621,-162.41 9621,-200.41"/>
<text text-anchor="middle" x="9364.5" y="-174.68" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge103" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6729.84,-239.9C6811.12,-233.09 6898.81,-226.61 6980,-222.41 7747.87,-182.61 8656.56,-178.98 9097.25,-179.98"/>
<polygon fill="black" stroke="black" points="9097.57,-183.49 9107.57,-180.01 9097.58,-176.49 9097.57,-183.49"/>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge104" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7895.27,-124.41C8056.99,-124.41 8239.85,-124.41 8373.11,-124.41"/>
<polygon fill="black" stroke="black" points="8373.43,-127.91 8383.43,-124.41 8373.43,-120.91 8373.43,-127.91"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node71" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node71"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7639.5,-1152.41 7410.5,-1152.41 7410.5,-1116.41 7639.5,-1116.41 7639.5,-1152.41"/>
<text text-anchor="middle" x="7525" y="-1130.36" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge94" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7639.58,-1129.43C7777.15,-1125.39 7999.27,-1125.83 8070,-1166.41 8095.02,-1180.76 8082.32,-1203.94 8106,-1220.41 8215.18,-1296.34 8370.85,-1319.33 8469.13,-1326.04"/>
<polygon fill="black" stroke="black" points="8469.14,-1329.54 8479.34,-1326.69 8469.59,-1322.56 8469.14,-1329.54"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node72" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node72"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6538.5,-3892.41 6303.5,-3892.41 6303.5,-3856.41 6538.5,-3856.41 6538.5,-3892.41"/>
<text text-anchor="middle" x="6421" y="-3870.36" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge95" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6538.52,-3873.74C6644.93,-3874.98 6806.18,-3881.49 6944,-3906.41 6960.46,-3909.38 6963.52,-3914.52 6980,-3917.41 7123.28,-3942.45 7290.79,-3947.15 7401.67,-3946.91"/>
<polygon fill="black" stroke="black" points="7401.9,-3950.41 7411.89,-3946.87 7401.87,-3943.41 7401.9,-3950.41"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node75" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node75"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10244,-206.41 9709,-206.41 9709,-156.41 10244,-156.41 10244,-206.41"/>
<text text-anchor="middle" x="9976.5" y="-171.72" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge99" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9621.1,-181.41C9646.74,-181.41 9672.85,-181.41 9698.69,-181.41"/>
<polygon fill="black" stroke="black" points="9698.96,-184.91 9708.96,-181.41 9698.96,-177.91 9698.96,-184.91"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node77" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node77"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7674.5,-5264.41 7375.5,-5264.41 7375.5,-5228.41 7674.5,-5228.41 7674.5,-5264.41"/>
<text text-anchor="middle" x="7525" y="-5240.53" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node78" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node78"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8784,-5443.41 8342,-5443.41 8342,-5407.41 8784,-5407.41 8784,-5443.41"/>
<text text-anchor="middle" x="8563" y="-5419.81" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node79" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node79"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7779,-5325.91 7271,-5325.91 7271,-5282.91 7779,-5282.91 7779,-5325.91"/>
<text text-anchor="middle" x="7525" y="-5296.26" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge105" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7779.04,-5311.15C8181.62,-5319.3 8931.77,-5322.98 9020,-5240.41 9073.7,-5190.15 9043.24,-4983.84 9056,-4911.41 9143.91,-4412.32 9315.39,-3816.88 9355.14,-3681.64"/>
<polygon fill="black" stroke="black" points="9358.6,-3682.26 9358.07,-3671.68 9351.89,-3680.28 9358.6,-3682.26"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge106" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7779.04,-5320.44C7900.08,-5322.24 8027.74,-5313.56 8070,-5273.41 8177.6,-5171.17 7998.52,-5043.76 8106,-4941.41 8157.27,-4892.58 8358.84,-4898.73 8476.11,-4906.92"/>
<polygon fill="black" stroke="black" points="8475.92,-4910.41 8486.15,-4907.64 8476.42,-4903.43 8475.92,-4910.41"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node140" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node140"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9489.5,-4956.41 9239.5,-4956.41 9239.5,-4920.41 9489.5,-4920.41 9489.5,-4956.41"/>
<text text-anchor="middle" x="9364.5" y="-4932.25" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge242" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8639.58,-4916.67C8774.8,-4920.73 9059.81,-4929.29 9229.08,-4934.37"/>
<polygon fill="black" stroke="black" points="9229.21,-4937.88 9239.31,-4934.68 9229.42,-4930.88 9229.21,-4937.88"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node81" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node81"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9590.5,-5335.41 9138.5,-5335.41 9138.5,-5291.41 9590.5,-5291.41 9590.5,-5335.41"/>
<text text-anchor="middle" x="9364.5" y="-5305.09" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge107" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9590.56,-5303.22C9619.24,-5296.67 9647.46,-5287.4 9673,-5274.41 9811.24,-5204.08 9920.08,-5044.1 9959.52,-4980.35"/>
<polygon fill="black" stroke="black" points="9962.6,-4982.03 9964.83,-4971.67 9956.63,-4978.38 9962.6,-4982.03"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node82" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node82"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7772,-4769.91 7278,-4769.91 7278,-4720.91 7772,-4720.91 7772,-4769.91"/>
<text text-anchor="middle" x="7525" y="-4736.23" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge108" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7772.27,-4760.02C7895.41,-4761.6 8027.2,-4752.65 8070,-4711.41 8128.05,-4655.46 8072,-4423.5 8106,-4350.41 8203.92,-4139.89 8436.26,-3966.5 8525.88,-3905.2"/>
<polygon fill="black" stroke="black" points="8528.04,-3907.96 8534.35,-3899.45 8524.11,-3902.17 8528.04,-3907.96"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge109" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7703.38,-4769.91C7814.81,-4776.98 7958.11,-4770.31 8070,-4711.41 8092.97,-4699.31 8082.66,-4676.78 8106,-4665.41 8197.3,-4620.92 8919.53,-4650.59 9020,-4665.41 9374.8,-4717.71 9780.53,-4873.72 9922.87,-4931.53"/>
<polygon fill="black" stroke="black" points="9921.68,-4934.83 9932.26,-4935.36 9924.32,-4928.35 9921.68,-4934.83"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge110" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7772.2,-4754.14C7892.53,-4753.69 8021.67,-4744.67 8070,-4711.41 8101.78,-4689.53 8074.11,-4654.12 8106,-4632.41 8274.11,-4517.92 8856.24,-4705.04 9020,-4584.41 9331.35,-4355.05 9360.79,-3812.17 9363.32,-3681.88"/>
<polygon fill="black" stroke="black" points="9366.83,-3681.61 9363.48,-3671.55 9359.83,-3681.5 9366.83,-3681.61"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge112" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7772.12,-4761.32C7896.09,-4763.41 8028.74,-4754.52 8070,-4711.41 8145.22,-4632.8 8031.6,-2832.79 8106,-2753.41 8202.61,-2650.33 8385.03,-2672.12 8487.43,-2695.04"/>
<polygon fill="black" stroke="black" points="8486.86,-2698.5 8497.39,-2697.33 8488.43,-2691.68 8486.86,-2698.5"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge113" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7772.16,-4761.36C7896.14,-4763.45 8028.79,-4754.57 8070,-4711.41 8156.1,-4621.22 8027.58,-2564.33 8106,-2467.41 8172.32,-2385.43 8288.61,-2359.59 8387.15,-2354.03"/>
<polygon fill="black" stroke="black" points="8387.42,-2357.52 8397.23,-2353.53 8387.07,-2350.53 8387.42,-2357.52"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge114" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7772.29,-4750.09C7865.98,-4754.67 7973.39,-4763.31 8070,-4779.41 8227.85,-4805.71 8407.94,-4862.12 8500.27,-4893.05"/>
<polygon fill="black" stroke="black" points="8499.41,-4896.45 8510,-4896.32 8501.64,-4889.82 8499.41,-4896.45"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge111" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7772.12,-4756.97C7893.7,-4757.46 8024.05,-4748.45 8070,-4711.41 8115.67,-4674.58 8059.84,-4620.62 8106,-4584.41 8185.95,-4521.67 8948.04,-4623.16 9020,-4551.41 9056.42,-4515.09 9045.13,-3676.67 9056,-3626.41 9120.67,-3327.51 9295.61,-2995.37 9348.29,-2899.59"/>
<polygon fill="black" stroke="black" points="9351.5,-2901.01 9353.27,-2890.57 9345.37,-2897.63 9351.5,-2901.01"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node84" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node84"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7740.5,-4940.41 7309.5,-4940.41 7309.5,-4896.41 7740.5,-4896.41 7740.5,-4940.41"/>
<text text-anchor="middle" x="7525" y="-4910.09" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge115" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7740.59,-4934.13C7872.23,-4938.64 8024.08,-4932.87 8070,-4887.41 8112.5,-4845.33 8081.66,-4405.03 8106,-4350.41 8200.38,-4138.58 8434.33,-3966.28 8525.14,-3905.22"/>
<polygon fill="black" stroke="black" points="8527.35,-3907.96 8533.72,-3899.5 8523.46,-3902.13 8527.35,-3907.96"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge116" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7740.83,-4906.6C7850.15,-4900.67 7985.15,-4893.48 8106,-4887.41 8156.77,-4884.85 8980.11,-4875.91 9020,-4844.41 9214.59,-4690.71 9337.2,-3848.56 9359.73,-3682.02"/>
<polygon fill="black" stroke="black" points="9363.27,-3682.01 9361.13,-3671.63 9356.33,-3681.08 9363.27,-3682.01"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge119" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7740.66,-4917.58C7968.14,-4916.7 8316.14,-4915.35 8476.12,-4914.74"/>
<polygon fill="black" stroke="black" points="8476.39,-4918.24 8486.38,-4914.7 8476.37,-4911.24 8476.39,-4918.24"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge117" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7672.05,-4940.43C7786.44,-4950.75 7946.36,-4949.49 8070,-4887.41 8092.27,-4876.22 8083.64,-4855.42 8106,-4844.41 8197.18,-4799.49 8948.53,-4878.67 9020,-4806.41 9066.12,-4759.77 9042.4,-3690.57 9056,-3626.41 9119.41,-3327.24 9295.22,-2995.29 9348.2,-2899.57"/>
<polygon fill="black" stroke="black" points="9351.41,-2901 9353.21,-2890.56 9345.29,-2897.59 9351.41,-2901"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge118" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7740.5,-4928.51C7869.06,-4930.34 8017.47,-4923.71 8070,-4887.41 8102.41,-4865.01 8073.36,-4828.46 8106,-4806.41 8190.2,-4749.5 8948.91,-4846.02 9020,-4773.41 9113.72,-4677.68 8964.78,-2460.51 9056,-2362.41 9111.57,-2302.65 9209.81,-2304.42 9280.31,-2315.68"/>
<polygon fill="black" stroke="black" points="9280.06,-2319.18 9290.51,-2317.4 9281.23,-2312.28 9280.06,-2319.18"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node86" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node86"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9637,-5043.91 9092,-5043.91 9092,-4998.91 9637,-4998.91 9637,-5043.91"/>
<text text-anchor="middle" x="9364.5" y="-5013.03" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node87" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node87"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="10100.5,-785.41 9852.5,-785.41 9852.5,-749.41 10100.5,-749.41 10100.5,-785.41"/>
<text text-anchor="middle" x="9976.5" y="-763.36" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge120" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9630.72,-4998.89C9646.42,-4990.05 9660.77,-4979.04 9673,-4965.41 9969.66,-4634.77 9975.67,-1144.5 9975.53,-795.49"/>
<polygon fill="black" stroke="black" points="9979.03,-795.45 9975.53,-785.45 9972.03,-795.45 9979.03,-795.45"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node88" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node88"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9518.5,-5146.41 9210.5,-5146.41 9210.5,-5110.41 9518.5,-5110.41 9518.5,-5146.41"/>
<text text-anchor="middle" x="9364.5" y="-5122.81" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node89" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node89"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7971.5,-5112.41 7078.5,-5112.41 7078.5,-5050.41 7971.5,-5050.41 7971.5,-5112.41"/>
<text text-anchor="middle" x="7525" y="-5069.21" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge121" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7971.56,-5081.41C8016.4,-5073.22 8052.04,-5060.51 8070,-5041.41 8129.82,-4977.76 8064.41,-1974.2 8106,-1897.41 8177.51,-1765.37 8333.88,-1680.29 8443.48,-1634.4"/>
<polygon fill="black" stroke="black" points="8445.03,-1637.54 8452.94,-1630.49 8442.36,-1631.08 8445.03,-1637.54"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge122" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7971.77,-5080.57C8016.28,-5072.48 8051.78,-5060.02 8070,-5041.41 8123.78,-4986.46 8075.23,-4420.86 8106,-4350.41 8198.89,-4137.67 8434.16,-3965.65 8525.22,-3904.95"/>
<polygon fill="black" stroke="black" points="8527.16,-3907.86 8533.57,-3899.43 8523.3,-3902.03 8527.16,-3907.86"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge123" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7971.87,-5068.46C8397.33,-5054.17 8979.57,-5028.69 9020,-4995.41 9074.18,-4950.79 9315.23,-3871.39 9357.24,-3681.73"/>
<polygon fill="black" stroke="black" points="9360.72,-3682.22 9359.46,-3671.7 9353.89,-3680.71 9360.72,-3682.22"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge126" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7684.28,-5112.41C7802.29,-5126.22 7961.2,-5124 8070,-5041.41 8107.62,-5012.84 8068.17,-4969.7 8106,-4941.41 8162.41,-4899.22 8360.1,-4902.58 8475.83,-4908.59"/>
<polygon fill="black" stroke="black" points="8475.91,-4912.1 8486.08,-4909.14 8476.29,-4905.11 8475.91,-4912.1"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge124" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7971.5,-5090.91C8268.81,-5093.82 8668.26,-5091.12 9020,-5066.41 9082.81,-5061.99 9151.7,-5053.66 9211.19,-5045.36"/>
<polygon fill="black" stroke="black" points="9212,-5048.78 9221.41,-5043.92 9211.02,-5041.85 9212,-5048.78"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge125" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7971.66,-5100.01C8017.03,-5101.62 8062.43,-5103.13 8106,-5104.41 8498.42,-5115.93 8959.89,-5123.1 9199.86,-5126.35"/>
<polygon fill="black" stroke="black" points="9200.02,-5129.86 9210.07,-5126.49 9200.11,-5122.86 9200.02,-5129.86"/>
</g>
<!-- debug_dump.main -->
<g id="node90" class="node">
<title>debug_dump.main</title>
<g id="a_node90"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6659,-5335.41 6183,-5335.41 6183,-5273.41 6659,-5273.41 6659,-5335.41"/>
<text text-anchor="middle" x="6421" y="-5292.21" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge127" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6659.22,-5290.92C6758.36,-5285.36 6874.75,-5278.94 6980,-5273.41 7109.69,-5266.58 7256.79,-5259.31 7365.3,-5254.03"/>
<polygon fill="black" stroke="black" points="7365.53,-5257.53 7375.35,-5253.55 7365.19,-5250.54 7365.53,-5257.53"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge128" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6555.84,-5335.44C6668.33,-5359.94 6833.7,-5392.26 6980,-5406.41 7458.82,-5452.71 8022.91,-5444.55 8331.5,-5434.78"/>
<polygon fill="black" stroke="black" points="8332.03,-5438.26 8341.92,-5434.44 8331.81,-5431.26 8332.03,-5438.26"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge129" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6659.08,-5304.41C6835.96,-5304.41 7077.59,-5304.41 7260.51,-5304.41"/>
<polygon fill="black" stroke="black" points="7260.54,-5307.91 7270.54,-5304.41 7260.54,-5300.91 7260.54,-5307.91"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge130" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6659.13,-5319.97C6758.25,-5325.75 6874.66,-5331.58 6980,-5334.41 7767.01,-5355.55 8700.67,-5333.67 9128.34,-5321.03"/>
<polygon fill="black" stroke="black" points="9128.46,-5324.53 9138.35,-5320.74 9128.25,-5317.53 9128.46,-5324.53"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge131" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6659.03,-5327C6760.89,-5323.16 6872.68,-5298.4 6944,-5221.41 7010.97,-5149.11 6909.66,-4848.43 6980,-4779.41 7021.3,-4738.87 7147.32,-4729.31 7267.67,-4730.38"/>
<polygon fill="black" stroke="black" points="7267.77,-4733.88 7277.81,-4730.49 7267.85,-4726.88 7267.77,-4733.88"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge132" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6659.21,-5324.5C6759.85,-5319.86 6870.62,-5295.16 6944,-5221.41 7018.22,-5146.81 6904.62,-5060.82 6980,-4987.41 7088.46,-4881.78 7272.1,-4880.76 7395.66,-4895.14"/>
<polygon fill="black" stroke="black" points="7395.58,-4898.66 7405.93,-4896.39 7396.43,-4891.71 7395.58,-4898.66"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge133" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6618.52,-5335.42C6725.02,-5341.29 6853.06,-5329.35 6944,-5259.41 6981.44,-5230.61 6943.38,-5189.25 6980,-5159.41 7006.76,-5137.6 7036.82,-5120.4 7068.71,-5106.93"/>
<polygon fill="black" stroke="black" points="7070.27,-5110.08 7078.21,-5103.06 7067.63,-5103.6 7070.27,-5110.08"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node91" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node91"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7731,-4072.41 7319,-4072.41 7319,-4034.41 7731,-4034.41 7731,-4072.41"/>
<text text-anchor="middle" x="7525" y="-4046.68" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- embed.main -->
<g id="node93" class="node">
<title>embed.main</title>
<g id="a_node93"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6509,-2512.41 6333,-2512.41 6333,-2476.41 6509,-2476.41 6509,-2512.41"/>
<text text-anchor="middle" x="6421" y="-2488.25" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge137" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6509.39,-2494.41C6680.99,-2494.41 7066.41,-2494.41 7309.73,-2494.41"/>
<polygon fill="black" stroke="black" points="7309.76,-2497.91 7319.76,-2494.41 7309.76,-2490.91 7309.76,-2497.91"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge138" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9439.07,-2407.45C9509.92,-2419.95 9614.68,-2424.71 9673,-2362.41 9736.64,-2294.41 9649.28,-757.87 9709,-686.41 9720.75,-672.35 9735.06,-661.31 9750.89,-652.7"/>
<polygon fill="black" stroke="black" points="9752.5,-655.81 9759.83,-648.16 9749.33,-649.57 9752.5,-655.81"/>
</g>
<!-- caption_io.write_caption -->
<g id="node95" class="node">
<title>caption_io.write_caption</title>
<g id="a_node95"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="7691.5,-2958.41 7358.5,-2958.41 7358.5,-2922.41 7691.5,-2922.41 7691.5,-2958.41"/>
<text text-anchor="middle" x="7525" y="-2934.25" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge146" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7691.72,-2938.44C8057.46,-2935.4 8910.08,-2935.97 9020,-3005.41 9254.97,-3153.84 9338.97,-3520.24 9358.63,-3625.01"/>
<polygon fill="black" stroke="black" points="9355.24,-3625.92 9360.48,-3635.13 9362.12,-3624.66 9355.24,-3625.92"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge147" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7691.65,-2951.23C7829.3,-2956.78 8011.71,-2955.06 8070,-2912.41 8106.77,-2885.5 8069.6,-2843.82 8106,-2816.41 8210.27,-2737.89 8368.61,-2745.36 8468.61,-2760.76"/>
<polygon fill="black" stroke="black" points="8468.28,-2764.25 8478.7,-2762.37 8469.38,-2757.34 8468.28,-2764.25"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge149" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7691.9,-2934.27C8062.99,-2920.53 8951.47,-2887.65 9257.66,-2876.32"/>
<polygon fill="black" stroke="black" points="9258,-2879.81 9267.87,-2875.94 9257.75,-2872.82 9258,-2879.81"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge148" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M7689.64,-2958.41C7800.69,-2964.37 7948.8,-2959.84 8070,-2912.41 8089.39,-2904.81 8086.72,-2890.29 8106,-2882.41 8483.24,-2728.08 8658.92,-2996.49 9020,-2807.41 9194.36,-2716.1 9313.42,-2494.22 9350.89,-2416.69"/>
<polygon fill="black" stroke="black" points="9354.1,-2418.09 9355.25,-2407.56 9347.79,-2415.07 9354.1,-2418.09"/>
</g>
<!-- caption._identify_size -->
<g id="node100" class="node">
<title>caption._identify_size</title>
<g id="a_node100"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="8691.5,-3050.41 8434.5,-3050.41 8434.5,-3014.41 8691.5,-3014.41 8691.5,-3050.41"/>
<text text-anchor="middle" x="8563" y="-3026.71" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node101" class="node">
<title>caption._prepare_image</title>
<g id="a_node101"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="7742,-3060.41 7308,-3060.41 7308,-3014.41 7742,-3014.41 7742,-3060.41"/>
<text text-anchor="middle" x="7525" y="-3028.97" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge161" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M7742.23,-3036.36C7947.46,-3035.37 8249.73,-3033.91 8424.12,-3033.07"/>
<polygon fill="black" stroke="black" points="8424.15,-3036.57 8434.13,-3033.02 8424.12,-3029.57 8424.15,-3036.57"/>
</g>
<!-- caption._guess_chat -->
<g id="node102" class="node">
<title>caption._guess_chat</title>
<g id="a_node102"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="8659,-3104.41 8467,-3104.41 8467,-3068.41 8659,-3068.41 8659,-3104.41"/>
<text text-anchor="middle" x="8563" y="-3082.24" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node103" class="node">
<title>caption.caption_file</title>
<g id="a_node103"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="6724,-3022.91 6118,-3022.91 6118,-2949.91 6724,-2949.91 6724,-3022.91"/>
<text text-anchor="middle" x="6421" y="-2971.42" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge162" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6599.06,-2949.89C6713.35,-2937.48 6856.51,-2944.77 6944,-3033.41 7017.27,-3107.64 6905.76,-3428.13 6980,-3501.41 7140.61,-3659.93 8751.69,-3658.76 9230.18,-3654.86"/>
<polygon fill="black" stroke="black" points="9230.28,-3658.36 9240.25,-3654.78 9230.22,-3651.36 9230.28,-3658.36"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge164" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6534.2,-2949.9C6645.93,-2915.12 6822.97,-2864.19 6980,-2837.41 7544.51,-2741.11 8235.44,-2720.76 8475.19,-2716.51"/>
<polygon fill="black" stroke="black" points="8475.3,-2720.01 8485.24,-2716.34 8475.18,-2713.01 8475.3,-2720.01"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge163" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6724.24,-2990.7C7209.45,-2994.79 8191.78,-2991.58 9020,-2916.41 9099.88,-2909.16 9189.78,-2897.51 9257.57,-2888.03"/>
<polygon fill="black" stroke="black" points="9258.42,-2891.44 9267.83,-2886.58 9257.44,-2884.51 9258.42,-2891.44"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge165" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M6724.22,-2973.79C6924.51,-2965.43 7180.31,-2954.75 7347.98,-2947.75"/>
<polygon fill="black" stroke="black" points="7348.3,-2951.24 7358.14,-2947.33 7348,-2944.25 7348.3,-2951.24"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge166" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M6724.22,-3000.39C6905.37,-3008.78 7131.94,-3019.26 7297.63,-3026.93"/>
<polygon fill="black" stroke="black" points="7297.81,-3030.44 7307.96,-3027.41 7298.13,-3023.45 7297.81,-3030.44"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge167" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M6724.32,-2978.24C6798.81,-2985.65 6876.52,-3001.83 6944,-3033.41 6964.5,-3042.99 6959.14,-3060.63 6980,-3069.41 7115.13,-3126.23 8124.97,-3100.1 8456.73,-3089.86"/>
<polygon fill="black" stroke="black" points="8456.94,-3093.35 8466.82,-3089.54 8456.72,-3086.36 8456.94,-3093.35"/>
</g>
<!-- caption.main -->
<g id="node104" class="node">
<title>caption.main</title>
<g id="a_node104"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="5637,-3004.41 5452,-3004.41 5452,-2968.41 5637,-2968.41 5637,-3004.41"/>
<text text-anchor="middle" x="5544.5" y="-2980.25" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge168" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M5637.02,-2986.41C5747.92,-2986.41 5940.62,-2986.41 6107.09,-2986.41"/>
<polygon fill="black" stroke="black" points="6107.51,-2989.91 6117.51,-2986.41 6107.51,-2982.91 6107.51,-2989.91"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node105" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node105"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="5039.5,-4186.41 4853.5,-4186.41 4853.5,-4150.41 5039.5,-4150.41 5039.5,-4186.41"/>
<text text-anchor="middle" x="4946.5" y="-4164.71" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node106" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node106"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-4295.41 1260.5,-4295.41 1260.5,-4259.41 1490.5,-4259.41 1490.5,-4295.41"/>
<text text-anchor="middle" x="1375.5" y="-4272.11" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node107" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node107"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5130,-3833.91 4763,-3833.91 4763,-3796.91 5130,-3796.91 5130,-3833.91"/>
<text text-anchor="middle" x="4946.5" y="-3808.96" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node108" class="node">
<title>tg_client._write_md</title>
<g id="a_node108"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5613,-3964.41 5476,-3964.41 5476,-3928.41 5613,-3928.41 5613,-3964.41"/>
<text text-anchor="middle" x="5544.5" y="-3943.16" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge169" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5613.05,-3956.84C5681.62,-3963.74 5787.96,-3963.9 5862,-3914.41 5890.1,-3895.62 5869.53,-3865.63 5898,-3847.41 6016.48,-3771.55 6182.77,-3775.8 6295.59,-3790.97"/>
<polygon fill="black" stroke="black" points="6295.27,-3794.46 6305.66,-3792.37 6296.23,-3787.52 6295.27,-3794.46"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node109" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node109"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7764.5,-4133.91 7285.5,-4133.91 7285.5,-4090.91 7764.5,-4090.91 7764.5,-4133.91"/>
<text text-anchor="middle" x="7525" y="-4104.26" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge170" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7764.79,-4133.84C7862.89,-4133.86 7975.42,-4122.16 8070,-4081.41 8090.21,-4072.7 8087.27,-4058.96 8106,-4047.41 8224.92,-3974 8381.19,-3926.03 8476.47,-3901.35"/>
<polygon fill="black" stroke="black" points="8477.53,-3904.69 8486.35,-3898.81 8475.8,-3897.91 8477.53,-3904.69"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node110" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node110"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6554,-4072.41 6288,-4072.41 6288,-4036.41 6554,-4036.41 6554,-4072.41"/>
<text text-anchor="middle" x="6421" y="-4049.62" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge171" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6554.11,-4061.36C6731.85,-4070.71 7051.47,-4087.54 7275.06,-4099.3"/>
<polygon fill="black" stroke="black" points="7275.13,-4102.81 7285.3,-4099.84 7275.49,-4095.82 7275.13,-4102.81"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node111" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node111"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3331,-3698.41 3092,-3698.41 3092,-3662.41 3331,-3662.41 3331,-3698.41"/>
<text text-anchor="middle" x="3211.5" y="-3676.36" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge172" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3331.21,-3681.33C3611.9,-3683.44 4338.49,-3688.41 4945.5,-3688.41 4945.5,-3688.41 4945.5,-3688.41 5545.5,-3688.41 6106.59,-3688.41 7515.63,-3647.82 8070,-3734.41 8233.17,-3759.89 8417.82,-3825.47 8507.42,-3859.77"/>
<polygon fill="black" stroke="black" points="8506.24,-3863.06 8516.83,-3863.39 8508.76,-3856.53 8506.24,-3863.06"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node112" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node112"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5191,-4053.91 4702,-4053.91 4702,-4010.91 5191,-4010.91 5191,-4053.91"/>
<text text-anchor="middle" x="4946.5" y="-4024.26" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node113" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node113"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5756.5,-3871.91 5332.5,-3871.91 5332.5,-3826.91 5756.5,-3826.91 5756.5,-3871.91"/>
<text text-anchor="middle" x="5544.5" y="-3841.03" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node114" class="node">
<title>tg_client._extract_author</title>
<g id="a_node114"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6784,-4018.41 6058,-4018.41 6058,-3948.41 6784,-3948.41 6784,-4018.41"/>
<text text-anchor="middle" x="6421" y="-3969.61" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge173" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6784.36,-4011.93C6849.47,-4016.7 6916.74,-4021.4 6980,-4025.41 7088.24,-4032.26 7208.68,-4038.6 7308.66,-4043.5"/>
<polygon fill="black" stroke="black" points="7308.73,-4047.01 7318.89,-4044 7309.07,-4040.01 7308.73,-4047.01"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node115" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node115"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="7664,-4016.41 7386,-4016.41 7386,-3980.41 7664,-3980.41 7664,-4016.41"/>
<text text-anchor="middle" x="7525" y="-3993.62" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node116" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node116"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8711,-3374.41 8415,-3374.41 8415,-3338.41 8711,-3338.41 8711,-3374.41"/>
<text text-anchor="middle" x="8563" y="-3350.71" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node117" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node117"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5189,-2781.91 4704,-2781.91 4704,-2732.91 5189,-2732.91 5189,-2781.91"/>
<text text-anchor="middle" x="4946.5" y="-2747.78" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge174" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4972.88,-2732.76C5018.93,-2689.96 5121.29,-2603.43 5227,-2571.41 5378.16,-2525.61 7913.7,-2546.7 8070,-2569.41 8233.55,-2593.16 8418.4,-2659.14 8507.81,-2693.69"/>
<polygon fill="black" stroke="black" points="8506.61,-2696.97 8517.2,-2697.33 8509.15,-2690.45 8506.61,-2696.97"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge176" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4962.72,-2732.82C5008.01,-2658.11 5141.86,-2425.74 5191,-2212.41 5204.79,-2152.55 5187.79,-1154.68 5227,-1107.41 5422.02,-872.27 5598.75,-1019.82 5898,-958.41 6377.37,-860.02 6492.76,-799.94 6980,-754.41 7221.17,-731.87 7879.44,-604.88 8070,-754.41 8122.92,-795.93 8055.24,-857.28 8106,-901.41 8204.65,-987.16 8364.47,-981.8 8466.33,-966.95"/>
<polygon fill="black" stroke="black" points="8466.95,-970.39 8476.31,-965.43 8465.9,-963.47 8466.95,-970.39"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node118" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node118"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5677.5,-3222.41 5411.5,-3222.41 5411.5,-3186.41 5677.5,-3186.41 5677.5,-3222.41"/>
<text text-anchor="middle" x="5544.5" y="-3200.24" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge175" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M5180.47,-2782.2C5184.13,-2785.06 5187.64,-2788.12 5191,-2791.41 5262.45,-2861.3 5171.03,-2930.59 5227,-3013.41 5286.58,-3101.57 5401.75,-3155.65 5475.51,-3182.82"/>
<polygon fill="black" stroke="black" points="5474.59,-3186.21 5485.18,-3186.31 5476.97,-3179.62 5474.59,-3186.21"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node119" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node119"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6546.5,-3385.41 6295.5,-3385.41 6295.5,-3349.41 6546.5,-3349.41 6546.5,-3385.41"/>
<text text-anchor="middle" x="6421" y="-3362.61" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge177" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5580.87,-3222.41C5643.11,-3253.08 5777.07,-3314.64 5898,-3340.41 6027.51,-3368 6178.97,-3372.91 6285.29,-3372.03"/>
<polygon fill="black" stroke="black" points="6285.47,-3375.53 6295.43,-3371.93 6285.4,-3368.53 6285.47,-3375.53"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node120" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node120"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7706.5,-3374.41 7343.5,-3374.41 7343.5,-3338.41 7706.5,-3338.41 7706.5,-3374.41"/>
<text text-anchor="middle" x="7525" y="-3350.71" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge180" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6546.54,-3366.16C6738.32,-3364.25 7107.35,-3360.56 7333.04,-3358.31"/>
<polygon fill="black" stroke="black" points="7333.38,-3361.81 7343.35,-3358.21 7333.31,-3354.81 7333.38,-3361.81"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge178" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7706.79,-3358.76C7845.52,-3356.34 8021.3,-3342.71 8070,-3291.41 8152.49,-3204.5 8021.97,-2838.82 8106,-2753.41 8204.26,-2653.52 8383.58,-2673.23 8485.62,-2695.16"/>
<polygon fill="black" stroke="black" points="8485.03,-2698.61 8495.55,-2697.35 8486.54,-2691.78 8485.03,-2698.61"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge179" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7706.75,-3356.41C7904.05,-3356.41 8216.81,-3356.41 8404.44,-3356.41"/>
<polygon fill="black" stroke="black" points="8404.67,-3359.91 8414.67,-3356.41 8404.67,-3352.91 8404.67,-3359.91"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node121" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node121"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2204,-2881.91 1768,-2881.91 1768,-2840.91 2204,-2840.91 2204,-2881.91"/>
<text text-anchor="middle" x="1986" y="-2854.16" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge181" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2096.87,-2881.95C2557.82,-2966.97 4381.9,-3291.57 5898,-3394.41 6361.82,-3425.87 6484.21,-3463.08 6944,-3394.41 6960.55,-3391.93 6963.52,-3386.29 6980,-3383.41 7096.18,-3363.09 7228.28,-3356.17 7333.22,-3354.4"/>
<polygon fill="black" stroke="black" points="7333.34,-3357.9 7343.29,-3354.25 7333.23,-3350.9 7333.34,-3357.9"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node122" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node122"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7697,-5209.91 7353,-5209.91 7353,-5168.91 7697,-5168.91 7697,-5209.91"/>
<text text-anchor="middle" x="7525" y="-5182.16" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge182" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7697.04,-5191.16C7837.4,-5188.59 8020.75,-5174.63 8070,-5121.41 8128.24,-5058.45 8071.89,-4429.09 8106,-4350.41 8198.21,-4137.67 8433.37,-3965.96 8524.83,-3905.14"/>
<polygon fill="black" stroke="black" points="8526.8,-3908.03 8533.22,-3899.6 8522.94,-3902.19 8526.8,-3908.03"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge183" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7697.09,-5178.51C7806.05,-5176.49 7948.94,-5183.07 8070,-5219.41 8087.74,-5224.73 8088.12,-5235.57 8106,-5240.41 8498.14,-5346.42 8613.81,-5245.69 9020,-5240.41 9310.3,-5236.63 9403.11,-5330.38 9673,-5223.41 9803.41,-5171.72 9914.08,-5036.9 9956.73,-4979.69"/>
<polygon fill="black" stroke="black" points="9959.64,-4981.64 9962.75,-4971.52 9954,-4977.49 9959.64,-4981.64"/>
</g>
<!-- tg_client._load_progress -->
<g id="node123" class="node">
<title>tg_client._load_progress</title>
<g id="a_node123"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2151,-5249.41 1821,-5249.41 1821,-5213.41 2151,-5213.41 2151,-5249.41"/>
<text text-anchor="middle" x="1986" y="-5225.25" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge184" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2151.27,-5245.69C2169.14,-5248.17 2186.99,-5251.06 2204,-5254.41 2661.12,-5344.42 2744.6,-5547.41 3210.5,-5547.41 3210.5,-5547.41 3210.5,-5547.41 8564,-5547.41 8687.27,-5547.41 9568.09,-5582.13 9673,-5517.41 9699.16,-5501.27 9906.18,-5091.49 9961.79,-4980.76"/>
<polygon fill="black" stroke="black" points="9965.04,-4982.08 9966.4,-4971.57 9958.79,-4978.94 9965.04,-4982.08"/>
</g>
<!-- tg_client._save_progress -->
<g id="node124" class="node">
<title>tg_client._save_progress</title>
<g id="a_node124"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2721,-4176.41 2492,-4176.41 2492,-4140.41 2721,-4140.41 2721,-4176.41"/>
<text text-anchor="middle" x="2606.5" y="-4154.24" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node125" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node125"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3345,-4268.41 3078,-4268.41 3078,-4232.41 3345,-4232.41 3345,-4268.41"/>
<text text-anchor="middle" x="3211.5" y="-4244.53" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge185" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3345.12,-4250.66C3635.28,-4251.2 4348.28,-4252.41 4945.5,-4252.41 4945.5,-4252.41 4945.5,-4252.41 5545.5,-4252.41 5615.63,-4252.41 8017.98,-4261.44 8070,-4214.41 8172.88,-4121.38 8004.78,-3999.23 8106,-3904.41 8210.44,-3806.56 8394.38,-3835.29 8493.73,-3860.72"/>
<polygon fill="black" stroke="black" points="8493.1,-3864.18 8503.67,-3863.33 8494.88,-3857.4 8493.1,-3864.18"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node126" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node126"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2116.5,-4222.41 1855.5,-4222.41 1855.5,-4186.41 2116.5,-4186.41 2116.5,-4222.41"/>
<text text-anchor="middle" x="1986" y="-4198.53" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge186" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2116.61,-4204.84C2992.41,-4207.63 8012.15,-4221.4 8070,-4170.41 8159.5,-4091.52 8018.17,-3985.14 8106,-3904.41 8211.08,-3807.81 8393.94,-3835.72 8493.18,-3860.78"/>
<polygon fill="black" stroke="black" points="8492.54,-3864.23 8503.1,-3863.35 8494.29,-3857.45 8492.54,-3864.23"/>
</g>
<!-- tg_client._save_message -->
<g id="node127" class="node">
<title>tg_client._save_message</title>
<g id="a_node127"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4666,-3960.91 3450,-3960.91 3450,-3845.91 4666,-3845.91 4666,-3960.91"/>
<text text-anchor="middle" x="4058" y="-3879.29" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge187" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4666.15,-3911.9C5170.29,-3916.4 5812.75,-3915.13 5862,-3880.41 5899.58,-3853.91 5860.25,-3809.66 5898,-3783.41 5993.41,-3717.04 6827.88,-3778.51 6944,-3783.41 7108.69,-3790.35 7298.99,-3808.34 7415.4,-3820.48"/>
<polygon fill="black" stroke="black" points="7415.07,-3823.96 7425.38,-3821.52 7415.8,-3817 7415.07,-3823.96"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge188" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4064.36,-3845.85C4089.46,-3607.18 4215.6,-2683.21 4702,-2158.41 4900.67,-1944.06 5612.66,-1674.63 5898,-1611.41 6124.46,-1561.23 7631.82,-1578.02 8273.58,-1587.64"/>
<polygon fill="black" stroke="black" points="8273.84,-1591.15 8283.9,-1587.8 8273.95,-1584.15 8273.84,-1591.15"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge189" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4588.58,-3961.08C4616.12,-3974.83 4642.19,-3991.13 4666,-4010.41 4699.17,-4037.25 4666.85,-4075.22 4702,-4099.41 4779.08,-4152.44 7999.07,-4203.42 8070,-4142.41 8151.11,-4072.64 8026.68,-3976.19 8106,-3904.41 8211.55,-3808.89 8393.41,-3836.06 8492.58,-3860.8"/>
<polygon fill="black" stroke="black" points="8491.94,-3864.25 8502.49,-3863.33 8493.67,-3857.46 8491.94,-3864.25"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge200" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4061.88,-3845.64C4082.2,-3505.25 4233.89,-1749.21 5227,-962.41 5471.62,-768.6 5592.37,-818.6 5898,-755.41 6126.98,-708.06 6769.82,-797.39 6944,-641.41 6998.94,-592.2 6922.63,-525.76 6980,-479.41 7077.32,-400.77 7980.89,-471.85 8106,-471.41 8512.22,-469.96 8619.92,-401.05 9020,-471.41 9324.08,-524.88 9407.77,-550.36 9673,-708.41 9691.39,-719.36 9689.4,-731.8 9709,-740.41 9750.18,-758.49 9798.28,-766.76 9842.2,-770.06"/>
<polygon fill="black" stroke="black" points="9842.17,-773.56 9852.38,-770.74 9842.64,-766.58 9842.17,-773.56"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge190" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4596.35,-3961.04C4621.29,-3974.92 4644.74,-3991.24 4666,-4010.41 4709.26,-4049.4 4657.89,-4098.37 4702,-4136.41 4740.21,-4169.35 4795.12,-4178.68 4843.13,-4179.18"/>
<polygon fill="black" stroke="black" points="4843.27,-4182.68 4853.27,-4179.16 4843.26,-4175.68 4843.27,-4182.68"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge191" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4638.55,-3845.87C4678.71,-3841.89 4717.2,-3838.07 4752.54,-3834.56"/>
<polygon fill="black" stroke="black" points="4753.31,-3838 4762.92,-3833.53 4752.62,-3831.03 4753.31,-3838"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge192" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4666.02,-3920.99C4974.8,-3929.93 5315.9,-3939.81 5465.71,-3944.15"/>
<polygon fill="black" stroke="black" points="5465.64,-3947.65 5475.74,-3944.44 5465.84,-3940.65 5465.64,-3947.65"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge193" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4567.61,-3960.96C4602.16,-3974.47 4635.37,-3990.78 4666,-4010.41 4689.67,-4025.57 4677.1,-4049.36 4702,-4062.41 4894.51,-4163.27 4973.67,-4063.11 5191,-4062.41 5584.42,-4061.12 6048.68,-4057.54 6277.64,-4055.63"/>
<polygon fill="black" stroke="black" points="6277.72,-4059.13 6287.69,-4055.55 6277.66,-4052.13 6277.72,-4059.13"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge194" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4454.29,-3960.93C4572.12,-3978.07 4694.52,-3995.88 4787.67,-4009.44"/>
<polygon fill="black" stroke="black" points="4787.33,-4012.93 4797.73,-4010.9 4788.34,-4006 4787.33,-4012.93"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge195" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4666.02,-3881.32C4898.27,-3872.88 5148.8,-3863.76 5322.47,-3857.45"/>
<polygon fill="black" stroke="black" points="5322.63,-3860.94 5332.5,-3857.08 5322.38,-3853.95 5322.63,-3860.94"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge196" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4666.07,-3941.25C4678.15,-3941.98 4690.14,-3942.7 4702,-3943.41 4935.3,-3957.33 4993.41,-3965.76 5227,-3973.41 5501.75,-3982.4 5812.26,-3984.76 6047.62,-3984.94"/>
<polygon fill="black" stroke="black" points="6047.71,-3988.44 6057.71,-3984.95 6047.71,-3981.44 6047.71,-3988.44"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge197" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4073.11,-3845.62C4122.36,-3657.32 4305.68,-3058.27 4702,-2791.41 4704.21,-2789.92 4706.45,-2788.48 4708.73,-2787.1"/>
<polygon fill="black" stroke="black" points="4710.72,-2790 4717.68,-2782.01 4707.25,-2783.91 4710.72,-2790"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge198" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3908.09,-3961.01C3927.06,-3971.53 3977.04,-3978.91 4058,-3978.91 4128.21,-3978.91 4175.12,-3973.36 4198.71,-3965.03"/>
<polygon fill="black" stroke="black" points="4200.15,-3968.22 4207.91,-3961.01 4197.35,-3961.8 4200.15,-3968.22"/>
</g>
<!-- tg_client._save_media -->
<g id="node128" class="node">
<title>tg_client._save_media</title>
<g id="a_node128"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5785.5,-3808.41 5303.5,-3808.41 5303.5,-3754.41 5785.5,-3754.41 5785.5,-3808.41"/>
<text text-anchor="middle" x="5544.5" y="-3770.81" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge199" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4320,-3845.84C4436.3,-3822.91 4575.36,-3799.19 4702,-3787.41 4899.98,-3768.98 5125.28,-3768.45 5292.9,-3771.99"/>
<polygon fill="black" stroke="black" points="5293.03,-3775.5 5303.1,-3772.22 5293.18,-3768.5 5293.03,-3775.5"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge203" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5610.25,-3754.35C5685.59,-3719.01 5806.72,-3649.39 5862,-3547.41 5926.39,-3428.61 5809.17,-3042.23 5898,-2940.41 6220.27,-2571.02 6492.3,-2775.88 6980,-2726.41 7547.73,-2668.81 8235.96,-2697.45 8475.14,-2710.3"/>
<polygon fill="black" stroke="black" points="8475,-2713.79 8485.17,-2710.84 8475.37,-2706.8 8475,-2713.79"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge201" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5785.71,-3793.69C5812.03,-3799.43 5837.97,-3807.13 5862,-3817.41 5881.15,-3825.59 5878.61,-3839.81 5898,-3847.41 6025.73,-3897.42 6184.61,-3897.78 6293.32,-3889.69"/>
<polygon fill="black" stroke="black" points="6293.66,-3893.18 6303.35,-3888.91 6293.11,-3886.2 6293.66,-3893.18"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge202" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5609.47,-3754.26C5684.35,-3718.72 5805.32,-3648.81 5862,-3547.41 5907.82,-3465.44 5828.83,-3189.91 5898,-3126.41 5983.61,-3047.8 6827.8,-3124.36 6944,-3126.41 7174.68,-3130.47 8803.66,-3247.55 9020,-3167.41 9169.25,-3112.11 9297.29,-2959.74 9344.31,-2898.45"/>
<polygon fill="black" stroke="black" points="9347.14,-2900.5 9350.4,-2890.42 9341.56,-2896.27 9347.14,-2900.5"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge204" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5785.79,-3781.3C5813.2,-3789.02 5839.37,-3800.57 5862,-3817.41 5894.59,-3841.65 5864.5,-3878.43 5898,-3901.41 5993.91,-3967.18 6836.06,-3896.11 6944,-3939.41 6963.87,-3947.37 6960.18,-3963.3 6980,-3971.41 7106.28,-4023.03 7263,-4025.05 7375.74,-4016.97"/>
<polygon fill="black" stroke="black" points="7376.12,-4020.45 7385.83,-4016.21 7375.6,-4013.47 7376.12,-4020.45"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node129" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node129"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3414,-3960.41 3009,-3960.41 3009,-3918.41 3414,-3918.41 3414,-3960.41"/>
<text text-anchor="middle" x="3211.5" y="-3931.32" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge205" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3414.24,-3930.81C3422.57,-3930.45 3431.06,-3930.09 3439.69,-3929.72"/>
<polygon fill="black" stroke="black" points="3440.03,-3933.21 3449.88,-3929.29 3439.74,-3926.22 3440.03,-3933.21"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node130" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node130"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7810,-1778.41 7240,-1778.41 7240,-1734.41 7810,-1734.41 7810,-1778.41"/>
<text text-anchor="middle" x="7525" y="-1748.09" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge206" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7810.19,-1747.73C7894.22,-1742.44 7986.14,-1733.96 8070,-1720.41 8194.69,-1700.24 8333.72,-1662.62 8432.1,-1633.36"/>
<polygon fill="black" stroke="black" points="8433.21,-1636.69 8441.79,-1630.47 8431.2,-1629.98 8433.21,-1636.69"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge207" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7810.34,-1768.23C8237.84,-1786.67 8998.85,-1822.34 9020,-1843.41 9065.19,-1888.43 9035.45,-2356.01 9056,-2416.41 9118.82,-2600.99 9277.07,-2781.24 9338.54,-2846.62"/>
<polygon fill="black" stroke="black" points="9336.13,-2849.16 9345.54,-2854.02 9341.21,-2844.35 9336.13,-2849.16"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge208" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7810.11,-1746.64C8214.32,-1734.94 8917.98,-1723.5 9020,-1781.41 9232.26,-1901.88 9330.67,-2212.55 9356.41,-2307.45"/>
<polygon fill="black" stroke="black" points="9353.05,-2308.43 9359,-2317.2 9359.82,-2306.63 9353.05,-2308.43"/>
</g>
<!-- tg_client._download_messages -->
<g id="node131" class="node">
<title>tg_client._download_messages</title>
<g id="a_node131"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2961.5,-4117.91 2251.5,-4117.91 2251.5,-4060.91 2961.5,-4060.91 2961.5,-4117.91"/>
<text text-anchor="middle" x="2606.5" y="-4078.07" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge209" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2722.34,-4060.84C2836.49,-4032.44 3009.51,-3989.4 3115.97,-3962.92"/>
<polygon fill="black" stroke="black" points="3116.88,-3966.3 3125.74,-3960.49 3115.19,-3959.51 3116.88,-3966.3"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node132" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node132"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2777.5,-5611.41 2435.5,-5611.41 2435.5,-5575.41 2777.5,-5575.41 2777.5,-5611.41"/>
<text text-anchor="middle" x="2606.5" y="-5587.71" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node133" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node133"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2973,-3689.91 2240,-3689.91 2240,-3624.91 2973,-3624.91 2973,-3689.91"/>
<text text-anchor="middle" x="2606.5" y="-3644.35" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge210" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2608.17,-3624.84C2613.17,-3455.43 2655.32,-2663.66 3009,-2166.41 3146.4,-1973.23 3228.84,-1951.75 3450,-1866.41 4409.75,-1496.04 7041.46,-1553.55 8070,-1573.41 8135.95,-1574.68 8206.84,-1576.91 8273.7,-1579.41"/>
<polygon fill="black" stroke="black" points="8273.84,-1582.91 8283.97,-1579.79 8274.11,-1575.92 8273.84,-1582.91"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge211" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2834.55,-3689.93C2891.4,-3696.9 2952.33,-3703.37 3009,-3707.41 3473.68,-3740.46 3591.15,-3726.41 4057,-3726.41 4057,-3726.41 4057,-3726.41 5545.5,-3726.41 6668.05,-3726.41 6953.23,-3691.69 8070,-3805.41 8213.25,-3819.99 8378.43,-3847.78 8476.32,-3865.41"/>
<polygon fill="black" stroke="black" points="8475.99,-3868.91 8486.46,-3867.24 8477.24,-3862.02 8475.99,-3868.91"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge212" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2973.1,-3648.4C3266.16,-3641.95 3687.97,-3634.41 4057,-3634.41 4057,-3634.41 4057,-3634.41 7526,-3634.41 8164.38,-3634.41 8927.45,-3646.01 9230.25,-3651.08"/>
<polygon fill="black" stroke="black" points="9230.33,-3654.58 9240.39,-3651.25 9230.45,-3647.59 9230.33,-3654.58"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge213" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2631.71,-3624.88C2759.05,-3457.85 3371.47,-2704.41 4057,-2704.41 4057,-2704.41 4057,-2704.41 5545.5,-2704.41 6688.24,-2704.41 8073.71,-2759.59 8458.55,-2775.91"/>
<polygon fill="black" stroke="black" points="8458.68,-2779.42 8468.82,-2776.35 8458.98,-2772.42 8458.68,-2779.42"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge214" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2973.04,-3671.35C3011.6,-3672.82 3048.68,-3674.23 3081.62,-3675.49"/>
<polygon fill="black" stroke="black" points="3081.58,-3678.99 3091.71,-3675.87 3081.85,-3672 3081.58,-3678.99"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge215" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2677.26,-3690.03C2798.66,-3746.8 3046.28,-3862.61 3156.04,-3913.93"/>
<polygon fill="black" stroke="black" points="3154.73,-3917.19 3165.27,-3918.25 3157.7,-3910.85 3154.73,-3917.19"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge216" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2615.8,-3624.86C2679.68,-3382.67 3116.24,-1870.41 4057,-1870.41 4057,-1870.41 4057,-1870.41 5545.5,-1870.41 6184.12,-1870.41 6342.43,-1824.02 6980,-1787.41 7060.95,-1782.76 7148.67,-1777.75 7229.56,-1773.14"/>
<polygon fill="black" stroke="black" points="7230.11,-1776.61 7239.9,-1772.55 7229.71,-1769.62 7230.11,-1776.61"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node134" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node134"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-4241.41 1019,-4241.41 1019,-4167.41 1732,-4167.41 1732,-4241.41"/>
<text text-anchor="middle" x="1375.5" y="-4189.58" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge217" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1649.16,-4241.41C1688.96,-4245.77 1729.49,-4249.64 1768,-4252.41 1827.87,-4256.7 2759.55,-4274.97 3009,-4277.41 4757.81,-4294.46 5195.2,-4284.66 6944,-4266.41 7069.12,-4265.1 7977.75,-4330.95 8070,-4246.41 8126.34,-4194.77 8050.51,-3956.95 8106,-3904.41 8210.06,-3805.87 8394.57,-3835.04 8494,-3860.68"/>
<polygon fill="black" stroke="black" points="8493.37,-3864.13 8503.93,-3863.3 8495.16,-3857.37 8493.37,-3864.13"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge218" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1717.22,-4241.44C1722.25,-4244.27 1727.18,-4247.25 1732,-4250.41 1758.02,-4267.44 1746.55,-4287.89 1768,-4310.41 2076.74,-4634.37 2157.98,-4869.41 2605.5,-4869.41 2605.5,-4869.41 2605.5,-4869.41 5545.5,-4869.41 6178.12,-4869.41 6349.13,-4919.16 6944,-5134.41 6961.21,-5140.63 6962.44,-5149.25 6980,-5154.41 7097.44,-5188.9 7235.05,-5197.47 7342.49,-5197.51"/>
<polygon fill="black" stroke="black" points="7342.8,-5201.01 7352.79,-5197.49 7342.79,-5194.01 7342.8,-5201.01"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge219" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1723.13,-4241.57C1726.18,-4244.38 1729.14,-4247.33 1732,-4250.41 1779.99,-4301.98 1746.7,-4816.26 1768,-4883.41 1810.29,-5016.71 1915.43,-5150.32 1962.08,-5205.29"/>
<polygon fill="black" stroke="black" points="1959.62,-5207.8 1968.78,-5213.12 1964.94,-5203.25 1959.62,-5207.8"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge220" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1732.01,-4179.17C1744.15,-4178.54 1756.17,-4177.95 1768,-4177.41 2021.48,-4165.8 2318.46,-4161.19 2481.9,-4159.43"/>
<polygon fill="black" stroke="black" points="2482.03,-4162.93 2491.99,-4159.32 2481.96,-4155.93 2482.03,-4162.93"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge221" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1732,-4229.78C1744.15,-4230.38 1756.17,-4230.92 1768,-4231.41 2243.68,-4250.93 2808.26,-4251.93 3067.46,-4251.16"/>
<polygon fill="black" stroke="black" points="3067.69,-4254.66 3077.68,-4251.13 3067.67,-4247.66 3067.69,-4254.66"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge222" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1732.23,-4204.41C1772,-4204.41 1810.55,-4204.41 1845.08,-4204.41"/>
<polygon fill="black" stroke="black" points="1845.18,-4207.91 1855.18,-4204.41 1845.18,-4200.91 1845.18,-4207.91"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge223" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1699.56,-4167.39C1722.71,-4164.96 1745.71,-4162.6 1768,-4160.41 1922.91,-4145.14 2094.14,-4130.26 2241.19,-4118.11"/>
<polygon fill="black" stroke="black" points="2241.61,-4121.59 2251.28,-4117.28 2241.03,-4114.61 2241.61,-4121.59"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node135" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node135"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7841.5,-1857.91 7208.5,-1857.91 7208.5,-1796.91 7841.5,-1796.91 7841.5,-1857.91"/>
<text text-anchor="middle" x="7525" y="-1815.15" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge224" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7841.62,-1820.49C7917.11,-1814.36 7996.96,-1804.15 8070,-1787.41 8219.01,-1753.24 8382.15,-1681.12 8478.12,-1634.8"/>
<polygon fill="black" stroke="black" points="8479.72,-1637.92 8487.19,-1630.41 8476.66,-1631.62 8479.72,-1637.92"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge225" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7797.56,-1857.92C7899.76,-1883.98 8006.5,-1931.84 8070,-2019.41 8120.4,-2088.91 8065.34,-3488.79 8106,-3564.41 8191.67,-3723.75 8396.74,-3819.81 8500.15,-3859.75"/>
<polygon fill="black" stroke="black" points="8498.94,-3863.04 8509.53,-3863.33 8501.43,-3856.5 8498.94,-3863.04"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge226" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7841.82,-1836.99C8274.05,-1850.85 8999.19,-1877.05 9020,-1897.41 9061.33,-1937.82 9037.2,-2361.74 9056,-2416.41 9119.42,-2600.78 9277.31,-2781.15 9338.61,-2846.6"/>
<polygon fill="black" stroke="black" points="9336.19,-2849.13 9345.6,-2854 9341.28,-2844.32 9336.19,-2849.13"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge227" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7841.64,-1802.6C8218.56,-1778.51 8822.84,-1758.99 9020,-1862.41 9210.87,-1962.51 9321.45,-2222.03 9353.6,-2307.59"/>
<polygon fill="black" stroke="black" points="9350.38,-2308.98 9357.13,-2317.14 9356.94,-2306.55 9350.38,-2308.98"/>
</g>
<!-- tg_client.main -->
<g id="node136" class="node">
<title>tg_client.main</title>
<g id="a_node136"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-4051.41 366.5,-4051.41 366.5,-3959.41 934.5,-3959.41 934.5,-4051.41"/>
<text text-anchor="middle" x="650.5" y="-3986.37" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge228" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M934.71,-4011.78C1204.64,-4017.3 1622.5,-4024.41 1985,-4024.41 1985,-4024.41 1985,-4024.41 3212.5,-4024.41 3833.61,-4024.41 4575.64,-4117.4 4843.12,-4153.93"/>
<polygon fill="black" stroke="black" points="4842.82,-4157.42 4853.2,-4155.31 4843.77,-4150.48 4842.82,-4157.42"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge229" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M701.92,-4051.58C768.77,-4109.65 893.04,-4206.99 1019,-4250.41 1092.9,-4275.88 1180.41,-4282.79 1250.1,-4283.25"/>
<polygon fill="black" stroke="black" points="1250.25,-4286.75 1260.26,-4283.27 1250.26,-4279.75 1250.25,-4286.75"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge230" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M705.43,-3959.14C928.81,-3767.5 1778.08,-3038.92 1953.27,-2888.63"/>
<polygon fill="black" stroke="black" points="1955.56,-2891.28 1960.87,-2882.11 1951,-2885.96 1955.56,-2891.28"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge231" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M934.52,-3998.11C1451.91,-3984.76 2539.3,-3956.72 2998.59,-3944.87"/>
<polygon fill="black" stroke="black" points="2998.75,-3948.37 3008.65,-3944.61 2998.57,-3941.37 2998.75,-3948.37"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge232" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M685.19,-4051.57C812.81,-4224.48 1283.88,-4844.96 1768,-5258.41 1957.56,-5420.29 2004.09,-5480.86 2240,-5561.41 2298.39,-5581.34 2364.91,-5590.77 2425.06,-5594.79"/>
<polygon fill="black" stroke="black" points="2424.85,-5598.29 2435.05,-5595.41 2425.28,-5591.3 2424.85,-5598.29"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge233" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M909.97,-3959.37C1307.3,-3888.61 2059.19,-3754.7 2412.68,-3691.75"/>
<polygon fill="black" stroke="black" points="2413.53,-3695.15 2422.76,-3689.95 2412.3,-3688.26 2413.53,-3695.15"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge234" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M818.73,-4051.43C943.18,-4085.69 1111.31,-4131.97 1229.96,-4164.62"/>
<polygon fill="black" stroke="black" points="1229.28,-4168.06 1239.85,-4167.34 1231.14,-4161.32 1229.28,-4168.06"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge235" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M655.74,-3959.2C687.91,-3638.48 921.96,-1756.41 1985,-1756.41 1985,-1756.41 1985,-1756.41 5545.5,-1756.41 6128.01,-1756.41 6806.37,-1787.52 7198.37,-1808.56"/>
<polygon fill="black" stroke="black" points="7198.27,-1812.06 7208.45,-1809.1 7198.65,-1805.07 7198.27,-1812.06"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node138" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node138"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8722,-1102.41 8404,-1102.41 8404,-1062.41 8722,-1062.41 8722,-1102.41"/>
<text text-anchor="middle" x="8563" y="-1075.33" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node139" class="node">
<title>lot_io.write_lots</title>
<g id="a_node139"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7626.5,-1098.41 7423.5,-1098.41 7423.5,-1062.41 7626.5,-1062.41 7626.5,-1098.41"/>
<text text-anchor="middle" x="7525" y="-1074.81" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge238" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7626.56,-1069.93C7766.84,-1057.79 8010.78,-1046.53 8070,-1107.41 8133.35,-1172.53 8043.75,-2676.23 8106,-2742.41 8152.34,-2791.67 8338.8,-2792.21 8458.46,-2787.05"/>
<polygon fill="black" stroke="black" points="8458.92,-2790.53 8468.75,-2786.58 8458.6,-2783.54 8458.92,-2790.53"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge240" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7626.59,-1097.15C7745.41,-1111.02 7942.91,-1114.8 8070,-1015.41 8105.57,-987.59 8070.18,-947.89 8106,-920.41 8204.25,-845 8351.61,-844.29 8452.03,-855.31"/>
<polygon fill="black" stroke="black" points="8451.87,-858.82 8462.2,-856.49 8452.67,-851.86 8451.87,-858.82"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge239" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7626.66,-1080.84C7736.16,-1082.37 7916.14,-1087.99 8070,-1107.41 8497.55,-1161.35 8694.13,-1019.42 9020,-1301.41 9055.72,-1332.32 9022.32,-1368.28 9056,-1401.41 9121.32,-1465.65 9227.52,-1490.64 9296.45,-1500.33"/>
<polygon fill="black" stroke="black" points="9296.38,-1503.85 9306.76,-1501.7 9297.31,-1496.91 9296.38,-1503.85"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge241" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7626.75,-1080.6C7804.69,-1080.94 8176.3,-1081.66 8393.71,-1082.08"/>
<polygon fill="black" stroke="black" points="8393.94,-1085.58 8403.94,-1082.1 8393.95,-1078.58 8393.94,-1085.58"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node141" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node141"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8669.5,-770.41 8456.5,-770.41 8456.5,-734.41 8669.5,-734.41 8669.5,-770.41"/>
<text text-anchor="middle" x="8563" y="-748.24" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node142" class="node">
<title>lot_io.get_lot</title>
<g id="a_node142"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7597.5,-5032.41 7452.5,-5032.41 7452.5,-4996.41 7597.5,-4996.41 7597.5,-5032.41"/>
<text text-anchor="middle" x="7525" y="-5009.61" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge243" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7597.74,-5016.94C7730.97,-5019.95 8008.69,-5017.64 8070,-4949.41 8125.25,-4887.91 8050.38,-2034.57 8106,-1973.41 8198.76,-1871.39 8374.67,-1884.97 8478.8,-1904.43"/>
<polygon fill="black" stroke="black" points="8478.17,-1907.88 8488.65,-1906.33 8479.49,-1901 8478.17,-1907.88"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge244" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7597.73,-5017.36C7813.41,-5025.4 8474.84,-5044.02 9020,-4995.41 9036.16,-4993.96 9040,-4992.07 9056,-4989.41 9118.19,-4979.07 9187.47,-4967.57 9244.49,-4958.12"/>
<polygon fill="black" stroke="black" points="9245.34,-4961.53 9254.63,-4956.44 9244.19,-4954.62 9245.34,-4961.53"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node143" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node143"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7640.5,-3228.41 7409.5,-3228.41 7409.5,-3192.41 7640.5,-3192.41 7640.5,-3228.41"/>
<text text-anchor="middle" x="7525" y="-3206.36" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node144" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node144"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6562.5,-3171.41 6279.5,-3171.41 6279.5,-3135.41 6562.5,-3135.41 6562.5,-3171.41"/>
<text text-anchor="middle" x="6421" y="-3147.81" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge245" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6562.69,-3160.68C6779.63,-3171.9 7192.34,-3193.25 7399.23,-3203.95"/>
<polygon fill="black" stroke="black" points="7399.06,-3207.45 7409.23,-3204.47 7399.42,-3200.46 7399.06,-3207.45"/>
</g>
<!-- log_utils.init_logger -->
<g id="node145" class="node">
<title>log_utils.init_logger</title>
<g id="a_node145"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6768.5,-3271.41 6073.5,-3271.41 6073.5,-3189.41 6768.5,-3189.41 6768.5,-3271.41"/>
<text text-anchor="middle" x="6421" y="-3213.42" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge246" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6768.79,-3224.11C6983.74,-3220.21 7247,-3215.43 7399.11,-3212.67"/>
<polygon fill="black" stroke="black" points="7399.48,-3216.17 7409.42,-3212.48 7399.36,-3209.17 7399.48,-3216.17"/>
</g>
<!-- log_utils.get_logger -->
<g id="node146" class="node">
<title>log_utils.get_logger</title>
<g id="a_node146"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7593.5,-3282.41 7456.5,-3282.41 7456.5,-3246.41 7593.5,-3246.41 7593.5,-3282.41"/>
<text text-anchor="middle" x="7525" y="-3261.16" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge247" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6768.79,-3234.78C7008.09,-3241.11 7307.25,-3251.23 7446.29,-3258.34"/>
<polygon fill="black" stroke="black" points="7446.26,-3261.84 7456.42,-3258.86 7446.62,-3254.85 7446.26,-3261.84"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge248" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7456.42,-3265.78C7324.1,-3264.64 7022.47,-3256.31 6778.88,-3247.78"/>
<polygon fill="black" stroke="black" points="6778.91,-3244.28 6768.79,-3247.42 6778.66,-3251.27 6778.91,-3244.28"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node147" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node147"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6607.5,-3078.41 6234.5,-3078.41 6234.5,-3042.41 6607.5,-3042.41 6607.5,-3078.41"/>
<text text-anchor="middle" x="6421" y="-3054.25" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge249" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6607.66,-3072.75C6708.3,-3082.21 6834.2,-3098.57 6944,-3126.41 6960.64,-3130.62 6963.36,-3136.17 6980,-3140.41 7121.16,-3176.36 7287.87,-3194.34 7399.18,-3202.99"/>
<polygon fill="black" stroke="black" points="7399.21,-3206.5 7409.44,-3203.77 7399.74,-3199.52 7399.21,-3206.5"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node148" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node148"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6879,-2042.91 5963,-2042.91 5963,-1971.91 6879,-1971.91 6879,-2042.91"/>
<text text-anchor="middle" x="6421" y="-1992.76" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge250" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6516.94,-1971.88C6627.09,-1927.7 6810.63,-1844.69 6944,-1736.41 6963.62,-1720.48 6957.52,-1703.94 6980,-1692.41 7036.46,-1663.43 7832.98,-1624.29 8273.7,-1604.68"/>
<polygon fill="black" stroke="black" points="8273.89,-1608.17 8283.72,-1604.23 8273.58,-1601.18 8273.89,-1608.17"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge251" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6832.9,-2043.05C6875.51,-2062.32 6914.08,-2088.96 6944,-2125.41 7041.04,-2243.62 6880.31,-3385.42 6980,-3501.41 7300.78,-3874.63 7595.48,-3565.92 8070,-3696.41 8236.18,-3742.1 8424.95,-3821.07 8512.53,-3859.34"/>
<polygon fill="black" stroke="black" points="8511.13,-3862.55 8521.69,-3863.36 8513.94,-3856.14 8511.13,-3862.55"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge252" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6879.11,-1989.68C7381.57,-1970.19 8156.06,-1940.15 8446.63,-1928.88"/>
<polygon fill="black" stroke="black" points="8446.9,-1932.37 8456.76,-1928.49 8446.63,-1925.38 8446.9,-1932.37"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node149" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node149"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7743,-908.41 7307,-908.41 7307,-864.41 7743,-864.41 7743,-908.41"/>
<text text-anchor="middle" x="7525" y="-878.09" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge253" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6577.37,-1971.89C6699.56,-1935.06 6862.35,-1864.33 6944,-1736.41 6992.71,-1660.09 6916.69,-987.12 6980,-922.41 7023.83,-877.61 7167.88,-869.52 7296.74,-872.16"/>
<polygon fill="black" stroke="black" points="7296.7,-875.66 7306.77,-872.38 7296.86,-868.66 7296.7,-875.66"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node150" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node150"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7737.5,-2176.41 7312.5,-2176.41 7312.5,-2140.41 7737.5,-2140.41 7737.5,-2176.41"/>
<text text-anchor="middle" x="7525" y="-2152.53" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge254" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6553.93,-2042.97C6666.31,-2071.69 6832.54,-2110.5 6980,-2130.41 7085.44,-2144.64 7203.28,-2151.77 7302.25,-2155.29"/>
<polygon fill="black" stroke="black" points="7302.26,-2158.8 7312.38,-2155.64 7302.51,-2151.8 7302.26,-2158.8"/>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge286" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7743.18,-883.89C7959.92,-881.38 8284.18,-877.62 8452.22,-875.68"/>
<polygon fill="black" stroke="black" points="8452.36,-879.18 8462.32,-875.56 8452.28,-872.18 8452.36,-879.18"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge292" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7737.83,-2174.01C7869.23,-2178.8 8021.88,-2173.86 8070,-2130.41 8147.77,-2060.18 8049.69,-1985.78 8106,-1897.41 8187.93,-1768.82 8345.7,-1681.78 8452.43,-1634.62"/>
<polygon fill="black" stroke="black" points="8453.87,-1637.81 8461.63,-1630.59 8451.07,-1631.39 8453.87,-1637.81"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge293" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7737.77,-2144.95C7867.72,-2141.18 8018.75,-2146.28 8070,-2185.41 8110.89,-2216.62 8066.66,-2262.26 8106,-2295.41 8182.82,-2360.14 8293.97,-2377.49 8387.3,-2378.37"/>
<polygon fill="black" stroke="black" points="8387.42,-2381.87 8397.43,-2378.4 8387.44,-2374.87 8387.42,-2381.87"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge294" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7737.73,-2149.87C7839.56,-2150.56 7962.56,-2158.5 8070,-2185.41 8087.16,-2189.7 8089.06,-2197.3 8106,-2202.41 8202.43,-2231.44 8314.3,-2247.88 8403.1,-2257.09"/>
<polygon fill="black" stroke="black" points="8402.96,-2260.59 8413.26,-2258.12 8403.67,-2253.63 8402.96,-2260.59"/>
</g>
<!-- scan_ontology.main -->
<g id="node151" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5772,-2827.91 5317,-2827.91 5317,-2770.91 5772,-2770.91 5772,-2827.91"/>
<text text-anchor="middle" x="5544.5" y="-2788.51" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge255" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5772.23,-2797.98C6380.09,-2794.15 8029.14,-2783.76 8458.61,-2781.06"/>
<polygon fill="black" stroke="black" points="8458.86,-2784.56 8468.83,-2780.99 8458.81,-2777.56 8458.86,-2784.56"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge256" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5772,-2821.03C5805.55,-2832.95 5837.14,-2850.32 5862,-2875.41 5912.09,-2925.94 5843.57,-2985.58 5898,-3031.41 5946.42,-3072.17 6097.02,-3077.12 6224.09,-3073.19"/>
<polygon fill="black" stroke="black" points="6224.49,-3076.68 6234.36,-3072.85 6224.25,-3069.68 6224.49,-3076.68"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge257" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5650.46,-2770.81C5722.8,-2745.22 5814.2,-2699.97 5862,-2625.41 5922.11,-2531.62 5825.37,-2209.87 5898,-2125.41 5927.28,-2091.35 5964.12,-2065.94 6004.62,-2047.14"/>
<polygon fill="black" stroke="black" points="6006.18,-2050.28 6013.87,-2042.99 6003.31,-2043.89 6006.18,-2050.28"/>
</g>
<!-- telegram_bot._t -->
<g id="node152" class="node">
<title>telegram_bot._t</title>
<g id="a_node152"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5648.5,-5761.41 5440.5,-5761.41 5440.5,-5725.41 5648.5,-5725.41 5648.5,-5761.41"/>
<text text-anchor="middle" x="5544.5" y="-5737.53" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node153" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node153"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5695.5,-5707.41 5393.5,-5707.41 5393.5,-5671.41 5695.5,-5671.41 5695.5,-5707.41"/>
<text text-anchor="middle" x="5544.5" y="-5684.61" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node154" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node154"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6525,-5661.41 6317,-5661.41 6317,-5625.41 6525,-5625.41 6525,-5661.41"/>
<text text-anchor="middle" x="6421" y="-5639.71" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge258" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5695.83,-5681.5C5869.29,-5672.37 6150.61,-5657.58 6306.65,-5649.37"/>
<polygon fill="black" stroke="black" points="6306.94,-5652.86 6316.75,-5648.84 6306.58,-5645.87 6306.94,-5652.86"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node155" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node155"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5695.5,-5519.41 5393.5,-5519.41 5393.5,-5483.41 5695.5,-5483.41 5695.5,-5519.41"/>
<text text-anchor="middle" x="5544.5" y="-5496.11" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge259" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5695.66,-5502.43C6026.12,-5504.58 6841.31,-5509.41 7524,-5509.41 7524,-5509.41 7524,-5509.41 8564,-5509.41 8687.25,-5509.41 9567.14,-5547.54 9673,-5484.41 9868.46,-5367.83 9948.75,-5073.8 9969.64,-4981.55"/>
<polygon fill="black" stroke="black" points="9973.11,-4982.08 9971.85,-4971.56 9966.27,-4980.57 9973.11,-4982.08"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node156" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node156"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9508,-5475.41 9221,-5475.41 9221,-5439.41 9508,-5439.41 9508,-5475.41"/>
<text text-anchor="middle" x="9364.5" y="-5451.71" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge260" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9508.2,-5468.64C9563.21,-5466.67 9624.43,-5456.26 9673,-5426.41 9848.78,-5318.36 9940.68,-5065.61 9967.24,-4981.32"/>
<polygon fill="black" stroke="black" points="9970.61,-4982.26 9970.23,-4971.68 9963.93,-4980.2 9970.61,-4982.26"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node157" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6505,-5179.41 6337,-5179.41 6337,-5143.41 6505,-5143.41 6505,-5179.41"/>
<text text-anchor="middle" x="6421" y="-5158.16" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node158" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node158"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7671,-4702.41 7379,-4702.41 7379,-4666.41 7671,-4666.41 7671,-4702.41"/>
<text text-anchor="middle" x="7525" y="-4680.24" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge261" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7671.08,-4696.26C7811.61,-4704.46 8011.76,-4706.42 8070,-4657.41 8125.77,-4610.47 8055.23,-4549.71 8106,-4497.41 8156.49,-4445.38 8226.74,-4415.36 8296.99,-4398.35"/>
<polygon fill="black" stroke="black" points="8297.96,-4401.71 8306.9,-4396.03 8296.37,-4394.9 8297.96,-4401.71"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node159" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="9526,-5612.41 9203,-5612.41 9203,-5576.41 9526,-5576.41 9526,-5612.41"/>
<text text-anchor="middle" x="9364.5" y="-5589.61" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge262" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9526.38,-5580.74C9573.76,-5575.74 9625.6,-5569.33 9673,-5561.41 9749.75,-5548.58 9836.2,-5528.26 9896.97,-5512.98"/>
<polygon fill="black" stroke="black" points="9898.04,-5516.32 9906.88,-5510.48 9896.32,-5509.54 9898.04,-5516.32"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node160" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5783,-5615.41 5306,-5615.41 5306,-5575.41 5783,-5575.41 5783,-5615.41"/>
<text text-anchor="middle" x="5544.5" y="-5588.33" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge263" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5783.02,-5608.44C5953.21,-5617.78 6174.82,-5629.95 6306.76,-5637.19"/>
<polygon fill="black" stroke="black" points="6306.71,-5640.69 6316.88,-5637.75 6307.09,-5633.7 6306.71,-5640.69"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge264" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5783.25,-5595.34C6492.17,-5595.16 8580.1,-5594.61 9192.7,-5594.45"/>
<polygon fill="black" stroke="black" points="9192.93,-5597.95 9202.93,-5594.45 9192.93,-5590.95 9192.93,-5597.95"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node161" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node161"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5820,-5330.41 5269,-5330.41 5269,-5278.41 5820,-5278.41 5820,-5330.41"/>
<text text-anchor="middle" x="5544.5" y="-5294.71" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge265" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5752.63,-5278.39C5800.32,-5273.1 5850.87,-5268.04 5898,-5264.41 5955.99,-5259.93 6899.79,-5259.19 6944,-5221.41 7006.02,-5168.4 6918.21,-5094.68 6980,-5041.41 7047.1,-4983.56 7307.39,-4995.93 7442.13,-5006.71"/>
<polygon fill="black" stroke="black" points="7442.15,-5010.23 7452.4,-5007.55 7442.72,-5003.25 7442.15,-5010.23"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge266" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5820.08,-5328.06C5834.37,-5331.37 5848.42,-5335.14 5862,-5339.41 6076.98,-5406.97 6304.16,-5560.27 6387.19,-5619.46"/>
<polygon fill="black" stroke="black" points="6385.29,-5622.4 6395.46,-5625.38 6389.37,-5616.71 6385.29,-5622.4"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node162" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node162"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5111.5,-5519.41 4781.5,-5519.41 4781.5,-5483.41 5111.5,-5483.41 5111.5,-5519.41"/>
<text text-anchor="middle" x="4946.5" y="-5495.25" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge267" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5111.54,-5501.41C5196.23,-5501.41 5299.14,-5501.41 5383.27,-5501.41"/>
<polygon fill="black" stroke="black" points="5383.43,-5504.91 5393.43,-5501.41 5383.43,-5497.91 5383.43,-5504.91"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node163" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node163"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5058.5,-5733.41 4834.5,-5733.41 4834.5,-5697.41 5058.5,-5697.41 5058.5,-5733.41"/>
<text text-anchor="middle" x="4946.5" y="-5711.24" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge268" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5058.55,-5720.62C5164.59,-5725.6 5323.59,-5733.07 5430.32,-5738.09"/>
<polygon fill="black" stroke="black" points="5430.33,-5741.59 5440.49,-5738.57 5430.66,-5734.6 5430.33,-5741.59"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge269" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5058.55,-5710.56C5149.9,-5706.58 5280.55,-5700.88 5383.23,-5696.4"/>
<polygon fill="black" stroke="black" points="5383.55,-5699.89 5393.39,-5695.95 5383.25,-5692.89 5383.55,-5699.89"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node164" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node164"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5121,-5678.91 4772,-5678.91 4772,-5639.91 5121,-5639.91 5121,-5678.91"/>
<text text-anchor="middle" x="4946.5" y="-5652.51" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge270" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5121.09,-5668.32C5145.11,-5672.92 5169.05,-5679.39 5191,-5688.41 5209.75,-5696.11 5208.12,-5709.02 5227,-5716.41 5291.21,-5741.54 5368.2,-5748.56 5430.17,-5749.17"/>
<polygon fill="black" stroke="black" points="5430.36,-5752.67 5440.38,-5749.21 5430.39,-5745.67 5430.36,-5752.67"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge271" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5121.09,-5668.14C5203.81,-5672.31 5302.11,-5677.25 5383.06,-5681.33"/>
<polygon fill="black" stroke="black" points="5383.19,-5684.84 5393.35,-5681.85 5383.54,-5677.85 5383.19,-5684.84"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge272" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5121.11,-5657.52C5426.23,-5654.2 6050.55,-5647.42 6306.6,-5644.64"/>
<polygon fill="black" stroke="black" points="6306.7,-5648.14 6316.66,-5644.53 6306.63,-5641.14 6306.7,-5648.14"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node165" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node165"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5161.5,-5792.91 4731.5,-5792.91 4731.5,-5751.91 5161.5,-5751.91 5161.5,-5792.91"/>
<text text-anchor="middle" x="4946.5" y="-5765.16" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge273" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5161.83,-5761.98C5252.53,-5757.56 5354.49,-5752.6 5430.2,-5748.92"/>
<polygon fill="black" stroke="black" points="5430.41,-5752.41 5440.23,-5748.43 5430.07,-5745.42 5430.41,-5752.41"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge274" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5161.54,-5752.35C5171.61,-5749.44 5181.48,-5746.14 5191,-5742.41 5209.37,-5735.19 5208.5,-5723.27 5227,-5716.41 5275.96,-5698.24 5332,-5689.82 5383.18,-5686.42"/>
<polygon fill="black" stroke="black" points="5383.58,-5689.9 5393.35,-5685.8 5383.16,-5682.91 5383.58,-5689.9"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge275" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5161.69,-5785.27C5347.51,-5793.26 5623.39,-5797.48 5862,-5770.41 6041.07,-5750.09 6246.54,-5694.8 6351.08,-5664.3"/>
<polygon fill="black" stroke="black" points="6352.27,-5667.6 6360.88,-5661.43 6350.3,-5660.88 6352.27,-5667.6"/>
</g>
<!-- telegram_bot.main -->
<g id="node166" class="node">
<title>telegram_bot.main</title>
<g id="a_node166"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5112,-5465.41 4781,-5465.41 4781,-5421.41 5112,-5421.41 5112,-5465.41"/>
<text text-anchor="middle" x="4946.5" y="-5435.09" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge276" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5112.33,-5459.45C5196.84,-5467.67 5299.33,-5477.64 5383.18,-5485.8"/>
<polygon fill="black" stroke="black" points="5383.02,-5489.3 5393.31,-5486.79 5383.7,-5482.34 5383.02,-5489.3"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge277" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5112.22,-5443.93C5812.09,-5446.15 8534.06,-5454.78 9210.61,-5456.92"/>
<polygon fill="black" stroke="black" points="9210.9,-5460.42 9220.91,-5456.95 9210.92,-5453.42 9210.9,-5460.42"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge278" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M4963.25,-5421.21C5001.42,-5369.55 5104.79,-5241.97 5227,-5193.41 5610.86,-5040.85 6120.35,-5106.49 6327.02,-5143.01"/>
<polygon fill="black" stroke="black" points="6326.46,-5146.47 6336.92,-5144.78 6327.69,-5139.57 6326.46,-5146.47"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge279" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4973.06,-5421.36C5019.78,-5382.55 5123.71,-5302.96 5227,-5269.41 5511.35,-5177.02 5599.41,-5236.79 5898,-5221.41 5956.06,-5218.41 6902,-5228.61 6944,-5188.41 7020.79,-5114.9 6903.87,-4785.6 6980,-4711.41 7033.4,-4659.36 7227.48,-4661.19 7368.63,-4670.27"/>
<polygon fill="black" stroke="black" points="7368.49,-4673.77 7378.7,-4670.94 7368.95,-4666.79 7368.49,-4673.77"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge280" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5112.24,-5445C5139.96,-5450.57 5167.36,-5459.76 5191,-5474.41 5215.52,-5489.6 5203.12,-5512.22 5227,-5528.41 5256.43,-5548.35 5290.65,-5562.53 5325.51,-5572.58"/>
<polygon fill="black" stroke="black" points="5324.78,-5576.01 5335.35,-5575.3 5326.64,-5569.26 5324.78,-5576.01"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge281" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M4995.84,-5421.24C5050.68,-5397.1 5143.38,-5359.26 5227,-5339.41 5237.6,-5336.89 5248.45,-5334.55 5259.44,-5332.38"/>
<polygon fill="black" stroke="black" points="5260.41,-5335.76 5269.57,-5330.43 5259.09,-5328.88 5260.41,-5335.76"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node167" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node167"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="10120.5,-731.41 9832.5,-731.41 9832.5,-695.41 10120.5,-695.41 10120.5,-731.41"/>
<text text-anchor="middle" x="9976.5" y="-708.62" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge283" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9659.78,-753.43C9723.61,-756.26 9788.06,-759.11 9841.94,-761.49"/>
<polygon fill="black" stroke="black" points="9842.08,-765 9852.22,-761.95 9842.39,-758.01 9842.08,-765"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge282" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9659.78,-727.38C9715.93,-724.89 9772.57,-722.39 9822.06,-720.2"/>
<polygon fill="black" stroke="black" points="9822.35,-723.69 9832.19,-719.75 9822.04,-716.69 9822.35,-723.69"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node170" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node170"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7781,-1526.41 7269,-1526.41 7269,-1480.41 7781,-1480.41 7781,-1526.41"/>
<text text-anchor="middle" x="7525" y="-1494.97" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge287" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7781.11,-1518.78C7872.31,-1524.8 7975.81,-1532.23 8070,-1540.41 8135.93,-1546.13 8206.74,-1553.12 8273.51,-1560.09"/>
<polygon fill="black" stroke="black" points="8273.46,-1563.6 8283.77,-1561.16 8274.18,-1556.64 8273.46,-1563.6"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge288" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7710.75,-1526.45C7834.63,-1552.5 7989.34,-1607.87 8070,-1725.41 8127.82,-1809.66 8057.78,-3474.31 8106,-3564.41 8191.38,-3723.91 8396.58,-3819.9 8500.09,-3859.79"/>
<polygon fill="black" stroke="black" points="8498.88,-3863.08 8509.48,-3863.36 8501.37,-3856.53 8498.88,-3863.08"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge290" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7781.3,-1518.84C7901.9,-1520.17 8028.46,-1510.9 8070,-1470.41 8136.6,-1405.48 8045.07,-1123.68 8106,-1053.41 8174.26,-974.67 8288.53,-948.21 8385.59,-941.42"/>
<polygon fill="black" stroke="black" points="8386.07,-944.89 8395.83,-940.77 8385.63,-937.91 8386.07,-944.89"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge289" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7582.81,-1526.49C7764.62,-1600.37 8330.69,-1830.41 8508.2,-1902.54"/>
<polygon fill="black" stroke="black" points="8507.02,-1905.84 8517.6,-1906.36 8509.65,-1899.35 8507.02,-1905.84"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge291" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7781.31,-1488.15C7872.42,-1482.64 7975.8,-1476.33 8070,-1470.41 8185.82,-1463.13 8316.96,-1454.58 8414.7,-1448.15"/>
<polygon fill="black" stroke="black" points="8415.21,-1451.63 8424.95,-1447.48 8414.75,-1444.64 8415.21,-1451.63"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node171" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node171"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8713.5,-516.41 8412.5,-516.41 8412.5,-480.41 8713.5,-480.41 8713.5,-516.41"/>
<text text-anchor="middle" x="8563" y="-494.36" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node172" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6655,-1160.41 6187,-1160.41 6187,-1108.41 6655,-1108.41 6655,-1160.41"/>
<text text-anchor="middle" x="6421" y="-1124.26" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge295" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6655.05,-1147.11C7106.43,-1171.97 8057.07,-1225.64 8070,-1237.41 8145.88,-1306.45 8037.75,-1388.81 8106,-1465.41 8149.81,-1514.57 8210.88,-1545.4 8274.1,-1564.56"/>
<polygon fill="black" stroke="black" points="8273.28,-1567.96 8283.86,-1567.42 8275.24,-1561.24 8273.28,-1567.96"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge297" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6573.34,-1108.38C6692.53,-1097.43 6853.23,-1105.64 6944,-1206.41 7025.77,-1297.18 6896.55,-2216.17 6980,-2305.41 7146.28,-2483.2 7879.64,-2262.67 8070,-2414.41 8109.24,-2445.68 8071.93,-2484.57 8106,-2521.41 8205.09,-2628.51 8373.03,-2678.85 8475.1,-2700.63"/>
<polygon fill="black" stroke="black" points="8474.57,-2704.09 8485.07,-2702.71 8476,-2697.24 8474.57,-2704.09"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge298" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6655.22,-1133C6756.45,-1120.28 6868.81,-1087.91 6944,-1012.41 6994.51,-961.68 6924.01,-900.01 6980,-855.41 7169.45,-704.48 7852.25,-749.31 8070,-855.41 8093.34,-866.78 8083.26,-888.88 8106,-901.41 8190.3,-947.86 8296.74,-960.68 8385.58,-961.28"/>
<polygon fill="black" stroke="black" points="8385.77,-964.79 8395.77,-961.3 8385.78,-957.79 8385.77,-964.79"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge296" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6655.03,-1134.41C6882.54,-1134.41 7220.01,-1134.41 7400.12,-1134.41"/>
<polygon fill="black" stroke="black" points="7400.17,-1137.91 7410.17,-1134.41 7400.17,-1130.91 7400.17,-1137.91"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge299" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6655.03,-1138.7C6758.92,-1127.61 6873.52,-1094.95 6944,-1012.41 7016.04,-928.02 6899.15,-590.39 6980,-514.41 7031.16,-466.32 8010.09,-484.85 8401.9,-494.25"/>
<polygon fill="black" stroke="black" points="8402.1,-497.76 8412.18,-494.5 8402.27,-490.76 8402.1,-497.76"/>
</g>
<!-- check_translations.parse_po -->
<g id="node173" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-5735.41 1083.5,-5735.41 1083.5,-5683.41 1667.5,-5683.41 1667.5,-5735.41"/>
<text text-anchor="middle" x="1375.5" y="-5699.71" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node174" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-5731.91 318,-5731.91 318,-5686.91 983,-5686.91 983,-5731.91"/>
<text text-anchor="middle" x="650.5" y="-5701.03" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge300" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-5709.41C1013.14,-5709.41 1043.45,-5709.41 1073.19,-5709.41"/>
<polygon fill="black" stroke="black" points="1073.26,-5712.91 1083.26,-5709.41 1073.26,-5705.91 1073.26,-5712.91"/>
</g>
<!-- pending_chop.main -->
<g id="node175" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7688.5,-1006.41 7361.5,-1006.41 7361.5,-964.41 7688.5,-964.41 7688.5,-1006.41"/>
<text text-anchor="middle" x="7525" y="-977.32" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge301" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7627.12,-964.4C7750.49,-945.31 7956.58,-935.68 8070,-1053.41 8133.77,-1119.59 8047.28,-1394.71 8106,-1465.41 8148.58,-1516.66 8209.94,-1548.19 8273.9,-1567.35"/>
<polygon fill="black" stroke="black" points="8273.19,-1570.79 8283.77,-1570.2 8275.14,-1564.06 8273.19,-1570.79"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge302" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7688.73,-979.44C7878.4,-972.48 8190.69,-961.02 8385.91,-953.86"/>
<polygon fill="black" stroke="black" points="8386.12,-957.36 8395.98,-953.49 8385.86,-950.36 8386.12,-957.36"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node176" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node176"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="7934,-2903.91 7116,-2903.91 7116,-2846.91 7934,-2846.91 7934,-2903.91"/>
<text text-anchor="middle" x="7525" y="-2864.07" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge303" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7912.66,-2846.89C8294.04,-2826.44 8844.6,-2819.9 9020,-2935.41 9274.09,-3102.73 9345.2,-3513.32 9360.13,-3624.98"/>
<polygon fill="black" stroke="black" points="9356.69,-3625.65 9361.44,-3635.12 9363.63,-3624.75 9356.69,-3625.65"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge304" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7934.33,-2858.28C7980.46,-2851.87 8026.5,-2843.45 8070,-2832.41 8086.97,-2828.1 8089.03,-2820.71 8106,-2816.41 8224.46,-2786.35 8365.28,-2779.42 8458.77,-2778.67"/>
<polygon fill="black" stroke="black" points="8458.82,-2782.17 8468.8,-2778.61 8458.78,-2775.17 8458.82,-2782.17"/>
</g>
<!-- pending_embed.main -->
<g id="node177" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6683,-1275.41 6159,-1275.41 6159,-1215.41 6683,-1215.41 6683,-1275.41"/>
<text text-anchor="middle" x="6421" y="-1233.89" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge305" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6636.55,-1275.43C6740.12,-1288.83 6866.31,-1303.56 6980,-1312.41 7040.41,-1317.1 8021.77,-1314.72 8070,-1351.41 8112.29,-1383.57 8067.79,-1428.48 8106,-1465.41 8152.07,-1509.92 8212.36,-1539.1 8273.95,-1558.16"/>
<polygon fill="black" stroke="black" points="8273.26,-1561.61 8283.84,-1561.13 8275.27,-1554.9 8273.26,-1561.61"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge306" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6606.83,-1275.43C6724.67,-1305.1 6868.89,-1363.3 6944,-1476.41 7004.59,-1567.64 6903.78,-3368.76 6980,-3447.41 7032.1,-3501.16 7227.83,-3498.75 7369.6,-3489.09"/>
<polygon fill="black" stroke="black" points="7369.99,-3492.57 7379.72,-3488.38 7369.5,-3485.59 7369.99,-3492.57"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge307" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6597.16,-1275.47C6715.04,-1305.42 6863.18,-1363.94 6944,-1476.41 6994.79,-1547.08 6916.78,-1806.59 6980,-1866.41 7085.77,-1966.47 8100.43,-1940.61 8446.8,-1928.74"/>
<polygon fill="black" stroke="black" points="8446.98,-1932.24 8456.85,-1928.39 8446.74,-1925.24 8446.98,-1932.24"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge309" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6683.16,-1240.89C6776.78,-1239.47 6883.12,-1238.1 6980,-1237.41 7222.22,-1235.67 7875.33,-1093.27 8070,-1237.41 8114.07,-1270.03 8062.95,-1321.44 8106,-1355.41 8153.8,-1393.12 8308.27,-1395.67 8424.27,-1391.67"/>
<polygon fill="black" stroke="black" points="8424.45,-1395.16 8434.31,-1391.3 8424.19,-1388.17 8424.45,-1395.16"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge308" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6683.13,-1270.06C6777.82,-1264.5 6877.69,-1239.21 6944,-1169.41 7003.18,-1107.1 6917.06,-842.91 6980,-784.41 7191.03,-588.24 8118.39,-692.06 8446.48,-735.96"/>
<polygon fill="black" stroke="black" points="8446.11,-739.44 8456.48,-737.31 8447.04,-732.51 8446.11,-739.44"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge310" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6683.07,-1271.35C6778.34,-1266.11 6878.63,-1240.71 6944,-1169.41 7037.56,-1067.35 6879.31,-642.44 6980,-547.41 7024.04,-505.84 8009.61,-542.92 8070,-547.41 8503.4,-579.56 9011.8,-671.52 9240.78,-715.88"/>
<polygon fill="black" stroke="black" points="9240.32,-719.36 9250.8,-717.83 9241.65,-712.49 9240.32,-719.36"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge311" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6683.02,-1269.62C6777.55,-1263.96 6877.35,-1238.72 6944,-1169.41 6996.66,-1114.64 6923.52,-880.22 6980,-829.41 7064.26,-753.6 8934.16,-773.4 9020,-847.41 9093.05,-910.39 8995.05,-986.66 9056,-1061.41 9098.92,-1114.04 9168.12,-1143.45 9230.01,-1159.85"/>
<polygon fill="black" stroke="black" points="9229.31,-1163.29 9239.87,-1162.38 9231.05,-1156.51 9229.31,-1163.29"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge312" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6605.44,-1275.46C6723.28,-1305.18 6868.03,-1363.43 6944,-1476.41 7018.99,-1587.93 6900.58,-2576.99 6980,-2685.41 7042.79,-2771.11 7147.1,-2818.4 7247.68,-2844.41"/>
<polygon fill="black" stroke="black" points="7246.85,-2847.81 7257.4,-2846.86 7248.56,-2841.02 7246.85,-2847.81"/>
</g>
<!-- clean_data:cli -->
<g id="node179" class="node">
<title>clean_data:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-5647.41" rx="37.29" ry="18"/>
<text text-anchor="middle" x="1986" y="-5645.81" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;clean_data:cli -->
<!-- similar:cli -->
<g id="node180" class="node">
<title>similar:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-5647.41" rx="29.05" ry="18"/>
<text text-anchor="middle" x="2606.5" y="-5645.81" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;similar:cli -->
<!-- build_site:cli -->
<g id="node181" class="node">
<title>build_site:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-5647.41" rx="34.71" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-5645.81" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;build_site:cli -->
<!-- debug_dump:cli -->
<g id="node182" class="node">
<title>debug_dump:cli</title>
<g id="a_node182"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-5647.41" rx="41.11" ry="18"/>
<text text-anchor="middle" x="4058" y="-5645.81" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;debug_dump:cli -->
<!-- embed:cli -->
<g id="node183" class="node">
<title>embed:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5771.41" rx="29.05" ry="18"/>
<text text-anchor="middle" x="141" y="-5769.81" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- caption:cli -->
<g id="node184" class="node">
<title>caption:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5771.41" rx="30.28" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5769.81" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;caption:cli -->
<!-- tg_client:cli -->
<g id="node185" class="node">
<title>tg_client:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5771.41" rx="32.86" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5769.81" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;tg_client:cli -->
<!-- scan_ontology:cli -->
<g id="node186" class="node">
<title>scan_ontology:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-5771.41" rx="44.19" ry="18"/>
<text text-anchor="middle" x="1986" y="-5769.81" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;scan_ontology:cli -->
<!-- telegram_bot:cli -->
<g id="node187" class="node">
<title>telegram_bot:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-5771.41" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="2606.5" y="-5767.24" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;telegram_bot:cli -->
<!-- moderation:cli -->
<g id="node188" class="node">
<title>moderation:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-5771.41" rx="38.53" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-5769.81" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;moderation:cli -->
<!-- pending_caption:cli -->
<g id="node189" class="node">
<title>pending_caption:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-5771.41" rx="48.62" ry="18"/>
<text text-anchor="middle" x="4058" y="-5769.81" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;pending_caption:cli -->
<!-- check_translations:cli -->
<g id="node190" class="node">
<title>check_translations:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5825.41" rx="53.05" ry="18"/>
<text text-anchor="middle" x="141" y="-5823.81" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli -->
<g id="node191" class="node">
<title>pending_chop:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5825.41" rx="42.96" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5823.81" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- pending_embed:cli -->
<g id="node192" class="node">
<title>pending_embed:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-5825.41" rx="47.39" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-5823.81" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_embed:cli -->
<!-- build_site -->
<g id="node193" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-535.41" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4058" y="-531.71" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge326" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4114.12,-535.41C4233.9,-535.41 4523.52,-535.41 4727.09,-535.41"/>
<polygon fill="black" stroke="black" points="4727.32,-538.91 4737.32,-535.41 4727.32,-531.91 4727.32,-538.91"/>
</g>
<!-- caption -->
<g id="node194" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-2986.41" rx="44.69" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-2982.71" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge327" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M4991.81,-2986.41C5086.4,-2986.41 5310.15,-2986.41 5441.81,-2986.41"/>
<polygon fill="black" stroke="black" points="5441.91,-2989.91 5451.91,-2986.41 5441.91,-2982.91 5441.91,-2989.91"/>
</g>
<!-- check_translations -->
<g id="node195" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-5709.41" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-5705.71" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge328" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-5709.41C259.3,-5709.41 282.99,-5709.41 307.97,-5709.41"/>
<polygon fill="black" stroke="black" points="307.99,-5712.91 317.99,-5709.41 307.99,-5705.91 307.99,-5712.91"/>
</g>
<!-- chop -->
<g id="node196" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-2185.41" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-2181.71" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge329" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4979.12,-2185.41C5068.31,-2185.41 5324.07,-2185.41 5458.54,-2185.41"/>
<polygon fill="black" stroke="black" points="5458.8,-2188.91 5468.8,-2185.41 5458.8,-2181.91 5458.8,-2188.91"/>
</g>
<!-- clean_data -->
<g id="node197" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-4576.41" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-4572.71" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge330" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5604.58,-4576.41C5750.48,-4576.41 6129.43,-4576.41 6314.79,-4576.41"/>
<polygon fill="black" stroke="black" points="6314.83,-4579.91 6324.83,-4576.41 6314.83,-4572.91 6314.83,-4579.91"/>
</g>
<!-- debug_dump -->
<g id="node198" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-5366.41" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-5362.71" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge331" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5612.31,-5361.67C5730.38,-5353.3 5981.49,-5335.49 6172.57,-5321.95"/>
<polygon fill="black" stroke="black" points="6173.04,-5325.42 6182.77,-5321.22 6172.55,-5318.44 6173.04,-5325.42"/>
</g>
<!-- embed -->
<g id="node199" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-2494.41" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-2490.71" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge332" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5586.8,-2494.41C5718.69,-2494.41 6132.27,-2494.41 6322.5,-2494.41"/>
<polygon fill="black" stroke="black" points="6322.77,-2497.91 6332.77,-2494.41 6322.77,-2490.91 6322.77,-2497.91"/>
</g>
<!-- moderation -->
<g id="node200" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6421" cy="-1503.41" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6421" y="-1499.71" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge333" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6484.81,-1503.41C6631.16,-1503.41 7001.91,-1503.41 7258.52,-1503.41"/>
<polygon fill="black" stroke="black" points="7258.74,-1506.91 7268.74,-1503.41 7258.74,-1499.91 7258.74,-1506.91"/>
</g>
<!-- pending_caption -->
<g id="node201" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-1134.41" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-1130.71" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge334" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5631.74,-1134.41C5757.24,-1134.41 5995.02,-1134.41 6176.74,-1134.41"/>
<polygon fill="black" stroke="black" points="6176.98,-1137.91 6186.98,-1134.41 6176.98,-1130.91 6176.98,-1137.91"/>
</g>
<!-- pending_chop -->
<g id="node202" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6421" cy="-985.41" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6421" y="-981.71" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge335" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6496.02,-985.41C6669.51,-985.41 7106.21,-985.41 7350.94,-985.41"/>
<polygon fill="black" stroke="black" points="7351,-988.91 7361,-985.41 7351,-981.91 7351,-988.91"/>
</g>
<!-- pending_embed -->
<g id="node203" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-1245.41" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-1241.71" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge336" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5628.56,-1245.41C5746.87,-1245.41 5969.43,-1245.41 6148.48,-1245.41"/>
<polygon fill="black" stroke="black" points="6148.58,-1248.91 6158.58,-1245.41 6148.58,-1241.91 6148.58,-1248.91"/>
</g>
<!-- price_train -->
<g id="node204" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-2598.41" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-2594.71" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge337" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5605.61,-2598.41C5747.39,-2598.41 6105.08,-2598.41 6295.78,-2598.41"/>
<polygon fill="black" stroke="black" points="6295.86,-2601.91 6305.86,-2598.41 6295.86,-2594.91 6295.86,-2601.91"/>
</g>
<!-- scan_ontology -->
<g id="node205" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-2818.41" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-2814.71" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge338" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M5022.08,-2816.03C5093.49,-2813.75 5205.1,-2810.19 5306.77,-2806.95"/>
<polygon fill="black" stroke="black" points="5307.01,-2810.45 5316.89,-2806.63 5306.79,-2803.45 5307.01,-2810.45"/>
</g>
<!-- similar -->
<g id="node206" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5544.5" cy="-4472.41" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5544.5" y="-4468.71" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge339" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5587.68,-4472.41C5716.7,-4472.41 6109.21,-4472.41 6305.58,-4472.41"/>
<polygon fill="black" stroke="black" points="6305.64,-4475.91 6315.64,-4472.41 6305.64,-4468.91 6305.64,-4475.91"/>
</g>
<!-- telegram_bot -->
<g id="node207" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-5472.41" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4058" y="-5468.71" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge340" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4129.67,-5474.72C4267.46,-5479.22 4575.61,-5489.31 4771.27,-5495.71"/>
<polygon fill="black" stroke="black" points="4771.27,-5499.21 4781.37,-5496.04 4771.49,-5492.21 4771.27,-5499.21"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge341" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4129.67,-5470.09C4267.36,-5465.59 4575.16,-5455.52 4770.84,-5449.12"/>
<polygon fill="black" stroke="black" points="4771.07,-5452.61 4780.95,-5448.79 4770.84,-5445.62 4771.07,-5452.61"/>
</g>
<!-- tg_client -->
<g id="node208" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4005.41" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-4001.71" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge342" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-4005.41C232.34,-4005.41 292.58,-4005.41 356.22,-4005.41"/>
<polygon fill="black" stroke="black" points="356.46,-4008.91 366.46,-4005.41 356.46,-4001.91 356.46,-4008.91"/>
</g>
</g>
</svg>
