<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10219pt" height="5925pt"
 viewBox="0.00 0.00 10219.00 5925.11" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5921.11)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5921.11 10215,-5921.11 10215,4 -4,4"/>
<!-- token_utils.estimate_tokens -->
<g id="node1" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node1"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="7511,-1459.11 7275,-1459.11 7275,-1423.11 7511,-1423.11 7511,-1459.11"/>
<text text-anchor="middle" x="7393" y="-1437.07" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- message_utils.build_prompt -->
<g id="node2" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node2"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8609,-3462.11 8310,-3462.11 8310,-3426.11 8609,-3426.11 8609,-3462.11"/>
<text text-anchor="middle" x="8459.5" y="-3439.32" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node3" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node3"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7605.5,-3533.11 7180.5,-3533.11 7180.5,-3497.11 7605.5,-3497.11 7605.5,-3533.11"/>
<text text-anchor="middle" x="7393" y="-3509.24" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge1" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7605.62,-3506.32C7706.34,-3501.7 7828.44,-3495.46 7938,-3488.11 8059.5,-3479.97 8196.74,-3468.26 8299.79,-3458.97"/>
<polygon fill="black" stroke="black" points="8300.32,-3462.44 8309.97,-3458.05 8299.69,-3455.46 8300.32,-3462.44"/>
</g>
<!-- caption_io.read_caption -->
<g id="node4" class="node">
<title>caption_io.read_caption</title>
<g id="a_node4"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8625,-4287.61 8294,-4287.61 8294,-4250.61 8625,-4250.61 8625,-4287.61"/>
<text text-anchor="middle" x="8459.5" y="-4262.67" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge2" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7605.62,-3499.43C7721.3,-3503.24 7857.11,-3530.28 7938,-3623.11 8027.64,-3726 7877.96,-4139.17 7974,-4236.11 8081.49,-4344.62 8279.47,-4316.08 8386.04,-4290.12"/>
<polygon fill="black" stroke="black" points="8387.21,-4293.44 8396.06,-4287.62 8385.51,-4286.65 8387.21,-4293.44"/>
</g>
<!-- post_io.read_post -->
<g id="node5" class="node">
<title>post_io.read_post</title>
<g id="a_node5"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8738.5,-3637.11 8180.5,-3637.11 8180.5,-3561.11 8738.5,-3561.11 8738.5,-3637.11"/>
<text text-anchor="middle" x="8459.5" y="-3583.95" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge3" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7605.66,-3525.55C7706.38,-3531.04 7828.48,-3538.43 7938,-3547.11 8013.38,-3553.09 8094.78,-3560.68 8170.32,-3568.21"/>
<polygon fill="black" stroke="black" points="8170.16,-3571.71 8180.46,-3569.22 8170.86,-3564.74 8170.16,-3571.71"/>
</g>
<!-- notes_utils.load_json -->
<g id="node8" class="node">
<title>notes_utils.load_json</title>
<g id="a_node8"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9434.5,-2939.11 9186.5,-2939.11 9186.5,-2903.11 9434.5,-2903.11 9434.5,-2939.11"/>
<text text-anchor="middle" x="9310.5" y="-2915.42" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge211" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8552.14,-4287.62C8663.17,-4304.09 8847.47,-4311.21 8945,-4203.11 9026.85,-4112.4 8917.39,-3208.42 8981,-3104.11 9034.79,-3015.92 9147.58,-2966.84 9225.89,-2942.21"/>
<polygon fill="black" stroke="black" points="9227.21,-2945.47 9235.74,-2939.18 9225.16,-2938.77 9227.21,-2945.47"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node72" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node72"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9407,-4757.11 9214,-4757.11 9214,-4721.11 9407,-4721.11 9407,-4757.11"/>
<text text-anchor="middle" x="9310.5" y="-4735.87" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge213" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8549.21,-4250.58C8658.56,-4233.44 8842.46,-4224.25 8945,-4328.11 9048.96,-4433.42 8883.41,-4547.87 8981,-4659.11 9035.62,-4721.38 9129.84,-4739.31 9203.41,-4742.86"/>
<polygon fill="black" stroke="black" points="9203.51,-4746.37 9213.64,-4743.27 9203.79,-4739.37 9203.51,-4746.37"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node75" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node75"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9404,-4650.11 9217,-4650.11 9217,-4614.11 9404,-4614.11 9404,-4650.11"/>
<text text-anchor="middle" x="9310.5" y="-4628.87" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge214" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8551.24,-4250.57C8660.5,-4234.04 8842.11,-4226.09 8945,-4328.11 9032.85,-4415.21 8891.6,-4518.62 8981,-4604.11 9043.92,-4664.28 9148.03,-4662.84 9222.18,-4651.76"/>
<polygon fill="black" stroke="black" points="9223.1,-4655.15 9232.43,-4650.13 9222.01,-4648.24 9223.1,-4655.15"/>
</g>
<!-- notes_utils.read_md -->
<g id="node83" class="node">
<title>notes_utils.read_md</title>
<g id="a_node83"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9380.5,-4140.11 9240.5,-4140.11 9240.5,-4104.11 9380.5,-4104.11 9380.5,-4140.11"/>
<text text-anchor="middle" x="9310.5" y="-4118.87" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge210" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8625.1,-4279.49C8724.64,-4278.18 8850.19,-4262.44 8945,-4203.11 8969.45,-4187.81 8956.15,-4163.76 8981,-4149.11 9056.77,-4104.47 9159.97,-4103.7 9230.34,-4110.21"/>
<polygon fill="black" stroke="black" points="9230.18,-4113.72 9240.48,-4111.22 9230.88,-4106.75 9230.18,-4113.72"/>
</g>
<!-- caption_io._get_langs -->
<g id="node131" class="node">
<title>caption_io._get_langs</title>
<g id="a_node131"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9419.5,-4194.11 9201.5,-4194.11 9201.5,-4158.11 9419.5,-4158.11 9419.5,-4194.11"/>
<text text-anchor="middle" x="9310.5" y="-4171.33" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge212" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8625.2,-4251.07C8791.48,-4232.86 9044.18,-4205.18 9191.46,-4189.04"/>
<polygon fill="black" stroke="black" points="9191.89,-4192.52 9201.45,-4187.95 9191.13,-4185.56 9191.89,-4192.52"/>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge219" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8633.24,-3637.17C8734.07,-3666.71 8858.12,-3716.57 8945,-3797.11 8971.24,-3821.44 8958.25,-3841.5 8981,-3869.11 9066.2,-3972.54 9201.18,-4059.32 9268.5,-4098.98"/>
<polygon fill="black" stroke="black" points="9266.75,-4102.01 9277.15,-4104.04 9270.28,-4095.97 9266.75,-4102.01"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node85" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node85"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9479.5,-3860.61 9141.5,-3860.61 9141.5,-3823.61 9479.5,-3823.61 9479.5,-3860.61"/>
<text text-anchor="middle" x="9310.5" y="-3835.67" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge220" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8593.62,-3637.22C8774.39,-3688.95 9091.38,-3779.68 9235.01,-3820.79"/>
<polygon fill="black" stroke="black" points="9234.06,-3824.16 9244.63,-3823.55 9235.98,-3817.43 9234.06,-3824.16"/>
</g>
<!-- oom_utils.prefer_oom_kill -->
<g id="node6" class="node">
<title>oom_utils.prefer_oom_kill</title>
<g id="a_node6"><a xlink:title="Make this process the first OOM victim.">
<polygon fill="none" stroke="black" points="8624.5,-2350.11 8294.5,-2350.11 8294.5,-2314.11 8624.5,-2314.11 8624.5,-2350.11"/>
<text text-anchor="middle" x="8459.5" y="-2326.24" font-family="Times,serif" font-size="24.22">oom_utils.prefer_oom_kill</text>
</a>
</g>
</g>
<!-- build_site._load_ontology -->
<g id="node7" class="node">
<title>build_site._load_ontology</title>
<g id="a_node7"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8616,-2187.11 8303,-2187.11 8303,-2151.11 8616,-2151.11 8616,-2187.11"/>
<text text-anchor="middle" x="8459.5" y="-2163.52" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge4" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8616.02,-2157.48C8718.13,-2157.59 8849.87,-2173.28 8945,-2240.11 9185.28,-2408.92 9281.2,-2787.22 9303.91,-2893.1"/>
<polygon fill="black" stroke="black" points="9300.52,-2893.96 9306,-2903.02 9307.37,-2892.52 9300.52,-2893.96"/>
</g>
<!-- notes_utils.read_text -->
<g id="node28" class="node">
<title>notes_utils.read_text</title>
<g id="a_node28"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="10050.5,-4758.11 9836.5,-4758.11 9836.5,-4722.11 10050.5,-4722.11 10050.5,-4758.11"/>
<text text-anchor="middle" x="9943.5" y="-4735.33" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge119" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9385.76,-2939.2C9464.31,-2962.69 9584.4,-3012.05 9640,-3104.11 9725.96,-3246.44 9588.3,-4458.85 9676,-4600.11 9715.12,-4663.12 9792.76,-4699.3 9854.19,-4719.02"/>
<polygon fill="black" stroke="black" points="9853.32,-4722.42 9863.9,-4722.05 9855.4,-4715.73 9853.32,-4722.42"/>
</g>
<!-- build_site._load_clusters -->
<g id="node9" class="node">
<title>build_site._load_clusters</title>
<g id="a_node9"><a xlink:title="Return precomputed item clusters.">
<polygon fill="none" stroke="black" points="8637,-2111.11 8282,-2111.11 8282,-2073.11 8637,-2073.11 8637,-2111.11"/>
<text text-anchor="middle" x="8459.5" y="-2085.39" font-family="Times,serif" font-size="27.16">build_site._load_clusters</text>
</a>
</g>
</g>
<!-- build_site._load_clusters&#45;&gt;notes_utils.load_json -->
<g id="edge5" class="edge">
<title>build_site._load_clusters&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8585.64,-2073.11C8691.06,-2064.03 8840.93,-2068.13 8945,-2142.11 9214.39,-2333.62 9290.43,-2776.38 9306.08,-2892.7"/>
<polygon fill="black" stroke="black" points="9302.65,-2893.46 9307.41,-2902.92 9309.59,-2892.55 9302.65,-2893.46"/>
</g>
<!-- build_site._compile_locale -->
<g id="node10" class="node">
<title>build_site._compile_locale</title>
<g id="a_node10"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="7560,-773.11 7226,-773.11 7226,-737.11 7560,-737.11 7560,-773.11"/>
<text text-anchor="middle" x="7393" y="-749.24" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node11" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node11"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="6477.5,-781.61 6100.5,-781.61 6100.5,-740.61 6477.5,-740.61 6477.5,-781.61"/>
<text text-anchor="middle" x="6289" y="-753.87" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge6" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M6477.56,-760.09C6684.05,-758.97 7013.46,-757.17 7215.45,-756.08"/>
<polygon fill="black" stroke="black" points="7215.58,-759.57 7225.57,-756.02 7215.55,-752.57 7215.58,-759.57"/>
</g>
<!-- build_site._iter_lots -->
<g id="node12" class="node">
<title>build_site._iter_lots</title>
<g id="a_node12"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7619,-1780.61 7167,-1780.61 7167,-1723.61 7619,-1723.61 7619,-1780.61"/>
<text text-anchor="middle" x="7393" y="-1741.22" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge11" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7619.24,-1738.01C7748.85,-1735.34 7894.45,-1743.49 7938,-1789.11 8002.54,-1856.72 7916.18,-3397.68 7974,-3471.11 8021.9,-3531.95 8095.06,-3565.96 8170.12,-3584.44"/>
<polygon fill="black" stroke="black" points="8169.7,-3587.94 8180.24,-3586.84 8171.31,-3581.13 8169.7,-3587.94"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node13" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node13"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8626.5,-1840.11 8292.5,-1840.11 8292.5,-1804.11 8626.5,-1804.11 8626.5,-1840.11"/>
<text text-anchor="middle" x="8459.5" y="-1817.33" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge7" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7619.1,-1766.92C7816.86,-1779.92 8100.63,-1798.58 8282.26,-1810.52"/>
<polygon fill="black" stroke="black" points="8282.24,-1814.03 8292.45,-1811.19 8282.7,-1807.05 8282.24,-1814.03"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node14" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node14"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8597.5,-1778.11 8321.5,-1778.11 8321.5,-1742.11 8597.5,-1742.11 8597.5,-1778.11"/>
<text text-anchor="middle" x="8459.5" y="-1755.33" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge8" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7619.1,-1753.81C7827.79,-1755.37 8132.26,-1757.66 8311.4,-1759.01"/>
<polygon fill="black" stroke="black" points="8311.4,-1762.51 8321.43,-1759.08 8311.45,-1755.51 8311.4,-1762.51"/>
</g>
<!-- lot_io.read_lots -->
<g id="node15" class="node">
<title>lot_io.read_lots</title>
<g id="a_node15"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8565.5,-1700.11 8353.5,-1700.11 8353.5,-1664.11 8565.5,-1664.11 8565.5,-1700.11"/>
<text text-anchor="middle" x="8459.5" y="-1675.95" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge9" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7619.1,-1737.31C7840.75,-1722.74 8170.42,-1701.06 8343.26,-1689.69"/>
<polygon fill="black" stroke="black" points="8343.65,-1693.17 8353.4,-1689.03 8343.19,-1686.19 8343.65,-1693.17"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node16" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node16"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8588,-1590.61 8331,-1590.61 8331,-1553.61 8588,-1553.61 8588,-1590.61"/>
<text text-anchor="middle" x="8459.5" y="-1565.67" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge10" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7562.67,-1723.59C7779.08,-1687 8149.11,-1624.43 8338.74,-1592.36"/>
<polygon fill="black" stroke="black" points="8339.47,-1595.79 8348.75,-1590.67 8338.3,-1588.89 8339.47,-1595.79"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node17" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node17"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8536,-3842.11 8383,-3842.11 8383,-3806.11 8536,-3806.11 8536,-3842.11"/>
<text text-anchor="middle" x="8459.5" y="-3820.87" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge12" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7619.27,-1737.98C7748.9,-1735.3 7894.5,-1743.45 7938,-1789.11 8009.17,-1863.83 7914.13,-3562.08 7974,-3646.11 8065.49,-3774.52 8260.07,-3810.5 8372.82,-3820.45"/>
<polygon fill="black" stroke="black" points="8372.55,-3823.94 8382.8,-3821.28 8373.13,-3816.96 8372.55,-3823.94"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node120" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node120"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9605.5,-1844.61 9015.5,-1844.61 9015.5,-1799.61 9605.5,-1799.61 9605.5,-1844.61"/>
<text text-anchor="middle" x="9310.5" y="-1813.73" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge174" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8626.72,-1822.11C8734.23,-1822.11 8877.41,-1822.11 9004.87,-1822.11"/>
<polygon fill="black" stroke="black" points="9005.2,-1825.61 9015.2,-1822.11 9005.2,-1818.61 9005.2,-1825.61"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node121" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node121"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9487,-1161.11 9134,-1161.11 9134,-1125.11 9487,-1125.11 9487,-1161.11"/>
<text text-anchor="middle" x="9310.5" y="-1137.24" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge175" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8534.82,-1778.15C8642.09,-1799.26 8839.03,-1818.72 8945,-1709.11 9023.2,-1628.23 8906.04,-1288.01 8981,-1204.11 9017.11,-1163.7 9070.62,-1144.66 9124.02,-1136.77"/>
<polygon fill="black" stroke="black" points="9124.54,-1140.24 9133.98,-1135.43 9123.61,-1133.3 9124.54,-1140.24"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge198" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8552.68,-1664.11C8659.57,-1648.87 8835.11,-1642.03 8945,-1733.11 8987.87,-1768.65 8964.81,-1799.84 8981,-1853.11 9106.74,-2267.03 9262.69,-2770.23 9300.8,-2893.08"/>
<polygon fill="black" stroke="black" points="9297.52,-2894.33 9303.83,-2902.84 9304.21,-2892.26 9297.52,-2894.33"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node125" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node125"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9368,-1053.11 9253,-1053.11 9253,-1017.11 9368,-1017.11 9368,-1053.11"/>
<text text-anchor="middle" x="9310.5" y="-1031.87" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge199" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8565.75,-1697.7C8677.45,-1707.64 8850.57,-1702.99 8945,-1599.11 9017.4,-1519.47 8911.52,-1198.32 8981,-1116.11 9044.74,-1040.7 9166.4,-1029.4 9242.45,-1030.53"/>
<polygon fill="black" stroke="black" points="9242.78,-1034.04 9252.86,-1030.77 9242.94,-1027.04 9242.78,-1034.04"/>
</g>
<!-- build_site._copy_images -->
<g id="node18" class="node">
<title>build_site._copy_images</title>
<g id="a_node18"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="9474,-803.11 9147,-803.11 9147,-767.11 9474,-767.11 9474,-803.11"/>
<text text-anchor="middle" x="9310.5" y="-778.95" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node19" class="node">
<title>build_site._copy_static</title>
<g id="a_node19"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="7521,-719.11 7265,-719.11 7265,-683.11 7521,-683.11 7521,-719.11"/>
<text text-anchor="middle" x="7393" y="-695.81" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node20" class="node">
<title>build_site._load_state</title>
<g id="a_node20"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="6480,-1984.61 6098,-1984.61 6098,-1939.61 6480,-1939.61 6480,-1984.61"/>
<text text-anchor="middle" x="6289" y="-1953.73" font-family="Times,serif" font-size="33.60">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge13" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6479.71,-1984.64C6587.61,-1997.17 6725.3,-2012.7 6848,-2025.11 7375.19,-2078.44 8000.54,-2131.41 8292.67,-2155.57"/>
<polygon fill="black" stroke="black" points="8292.66,-2159.08 8302.92,-2156.41 8293.24,-2152.1 8292.66,-2159.08"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_clusters -->
<g id="edge14" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_clusters</title>
<path fill="none" stroke="black" d="M6480.21,-1967.62C6787.21,-1977.26 7410.82,-1999.99 7938,-2039.11 8053.72,-2047.7 8183.55,-2060.92 8284.61,-2072"/>
<polygon fill="black" stroke="black" points="8284.28,-2075.49 8294.6,-2073.1 8285.05,-2068.53 8284.28,-2075.49"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge15" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6397.91,-1984.63C6513.72,-2002.13 6696.55,-2009.6 6812,-1914.11 6856.55,-1877.27 6803.01,-1825.43 6848,-1789.11 6962.45,-1696.72 7138.38,-1702.86 7258.99,-1721.95"/>
<polygon fill="black" stroke="black" points="7258.59,-1725.43 7269.03,-1723.59 7259.72,-1718.52 7258.59,-1725.43"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge16" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6377.24,-1984.68C6494.55,-2009.18 6701.17,-2030.7 6812,-1914.11 6879.12,-1843.51 6782.26,-1110.01 6848,-1038.11 7177.71,-677.54 7549.13,-1190.93 7938,-895.11 7970.65,-870.28 7940.01,-833.09 7974,-810.11 8021.29,-778.14 8786.14,-780.57 9136.57,-783.39"/>
<polygon fill="black" stroke="black" points="9136.79,-786.89 9146.81,-783.47 9136.84,-779.89 9136.79,-786.89"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node21" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node21"><a xlink:title="Return mapping of lot id to embedding vector.&#10;&#10;Vectors are stored as ``numpy.float32`` arrays which drastically&#10;reduces memory usage compared to plain Python lists.">
<polygon fill="none" stroke="black" points="8739,-2629.11 8180,-2629.11 8180,-2583.11 8739,-2583.11 8739,-2629.11"/>
<text text-anchor="middle" x="8459.5" y="-2597.67" font-family="Times,serif" font-size="34.30">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge17" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6367.03,-1984.67C6474.12,-2015.37 6674.41,-2070.47 6848,-2105.11 7087.99,-2153 7747.59,-2108.38 7938,-2262.11 7973.78,-2291 7943.43,-2324.77 7974,-2359.11 8078.96,-2477.03 8253.5,-2546.28 8361.95,-2580.14"/>
<polygon fill="black" stroke="black" points="8361,-2583.51 8371.58,-2583.11 8363.06,-2576.82 8361,-2583.51"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node22" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node22"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7642,-2553.11 7144,-2553.11 7144,-2505.11 7642,-2505.11 7642,-2553.11"/>
<text text-anchor="middle" x="7393" y="-2519.99" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge18" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6389.84,-1984.66C6510.37,-2017.41 6709.59,-2090.39 6812,-2232.11 6871.57,-2314.56 6775.07,-2387.21 6848,-2458.11 6949.88,-2557.16 7117.75,-2564.88 7240.11,-2554.08"/>
<polygon fill="black" stroke="black" points="7240.69,-2557.54 7250.32,-2553.13 7240.04,-2550.57 7240.69,-2557.54"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node23" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node23"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8718.5,-1967.61 8200.5,-1967.61 8200.5,-1922.61 8718.5,-1922.61 8718.5,-1967.61"/>
<text text-anchor="middle" x="8459.5" y="-1936.73" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge19" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M6480.07,-1960.62C6866.72,-1957.59 7745.79,-1950.7 8190.38,-1947.22"/>
<polygon fill="black" stroke="black" points="8190.51,-1950.71 8200.48,-1947.14 8190.45,-1943.72 8190.51,-1950.71"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge162" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8739.13,-2614.98C8808.04,-2623.61 8880.56,-2638.38 8945,-2663.11 9088.44,-2718.18 9228.24,-2842.6 9284.07,-2896"/>
<polygon fill="black" stroke="black" points="9281.75,-2898.63 9291.38,-2903.05 9286.61,-2893.59 9281.75,-2898.63"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge163" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7642.22,-2515C8019.36,-2497.12 8716.94,-2479.06 8945,-2574.11 9110.94,-2643.28 9245.61,-2825.43 9292.07,-2894.26"/>
<polygon fill="black" stroke="black" points="9289.32,-2896.45 9297.79,-2902.82 9295.15,-2892.56 9289.32,-2896.45"/>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge164" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8718.73,-1963.6C8798.56,-1980.36 8881.99,-2010.53 8945,-2064.11 9218.81,-2296.97 9291.94,-2771.68 9306.45,-2892.59"/>
<polygon fill="black" stroke="black" points="9303.01,-2893.33 9307.64,-2902.86 9309.97,-2892.53 9303.01,-2893.33"/>
</g>
<!-- build_site._categorise -->
<g id="node24" class="node">
<title>build_site._categorise</title>
<g id="a_node24"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal``. ``sell_item`` lots are further&#10;grouped by ``clusters`` when available and fall back to ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="8945,-570.61 7974,-570.61 7974,-467.61 8945,-467.61 8945,-570.61"/>
<text text-anchor="middle" x="8459.5" y="-497.17" font-family="Times,serif" font-size="86.80">build_site._categorise</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node25" class="node">
<title>lot_io.get_seller</title>
<g id="a_node25"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="9411,-640.11 9210,-640.11 9210,-604.11 9411,-604.11 9411,-640.11"/>
<text text-anchor="middle" x="9310.5" y="-616.52" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge20" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8885.31,-570.65C9001.74,-584.78 9118.13,-598.9 9199.46,-608.76"/>
<polygon fill="black" stroke="black" points="9199.35,-612.28 9209.7,-610.01 9200.2,-605.33 9199.35,-612.28"/>
</g>
<!-- build_site._render_site -->
<g id="node26" class="node">
<title>build_site._render_site</title>
<g id="a_node26"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="6812,-612.61 5766,-612.61 5766,-505.61 6812,-505.61 6812,-612.61"/>
<text text-anchor="middle" x="6289" y="-536.49" font-family="Times,serif" font-size="90.16">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge24" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6812.08,-570.01C7541.48,-585.23 8818.97,-611.88 9199.53,-619.82"/>
<polygon fill="black" stroke="black" points="9199.64,-623.32 9209.71,-620.03 9199.79,-616.32 9199.64,-623.32"/>
</g>
<!-- build_site.build_page -->
<g id="node27" class="node">
<title>build_site.build_page</title>
<g id="a_node27"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="7862.5,-3479.11 6923.5,-3479.11 6923.5,-3377.11 7862.5,-3377.11 7862.5,-3479.11"/>
<text text-anchor="middle" x="7393" y="-3406.57" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge21" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6804.04,-612.7C6806.75,-615.43 6809.4,-618.23 6812,-621.11 6907.09,-726.66 6770.49,-3059.05 6848,-3178.11 6912.33,-3276.94 7026.48,-3337.27 7133.67,-3373.82"/>
<polygon fill="black" stroke="black" points="7132.76,-3377.21 7143.35,-3377.07 7134.98,-3370.57 7132.76,-3377.21"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge22" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6734.72,-505.59C7262.94,-450.47 8170.14,-382.47 8945,-458.11 9258.34,-488.7 9438.97,-352.82 9640,-595.11 9711.04,-680.74 9618.03,-4505.15 9676,-4600.11 9714.51,-4663.21 9791.81,-4699.32 9853.29,-4719"/>
<polygon fill="black" stroke="black" points="9852.42,-4722.4 9863.01,-4722.02 9854.5,-4715.71 9852.42,-4722.4"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node29" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node29"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8624,-763.11 8295,-763.11 8295,-727.11 8624,-727.11 8624,-763.11"/>
<text text-anchor="middle" x="8459.5" y="-739.42" font-family="Times,serif" font-size="22.12">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge23" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6812.33,-610.32C6824.33,-611.28 6836.23,-612.22 6848,-613.11 7331.79,-650.05 7455.76,-620.59 7938,-674.11 7954.12,-675.9 7957.96,-677.7 7974,-680.11 8084.64,-696.75 8209.82,-713.49 8305.22,-725.82"/>
<polygon fill="black" stroke="black" points="8304.87,-729.3 8315.23,-727.11 8305.76,-722.36 8304.87,-729.3"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge26" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7862.77,-3432.59C7890.6,-3446.64 7916.12,-3464.84 7938,-3488.11 7994.99,-3548.74 7915.75,-4176.69 7974,-4236.11 8081.17,-4345.44 8280.06,-4316.28 8386.64,-4290.08"/>
<polygon fill="black" stroke="black" points="8387.51,-4293.48 8396.35,-4287.64 8385.8,-4286.69 8387.51,-4293.48"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge27" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7862.52,-3476.75C7888.08,-3480.35 7913.38,-3484.14 7938,-3488.11 8056.51,-3507.24 8188.8,-3535.54 8290.35,-3558.78"/>
<polygon fill="black" stroke="black" points="8289.86,-3562.26 8300.39,-3561.08 8291.43,-3555.44 8289.86,-3562.26"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge28" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7862.51,-3439.05C7889.79,-3451.76 7915.31,-3467.88 7938,-3488.11 7991.75,-3536.05 7926.44,-3592.03 7974,-3646.11 8076.87,-3763.08 8263.42,-3803.27 8372.58,-3817.02"/>
<polygon fill="black" stroke="black" points="8372.22,-3820.5 8382.57,-3818.23 8373.07,-3813.55 8372.22,-3820.5"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge25" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7642.6,-3377.03C7752.52,-3340.84 7871.67,-3279.89 7938,-3178.11 8009.84,-3067.89 7886.62,-908.48 7974,-810.11 8069.61,-702.48 8251.24,-708.95 8362.91,-725.56"/>
<polygon fill="black" stroke="black" points="8362.41,-729.03 8372.83,-727.09 8363.48,-722.11 8362.41,-729.03"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge115" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9836.28,-4755.37C9804.38,-4765.84 9840.12,-4776.11 9943.5,-4776.11 10033.15,-4776.11 10071.93,-4768.39 10059.85,-4759.51"/>
<polygon fill="black" stroke="black" points="10061.27,-4756.31 10050.72,-4755.37 10058.38,-4762.69 10061.27,-4756.31"/>
</g>
<!-- build_site.main -->
<g id="node30" class="node">
<title>build_site.main</title>
<g id="a_node30"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5663.5,-640.61 5245.5,-640.61 5245.5,-575.61 5663.5,-575.61 5663.5,-640.61"/>
<text text-anchor="middle" x="5454.5" y="-595.06" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge29" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5523.38,-640.63C5585.11,-668.56 5679.52,-707.22 5766,-726.11 5871.63,-749.19 5991.89,-758.37 6090.34,-761.59"/>
<polygon fill="black" stroke="black" points="6090.3,-765.09 6100.4,-761.9 6090.51,-758.1 6090.3,-765.09"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge30" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5550.35,-640.63C5611.16,-659.76 5692.26,-682.11 5766,-692.11 6051.76,-730.89 6917.06,-713.51 7254.84,-704.9"/>
<polygon fill="black" stroke="black" points="7255.02,-708.4 7264.93,-704.65 7254.84,-701.4 7255.02,-708.4"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge31" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5498.35,-640.79C5562.55,-692.68 5681.33,-800.75 5730,-924.11 5770.4,-1026.51 5690.35,-1834.16 5766,-1914.11 5873.68,-2027.93 6072.61,-2010.37 6191.36,-1986.66"/>
<polygon fill="black" stroke="black" points="6192.08,-1990.09 6201.18,-1984.65 6190.68,-1983.23 6192.08,-1990.09"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge32" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5524.2,-575.51C5585.9,-548.15 5679.77,-511.19 5766,-496.11 6173.44,-424.88 7304.18,-463.12 7963.54,-493.52"/>
<polygon fill="black" stroke="black" points="7963.55,-497.02 7973.7,-493.99 7963.87,-490.03 7963.55,-497.02"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge33" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5663.7,-595.86C5692.7,-594.15 5723.53,-592.34 5755.34,-590.47"/>
<polygon fill="black" stroke="black" points="5755.92,-593.94 5765.7,-589.86 5755.51,-586.95 5755.92,-593.94"/>
</g>
<!-- config_utils.load_config -->
<g id="node31" class="node">
<title>config_utils.load_config</title>
<g id="a_node31"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10160,-3061.61 9727,-3061.61 9727,-3014.61 10160,-3014.61 10160,-3061.61"/>
<text text-anchor="middle" x="9943.5" y="-3029.61" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge34" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5503.68,-575.5C5562.59,-537.67 5666.74,-477.3 5766,-452.11 6116.41,-363.21 7030.49,-401.11 7392,-401.11 7392,-401.11 7392,-401.11 8460.5,-401.11 8985.07,-401.11 9271.09,-71.18 9640,-444.11 9694.91,-499.62 9666.42,-1771.62 9676,-1849.11 9733.57,-2314.57 9891.3,-2865.58 9932.53,-3004.87"/>
<polygon fill="black" stroke="black" points="9929.2,-3005.96 9935.4,-3014.55 9935.91,-3003.96 9929.2,-3005.96"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node32" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node32"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7631.5,-2449.11 7154.5,-2449.11 7154.5,-2409.11 7631.5,-2409.11 7631.5,-2449.11"/>
<text text-anchor="middle" x="7393" y="-2422.04" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge35" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5498.5,-640.73C5562.9,-692.54 5681.94,-800.51 5730,-924.11 5757.43,-994.66 5713.72,-2231.37 5766,-2286.11 5926.95,-2454.66 6598,-2269.81 6812,-2362.11 6831.93,-2370.71 6828.03,-2386.62 6848,-2395.11 6939.88,-2434.2 7048.44,-2446.84 7144.32,-2448.2"/>
<polygon fill="black" stroke="black" points="7144.41,-2451.7 7154.45,-2448.3 7144.48,-2444.7 7144.41,-2451.7"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node33" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node33"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="9490,-129.11 9131,-129.11 9131,-93.11 9490,-93.11 9490,-129.11"/>
<text text-anchor="middle" x="9310.5" y="-105.42" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge36" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5464.44,-575.48C5491.59,-483.54 5582.65,-222.38 5766,-119.11 6193.61,121.73 7483.25,-78.23 7974,-73.11 8405.53,-68.62 8514.03,-50.71 8945,-73.11 9015.71,-76.79 9093.82,-84.45 9159.54,-91.94"/>
<polygon fill="black" stroke="black" points="9159.23,-95.42 9169.56,-93.09 9160.03,-88.47 9159.23,-95.42"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node34" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node34"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6606.5,-683.61 5971.5,-683.61 5971.5,-630.61 6606.5,-630.61 6606.5,-683.61"/>
<text text-anchor="middle" x="6289" y="-646.91" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge37" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5663.7,-620.37C5753.56,-625.66 5860.84,-631.97 5960.91,-637.86"/>
<polygon fill="black" stroke="black" points="5961.01,-641.37 5971.19,-638.47 5961.42,-634.39 5961.01,-641.37"/>
</g>
<!-- price_utils.load_price_model -->
<g id="node35" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node35"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="8694,-2291.11 8225,-2291.11 8225,-2249.11 8694,-2249.11 8694,-2291.11"/>
<text text-anchor="middle" x="8459.5" y="-2262.03" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge38" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M5498.39,-640.78C5562.64,-692.64 5681.49,-800.68 5730,-924.11 5773.47,-1034.72 5684.91,-1906.23 5766,-1993.11 5786.98,-2015.59 7574.94,-2186.61 8225.32,-2248.15"/>
<polygon fill="black" stroke="black" points="8225,-2251.63 8235.28,-2249.09 8225.66,-2244.66 8225,-2251.63"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node36" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node36"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6649.5,-285.61 5928.5,-285.61 5928.5,-226.61 6649.5,-226.61 6649.5,-285.61"/>
<text text-anchor="middle" x="6289" y="-244.43" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge39" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5491.83,-575.24C5547.06,-526.98 5657.25,-437.28 5766,-387.11 5868.33,-339.91 5990.1,-308.11 6090.28,-287.67"/>
<polygon fill="black" stroke="black" points="6091.11,-291.07 6100.22,-285.67 6089.72,-284.21 6091.11,-291.07"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node37" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node37"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="8829.5,-140.11 8089.5,-140.11 8089.5,-82.11 8829.5,-82.11 8829.5,-140.11"/>
<text text-anchor="middle" x="8459.5" y="-99.83" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge40" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5469.62,-575.34C5505.58,-496.53 5609.01,-297.07 5766,-217.11 5966.48,-115.01 7386.01,-106.5 8079.31,-108.58"/>
<polygon fill="black" stroke="black" points="8079.45,-112.08 8089.46,-108.61 8079.47,-105.08 8079.45,-112.08"/>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge289" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8583.77,-2249.09C8687.86,-2237.95 8836.81,-2238.14 8945,-2305.11 9174.86,-2447.41 9277.28,-2792.72 9302.86,-2893.23"/>
<polygon fill="black" stroke="black" points="9299.47,-2894.11 9305.29,-2902.96 9306.26,-2892.41 9299.47,-2894.11"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node40" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node40"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="7938,-372.61 6848,-372.61 6848,-295.61 7938,-295.61 7938,-372.61"/>
<text text-anchor="middle" x="7393" y="-318.21" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge291" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6649.69,-281.57C6709.9,-285.83 6773.59,-290.34 6837.34,-294.85"/>
<polygon fill="black" stroke="black" points="6837.35,-298.36 6847.57,-295.58 6837.84,-291.38 6837.35,-298.36"/>
</g>
<!-- price_utils.predict_price -->
<g id="node165" class="node">
<title>price_utils.predict_price</title>
<g id="a_node165"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7598,-277.61 7188,-277.61 7188,-234.61 7598,-234.61 7598,-277.61"/>
<text text-anchor="middle" x="7393" y="-247.97" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge292" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6649.69,-256.11C6824.19,-256.11 7027.92,-256.11 7177.76,-256.11"/>
<polygon fill="black" stroke="black" points="7178,-259.61 7188,-256.11 7178,-252.61 7178,-259.61"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node166" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node166"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8653,-235.61 8266,-235.61 8266,-196.61 8653,-196.61 8653,-235.61"/>
<text text-anchor="middle" x="8459.5" y="-209.21" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge293" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6649.71,-233.48C6715.64,-230.09 6783.87,-227.07 6848,-225.11 7354.04,-209.65 7949.92,-211.56 8255.4,-214"/>
<polygon fill="black" stroke="black" points="8255.67,-217.5 8265.7,-214.09 8255.73,-210.5 8255.67,-217.5"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node168" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node168"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9567,-187.11 9054,-187.11 9054,-149.11 9567,-149.11 9567,-187.11"/>
<text text-anchor="middle" x="9310.5" y="-161.39" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge294" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6597.84,-226.61C6679.12,-219.8 6766.81,-213.32 6848,-209.11 7646.22,-167.74 8591.8,-164.94 9043.47,-166.43"/>
<polygon fill="black" stroke="black" points="9043.71,-169.93 9053.72,-166.46 9043.73,-162.93 9043.71,-169.93"/>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge295" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8829.8,-111.11C8930.24,-111.11 9034.87,-111.11 9120.69,-111.11"/>
<polygon fill="black" stroke="black" points="9120.79,-114.61 9130.79,-111.11 9120.79,-107.61 9120.79,-114.61"/>
</g>
<!-- price_train._iter_lots -->
<g id="node38" class="node">
<title>price_train._iter_lots</title>
<g id="a_node38"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7548.5,-1366.61 7237.5,-1366.61 7237.5,-1327.61 7548.5,-1327.61 7548.5,-1366.61"/>
<text text-anchor="middle" x="7393" y="-1340.21" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge41" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7548.74,-1336.17C7689.23,-1329.8 7882.66,-1331.11 7938,-1381.11 8010.86,-1446.95 7904.77,-1529.47 7974,-1599.11 8069.53,-1695.22 8232.96,-1704.04 8343.3,-1696.87"/>
<polygon fill="black" stroke="black" points="8343.75,-1700.35 8353.48,-1696.16 8343.26,-1693.37 8343.75,-1700.35"/>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge42" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7548.51,-1337.18C7688.29,-1331.6 7880.73,-1333.53 7938,-1381.11 7988.41,-1423 7924.36,-1481.32 7974,-1524.11 8080.78,-1616.17 8254.09,-1608.65 8361.91,-1592.22"/>
<polygon fill="black" stroke="black" points="8362.47,-1595.68 8371.81,-1590.66 8361.38,-1588.76 8362.47,-1595.68"/>
</g>
<!-- price_train.main -->
<g id="node39" class="node">
<title>price_train.main</title>
<g id="a_node39"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6404,-1362.11 6174,-1362.11 6174,-1326.11 6404,-1326.11 6404,-1362.11"/>
<text text-anchor="middle" x="6289" y="-1337.95" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge44" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6372.26,-1326.1C6488.55,-1306.01 6699.38,-1290.31 6812,-1409.11 6890.16,-1491.57 6771.72,-1834.92 6848,-1919.11 7177.97,-2283.31 7595.43,-1752.74 7938,-2105.11 8017.48,-2186.87 7907.75,-2266.32 7974,-2359.11 8062.29,-2482.77 8231.05,-2548.57 8344.21,-2580.39"/>
<polygon fill="black" stroke="black" points="8343.39,-2583.79 8353.96,-2583.08 8345.25,-2577.04 8343.39,-2583.79"/>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge45" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6370.33,-1326.07C6486.71,-1305.2 6700.47,-1287.73 6812,-1409.11 6880.77,-1483.95 6781.84,-2245.96 6848,-2323.11 6920.05,-2407.14 7037.19,-2437.05 7144.35,-2444.52"/>
<polygon fill="black" stroke="black" points="7144.16,-2448.01 7154.36,-2445.15 7144.6,-2441.03 7144.16,-2448.01"/>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge43" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6404.04,-1344.42C6599.81,-1344.96 7000.56,-1346.05 7226.88,-1346.66"/>
<polygon fill="black" stroke="black" points="7227.18,-1350.16 7237.19,-1346.69 7227.2,-1343.17 7227.18,-1350.16"/>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge46" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6387.13,-1326.06C6508.75,-1297.86 6713.12,-1230.82 6812,-1086.11 6915.7,-934.35 6751.98,-830.85 6848,-674.11 6941.94,-520.78 7133.78,-425.62 7262.66,-376.24"/>
<polygon fill="black" stroke="black" points="7264.1,-379.43 7272.21,-372.62 7261.62,-372.89 7264.1,-379.43"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node41" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node41"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="8672,-1274.61 8247,-1274.61 8247,-1235.61 8672,-1235.61 8672,-1274.61"/>
<text text-anchor="middle" x="8459.5" y="-1248.21" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge47" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6404.07,-1338.41C6516.83,-1332.86 6694.29,-1324.37 6848,-1318.11 7332.34,-1298.39 7453.68,-1300.19 7938,-1280.11 8036.01,-1276.05 8144.36,-1270.95 8236.72,-1266.41"/>
<polygon fill="black" stroke="black" points="8236.93,-1269.9 8246.75,-1265.92 8236.59,-1262.91 8236.93,-1269.9"/>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge287" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7938.42,-364.86C8320.79,-375.06 8790.47,-361.04 8945,-244.11 8984.01,-214.6 8942.44,-170.21 8981,-140.11 9040.9,-93.36 9126.99,-87.29 9196.01,-92.28"/>
<polygon fill="black" stroke="black" points="9195.81,-95.78 9206.06,-93.1 9196.38,-88.8 9195.81,-95.78"/>
</g>
<!-- notes_utils.write_json -->
<g id="node79" class="node">
<title>notes_utils.write_json</title>
<g id="a_node79"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9404.5,-1249.11 9216.5,-1249.11 9216.5,-1213.11 9404.5,-1213.11 9404.5,-1249.11"/>
<text text-anchor="middle" x="9310.5" y="-1227.07" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge288" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8672,-1249.13C8842.28,-1244.32 9074.28,-1237.76 9206.32,-1234.03"/>
<polygon fill="black" stroke="black" points="9206.54,-1237.53 9216.44,-1233.74 9206.34,-1230.53 9206.54,-1237.53"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node42" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node42"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4991.5,-5649.11 4805.5,-5649.11 4805.5,-5613.11 4991.5,-5613.11 4991.5,-5649.11"/>
<text text-anchor="middle" x="4898.5" y="-5627.41" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node43" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node43"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1393.5,-5402.11 1163.5,-5402.11 1163.5,-5366.11 1393.5,-5366.11 1393.5,-5402.11"/>
<text text-anchor="middle" x="1278.5" y="-5378.81" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node44" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node44"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5082,-5170.61 4715,-5170.61 4715,-5133.61 5082,-5133.61 5082,-5170.61"/>
<text text-anchor="middle" x="4898.5" y="-5145.67" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node45" class="node">
<title>tg_client._write_md</title>
<g id="a_node45"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5523,-5449.11 5386,-5449.11 5386,-5413.11 5523,-5413.11 5523,-5449.11"/>
<text text-anchor="middle" x="5454.5" y="-5427.87" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node46" class="node">
<title>post_io.write_post</title>
<g id="a_node46"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6455,-5438.11 6123,-5438.11 6123,-5392.11 6455,-5392.11 6455,-5438.11"/>
<text text-anchor="middle" x="6289" y="-5406.67" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge48" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5523.27,-5429.81C5650.62,-5427.36 5929.3,-5422.01 6112.73,-5418.48"/>
<polygon fill="black" stroke="black" points="6112.83,-5421.98 6122.76,-5418.29 6112.69,-5414.98 6112.83,-5421.98"/>
</g>
<!-- post_io.get_contact -->
<g id="node70" class="node">
<title>post_io.get_contact</title>
<g id="a_node70"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7492.5,-5487.11 7293.5,-5487.11 7293.5,-5451.11 7492.5,-5451.11 7492.5,-5487.11"/>
<text text-anchor="middle" x="7393" y="-5464.33" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge222" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6455.28,-5423.21C6683.64,-5434.4 7089.37,-5454.28 7283.13,-5463.78"/>
<polygon fill="black" stroke="black" points="7283.17,-5467.28 7293.33,-5464.28 7283.51,-5460.29 7283.17,-5467.28"/>
</g>
<!-- notes_utils.write_md -->
<g id="node84" class="node">
<title>notes_utils.write_md</title>
<g id="a_node84"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7506,-5375.11 7280,-5375.11 7280,-5339.11 7506,-5339.11 7506,-5375.11"/>
<text text-anchor="middle" x="7393" y="-5352.32" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge221" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6455.1,-5405.69C6566.16,-5399.41 6715.87,-5391.06 6848,-5384.11 6992.91,-5376.49 7159.57,-5368.31 7269.83,-5362.97"/>
<polygon fill="black" stroke="black" points="7270.17,-5366.46 7279.99,-5362.48 7269.83,-5359.47 7270.17,-5366.46"/>
</g>
<!-- post_io.get_timestamp -->
<g id="node133" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node133"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7564.5,-5433.11 7221.5,-5433.11 7221.5,-5393.11 7564.5,-5393.11 7564.5,-5433.11"/>
<text text-anchor="middle" x="7393" y="-5406.04" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge223" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6455.28,-5414.81C6658.28,-5414.45 7001.43,-5413.82 7211.25,-5413.44"/>
<polygon fill="black" stroke="black" points="7211.46,-5416.94 7221.45,-5413.42 7211.45,-5409.94 7211.46,-5416.94"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node47" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node47"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7632.5,-4028.61 7153.5,-4028.61 7153.5,-3985.61 7632.5,-3985.61 7632.5,-4028.61"/>
<text text-anchor="middle" x="7393" y="-3998.97" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge49" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7632.65,-4017.43C7756.21,-4017.75 7890.9,-4008.64 7938,-3971.11 7981.55,-3936.42 7930.27,-3885.58 7974,-3851.11 8091.14,-3758.79 8277.97,-3781.25 8382.09,-3803.88"/>
<polygon fill="black" stroke="black" points="8381.38,-3807.31 8391.9,-3806.07 8382.9,-3800.48 8381.38,-3807.31"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node48" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node48"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6422,-4113.11 6156,-4113.11 6156,-4077.11 6422,-4077.11 6422,-4113.11"/>
<text text-anchor="middle" x="6289" y="-4090.33" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge50" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6422.27,-4102.97C6529.48,-4105.57 6683.34,-4100.69 6812,-4063.11 6829.57,-4057.98 6830.44,-4048.29 6848,-4043.11 6942.06,-4015.39 7049.08,-4004.21 7143.17,-4000.73"/>
<polygon fill="black" stroke="black" points="7143.53,-4004.22 7153.4,-4000.38 7143.29,-3997.22 7143.53,-4004.22"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node49" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node49"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3283,-3777.11 3044,-3777.11 3044,-3741.11 3283,-3741.11 3283,-3777.11"/>
<text text-anchor="middle" x="3163.5" y="-3755.07" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge51" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3283.21,-3760.04C3563.9,-3762.15 4290.49,-3767.11 4897.5,-3767.11 4897.5,-3767.11 4897.5,-3767.11 6290,-3767.11 7022.52,-3767.11 7206.03,-3762.6 7938,-3791.11 8091.23,-3797.08 8269.52,-3809.6 8372.65,-3817.38"/>
<polygon fill="black" stroke="black" points="8372.47,-3820.88 8382.7,-3818.15 8373,-3813.9 8372.47,-3820.88"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node50" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node50"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5143,-5115.61 4654,-5115.61 4654,-5072.61 5143,-5072.61 5143,-5115.61"/>
<text text-anchor="middle" x="4898.5" y="-5085.97" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node51" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node51"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5666.5,-5394.61 5242.5,-5394.61 5242.5,-5349.61 5666.5,-5349.61 5666.5,-5394.61"/>
<text text-anchor="middle" x="5454.5" y="-5363.73" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node52" class="node">
<title>tg_client._extract_author</title>
<g id="a_node52"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6652,-5158.11 5926,-5158.11 5926,-5088.11 6652,-5088.11 6652,-5158.11"/>
<text text-anchor="middle" x="6289" y="-5109.31" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node53" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node53"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7599,-5207.11 7187,-5207.11 7187,-5169.11 7599,-5169.11 7599,-5207.11"/>
<text text-anchor="middle" x="7393" y="-5181.39" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge52" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6652.36,-5144.49C6825.75,-5154.71 7027.49,-5166.61 7176.44,-5175.4"/>
<polygon fill="black" stroke="black" points="7176.43,-5178.9 7186.62,-5176 7176.84,-5171.92 7176.43,-5178.9"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node54" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node54"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5593.5,-5217.11 5315.5,-5217.11 5315.5,-5181.11 5593.5,-5181.11 5593.5,-5217.11"/>
<text text-anchor="middle" x="5454.5" y="-5194.33" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node55" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node55"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8607.5,-5671.11 8311.5,-5671.11 8311.5,-5635.11 8607.5,-5635.11 8607.5,-5671.11"/>
<text text-anchor="middle" x="8459.5" y="-5647.42" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node56" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node56"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5141,-5237.61 4656,-5237.61 4656,-5188.61 5141,-5188.61 5141,-5237.61"/>
<text text-anchor="middle" x="4898.5" y="-5203.49" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge54" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5133.63,-5188.56C5136.91,-5185.62 5140.04,-5182.48 5143,-5179.11 5195.09,-5120.01 5144.91,-2414.14 5179,-2343.11 5325.19,-2038.53 5456.33,-1995.19 5766,-1860.11 5987.7,-1763.41 7732.6,-1586.39 7938,-1714.11 7968.72,-1733.22 7943.99,-1766.92 7974,-1787.11 8088.88,-1864.43 8255.72,-1856.96 8360.6,-1841.66"/>
<polygon fill="black" stroke="black" points="8361.19,-1845.12 8370.55,-1840.16 8360.14,-1838.19 8361.19,-1845.12"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node57" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node57"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5587.5,-5649.11 5321.5,-5649.11 5321.5,-5613.11 5587.5,-5613.11 5587.5,-5649.11"/>
<text text-anchor="middle" x="5454.5" y="-5626.95" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge53" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M5132.74,-5237.64C5136.32,-5240.58 5139.74,-5243.73 5143,-5247.11 5198.29,-5304.56 5122.55,-5547.8 5179,-5604.11 5222.66,-5647.66 5291.84,-5654.23 5349.84,-5650.01"/>
<polygon fill="black" stroke="black" points="5350.48,-5653.46 5360.15,-5649.13 5349.89,-5646.49 5350.48,-5653.46"/>
</g>
<!-- caption_io.has_caption -->
<g id="node58" class="node">
<title>caption_io.has_caption</title>
<g id="a_node58"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8537,-5140.11 8382,-5140.11 8382,-5104.11 8537,-5104.11 8537,-5140.11"/>
<text text-anchor="middle" x="8459.5" y="-5118.87" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge55" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5082.81,-5188.59C5103.14,-5185.55 5123.53,-5182.36 5143,-5179.11 5159.08,-5176.43 5162.78,-5173.68 5179,-5172.11 5422.76,-5148.63 5485.16,-5167.3 5730,-5172.11 6711.34,-5191.42 6960.39,-5303.68 7938,-5216.11 8092.68,-5202.26 8270.14,-5165.69 8372.79,-5142.46"/>
<polygon fill="black" stroke="black" points="8373.81,-5145.81 8382.79,-5140.18 8372.26,-5138.99 8373.81,-5145.81"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node59" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node59"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6414.5,-5649.11 6163.5,-5649.11 6163.5,-5613.11 6414.5,-5613.11 6414.5,-5649.11"/>
<text text-anchor="middle" x="6289" y="-5626.32" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge56" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5587.87,-5631.11C5742.64,-5631.11 5997.4,-5631.11 6153.2,-5631.11"/>
<polygon fill="black" stroke="black" points="6153.31,-5634.61 6163.31,-5631.11 6153.31,-5627.61 6153.31,-5634.61"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge208" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8537.27,-5109.9C8644.81,-5088.67 8838.99,-5034.56 8945,-4909.11 8987.3,-4859.06 8931,-4808.49 8981,-4766.11 9044.48,-4712.31 9141.83,-4710.92 9214.09,-4719.76"/>
<polygon fill="black" stroke="black" points="9213.75,-4723.24 9224.12,-4721.07 9214.65,-4716.3 9213.75,-4723.24"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge209" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8482.26,-5104.07C8573.54,-5028.51 8923.53,-4740.09 8981,-4712.11 9052.28,-4677.41 9139.79,-4657.06 9206.56,-4645.57"/>
<polygon fill="black" stroke="black" points="9207.39,-4648.98 9216.67,-4643.87 9206.23,-4642.08 9207.39,-4648.98"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node60" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node60"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7574.5,-5671.11 7211.5,-5671.11 7211.5,-5635.11 7574.5,-5635.11 7574.5,-5671.11"/>
<text text-anchor="middle" x="7393" y="-5647.42" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge59" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6414.54,-5633.6C6606.32,-5637.43 6975.35,-5644.8 7201.04,-5649.3"/>
<polygon fill="black" stroke="black" points="7201.28,-5652.81 7211.35,-5649.51 7201.42,-5645.81 7201.28,-5652.81"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge57" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7574.58,-5653.11C7778.54,-5653.11 8107.21,-5653.11 8301.1,-5653.11"/>
<polygon fill="black" stroke="black" points="8301.38,-5656.61 8311.38,-5653.11 8301.38,-5649.61 8301.38,-5656.61"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge58" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7516.59,-5671.12C7636.15,-5681.73 7817.16,-5678.51 7938,-5587.11 7971.05,-5562.12 7948.87,-5534.06 7974,-5501.11 8102.82,-5332.26 8323.89,-5197.02 8416.14,-5145.08"/>
<polygon fill="black" stroke="black" points="8417.9,-5148.11 8424.92,-5140.17 8414.48,-5142 8417.9,-5148.11"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node61" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node61"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2156,-5241.11 1671,-5241.11 1671,-5197.11 2156,-5197.11 2156,-5241.11"/>
<text text-anchor="middle" x="1913.5" y="-5210.79" font-family="Times,serif" font-size="32.90">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge60" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2014.86,-5241.13C2371.73,-5318.15 3613.56,-5575.28 4654,-5658.11 5610.09,-5734.23 5852.9,-5662.25 6812,-5658.11 6941.88,-5657.55 7088.12,-5656.29 7201.26,-5655.17"/>
<polygon fill="black" stroke="black" points="7201.45,-5658.67 7211.41,-5655.07 7201.38,-5651.67 7201.45,-5658.67"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node62" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node62"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7565,-5074.61 7221,-5074.61 7221,-5033.61 7565,-5033.61 7565,-5074.61"/>
<text text-anchor="middle" x="7393" y="-5046.87" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge62" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7487.11,-5074.61C7610.35,-5095.64 7825.16,-5109.92 7938,-4986.11 8022.99,-4892.86 7885.86,-3941.4 7974,-3851.11 8082.75,-3739.72 8286.95,-3775.08 8392.13,-3803.36"/>
<polygon fill="black" stroke="black" points="8391.43,-3806.8 8402,-3806.07 8393.28,-3800.05 8391.43,-3806.8"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge61" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7565.32,-5058.45C8057.01,-5069.92 9449.66,-5095.2 9640,-5019.11 9772.83,-4966.02 9882.92,-4825.31 9924.59,-4766.52"/>
<polygon fill="black" stroke="black" points="9927.59,-4768.33 9930.46,-4758.13 9921.86,-4764.32 9927.59,-4768.33"/>
</g>
<!-- tg_client._load_progress -->
<g id="node63" class="node">
<title>tg_client._load_progress</title>
<g id="a_node63"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="4175,-5754.11 3845,-5754.11 3845,-5718.11 4175,-5718.11 4175,-5754.11"/>
<text text-anchor="middle" x="4010" y="-5729.95" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge63" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4175.13,-5739.31C4442.8,-5744.23 4990.01,-5753.11 5453.5,-5753.11 5453.5,-5753.11 5453.5,-5753.11 8460.5,-5753.11 8990.01,-5753.11 9234.19,-5925.26 9640,-5585.11 9905.48,-5362.59 9937.99,-4889.32 9941.96,-4768.6"/>
<polygon fill="black" stroke="black" points="9945.46,-4768.44 9942.25,-4758.35 9938.46,-4768.24 9945.46,-4768.44"/>
</g>
<!-- tg_client._save_progress -->
<g id="node64" class="node">
<title>tg_client._save_progress</title>
<g id="a_node64"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2673,-4143.11 2444,-4143.11 2444,-4107.11 2673,-4107.11 2673,-4143.11"/>
<text text-anchor="middle" x="2558.5" y="-4120.95" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node65" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node65"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3297,-4096.11 3030,-4096.11 3030,-4060.11 3297,-4060.11 3297,-4096.11"/>
<text text-anchor="middle" x="3163.5" y="-4072.24" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge64" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3297.27,-4064.46C3331.38,-4061.17 3368.04,-4057.83 3402,-4055.11 4311.91,-3982.37 4540.68,-3957.11 5453.5,-3957.11 5453.5,-3957.11 5453.5,-3957.11 6290,-3957.11 6381.57,-3957.11 7861.7,-3983.74 7938,-3933.11 7971.17,-3911.11 7941.29,-3873.8 7974,-3851.11 8092.87,-3768.67 8270.25,-3784.68 8374.17,-3804.16"/>
<polygon fill="black" stroke="black" points="8373.52,-3807.59 8384,-3806.05 8374.84,-3800.72 8373.52,-3807.59"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node66" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node66"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2044,-4051.11 1783,-4051.11 1783,-4015.11 2044,-4015.11 2044,-4051.11"/>
<text text-anchor="middle" x="1913.5" y="-4027.24" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge65" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2044.17,-4030.65C2236.54,-4026.61 2608.82,-4017.38 2925,-4001.11 3137.26,-3990.19 3189.7,-3977.16 3402,-3967.11 4313.01,-3924.01 4541.47,-3919.11 5453.5,-3919.11 5453.5,-3919.11 5453.5,-3919.11 6290,-3919.11 7022.96,-3919.11 7208.8,-3931.29 7938,-3857.11 7954.14,-3855.47 7957.88,-3852.9 7974,-3851.11 8113.1,-3835.69 8275.69,-3828.92 8372.71,-3826.06"/>
<polygon fill="black" stroke="black" points="8372.86,-3829.56 8382.76,-3825.77 8372.66,-3822.56 8372.86,-3829.56"/>
</g>
<!-- tg_client._save_message -->
<g id="node67" class="node">
<title>tg_client._save_message</title>
<g id="a_node67"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4618,-5239.61 3402,-5239.61 3402,-5124.61 4618,-5124.61 4618,-5239.61"/>
<text text-anchor="middle" x="4010" y="-5158" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge78" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4079.95,-5124.45C4252.43,-4983.67 4721.64,-4621.88 5179,-4456.11 5883.21,-4200.88 6101.8,-4287.25 6848,-4222.11 6908.36,-4216.84 7893.93,-4225.7 7938,-4184.11 8000.82,-4124.83 7922.57,-3866.51 7974,-3797.11 8033.77,-3716.47 8132.17,-3668.56 8224.73,-3640.14"/>
<polygon fill="black" stroke="black" points="8225.96,-3643.42 8234.54,-3637.2 8223.95,-3636.72 8225.96,-3643.42"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge79" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4032.83,-5124.52C4098.38,-4960.19 4310.43,-4487.07 4654,-4271.11 4840.57,-4153.84 4931.24,-4250.11 5143,-4189.11 5159.66,-4184.32 5162.06,-4177.78 5179,-4174.11 5267.71,-4154.9 6731.04,-4163.16 6812,-4122.11 6835.15,-4110.37 6824.87,-4087.9 6848,-4076.11 6955.98,-4021.09 7845.91,-4115.9 7938,-4037.11 8001.98,-3982.38 7910.57,-3906.49 7974,-3851.11 8088.51,-3751.16 8282.28,-3778.69 8386.7,-3803.65"/>
<polygon fill="black" stroke="black" points="8385.98,-3807.08 8396.52,-3806.06 8387.64,-3800.28 8385.98,-3807.08"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge66" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4077.3,-5239.78C4188.2,-5332.68 4422.09,-5513.67 4654,-5599.11 4698.63,-5615.56 4750.61,-5623.75 4795.05,-5627.75"/>
<polygon fill="black" stroke="black" points="4795.03,-5631.26 4805.29,-5628.62 4795.62,-5624.29 4795.03,-5631.26"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge67" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4618.22,-5161.56C4648.34,-5160.55 4677.28,-5159.57 4704.37,-5158.65"/>
<polygon fill="black" stroke="black" points="4704.78,-5162.14 4714.66,-5158.3 4704.54,-5155.14 4704.78,-5162.14"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge68" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4134.28,-5239.62C4261.35,-5295.66 4466.77,-5377.34 4654,-5412.11 4914.95,-5460.58 5231.98,-5447.26 5375.84,-5437.4"/>
<polygon fill="black" stroke="black" points="5376.16,-5440.89 5385.89,-5436.7 5375.67,-5433.9 5376.16,-5440.89"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge69" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4031.39,-5124.41C4094.24,-4955.66 4302.3,-4460.72 4654,-4233.11 4898.29,-4075.02 5794.34,-4081.41 6145.49,-4090.41"/>
<polygon fill="black" stroke="black" points="6145.63,-4093.91 6155.72,-4090.68 6145.81,-4086.92 6145.63,-4093.91"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge70" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4590.55,-5124.58C4618.21,-5121.84 4645.08,-5119.17 4670.67,-5116.63"/>
<polygon fill="black" stroke="black" points="4671.19,-5120.1 4680.79,-5115.63 4670.49,-5113.13 4671.19,-5120.1"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge71" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4241.72,-5239.67C4363.58,-5267.94 4516.08,-5299.95 4654,-5319.11 4761.5,-5334.05 5034.98,-5350.47 5232.16,-5361.01"/>
<polygon fill="black" stroke="black" points="5232.21,-5364.52 5242.38,-5361.56 5232.58,-5357.53 5232.21,-5364.52"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge72" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4262.22,-5124.59C4380.41,-5100.38 4523.71,-5075.07 4654,-5063.11 5108.65,-5021.4 5636.98,-5055.78 5966.95,-5087.11"/>
<polygon fill="black" stroke="black" points="5966.86,-5090.62 5977.14,-5088.08 5967.52,-5083.65 5966.86,-5090.62"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge73" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4618.22,-5203.35C4627.48,-5203.67 4636.62,-5203.99 4645.63,-5204.31"/>
<polygon fill="black" stroke="black" points="4645.63,-5207.81 4655.75,-5204.66 4645.88,-5200.81 4645.63,-5207.81"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge74" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3860.09,-5239.72C3879.06,-5250.24 3929.04,-5257.61 4010,-5257.61 4080.21,-5257.61 4127.12,-5252.07 4150.71,-5243.74"/>
<polygon fill="black" stroke="black" points="4152.15,-5246.93 4159.91,-5239.72 4149.35,-5240.51 4152.15,-5246.93"/>
</g>
<!-- tg_client._save_media -->
<g id="node68" class="node">
<title>tg_client._save_media</title>
<g id="a_node68"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5139.5,-5310.11 4657.5,-5310.11 4657.5,-5256.11 5139.5,-5256.11 5139.5,-5310.11"/>
<text text-anchor="middle" x="4898.5" y="-5272.51" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge75" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4515.76,-5239.62C4562.16,-5244.91 4607.65,-5250.09 4650.13,-5254.93"/>
<polygon fill="black" stroke="black" points="4649.96,-5258.43 4660.29,-5256.09 4650.75,-5251.48 4649.96,-5258.43"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node69" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node69"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="10067.5,-4591.11 9819.5,-4591.11 9819.5,-4555.11 10067.5,-4555.11 10067.5,-4591.11"/>
<text text-anchor="middle" x="9943.5" y="-4569.07" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge76" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4123.09,-5239.62C4249.61,-5302.92 4462.76,-5404.74 4654,-5473.11 4865.86,-5548.86 4960.18,-5472.97 5143,-5604.11 5166.44,-5620.93 5153.66,-5644.34 5179,-5658.11 5292.86,-5720.02 8659.33,-5705.6 8945,-5680.11 9257.6,-5652.23 9433.58,-5791.52 9640,-5555.11 9701.59,-5484.58 9625.87,-4792.21 9676,-4713.11 9715.84,-4650.26 9793.8,-4614.02 9855.15,-4594.22"/>
<polygon fill="black" stroke="black" points="9856.35,-4597.52 9864.85,-4591.19 9854.26,-4590.84 9856.35,-4597.52"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge77" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4117.83,-5239.68C4242.42,-5303.44 4456.54,-5402.69 4654,-5444.11 4913.85,-5498.63 6805.48,-5477.03 7282.84,-5470.65"/>
<polygon fill="black" stroke="black" points="7283.22,-5474.15 7293.17,-5470.51 7283.13,-5467.15 7283.22,-5474.15"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge80" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5102.6,-5256.1C5116.35,-5253.09 5129.93,-5249.77 5143,-5246.11 5159.69,-5241.44 5162.23,-5235.49 5179,-5231.11 5219.31,-5220.59 5263.86,-5213.52 5305.14,-5208.78"/>
<polygon fill="black" stroke="black" points="5305.72,-5212.23 5315.27,-5207.65 5304.95,-5205.28 5305.72,-5212.23"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge83" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5139.61,-5270.43C5152.93,-5269.93 5166.13,-5269.49 5179,-5269.11 5791.87,-5251.33 7329.41,-5321.63 7938,-5247.11 8104.1,-5226.78 8294.05,-5173.21 8392.13,-5143.21"/>
<polygon fill="black" stroke="black" points="8393.37,-5146.49 8401.9,-5140.21 8391.31,-5139.8 8393.37,-5146.49"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node71" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node71"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6406.5,-5373.11 6171.5,-5373.11 6171.5,-5337.11 6406.5,-5337.11 6406.5,-5373.11"/>
<text text-anchor="middle" x="6289" y="-5351.07" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge81" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5139.77,-5295.57C5436.33,-5310.95 5929.69,-5336.53 6160.99,-5348.53"/>
<polygon fill="black" stroke="black" points="6160.96,-5352.03 6171.13,-5349.05 6161.33,-5345.04 6160.96,-5352.03"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge82" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5139.95,-5285.23C5313.85,-5286.64 5554.45,-5288.38 5766,-5289.11 6119.56,-5290.34 8699.36,-5403.42 8945,-5149.11 9004.39,-5087.63 8920.2,-4826.21 8981,-4766.11 9011.6,-4735.87 9119.61,-4731.84 9203.53,-4733.66"/>
<polygon fill="black" stroke="black" points="9203.55,-4737.17 9213.63,-4733.91 9203.72,-4730.17 9203.55,-4737.17"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge161" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6406.63,-5355.33C6616.57,-5355.71 7056.1,-5356.5 7269.94,-5356.89"/>
<polygon fill="black" stroke="black" points="7269.94,-5360.39 7279.95,-5356.91 7269.95,-5353.39 7269.94,-5360.39"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node73" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node73"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3366,-4969.11 2961,-4969.11 2961,-4927.11 3366,-4927.11 3366,-4969.11"/>
<text text-anchor="middle" x="3163.5" y="-4940.03" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge84" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3240.56,-4969.19C3363.64,-5003.29 3610.9,-5071.81 3791.83,-5121.94"/>
<polygon fill="black" stroke="black" points="3790.9,-5125.31 3801.48,-5124.61 3792.77,-5118.57 3790.9,-5125.31"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node74" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node74"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7678,-4977.11 7108,-4977.11 7108,-4933.11 7678,-4933.11 7678,-4977.11"/>
<text text-anchor="middle" x="7393" y="-4946.79" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge87" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7678.29,-4972.72C7790.07,-4972.92 7900.64,-4962.42 7938,-4924.11 8025.48,-4834.42 7902.5,-3899.99 7974,-3797.11 8030.16,-3716.31 8125.51,-3668.44 8216.83,-3640.1"/>
<polygon fill="black" stroke="black" points="8217.96,-3643.41 8226.51,-3637.16 8215.93,-3636.71 8217.96,-3643.41"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge85" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7678.15,-4943.95C7761.97,-4939.3 7853.79,-4932.87 7938,-4924.11 8404.33,-4875.61 8515.32,-4820.46 8981,-4766.11 9055.18,-4757.46 9139.11,-4750.61 9203.57,-4745.98"/>
<polygon fill="black" stroke="black" points="9204.01,-4749.45 9213.74,-4745.25 9203.52,-4742.47 9204.01,-4749.45"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge86" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7678.27,-4969.11C7788.28,-4968.43 7897.47,-4958.23 7938,-4924.11 7992.1,-4878.57 7920.94,-4815.87 7974,-4769.11 8065.99,-4688.04 8909.21,-4647.68 9206.41,-4635.88"/>
<polygon fill="black" stroke="black" points="9206.89,-4639.37 9216.75,-4635.48 9206.62,-4632.37 9206.89,-4639.37"/>
</g>
<!-- tg_client._download_messages -->
<g id="node76" class="node">
<title>tg_client._download_messages</title>
<g id="a_node76"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2913.5,-4737.61 2203.5,-4737.61 2203.5,-4680.61 2913.5,-4680.61 2913.5,-4737.61"/>
<text text-anchor="middle" x="2558.5" y="-4697.77" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge88" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2631.64,-4737.71C2750.86,-4784.96 2987.02,-4878.56 3099.76,-4923.25"/>
<polygon fill="black" stroke="black" points="3098.71,-4926.59 3109.3,-4927.03 3101.29,-4920.09 3098.71,-4926.59"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node77" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node77"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2729.5,-5603.11 2387.5,-5603.11 2387.5,-5567.11 2729.5,-5567.11 2729.5,-5603.11"/>
<text text-anchor="middle" x="2558.5" y="-5579.42" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node78" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node78"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2925,-3879.61 2192,-3879.61 2192,-3814.61 2925,-3814.61 2925,-3879.61"/>
<text text-anchor="middle" x="2558.5" y="-3834.06" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge94" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2925.19,-3860.09C3429.35,-3881 4310.47,-3929.18 4618,-4019.11 4635.36,-4024.19 4636.44,-4033.76 4654,-4038.11 4864.96,-4090.37 4925.67,-4038.63 5143,-4038.11 5235.72,-4037.89 6730.35,-4074.06 6812,-4030.11 6837.4,-4016.44 6824.1,-3992.27 6848,-3976.11 7258.01,-3698.91 7457.55,-3866.96 7938,-3748.11 8070.72,-3715.28 8220.66,-3671.66 8325.41,-3640.1"/>
<polygon fill="black" stroke="black" points="8326.52,-3643.42 8335.08,-3637.18 8324.5,-3636.72 8326.52,-3643.42"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge92" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2584.78,-3814.43C2715.05,-3650 3330.77,-2921.11 4009,-2921.11 4009,-2921.11 4009,-2921.11 7394,-2921.11 8063.14,-2921.11 8863.77,-2921.11 9175.8,-2921.11"/>
<polygon fill="black" stroke="black" points="9176.25,-2924.61 9186.25,-2921.11 9176.25,-2917.61 9176.25,-2924.61"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge95" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2925.04,-3830.66C3218.07,-3818.89 3639.86,-3805.11 4009,-3805.11 4009,-3805.11 4009,-3805.11 6290,-3805.11 7100.2,-3805.11 8080.61,-3818.54 8372.55,-3822.82"/>
<polygon fill="black" stroke="black" points="8372.59,-3826.32 8382.64,-3822.97 8372.69,-3819.32 8372.59,-3826.32"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge89" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2782.32,-3814.6C2866.91,-3802.25 2960.39,-3788.61 3033.48,-3777.94"/>
<polygon fill="black" stroke="black" points="3034.27,-3781.36 3043.66,-3776.46 3033.26,-3774.44 3034.27,-3781.36"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge90" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2635.33,-3879.65C2718.66,-3919.27 2850.56,-3994.01 2925,-4098.11 3120.1,-4370.96 3155.2,-4798.74 3161.27,-4916.95"/>
<polygon fill="black" stroke="black" points="3157.79,-4917.28 3161.76,-4927.1 3164.78,-4916.94 3157.79,-4917.28"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge91" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2713.93,-3879.64C2932.98,-3926.77 3313.32,-4012.58 3366,-4051.11 3390.49,-4069.03 3375.69,-4094 3402,-4109.11 3485.9,-4157.31 5073.03,-4090.28 5143,-4157.11 5221.95,-4232.53 5115.24,-4558.48 5179,-4647.11 5344.2,-4876.74 5489.79,-4832.08 5766,-4893.11 6222.79,-4994.05 6768.99,-4990.35 7097.79,-4975.14"/>
<polygon fill="black" stroke="black" points="7098.11,-4978.63 7107.94,-4974.67 7097.79,-4971.64 7098.11,-4978.63"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge93" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2559.76,-3814.58C2564.13,-3493.55 2641.75,-905.11 4009,-905.11 4009,-905.11 4009,-905.11 6290,-905.11 6363.8,-905.11 8888.42,-956.72 8945,-1004.11 9002.87,-1052.59 8926.82,-1117.54 8981,-1170.11 9039.84,-1227.22 9133.85,-1239.86 9206.26,-1239.73"/>
<polygon fill="black" stroke="black" points="9206.36,-1243.23 9216.33,-1239.63 9206.29,-1236.23 9206.36,-1243.23"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node80" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node80"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1635,-4185.11 922,-4185.11 922,-4111.11 1635,-4111.11 1635,-4185.11"/>
<text text-anchor="middle" x="1278.5" y="-4133.29" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge102" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1359.57,-4111.05C1437.3,-4077.01 1559.55,-4028.57 1671,-4006.11 2426.11,-3853.99 2632.17,-3946.54 3402,-3920.11 5416.87,-3850.95 7885.19,-3828.63 8372.63,-3824.76"/>
<polygon fill="black" stroke="black" points="8372.78,-3828.26 8382.75,-3824.68 8372.72,-3821.26 8372.78,-3828.26"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge96" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1635.14,-4157.94C1891.53,-4164.19 2245.85,-4171.11 2557.5,-4171.11 2557.5,-4171.11 2557.5,-4171.11 4011,-4171.11 4596.64,-4171.11 4637.55,-4557.93 5179,-4781.11 5431.53,-4885.2 5497.19,-4914.68 5766,-4963.11 6284.1,-5056.47 6908.71,-5062.17 7210.82,-5058.33"/>
<polygon fill="black" stroke="black" points="7211.03,-5061.83 7220.99,-5058.19 7210.94,-5054.83 7211.03,-5061.83"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge97" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1324.91,-4185.14C1396.56,-4242.92 1541.09,-4356.83 1671,-4443.11 2550.79,-5027.42 3715.14,-5595.22 3961.85,-5713.62"/>
<polygon fill="black" stroke="black" points="3960.38,-5716.8 3970.91,-5717.96 3963.4,-5710.49 3960.38,-5716.8"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge98" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1635.07,-4141.71C1901.65,-4136.92 2250.77,-4130.63 2433.59,-4127.34"/>
<polygon fill="black" stroke="black" points="2433.85,-4130.84 2443.78,-4127.16 2433.72,-4123.84 2433.85,-4130.84"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge99" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1635.26,-4125.8C1803.93,-4115.94 2008.29,-4105.04 2192,-4098.11 2486.08,-4087.03 2830.53,-4081.76 3019.8,-4079.53"/>
<polygon fill="black" stroke="black" points="3019.85,-4083.03 3029.81,-4079.41 3019.77,-4076.03 3019.85,-4083.03"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge100" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1440.39,-4111.08C1510.92,-4095.6 1594.82,-4078.22 1671,-4065.11 1703.77,-4059.48 1739.19,-4054.29 1772.54,-4049.8"/>
<polygon fill="black" stroke="black" points="1773.37,-4053.22 1782.81,-4048.43 1772.44,-4046.28 1773.37,-4053.22"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge101" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1363.85,-4185.14C1599.16,-4288.44 2260.18,-4578.6 2483.05,-4676.43"/>
<polygon fill="black" stroke="black" points="2481.82,-4679.71 2492.38,-4680.53 2484.63,-4673.31 2481.82,-4679.71"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node81" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node81"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7709.5,-4346.61 7076.5,-4346.61 7076.5,-4285.61 7709.5,-4285.61 7709.5,-4346.61"/>
<text text-anchor="middle" x="7393" y="-4303.86" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge105" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7709.53,-4327.19C7809.83,-4323.62 7903.7,-4310.36 7938,-4276.11 8013.54,-4200.69 7911.2,-3883.43 7974,-3797.11 8032.73,-3716.39 8130.28,-3668.48 8222.52,-3640.1"/>
<polygon fill="black" stroke="black" points="8223.72,-3643.39 8232.29,-3637.15 8221.7,-3636.69 8223.72,-3643.39"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge106" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7709.72,-4327C7809.87,-4323.39 7903.58,-4310.16 7938,-4276.11 8005.39,-4209.47 7906.02,-3917.16 7974,-3851.11 8084.92,-3743.34 8285.91,-3776.25 8390.75,-3803.5"/>
<polygon fill="black" stroke="black" points="8390.02,-3806.93 8400.58,-3806.11 8391.82,-3800.16 8390.02,-3806.93"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge103" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7709.8,-4309.01C7790.43,-4320.56 7872.68,-4345.44 7938,-4394.11 7968.62,-4416.93 7943.71,-4448.88 7974,-4472.11 8321.44,-4738.64 8531.99,-4493.62 8945,-4639.11 8962.26,-4645.2 8963.96,-4652.44 8981,-4659.11 9053.27,-4687.39 9138.51,-4707.8 9204.05,-4720.92"/>
<polygon fill="black" stroke="black" points="9203.49,-4724.38 9213.98,-4722.89 9204.85,-4717.52 9203.49,-4724.38"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge104" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7709.86,-4322.81C7787.99,-4334.65 7869.01,-4356.22 7938,-4394.11 7959.55,-4405.95 7951.9,-4425.35 7974,-4436.11 8071.09,-4483.4 8860.17,-4412.28 8945,-4479.11 8990.41,-4514.89 8936.33,-4567.42 8981,-4604.11 9043.28,-4655.28 9136.45,-4658.63 9207.67,-4651.28"/>
<polygon fill="black" stroke="black" points="9208.47,-4654.71 9218.02,-4650.12 9207.69,-4647.76 9208.47,-4654.71"/>
</g>
<!-- tg_client.main -->
<g id="node82" class="node">
<title>tg_client.main</title>
<g id="a_node82"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="886,-5165.11 318,-5165.11 318,-5073.11 886,-5073.11 886,-5165.11"/>
<text text-anchor="middle" x="602" y="-5100.07" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge107" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M639.63,-5165.36C694.02,-5230.7 802.62,-5348.98 922,-5411.11 1322.01,-5619.31 1461.55,-5631.11 1912.5,-5631.11 1912.5,-5631.11 1912.5,-5631.11 3164.5,-5631.11 3783.85,-5631.11 4527.7,-5631.11 4795.35,-5631.11"/>
<polygon fill="black" stroke="black" points="4795.44,-5634.61 4805.44,-5631.11 4795.44,-5627.61 4795.44,-5634.61"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge108" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M648.6,-5165.2C706.48,-5220.43 812.09,-5310.71 922,-5352.11 995.37,-5379.76 1083.06,-5387.89 1152.99,-5389.05"/>
<polygon fill="black" stroke="black" points="1153.13,-5392.55 1163.17,-5389.17 1153.21,-5385.55 1153.13,-5392.55"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge109" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M886.34,-5140.75C1116.87,-5158.36 1439.19,-5182.97 1660.75,-5199.89"/>
<polygon fill="black" stroke="black" points="1660.66,-5203.39 1670.89,-5200.66 1661.19,-5196.41 1660.66,-5203.39"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge110" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M886.08,-5100.2C1403.56,-5065.63 2491.17,-4992.97 2950.55,-4962.27"/>
<polygon fill="black" stroke="black" points="2950.87,-4965.76 2960.61,-4961.6 2950.4,-4958.78 2950.87,-4965.76"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge111" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M815.2,-5165.12C1070.38,-5220.95 1483.31,-5313.08 1635,-5357.11 1887.03,-5430.27 1935.49,-5497.68 2192,-5553.11 2251.59,-5565.99 2317.71,-5573.71 2377.15,-5578.33"/>
<polygon fill="black" stroke="black" points="2377.17,-5581.85 2387.4,-5579.11 2377.69,-5574.86 2377.17,-5581.85"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge112" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M608.3,-5072.95C632.27,-4872.93 737.43,-4084.58 922,-3935.11 1373.75,-3569.29 2146.93,-3731.61 2440.12,-3811.85"/>
<polygon fill="black" stroke="black" points="2439.35,-3815.27 2449.92,-3814.55 2441.21,-3808.52 2439.35,-3815.27"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge113" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M635.08,-5072.93C748.96,-4909 1133,-4356.14 1245.98,-4193.49"/>
<polygon fill="black" stroke="black" points="1248.95,-4195.34 1251.78,-4185.13 1243.2,-4191.35 1248.95,-4195.34"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge114" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M610.79,-5072.81C642.24,-4891.44 765.77,-4232.95 922,-4102.11 1179.3,-3886.64 1336.07,-4027.49 1671,-4006.11 2078.15,-3980.13 4014.27,-3957.99 4618,-4055.11 4650.2,-4060.29 5146.85,-4222.61 5179,-4228.11 5842,-4341.54 6632.26,-4341.04 7066.27,-4329.35"/>
<polygon fill="black" stroke="black" points="7066.55,-4332.84 7076.45,-4329.07 7066.36,-4325.85 7066.55,-4332.84"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge116" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9380.56,-4104.71C9455.41,-4090.43 9573.11,-4082.07 9640,-4149.11 9711.01,-4220.29 9620.62,-4516.2 9676,-4600.11 9717.26,-4662.63 9795.86,-4699.03 9857.05,-4718.96"/>
<polygon fill="black" stroke="black" points="9856.13,-4722.34 9866.72,-4722.02 9858.24,-4715.66 9856.13,-4722.34"/>
</g>
<!-- notes_utils.parse_md -->
<g id="node86" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node86"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8543,-4140.11 8376,-4140.11 8376,-4104.11 8543,-4104.11 8543,-4140.11"/>
<text text-anchor="middle" x="8459.5" y="-4118.41" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge117" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8543.06,-4122.11C8706.47,-4122.11 9069.16,-4122.11 9230.02,-4122.11"/>
<polygon fill="black" stroke="black" points="9230.32,-4125.61 9240.32,-4122.11 9230.32,-4118.61 9230.32,-4125.61"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge118" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8543.23,-4129.59C8641.8,-4135.59 8810.1,-4136.58 8945,-4090.11 9087.38,-4041.08 9226.2,-3920.93 9282.84,-3867.94"/>
<polygon fill="black" stroke="black" points="9285.41,-3870.33 9290.28,-3860.92 9280.6,-3865.24 9285.41,-3870.33"/>
</g>
<!-- cluster_items._iter_lots -->
<g id="node87" class="node">
<title>cluster_items._iter_lots</title>
<g id="a_node87"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7561.5,-1591.11 7224.5,-1591.11 7224.5,-1553.11 7561.5,-1553.11 7561.5,-1591.11"/>
<text text-anchor="middle" x="7393" y="-1565.39" font-family="Times,serif" font-size="27.16">cluster_items._iter_lots</text>
</a>
</g>
</g>
<!-- cluster_items._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge120" class="edge">
<title>cluster_items._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7561.57,-1578.54C7669.29,-1583.59 7812.13,-1592.01 7938,-1605.11 8078.61,-1619.75 8239.43,-1644.83 8344.64,-1662.38"/>
<polygon fill="black" stroke="black" points="8344.21,-1665.85 8354.65,-1664.05 8345.36,-1658.95 8344.21,-1665.85"/>
</g>
<!-- cluster_items._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge121" class="edge">
<title>cluster_items._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7561.79,-1572.11C7771.38,-1572.11 8126.03,-1572.11 8320.59,-1572.11"/>
<polygon fill="black" stroke="black" points="8320.87,-1575.61 8330.87,-1572.11 8320.87,-1568.61 8320.87,-1575.61"/>
</g>
<!-- cluster_items.collect_clusters -->
<g id="node88" class="node">
<title>cluster_items.collect_clusters</title>
<g id="a_node88"><a xlink:title="Return mapping of cluster name to lot ids.">
<polygon fill="none" stroke="black" points="6699.5,-2438.61 5878.5,-2438.61 5878.5,-2371.61 6699.5,-2371.61 6699.5,-2438.61"/>
<text text-anchor="middle" x="6289" y="-2391.61" font-family="Times,serif" font-size="53.76">cluster_items.collect_clusters</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._load_embeddings -->
<g id="edge123" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6699.54,-2391.19C6740.27,-2403.33 6778.77,-2421.6 6812,-2448.11 6853.53,-2481.26 6805.58,-2530.12 6848,-2562.11 6873.98,-2581.7 7713.51,-2596.07 8169.87,-2602.45"/>
<polygon fill="black" stroke="black" points="8169.86,-2605.95 8179.9,-2602.59 8169.95,-2598.95 8169.86,-2605.95"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge125" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6699.56,-2414.03C6848.88,-2417.29 7013.07,-2420.86 7144.08,-2423.71"/>
<polygon fill="black" stroke="black" points="7144.17,-2427.22 7154.25,-2423.94 7144.33,-2420.22 7144.17,-2427.22"/>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;cluster_items._iter_lots -->
<g id="edge122" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;cluster_items._iter_lots</title>
<path fill="none" stroke="black" d="M6691.31,-2371.53C6737.47,-2352.05 6779.54,-2324.55 6812,-2286.11 6904.34,-2176.77 6750.61,-1747.98 6848,-1643.11 6959.9,-1522.63 7168.29,-1532.36 7292.13,-1551.47"/>
<polygon fill="black" stroke="black" points="7291.94,-1554.99 7302.37,-1553.1 7293.04,-1548.07 7291.94,-1554.99"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node89" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node89"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7522,-2645.11 7264,-2645.11 7264,-2609.11 7522,-2609.11 7522,-2645.11"/>
<text text-anchor="middle" x="7393" y="-2621.42" font-family="Times,serif" font-size="22.12">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim -->
<g id="edge124" class="edge">
<title>cluster_items.collect_clusters&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6465.48,-2371.6C6577.26,-2360.76 6718.19,-2368.06 6812,-2448.11 6863.17,-2491.78 6796.32,-2552.05 6848,-2595.11 6907.44,-2644.65 7113.02,-2643.94 7253.72,-2636.98"/>
<polygon fill="black" stroke="black" points="7253.93,-2640.48 7263.73,-2636.47 7253.57,-2633.48 7253.93,-2640.48"/>
</g>
<!-- cluster_items.main -->
<g id="node90" class="node">
<title>cluster_items.main</title>
<g id="a_node90"><a xlink:title="Cluster items and save the result.">
<polygon fill="none" stroke="black" points="5564,-2539.11 5345,-2539.11 5345,-2503.11 5564,-2503.11 5564,-2539.11"/>
<text text-anchor="middle" x="5454.5" y="-2515.81" font-family="Times,serif" font-size="21.00">cluster_items.main</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge126" class="edge">
<title>cluster_items.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5564.37,-2525.15C5795,-2532.48 6349.58,-2543.65 6812,-2502.11 6828.16,-2500.66 6831.86,-2497.73 6848,-2496.11 7330.32,-2447.72 7457.75,-2523.92 7938,-2458.11 8103.2,-2435.48 8292.38,-2382.72 8390.87,-2353.15"/>
<polygon fill="black" stroke="black" points="8392.13,-2356.43 8400.69,-2350.19 8390.11,-2349.73 8392.13,-2356.43"/>
</g>
<!-- cluster_items.main&#45;&gt;notes_utils.write_json -->
<g id="edge127" class="edge">
<title>cluster_items.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5564.27,-2509.32C5623.4,-2496.8 5692.02,-2471.05 5730,-2418.11 5801.34,-2318.66 5681.7,-1405.85 5766,-1317.11 5932.2,-1142.18 6606.92,-1236.23 6848,-1226.11 7779.18,-1187.03 8013.02,-1219.72 8945,-1226.11 9033.1,-1226.72 9133.16,-1228.14 9206.13,-1229.32"/>
<polygon fill="black" stroke="black" points="9206.18,-1232.82 9216.24,-1229.48 9206.3,-1225.82 9206.18,-1232.82"/>
</g>
<!-- cluster_items.main&#45;&gt;cluster_items.collect_clusters -->
<g id="edge128" class="edge">
<title>cluster_items.main&#45;&gt;cluster_items.collect_clusters</title>
<path fill="none" stroke="black" d="M5519.77,-2503.05C5582.18,-2486.21 5679.85,-2461.71 5766,-2448.11 5799.11,-2442.89 5833.51,-2438.28 5868.13,-2434.21"/>
<polygon fill="black" stroke="black" points="5868.86,-2437.65 5878.39,-2433.02 5868.06,-2430.69 5868.86,-2437.65"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node91" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node91"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6475.5,-4569.11 6102.5,-4569.11 6102.5,-4533.11 6475.5,-4533.11 6475.5,-4569.11"/>
<text text-anchor="middle" x="6289" y="-4544.95" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- cluster_items.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge129" class="edge">
<title>cluster_items.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5471.14,-2539.16C5520.81,-2597.82 5675,-2790.33 5730,-2981.11 5753.74,-3063.45 5706.33,-4461.61 5766,-4523.11 5885.01,-4645.78 6111.4,-4603.13 6222.79,-4572"/>
<polygon fill="black" stroke="black" points="6223.89,-4575.32 6232.55,-4569.22 6221.97,-4568.59 6223.89,-4575.32"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node102" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node102"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7508.5,-4861.11 7277.5,-4861.11 7277.5,-4825.11 7508.5,-4825.11 7508.5,-4861.11"/>
<text text-anchor="middle" x="7393" y="-4839.07" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge150" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6415.58,-4569.13C6530.67,-4591.41 6699.76,-4639.39 6812,-4739.11 6838.75,-4762.88 6818.13,-4791.42 6848,-4811.11 6914.36,-4854.87 7128.01,-4854.97 7266.98,-4849.87"/>
<polygon fill="black" stroke="black" points="7267.41,-4853.36 7277.27,-4849.48 7267.14,-4846.37 7267.41,-4853.36"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node92" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node92"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-5808.11 0,-5808.11 0,-5772.11 282,-5772.11 282,-5808.11"/>
<text text-anchor="middle" x="141" y="-5786.07" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- build_site:cli -->
<g id="node93" class="node">
<title>build_site:cli</title>
<g id="a_node93"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5790.11" rx="34.71" ry="18"/>
<text text-anchor="middle" x="602" y="-5788.51" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;build_site:cli -->
<!-- price_train:cli -->
<g id="node183" class="node">
<title>price_train:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5790.11" rx="36.68" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5788.51" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;price_train:cli -->
<!-- embed.embed_file -->
<g id="node94" class="node">
<title>embed.embed_file</title>
<g id="a_node94"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7598,-1102.61 7188,-1102.61 7188,-1047.61 7598,-1047.61 7598,-1102.61"/>
<text text-anchor="middle" x="7393" y="-1064.57" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge132" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7598.08,-1077.68C7715.49,-1090.66 7855.62,-1127.94 7938,-1226.11 7991.53,-1289.91 7917.32,-1538.11 7974,-1599.11 8066.59,-1698.77 8231.72,-1706.5 8343.15,-1698.15"/>
<polygon fill="black" stroke="black" points="8343.74,-1701.61 8353.43,-1697.32 8343.18,-1694.63 8343.74,-1701.61"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge131" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7598.28,-1089.12C7709.37,-1096.49 7849.19,-1105.37 7974,-1112.11 8189.67,-1123.77 8734.19,-1108.08 8945,-1155.11 8961.92,-1158.89 8964.39,-1165.17 8981,-1170.11 9055.04,-1192.14 9140.93,-1207.76 9206.32,-1217.67"/>
<polygon fill="black" stroke="black" points="9205.82,-1221.14 9216.22,-1219.16 9206.85,-1214.21 9205.82,-1221.14"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node95" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node95"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8552,-1103.11 8367,-1103.11 8367,-1067.11 8552,-1067.11 8552,-1103.11"/>
<text text-anchor="middle" x="8459.5" y="-1080.33" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge133" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7598.3,-1077.03C7825.34,-1079.17 8182.84,-1082.52 8356.74,-1084.16"/>
<polygon fill="black" stroke="black" points="8356.87,-1087.66 8366.91,-1084.25 8356.94,-1080.66 8356.87,-1087.66"/>
</g>
<!-- embed.main -->
<g id="node96" class="node">
<title>embed.main</title>
<g id="a_node96"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6377,-1023.11 6201,-1023.11 6201,-987.11 6377,-987.11 6377,-1023.11"/>
<text text-anchor="middle" x="6289" y="-998.95" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge134" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6377.31,-1009.03C6481.01,-1013.83 6659.17,-1022.5 6812,-1032.11 6933.05,-1039.73 7068.21,-1049.67 7177.57,-1058.07"/>
<polygon fill="black" stroke="black" points="7177.5,-1061.57 7187.74,-1058.85 7178.04,-1054.59 7177.5,-1061.57"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node97" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node97"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="8573.5,-1049.11 8345.5,-1049.11 8345.5,-1013.11 8573.5,-1013.11 8573.5,-1049.11"/>
<text text-anchor="middle" x="8459.5" y="-1025.81" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node98" class="node">
<title>chop.process_message</title>
<g id="a_node98"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6790,-1520.11 5788,-1520.11 5788,-1418.11 6790,-1418.11 6790,-1520.11"/>
<text text-anchor="middle" x="6289" y="-1447.79" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge135" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6790.22,-1456.4C6965.35,-1451.95 7147.39,-1447.33 7264.74,-1444.35"/>
<polygon fill="black" stroke="black" points="7264.93,-1447.84 7274.84,-1444.09 7264.75,-1440.85 7264.93,-1447.84"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge136" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6790.12,-1508.42C6797.77,-1514.81 6805.08,-1521.69 6812,-1529.11 6872.25,-1593.68 6786.35,-2259.88 6848,-2323.11 7017.53,-2496.97 7769.11,-2225.64 7938,-2400.11 8011.16,-2475.69 7905.86,-3265.98 7974,-3346.11 8052.23,-3438.13 8190.87,-3458.59 8299.86,-3458.36"/>
<polygon fill="black" stroke="black" points="8300,-3461.86 8309.97,-3458.28 8299.95,-3454.86 8300,-3461.86"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge143" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6790.15,-1507.94C6797.8,-1514.47 6805.1,-1521.52 6812,-1529.11 6887.18,-1611.93 6773.82,-3458.4 6848,-3542.11 7172.38,-3908.21 7604.85,-3335.98 7938,-3694.11 8020.22,-3782.49 7888.72,-4150.69 7974,-4236.11 8081.76,-4344.06 8279.18,-4315.92 8385.72,-4290.12"/>
<polygon fill="black" stroke="black" points="8386.88,-4293.44 8395.74,-4287.64 8385.19,-4286.65 8386.88,-4293.44"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge144" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6790.06,-1508.02C6797.74,-1514.52 6805.07,-1521.54 6812,-1529.11 6915.05,-1641.68 6742.46,-2791.89 6848,-2902.11 7015.93,-3077.49 7766.03,-2806.7 7938,-2978.11 8015.8,-3055.66 7903.85,-3386.58 7974,-3471.11 8023.05,-3530.22 8095.89,-3563.78 8170.28,-3582.39"/>
<polygon fill="black" stroke="black" points="8169.77,-3585.87 8180.31,-3584.81 8171.41,-3579.06 8169.77,-3585.87"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge139" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6790.11,-1515.1C6797.58,-1519.5 6804.89,-1524.16 6812,-1529.11 6841.04,-1549.32 6818.56,-1580.49 6848,-1600.11 7050.12,-1734.81 7745.94,-1532.43 7938,-1681.11 7977.34,-1711.57 7934.63,-1756.7 7974,-1787.11 8088.6,-1875.64 8267.44,-1861.16 8372.79,-1842.02"/>
<polygon fill="black" stroke="black" points="8373.56,-1845.44 8382.75,-1840.16 8372.27,-1838.56 8373.56,-1845.44"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge142" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6790.23,-1507.87C6797.86,-1514.42 6805.13,-1521.49 6812,-1529.11 6878.08,-1602.47 6778.68,-5012.81 6848,-5083.11 6861.49,-5096.79 8038.89,-5115.73 8371.74,-5120.81"/>
<polygon fill="black" stroke="black" points="8371.76,-5124.31 8381.81,-5120.97 8371.87,-5117.32 8371.76,-5124.31"/>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge137" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6747.25,-1418.06C6770.63,-1405.05 6792.47,-1389.55 6812,-1371.11 6860.29,-1325.54 6801.7,-1273.71 6848,-1226.11 6933.51,-1138.23 7065.35,-1100.18 7177.83,-1084.25"/>
<polygon fill="black" stroke="black" points="7178.52,-1087.68 7187.95,-1082.86 7177.57,-1080.75 7178.52,-1087.68"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge138" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6755.22,-1418.03C6775.95,-1404.9 6795.09,-1389.39 6812,-1371.11 6862.54,-1316.47 6792.72,-1087.96 6848,-1038.11 6957.36,-939.51 7977.31,-998.45 8335.14,-1022.42"/>
<polygon fill="black" stroke="black" points="8335.07,-1025.92 8345.28,-1023.1 8335.54,-1018.93 8335.07,-1025.92"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node99" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node99"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="9412.5,-717.11 9208.5,-717.11 9208.5,-681.11 9412.5,-681.11 9412.5,-717.11"/>
<text text-anchor="middle" x="9310.5" y="-693.24" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge140" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6756.15,-1417.99C6776.56,-1404.85 6795.4,-1389.36 6812,-1371.11 6870.88,-1306.42 6788.9,-1043.61 6848,-979.11 7180.6,-616.16 7536.93,-1067.59 7938,-782.11 7964.59,-763.19 7945.95,-734.79 7974,-718.11 8026.17,-687.1 8886.31,-694.11 9197.91,-697.69"/>
<polygon fill="black" stroke="black" points="9198.28,-701.19 9208.32,-697.81 9198.36,-694.19 9198.28,-701.19"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node100" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node100"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8549,-2708.11 8370,-2708.11 8370,-2672.11 8549,-2672.11 8549,-2708.11"/>
<text text-anchor="middle" x="8459.5" y="-2686.07" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge141" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6790.21,-1508.79C6797.81,-1515.07 6805.09,-1521.84 6812,-1529.11 6900.3,-1622.13 6761.04,-2010.85 6848,-2105.11 7179.86,-2464.87 7600.24,-1907.89 7938,-2262.11 7995.92,-2322.86 7914.99,-2578.42 7974,-2638.11 8077.09,-2742.4 8262.71,-2729.3 8371.82,-2709.97"/>
<polygon fill="black" stroke="black" points="8372.61,-2713.38 8381.81,-2708.14 8371.35,-2706.5 8372.61,-2713.38"/>
</g>
<!-- chop.main -->
<g id="node101" class="node">
<title>chop.main</title>
<g id="a_node101"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5530,-1461.11 5379,-1461.11 5379,-1425.11 5530,-1425.11 5530,-1461.11"/>
<text text-anchor="middle" x="5454.5" y="-1436.95" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge145" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5530.11,-1445.44C5590.11,-1447.32 5680.22,-1450.13 5777.58,-1453.17"/>
<polygon fill="black" stroke="black" points="5777.53,-1456.67 5787.63,-1453.49 5777.75,-1449.68 5777.53,-1456.67"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node103" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node103"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6430.5,-4784.11 6147.5,-4784.11 6147.5,-4748.11 6430.5,-4748.11 6430.5,-4784.11"/>
<text text-anchor="middle" x="6289" y="-4760.52" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge146" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6430.59,-4757.96C6537.05,-4755.46 6685.97,-4759.9 6812,-4793.11 6829.3,-4797.67 6830.72,-4806.49 6848,-4811.11 6988.04,-4848.55 7155.31,-4852.64 7267.06,-4849.88"/>
<polygon fill="black" stroke="black" points="7267.46,-4853.37 7277.36,-4849.61 7267.27,-4846.38 7267.46,-4853.37"/>
</g>
<!-- log_utils.init_logger -->
<g id="node104" class="node">
<title>log_utils.init_logger</title>
<g id="a_node104"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6636.5,-4884.11 5941.5,-4884.11 5941.5,-4802.11 6636.5,-4802.11 6636.5,-4884.11"/>
<text text-anchor="middle" x="6289" y="-4826.13" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge147" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6636.79,-4843.11C6851.74,-4843.11 7115,-4843.11 7267.11,-4843.11"/>
<polygon fill="black" stroke="black" points="7267.42,-4846.61 7277.42,-4843.11 7267.42,-4839.61 7267.42,-4846.61"/>
</g>
<!-- log_utils.get_logger -->
<g id="node105" class="node">
<title>log_utils.get_logger</title>
<g id="a_node105"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7461.5,-4915.11 7324.5,-4915.11 7324.5,-4879.11 7461.5,-4879.11 7461.5,-4915.11"/>
<text text-anchor="middle" x="7393" y="-4893.87" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge148" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6636.79,-4853.79C6876.09,-4864.46 7175.25,-4880 7314.29,-4889.63"/>
<polygon fill="black" stroke="black" points="7314.2,-4893.14 7324.42,-4890.35 7314.69,-4886.15 7314.2,-4893.14"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge149" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7324.42,-4897.26C7192.1,-4893.72 6890.47,-4879.91 6646.88,-4866.96"/>
<polygon fill="black" stroke="black" points="6646.96,-4863.46 6636.79,-4866.43 6646.59,-4870.45 6646.96,-4863.46"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node106" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node106"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6747,-3251.61 5831,-3251.61 5831,-3180.61 6747,-3180.61 6747,-3251.61"/>
<text text-anchor="middle" x="6289" y="-3201.47" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge151" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6344.12,-3251.84C6440.6,-3313.32 6650.72,-3437.41 6848,-3488.11 6951.82,-3514.8 7070.36,-3523.14 7170.23,-3524.16"/>
<polygon fill="black" stroke="black" points="7170.42,-3527.66 7180.45,-3524.24 7170.47,-3520.66 7170.42,-3527.66"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge154" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6546.64,-3251.63C6641.24,-3263.96 6749.38,-3277.18 6848,-3287.11 6968.83,-3299.28 7841.64,-3294.2 7938,-3368.11 7976.48,-3397.63 7938.4,-3438.19 7974,-3471.11 8027.99,-3521.05 8099.14,-3551.96 8170.24,-3570.97"/>
<polygon fill="black" stroke="black" points="8169.71,-3574.45 8180.27,-3573.57 8171.47,-3567.67 8169.71,-3574.45"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge153" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6585.02,-3180.57C6671.83,-3154.99 6757.93,-3111.55 6812,-3038.11 6855.63,-2978.86 6795.78,-1765.95 6848,-1714.11 6953.36,-1609.52 7991.98,-1656.42 8343.16,-1675.46"/>
<polygon fill="black" stroke="black" points="8343.17,-1678.97 8353.35,-1676.02 8343.55,-1671.98 8343.17,-1678.97"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge155" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6405.37,-3251.68C6519.77,-3291.67 6694.51,-3366.05 6812,-3478.11 6835.62,-3500.64 6821.04,-3523.73 6848,-3542.11 7252.12,-3817.69 7457.82,-3600.94 7938,-3694.11 8099.27,-3725.41 8285.39,-3775.29 8385.57,-3803.29"/>
<polygon fill="black" stroke="black" points="8384.71,-3806.69 8395.29,-3806.01 8386.6,-3799.94 8384.71,-3806.69"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node107" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node107"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="8677.5,-671.11 8241.5,-671.11 8241.5,-627.11 8677.5,-627.11 8677.5,-671.11"/>
<text text-anchor="middle" x="8459.5" y="-640.79" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge152" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6586.44,-3180.56C6672.93,-3154.95 6758.47,-3111.51 6812,-3038.11 6877.48,-2948.32 6778.2,-1124.59 6848,-1038.11 7160.54,-650.88 7540.21,-1081.1 7938,-782.11 7964.09,-762.51 7947.06,-736.54 7974,-718.11 8048.45,-667.19 8144.46,-646.64 8231.36,-640.02"/>
<polygon fill="black" stroke="black" points="8231.64,-643.51 8241.37,-639.32 8231.14,-636.53 8231.64,-643.51"/>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge176" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8677.76,-642.2C8844.63,-636.9 9068.12,-629.79 9199.67,-625.61"/>
<polygon fill="black" stroke="black" points="9199.88,-629.1 9209.76,-625.29 9199.65,-622.11 9199.88,-629.1"/>
</g>
<!-- scan_ontology.main -->
<g id="node108" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5684,-2409.61 5225,-2409.61 5225,-2352.61 5684,-2352.61 5684,-2409.61"/>
<text text-anchor="middle" x="5454.5" y="-2369.77" font-family="Times,serif" font-size="44.80">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge156" class="edge">
<title>scan_ontology.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5684.35,-2365.81C5711.86,-2364.36 5739.55,-2363.07 5766,-2362.11 6715.7,-2327.79 7854.93,-2329.06 8283.83,-2331.04"/>
<polygon fill="black" stroke="black" points="8284.12,-2334.54 8294.14,-2331.09 8284.16,-2327.54 8284.12,-2334.54"/>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge157" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5470.2,-2352.54C5517.71,-2258.69 5667.62,-1950.19 5730,-1676.11 5741.65,-1624.94 5727.7,-1241 5766,-1205.11 5828.58,-1146.49 7741.3,-1130.54 8945,-1193.11 9033.45,-1197.71 9133.48,-1208.54 9206.35,-1217.47"/>
<polygon fill="black" stroke="black" points="9206.09,-1220.97 9216.44,-1218.72 9206.95,-1214.02 9206.09,-1220.97"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge158" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5608.3,-2409.7C5655.1,-2426.33 5701.67,-2452.61 5730,-2494.11 5793.57,-2587.22 5687.72,-4441.98 5766,-4523.11 5884.82,-4646.27 6111.8,-4603.19 6223.14,-4571.95"/>
<polygon fill="black" stroke="black" points="6224.25,-4575.27 6232.9,-4569.16 6222.33,-4568.54 6224.25,-4575.27"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge159" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5605,-2409.74C5652.42,-2426.4 5700.22,-2452.68 5730,-2494.11 5800.71,-2592.49 5692.28,-2941.97 5766,-3038.11 5820.34,-3108.99 5904.39,-3151.85 5989.28,-3177.7"/>
<polygon fill="black" stroke="black" points="5988.51,-3181.12 5999.1,-3180.61 5990.5,-3174.41 5988.51,-3181.12"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node109" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node109"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7507.5,-4121.11 7278.5,-4121.11 7278.5,-4085.11 7507.5,-4085.11 7507.5,-4121.11"/>
<text text-anchor="middle" x="7393" y="-4099.07" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge160" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7507.67,-4105.14C7719.5,-4108.92 8170.77,-4116.98 8365.67,-4120.46"/>
<polygon fill="black" stroke="black" points="8365.82,-4123.96 8375.88,-4120.64 8365.95,-4116.96 8365.82,-4123.96"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node110" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node110"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8561.5,-3077.11 8357.5,-3077.11 8357.5,-3041.11 8561.5,-3041.11 8561.5,-3077.11"/>
<text text-anchor="middle" x="8459.5" y="-3055.41" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._more_user_path -->
<g id="node111" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node111"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8574.5,-2985.11 8344.5,-2985.11 8344.5,-2949.11 8574.5,-2949.11 8574.5,-2985.11"/>
<text text-anchor="middle" x="8459.5" y="-2963.41" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar -->
<g id="node112" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node112"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7541,-3077.11 7245,-3077.11 7245,-3041.11 7541,-3041.11 7541,-3077.11"/>
<text text-anchor="middle" x="7393" y="-3053.81" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge165" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7541.19,-3051.96C7658.42,-3046.34 7826.71,-3038.42 7974,-3032.11 8027.94,-3029.8 8907,-3032.46 8945,-2994.11 8992.1,-2946.58 8962.47,-1854.42 8981,-1790.11 9046.28,-1563.59 9224.6,-1333.58 9287.32,-1257.39"/>
<polygon fill="black" stroke="black" points="9290.36,-1259.21 9294.05,-1249.28 9284.97,-1254.74 9290.36,-1259.21"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge166" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7541.18,-3059.11C7756.85,-3059.11 8154.04,-3059.11 8347.19,-3059.11"/>
<polygon fill="black" stroke="black" points="8347.36,-3062.61 8357.36,-3059.11 8347.36,-3055.61 8347.36,-3062.61"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node113" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node113"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8536,-4373.11 8383,-4373.11 8383,-4337.11 8536,-4337.11 8536,-4373.11"/>
<text text-anchor="middle" x="8459.5" y="-4351.41" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge167" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7541.12,-3055.99C7683.84,-3056.45 7886.22,-3067.55 7938,-3124.11 8025.97,-3220.21 7886.14,-4199.92 7974,-4296.11 8025.83,-4352.86 8247.48,-4358.81 8372.26,-4357.46"/>
<polygon fill="black" stroke="black" points="8372.59,-4360.96 8382.54,-4357.33 8372.5,-4353.96 8372.59,-4360.96"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node128" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node128"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9435.5,-4320.11 9185.5,-4320.11 9185.5,-4284.11 9435.5,-4284.11 9435.5,-4320.11"/>
<text text-anchor="middle" x="9310.5" y="-4295.95" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge204" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8536.22,-4350.39C8680.11,-4341.4 8994.77,-4321.76 9175.22,-4310.5"/>
<polygon fill="black" stroke="black" points="9175.54,-4313.98 9185.31,-4309.87 9175.11,-4307 9175.54,-4313.98"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node114" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node114"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7560.5,-3023.11 7225.5,-3023.11 7225.5,-2987.11 7560.5,-2987.11 7560.5,-3023.11"/>
<text text-anchor="middle" x="7393" y="-2999.81" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge168" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7551.09,-2987.08C7926.97,-2942.4 8853.83,-2822.54 8945,-2717.11 9012.42,-2639.15 8952.01,-1889.03 8981,-1790.11 9047.29,-1563.88 9224.97,-1333.69 9287.42,-1257.42"/>
<polygon fill="black" stroke="black" points="9290.46,-1259.24 9294.12,-1249.3 9285.06,-1254.79 9290.46,-1259.24"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge169" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7560.62,-2999.17C7774.97,-2991.51 8142.42,-2978.4 8334.03,-2971.56"/>
<polygon fill="black" stroke="black" points="8334.27,-2975.05 8344.14,-2971.2 8334.02,-2968.06 8334.27,-2975.05"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge170" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7560.69,-2989.74C7701.15,-2980.88 7887.14,-2980.17 7938,-3032.11 8036.29,-3132.51 7879.36,-4192.27 7974,-4296.11 8025.77,-4352.92 8247.44,-4358.84 8372.24,-4357.47"/>
<polygon fill="black" stroke="black" points="8372.57,-4360.97 8382.53,-4357.34 8372.49,-4353.97 8372.57,-4360.97"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node115" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node115"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9551.5,-3153.11 9069.5,-3153.11 9069.5,-3113.11 9551.5,-3113.11 9551.5,-3153.11"/>
<text text-anchor="middle" x="9310.5" y="-3126.04" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node116" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node116"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7532,-3169.11 7254,-3169.11 7254,-3133.11 7532,-3133.11 7532,-3169.11"/>
<text text-anchor="middle" x="7393" y="-3146.33" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node117" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node117"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="8916.5,-3170.61 8002.5,-3170.61 8002.5,-3095.61 8916.5,-3095.61 8916.5,-3170.61"/>
<text text-anchor="middle" x="8459.5" y="-3118.12" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge171" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M8916.69,-3133.11C8965.64,-3133.11 9014.02,-3133.11 9059.22,-3133.11"/>
<polygon fill="black" stroke="black" points="9059.42,-3136.61 9069.42,-3133.11 9059.42,-3129.61 9059.42,-3136.61"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node118" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node118"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9640,-3300.61 8981,-3300.61 8981,-3245.61 9640,-3245.61 9640,-3300.61"/>
<text text-anchor="middle" x="9310.5" y="-3262.12" font-family="Times,serif" font-size="43.12">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- moderation.should_skip_text -->
<g id="node119" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node119"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="10087.5,-1840.11 9799.5,-1840.11 9799.5,-1804.11 10087.5,-1804.11 10087.5,-1840.11"/>
<text text-anchor="middle" x="9943.5" y="-1817.33" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge173" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9319.57,-1844.84C9359.3,-1957.31 9536.26,-2466.1 9640,-2894.11 9681.02,-3063.35 9901.95,-4338.51 9937.63,-4544.93"/>
<polygon fill="black" stroke="black" points="9934.21,-4545.71 9939.37,-4554.97 9941.11,-4544.52 9934.21,-4545.71"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge172" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9605.76,-1822.11C9669.12,-1822.11 9733.64,-1822.11 9789.01,-1822.11"/>
<polygon fill="black" stroke="black" points="9789.25,-1825.61 9799.25,-1822.11 9789.25,-1818.61 9789.25,-1825.61"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node122" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node122"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7653.5,-1910.61 7132.5,-1910.61 7132.5,-1863.61 7653.5,-1863.61 7653.5,-1910.61"/>
<text text-anchor="middle" x="7393" y="-1878.61" font-family="Times,serif" font-size="35.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge181" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7462.57,-1910.69C7583.95,-1956.55 7833.66,-2070.44 7938,-2262.11 8002.26,-2380.15 7890.42,-3365.87 7974,-3471.11 8022.09,-3531.67 8095.19,-3565.61 8170.14,-3584.11"/>
<polygon fill="black" stroke="black" points="8169.71,-3587.6 8180.25,-3586.51 8171.33,-3580.79 8169.71,-3587.6"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge177" class="edge">
<title>moderation.apply_to_history&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7614.86,-1910.65C7727.95,-1934.39 7858.25,-1981.93 7938,-2077.11 8002.48,-2154.07 7899.75,-2232.54 7974,-2300.11 8086.04,-2402.07 8279.52,-2376.66 8384.9,-2352.45"/>
<polygon fill="black" stroke="black" points="8385.89,-2355.81 8394.82,-2350.12 8384.28,-2349 8385.89,-2355.81"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge178" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7653.76,-1871.4C7743.78,-1865.94 7845.33,-1859.77 7938,-1854.11 8052.56,-1847.12 8181.3,-1839.2 8282.08,-1833"/>
<polygon fill="black" stroke="black" points="8282.6,-1836.47 8292.36,-1832.36 8282.17,-1829.48 8282.6,-1836.47"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge179" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7519.16,-1910.64C7636.07,-1925.8 7811.13,-1930.47 7938,-1854.11 7964.32,-1838.27 7947.77,-1811.1 7974,-1795.11 8087.06,-1726.18 8243.71,-1728.64 8347.93,-1740.85"/>
<polygon fill="black" stroke="black" points="8347.81,-1744.36 8358.16,-1742.1 8348.66,-1737.41 8347.81,-1744.36"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge180" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7653.82,-1898.96C7771.23,-1898.87 7893.54,-1889.42 7938,-1854.11 7981.94,-1819.22 7930.84,-1768.97 7974,-1733.11 8080.35,-1644.76 8248.45,-1648.45 8356.06,-1662.66"/>
<polygon fill="black" stroke="black" points="8355.9,-1666.17 8366.28,-1664.06 8356.85,-1659.23 8355.9,-1666.17"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge182" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7462.64,-1910.65C7584.14,-1956.45 7834.02,-2070.24 7938,-2262.11 8011.3,-2397.36 7884.32,-3521.13 7974,-3646.11 8065.91,-3774.22 8260.33,-3810.31 8372.95,-3820.36"/>
<polygon fill="black" stroke="black" points="8372.66,-3823.85 8382.92,-3821.2 8373.25,-3816.87 8372.66,-3823.85"/>
</g>
<!-- similar._iter_lots -->
<g id="node123" class="node">
<title>similar._iter_lots</title>
<g id="a_node123"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7547,-1845.61 7239,-1845.61 7239,-1798.61 7547,-1798.61 7547,-1845.61"/>
<text text-anchor="middle" x="7393" y="-1813.61" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge187" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7547.3,-1809.05C7689.21,-1800.74 7885.88,-1800.05 7938,-1854.11 8000.37,-1918.8 7918.39,-3400.54 7974,-3471.11 8021.93,-3531.93 8095.09,-3565.93 8170.15,-3584.41"/>
<polygon fill="black" stroke="black" points="8169.74,-3587.91 8180.27,-3586.81 8171.35,-3581.1 8169.74,-3587.91"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge183" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7547.08,-1822.11C7741.71,-1822.11 8077.03,-1822.11 8282.16,-1822.11"/>
<polygon fill="black" stroke="black" points="8282.44,-1825.61 8292.44,-1822.11 8282.44,-1818.61 8282.44,-1825.61"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge184" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7547.08,-1813.2C7751.19,-1801.31 8110.02,-1780.41 8311.17,-1768.69"/>
<polygon fill="black" stroke="black" points="8311.44,-1772.19 8321.22,-1768.11 8311.03,-1765.2 8311.44,-1772.19"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge185" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7524.11,-1845.62C7640.68,-1859.75 7812.18,-1862.84 7938,-1789.11 7963.53,-1774.16 7948.81,-1748.63 7974,-1733.11 8085.33,-1664.53 8238.89,-1660.18 8343.08,-1667.5"/>
<polygon fill="black" stroke="black" points="8343.09,-1671.01 8353.32,-1668.27 8343.61,-1664.03 8343.09,-1671.01"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge186" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7547.33,-1832.11C7687.05,-1837.86 7880.18,-1836.3 7938,-1789.11 7985.78,-1750.12 7928.42,-1696.65 7974,-1655.11 8066.81,-1570.54 8212.97,-1555.77 8320.51,-1558.49"/>
<polygon fill="black" stroke="black" points="8320.69,-1562 8330.79,-1558.81 8320.9,-1555 8320.69,-1562"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge188" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7547.33,-1809.03C7689.25,-1800.69 7885.94,-1800 7938,-1854.11 8007.04,-1925.87 7916.19,-3565.04 7974,-3646.11 8065.53,-3774.49 8260.1,-3810.48 8372.84,-3820.44"/>
<polygon fill="black" stroke="black" points="8372.56,-3823.93 8382.82,-3821.27 8373.14,-3816.95 8372.56,-3823.93"/>
</g>
<!-- similar.main -->
<g id="node124" class="node">
<title>similar.main</title>
<g id="a_node124"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6394,-3029.11 6184,-3029.11 6184,-2987.11 6394,-2987.11 6394,-3029.11"/>
<text text-anchor="middle" x="6289" y="-3000.03" font-family="Times,serif" font-size="31.36">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge189" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6372.03,-3029.16C6484.7,-3052.77 6687.51,-3075.56 6812,-2973.11 6859.95,-2933.66 6800.1,-2877.64 6848,-2838.11 7035.28,-2683.57 7744.09,-2908.25 7938,-2762.11 7975.39,-2733.94 7937.29,-2692.17 7974,-2663.11 8029.15,-2619.46 8099.5,-2598.13 8169.38,-2589.24"/>
<polygon fill="black" stroke="black" points="8170.17,-2592.67 8179.69,-2588.01 8169.35,-2585.72 8170.17,-2592.67"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge190" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6310.39,-2986.96C6378.76,-2917.56 6609,-2695.73 6848,-2600.11 6937.37,-2564.36 7040.97,-2545.77 7133.63,-2536.36"/>
<polygon fill="black" stroke="black" points="7134.1,-2539.83 7143.71,-2535.37 7133.42,-2532.87 7134.1,-2539.83"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge195" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6305.02,-2986.96C6363.57,-2906.35 6586.28,-2616.93 6848,-2496.11 6939.37,-2453.93 7048.09,-2435.17 7144.23,-2427.67"/>
<polygon fill="black" stroke="black" points="7144.67,-2431.15 7154.39,-2426.92 7144.16,-2424.17 7144.67,-2431.15"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge191" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6394.17,-3012.93C6588.19,-3021.91 7005.91,-3041.25 7234.55,-3051.83"/>
<polygon fill="black" stroke="black" points="7234.47,-3055.33 7244.62,-3052.29 7234.79,-3048.33 7234.47,-3055.33"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge192" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6394.17,-3007.83C6582.77,-3007.32 6982.75,-3006.23 7214.96,-3005.6"/>
<polygon fill="black" stroke="black" points="7215.21,-3009.1 7225.2,-3005.57 7215.19,-3002.1 7215.21,-3009.1"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge193" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6376.38,-3029.14C6485.53,-3054.82 6679.49,-3097.5 6848,-3119.11 6981.2,-3136.2 7133.93,-3144.17 7243.59,-3147.89"/>
<polygon fill="black" stroke="black" points="7243.62,-3151.39 7253.73,-3148.23 7243.85,-3144.4 7243.62,-3151.39"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge194" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6394,-3026.13C6505.78,-3044.68 6688.88,-3072.71 6848,-3086.11 7061.65,-3104.11 7596.96,-3117.41 7992.07,-3125.18"/>
<polygon fill="black" stroke="black" points="7992.18,-3128.68 8002.25,-3125.38 7992.32,-3121.68 7992.18,-3128.68"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge196" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6344.41,-3029.26C6443.05,-3066.56 6658.75,-3143.37 6848,-3178.11 7244.8,-3250.96 8393.7,-3268.03 8970.59,-3271.97"/>
<polygon fill="black" stroke="black" points="8970.71,-3275.47 8980.73,-3272.04 8970.76,-3268.47 8970.71,-3275.47"/>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge197" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6325.96,-2987.04C6425.19,-2926.6 6702.72,-2741.51 6812,-2502.11 6841.94,-2436.51 6797.09,-1905.19 6848,-1854.11 6899.73,-1802.21 7088.04,-1801.41 7228.7,-1808.86"/>
<polygon fill="black" stroke="black" points="7228.57,-1812.36 7238.75,-1809.41 7228.95,-1805.37 7228.57,-1812.36"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node126" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node126"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="9469.5,-931.11 9151.5,-931.11 9151.5,-891.11 9469.5,-891.11 9469.5,-931.11"/>
<text text-anchor="middle" x="9310.5" y="-904.04" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node127" class="node">
<title>lot_io.write_lots</title>
<g id="a_node127"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="8561,-919.11 8358,-919.11 8358,-883.11 8561,-883.11 8561,-919.11"/>
<text text-anchor="middle" x="8459.5" y="-895.52" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge202" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8561.18,-909.33C8686.34,-917.22 8890.2,-921.72 8945,-873.11 9012.89,-812.89 8915.99,-735.44 8981,-672.11 9037.62,-616.96 9127.73,-606.52 9199.26,-608.73"/>
<polygon fill="black" stroke="black" points="9199.54,-612.25 9209.67,-609.15 9199.82,-605.25 9199.54,-612.25"/>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge200" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8561.39,-884.55C8670.95,-872.8 8843.79,-873.44 8945,-971.11 9009.67,-1033.53 8917.59,-1106.41 8981,-1170.11 9038.94,-1228.32 9133.28,-1240.8 9206.03,-1240.33"/>
<polygon fill="black" stroke="black" points="9206.2,-1243.83 9216.14,-1240.18 9206.09,-1236.83 9206.2,-1243.83"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge201" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8561.43,-901.72C8659.93,-903.73 8813.72,-910.66 8945,-933.11 9002.28,-942.91 9154.4,-987.86 9242.97,-1014.71"/>
<polygon fill="black" stroke="black" points="9242.07,-1018.09 9252.65,-1017.65 9244.1,-1011.4 9242.07,-1018.09"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge203" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M8561.23,-902.3C8704.21,-903.98 8967.84,-907.09 9140.91,-909.13"/>
<polygon fill="black" stroke="black" points="9141.11,-912.63 9151.15,-909.25 9141.19,-905.63 9141.11,-912.63"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node129" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node129"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="6395.5,-1574.11 6182.5,-1574.11 6182.5,-1538.11 6395.5,-1538.11 6395.5,-1574.11"/>
<text text-anchor="middle" x="6289" y="-1551.95" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node130" class="node">
<title>lot_io.get_lot</title>
<g id="a_node130"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7465.5,-2699.11 7320.5,-2699.11 7320.5,-2663.11 7465.5,-2663.11 7465.5,-2699.11"/>
<text text-anchor="middle" x="7393" y="-2676.32" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge205" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7465.73,-2688.87C7598.29,-2701.45 7873.94,-2718.85 7938,-2654.11 8010.03,-2581.32 7904.01,-1807.87 7974,-1733.11 8075.74,-1624.44 8266.6,-1641.09 8375.94,-1662.11"/>
<polygon fill="black" stroke="black" points="8375.45,-1665.58 8385.94,-1664.09 8376.81,-1658.71 8375.45,-1665.58"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge206" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7465.56,-2673.29C7598.17,-2660.56 7874.39,-2642.86 7938,-2708.11 7995.99,-2767.6 7915.7,-4143.93 7974,-4203.11 8011.89,-4241.57 8891.3,-4235.59 8945,-4241.11 9035.67,-4250.44 9137.96,-4268.2 9211.05,-4282.16"/>
<polygon fill="black" stroke="black" points="9210.69,-4285.66 9221.17,-4284.11 9212.01,-4278.78 9210.69,-4285.66"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge207" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9398.78,-4194.14C9471.54,-4203.82 9573.66,-4204.26 9640,-4149.11 9814.58,-4004 9917.5,-3241.84 9938.49,-3071.78"/>
<polygon fill="black" stroke="black" points="9941.98,-3072.02 9939.72,-3061.67 9935.04,-3071.17 9941.98,-3072.02"/>
</g>
<!-- caption_io.write_caption -->
<g id="node132" class="node">
<title>caption_io.write_caption</title>
<g id="a_node132"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8626,-4194.11 8293,-4194.11 8293,-4158.11 8626,-4158.11 8626,-4194.11"/>
<text text-anchor="middle" x="8459.5" y="-4169.95" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge215" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8626.28,-4189.69C8748.88,-4195.69 8901.76,-4193.29 8945,-4149.11 9026.27,-4066.09 8920.42,-3203.25 8981,-3104.11 9034.86,-3015.97 9147.64,-2966.87 9225.93,-2942.23"/>
<polygon fill="black" stroke="black" points="9227.25,-2945.49 9235.77,-2939.2 9225.19,-2938.8 9227.25,-2945.49"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge218" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8552.63,-4158.05C8662.85,-4142.35 8844.99,-4136.24 8945,-4241.11 9009.34,-4308.58 8920.3,-4588.34 8981,-4659.11 9035.01,-4722.09 9129.53,-4739.91 9203.36,-4743.24"/>
<polygon fill="black" stroke="black" points="9203.51,-4746.75 9213.63,-4743.62 9203.76,-4739.76 9203.51,-4746.75"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge216" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8626.19,-4189.9C8748.98,-4196.04 8902.15,-4193.74 8945,-4149.11 8990.39,-4101.85 8963.31,-1853.22 8981,-1790.11 9044.62,-1563.12 9224,-1333.41 9287.16,-1257.35"/>
<polygon fill="black" stroke="black" points="9290.2,-1259.16 9293.93,-1249.24 9284.83,-1254.67 9290.2,-1259.16"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge217" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8626.21,-4176.11C8792.33,-4176.11 9043.95,-4176.11 9191,-4176.11"/>
<polygon fill="black" stroke="black" points="9191.41,-4179.61 9201.41,-4176.11 9191.41,-4172.61 9191.41,-4179.61"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node134" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node134"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7538,-3739.11 7248,-3739.11 7248,-3703.11 7538,-3703.11 7538,-3739.11"/>
<text text-anchor="middle" x="7393" y="-3716.95" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge224" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7538.26,-3726.58C7648.04,-3731.47 7802.76,-3739.93 7938,-3753.11 8091.73,-3768.1 8269.86,-3794.33 8372.83,-3810.37"/>
<polygon fill="black" stroke="black" points="8372.44,-3813.85 8382.86,-3811.94 8373.52,-3806.94 8372.44,-3813.85"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node135" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node135"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7542.5,-4501.11 7243.5,-4501.11 7243.5,-4465.11 7542.5,-4465.11 7542.5,-4501.11"/>
<text text-anchor="middle" x="7393" y="-4477.24" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node136" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node136"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8680.5,-3896.11 8238.5,-3896.11 8238.5,-3860.11 8680.5,-3860.11 8680.5,-3896.11"/>
<text text-anchor="middle" x="8459.5" y="-3872.52" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node137" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node137"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7647,-4446.61 7139,-4446.61 7139,-4403.61 7647,-4403.61 7647,-4446.61"/>
<text text-anchor="middle" x="7393" y="-4416.97" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge225" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7647.24,-4439.13C7768.54,-4439.92 7896.4,-4430.08 7938,-4389.11 8008.06,-4320.12 7903.19,-4016.34 7974,-3948.11 8051.77,-3873.18 8868.61,-3981.45 8945,-3905.11 9008.02,-3842.14 8934.15,-3179.89 8981,-3104.11 9035.4,-3016.12 9148.33,-2966.94 9226.48,-2942.24"/>
<polygon fill="black" stroke="black" points="9227.79,-2945.5 9236.31,-2939.21 9225.72,-2938.81 9227.79,-2945.5"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge226" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7647.21,-4414.99C7739.04,-4409.58 7843.43,-4401.39 7938,-4389.11 7954.16,-4387.02 7957.83,-4384.13 7974,-4382.11 8112.88,-4364.82 8275.53,-4358.6 8372.63,-4356.37"/>
<polygon fill="black" stroke="black" points="8372.76,-4359.87 8382.68,-4356.14 8372.61,-4352.87 8372.76,-4359.87"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node138" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node138"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9536.5,-4819.11 9084.5,-4819.11 9084.5,-4775.11 9536.5,-4775.11 9536.5,-4819.11"/>
<text text-anchor="middle" x="9310.5" y="-4788.79" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge227" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9536.63,-4776.78C9634.55,-4767.93 9745.16,-4757.94 9826.15,-4750.62"/>
<polygon fill="black" stroke="black" points="9826.73,-4754.09 9836.38,-4749.7 9826.1,-4747.11 9826.73,-4754.09"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node139" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node139"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7640,-4710.61 7146,-4710.61 7146,-4661.61 7640,-4661.61 7640,-4710.61"/>
<text text-anchor="middle" x="7393" y="-4676.93" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge233" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7640.09,-4700.55C7763.17,-4702.07 7894.97,-4693.12 7938,-4652.11 8042.89,-4552.16 7872.09,-4431.1 7974,-4328.11 8073.41,-4227.65 8248.95,-4233.05 8359.22,-4249.02"/>
<polygon fill="black" stroke="black" points="8358.94,-4252.51 8369.35,-4250.54 8359.98,-4245.59 8358.94,-4252.51"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge229" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7640.15,-4701.36C7763.7,-4703.18 7895.92,-4694.26 7938,-4652.11 8030.81,-4559.16 7880.54,-4154.41 7974,-4062.11 8050.86,-3986.22 8868.96,-4091.83 8945,-4015.11 9016.31,-3943.17 8927.96,-3190.42 8981,-3104.11 9035.16,-3015.97 9148.15,-2966.83 9226.38,-2942.18"/>
<polygon fill="black" stroke="black" points="9227.69,-2945.44 9236.22,-2939.15 9225.63,-2938.75 9227.69,-2945.44"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge234" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7640.05,-4701.61C7763.78,-4703.54 7896.22,-4694.64 7938,-4652.11 8000.44,-4588.57 7911.34,-3914.45 7974,-3851.11 8083.34,-3740.59 8286.82,-3775.38 8391.89,-3803.42"/>
<polygon fill="black" stroke="black" points="8391.18,-3806.85 8401.75,-3806.11 8393.02,-3800.1 8391.18,-3806.85"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge228" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7640.17,-4681.9C8053.69,-4676.41 8913.85,-4671.77 9640,-4712.11 9701.6,-4715.54 9770.07,-4721.68 9826.26,-4727.34"/>
<polygon fill="black" stroke="black" points="9825.94,-4730.82 9836.25,-4728.35 9826.65,-4723.86 9825.94,-4730.82"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge232" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7542.82,-4661.61C7658.2,-4650.24 7818.09,-4651.73 7938,-4720.11 7962.74,-4734.22 7954.14,-4752.7 7974,-4773.11 8116.94,-4920.06 8328.15,-5048.23 8416.87,-5098.95"/>
<polygon fill="black" stroke="black" points="8415.39,-5102.14 8425.82,-5104.04 8418.85,-5096.06 8415.39,-5102.14"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge231" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7640.01,-4692.92C8061.97,-4704.6 8906.95,-4727.98 9203.6,-4736.18"/>
<polygon fill="black" stroke="black" points="9203.83,-4739.69 9213.92,-4736.47 9204.02,-4732.69 9203.83,-4739.69"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge230" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7640.11,-4700.18C7762.98,-4701.57 7894.57,-4692.6 7938,-4652.11 8026.55,-4569.56 7885.17,-4464.36 7974,-4382.11 8086.58,-4277.87 8284.19,-4308.28 8388.87,-4334.52"/>
<polygon fill="black" stroke="black" points="8388.15,-4337.95 8398.71,-4337.04 8389.89,-4331.17 8388.15,-4337.95"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node140" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node140"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7608.5,-4643.11 7177.5,-4643.11 7177.5,-4599.11 7608.5,-4599.11 7608.5,-4643.11"/>
<text text-anchor="middle" x="7393" y="-4612.79" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge235" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7608.64,-4636.89C7740.3,-4641.42 7892.15,-4635.66 7938,-4590.11 8027.41,-4501.29 7884.16,-4112.51 7974,-4024.11 8050.99,-3948.36 8868.86,-4054.72 8945,-3978.11 9013.51,-3909.18 8930.04,-3186.88 8981,-3104.11 9035.24,-3016.01 9148.21,-2966.86 9226.41,-2942.2"/>
<polygon fill="black" stroke="black" points="9227.72,-2945.46 9236.25,-2939.17 9225.66,-2938.77 9227.72,-2945.46"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge239" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7608.5,-4637.1C7740.34,-4641.74 7892.45,-4636.04 7938,-4590.11 7995.89,-4531.74 7916.07,-3909.45 7974,-3851.11 8083.41,-3740.94 8286.4,-3775.41 8391.53,-3803.36"/>
<polygon fill="black" stroke="black" points="8390.82,-3806.79 8401.39,-3806.04 8392.65,-3800.04 8390.82,-3806.79"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge237" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7608.78,-4627.9C7908.38,-4638.29 8468.63,-4661.03 8945,-4699.11 9032.28,-4706.09 9130.98,-4717.12 9203.64,-4725.83"/>
<polygon fill="black" stroke="black" points="9203.37,-4729.32 9213.72,-4727.04 9204.21,-4722.37 9203.37,-4729.32"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge238" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7608.62,-4622.35C8020.06,-4624.71 8905.71,-4629.79 9206.84,-4631.52"/>
<polygon fill="black" stroke="black" points="9206.86,-4635.02 9216.88,-4631.58 9206.9,-4628.02 9206.86,-4635.02"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge236" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7608.52,-4635.27C7739.18,-4639.01 7889.94,-4632.96 7938,-4590.11 8008.03,-4527.68 7903.94,-4444.51 7974,-4382.11 8087.97,-4280.62 8283.26,-4309.25 8387.7,-4334.66"/>
<polygon fill="black" stroke="black" points="8386.97,-4338.09 8397.52,-4337.11 8388.66,-4331.29 8386.97,-4338.09"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node141" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node141"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9583,-4595.61 9038,-4595.61 9038,-4550.61 9583,-4550.61 9583,-4595.61"/>
<text text-anchor="middle" x="9310.5" y="-4564.73" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge240" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9583.22,-4573.11C9661.48,-4573.11 9743.41,-4573.11 9809.23,-4573.11"/>
<polygon fill="black" stroke="black" points="9809.24,-4576.61 9819.24,-4573.11 9809.24,-4569.61 9809.24,-4576.61"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node142" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node142"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9464.5,-4532.11 9156.5,-4532.11 9156.5,-4496.11 9464.5,-4496.11 9464.5,-4532.11"/>
<text text-anchor="middle" x="9310.5" y="-4508.52" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node143" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node143"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7839.5,-4581.11 6946.5,-4581.11 6946.5,-4519.11 7839.5,-4519.11 7839.5,-4581.11"/>
<text text-anchor="middle" x="7393" y="-4537.91" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge243" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7839.8,-4549.3C7884.31,-4541.21 7919.8,-4528.74 7938,-4510.11 7993.44,-4453.38 7928.13,-3861.83 7974,-3797.11 8031.29,-3716.3 8127.65,-3668.41 8219.41,-3640.05"/>
<polygon fill="black" stroke="black" points="8220.57,-3643.36 8229.13,-3637.11 8218.55,-3636.66 8220.57,-3643.36"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge241" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7839.79,-4548.94C7884.2,-4540.89 7919.67,-4528.53 7938,-4510.11 8020.33,-4427.38 7890.55,-4067.72 7974,-3986.11 8051.22,-3910.6 8868.76,-4017.61 8945,-3941.11 9010.71,-3875.18 8932.13,-3183.34 8981,-3104.11 9035.32,-3016.06 9148.27,-2966.9 9226.45,-2942.22"/>
<polygon fill="black" stroke="black" points="9227.75,-2945.48 9236.28,-2939.19 9225.69,-2938.79 9227.75,-2945.48"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge244" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7839.73,-4549.23C7884.25,-4541.15 7919.76,-4528.7 7938,-4510.11 8040.73,-4405.44 7870.35,-3954.88 7974,-3851.11 8083.73,-3741.26 8286.59,-3775.59 8391.6,-3803.43"/>
<polygon fill="black" stroke="black" points="8390.89,-3806.86 8401.45,-3806.1 8392.72,-3800.11 8390.89,-3806.86"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge242" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7839.53,-4544.76C7883.04,-4537.27 7918.34,-4526.18 7938,-4510.11 7983.76,-4472.72 7927.91,-4419.1 7974,-4382.11 8090.81,-4288.4 8279.01,-4311.81 8383.14,-4334.88"/>
<polygon fill="black" stroke="black" points="8382.42,-4338.31 8392.95,-4337.11 8383.97,-4331.48 8382.42,-4338.31"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge245" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7839.78,-4555.47C8206.51,-4559.87 8715.09,-4565.98 9027.7,-4569.73"/>
<polygon fill="black" stroke="black" points="9027.77,-4573.23 9037.81,-4569.85 9027.86,-4566.23 9027.77,-4573.23"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge246" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7839.78,-4541.74C8257.77,-4533.88 8860.02,-4522.56 9146.36,-4517.18"/>
<polygon fill="black" stroke="black" points="9146.48,-4520.68 9156.42,-4516.99 9146.35,-4513.68 9146.48,-4520.68"/>
</g>
<!-- debug_dump.main -->
<g id="node144" class="node">
<title>debug_dump.main</title>
<g id="a_node144"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6529,-4514.61 6049,-4514.61 6049,-4451.61 6529,-4451.61 6529,-4514.61"/>
<text text-anchor="middle" x="6289" y="-4470.97" font-family="Times,serif" font-size="49.56">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge247" class="edge">
<title>debug_dump.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6433.8,-4451.6C6557.11,-4416.3 6727.78,-4345.86 6812,-4214.11 6862.67,-4134.84 6785.94,-3438.82 6848,-3368.11 7172.39,-2998.53 7610.48,-3544.92 7938,-3178.11 8027.55,-3077.82 7899.91,-2686.32 7974,-2574.11 8060.02,-2443.84 8238.26,-2380.75 8352.92,-2352.5"/>
<polygon fill="black" stroke="black" points="8353.88,-2355.87 8362.78,-2350.12 8352.24,-2349.06 8353.88,-2355.87"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge248" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6529.12,-4483.11C6742.48,-4483.11 7048.86,-4483.11 7233.34,-4483.11"/>
<polygon fill="black" stroke="black" points="7233.4,-4486.61 7243.4,-4483.11 7233.39,-4479.61 7233.4,-4486.61"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge249" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6453.82,-4451.57C6564.66,-4431.56 6714.6,-4407.09 6848,-4394.11 6908.31,-4388.25 7894.2,-4396.99 7938,-4355.11 8009.71,-4286.55 7903.33,-3979.75 7974,-3910.11 8010.47,-3874.18 8121.39,-3865.14 8227.91,-3865.57"/>
<polygon fill="black" stroke="black" points="8228.18,-3869.07 8238.2,-3865.64 8228.22,-3862.07 8228.18,-3869.07"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge250" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6529.12,-4470.53C6705.96,-4461.22 6946.71,-4448.55 7128.98,-4438.96"/>
<polygon fill="black" stroke="black" points="7129.18,-4442.45 7138.98,-4438.43 7128.81,-4435.46 7129.18,-4442.45"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge251" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6425.41,-4451.57C6543.16,-4432.86 6710.38,-4428.65 6812,-4524.11 6895.1,-4602.18 6762.2,-4703.03 6848,-4778.11 6889.52,-4814.44 8466.47,-4804.52 9074.12,-4799.33"/>
<polygon fill="black" stroke="black" points="9074.35,-4802.83 9084.32,-4799.24 9074.29,-4795.83 9074.35,-4802.83"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge252" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6448.4,-4451.6C6562.02,-4438.53 6712.06,-4442.05 6812,-4524.11 6857.67,-4561.62 6802.03,-4614.98 6848,-4652.11 6892.61,-4688.16 7016.95,-4697.69 7135.5,-4697.74"/>
<polygon fill="black" stroke="black" points="7135.86,-4701.24 7145.85,-4697.72 7135.84,-4694.24 7135.86,-4701.24"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge253" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6529.06,-4454.85C6623.83,-4455.09 6729.61,-4470.73 6812,-4524.11 6840.04,-4542.28 6819.77,-4572.25 6848,-4590.11 6900.39,-4623.27 7041.74,-4630.6 7167.23,-4629.86"/>
<polygon fill="black" stroke="black" points="7167.41,-4633.35 7177.38,-4629.78 7167.36,-4626.35 7167.41,-4633.35"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge254" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6529.12,-4497.65C6648.27,-4504.9 6796.44,-4513.9 6936.19,-4522.4"/>
<polygon fill="black" stroke="black" points="6936.04,-4525.9 6946.23,-4523.01 6936.47,-4518.91 6936.04,-4525.9"/>
</g>
<!-- telegram_bot._t -->
<g id="node145" class="node">
<title>telegram_bot._t</title>
<g id="a_node145"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5558.5,-969.11 5350.5,-969.11 5350.5,-933.11 5558.5,-933.11 5558.5,-969.11"/>
<text text-anchor="middle" x="5454.5" y="-945.24" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node146" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node146"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5605.5,-1115.11 5303.5,-1115.11 5303.5,-1079.11 5605.5,-1079.11 5605.5,-1115.11"/>
<text text-anchor="middle" x="5454.5" y="-1092.32" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node147" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node147"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6393,-1077.11 6185,-1077.11 6185,-1041.11 6393,-1041.11 6393,-1077.11"/>
<text text-anchor="middle" x="6289" y="-1055.41" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge255" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5605.78,-1090.25C5769.29,-1082.79 6027.01,-1071.03 6174.44,-1064.3"/>
<polygon fill="black" stroke="black" points="6175.03,-1067.77 6184.86,-1063.82 6174.72,-1060.78 6175.03,-1067.77"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node148" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node148"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5605.5,-5595.11 5303.5,-5595.11 5303.5,-5559.11 5605.5,-5559.11 5605.5,-5595.11"/>
<text text-anchor="middle" x="5454.5" y="-5571.81" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge256" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5605.74,-5578.67C6344.11,-5586.04 9556.11,-5614.63 9640,-5555.11 9913.64,-5360.96 9940.14,-4889.41 9942.38,-4768.66"/>
<polygon fill="black" stroke="black" points="9945.88,-4768.44 9942.52,-4758.39 9938.88,-4768.34 9945.88,-4768.44"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node149" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node149"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="5598,-4638.11 5311,-4638.11 5311,-4602.11 5598,-4602.11 5598,-4638.11"/>
<text text-anchor="middle" x="5454.5" y="-4614.42" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge257" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5469.1,-4638.38C5508.38,-4689.53 5628.03,-4834.21 5766,-4893.11 6209.9,-5082.62 6365.78,-4965.43 6848,-4986.11 8089.73,-5039.38 8418.99,-5060.19 9640,-4828.11 9725.38,-4811.88 9821.32,-4781.9 9881.81,-4761.48"/>
<polygon fill="black" stroke="black" points="9883.23,-4764.7 9891.57,-4758.17 9880.98,-4758.07 9883.23,-4764.7"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node150" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6373,-4021.11 6205,-4021.11 6205,-3985.11 6373,-3985.11 6373,-4021.11"/>
<text text-anchor="middle" x="6289" y="-3999.87" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node151" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node151"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7539,-2753.11 7247,-2753.11 7247,-2717.11 7539,-2717.11 7539,-2753.11"/>
<text text-anchor="middle" x="7393" y="-2730.95" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge258" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7490.74,-2753.13C7604.5,-2769.36 7795.83,-2780.84 7938,-2708.11 7960.8,-2696.45 7951.6,-2675.54 7974,-2663.11 8033.12,-2630.31 8102.47,-2612.42 8169.94,-2603.34"/>
<polygon fill="black" stroke="black" points="8170.4,-2606.81 8179.87,-2602.06 8169.51,-2599.86 8170.4,-2606.81"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node152" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6450.5,-2493.11 6127.5,-2493.11 6127.5,-2457.11 6450.5,-2457.11 6450.5,-2493.11"/>
<text text-anchor="middle" x="6289" y="-2470.32" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge259" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6450.68,-2466.76C6582.4,-2463.17 6755.91,-2466.92 6812,-2507.11 6846.35,-2531.73 6813.62,-2570.54 6848,-2595.11 6910.7,-2639.93 7113.93,-2640.66 7253.42,-2635.27"/>
<polygon fill="black" stroke="black" points="7253.92,-2638.76 7263.77,-2634.86 7253.64,-2631.76 7253.92,-2638.76"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node153" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5693,-1519.11 5216,-1519.11 5216,-1479.11 5693,-1479.11 5693,-1519.11"/>
<text text-anchor="middle" x="5454.5" y="-1492.04" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge260" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5693.12,-1496.55C5706.64,-1489.78 5719.13,-1481.1 5730,-1470.11 5789.51,-1409.98 5705.18,-1149.93 5766,-1091.11 5822.19,-1036.77 6038.95,-1041.06 6174.86,-1049.68"/>
<polygon fill="black" stroke="black" points="6174.7,-1053.18 6184.91,-1050.34 6175.16,-1046.2 6174.7,-1053.18"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge261" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5693.2,-1500.67C5706.8,-1507.65 5719.28,-1516.66 5730,-1528.11 5799.83,-1602.72 5694.26,-2374.34 5766,-2447.11 5813.66,-2495.46 5983.88,-2496.86 6117.14,-2489.68"/>
<polygon fill="black" stroke="black" points="6117.69,-2493.15 6127.48,-2489.1 6117.3,-2486.16 6117.69,-2493.15"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node154" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node154"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5730,-1589.11 5179,-1589.11 5179,-1537.11 5730,-1537.11 5730,-1589.11"/>
<text text-anchor="middle" x="5454.5" y="-1553.42" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge262" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5721.11,-1589.32C5724.19,-1592.09 5727.16,-1595.01 5730,-1598.11 5797.92,-1672.22 5698.55,-2427.58 5766,-2502.11 5973.98,-2731.95 7009.49,-2699.98 7310.07,-2685.57"/>
<polygon fill="black" stroke="black" points="7310.63,-2689.04 7320.45,-2685.06 7310.29,-2682.05 7310.63,-2689.04"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge263" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5720.66,-1536.97C5723.89,-1534.19 5727.01,-1531.24 5730,-1528.11 5797.35,-1457.69 5696.38,-1159.29 5766,-1091.11 5821.85,-1036.42 6038.73,-1040.83 6174.75,-1049.57"/>
<polygon fill="black" stroke="black" points="6174.6,-1053.07 6184.81,-1050.24 6175.06,-1046.08 6174.6,-1053.07"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node155" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node155"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5063.5,-5403.11 4733.5,-5403.11 4733.5,-5367.11 5063.5,-5367.11 5063.5,-5403.11"/>
<text text-anchor="middle" x="4898.5" y="-5378.95" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge264" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4922.1,-5403.22C4967.6,-5438.52 5074.82,-5516.09 5179,-5550.11 5215.04,-5561.88 5255.04,-5568.96 5293.11,-5573.11"/>
<polygon fill="black" stroke="black" points="5292.96,-5576.61 5303.27,-5574.16 5293.68,-5569.65 5292.96,-5576.61"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node156" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node156"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5010.5,-1081.11 4786.5,-1081.11 4786.5,-1045.11 5010.5,-1045.11 5010.5,-1081.11"/>
<text text-anchor="middle" x="4898.5" y="-1058.95" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge265" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5010.54,-1070.37C5054.67,-1068.37 5104.09,-1059.56 5143,-1035.11 5168.37,-1019.17 5153.5,-993.85 5179,-978.11 5226.57,-948.77 5287.83,-940.57 5340.41,-940.33"/>
<polygon fill="black" stroke="black" points="5340.44,-943.83 5350.46,-940.38 5340.47,-936.83 5340.44,-943.83"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge266" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5010.61,-1069.93C5091.67,-1074.91 5202.74,-1081.72 5293.37,-1087.29"/>
<polygon fill="black" stroke="black" points="5293.28,-1090.79 5303.47,-1087.91 5293.71,-1083.8 5293.28,-1090.79"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node157" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node157"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5073,-1026.61 4724,-1026.61 4724,-987.61 5073,-987.61 5073,-1026.61"/>
<text text-anchor="middle" x="4898.5" y="-1000.21" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge267" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5073.18,-988.95C5108.21,-985.32 5144.78,-981.57 5179,-978.11 5231.93,-972.76 5290.62,-966.97 5340.09,-962.13"/>
<polygon fill="black" stroke="black" points="5340.57,-965.6 5350.19,-961.14 5339.89,-958.63 5340.57,-965.6"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge268" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5073.23,-1015.69C5097.23,-1020.34 5121.12,-1026.91 5143,-1036.11 5161.94,-1044.08 5160.05,-1057.17 5179,-1065.11 5214.44,-1079.97 5254.57,-1088.67 5292.99,-1093.6"/>
<polygon fill="black" stroke="black" points="5292.9,-1097.12 5303.25,-1094.83 5293.73,-1090.17 5292.9,-1097.12"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge269" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5073.07,-1024.4C5108.11,-1027.39 5144.71,-1030.16 5179,-1032.11 5542.34,-1052.76 5973.53,-1057.64 6174.44,-1058.78"/>
<polygon fill="black" stroke="black" points="6174.69,-1062.28 6184.71,-1058.83 6174.73,-1055.28 6174.69,-1062.28"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node158" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node158"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5113.5,-1140.61 4683.5,-1140.61 4683.5,-1099.61 5113.5,-1099.61 5113.5,-1140.61"/>
<text text-anchor="middle" x="4898.5" y="-1112.87" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge270" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5113.6,-1108.92C5124.08,-1103.79 5133.98,-1097.58 5143,-1090.11 5183.29,-1056.78 5138.31,-1010.95 5179,-978.11 5223.47,-942.23 5286.12,-933.93 5340.34,-935.3"/>
<polygon fill="black" stroke="black" points="5340.24,-938.8 5350.36,-935.66 5340.5,-931.8 5340.24,-938.8"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge271" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5113.69,-1111.22C5173.44,-1108.74 5237.3,-1106.09 5293.34,-1103.76"/>
<polygon fill="black" stroke="black" points="5293.51,-1107.26 5303.35,-1103.35 5293.21,-1100.27 5293.51,-1107.26"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge272" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5113.52,-1123.49C5135.63,-1123.75 5157.77,-1123.96 5179,-1124.11 5423.88,-1125.87 5501.77,-1212.89 5730,-1124.11 5750.23,-1116.25 5746.02,-1099.6 5766,-1091.11 5897.9,-1035.1 6065.56,-1035.99 6174.76,-1044.91"/>
<polygon fill="black" stroke="black" points="6174.55,-1048.4 6184.81,-1045.77 6175.15,-1041.43 6174.55,-1048.4"/>
</g>
<!-- telegram_bot.main -->
<g id="node159" class="node">
<title>telegram_bot.main</title>
<g id="a_node159"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5064,-4029.11 4733,-4029.11 4733,-3985.11 5064,-3985.11 5064,-4029.11"/>
<text text-anchor="middle" x="4898.5" y="-3998.79" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge273" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4905.91,-4029.16C4937.69,-4139.36 5079.23,-4641.77 5143,-5063.11 5151.12,-5116.76 5141.1,-5511.28 5179,-5550.11 5223.11,-5595.3 5294.61,-5601.1 5353.58,-5596.1"/>
<polygon fill="black" stroke="black" points="5354.07,-5599.57 5363.69,-5595.13 5353.4,-5592.6 5354.07,-5599.57"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge274" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5003.48,-4029.16C5053.84,-4045.39 5110.35,-4072.96 5143,-4119.11 5243.79,-4261.58 5074.68,-4370.21 5179,-4510.11 5213.96,-4557 5272.16,-4583.94 5325.99,-4599.4"/>
<polygon fill="black" stroke="black" points="5325.06,-4602.77 5335.63,-4602.06 5326.93,-4596.03 5325.06,-4602.77"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge275" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5064.23,-4006.64C5357.98,-4005.79 5963.13,-4004.05 6194.89,-4003.38"/>
<polygon fill="black" stroke="black" points="6194.98,-4006.88 6204.97,-4003.35 6194.96,-3999.88 6194.98,-4006.88"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge276" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M4902.21,-3985.03C4919.44,-3848.63 5018.01,-3121.98 5179,-2981.11 5485.31,-2713.09 6785.11,-2719.56 7236.67,-2730.29"/>
<polygon fill="black" stroke="black" points="7236.77,-2733.79 7246.85,-2730.53 7236.94,-2726.79 7236.77,-2733.79"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge277" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M4904.31,-3984.98C4933.13,-3851.35 5083.59,-3138.34 5143,-2548.11 5148.68,-2491.7 5140.33,-1569.59 5179,-1528.11 5187.36,-1519.15 5196.79,-1511.68 5207,-1505.51"/>
<polygon fill="black" stroke="black" points="5208.72,-1508.55 5215.75,-1500.62 5205.31,-1502.44 5208.72,-1508.55"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge278" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M4904.29,-3984.97C4932.98,-3851.33 5082.82,-3138.27 5143,-2548.11 5148.36,-2495.57 5143.35,-1637.08 5179,-1598.11 5179.53,-1597.53 5180.07,-1596.96 5180.61,-1596.39"/>
<polygon fill="black" stroke="black" points="5183.15,-1598.8 5187.88,-1589.31 5178.27,-1593.78 5183.15,-1598.8"/>
</g>
<!-- caption._identify_size -->
<g id="node160" class="node">
<title>caption._identify_size</title>
<g id="a_node160"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9439,-5546.11 9182,-5546.11 9182,-5510.11 9439,-5510.11 9439,-5546.11"/>
<text text-anchor="middle" x="9310.5" y="-5522.42" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node161" class="node">
<title>caption._prepare_image</title>
<g id="a_node161"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8676.5,-5556.11 8242.5,-5556.11 8242.5,-5510.11 8676.5,-5510.11 8676.5,-5556.11"/>
<text text-anchor="middle" x="8459.5" y="-5524.67" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge279" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8676.66,-5531.84C8832.27,-5530.92 9037.55,-5529.72 9171.49,-5528.93"/>
<polygon fill="black" stroke="black" points="9171.83,-5532.42 9181.81,-5528.87 9171.79,-5525.42 9171.83,-5532.42"/>
</g>
<!-- caption._guess_chat -->
<g id="node162" class="node">
<title>caption._guess_chat</title>
<g id="a_node162"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9406.5,-5492.11 9214.5,-5492.11 9214.5,-5456.11 9406.5,-5456.11 9406.5,-5492.11"/>
<text text-anchor="middle" x="9310.5" y="-5469.95" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node163" class="node">
<title>caption.caption_file</title>
<g id="a_node163"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="7696,-5578.61 7090,-5578.61 7090,-5505.61 7696,-5505.61 7696,-5578.61"/>
<text text-anchor="middle" x="7393" y="-5527.13" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge280" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7549.2,-5578.62C7673,-5597.59 7841.19,-5598.77 7938,-5496.11 7991.42,-5439.47 7919.43,-4150.65 7974,-4095.11 8049.69,-4018.09 8868.84,-4129.68 8945,-4053.11 9019.42,-3978.3 8925.83,-3194.06 8981,-3104.11 9035.1,-3015.93 9148.1,-2966.8 9226.35,-2942.16"/>
<polygon fill="black" stroke="black" points="9227.66,-2945.42 9236.19,-2939.13 9225.6,-2938.73 9227.66,-2945.42"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge282" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7696.14,-5577.23C7782.21,-5572.17 7870.76,-5550.7 7938,-5496.11 7981.23,-5461.02 7938.57,-5419.07 7974,-5376.11 8080.51,-5246.98 8270.01,-5175.26 8377.74,-5143.11"/>
<polygon fill="black" stroke="black" points="8378.98,-5146.4 8387.59,-5140.22 8377.01,-5139.68 8378.98,-5146.4"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge281" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7696.12,-5542.51C7776.33,-5535.66 7861.8,-5521.91 7938,-5496.11 7955.98,-5490.03 7956.23,-5479.8 7974,-5473.11 8382.57,-5319.38 8650.03,-5646.92 8945,-5325.11 9029.11,-5233.35 8893.76,-4854.91 8981,-4766.11 9043.85,-4702.14 9152.85,-4706.38 9227.95,-4719.28"/>
<polygon fill="black" stroke="black" points="9227.39,-4722.74 9237.85,-4721.07 9228.63,-4715.85 9227.39,-4722.74"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge283" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M7549.74,-5578.64C7673.44,-5597.47 7841.2,-5598.46 7938,-5496.11 8033.86,-5394.76 7880.65,-4344.78 7974,-4241.11 8014.63,-4195.99 8161.23,-4181 8282.63,-4176.56"/>
<polygon fill="black" stroke="black" points="8282.93,-4180.05 8292.81,-4176.21 8282.69,-4173.06 8282.93,-4180.05"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge284" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M7696.2,-5539.56C7866.56,-5538.12 8075.87,-5536.35 8232.03,-5535.03"/>
<polygon fill="black" stroke="black" points="8232.27,-5538.53 8242.24,-5534.94 8232.21,-5531.53 8232.27,-5538.53"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge285" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M7696.36,-5517.85C7785.71,-5511.46 7883.75,-5505.21 7974,-5501.11 8431.74,-5480.32 8978.47,-5475.54 9204.14,-5474.44"/>
<polygon fill="black" stroke="black" points="9204.33,-5477.94 9214.31,-5474.39 9204.3,-5470.94 9204.33,-5477.94"/>
</g>
<!-- caption.main -->
<g id="node164" class="node">
<title>caption.main</title>
<g id="a_node164"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6381.5,-5549.11 6196.5,-5549.11 6196.5,-5513.11 6381.5,-5513.11 6381.5,-5549.11"/>
<text text-anchor="middle" x="6289" y="-5524.95" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge286" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6381.59,-5532.03C6533.13,-5533.54 6842.81,-5536.63 7079.61,-5539"/>
<polygon fill="black" stroke="black" points="7079.74,-5542.5 7089.77,-5539.1 7079.81,-5535.5 7079.74,-5542.5"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node167" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node167"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10211,-193.11 9676,-193.11 9676,-143.11 10211,-143.11 10211,-193.11"/>
<text text-anchor="middle" x="9943.5" y="-158.43" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge290" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9567.24,-168.11C9599.67,-168.11 9632.98,-168.11 9665.72,-168.11"/>
<polygon fill="black" stroke="black" points="9665.86,-171.61 9675.86,-168.11 9665.86,-164.61 9665.86,-171.61"/>
</g>
<!-- clean_data._parse_date -->
<g id="node169" class="node">
<title>clean_data._parse_date</title>
<g id="a_node169"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8599,-4427.11 8320,-4427.11 8320,-4391.11 8599,-4391.11 8599,-4427.11"/>
<text text-anchor="middle" x="8459.5" y="-4403.42" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge296" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8599.07,-4399.33C8875.52,-4382.77 9482.54,-4362.2 9640,-4487.11 9681.29,-4519.87 9642.13,-4559.72 9676,-4600.11 9726.26,-4660.05 9808.84,-4697.76 9868.77,-4718.74"/>
<polygon fill="black" stroke="black" points="9867.97,-4722.17 9878.56,-4722.09 9870.23,-4715.54 9867.97,-4722.17"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node170" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node170"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7546.5,-4267.11 7239.5,-4267.11 7239.5,-4231.11 7546.5,-4231.11 7546.5,-4267.11"/>
<text text-anchor="middle" x="7393" y="-4242.95" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge297" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7546.77,-4261.32C7687.99,-4268.96 7883.91,-4269.12 7938,-4217.11 7996.91,-4160.47 7915,-3907.67 7974,-3851.11 8085.36,-3744.38 8285.26,-3776.51 8390.09,-3803.47"/>
<polygon fill="black" stroke="black" points="8389.37,-3806.9 8399.93,-3806.05 8391.15,-3800.13 8389.37,-3806.9"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge298" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7546.57,-4238.14C7685.74,-4231.37 7878.47,-4231.18 7938,-4276.11 7977.71,-4306.09 7934.38,-4352.02 7974,-4382.11 8025.1,-4420.92 8186.96,-4423.11 8309.66,-4418.51"/>
<polygon fill="black" stroke="black" points="8310.05,-4422 8319.91,-4418.11 8309.78,-4415 8310.05,-4422"/>
</g>
<!-- clean_data._clean_media -->
<g id="node171" class="node">
<title>clean_data._clean_media</title>
<g id="a_node171"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7583,-4769.11 7203,-4769.11 7203,-4729.11 7583,-4729.11 7583,-4769.11"/>
<text text-anchor="middle" x="7393" y="-4742.04" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge299" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7583.27,-4753.52C7689.84,-4760.64 7824,-4777.45 7938,-4816.11 8140.16,-4884.68 8350.07,-5037.81 8427.47,-5097.56"/>
<polygon fill="black" stroke="black" points="8425.77,-5100.68 8435.82,-5104.05 8430.06,-5095.15 8425.77,-5100.68"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge300" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7583.24,-4760.66C7689.65,-4761.75 7823.67,-4754 7938,-4719.11 8043.34,-4686.97 8324.68,-4499.95 8423.55,-4432.97"/>
<polygon fill="black" stroke="black" points="8425.68,-4435.75 8431.99,-4427.24 8421.75,-4429.96 8425.68,-4435.75"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node172" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node172"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7595,-2893.11 7191,-2893.11 7191,-2847.11 7595,-2847.11 7595,-2893.11"/>
<text text-anchor="middle" x="7393" y="-2861.67" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge302" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7595.29,-2886.78C7713.59,-2884.61 7855.65,-2858.92 7938,-2762.11 8012.13,-2674.97 7895.98,-1816.79 7974,-1733.11 8075.52,-1624.24 8266.46,-1640.96 8375.88,-1662.05"/>
<polygon fill="black" stroke="black" points="8375.39,-1665.52 8385.88,-1664.03 8376.76,-1658.65 8375.39,-1665.52"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge303" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7595.32,-2854.01C7713.24,-2856.47 7854.89,-2882.27 7938,-2978.11 8035.39,-3090.43 7885.67,-3526.54 7974,-3646.11 8067.46,-3772.62 8260.52,-3809.33 8372.67,-3819.91"/>
<polygon fill="black" stroke="black" points="8372.66,-3823.42 8382.93,-3820.82 8373.28,-3816.45 8372.66,-3823.42"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge301" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7595.1,-2869.75C7698.51,-2866.22 7826.02,-2856.66 7938,-2833.11 7954.65,-2829.61 7957.77,-2825.21 7974,-2820.11 8112.57,-2776.59 8276.21,-2734.6 8373.45,-2710.62"/>
<polygon fill="black" stroke="black" points="8374.36,-2714 8383.23,-2708.21 8372.69,-2707.21 8374.36,-2714"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node173" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node173"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7601,-4175.11 7185,-4175.11 7185,-4139.11 7601,-4139.11 7601,-4175.11"/>
<text text-anchor="middle" x="7393" y="-4150.95" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node174" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node174"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8673,-3337.11 8246,-3337.11 8246,-3301.11 8673,-3301.11 8673,-3337.11"/>
<text text-anchor="middle" x="8459.5" y="-3312.95" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node175" class="node">
<title>clean_data.main</title>
<g id="a_node175"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6385,-4205.11 6193,-4205.11 6193,-4169.11 6385,-4169.11 6385,-4205.11"/>
<text text-anchor="middle" x="6289" y="-4181.81" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge304" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6385.39,-4192.48C6573.83,-4203.08 6995.72,-4226.82 7229.06,-4239.95"/>
<polygon fill="black" stroke="black" points="7229.15,-4243.46 7239.34,-4240.52 7229.55,-4236.47 7229.15,-4243.46"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge305" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6385.11,-4205.03C6505.56,-4233.09 6709.7,-4299.67 6812,-4442.11 6884.42,-4542.95 6757.02,-4634.64 6848,-4719.11 6897.11,-4764.71 7058.53,-4769.02 7192.88,-4763.78"/>
<polygon fill="black" stroke="black" points="7193.07,-4767.28 7202.92,-4763.37 7192.78,-4760.28 7193.07,-4767.28"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge306" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6385.22,-4189.38C6520.07,-4190.34 6756.51,-4182.98 6812,-4122.11 6897.68,-4028.13 6765.77,-3075.12 6848,-2978.11 6927.93,-2883.82 7064.51,-2856.94 7180.81,-2853.57"/>
<polygon fill="black" stroke="black" points="7181.01,-2857.07 7190.93,-2853.34 7180.85,-2850.07 7181.01,-2857.07"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge307" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6385.39,-4184.52C6559.94,-4179.77 6934.8,-4169.56 7174.56,-4163.03"/>
<polygon fill="black" stroke="black" points="7174.9,-4166.53 7184.81,-4162.75 7174.71,-4159.53 7174.9,-4166.53"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge308" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6385.09,-4189.26C6519.78,-4190.08 6756.02,-4182.53 6812,-4122.11 6869.01,-4060.59 6788.18,-3426.91 6848,-3368.11 6944.6,-3273.17 7816.83,-3293.84 8235.8,-3309.53"/>
<polygon fill="black" stroke="black" points="8235.79,-3313.03 8245.92,-3309.91 8236.06,-3306.04 8235.79,-3313.03"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node176" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node176"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8610,-3245.11 8309,-3245.11 8309,-3209.11 8610,-3209.11 8610,-3245.11"/>
<text text-anchor="middle" x="8459.5" y="-3223.07" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node177" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6525.5,-3540.61 6052.5,-3540.61 6052.5,-3487.61 6525.5,-3487.61 6525.5,-3540.61"/>
<text text-anchor="middle" x="6289" y="-3503.91" font-family="Times,serif" font-size="40.88">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge313" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6525.84,-3526.72C6625.26,-3531.83 6742.25,-3537.59 6848,-3542.11 7310.3,-3561.89 7847.47,-3579.91 8169.8,-3590.18"/>
<polygon fill="black" stroke="black" points="8170.12,-3593.69 8180.23,-3590.51 8170.34,-3586.7 8170.12,-3593.69"/>
</g>
<!-- pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge309" class="edge">
<title>pending_caption.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M6425.41,-3487.61C6548.09,-3455.92 6722.89,-3389.95 6812,-3260.11 6865.26,-3182.52 6780.93,-2904.15 6848,-2838.11 7021.02,-2667.76 7756.35,-2923.24 7938,-2762.11 8001.64,-2705.66 7922.62,-2641.92 7974,-2574.11 8070.32,-2446.99 8251.72,-2382.08 8363.16,-2352.75"/>
<polygon fill="black" stroke="black" points="8364.25,-2356.09 8373.05,-2350.2 8362.49,-2349.31 8364.25,-2356.09"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge311" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6430.75,-3487.61C6554.24,-3456.22 6726.99,-3390.72 6812,-3260.11 6872.53,-3167.12 6780.57,-2350.24 6848,-2262.11 7166.39,-1846.02 7465.48,-2039.23 7974,-1913.11 8094.27,-1883.29 8233.46,-1858.09 8331.71,-1841.83"/>
<polygon fill="black" stroke="black" points="8332.39,-1845.26 8341.69,-1840.18 8331.25,-1838.36 8332.39,-1845.26"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge312" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6341.72,-3540.65C6452.3,-3600.66 6709.91,-3758.66 6812,-3976.11 6838.95,-4033.52 6802.52,-5072.91 6848,-5117.11 6902.93,-5170.51 8044.37,-5136.14 8371.56,-5125.15"/>
<polygon fill="black" stroke="black" points="8372.05,-5128.63 8381.92,-5124.8 8371.81,-5121.64 8372.05,-5128.63"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge310" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6327.42,-3540.71C6418.45,-3606.69 6655.48,-3786.36 6812,-3976.11 6832.03,-4000.4 6821.65,-4019.88 6848,-4037.11 6973.43,-4119.15 7150.49,-4125.21 7268.14,-4117.74"/>
<polygon fill="black" stroke="black" points="7268.53,-4121.22 7278.27,-4117.05 7268.06,-4114.24 7268.53,-4121.22"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge314" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6341.32,-3487.53C6437.6,-3439.17 6653.21,-3338.06 6848,-3297.11 7369.72,-3187.46 8006.73,-3202.24 8298.59,-3216.98"/>
<polygon fill="black" stroke="black" points="8298.66,-3220.49 8308.82,-3217.5 8299.01,-3213.5 8298.66,-3220.49"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node178" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node178"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="8868.5,-1515.61 8050.5,-1515.61 8050.5,-1458.61 8868.5,-1458.61 8868.5,-1515.61"/>
<text text-anchor="middle" x="8459.5" y="-1475.77" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge315" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8635.79,-1458.61C8739.65,-1452.33 8865.99,-1465.02 8945,-1544.11 8993.86,-1593.02 8966.78,-1785.46 8981,-1853.11 9069.89,-2276 9252.81,-2771.58 9298.82,-2893.16"/>
<polygon fill="black" stroke="black" points="9295.67,-2894.72 9302.49,-2902.82 9302.21,-2892.23 9295.67,-2894.72"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge316" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8555.42,-1458.49C8727.75,-1406.53 9088.24,-1297.83 9239.9,-1252.1"/>
<polygon fill="black" stroke="black" points="9241.02,-1255.42 9249.58,-1249.18 9239,-1248.72 9241.02,-1255.42"/>
</g>
<!-- pending_embed.main -->
<g id="node179" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="5721,-1667.11 5188,-1667.11 5188,-1607.11 5721,-1607.11 5721,-1667.11"/>
<text text-anchor="middle" x="5454.5" y="-1625.15" font-family="Times,serif" font-size="47.46">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge323" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5471.59,-1667.28C5521.6,-1762.87 5674.32,-2068.93 5730,-2343.11 5743.34,-2408.8 5718.49,-3501.83 5766,-3549.11 5933.22,-3715.52 7510.43,-3650.61 8170.36,-3615.69"/>
<polygon fill="black" stroke="black" points="8170.69,-3619.18 8180.49,-3615.16 8170.32,-3612.19 8170.69,-3619.18"/>
</g>
<!-- pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge317" class="edge">
<title>pending_embed.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M5461.91,-1667.17C5484.11,-1762.8 5567.43,-2060.81 5766,-2181.11 5869.28,-2243.68 7827.98,-2212.34 7938,-2262.11 7959.2,-2271.7 7952.94,-2290.22 7974,-2300.11 8071.64,-2345.98 8192.73,-2353.99 8289.43,-2350.53"/>
<polygon fill="black" stroke="black" points="8289.75,-2354.02 8299.6,-2350.12 8289.47,-2347.02 8289.75,-2354.02"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge320" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M5719.69,-1607.05C5723.25,-1604.25 5726.69,-1601.27 5730,-1598.11 5791.87,-1539.09 5700.12,-1463.63 5766,-1409.11 5805.21,-1376.66 7906.35,-1387.91 7938,-1414.11 8002.52,-1467.53 7914.11,-1540.55 7974,-1599.11 8070.67,-1693.63 8233.25,-1702.95 8343.14,-1696.32"/>
<polygon fill="black" stroke="black" points="8343.52,-1699.81 8353.27,-1695.66 8343.06,-1692.82 8343.52,-1699.81"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge322" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M5721.38,-1647.64C6090.29,-1660.04 6722.43,-1672.43 6812,-1616.11 6842.29,-1597.07 6817.57,-1562.92 6848,-1544.11 6951.02,-1480.44 7816.93,-1540.86 7938,-1544.11 8067.92,-1547.61 8215.88,-1555.99 8320.76,-1562.68"/>
<polygon fill="black" stroke="black" points="8320.57,-1566.18 8330.77,-1563.32 8321.01,-1559.19 8320.57,-1566.18"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge318" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M5720.24,-1607.1C5723.61,-1604.28 5726.87,-1601.28 5730,-1598.11 5818.42,-1508.47 5675.05,-1404.19 5766,-1317.11 5940.47,-1150.07 7726.46,-1109.52 7938,-1226.11 7964.24,-1240.58 7949.08,-1266.48 7974,-1283.11 8338.19,-1526.12 8557.29,-1245.73 8945,-1449.11 9107.19,-1534.19 9240.64,-1717.7 9289.51,-1790.97"/>
<polygon fill="black" stroke="black" points="9286.61,-1792.93 9295.04,-1799.34 9292.45,-1789.07 9286.61,-1792.93"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge319" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M5720.71,-1607.06C5723.93,-1604.24 5727.03,-1601.27 5730,-1598.11 5796.55,-1527.55 5697.1,-1231.39 5766,-1163.11 5931.56,-999.06 6627.85,-1228.99 6812,-1086.11 6851.64,-1055.36 6807.25,-1008.39 6848,-979.11 7241.4,-696.4 7453.59,-973.1 7938,-979.11 8161.83,-981.89 8750.75,-892.88 8945,-1004.11 8971.33,-1019.19 8956.46,-1044.28 8981,-1062.11 9022.54,-1092.31 9074.01,-1111.32 9123.8,-1123.28"/>
<polygon fill="black" stroke="black" points="9123.2,-1126.73 9133.73,-1125.57 9124.77,-1119.91 9123.2,-1126.73"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge321" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M5683.21,-1607.09C5699.08,-1604.28 5714.8,-1601.29 5730,-1598.11 5746.25,-1594.72 5749.62,-1590.86 5766,-1588.11 5904.36,-1564.92 6065.87,-1558.07 6172.17,-1556.28"/>
<polygon fill="black" stroke="black" points="6172.34,-1559.78 6182.28,-1556.12 6172.23,-1552.78 6172.34,-1559.78"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge324" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M5471.63,-1667.27C5521.75,-1762.84 5674.75,-2068.84 5730,-2343.11 5744.77,-2416.45 5712.92,-3636.41 5766,-3689.11 5817.66,-3740.41 6841.85,-3729.82 7237.69,-3723.77"/>
<polygon fill="black" stroke="black" points="7237.84,-3727.26 7247.79,-3723.61 7237.74,-3720.27 7237.84,-3727.26"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge325" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M5721.39,-1618.5C5736.48,-1617.64 5751.43,-1616.84 5766,-1616.11 5824.07,-1613.24 6763.03,-1614.46 6812,-1583.11 6842.13,-1563.83 6817.71,-1530.15 6848,-1511.11 6897.87,-1479.78 7579.86,-1479.29 8040.21,-1482.63"/>
<polygon fill="black" stroke="black" points="8040.34,-1486.13 8050.36,-1482.7 8040.39,-1479.13 8040.34,-1486.13"/>
</g>
<!-- check_translations.parse_po -->
<g id="node180" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="9602.5,-873.11 9018.5,-873.11 9018.5,-821.11 9602.5,-821.11 9602.5,-873.11"/>
<text text-anchor="middle" x="9310.5" y="-837.42" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node181" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="8792,-864.61 8127,-864.61 8127,-819.61 8792,-819.61 8792,-864.61"/>
<text text-anchor="middle" x="8459.5" y="-833.73" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge326" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M8792.09,-844.07C8863.25,-844.49 8938.08,-844.93 9008.03,-845.34"/>
<polygon fill="black" stroke="black" points="9008.3,-848.84 9018.32,-845.4 9008.34,-841.84 9008.3,-848.84"/>
</g>
<!-- pending_chop.main -->
<g id="node182" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7560.5,-2314.61 7225.5,-2314.61 7225.5,-2271.61 7560.5,-2271.61 7560.5,-2314.61"/>
<text text-anchor="middle" x="7393" y="-2284.97" font-family="Times,serif" font-size="32.06">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge329" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7560.79,-2276.08C7684.75,-2273.58 7847.47,-2293.73 7938,-2400.11 8015.17,-2490.79 7899.78,-3378.01 7974,-3471.11 8022.21,-3531.58 8095.34,-3565.49 8170.29,-3583.99"/>
<polygon fill="black" stroke="black" points="8169.86,-3587.49 8180.39,-3586.39 8171.47,-3580.67 8169.86,-3587.49"/>
</g>
<!-- pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge327" class="edge">
<title>pending_chop.main&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7560.62,-2299.22C7757.64,-2306.44 8084,-2318.39 8284.28,-2325.73"/>
<polygon fill="black" stroke="black" points="8284.19,-2329.23 8294.31,-2326.1 8284.45,-2322.23 8284.19,-2329.23"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge328" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7490.09,-2271.57C7611.61,-2239.41 7819.28,-2167.25 7938,-2029.11 7973.18,-1988.17 7933.69,-1949.02 7974,-1913.11 8057.1,-1839.08 8180.8,-1816.78 8282.41,-1812.76"/>
<polygon fill="black" stroke="black" points="8282.6,-1816.25 8292.48,-1812.41 8282.37,-1809.26 8282.6,-1816.25"/>
</g>
<!-- tg_client:cli -->
<g id="node184" class="node">
<title>tg_client:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5790.11" rx="32.86" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5788.51" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;tg_client:cli -->
<!-- cluster_items:cli -->
<g id="node185" class="node">
<title>cluster_items:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-5790.11" rx="42.34" ry="18"/>
<text text-anchor="middle" x="2558.5" y="-5788.51" font-family="Times,serif" font-size="7.00">cluster_items:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;cluster_items:cli -->
<!-- embed:cli -->
<g id="node186" class="node">
<title>embed:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-5790.11" rx="29.05" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-5788.51" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- cluster_items:cli&#45;&gt;embed:cli -->
<!-- chop:cli -->
<g id="node187" class="node">
<title>chop:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-5790.11" rx="27" ry="18"/>
<text text-anchor="middle" x="4010" y="-5788.51" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;chop:cli -->
<!-- scan_ontology:cli -->
<g id="node188" class="node">
<title>scan_ontology:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5845.11" rx="44.19" ry="18"/>
<text text-anchor="middle" x="141" y="-5843.51" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- moderation:cli -->
<g id="node189" class="node">
<title>moderation:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5845.11" rx="38.53" ry="18"/>
<text text-anchor="middle" x="602" y="-5843.51" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;moderation:cli -->
<!-- similar:cli -->
<g id="node190" class="node">
<title>similar:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5845.11" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5843.51" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;similar:cli -->
<!-- debug_dump:cli -->
<g id="node191" class="node">
<title>debug_dump:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5845.11" rx="41.11" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5843.51" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;debug_dump:cli -->
<!-- telegram_bot:cli -->
<g id="node192" class="node">
<title>telegram_bot:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2558.5" cy="-5845.11" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="2558.5" y="-5840.95" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;telegram_bot:cli -->
<!-- caption:cli -->
<g id="node193" class="node">
<title>caption:cli</title>
<g id="a_node193"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3163.5" cy="-5845.11" rx="30.28" ry="18"/>
<text text-anchor="middle" x="3163.5" y="-5843.51" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;caption:cli -->
<!-- clean_data:cli -->
<g id="node194" class="node">
<title>clean_data:cli</title>
<g id="a_node194"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4010" cy="-5845.11" rx="37.29" ry="18"/>
<text text-anchor="middle" x="4010" y="-5843.51" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;clean_data:cli -->
<!-- pending_caption:cli -->
<g id="node195" class="node">
<title>pending_caption:cli</title>
<g id="a_node195"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5899.11" rx="48.62" ry="18"/>
<text text-anchor="middle" x="141" y="-5897.51" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli -->
<g id="node196" class="node">
<title>pending_embed:cli</title>
<g id="a_node196"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="602" cy="-5899.11" rx="47.39" ry="18"/>
<text text-anchor="middle" x="602" y="-5897.51" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;pending_embed:cli -->
<!-- check_translations:cli -->
<g id="node197" class="node">
<title>check_translations:cli</title>
<g id="a_node197"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1278.5" cy="-5899.11" rx="73.67" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-5896.66" font-family="Times,serif" font-size="9.94">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli&#45;&gt;check_translations:cli -->
<!-- pending_chop:cli -->
<g id="node198" class="node">
<title>pending_chop:cli</title>
<g id="a_node198"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1913.5" cy="-5899.11" rx="42.96" ry="18"/>
<text text-anchor="middle" x="1913.5" y="-5897.51" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- build_site -->
<g id="node199" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-608.11" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-604.41" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge344" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4954.65,-608.11C5020.07,-608.11 5133.14,-608.11 5235.11,-608.11"/>
<polygon fill="black" stroke="black" points="5235.25,-611.61 5245.25,-608.11 5235.25,-604.61 5235.25,-611.61"/>
</g>
<!-- caption -->
<g id="node200" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5454.5" cy="-5523.11" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5454.5" y="-5519.41" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge345" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5499.38,-5523.54C5627.49,-5524.77 6003.48,-5528.38 6186.11,-5530.13"/>
<polygon fill="black" stroke="black" points="6186.22,-5533.64 6196.26,-5530.23 6186.29,-5526.64 6186.22,-5533.64"/>
</g>
<!-- check_translations -->
<g id="node201" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="7393" cy="-1253.11" rx="96.68" ry="18"/>
<text text-anchor="middle" x="7393" y="-1249.41" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;oom_utils.prefer_oom_kill -->
<g id="edge346" class="edge">
<title>check_translations:cli&#45;&gt;oom_utils.prefer_oom_kill</title>
<path fill="none" stroke="black" d="M7488.81,-1250.32C7628.46,-1248.44 7879.28,-1254.36 7938,-1318.11 8011.96,-1398.43 7897.93,-2221.79 7974,-2300.11 8081.53,-2410.84 8283.08,-2379.55 8389.16,-2352.75"/>
<polygon fill="black" stroke="black" points="8390.31,-2356.06 8399.12,-2350.17 8388.56,-2349.29 8390.31,-2356.06"/>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge347" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M7487.01,-1257.58C7609.63,-1257.96 7823.2,-1238.59 7938,-1111.11 8009.3,-1031.94 7895.54,-946.19 7974,-874.11 7998.2,-851.89 8052.58,-840.23 8116.53,-834.76"/>
<polygon fill="black" stroke="black" points="8117.18,-838.22 8126.87,-833.94 8116.63,-831.25 8117.18,-838.22"/>
</g>
<!-- chop -->
<g id="node202" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-1443.11" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-1439.41" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge348" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4931.28,-1443.11C5014.91,-1443.11 5243.32,-1443.11 5368.56,-1443.11"/>
<polygon fill="black" stroke="black" points="5368.88,-1446.61 5378.88,-1443.11 5368.88,-1439.61 5368.88,-1446.61"/>
</g>
<!-- clean_data -->
<g id="node203" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5454.5" cy="-4201.11" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5454.5" y="-4197.41" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge349" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5514.37,-4200.12C5653.77,-4197.78 6005.57,-4191.86 6182.69,-4188.88"/>
<polygon fill="black" stroke="black" points="6182.86,-4192.38 6192.8,-4188.71 6182.74,-4185.38 6182.86,-4192.38"/>
</g>
<!-- cluster_items -->
<g id="node204" class="node">
<title>cluster_items</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-2521.11" rx="73.39" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-2517.41" font-family="Times,serif" font-size="14.00">cluster_items</text>
</g>
<!-- cluster_items&#45;&gt;cluster_items.main -->
<g id="edge350" class="edge">
<title>cluster_items:cli&#45;&gt;cluster_items.main</title>
<path fill="none" stroke="black" d="M4972.21,-2521.11C5064.44,-2521.11 5224.72,-2521.11 5334.79,-2521.11"/>
<polygon fill="black" stroke="black" points="5334.95,-2524.61 5344.95,-2521.11 5334.95,-2517.61 5334.95,-2524.61"/>
</g>
<!-- debug_dump -->
<g id="node205" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5454.5" cy="-4483.11" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5454.5" y="-4479.41" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge351" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5525.05,-4483.11C5636.79,-4483.11 5861.7,-4483.11 6038.51,-4483.11"/>
<polygon fill="black" stroke="black" points="6038.75,-4486.61 6048.75,-4483.11 6038.75,-4479.61 6038.75,-4486.61"/>
</g>
<!-- embed -->
<g id="node206" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5454.5" cy="-1005.11" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5454.5" y="-1001.41" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge352" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5496.78,-1005.11C5623.41,-1005.11 6008.73,-1005.11 6190.77,-1005.11"/>
<polygon fill="black" stroke="black" points="6190.88,-1008.61 6200.88,-1005.11 6190.88,-1001.61 6190.88,-1008.61"/>
</g>
<!-- moderation -->
<g id="node207" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6289" cy="-1887.11" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6289" y="-1883.41" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge353" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6352.81,-1887.11C6498.31,-1887.11 6865.64,-1887.11 7122.06,-1887.11"/>
<polygon fill="black" stroke="black" points="7122.28,-1890.61 7132.28,-1887.11 7122.28,-1883.61 7122.28,-1890.61"/>
</g>
<!-- pending_caption -->
<g id="node208" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5454.5" cy="-3514.11" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5454.5" y="-3510.41" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge354" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5541.85,-3514.11C5659.09,-3514.11 5873.41,-3514.11 6042.37,-3514.11"/>
<polygon fill="black" stroke="black" points="6042.41,-3517.61 6052.41,-3514.11 6042.41,-3510.61 6042.41,-3517.61"/>
</g>
<!-- pending_chop -->
<g id="node209" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6289" cy="-2259.11" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6289" y="-2255.41" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge355" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6363.16,-2261.37C6535.21,-2266.68 6969.48,-2280.08 7215.29,-2287.66"/>
<polygon fill="black" stroke="black" points="7215.3,-2291.16 7225.4,-2287.97 7215.51,-2284.17 7215.3,-2291.16"/>
</g>
<!-- pending_embed -->
<g id="node210" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-1637.11" rx="83.69" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-1633.41" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge356" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M4982.44,-1637.11C5035.05,-1637.11 5106.44,-1637.11 5177.71,-1637.11"/>
<polygon fill="black" stroke="black" points="5177.77,-1640.61 5187.77,-1637.11 5177.77,-1633.61 5177.77,-1640.61"/>
</g>
<!-- price_train -->
<g id="node211" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5454.5" cy="-1344.11" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5454.5" y="-1340.41" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge357" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5515.71,-1344.11C5651.15,-1344.11 5982.17,-1344.11 6163.76,-1344.11"/>
<polygon fill="black" stroke="black" points="6163.9,-1347.61 6173.9,-1344.11 6163.9,-1340.61 6163.9,-1347.61"/>
</g>
<!-- scan_ontology -->
<g id="node212" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4898.5" cy="-2381.11" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4898.5" y="-2377.41" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge358" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4974.79,-2381.11C5036.76,-2381.11 5128.14,-2381.11 5214.5,-2381.11"/>
<polygon fill="black" stroke="black" points="5214.73,-2384.61 5224.73,-2381.11 5214.73,-2377.61 5214.73,-2384.61"/>
</g>
<!-- similar -->
<g id="node213" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5454.5" cy="-3008.11" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5454.5" y="-3004.41" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge359" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5497.64,-3008.11C5621.3,-3008.11 5986.23,-3008.11 6173.82,-3008.11"/>
<polygon fill="black" stroke="black" points="6173.99,-3011.61 6183.99,-3008.11 6173.99,-3004.61 6173.99,-3011.61"/>
</g>
<!-- telegram_bot -->
<g id="node214" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4010" cy="-4082.11" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4010" y="-4078.41" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge360" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4024.82,-4099.87C4099.11,-4196.31 4453.7,-4669.11 4618,-5115.11 4649.83,-5201.51 4591.89,-5251.15 4654,-5319.11 4672.81,-5339.7 4697.34,-5354.13 4723.56,-5364.19"/>
<polygon fill="black" stroke="black" points="4722.7,-5367.6 4733.29,-5367.71 4725.07,-5361.02 4722.7,-5367.6"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge361" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4078.72,-4076.38C4214.88,-4064.86 4525.58,-4038.58 4722.68,-4021.9"/>
<polygon fill="black" stroke="black" points="4723.19,-4025.37 4732.86,-4021.04 4722.6,-4018.4 4723.19,-4025.37"/>
</g>
<!-- tg_client -->
<g id="node215" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-5119.11" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-5115.41" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge362" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M191.99,-5119.11C222.07,-5119.11 263.09,-5119.11 307.59,-5119.11"/>
<polygon fill="black" stroke="black" points="307.75,-5122.61 317.75,-5119.11 307.75,-5115.61 307.75,-5122.61"/>
</g>
</g>
</svg>
