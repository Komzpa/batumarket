<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="4452pt" height="5092pt"
 viewBox="0.00 0.00 4451.53 5092.35" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5088.35)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5088.35 4447.53,-5088.35 4447.53,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_cli</title>
<polygon fill="none" stroke="black" points="342.11,-46.04 342.11,-229.04 2008.02,-229.04 2008.02,-46.04 342.11,-46.04"/>
<text text-anchor="middle" x="1175.07" y="-213.84" font-family="Times,serif" font-size="14.00">CLI entrypoints</text>
</g>
<!-- caption:cli -->
<g id="node1" class="node">
<title>caption:cli</title>
<g id="a_node1"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="438.5" cy="-180.04" rx="58.49" ry="18"/>
<text text-anchor="middle" x="438.5" y="-176.34" font-family="Times,serif" font-size="14.00">caption:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli -->
<g id="node2" class="node">
<title>tg_client:cli</title>
<g id="a_node2"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="727" cy="-180.04" rx="64.19" ry="18"/>
<text text-anchor="middle" x="727" y="-176.34" font-family="Times,serif" font-size="14.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;tg_client:cli -->
<!-- clean_data:cli -->
<g id="node3" class="node">
<title>clean_data:cli</title>
<g id="a_node3"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="955.84" cy="-180.04" rx="73.39" ry="18"/>
<text text-anchor="middle" x="955.84" y="-176.34" font-family="Times,serif" font-size="14.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;clean_data:cli -->
<!-- moderation:cli -->
<g id="node4" class="node">
<title>moderation:cli</title>
<g id="a_node4"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1165.38" cy="-180.04" rx="77.19" ry="18"/>
<text text-anchor="middle" x="1165.38" y="-176.34" font-family="Times,serif" font-size="14.00">moderation:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;moderation:cli -->
<!-- telegram_bot:cli -->
<g id="node5" class="node">
<title>telegram_bot:cli</title>
<g id="a_node5"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1391.81" cy="-180.04" rx="85.59" ry="18"/>
<text text-anchor="middle" x="1391.81" y="-176.34" font-family="Times,serif" font-size="14.00">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;telegram_bot:cli -->
<!-- chop:cli -->
<g id="node6" class="node">
<title>chop:cli</title>
<g id="a_node6"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1639.04" cy="-180.04" rx="46.29" ry="18"/>
<text text-anchor="middle" x="1639.04" y="-176.34" font-family="Times,serif" font-size="14.00">chop:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;chop:cli -->
<!-- build_site:cli -->
<g id="node7" class="node">
<title>build_site:cli</title>
<g id="a_node7"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="438.5" cy="-126.04" rx="69.59" ry="18"/>
<text text-anchor="middle" x="438.5" y="-122.34" font-family="Times,serif" font-size="14.00">build_site:cli</text>
</a>
</g>
</g>
<!-- embed:cli -->
<g id="node8" class="node">
<title>embed:cli</title>
<g id="a_node8"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="727" cy="-126.04" rx="55.79" ry="18"/>
<text text-anchor="middle" x="727" y="-122.34" font-family="Times,serif" font-size="14.00">embed:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;embed:cli -->
<!-- debug_dump:cli -->
<g id="node9" class="node">
<title>debug_dump:cli</title>
<g id="a_node9"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="955.84" cy="-126.04" rx="83.69" ry="18"/>
<text text-anchor="middle" x="955.84" y="-122.34" font-family="Times,serif" font-size="14.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;debug_dump:cli -->
<!-- scan_ontology:cli -->
<g id="node10" class="node">
<title>scan_ontology:cli</title>
<g id="a_node10"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1165.38" cy="-126.04" rx="89.88" ry="18"/>
<text text-anchor="middle" x="1165.38" y="-122.34" font-family="Times,serif" font-size="14.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;scan_ontology:cli -->
<!-- pending_caption:cli -->
<g id="node11" class="node">
<title>pending_caption:cli</title>
<g id="a_node11"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1391.81" cy="-126.04" rx="100.98" ry="18"/>
<text text-anchor="middle" x="1391.81" y="-122.34" font-family="Times,serif" font-size="14.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;pending_caption:cli -->
<!-- check_translations:cli -->
<g id="node12" class="node">
<title>check_translations:cli</title>
<g id="a_node12"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1639.04" cy="-126.04" rx="110.48" ry="18"/>
<text text-anchor="middle" x="1639.04" y="-122.34" font-family="Times,serif" font-size="14.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;check_translations:cli -->
<!-- pending_embed:cli -->
<g id="node13" class="node">
<title>pending_embed:cli</title>
<g id="a_node13"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1902.53" cy="-126.04" rx="97.48" ry="18"/>
<text text-anchor="middle" x="1902.53" y="-122.34" font-family="Times,serif" font-size="14.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_embed:cli -->
<!-- pending_chop:cli -->
<g id="node14" class="node">
<title>pending_chop:cli</title>
<g id="a_node14"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="438.5" cy="-72.04" rx="88.28" ry="18"/>
<text text-anchor="middle" x="438.5" y="-68.34" font-family="Times,serif" font-size="14.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- caption._identify_size -->
<g id="node15" class="node">
<title>caption._identify_size</title>
<g id="a_node15"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="3912.53,-3828.04 3742.53,-3828.04 3742.53,-3792.04 3912.53,-3792.04 3912.53,-3828.04"/>
<text text-anchor="middle" x="3827.53" y="-3806.34" font-family="Times,serif" font-size="14.00">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node16" class="node">
<title>caption._prepare_image</title>
<g id="a_node16"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="3612.53,-3828.04 3425.53,-3828.04 3425.53,-3792.04 3612.53,-3792.04 3612.53,-3828.04"/>
<text text-anchor="middle" x="3519.03" y="-3806.34" font-family="Times,serif" font-size="14.00">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge1" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M3612.82,-3810.04C3650.67,-3810.04 3694.38,-3810.04 3732.36,-3810.04"/>
<polygon fill="black" stroke="black" points="3732.4,-3813.54 3742.4,-3810.04 3732.4,-3806.54 3732.4,-3813.54"/>
</g>
<!-- caption._guess_chat -->
<g id="node17" class="node">
<title>caption._guess_chat</title>
<g id="a_node17"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="3907.03,-3774.04 3748.03,-3774.04 3748.03,-3738.04 3907.03,-3738.04 3907.03,-3774.04"/>
<text text-anchor="middle" x="3827.53" y="-3752.34" font-family="Times,serif" font-size="14.00">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node18" class="node">
<title>caption.caption_file</title>
<g id="a_node18"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="3289.03,-3422.04 3134.03,-3422.04 3134.03,-3386.04 3289.03,-3386.04 3289.03,-3422.04"/>
<text text-anchor="middle" x="3211.53" y="-3400.34" font-family="Times,serif" font-size="14.00">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge2" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M3215.22,-3422.24C3225.18,-3483.01 3265.78,-3680.52 3384.53,-3778.04 3393.74,-3785.6 3404.45,-3791.43 3415.71,-3795.91"/>
<polygon fill="black" stroke="black" points="3414.69,-3799.26 3425.28,-3799.37 3417.07,-3792.68 3414.69,-3799.26"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge3" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M3215.35,-3422.12C3225.52,-3480.53 3266.23,-3664.72 3384.53,-3740.04 3440.98,-3775.98 3625.48,-3770.39 3737.48,-3763.17"/>
<polygon fill="black" stroke="black" points="3738,-3766.64 3747.75,-3762.49 3737.54,-3759.66 3738,-3766.64"/>
</g>
<!-- notes_utils.load_json -->
<g id="node19" class="node">
<title>notes_utils.load_json</title>
<g id="a_node19"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="4195.53,-2940.04 4031.53,-2940.04 4031.53,-2904.04 4195.53,-2904.04 4195.53,-2940.04"/>
<text text-anchor="middle" x="4113.53" y="-2918.34" font-family="Times,serif" font-size="14.00">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge4" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3216.21,-3422.09C3228.48,-3477.06 3273.71,-3642.51 3384.53,-3707.04 3440.52,-3739.63 3920.29,-3704.41 3965.53,-3658.04 4008.26,-3614.24 3990.38,-3445.2 4001.53,-3385.04 4032.39,-3218.48 4084.97,-3021.9 4104.72,-2950.09"/>
<polygon fill="black" stroke="black" points="4108.11,-2950.98 4107.39,-2940.41 4101.36,-2949.12 4108.11,-2950.98"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node20" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node20"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="4224.03,-2064.04 4003.03,-2064.04 4003.03,-2028.04 4224.03,-2028.04 4224.03,-2064.04"/>
<text text-anchor="middle" x="4113.53" y="-2042.34" font-family="Times,serif" font-size="14.00">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge5" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3238.78,-3385.88C3271.01,-3361.93 3324.36,-3316.49 3348.53,-3263.04 3388.77,-3174.05 3317.39,-2895.96 3384.53,-2825.04 3406.93,-2801.37 3942.93,-2768.5 3965.53,-2745.04 4021.46,-2686.97 3984.86,-2462.91 4001.53,-2384.04 4026.54,-2265.75 4078.2,-2130.74 4101.14,-2073.74"/>
<polygon fill="black" stroke="black" points="4104.43,-2074.92 4104.94,-2064.33 4097.95,-2072.29 4104.43,-2074.92"/>
</g>
<!-- caption_io.has_caption -->
<g id="node21" class="node">
<title>caption_io.has_caption</title>
<g id="a_node21"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="3916.03,-1358.04 3739.03,-1358.04 3739.03,-1322.04 3916.03,-1322.04 3916.03,-1358.04"/>
<text text-anchor="middle" x="3827.53" y="-1336.34" font-family="Times,serif" font-size="14.00">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge6" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3239.53,-3385.88C3272.27,-3362.08 3325.87,-3316.97 3348.53,-3263.04 3403.72,-3131.66 3297.54,-2093.91 3384.53,-1981.04 3460.59,-1882.34 3571.26,-1995.62 3653.53,-1902.04 3720.98,-1825.32 3662.02,-1773.41 3689.53,-1675.04 3722.58,-1556.87 3784.93,-1424.06 3812.64,-1367.7"/>
<polygon fill="black" stroke="black" points="3815.95,-1368.91 3817.25,-1358.39 3809.67,-1365.8 3815.95,-1368.91"/>
</g>
<!-- caption_io.write_caption -->
<g id="node22" class="node">
<title>caption_io.write_caption</title>
<g id="a_node22"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="3614.03,-3400.04 3424.03,-3400.04 3424.03,-3364.04 3614.03,-3364.04 3614.03,-3400.04"/>
<text text-anchor="middle" x="3519.03" y="-3378.34" font-family="Times,serif" font-size="14.00">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge7" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M3289.23,-3398.51C3326.95,-3395.8 3372.97,-3392.48 3413.83,-3389.54"/>
<polygon fill="black" stroke="black" points="3414.1,-3393.03 3423.82,-3388.82 3413.59,-3386.05 3414.1,-3393.03"/>
</g>
<!-- notes_utils.read_text -->
<g id="node46" class="node">
<title>notes_utils.read_text</title>
<g id="a_node46"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="4435.53,-2752.04 4269.53,-2752.04 4269.53,-2716.04 4435.53,-2716.04 4435.53,-2752.04"/>
<text text-anchor="middle" x="4352.53" y="-2730.34" font-family="Times,serif" font-size="14.00">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge140" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4137.26,-2904.01C4179.97,-2870.13 4272.27,-2796.91 4320.6,-2758.57"/>
<polygon fill="black" stroke="black" points="4322.87,-2761.24 4328.53,-2752.28 4318.52,-2755.76 4322.87,-2761.24"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge214" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3916.19,-1343.58C3935,-1348.53 3952.97,-1357.23 3965.53,-1372.04 4044.61,-1465.28 3954.39,-1808.23 4001.53,-1921.04 4018.57,-1961.81 4054.6,-1998.3 4081.01,-2021.17"/>
<polygon fill="black" stroke="black" points="4078.97,-2024.04 4088.86,-2027.83 4083.5,-2018.69 4078.97,-2024.04"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node59" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node59"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="4220.53,-1358.04 4006.53,-1358.04 4006.53,-1322.04 4220.53,-1322.04 4220.53,-1358.04"/>
<text text-anchor="middle" x="4113.53" y="-1336.34" font-family="Times,serif" font-size="14.00">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge215" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3916.06,-1340.04C3941.35,-1340.04 3969.36,-1340.04 3996.11,-1340.04"/>
<polygon fill="black" stroke="black" points="3996.3,-1343.54 4006.3,-1340.04 3996.3,-1336.54 3996.3,-1343.54"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge221" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3614.13,-3380.74C3736.64,-3378.22 3938.4,-3370.92 3965.53,-3350.04 4095.47,-3250.05 4111.25,-3028.67 4112.64,-2950.25"/>
<polygon fill="black" stroke="black" points="4116.14,-2950.2 4112.75,-2940.16 4109.14,-2950.12 4116.14,-2950.2"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge224" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3609.56,-3363.96C3635.32,-3359.08 3663.49,-3354.05 3689.53,-3350.04 3750.58,-3340.63 3923.65,-3362.44 3965.53,-3317.04 4000.71,-3278.91 3992.35,-2435.09 4001.53,-2384.04 4022.93,-2265.04 4076.5,-2130.41 4100.54,-2073.62"/>
<polygon fill="black" stroke="black" points="4103.83,-2074.82 4104.53,-2064.25 4097.39,-2072.08 4103.83,-2074.82"/>
</g>
<!-- notes_utils.write_json -->
<g id="node63" class="node">
<title>notes_utils.write_json</title>
<g id="a_node63"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="3913.53,-3200.04 3741.53,-3200.04 3741.53,-3164.04 3913.53,-3164.04 3913.53,-3200.04"/>
<text text-anchor="middle" x="3827.53" y="-3178.34" font-family="Times,serif" font-size="14.00">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge222" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3581.51,-3363.95C3606.82,-3353.77 3634.59,-3338.65 3653.53,-3317.04 3686.88,-3278.99 3651.55,-3242.47 3689.53,-3209.04 3701.32,-3198.66 3715.92,-3191.8 3731.16,-3187.35"/>
<polygon fill="black" stroke="black" points="3732.42,-3190.64 3741.23,-3184.76 3730.68,-3183.86 3732.42,-3190.64"/>
</g>
<!-- caption_io._get_langs -->
<g id="node156" class="node">
<title>caption_io._get_langs</title>
<g id="a_node156"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="4197.53,-3430.04 4029.53,-3430.04 4029.53,-3394.04 4197.53,-3394.04 4197.53,-3430.04"/>
<text text-anchor="middle" x="4113.53" y="-3408.34" font-family="Times,serif" font-size="14.00">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge223" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3614.24,-3386.81C3725.22,-3392.43 3908.45,-3401.7 4019.09,-3407.31"/>
<polygon fill="black" stroke="black" points="4019.07,-3410.81 4029.23,-3407.82 4019.42,-3403.82 4019.07,-3410.81"/>
</g>
<!-- caption.main -->
<g id="node23" class="node">
<title>caption.main</title>
<g id="a_node23"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="1010.34,-3101.04 901.34,-3101.04 901.34,-3065.04 1010.34,-3065.04 1010.34,-3101.04"/>
<text text-anchor="middle" x="955.84" y="-3079.34" font-family="Times,serif" font-size="14.00">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge8" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M1010.44,-3088.45C1200.58,-3107.17 1860.7,-3168.04 2407.03,-3168.04 2407.03,-3168.04 2407.03,-3168.04 2652.03,-3168.04 2867.85,-3168.04 3096.21,-3319.41 3178.59,-3379.7"/>
<polygon fill="black" stroke="black" points="3176.89,-3382.78 3187.01,-3385.91 3181.04,-3377.15 3176.89,-3382.78"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node24" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node24"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="2744.03,-673.04 2558.03,-673.04 2558.03,-637.04 2744.03,-637.04 2744.03,-673.04"/>
<text text-anchor="middle" x="2651.03" y="-651.34" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node25" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node25"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1471.31,-768.04 1312.31,-768.04 1312.31,-732.04 1471.31,-732.04 1471.31,-768.04"/>
<text text-anchor="middle" x="1391.81" y="-746.34" font-family="Times,serif" font-size="14.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node26" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node26"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="2753.53,-1301.04 2548.53,-1301.04 2548.53,-1265.04 2753.53,-1265.04 2753.53,-1301.04"/>
<text text-anchor="middle" x="2651.03" y="-1279.34" font-family="Times,serif" font-size="14.00">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node27" class="node">
<title>tg_client._write_md</title>
<g id="a_node27"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="2996.53,-1010.04 2840.53,-1010.04 2840.53,-974.04 2996.53,-974.04 2996.53,-1010.04"/>
<text text-anchor="middle" x="2918.53" y="-988.34" font-family="Times,serif" font-size="14.00">tg_client._write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node28" class="node">
<title>post_io.write_post</title>
<g id="a_node28"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="3284.53,-1018.04 3138.53,-1018.04 3138.53,-982.04 3284.53,-982.04 3284.53,-1018.04"/>
<text text-anchor="middle" x="3211.53" y="-996.34" font-family="Times,serif" font-size="14.00">post_io.write_post</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge9" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M2996.75,-994.16C3037.35,-995.28 3087.12,-996.64 3128.42,-997.78"/>
<polygon fill="black" stroke="black" points="3128.37,-1001.28 3138.46,-998.06 3128.56,-994.28 3128.37,-1001.28"/>
</g>
<!-- post_io.get_contact -->
<g id="node54" class="node">
<title>post_io.get_contact</title>
<g id="a_node54"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3596.03,-1072.04 3442.03,-1072.04 3442.03,-1036.04 3596.03,-1036.04 3596.03,-1072.04"/>
<text text-anchor="middle" x="3519.03" y="-1050.34" font-family="Times,serif" font-size="14.00">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge144" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M3284.54,-1012.77C3328.67,-1020.57 3385.41,-1030.59 3431.91,-1038.81"/>
<polygon fill="black" stroke="black" points="3431.51,-1042.3 3441.97,-1040.59 3432.73,-1035.4 3431.51,-1042.3"/>
</g>
<!-- notes_utils.write_md -->
<g id="node117" class="node">
<title>notes_utils.write_md</title>
<g id="a_node117"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="3601.53,-964.04 3436.53,-964.04 3436.53,-928.04 3601.53,-928.04 3601.53,-964.04"/>
<text text-anchor="middle" x="3519.03" y="-942.34" font-family="Times,serif" font-size="14.00">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge143" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M3284.54,-987.31C3326.95,-979.81 3380.99,-970.26 3426.41,-962.23"/>
<polygon fill="black" stroke="black" points="3427.02,-965.68 3436.26,-960.49 3425.8,-958.78 3427.02,-965.68"/>
</g>
<!-- post_io.get_timestamp -->
<g id="node120" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node120"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3608.03,-1018.04 3430.03,-1018.04 3430.03,-982.04 3608.03,-982.04 3608.03,-1018.04"/>
<text text-anchor="middle" x="3519.03" y="-996.34" font-family="Times,serif" font-size="14.00">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge145" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M3284.54,-1000.04C3324.89,-1000.04 3375.77,-1000.04 3419.73,-1000.04"/>
<polygon fill="black" stroke="black" points="3419.87,-1003.54 3429.87,-1000.04 3419.87,-996.54 3419.87,-1003.54"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node29" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node29"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="3628.03,-1446.04 3410.03,-1446.04 3410.03,-1410.04 3628.03,-1410.04 3628.03,-1446.04"/>
<text text-anchor="middle" x="3519.03" y="-1424.34" font-family="Times,serif" font-size="14.00">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path -->
<g id="node30" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node30"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="3915.03,-1720.04 3740.03,-1720.04 3740.03,-1684.04 3915.03,-1684.04 3915.03,-1720.04"/>
<text text-anchor="middle" x="3827.53" y="-1698.34" font-family="Times,serif" font-size="14.00">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge10" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3626.87,-1446.15C3636.28,-1449.94 3645.33,-1454.51 3653.53,-1460.04 3735.66,-1515.35 3791.8,-1623.54 3814.82,-1674.39"/>
<polygon fill="black" stroke="black" points="3811.72,-1676.04 3818.98,-1683.76 3818.12,-1673.2 3811.72,-1676.04"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node31" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node31"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="3313.53,-1446.04 3109.53,-1446.04 3109.53,-1410.04 3313.53,-1410.04 3313.53,-1446.04"/>
<text text-anchor="middle" x="3211.53" y="-1424.34" font-family="Times,serif" font-size="14.00">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge11" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M3313.83,-1428.04C3341.29,-1428.04 3371.26,-1428.04 3399.57,-1428.04"/>
<polygon fill="black" stroke="black" points="3399.92,-1431.54 3409.92,-1428.04 3399.92,-1424.54 3399.92,-1431.54"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node32" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node32"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="2276.53,-1633.04 2055.53,-1633.04 2055.53,-1597.04 2276.53,-1597.04 2276.53,-1633.04"/>
<text text-anchor="middle" x="2166.03" y="-1611.34" font-family="Times,serif" font-size="14.00">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge12" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2276.84,-1618.96C2374.72,-1622.12 2521.91,-1626.04 2650.03,-1626.04 2650.03,-1626.04 2650.03,-1626.04 3212.53,-1626.04 3408.82,-1626.04 3460.18,-1616.21 3653.53,-1650.04 3692.47,-1656.85 3735.01,-1669.56 3768.16,-1680.71"/>
<polygon fill="black" stroke="black" points="3767.1,-1684.04 3777.69,-1683.96 3769.36,-1677.42 3767.1,-1684.04"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node33" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node33"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="2762.53,-1106.04 2539.53,-1106.04 2539.53,-1070.04 2762.53,-1070.04 2762.53,-1106.04"/>
<text text-anchor="middle" x="2651.03" y="-1084.34" font-family="Times,serif" font-size="14.00">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node34" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node34"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="3011.53,-1332.04 2825.53,-1332.04 2825.53,-1296.04 3011.53,-1296.04 3011.53,-1332.04"/>
<text text-anchor="middle" x="2918.53" y="-1310.34" font-family="Times,serif" font-size="14.00">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node35" class="node">
<title>tg_client._extract_author</title>
<g id="a_node35"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="3308.53,-910.04 3114.53,-910.04 3114.53,-874.04 3308.53,-874.04 3308.53,-910.04"/>
<text text-anchor="middle" x="3211.53" y="-888.34" font-family="Times,serif" font-size="14.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node36" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node36"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="3629.53,-910.04 3408.53,-910.04 3408.53,-874.04 3629.53,-874.04 3629.53,-910.04"/>
<text text-anchor="middle" x="3519.03" y="-888.34" font-family="Times,serif" font-size="14.00">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge13" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M3308.77,-892.04C3337.22,-892.04 3368.7,-892.04 3398.42,-892.04"/>
<polygon fill="black" stroke="black" points="3398.43,-895.54 3408.43,-892.04 3398.43,-888.54 3398.43,-895.54"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node37" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node37"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="3024.53,-1064.04 2812.53,-1064.04 2812.53,-1028.04 3024.53,-1028.04 3024.53,-1064.04"/>
<text text-anchor="middle" x="2918.53" y="-1042.34" font-family="Times,serif" font-size="14.00">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node38" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node38"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="3924.03,-336.04 3731.03,-336.04 3731.03,-300.04 3924.03,-300.04 3924.03,-336.04"/>
<text text-anchor="middle" x="3827.53" y="-314.34" font-family="Times,serif" font-size="14.00">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node39" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node39"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="2746.53,-772.04 2555.53,-772.04 2555.53,-736.04 2746.53,-736.04 2746.53,-772.04"/>
<text text-anchor="middle" x="2651.03" y="-750.34" font-family="Times,serif" font-size="14.00">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge16" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2746.6,-757.88C2983.9,-768.42 3590.16,-801.39 3653.53,-865.04 3706.83,-918.56 3656.97,-1134.88 3689.53,-1203.04 3712.3,-1250.68 3758.65,-1291.4 3791.11,-1315.78"/>
<polygon fill="black" stroke="black" points="3789.32,-1318.81 3799.45,-1321.92 3793.47,-1313.17 3789.32,-1318.81"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node40" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node40"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="3029.03,-499.04 2808.03,-499.04 2808.03,-463.04 3029.03,-463.04 3029.03,-499.04"/>
<text text-anchor="middle" x="2918.53" y="-477.34" font-family="Times,serif" font-size="14.00">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge14" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M2734.93,-736C2745.39,-730.71 2755.03,-723.88 2762.53,-715.04 2821.55,-645.52 2736.89,-580.24 2798.53,-513.04 2801.3,-510.02 2804.32,-507.27 2807.54,-504.78"/>
<polygon fill="black" stroke="black" points="2809.62,-507.59 2815.91,-499.07 2805.68,-501.81 2809.62,-507.59"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node41" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node41"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="3646.53,-558.04 3391.53,-558.04 3391.53,-522.04 3646.53,-522.04 3646.53,-558.04"/>
<text text-anchor="middle" x="3519.03" y="-536.34" font-family="Times,serif" font-size="14.00">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge15" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M2723.28,-735.97C2737.07,-730.57 2750.85,-723.7 2762.53,-715.04 2784.24,-698.94 2775.57,-680.28 2798.53,-666.04 2811.27,-658.14 3197.6,-593.19 3398.78,-559.76"/>
<polygon fill="black" stroke="black" points="3399.52,-563.18 3408.81,-558.09 3398.37,-556.28 3399.52,-563.18"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node42" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node42"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="3301.53,-406.04 3121.53,-406.04 3121.53,-370.04 3301.53,-370.04 3301.53,-406.04"/>
<text text-anchor="middle" x="3211.53" y="-384.34" font-family="Times,serif" font-size="14.00">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge17" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M2975.98,-462.99C3024.12,-447.61 3093.38,-425.48 3144.16,-409.25"/>
<polygon fill="black" stroke="black" points="3145.28,-412.56 3153.74,-406.19 3143.15,-405.9 3145.28,-412.56"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node78" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node78"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="3955.53,-534.04 3699.53,-534.04 3699.53,-498.04 3955.53,-498.04 3955.53,-534.04"/>
<text text-anchor="middle" x="3827.53" y="-512.34" font-family="Times,serif" font-size="14.00">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge91" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M3646.91,-530.1C3660.82,-529.01 3675.04,-527.9 3689.07,-526.8"/>
<polygon fill="black" stroke="black" points="3689.56,-530.27 3699.26,-526 3689.01,-523.29 3689.56,-530.27"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node43" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node43"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="3636.53,-336.04 3401.53,-336.04 3401.53,-300.04 3636.53,-300.04 3636.53,-336.04"/>
<text text-anchor="middle" x="3519.03" y="-314.34" font-family="Times,serif" font-size="14.00">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge20" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M3291.21,-370.01C3333.53,-360.31 3385.86,-348.32 3429.59,-338.3"/>
<polygon fill="black" stroke="black" points="3430.39,-341.71 3439.36,-336.06 3428.83,-334.88 3430.39,-341.71"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge19" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3590.48,-336.15C3614.51,-345.98 3638.96,-360.84 3653.53,-383.04 3703.57,-459.28 3652.79,-1119.57 3689.53,-1203.04 3710.74,-1251.22 3757.22,-1291.7 3790.15,-1315.88"/>
<polygon fill="black" stroke="black" points="3788.46,-1318.97 3798.63,-1321.96 3792.55,-1313.29 3788.46,-1318.97"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge18" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M3636.78,-318.04C3664.38,-318.04 3693.66,-318.04 3720.75,-318.04"/>
<polygon fill="black" stroke="black" points="3721.01,-321.54 3731.01,-318.04 3721.01,-314.54 3721.01,-321.54"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node44" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node44"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="1746.54,-394.04 1531.54,-394.04 1531.54,-358.04 1746.54,-358.04 1746.54,-394.04"/>
<text text-anchor="middle" x="1639.04" y="-372.34" font-family="Times,serif" font-size="14.00">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge21" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M1717.38,-357.98C1819.34,-335.78 2004.6,-301.04 2165.03,-301.04 2165.03,-301.04 2165.03,-301.04 2919.53,-301.04 3082.44,-301.04 3270.19,-307.41 3391.31,-312.35"/>
<polygon fill="black" stroke="black" points="3391.23,-315.85 3401.36,-312.76 3391.52,-308.85 3391.23,-315.85"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node45" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node45"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="3604.53,-428.04 3433.53,-428.04 3433.53,-392.04 3604.53,-392.04 3604.53,-428.04"/>
<text text-anchor="middle" x="3519.03" y="-406.34" font-family="Times,serif" font-size="14.00">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge23" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3559.04,-428.17C3590.69,-445.19 3633.27,-473.92 3653.53,-513.04 3697.21,-597.37 3669.25,-1274.25 3689.53,-1367.04 3715.78,-1487.16 3781.95,-1619.37 3811.67,-1675.01"/>
<polygon fill="black" stroke="black" points="3808.62,-1676.74 3816.45,-1683.88 3814.79,-1673.42 3808.62,-1676.74"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge22" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3604.69,-410.15C3782.69,-411.25 4182.86,-418.58 4225.53,-462.04 4308.12,-546.14 4346.24,-2448.73 4351.01,-2705.47"/>
<polygon fill="black" stroke="black" points="4347.52,-2705.88 4351.21,-2715.82 4354.52,-2705.75 4347.52,-2705.88"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge137" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4309.48,-2752.19C4302.85,-2761.58 4317.2,-2770.04 4352.53,-2770.04 4374.06,-2770.04 4387.8,-2766.89 4393.75,-2762.32"/>
<polygon fill="black" stroke="black" points="4397.24,-2762.65 4395.59,-2752.19 4390.36,-2761.4 4397.24,-2762.65"/>
</g>
<!-- tg_client._load_progress -->
<g id="node47" class="node">
<title>tg_client._load_progress</title>
<g id="a_node47"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="1733.54,-538.04 1544.54,-538.04 1544.54,-502.04 1733.54,-502.04 1733.54,-538.04"/>
<text text-anchor="middle" x="1639.04" y="-516.34" font-family="Times,serif" font-size="14.00">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge24" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1674.37,-501.89C1941.79,-363.05 3695.41,501.36 4225.53,-418.04 4345.44,-625.99 4351.29,-2455.97 4351.53,-2705.82"/>
<polygon fill="black" stroke="black" points="4348.03,-2705.91 4351.53,-2715.91 4355.03,-2705.91 4348.03,-2705.91"/>
</g>
<!-- tg_client._save_progress -->
<g id="node48" class="node">
<title>tg_client._save_progress</title>
<g id="a_node48"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="1998.03,-841.04 1807.03,-841.04 1807.03,-805.04 1998.03,-805.04 1998.03,-841.04"/>
<text text-anchor="middle" x="1902.53" y="-819.34" font-family="Times,serif" font-size="14.00">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node49" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node49"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2247.03,-1538.04 2085.03,-1538.04 2085.03,-1502.04 2247.03,-1502.04 2247.03,-1538.04"/>
<text text-anchor="middle" x="2166.03" y="-1516.34" font-family="Times,serif" font-size="14.00">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge25" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2246.04,-1538.08C2341.29,-1558.23 2506.5,-1588.04 2650.03,-1588.04 2650.03,-1588.04 2650.03,-1588.04 3212.53,-1588.04 3409.05,-1588.04 3463.5,-1569.99 3653.53,-1620.04 3702.51,-1632.94 3754.48,-1659.53 3788.52,-1678.95"/>
<polygon fill="black" stroke="black" points="3786.79,-1681.99 3797.2,-1683.97 3790.3,-1675.93 3786.79,-1681.99"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node50" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node50"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1718.54,-1148.04 1559.54,-1148.04 1559.54,-1112.04 1718.54,-1112.04 1718.54,-1148.04"/>
<text text-anchor="middle" x="1639.04" y="-1126.34" font-family="Times,serif" font-size="14.00">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge26" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1673.97,-1148.2C1819.02,-1224.12 2403.05,-1512.04 2917.53,-1512.04 2917.53,-1512.04 2917.53,-1512.04 3212.53,-1512.04 3310.68,-1512.04 3563.5,-1496.95 3653.53,-1536.04 3671.71,-1543.93 3758.62,-1631.98 3801.91,-1676.53"/>
<polygon fill="black" stroke="black" points="3799.49,-1679.06 3808.96,-1683.8 3804.51,-1674.19 3799.49,-1679.06"/>
</g>
<!-- tg_client._save_message -->
<g id="node51" class="node">
<title>tg_client._save_message</title>
<g id="a_node51"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="2503.53,-1029.04 2312.53,-1029.04 2312.53,-993.04 2503.53,-993.04 2503.53,-1029.04"/>
<text text-anchor="middle" x="2408.03" y="-1007.34" font-family="Times,serif" font-size="14.00">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge27" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M2410.86,-992.87C2417.38,-938.08 2444.38,-773.03 2539.53,-687.04 2543.18,-683.74 2547.15,-680.78 2551.35,-678.12"/>
<polygon fill="black" stroke="black" points="2553.27,-681.05 2560.25,-673.08 2549.83,-674.96 2553.27,-681.05"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge28" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M2413.67,-1029.22C2426.03,-1074 2464.14,-1190.4 2539.53,-1251.04 2543.86,-1254.52 2548.55,-1257.62 2553.48,-1260.39"/>
<polygon fill="black" stroke="black" points="2552.07,-1263.59 2562.57,-1265.01 2555.24,-1257.35 2552.07,-1263.59"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge29" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M2503.78,-1007.5C2597.39,-1004 2739.39,-998.69 2830.3,-995.3"/>
<polygon fill="black" stroke="black" points="2830.44,-998.79 2840.3,-994.92 2830.18,-991.8 2830.44,-998.79"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge40" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2409.9,-1029.28C2413.72,-1088.42 2434.03,-1276.55 2539.53,-1373.04 2627.36,-1453.35 2681.07,-1421.88 2798.53,-1441.04 2845.52,-1448.7 3611.02,-1476.6 3653.53,-1498.04 3731.54,-1537.37 3788.32,-1629.05 3812.94,-1674.91"/>
<polygon fill="black" stroke="black" points="3809.95,-1676.74 3817.71,-1683.96 3816.15,-1673.48 3809.95,-1676.74"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge30" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M2411.1,-1029.4C2418.12,-1082.4 2446.06,-1236.49 2539.53,-1310.04 2701.79,-1437.71 2954.76,-1446.13 3099.28,-1438.57"/>
<polygon fill="black" stroke="black" points="3099.71,-1442.05 3109.5,-1438 3099.32,-1435.06 3099.71,-1442.05"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge31" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M2452.05,-1029.09C2477.26,-1039.28 2509.89,-1051.78 2539.53,-1061.04 2546.47,-1063.2 2553.69,-1065.3 2560.97,-1067.31"/>
<polygon fill="black" stroke="black" points="2560.36,-1070.77 2570.92,-1069.99 2562.18,-1064.01 2560.36,-1070.77"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge32" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M2422.97,-1029.46C2445.15,-1057.82 2490.97,-1112.6 2539.53,-1148.04 2628.49,-1212.95 2667.98,-1199.58 2762.53,-1256.04 2779.48,-1266.15 2780.71,-1273.56 2798.53,-1282.04 2806.99,-1286.06 2816.04,-1289.65 2825.22,-1292.82"/>
<polygon fill="black" stroke="black" points="2824.24,-1296.18 2834.83,-1295.99 2826.43,-1289.53 2824.24,-1296.18"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge33" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M2490.36,-992.98C2568.9,-976.07 2691.38,-951.05 2798.53,-935.04 2902.08,-919.56 3021.1,-907.78 3104.5,-900.5"/>
<polygon fill="black" stroke="black" points="3104.83,-903.98 3114.49,-899.63 3104.23,-897.01 3104.83,-903.98"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge34" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M2419.56,-992.78C2439.82,-958.63 2486.92,-883.85 2539.53,-832.04 2560.8,-811.09 2588.19,-791.71 2610.39,-777.51"/>
<polygon fill="black" stroke="black" points="2612.32,-780.43 2618.92,-772.14 2608.59,-774.5 2612.32,-780.43"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge35" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M2364.25,-1029.19C2357.52,-1038.58 2372.11,-1047.04 2408.03,-1047.04 2429.92,-1047.04 2443.89,-1043.89 2449.94,-1039.32"/>
<polygon fill="black" stroke="black" points="2453.44,-1039.66 2451.81,-1029.19 2446.55,-1038.39 2453.44,-1039.66"/>
</g>
<!-- tg_client._save_media -->
<g id="node52" class="node">
<title>tg_client._save_media</title>
<g id="a_node52"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="2737.03,-1052.04 2565.03,-1052.04 2565.03,-1016.04 2737.03,-1016.04 2737.03,-1052.04"/>
<text text-anchor="middle" x="2651.03" y="-1030.34" font-family="Times,serif" font-size="14.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge36" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M2503.59,-1020.06C2520.3,-1021.66 2537.7,-1023.32 2554.44,-1024.91"/>
<polygon fill="black" stroke="black" points="2554.48,-1028.43 2564.76,-1025.9 2555.14,-1021.46 2554.48,-1028.43"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node53" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node53"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="4225.53,-561.04 4001.53,-561.04 4001.53,-525.04 4225.53,-525.04 4225.53,-561.04"/>
<text text-anchor="middle" x="4113.53" y="-539.34" font-family="Times,serif" font-size="14.00">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge37" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M2411.62,-992.95C2419.9,-942.17 2450.61,-797.42 2539.53,-727.04 2618.81,-664.28 2692.57,-755.03 2762.53,-682.04 2833.51,-607.97 2732.35,-532.42 2798.53,-454.04 2882.04,-355.13 2949.9,-396.01 3074.53,-361.04 3210.53,-322.88 3244.15,-306.69 3384.53,-291.04 3512.85,-276.73 3867.29,-207.26 3965.53,-291.04 4042.59,-356.75 3932.84,-441.62 4001.53,-516.04 4002.31,-516.87 4003.1,-517.69 4003.91,-518.48"/>
<polygon fill="black" stroke="black" points="4001.82,-521.29 4011.75,-524.98 4006.29,-515.9 4001.82,-521.29"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge38" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M2424.44,-1029.38C2446.78,-1054.38 2490.85,-1098.01 2539.53,-1115.04 2702.94,-1172.19 3224.48,-1100 3431.83,-1067.93"/>
<polygon fill="black" stroke="black" points="3432.42,-1071.38 3441.76,-1066.39 3431.34,-1064.47 3432.42,-1071.38"/>
</g>
<!-- post_io.read_post -->
<g id="node55" class="node">
<title>post_io.read_post</title>
<g id="a_node55"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="3898.03,-1194.04 3757.03,-1194.04 3757.03,-1158.04 3898.03,-1158.04 3898.03,-1194.04"/>
<text text-anchor="middle" x="3827.53" y="-1172.34" font-family="Times,serif" font-size="14.00">post_io.read_post</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge39" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2435.38,-992.85C2460.95,-975.95 2501.4,-951.17 2539.53,-936.04 2700.06,-872.35 2744.84,-846.04 2917.53,-846.04 2917.53,-846.04 2917.53,-846.04 3212.53,-846.04 3408.71,-846.04 3502.58,-739.73 3653.53,-865.04 3707.95,-910.21 3657.22,-957.12 3689.53,-1020.04 3716.78,-1073.09 3766.04,-1122.74 3797.48,-1151.22"/>
<polygon fill="black" stroke="black" points="3795.27,-1153.94 3805.06,-1157.99 3799.93,-1148.72 3795.27,-1153.94"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge43" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M2737.18,-1047.47C2746.21,-1051 2754.88,-1055.44 2762.53,-1061.04 2787.33,-1079.17 2775.2,-1100.06 2798.53,-1120.04 3012.72,-1303.4 3112.55,-1288.73 3384.53,-1363.04 3501.01,-1394.86 3543.81,-1350.65 3653.53,-1401.04 3821.24,-1478.05 3877.42,-1512.88 3965.53,-1675.04 4018.29,-1772.13 3954.89,-1820.86 4001.53,-1921.04 4020.29,-1961.33 4056.34,-1998.15 4082.27,-2021.23"/>
<polygon fill="black" stroke="black" points="4080.12,-2024.01 4089.96,-2027.95 4084.72,-2018.73 4080.12,-2024.01"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge44" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M2729.23,-1052.04C2740.44,-1054.9 2751.81,-1057.95 2762.53,-1061.04 2778.74,-1065.71 2782.36,-1068.25 2798.53,-1073.04 3144.71,-1175.56 3562.7,-1277.44 3740.15,-1319.69"/>
<polygon fill="black" stroke="black" points="3739.42,-1323.12 3749.96,-1322.03 3741.04,-1316.31 3739.42,-1323.12"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge41" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M2737.13,-1037.88C2757.91,-1038.82 2780.49,-1039.84 2802.42,-1040.83"/>
<polygon fill="black" stroke="black" points="2802.29,-1044.33 2812.44,-1041.29 2802.61,-1037.34 2802.29,-1044.33"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node56" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node56"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="3319.03,-964.04 3104.03,-964.04 3104.03,-928.04 3319.03,-928.04 3319.03,-964.04"/>
<text text-anchor="middle" x="3211.53" y="-942.34" font-family="Times,serif" font-size="14.00">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge42" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M2681.32,-1015.99C2710.01,-999.36 2755.55,-975.7 2798.53,-965.04 2896.04,-940.85 3010.41,-937.47 3093.88,-939.35"/>
<polygon fill="black" stroke="black" points="3093.81,-942.85 3103.9,-939.61 3093.99,-935.85 3093.81,-942.85"/>
</g>
<!-- notes_utils.read_md -->
<g id="node116" class="node">
<title>notes_utils.read_md</title>
<g id="a_node116"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="4193.53,-1194.04 4033.53,-1194.04 4033.53,-1158.04 4193.53,-1158.04 4193.53,-1194.04"/>
<text text-anchor="middle" x="4113.53" y="-1172.34" font-family="Times,serif" font-size="14.00">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge141" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M3898.37,-1176.04C3936.07,-1176.04 3983.01,-1176.04 4023.33,-1176.04"/>
<polygon fill="black" stroke="black" points="4023.43,-1179.54 4033.43,-1176.04 4023.43,-1172.54 4023.43,-1179.54"/>
</g>
<!-- post_io._parse_block -->
<g id="node119" class="node">
<title>post_io._parse_block</title>
<g id="a_node119"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="4194.53,-1248.04 4032.53,-1248.04 4032.53,-1212.04 4194.53,-1212.04 4194.53,-1248.04"/>
<text text-anchor="middle" x="4113.53" y="-1226.34" font-family="Times,serif" font-size="14.00">post_io._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;post_io._parse_block -->
<g id="edge142" class="edge">
<title>post_io.read_post&#45;&gt;post_io._parse_block</title>
<path fill="none" stroke="black" d="M3898.37,-1189.32C3935.77,-1196.43 3982.26,-1205.27 4022.36,-1212.89"/>
<polygon fill="black" stroke="black" points="4021.93,-1216.37 4032.41,-1214.8 4023.24,-1209.5 4021.93,-1216.37"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge148" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M3319.38,-946.04C3354.15,-946.04 3392.43,-946.04 3426.02,-946.04"/>
<polygon fill="black" stroke="black" points="3426.28,-949.54 3436.28,-946.04 3426.28,-942.54 3426.28,-949.54"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node57" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node57"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="2261.03,-749.04 2071.03,-749.04 2071.03,-713.04 2261.03,-713.04 2261.03,-749.04"/>
<text text-anchor="middle" x="2166.03" y="-727.34" font-family="Times,serif" font-size="14.00">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge45" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M2182.78,-749.41C2224.33,-797.88 2337,-929.33 2384.95,-985.27"/>
<polygon fill="black" stroke="black" points="2382.37,-987.65 2391.54,-992.96 2387.69,-983.09 2382.37,-987.65"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node58" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node58"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="3644.53,-666.04 3393.53,-666.04 3393.53,-630.04 3644.53,-630.04 3644.53,-666.04"/>
<text text-anchor="middle" x="3519.03" y="-644.34" font-family="Times,serif" font-size="14.00">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge47" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3644.71,-665.52C3647.83,-667.79 3650.78,-670.29 3653.53,-673.04 3714.65,-734.08 3649.81,-787.33 3689.53,-864.04 3770.62,-1020.62 3895.57,-987.18 3965.53,-1149.04 4033.67,-1306.68 3936.81,-1761.95 4001.53,-1921.04 4018.18,-1961.97 4054.29,-1998.42 4080.82,-2021.25"/>
<polygon fill="black" stroke="black" points="4078.81,-2024.13 4088.71,-2027.89 4083.31,-2018.78 4078.81,-2024.13"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge46" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3637.16,-666.05C3643.21,-669.94 3648.75,-674.56 3653.53,-680.04 3705.44,-739.39 3656.46,-961.46 3689.53,-1033.04 3712.6,-1082.96 3760.32,-1126.32 3792.88,-1151.83"/>
<polygon fill="black" stroke="black" points="3790.75,-1154.61 3800.81,-1157.93 3795.02,-1149.06 3790.75,-1154.61"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge48" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3639,-666.13C3644.01,-668.2 3648.88,-670.49 3653.53,-673.04 3831.15,-770.25 3877.8,-822.54 3965.53,-1005.04 4014.55,-1107 3943.82,-1159.73 4001.53,-1257.04 4016.66,-1282.55 4042.95,-1302.73 4066.15,-1316.81"/>
<polygon fill="black" stroke="black" points="4064.46,-1319.87 4074.86,-1321.9 4067.99,-1313.83 4064.46,-1319.87"/>
</g>
<!-- tg_client._download_messages -->
<g id="node60" class="node">
<title>tg_client._download_messages</title>
<g id="a_node60"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2019.53,-787.04 1785.53,-787.04 1785.53,-751.04 2019.53,-751.04 2019.53,-787.04"/>
<text text-anchor="middle" x="1902.53" y="-765.34" font-family="Times,serif" font-size="14.00">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge49" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2019.75,-752.15C2033.34,-750.17 2047.14,-748.17 2060.55,-746.22"/>
<polygon fill="black" stroke="black" points="2061.33,-749.64 2070.73,-744.74 2060.33,-742.71 2061.33,-749.64"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node61" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node61"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2013.53,-273.04 1791.53,-273.04 1791.53,-237.04 2013.53,-237.04 2013.53,-273.04"/>
<text text-anchor="middle" x="1902.53" y="-251.34" font-family="Times,serif" font-size="14.00">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node62" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node62"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2007.53,-1618.04 1797.53,-1618.04 1797.53,-1582.04 2007.53,-1582.04 2007.53,-1618.04"/>
<text text-anchor="middle" x="1902.53" y="-1596.34" font-family="Times,serif" font-size="14.00">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge53" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M1907.01,-1618.19C1932.05,-1743.94 2096.81,-2490.96 2539.53,-2849.04 2767.83,-3033.69 3720.54,-2959.86 4021.2,-2931.32"/>
<polygon fill="black" stroke="black" points="4021.57,-2934.8 4031.19,-2930.36 4020.9,-2927.83 4021.57,-2934.8"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge56" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1958.15,-1618.08C1986.82,-1626.8 2022.73,-1636.54 2055.53,-1642.04 2209.91,-1667.91 2250.5,-1664.04 2407.03,-1664.04 2407.03,-1664.04 2407.03,-1664.04 3212.53,-1664.04 3408.63,-1664.04 3458.14,-1661.43 3653.53,-1678.04 3678.23,-1680.14 3704.79,-1683.34 3729.51,-1686.73"/>
<polygon fill="black" stroke="black" points="3729.22,-1690.23 3739.61,-1688.14 3730.19,-1683.29 3729.22,-1690.23"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge50" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2007.63,-1606.01C2020,-1606.72 2032.69,-1607.45 2045.25,-1608.17"/>
<polygon fill="black" stroke="black" points="2045.1,-1611.66 2055.28,-1608.74 2045.5,-1604.67 2045.1,-1611.66"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge55" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2007.8,-1591.92C2111.71,-1582.79 2258.4,-1566.63 2276.53,-1547.04 2361.69,-1455.03 2246.05,-1090.32 2312.53,-984.04 2374.07,-885.65 2428.36,-888.32 2539.53,-855.04 2776.98,-783.95 3464.65,-639.55 3653.53,-800.04 3729.04,-864.19 3647.2,-930.46 3689.53,-1020.04 3714.94,-1073.81 3764.52,-1123.08 3796.55,-1151.31"/>
<polygon fill="black" stroke="black" points="3794.44,-1154.11 3804.29,-1158.02 3799.02,-1148.82 3794.44,-1154.11"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge51" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1905.69,-1581.78C1919.61,-1465.13 1998.09,-826.83 2055.53,-763.04 2058.25,-760.02 2061.23,-757.28 2064.43,-754.79"/>
<polygon fill="black" stroke="black" points="2066.46,-757.64 2072.75,-749.12 2062.52,-751.86 2066.46,-757.64"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge52" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M1907.75,-1581.68C1935.95,-1463.98 2109.28,-814.37 2539.53,-628.04 2687.02,-564.16 3150.92,-605.62 3383.01,-631.61"/>
<polygon fill="black" stroke="black" points="3382.88,-635.12 3393.21,-632.76 3383.66,-628.16 3382.88,-635.12"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge54" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M1903.35,-1618.21C1902.39,-1750.29 1902.79,-2562.69 2055.53,-2741.04 2456.11,-3208.77 2780.81,-3011.53 3384.53,-3133.04 3502.78,-3156.84 3641.31,-3169.84 3731.34,-3176.35"/>
<polygon fill="black" stroke="black" points="3731.3,-3179.86 3741.52,-3177.08 3731.8,-3172.88 3731.3,-3179.86"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node64" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node64"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1482.31,-831.04 1301.31,-831.04 1301.31,-795.04 1482.31,-795.04 1482.31,-831.04"/>
<text text-anchor="middle" x="1391.81" y="-809.34" font-family="Times,serif" font-size="14.00">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge63" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1395.07,-831.37C1402.91,-887.52 1433.85,-1059.27 1528.55,-1157.04 1751.73,-1387.45 2596.75,-1550.04 2917.53,-1550.04 2917.53,-1550.04 2917.53,-1550.04 3212.53,-1550.04 3408.98,-1550.04 3468.39,-1514.32 3653.53,-1580.04 3712.28,-1600.89 3769.13,-1647.67 3800.8,-1676.86"/>
<polygon fill="black" stroke="black" points="3798.61,-1679.6 3808.3,-1683.88 3803.39,-1674.49 3798.61,-1679.6"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge57" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1447.61,-795.03C1634.19,-734.58 2262.9,-538.04 2798.53,-454.04 2916.13,-435.59 3256.28,-420.26 3423.27,-413.6"/>
<polygon fill="black" stroke="black" points="3423.43,-417.1 3433.28,-413.21 3423.15,-410.11 3423.43,-417.1"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge58" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1463.5,-795.01C1473.97,-790.3 1484.07,-784.4 1492.55,-777.04 1518.37,-754.61 1511.98,-738.95 1528.55,-709.04 1560.78,-650.88 1600.22,-583.73 1621.88,-547.19"/>
<polygon fill="black" stroke="black" points="1625.15,-548.54 1627.24,-538.15 1619.13,-544.96 1625.15,-548.54"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge59" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1482.59,-814.8C1570.29,-816.53 1703.75,-819.15 1796.37,-820.97"/>
<polygon fill="black" stroke="black" points="1796.54,-824.47 1806.61,-821.17 1796.68,-817.47 1796.54,-824.47"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge60" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1393.9,-831.13C1399.97,-925.85 1432.94,-1363.58 1528.55,-1450.04 1678.97,-1586.06 1938.24,-1563.77 2074.83,-1539.72"/>
<polygon fill="black" stroke="black" points="2075.62,-1543.13 2084.85,-1537.91 2074.38,-1536.24 2075.62,-1543.13"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge61" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1407.05,-831.45C1448.55,-885.09 1569.43,-1041.34 1617.74,-1103.8"/>
<polygon fill="black" stroke="black" points="1615.18,-1106.2 1624.06,-1111.97 1620.71,-1101.92 1615.18,-1106.2"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge62" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1482.59,-805.27C1563.83,-798.24 1684.33,-787.82 1775.27,-779.96"/>
<polygon fill="black" stroke="black" points="1775.71,-783.43 1785.37,-779.08 1775.11,-776.46 1775.71,-783.43"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node65" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node65"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="3617.03,-1354.04 3421.03,-1354.04 3421.03,-1318.04 3617.03,-1318.04 3617.03,-1354.04"/>
<text text-anchor="middle" x="3519.03" y="-1332.34" font-family="Times,serif" font-size="14.00">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge66" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3616.31,-1354.1C3640.22,-1358.46 3665.79,-1363.02 3689.53,-1367.04 3750.73,-1377.4 3923.53,-1364.34 3965.53,-1410.04 4042.57,-1493.85 3957.39,-1816.11 4001.53,-1921.04 4018.67,-1961.77 4054.68,-1998.26 4081.06,-2021.15"/>
<polygon fill="black" stroke="black" points="4079.01,-2024.01 4088.9,-2027.81 4083.54,-2018.67 4079.01,-2024.01"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge65" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3574.88,-1354.11C3600.94,-1364.71 3631.2,-1380.19 3653.53,-1401.04 3740.39,-1482.14 3796.07,-1616.86 3817.08,-1674.5"/>
<polygon fill="black" stroke="black" points="3813.82,-1675.78 3820.49,-1684.02 3820.41,-1673.42 3813.82,-1675.78"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge64" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3554.6,-1317.99C3610.59,-1288.76 3721.04,-1231.11 3782.55,-1198.99"/>
<polygon fill="black" stroke="black" points="3784.38,-1201.99 3791.62,-1194.26 3781.14,-1195.78 3784.38,-1201.99"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge67" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3617.05,-1320.58C3640.7,-1317.45 3665.98,-1314.63 3689.53,-1313.04 3811.92,-1304.77 3843.37,-1301.91 3965.53,-1313.04 3982.81,-1314.61 4001.1,-1317.2 4018.68,-1320.18"/>
<polygon fill="black" stroke="black" points="4018.49,-1323.7 4028.94,-1321.97 4019.69,-1316.8 4018.49,-1323.7"/>
</g>
<!-- tg_client.main -->
<g id="node66" class="node">
<title>tg_client.main</title>
<g id="a_node66"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="1224.38,-768.04 1106.38,-768.04 1106.38,-732.04 1224.38,-732.04 1224.38,-768.04"/>
<text text-anchor="middle" x="1165.38" y="-746.34" font-family="Times,serif" font-size="14.00">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge68" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M1210.2,-732.02C1233.83,-722.87 1263.68,-712.2 1291.07,-705.04 1442.32,-665.45 1481.69,-647.04 1638.04,-647.04 1638.04,-647.04 1638.04,-647.04 2167.03,-647.04 2298.45,-647.04 2449.96,-650.03 2547.72,-652.36"/>
<polygon fill="black" stroke="black" points="2547.81,-655.86 2557.89,-652.6 2547.98,-648.86 2547.81,-655.86"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge69" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M1224.47,-750.04C1248.09,-750.04 1275.91,-750.04 1301.98,-750.04"/>
<polygon fill="black" stroke="black" points="1302.25,-753.54 1312.25,-750.04 1302.25,-746.54 1302.25,-753.54"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge70" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M1184.36,-731.9C1208.06,-708.29 1251.42,-666.14 1291.07,-633.04 1400.72,-541.51 1539.36,-443.86 1603.09,-399.9"/>
<polygon fill="black" stroke="black" points="1605.32,-402.61 1611.58,-394.06 1601.35,-396.85 1605.32,-402.61"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge71" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M1224.63,-734.73C1245.44,-729.98 1269.16,-725.38 1291.07,-723.04 1567.79,-693.42 1896.6,-710.35 2060.82,-722.33"/>
<polygon fill="black" stroke="black" points="2060.69,-725.83 2070.92,-723.07 2061.2,-718.85 2060.69,-725.83"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge72" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M1170.43,-731.91C1181.79,-684.71 1218.01,-556.23 1291.07,-478.04 1420.71,-339.3 1643.71,-286.6 1781.31,-266.77"/>
<polygon fill="black" stroke="black" points="1782.06,-270.2 1791.47,-265.34 1781.08,-263.27 1782.06,-270.2"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge73" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M1166.47,-768.36C1167.4,-875.21 1177.74,-1417.01 1291.07,-1526.04 1429.13,-1658.86 1673.6,-1641.83 1807.46,-1619.77"/>
<polygon fill="black" stroke="black" points="1808.41,-1623.16 1817.69,-1618.04 1807.25,-1616.26 1808.41,-1623.16"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge74" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M1224.47,-766.34C1252.59,-774.24 1286.67,-783.8 1316.65,-792.22"/>
<polygon fill="black" stroke="black" points="1316.07,-795.69 1326.64,-795.02 1317.96,-788.95 1316.07,-795.69"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge75" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M1169.12,-768.24C1184.19,-861.01 1266.01,-1283.42 1528.55,-1450.04 1767.56,-1601.72 1881.95,-1474.04 2165.03,-1474.04 2165.03,-1474.04 2165.03,-1474.04 2409.03,-1474.04 2507.87,-1474.04 3152.05,-1386.6 3410.75,-1350.92"/>
<polygon fill="black" stroke="black" points="3411.48,-1354.35 3420.91,-1349.52 3410.53,-1347.42 3411.48,-1354.35"/>
</g>
<!-- clean_data._parse_date -->
<g id="node67" class="node">
<title>clean_data._parse_date</title>
<g id="a_node67"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="3918.53,-3016.04 3736.53,-3016.04 3736.53,-2980.04 3918.53,-2980.04 3918.53,-3016.04"/>
<text text-anchor="middle" x="3827.53" y="-2994.34" font-family="Times,serif" font-size="14.00">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge76" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3918.63,-3008.52C4004.53,-3013.85 4134,-3009.23 4225.53,-2949.04 4293.41,-2904.39 4329.51,-2809.55 4343.92,-2762.18"/>
<polygon fill="black" stroke="black" points="4347.37,-2762.87 4346.82,-2752.29 4340.65,-2760.9 4347.37,-2762.87"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node68" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node68"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="3606.53,-3016.04 3431.53,-3016.04 3431.53,-2980.04 3606.53,-2980.04 3606.53,-3016.04"/>
<text text-anchor="middle" x="3519.03" y="-2994.34" font-family="Times,serif" font-size="14.00">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge78" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3590.63,-2980.02C3614.68,-2970.2 3639.11,-2955.33 3653.53,-2933.04 3723.47,-2824.97 3621.57,-1884.37 3689.53,-1775.04 3704.04,-1751.7 3728.73,-1735.37 3753.18,-1724.17"/>
<polygon fill="black" stroke="black" points="3754.74,-1727.31 3762.52,-1720.12 3751.96,-1720.89 3754.74,-1727.31"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge77" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3606.63,-2998.04C3643.85,-2998.04 3687.57,-2998.04 3726.19,-2998.04"/>
<polygon fill="black" stroke="black" points="3726.41,-3001.54 3736.41,-2998.04 3726.41,-2994.54 3726.41,-3001.54"/>
</g>
<!-- clean_data._clean_media -->
<g id="node69" class="node">
<title>clean_data._clean_media</title>
<g id="a_node69"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="3614.53,-2724.04 3423.53,-2724.04 3423.53,-2688.04 3614.53,-2688.04 3614.53,-2724.04"/>
<text text-anchor="middle" x="3519.03" y="-2702.34" font-family="Times,serif" font-size="14.00">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge80" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3546.16,-2687.92C3578.17,-2664.01 3630.93,-2618.61 3653.53,-2565.04 3730.48,-2382.66 3647.43,-1868.45 3689.53,-1675.04 3715.68,-1554.89 3781.9,-1422.69 3811.65,-1367.06"/>
<polygon fill="black" stroke="black" points="3814.77,-1368.65 3816.44,-1358.19 3808.61,-1365.33 3814.77,-1368.65"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge79" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M3614.67,-2715.38C3628.44,-2719.45 3641.89,-2725.14 3653.53,-2733.04 3742.35,-2793.28 3796.35,-2915.88 3816.96,-2970.6"/>
<polygon fill="black" stroke="black" points="3813.68,-2971.82 3820.42,-2980 3820.25,-2969.4 3813.68,-2971.82"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node70" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node70"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="3606.03,-2778.04 3432.03,-2778.04 3432.03,-2742.04 3606.03,-2742.04 3606.03,-2778.04"/>
<text text-anchor="middle" x="3519.03" y="-2756.34" font-family="Times,serif" font-size="14.00">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge83" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3606.24,-2759.5C3624.31,-2755.19 3641.51,-2747.18 3653.53,-2733.04 3722.51,-2651.87 3633.01,-1865.32 3689.53,-1775.04 3704.12,-1751.74 3728.82,-1735.42 3753.27,-1724.22"/>
<polygon fill="black" stroke="black" points="3754.82,-1727.36 3762.6,-1720.17 3752.03,-1720.94 3754.82,-1727.36"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node71" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node71"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="3909.53,-2736.04 3745.53,-2736.04 3745.53,-2700.04 3909.53,-2700.04 3909.53,-2736.04"/>
<text text-anchor="middle" x="3827.53" y="-2714.34" font-family="Times,serif" font-size="14.00">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge81" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M3606.22,-2748.23C3646.55,-2742.7 3694.58,-2736.12 3735.49,-2730.51"/>
<polygon fill="black" stroke="black" points="3736.03,-2733.97 3745.46,-2729.15 3735.08,-2727.04 3736.03,-2733.97"/>
</g>
<!-- lot_io.read_lots -->
<g id="node72" class="node">
<title>lot_io.read_lots</title>
<g id="a_node72"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="3890.03,-3484.04 3765.03,-3484.04 3765.03,-3448.04 3890.03,-3448.04 3890.03,-3484.04"/>
<text text-anchor="middle" x="3827.53" y="-3462.34" font-family="Times,serif" font-size="14.00">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge82" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3589.43,-2778.09C3613.64,-2787.95 3638.5,-2802.84 3653.53,-2825.04 3715.01,-2915.8 3646.01,-3216.42 3689.53,-3317.04 3712.1,-3369.22 3760.86,-3414.96 3793.7,-3441.55"/>
<polygon fill="black" stroke="black" points="3791.67,-3444.41 3801.67,-3447.89 3796.02,-3438.93 3791.67,-3444.41"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge105" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3879.51,-3447.92C3908.47,-3435.25 3943.26,-3415.61 3965.53,-3388.04 4076.51,-3250.63 4104.21,-3028.49 4110.68,-2950.33"/>
<polygon fill="black" stroke="black" points="4114.17,-2950.52 4111.46,-2940.28 4107.19,-2949.98 4114.17,-2950.52"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node89" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node89"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="4178.03,-3996.04 4049.03,-3996.04 4049.03,-3960.04 4178.03,-3960.04 4178.03,-3996.04"/>
<text text-anchor="middle" x="4113.53" y="-3974.34" font-family="Times,serif" font-size="14.00">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge104" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3890.2,-3478.89C3916.53,-3487.21 3945.71,-3500.64 3965.53,-3522.04 4083.24,-3649.07 4106.72,-3871.1 4111.38,-3949.57"/>
<polygon fill="black" stroke="black" points="4107.89,-3949.87 4111.92,-3959.67 4114.88,-3949.5 4107.89,-3949.87"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node73" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node73"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="3636.53,-3124.04 3401.53,-3124.04 3401.53,-3088.04 3636.53,-3088.04 3636.53,-3124.04"/>
<text text-anchor="middle" x="3519.03" y="-3102.34" font-family="Times,serif" font-size="14.00">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node74" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node74"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="3949.03,-3567.04 3706.03,-3567.04 3706.03,-3531.04 3949.03,-3531.04 3949.03,-3567.04"/>
<text text-anchor="middle" x="3827.53" y="-3545.34" font-family="Times,serif" font-size="14.00">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node75" class="node">
<title>clean_data.main</title>
<g id="a_node75"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="3277.53,-3016.04 3145.53,-3016.04 3145.53,-2980.04 3277.53,-2980.04 3277.53,-3016.04"/>
<text text-anchor="middle" x="3211.53" y="-2994.34" font-family="Times,serif" font-size="14.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge84" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M3277.69,-2998.04C3319.49,-2998.04 3374.5,-2998.04 3421.34,-2998.04"/>
<polygon fill="black" stroke="black" points="3421.51,-3001.54 3431.51,-2998.04 3421.51,-2994.54 3421.51,-3001.54"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge85" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M3269.1,-2979.94C3297.18,-2968.11 3329.15,-2949.78 3348.53,-2923.04 3398.96,-2853.44 3324.13,-2794.18 3384.53,-2733.04 3392.76,-2724.71 3402.79,-2718.59 3413.63,-2714.14"/>
<polygon fill="black" stroke="black" points="3415.11,-2717.33 3423.34,-2710.65 3412.74,-2710.74 3415.11,-2717.33"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge86" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M3266.53,-2980.01C3294.75,-2968.01 3327.67,-2949.51 3348.53,-2923.04 3385.91,-2875.62 3341.14,-2834.02 3384.53,-2792.04 3395.04,-2781.87 3408.18,-2774.74 3422.08,-2769.77"/>
<polygon fill="black" stroke="black" points="3423.34,-2773.04 3431.8,-2766.67 3421.21,-2766.37 3423.34,-2773.04"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge87" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M3244.85,-3016.15C3278.72,-3034.43 3333.93,-3062.28 3384.53,-3079.04 3391.4,-3081.31 3398.53,-3083.43 3405.77,-3085.39"/>
<polygon fill="black" stroke="black" points="3405.13,-3088.84 3415.69,-3087.98 3406.89,-3082.07 3405.13,-3088.84"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge88" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M3228.49,-3016.24C3257.91,-3050.97 3320.29,-3130.27 3348.53,-3209.04 3371.86,-3274.11 3334.54,-3470.29 3384.53,-3518.04 3427.8,-3559.36 3581.68,-3561.91 3695.78,-3557.55"/>
<polygon fill="black" stroke="black" points="3696.14,-3561.04 3705.99,-3557.14 3695.86,-3554.04 3696.14,-3561.04"/>
</g>
<!-- config_utils.load_config -->
<g id="node76" class="node">
<title>config_utils.load_config</title>
<g id="a_node76"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="4443.53,-3974.04 4261.53,-3974.04 4261.53,-3938.04 4443.53,-3938.04 4443.53,-3974.04"/>
<text text-anchor="middle" x="4352.53" y="-3952.34" font-family="Times,serif" font-size="14.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- moderation.should_skip_text -->
<g id="node77" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node77"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="4224.03,-507.04 4003.03,-507.04 4003.03,-471.04 4224.03,-471.04 4224.03,-507.04"/>
<text text-anchor="middle" x="4113.53" y="-485.34" font-family="Times,serif" font-size="14.00">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge90" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3955.58,-528.12C3967.35,-529.23 3979.25,-530.37 3990.96,-531.48"/>
<polygon fill="black" stroke="black" points="3990.91,-534.99 4001.2,-532.45 3991.58,-528.02 3990.91,-534.99"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge89" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M3955.58,-503.96C3967.93,-502.78 3980.42,-501.6 3992.7,-500.43"/>
<polygon fill="black" stroke="black" points="3993.32,-503.89 4002.94,-499.46 3992.66,-496.92 3993.32,-503.89"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node79" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node79"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3933.53,-2278.04 3721.53,-2278.04 3721.53,-2242.04 3933.53,-2242.04 3933.53,-2278.04"/>
<text text-anchor="middle" x="3827.53" y="-2256.34" font-family="Times,serif" font-size="14.00">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node80" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node80"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="3625.03,-2188.04 3413.03,-2188.04 3413.03,-2152.04 3625.03,-2152.04 3625.03,-2188.04"/>
<text text-anchor="middle" x="3519.03" y="-2166.34" font-family="Times,serif" font-size="14.00">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge92" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M3625.23,-2185.94C3635.03,-2189.01 3644.61,-2192.67 3653.53,-2197.04 3672.5,-2206.32 3670.71,-2218.47 3689.53,-2228.04 3697.53,-2232.1 3706.05,-2235.66 3714.78,-2238.77"/>
<polygon fill="black" stroke="black" points="3713.72,-2242.1 3724.32,-2241.97 3715.95,-2235.47 3713.72,-2242.1"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node81" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node81"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="3617.03,-3698.04 3421.03,-3698.04 3421.03,-3662.04 3617.03,-3662.04 3617.03,-3698.04"/>
<text text-anchor="middle" x="3519.03" y="-3676.34" font-family="Times,serif" font-size="14.00">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node82" class="node">
<title>lot_io.get_seller</title>
<g id="a_node82"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3892.03,-4345.04 3763.03,-4345.04 3763.03,-4309.04 3892.03,-4309.04 3892.03,-4345.04"/>
<text text-anchor="middle" x="3827.53" y="-4323.34" font-family="Times,serif" font-size="14.00">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge93" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3555,-3698.07C3585.6,-3715.67 3628.91,-3745.27 3653.53,-3783.04 3690.03,-3839.02 3670.64,-3864.93 3689.53,-3929.04 3731.11,-4070.09 3791.97,-4235.32 3816.11,-4299.55"/>
<polygon fill="black" stroke="black" points="3812.86,-4300.85 3819.66,-4308.98 3819.41,-4298.38 3812.86,-4300.85"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node83" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node83"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="3321.53,-1896.04 3101.53,-1896.04 3101.53,-1860.04 3321.53,-1860.04 3321.53,-1896.04"/>
<text text-anchor="middle" x="3211.53" y="-1874.34" font-family="Times,serif" font-size="14.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge98" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3225.35,-1859.87C3250.95,-1825.31 3312.21,-1750.88 3384.53,-1721.04 3496.08,-1675 3637.19,-1678.32 3729.56,-1687.74"/>
<polygon fill="black" stroke="black" points="3729.42,-1691.25 3739.74,-1688.83 3730.16,-1684.29 3729.42,-1691.25"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge94" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3220.32,-1859.94C3244.73,-1802.22 3319.8,-1616.81 3348.53,-1455.04 3365.8,-1357.81 3320.47,-642.19 3384.53,-567.04 3385.15,-566.31 3385.79,-565.6 3386.43,-564.9"/>
<polygon fill="black" stroke="black" points="3388.89,-567.4 3393.85,-558.04 3384.13,-562.26 3388.89,-567.4"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge97" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3219.76,-1859.82C3242.52,-1801.78 3313.21,-1615.5 3348.53,-1455.04 3362.63,-1390.97 3335.4,-1205.5 3384.53,-1162.04 3436.37,-1116.18 3634.45,-1141.86 3747.06,-1161.06"/>
<polygon fill="black" stroke="black" points="3746.56,-1164.53 3757.01,-1162.78 3747.75,-1157.63 3746.56,-1164.53"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge96" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3232.08,-1896.12C3263.58,-1926.7 3324.48,-1992.18 3348.53,-2062.04 3372.9,-2132.82 3334.18,-3353.64 3384.53,-3409.04 3425.04,-3453.6 3593.81,-3434.23 3653.53,-3442.04 3686.76,-3446.38 3723.54,-3451.44 3754.61,-3455.8"/>
<polygon fill="black" stroke="black" points="3754.52,-3459.32 3764.91,-3457.25 3755.5,-3452.39 3754.52,-3459.32"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge95" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3228.05,-1896.17C3254.92,-1928.15 3310.85,-1997.33 3348.53,-2062.04 3368.36,-2096.08 3353.8,-2118.39 3384.53,-2143.04 3390.3,-2147.66 3396.65,-2151.57 3403.36,-2154.85"/>
<polygon fill="black" stroke="black" points="3402.14,-2158.13 3412.71,-2158.95 3404.96,-2151.72 3402.14,-2158.13"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node84" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node84"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="3624.53,-4736.04 3413.53,-4736.04 3413.53,-4700.04 3624.53,-4700.04 3624.53,-4736.04"/>
<text text-anchor="middle" x="3519.03" y="-4714.34" font-family="Times,serif" font-size="14.00">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node85" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node85"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="3300.53,-4736.04 3122.53,-4736.04 3122.53,-4700.04 3300.53,-4700.04 3300.53,-4736.04"/>
<text text-anchor="middle" x="3211.53" y="-4714.34" font-family="Times,serif" font-size="14.00">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge99" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M3300.89,-4718.04C3332.76,-4718.04 3369.19,-4718.04 3403,-4718.04"/>
<polygon fill="black" stroke="black" points="3403.4,-4721.54 3413.4,-4718.04 3403.4,-4714.54 3403.4,-4721.54"/>
</g>
<!-- log_utils.init_logger -->
<g id="node86" class="node">
<title>log_utils.init_logger</title>
<g id="a_node86"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="3290.53,-4790.04 3132.53,-4790.04 3132.53,-4754.04 3290.53,-4754.04 3290.53,-4790.04"/>
<text text-anchor="middle" x="3211.53" y="-4768.34" font-family="Times,serif" font-size="14.00">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge100" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M3290.81,-4758.2C3325.78,-4752.02 3367.65,-4744.62 3405.86,-4737.86"/>
<polygon fill="black" stroke="black" points="3406.78,-4741.26 3416.01,-4736.07 3405.56,-4734.36 3406.78,-4741.26"/>
</g>
<!-- log_utils.get_logger -->
<g id="node87" class="node">
<title>log_utils.get_logger</title>
<g id="a_node87"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="3597.53,-4790.04 3440.53,-4790.04 3440.53,-4754.04 3597.53,-4754.04 3597.53,-4790.04"/>
<text text-anchor="middle" x="3519.03" y="-4768.34" font-family="Times,serif" font-size="14.00">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge101" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M3290.81,-4766.06C3333.45,-4765.1 3386.35,-4765.03 3430.37,-4765.86"/>
<polygon fill="black" stroke="black" points="3430.42,-4769.37 3440.49,-4766.07 3430.56,-4762.37 3430.42,-4769.37"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge102" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M3440.49,-4778C3397.96,-4778.97 3345.08,-4779.04 3300.95,-4778.22"/>
<polygon fill="black" stroke="black" points="3300.88,-4774.72 3290.81,-4778.02 3300.74,-4781.72 3300.88,-4774.72"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node88" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node88"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="3318.03,-4536.04 3105.03,-4536.04 3105.03,-4500.04 3318.03,-4500.04 3318.03,-4536.04"/>
<text text-anchor="middle" x="3211.53" y="-4514.34" font-family="Times,serif" font-size="14.00">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge103" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M3318.09,-4526.2C3329.34,-4530.63 3339.83,-4536.72 3348.53,-4545.04 3396.86,-4591.2 3336.29,-4644.79 3384.53,-4691.04 3390.35,-4696.62 3396.99,-4701.19 3404.13,-4704.92"/>
<polygon fill="black" stroke="black" points="3402.86,-4708.2 3413.41,-4709.22 3405.8,-4701.84 3402.86,-4708.2"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node90" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node90"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="3582.53,-2502.04 3455.53,-2502.04 3455.53,-2466.04 3582.53,-2466.04 3582.53,-2502.04"/>
<text text-anchor="middle" x="3519.03" y="-2480.34" font-family="Times,serif" font-size="14.00">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node91" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node91"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="3910.53,-4472.04 3744.53,-4472.04 3744.53,-4436.04 3910.53,-4436.04 3910.53,-4472.04"/>
<text text-anchor="middle" x="3827.53" y="-4450.34" font-family="Times,serif" font-size="14.00">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node92" class="node">
<title>lot_io.write_lots</title>
<g id="a_node92"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="3584.03,-4472.04 3454.03,-4472.04 3454.03,-4436.04 3584.03,-4436.04 3584.03,-4472.04"/>
<text text-anchor="middle" x="3519.03" y="-4450.34" font-family="Times,serif" font-size="14.00">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge109" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3584.07,-4457.15C3609.52,-4454.78 3636.69,-4447.01 3653.53,-4427.04 3740.79,-4323.52 3602.01,-3312.34 3689.53,-3209.04 3700.3,-3196.32 3715.17,-3188.49 3731.15,-3183.83"/>
<polygon fill="black" stroke="black" points="3732.36,-3187.14 3741.22,-3181.33 3730.67,-3180.35 3732.36,-3187.14"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge107" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3584.16,-4450.79C3607.46,-4447.19 3633.07,-4440.24 3653.53,-4427.04 3676.54,-4412.19 3667.71,-4393.57 3689.53,-4377.04 3708.25,-4362.85 3731.4,-4352.38 3753.3,-4344.8"/>
<polygon fill="black" stroke="black" points="3754.53,-4348.08 3762.93,-4341.62 3752.33,-4341.43 3754.53,-4348.08"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge106" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M3584.25,-4443.08C3700.56,-4422.74 3936.78,-4378.95 3965.53,-4354.04 4073.64,-4260.37 4102.8,-4077.09 4110.18,-4006.6"/>
<polygon fill="black" stroke="black" points="4113.7,-4006.58 4111.19,-3996.29 4106.74,-4005.9 4113.7,-4006.58"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge108" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M3584.28,-4454.04C3627.71,-4454.04 3685.73,-4454.04 3734.1,-4454.04"/>
<polygon fill="black" stroke="black" points="3734.27,-4457.54 3744.27,-4454.04 3734.27,-4450.54 3734.27,-4457.54"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node93" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node93"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="3899.03,-3070.04 3756.03,-3070.04 3756.03,-3034.04 3899.03,-3034.04 3899.03,-3070.04"/>
<text text-anchor="middle" x="3827.53" y="-3048.34" font-family="Times,serif" font-size="14.00">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node94" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node94"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="4186.03,-2752.04 4041.03,-2752.04 4041.03,-2716.04 4186.03,-2716.04 4186.03,-2752.04"/>
<text text-anchor="middle" x="4113.53" y="-2730.34" font-family="Times,serif" font-size="14.00">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node95" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node95"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="3904.03,-2186.04 3751.03,-2186.04 3751.03,-2150.04 3904.03,-2150.04 3904.03,-2186.04"/>
<text text-anchor="middle" x="3827.53" y="-2164.34" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge110" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3904.25,-2169.86C3926.86,-2174.19 3949.79,-2182.99 3965.53,-2200.04 4001.83,-2239.33 3988.07,-2386.27 4001.53,-2438.04 4028.01,-2539.83 4077.05,-2655.11 4100.04,-2706.63"/>
<polygon fill="black" stroke="black" points="4096.85,-2708.08 4104.14,-2715.77 4103.24,-2705.22 4096.85,-2708.08"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node96" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node96"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="3300.53,-2107.04 3122.53,-2107.04 3122.53,-2071.04 3300.53,-2071.04 3300.53,-2107.04"/>
<text text-anchor="middle" x="3211.53" y="-2085.34" font-family="Times,serif" font-size="14.00">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node97" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node97"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="3592.03,-2242.04 3446.03,-2242.04 3446.03,-2206.04 3592.03,-2206.04 3592.03,-2242.04"/>
<text text-anchor="middle" x="3519.03" y="-2220.34" font-family="Times,serif" font-size="14.00">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node98" class="node">
<title>lot_io.get_lot</title>
<g id="a_node98"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="3573.03,-3644.04 3465.03,-3644.04 3465.03,-3608.04 3573.03,-3608.04 3573.03,-3644.04"/>
<text text-anchor="middle" x="3519.03" y="-3622.34" font-family="Times,serif" font-size="14.00">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge111" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3561.44,-3607.94C3588.7,-3595.18 3624.56,-3576.71 3653.53,-3556.04 3671.44,-3543.25 3671.03,-3533.96 3689.53,-3522.04 3711.08,-3508.15 3736.63,-3496.59 3759.81,-3487.64"/>
<polygon fill="black" stroke="black" points="3761.1,-3490.89 3769.23,-3484.09 3758.64,-3484.34 3761.1,-3490.89"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge112" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M3573.34,-3635.27C3679.25,-3652.27 3910.71,-3682.24 3965.53,-3630.04 4024.75,-3573.65 3975.33,-2972.49 4001.53,-2895.04 4019.61,-2841.6 4060.98,-2789.71 4087.79,-2759.87"/>
<polygon fill="black" stroke="black" points="4090.44,-2762.15 4094.6,-2752.41 4085.28,-2757.43 4090.44,-2762.15"/>
</g>
<!-- telegram_bot._t -->
<g id="node99" class="node">
<title>telegram_bot._t</title>
<g id="a_node99"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="2982.53,-5054.04 2854.53,-5054.04 2854.53,-5018.04 2982.53,-5018.04 2982.53,-5054.04"/>
<text text-anchor="middle" x="2918.53" y="-5032.34" font-family="Times,serif" font-size="14.00">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node100" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node100"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="3027.03,-5000.04 2810.03,-5000.04 2810.03,-4964.04 3027.03,-4964.04 3027.03,-5000.04"/>
<text text-anchor="middle" x="2918.53" y="-4978.34" font-family="Times,serif" font-size="14.00">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node101" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node101"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="3315.53,-4974.04 3107.53,-4974.04 3107.53,-4938.04 3315.53,-4938.04 3315.53,-4974.04"/>
<text text-anchor="middle" x="3211.53" y="-4952.34" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge113" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M3027.06,-4972.43C3049.91,-4970.39 3074.1,-4968.23 3097.16,-4966.17"/>
<polygon fill="black" stroke="black" points="3097.66,-4969.64 3107.31,-4965.26 3097.04,-4962.66 3097.66,-4969.64"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node102" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node102"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="3021.53,-4025.04 2815.53,-4025.04 2815.53,-3989.04 3021.53,-3989.04 3021.53,-4025.04"/>
<text text-anchor="middle" x="2918.53" y="-4003.34" font-family="Times,serif" font-size="14.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge114" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3021.7,-4011.7C3140.82,-4016.74 3343.66,-4024.04 3518.03,-4024.04 3518.03,-4024.04 3518.03,-4024.04 3828.53,-4024.04 3872.69,-4024.04 4193.52,-4035.46 4225.53,-4005.04 4318.86,-3916.35 4346.56,-2942.43 4350.89,-2762.52"/>
<polygon fill="black" stroke="black" points="4354.39,-2762.59 4351.13,-2752.51 4347.39,-2762.42 4354.39,-2762.59"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node103" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node103"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="3012.53,-3971.04 2824.53,-3971.04 2824.53,-3935.04 3012.53,-3935.04 3012.53,-3971.04"/>
<text text-anchor="middle" x="2918.53" y="-3949.34" font-family="Times,serif" font-size="14.00">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge115" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3012.57,-3963.46C3239.28,-3986.91 3812.83,-4033.97 3965.53,-3929.04 4168.72,-3789.41 4145.1,-3672.08 4225.53,-3439.04 4312.93,-3185.82 4342.46,-2859.48 4349.63,-2762.44"/>
<polygon fill="black" stroke="black" points="4353.13,-2762.49 4350.36,-2752.26 4346.15,-2761.99 4353.13,-2762.49"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node104" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="3307.03,-3254.04 3116.03,-3254.04 3116.03,-3218.04 3307.03,-3218.04 3307.03,-3254.04"/>
<text text-anchor="middle" x="3211.53" y="-3232.34" font-family="Times,serif" font-size="14.00">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node105" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node105"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="3640.03,-3308.04 3398.03,-3308.04 3398.03,-3272.04 3640.03,-3272.04 3640.03,-3308.04"/>
<text text-anchor="middle" x="3519.03" y="-3286.34" font-family="Times,serif" font-size="14.00">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node106" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node106"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="3947.03,-3308.04 3708.03,-3308.04 3708.03,-3272.04 3947.03,-3272.04 3947.03,-3308.04"/>
<text text-anchor="middle" x="3827.53" y="-3286.34" font-family="Times,serif" font-size="14.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge116" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M3640.29,-3290.04C3659.13,-3290.04 3678.66,-3290.04 3697.68,-3290.04"/>
<polygon fill="black" stroke="black" points="3697.88,-3293.54 3707.88,-3290.04 3697.88,-3286.54 3697.88,-3293.54"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge202" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3947.1,-3274.74C3953.66,-3271.47 3959.87,-3267.6 3965.53,-3263.04 4066.74,-3181.33 4099.73,-3016.59 4109.16,-2950.46"/>
<polygon fill="black" stroke="black" points="4112.66,-2950.74 4110.53,-2940.37 4105.72,-2949.81 4112.66,-2950.74"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node107" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="3328.03,-4222.04 3095.03,-4222.04 3095.03,-4186.04 3328.03,-4186.04 3328.03,-4222.04"/>
<text text-anchor="middle" x="3211.53" y="-4200.34" font-family="Times,serif" font-size="14.00">telegram_bot._should_suggest</text>
</g>
<!-- similar_utils._cos_sim -->
<g id="node108" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node108"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="3604.53,-4196.04 3433.53,-4196.04 3433.53,-4160.04 3604.53,-4160.04 3604.53,-4196.04"/>
<text text-anchor="middle" x="3519.03" y="-4174.34" font-family="Times,serif" font-size="14.00">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge117" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3328.46,-4194.17C3359.7,-4191.51 3393.13,-4188.67 3423.08,-4186.12"/>
<polygon fill="black" stroke="black" points="3423.43,-4189.6 3433.09,-4185.27 3422.83,-4182.63 3423.43,-4189.6"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node109" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="3038.53,-4222.04 2798.53,-4222.04 2798.53,-4186.04 3038.53,-4186.04 3038.53,-4222.04"/>
<text text-anchor="middle" x="2918.53" y="-4200.34" font-family="Times,serif" font-size="14.00">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge118" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2978.33,-4222.11C3001.02,-4232.19 3024.78,-4247.23 3038.53,-4269.04 3116.89,-4393.28 2978.27,-4818.09 3074.53,-4929.04 3081.16,-4936.67 3089.27,-4942.53 3098.2,-4946.99"/>
<polygon fill="black" stroke="black" points="3096.82,-4950.2 3107.38,-4950.99 3099.62,-4943.79 3096.82,-4950.2"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge119" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M3038.73,-4204.04C3053.78,-4204.04 3069.22,-4204.04 3084.37,-4204.04"/>
<polygon fill="black" stroke="black" points="3084.81,-4207.54 3094.81,-4204.04 3084.81,-4200.54 3084.81,-4207.54"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node110" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node110"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="3021.53,-3917.04 2815.53,-3917.04 2815.53,-3881.04 3021.53,-3881.04 3021.53,-3917.04"/>
<text text-anchor="middle" x="2918.53" y="-3895.34" font-family="Times,serif" font-size="14.00">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge120" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M3021.67,-3914.73C3118.71,-3923.42 3262.26,-3919.13 3348.53,-3837.04 3408.9,-3779.6 3325.8,-3712.15 3384.53,-3653.04 3402.77,-3634.68 3429.81,-3627.09 3454.79,-3624.4"/>
<polygon fill="black" stroke="black" points="3455.29,-3627.87 3464.97,-3623.56 3454.72,-3620.9 3455.29,-3627.87"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge121" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M3021.62,-3911.73C3027.98,-3915.54 3033.73,-3920.24 3038.53,-3926.04 3109.67,-4011.92 3002.24,-4844.13 3074.53,-4929.04 3081.09,-4936.73 3089.15,-4942.63 3098.05,-4947.12"/>
<polygon fill="black" stroke="black" points="3096.65,-4950.32 3107.21,-4951.14 3099.46,-4943.91 3096.65,-4950.32"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node111" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node111"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="2746.03,-4012.04 2556.03,-4012.04 2556.03,-3976.04 2746.03,-3976.04 2746.03,-4012.04"/>
<text text-anchor="middle" x="2651.03" y="-3990.34" font-family="Times,serif" font-size="14.00">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge122" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2746.38,-3998.66C2765.42,-3999.59 2785.61,-4000.58 2805.2,-4001.54"/>
<polygon fill="black" stroke="black" points="2805.22,-4005.04 2815.37,-4002.03 2805.56,-3998.05 2805.22,-4005.04"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node112" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node112"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="2744.53,-5027.04 2557.53,-5027.04 2557.53,-4991.04 2744.53,-4991.04 2744.53,-5027.04"/>
<text text-anchor="middle" x="2651.03" y="-5005.34" font-family="Times,serif" font-size="14.00">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge123" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2744.89,-5018.48C2777.4,-5021.79 2813.43,-5025.45 2844.13,-5028.57"/>
<polygon fill="black" stroke="black" points="2844.02,-5032.08 2854.33,-5029.61 2844.73,-5025.12 2844.02,-5032.08"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge124" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2744.89,-4999.59C2762.55,-4997.8 2781.26,-4995.89 2799.58,-4994.03"/>
<polygon fill="black" stroke="black" points="2800.12,-4997.5 2809.71,-4993 2799.41,-4990.53 2800.12,-4997.5"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node113" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node113"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="2742.53,-5081.04 2559.53,-5081.04 2559.53,-5045.04 2742.53,-5045.04 2742.53,-5081.04"/>
<text text-anchor="middle" x="2651.03" y="-5059.34" font-family="Times,serif" font-size="14.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge125" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2742.66,-5053.82C2775.87,-5050.44 2813,-5046.67 2844.48,-5043.47"/>
<polygon fill="black" stroke="black" points="2844.9,-5046.94 2854.49,-5042.45 2844.19,-5039.98 2844.9,-5046.94"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge126" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2740.03,-5045.02C2747.78,-5042.39 2755.39,-5039.41 2762.53,-5036.04 2780.61,-5027.49 2780.38,-5017.43 2798.53,-5009.04 2802.87,-5007.03 2807.37,-5005.17 2811.96,-5003.44"/>
<polygon fill="black" stroke="black" points="2813.24,-5006.7 2821.51,-5000.08 2810.92,-5000.1 2813.24,-5006.7"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge127" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2742.62,-5076.86C2822.21,-5085.78 2940.3,-5091.1 3038.53,-5063.04 3094.41,-5047.08 3149.81,-5007.14 3182.07,-4980.83"/>
<polygon fill="black" stroke="black" points="3184.69,-4983.21 3190.15,-4974.13 3180.22,-4977.82 3184.69,-4983.21"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node114" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node114"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="2756.53,-4973.04 2545.53,-4973.04 2545.53,-4937.04 2756.53,-4937.04 2756.53,-4973.04"/>
<text text-anchor="middle" x="2651.03" y="-4951.34" font-family="Times,serif" font-size="14.00">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge128" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M2740.03,-4973.05C2747.78,-4975.68 2755.39,-4978.66 2762.53,-4982.04 2780.61,-4990.58 2780.38,-5000.64 2798.53,-5009.04 2812.81,-5015.64 2828.81,-5020.68 2844.34,-5024.52"/>
<polygon fill="black" stroke="black" points="2843.92,-5028.01 2854.45,-5026.87 2845.5,-5021.2 2843.92,-5028.01"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge129" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M2756.58,-4965.67C2770.85,-4967.12 2785.57,-4968.62 2800.05,-4970.09"/>
<polygon fill="black" stroke="black" points="2799.72,-4973.57 2810.02,-4971.1 2800.43,-4966.61 2799.72,-4973.57"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge130" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M2756.61,-4954.87C2834.37,-4954.79 2943.08,-4954.76 3038.53,-4955.04 3057.48,-4955.09 3077.59,-4955.18 3097.14,-4955.28"/>
<polygon fill="black" stroke="black" points="3097.28,-4958.78 3107.3,-4955.34 3097.32,-4951.78 3097.28,-4958.78"/>
</g>
<!-- telegram_bot.main -->
<g id="node115" class="node">
<title>telegram_bot.main</title>
<g id="a_node115"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="2726.53,-3944.04 2575.53,-3944.04 2575.53,-3908.04 2726.53,-3908.04 2726.53,-3944.04"/>
<text text-anchor="middle" x="2651.03" y="-3922.34" font-family="Times,serif" font-size="14.00">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge131" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M2700.49,-3944.07C2741.19,-3959.19 2793.51,-3978.55 2798.53,-3980.04 2806.11,-3982.28 2814.01,-3984.45 2821.98,-3986.51"/>
<polygon fill="black" stroke="black" points="2821.16,-3989.91 2831.71,-3988.97 2822.87,-3983.12 2821.16,-3989.91"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge132" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M2726.69,-3933.63C2753.86,-3936.39 2785.07,-3939.57 2814.27,-3942.54"/>
<polygon fill="black" stroke="black" points="2814.2,-3946.05 2824.51,-3943.58 2814.91,-3939.08 2814.2,-3946.05"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge133" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M2653.66,-3907.9C2662.41,-3814.84 2706.78,-3392.12 2798.53,-3306.04 2880.13,-3229.48 3012.93,-3219.76 3105.64,-3224.13"/>
<polygon fill="black" stroke="black" points="3105.71,-3227.64 3115.89,-3224.68 3106.09,-3220.65 3105.71,-3227.64"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge134" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M2658.51,-3907.81C2689.24,-3824.27 2829.23,-3476.1 3074.53,-3334.04 3169.18,-3279.23 3294.51,-3271.53 3387.8,-3275.63"/>
<polygon fill="black" stroke="black" points="3387.7,-3279.13 3397.86,-3276.12 3388.04,-3272.14 3387.7,-3279.13"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge135" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M2726.65,-3941.56C2740.27,-3947.5 2753.12,-3955.7 2762.53,-3967.04 2823,-4039.91 2733.38,-4108.32 2798.53,-4177.04 2799.32,-4177.86 2800.12,-4178.67 2800.94,-4179.45"/>
<polygon fill="black" stroke="black" points="2798.85,-4182.26 2808.8,-4185.9 2803.29,-4176.85 2798.85,-4182.26"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge136" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M2726.69,-3918.44C2751.04,-3915.97 2778.63,-3913.16 2805.11,-3910.47"/>
<polygon fill="black" stroke="black" points="2805.61,-3913.94 2815.2,-3909.44 2804.9,-3906.97 2805.61,-3913.94"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge138" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4193.71,-1182.33C4205.88,-1186.67 4217.16,-1193.24 4225.53,-1203.04 4327.08,-1321.87 4348.31,-2507.06 4351.16,-2705.82"/>
<polygon fill="black" stroke="black" points="4347.67,-2706.08 4351.3,-2716.03 4354.66,-2705.98 4347.67,-2706.08"/>
</g>
<!-- notes_utils.parse_md -->
<g id="node118" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node118"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="3911.03,-647.04 3744.03,-647.04 3744.03,-611.04 3911.03,-611.04 3911.03,-647.04"/>
<text text-anchor="middle" x="3827.53" y="-625.34" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge139" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M3858.02,-647.04C3888.9,-667.3 3936.83,-702.94 3965.53,-745.04 4056.83,-878.93 4096.17,-1074.72 4108.22,-1147.45"/>
<polygon fill="black" stroke="black" points="4104.82,-1148.34 4109.87,-1157.66 4111.73,-1147.23 4104.82,-1148.34"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node121" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node121"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="3639.53,-1766.04 3398.53,-1766.04 3398.53,-1730.04 3639.53,-1730.04 3639.53,-1766.04"/>
<text text-anchor="middle" x="3519.03" y="-1744.34" font-family="Times,serif" font-size="14.00">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge146" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3639.85,-1730.05C3669.74,-1725.57 3701.41,-1720.82 3730.01,-1716.52"/>
<polygon fill="black" stroke="black" points="3730.62,-1719.97 3739.99,-1715.02 3729.58,-1713.05 3730.62,-1719.97"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node122" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node122"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="3623.53,-612.04 3414.53,-612.04 3414.53,-576.04 3623.53,-576.04 3623.53,-612.04"/>
<text text-anchor="middle" x="3519.03" y="-590.34" font-family="Times,serif" font-size="14.00">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge147" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M3623.8,-605.89C3659.36,-609.95 3698.91,-614.46 3733.57,-618.42"/>
<polygon fill="black" stroke="black" points="3733.34,-621.92 3743.68,-619.58 3734.14,-614.96 3733.34,-621.92"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node123" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node123"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="259,-198.04 0,-198.04 0,-162.04 259,-162.04 259,-198.04"/>
<text text-anchor="middle" x="129.5" y="-176.34" font-family="Times,serif" font-size="14.00">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;caption:cli -->
<!-- chop.process_message -->
<g id="node124" class="node">
<title>chop.process_message</title>
<g id="a_node124"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="3301.03,-2552.04 3122.03,-2552.04 3122.03,-2516.04 3301.03,-2516.04 3301.03,-2552.04"/>
<text text-anchor="middle" x="3211.53" y="-2530.34" font-family="Times,serif" font-size="14.00">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge157" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3225.23,-2515.86C3253.1,-2474.92 3319.45,-2371.41 3348.53,-2274.04 3371.8,-2196.15 3328.8,-1969.21 3384.53,-1910.04 3467.54,-1821.9 3566.78,-1951.49 3653.53,-1867.04 3715.74,-1806.47 3664.97,-1758.31 3689.53,-1675.04 3724.32,-1557.06 3786.01,-1423.64 3813.12,-1367.37"/>
<polygon fill="black" stroke="black" points="3816.4,-1368.61 3817.61,-1358.09 3810.1,-1365.56 3816.4,-1368.61"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge150" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3225.79,-2516.02C3254.77,-2475.38 3323.24,-2372.47 3348.53,-2274.04 3372.14,-2182.17 3323.7,-639.82 3384.53,-567.04 3385.04,-566.42 3385.56,-565.82 3386.1,-565.23"/>
<polygon fill="black" stroke="black" points="3388.67,-567.62 3393.5,-558.19 3383.84,-562.55 3388.67,-567.62"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge153" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3225.69,-2515.99C3254.48,-2475.31 3322.57,-2372.29 3348.53,-2274.04 3363.24,-2218.36 3345.99,-1280.83 3384.53,-1238.04 3384.91,-1237.62 3619.2,-1204.92 3746.47,-1187.19"/>
<polygon fill="black" stroke="black" points="3747.15,-1190.63 3756.57,-1185.78 3746.18,-1183.69 3747.15,-1190.63"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge152" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M3248.36,-2552.1C3282.65,-2568.84 3336.16,-2593.58 3384.53,-2610.04 3417.99,-2621.42 3620.69,-2669.67 3739.65,-2697.68"/>
<polygon fill="black" stroke="black" points="3738.94,-2701.11 3749.47,-2699.99 3740.54,-2694.29 3738.94,-2701.11"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge151" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M3301.31,-2519.51C3346.97,-2512.03 3401.95,-2503.04 3445.11,-2495.97"/>
<polygon fill="black" stroke="black" points="3445.94,-2499.38 3455.25,-2494.31 3444.81,-2492.47 3445.94,-2499.38"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node125" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node125"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="3935.03,-2640.04 3720.03,-2640.04 3720.03,-2604.04 3935.03,-2604.04 3935.03,-2640.04"/>
<text text-anchor="middle" x="3827.53" y="-2618.34" font-family="Times,serif" font-size="14.00">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge154" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M3268.9,-2552.11C3302.21,-2562.12 3345.39,-2573.93 3384.53,-2581.04 3493.87,-2600.89 3620.26,-2611.39 3709.81,-2616.77"/>
<polygon fill="black" stroke="black" points="3709.81,-2620.27 3720,-2617.37 3710.22,-2613.28 3709.81,-2620.27"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node126" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node126"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="3936.03,-2571.04 3719.03,-2571.04 3719.03,-2535.04 3936.03,-2535.04 3936.03,-2571.04"/>
<text text-anchor="middle" x="3827.53" y="-2549.34" font-family="Times,serif" font-size="14.00">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge155" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M3295.67,-2552.11C3323.75,-2557.38 3355.37,-2562.43 3384.53,-2565.04 3494.04,-2574.83 3619.37,-2569.91 3708.54,-2563.67"/>
<polygon fill="black" stroke="black" points="3708.96,-2567.15 3718.69,-2562.94 3708.46,-2560.17 3708.96,-2567.15"/>
</g>
<!-- embed.embed_file -->
<g id="node127" class="node">
<title>embed.embed_file</title>
<g id="a_node127"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="3592.03,-3070.04 3446.03,-3070.04 3446.03,-3034.04 3592.03,-3034.04 3592.03,-3070.04"/>
<text text-anchor="middle" x="3519.03" y="-3048.34" font-family="Times,serif" font-size="14.00">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge156" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M3221.1,-2552.18C3244.3,-2601.89 3309.27,-2744.85 3348.53,-2869.04 3369.98,-2936.88 3333.54,-2975.41 3384.53,-3025.04 3398.39,-3038.52 3417.01,-3046.14 3435.93,-3050.28"/>
<polygon fill="black" stroke="black" points="3435.36,-3053.73 3445.84,-3052.13 3436.65,-3046.85 3435.36,-3053.73"/>
</g>
<!-- caption_io.read_caption -->
<g id="node128" class="node">
<title>caption_io.read_caption</title>
<g id="a_node128"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="3920.03,-2472.04 3735.03,-2472.04 3735.03,-2436.04 3920.03,-2436.04 3920.03,-2472.04"/>
<text text-anchor="middle" x="3827.53" y="-2450.34" font-family="Times,serif" font-size="14.00">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge158" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3242.59,-2515.94C3275.92,-2497 3331.94,-2468.46 3384.53,-2457.04 3499.1,-2432.16 3634.33,-2435.9 3724.77,-2442.97"/>
<polygon fill="black" stroke="black" points="3724.5,-2446.46 3734.75,-2443.78 3725.06,-2439.48 3724.5,-2446.46"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge211" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3592.32,-3062.05C3612.52,-3066.08 3634.23,-3071.59 3653.53,-3079.04 3705.62,-3099.14 3760.06,-3134.25 3793.63,-3157.82"/>
<polygon fill="black" stroke="black" points="3791.94,-3160.91 3802.12,-3163.84 3795.99,-3155.2 3791.94,-3160.91"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge209" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3592.26,-3051.12C3614.72,-3054.52 3637.72,-3062.42 3653.53,-3079.04 3727.29,-3156.53 3643.31,-3220.56 3689.53,-3317.04 3714.24,-3368.6 3762.88,-3414.81 3795.05,-3441.64"/>
<polygon fill="black" stroke="black" points="3792.9,-3444.4 3802.85,-3448.04 3797.34,-3438.99 3792.9,-3444.4"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge210" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M3592.28,-3052.04C3638.28,-3052.04 3697.95,-3052.04 3745.55,-3052.04"/>
<polygon fill="black" stroke="black" points="3745.83,-3055.54 3755.83,-3052.04 3745.83,-3048.54 3745.83,-3055.54"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge217" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3890.05,-2472.17C3917.35,-2483.35 3947.36,-2500.55 3965.53,-2526.04 4026.88,-2612.07 3962.55,-2662.83 4001.53,-2761.04 4022.37,-2813.53 4063,-2865.79 4088.9,-2895.95"/>
<polygon fill="black" stroke="black" points="4086.57,-2898.61 4095.78,-2903.85 4091.85,-2894.01 4086.57,-2898.61"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge219" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3920.18,-2449.18C3936.64,-2444.81 3952.63,-2437.87 3965.53,-2427.04 4022.43,-2379.25 4084.69,-2154.33 4105.4,-2074.35"/>
<polygon fill="black" stroke="black" points="4108.84,-2075.04 4107.93,-2064.48 4102.06,-2073.3 4108.84,-2075.04"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge220" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3920.22,-2452.86C3937.48,-2448.36 3953.78,-2440.43 3965.53,-2427.04 4006.65,-2380.17 3993.08,-1928.81 4001.53,-1867.04 4027.91,-1674.16 4084.8,-1446.42 4105.13,-1368.11"/>
<polygon fill="black" stroke="black" points="4108.61,-1368.63 4107.75,-1358.08 4101.84,-1366.87 4108.61,-1368.63"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge216" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M3920.23,-2453.26C3937.6,-2448.76 3953.94,-2440.72 3965.53,-2427.04 4053.47,-2323.22 3915.89,-1308.76 4001.53,-1203.04 4007.65,-1195.49 4015.49,-1189.84 4024.16,-1185.64"/>
<polygon fill="black" stroke="black" points="4025.58,-1188.84 4033.48,-1181.77 4022.9,-1182.38 4025.58,-1188.84"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge218" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M3891.88,-2472.07C3919.06,-2483.15 3948.45,-2500.29 3965.53,-2526.04 4017.7,-2604.64 3986.49,-2855.9 4001.53,-2949.04 4028.54,-3116.26 4083.43,-3312.44 4104.26,-3384.07"/>
<polygon fill="black" stroke="black" points="4100.92,-3385.1 4107.08,-3393.71 4107.64,-3383.13 4100.92,-3385.1"/>
</g>
<!-- chop.main -->
<g id="node129" class="node">
<title>chop.main</title>
<g id="a_node129"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="2963.53,-2909.04 2873.53,-2909.04 2873.53,-2873.04 2963.53,-2873.04 2963.53,-2909.04"/>
<text text-anchor="middle" x="2918.53" y="-2887.34" font-family="Times,serif" font-size="14.00">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge159" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M2963.59,-2883.53C2987.89,-2877.55 3017.34,-2867.07 3038.53,-2849.04 3132.95,-2768.67 3184.51,-2622.92 3202.79,-2561.99"/>
<polygon fill="black" stroke="black" points="3206.18,-2562.88 3205.63,-2552.3 3199.46,-2560.91 3206.18,-2562.88"/>
</g>
<!-- build_site._load_ontology -->
<g id="node130" class="node">
<title>build_site._load_ontology</title>
<g id="a_node130"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="3309.03,-3828.04 3114.03,-3828.04 3114.03,-3792.04 3309.03,-3792.04 3309.03,-3828.04"/>
<text text-anchor="middle" x="3211.53" y="-3806.34" font-family="Times,serif" font-size="14.00">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge160" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3309.1,-3827.9C3333.62,-3831.69 3359.97,-3835.12 3384.53,-3837.04 3448.89,-3842.06 3918.11,-3880.83 3965.53,-3837.04 4002.54,-3802.86 3993.63,-3434.8 4001.53,-3385.04 4028.08,-3217.74 4083.25,-3021.61 4104.21,-2950"/>
<polygon fill="black" stroke="black" points="4107.58,-2950.94 4107.05,-2940.35 4100.87,-2948.96 4107.58,-2950.94"/>
</g>
<!-- build_site._compile_locale -->
<g id="node131" class="node">
<title>build_site._compile_locale</title>
<g id="a_node131"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="4213.53,-4692.04 4013.53,-4692.04 4013.53,-4656.04 4213.53,-4656.04 4213.53,-4692.04"/>
<text text-anchor="middle" x="4113.53" y="-4670.34" font-family="Times,serif" font-size="14.00">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node132" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node132"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="3921.03,-4692.04 3734.03,-4692.04 3734.03,-4656.04 3921.03,-4656.04 3921.03,-4692.04"/>
<text text-anchor="middle" x="3827.53" y="-4670.34" font-family="Times,serif" font-size="14.00">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge161" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M3921.13,-4674.04C3947.25,-4674.04 3975.92,-4674.04 4002.94,-4674.04"/>
<polygon fill="black" stroke="black" points="4003.21,-4677.54 4013.21,-4674.04 4003.21,-4670.54 4003.21,-4677.54"/>
</g>
<!-- build_site._iter_lots -->
<g id="node133" class="node">
<title>build_site._iter_lots</title>
<g id="a_node133"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="3289.03,-2199.04 3134.03,-2199.04 3134.03,-2163.04 3289.03,-2163.04 3289.03,-2199.04"/>
<text text-anchor="middle" x="3211.53" y="-2177.34" font-family="Times,serif" font-size="14.00">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge167" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3289.22,-2179.28C3311.34,-2174.89 3333.52,-2166.04 3348.53,-2149.04 3447.93,-2036.44 3280.13,-1921 3384.53,-1813.04 3426.5,-1769.64 3595.34,-1791.13 3653.53,-1775.04 3698.77,-1762.53 3747.83,-1741 3782.12,-1724.56"/>
<polygon fill="black" stroke="black" points="3783.91,-1727.58 3791.38,-1720.06 3780.86,-1721.28 3783.91,-1727.58"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge162" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3285.59,-2162.96C3309.74,-2153.18 3334.11,-2138.34 3348.53,-2116.04 3395.28,-2043.76 3329.26,-633.03 3384.53,-567.04 3385.04,-566.42 3385.57,-565.82 3386.1,-565.24"/>
<polygon fill="black" stroke="black" points="3388.67,-567.62 3393.51,-558.19 3383.85,-562.55 3388.67,-567.62"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge166" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3285.03,-2162.98C3309.29,-2153.18 3333.86,-2138.33 3348.53,-2116.04 3404.53,-2030.96 3313.05,-1272.6 3384.53,-1200.04 3409.29,-1174.9 3625.99,-1173.48 3746.5,-1174.68"/>
<polygon fill="black" stroke="black" points="3746.75,-1178.18 3756.79,-1174.79 3746.83,-1171.18 3746.75,-1178.18"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge164" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3289.26,-2186.05C3311.8,-2191.49 3334.22,-2201.61 3348.53,-2220.04 3431.87,-2327.31 3289.68,-3344.8 3384.53,-3442.04 3409.76,-3467.89 3636.35,-3468.72 3754.92,-3467.33"/>
<polygon fill="black" stroke="black" points="3755.05,-3470.83 3765,-3467.2 3754.96,-3463.83 3755.05,-3470.83"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge163" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M3289.23,-2178.27C3323.62,-2177.04 3364.93,-2175.55 3402.92,-2174.18"/>
<polygon fill="black" stroke="black" points="3403.15,-2177.68 3413.02,-2173.82 3402.9,-2170.68 3403.15,-2177.68"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge165" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M3289.23,-2191.83C3333.92,-2198.12 3390.28,-2206.06 3435.88,-2212.47"/>
<polygon fill="black" stroke="black" points="3435.64,-2215.97 3446.03,-2213.9 3436.62,-2209.04 3435.64,-2215.97"/>
</g>
<!-- build_site._copy_images -->
<g id="node134" class="node">
<title>build_site._copy_images</title>
<g id="a_node134"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="3613.03,-3958.04 3425.03,-3958.04 3425.03,-3922.04 3613.03,-3922.04 3613.03,-3958.04"/>
<text text-anchor="middle" x="3519.03" y="-3936.34" font-family="Times,serif" font-size="14.00">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node135" class="node">
<title>build_site._copy_static</title>
<g id="a_node135"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="3006.53,-4536.04 2830.53,-4536.04 2830.53,-4500.04 3006.53,-4500.04 3006.53,-4536.04"/>
<text text-anchor="middle" x="2918.53" y="-4514.34" font-family="Times,serif" font-size="14.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._convert_prices -->
<g id="node136" class="node">
<title>build_site._convert_prices</title>
<g id="a_node136"><a xlink:title="Add `_display_price` and `_price_class` fields converted to `cur`.">
<polygon fill="none" stroke="black" points="3312.03,-4444.04 3111.03,-4444.04 3111.03,-4408.04 3312.03,-4408.04 3312.03,-4444.04"/>
<text text-anchor="middle" x="3211.53" y="-4422.34" font-family="Times,serif" font-size="14.00">build_site._convert_prices</text>
</a>
</g>
</g>
<!-- price_utils.canonical_currency -->
<g id="node137" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node137"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="3635.03,-4418.04 3403.03,-4418.04 3403.03,-4382.04 3635.03,-4382.04 3635.03,-4418.04"/>
<text text-anchor="middle" x="3519.03" y="-4396.34" font-family="Times,serif" font-size="14.00">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- build_site._convert_prices&#45;&gt;price_utils.canonical_currency -->
<g id="edge168" class="edge">
<title>build_site._convert_prices&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M3312.14,-4417.56C3337.85,-4415.37 3365.85,-4412.99 3392.68,-4410.7"/>
<polygon fill="black" stroke="black" points="3393.24,-4414.17 3402.9,-4409.83 3392.64,-4407.2 3393.24,-4414.17"/>
</g>
<!-- build_site._load_state -->
<g id="node138" class="node">
<title>build_site._load_state</title>
<g id="a_node138"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="3003.53,-3841.04 2833.53,-3841.04 2833.53,-3805.04 3003.53,-3805.04 3003.53,-3841.04"/>
<text text-anchor="middle" x="2918.53" y="-3819.34" font-family="Times,serif" font-size="14.00">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge172" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M2919.49,-3804.76C2920.42,-3735.65 2933.8,-3488.49 3074.53,-3377.04 3125.24,-3336.88 3589.39,-3325.36 3653.53,-3317.04 3670.54,-3314.83 3688.46,-3312.28 3706.05,-3309.66"/>
<polygon fill="black" stroke="black" points="3707,-3313.05 3716.37,-3308.1 3705.96,-3306.13 3707,-3313.05"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge169" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M3003.7,-3819.28C3034.96,-3817.88 3070.85,-3816.28 3103.85,-3814.8"/>
<polygon fill="black" stroke="black" points="3104.16,-3818.29 3114,-3814.35 3103.85,-3811.3 3104.16,-3818.29"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge170" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M2923.66,-3804.94C2941.27,-3726.98 3010.36,-3411.91 3038.53,-3149.04 3044.03,-3097.68 3042.66,-2260.68 3074.53,-2220.04 3086.85,-2204.33 3105.06,-2194.66 3124.17,-2188.79"/>
<polygon fill="black" stroke="black" points="3125.18,-2192.14 3133.91,-2186.12 3123.34,-2185.39 3125.18,-2192.14"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge171" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M2976.02,-3841.06C2996.6,-3848.95 3019.48,-3859.33 3038.53,-3872.04 3057.36,-3884.59 3053.95,-3898.63 3074.53,-3908.04 3182.75,-3957.5 3321.43,-3959 3414.65,-3952.36"/>
<polygon fill="black" stroke="black" points="3414.95,-3955.85 3424.66,-3951.61 3414.43,-3948.87 3414.95,-3955.85"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node139" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node139"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="3928.53,-3920.04 3726.53,-3920.04 3726.53,-3884.04 3928.53,-3884.04 3928.53,-3920.04"/>
<text text-anchor="middle" x="3827.53" y="-3898.34" font-family="Times,serif" font-size="14.00">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge173" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M3003.89,-3832.29C3097,-3842.34 3251.35,-3858.49 3384.53,-3870.04 3497.45,-3879.83 3626.79,-3888.95 3716.25,-3894.93"/>
<polygon fill="black" stroke="black" points="3716.2,-3898.43 3726.41,-3895.6 3716.66,-3891.45 3716.2,-3898.43"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge203" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3928.7,-3894.46C3942.79,-3889.23 3955.77,-3881.45 3965.53,-3870.04 4000.66,-3828.98 3993.21,-3438.43 4001.53,-3385.04 4027.63,-3217.67 4083.07,-3021.58 4104.16,-2949.99"/>
<polygon fill="black" stroke="black" points="4107.53,-2950.93 4107.01,-2940.35 4100.81,-2948.94 4107.53,-2950.93"/>
</g>
<!-- build_site._categorise -->
<g id="node140" class="node">
<title>build_site._categorise</title>
<g id="a_node140"><a xlink:title="Return category info and recent lot list.">
<polygon fill="none" stroke="black" points="3604.53,-4364.04 3433.53,-4364.04 3433.53,-4328.04 3604.53,-4328.04 3604.53,-4364.04"/>
<text text-anchor="middle" x="3519.03" y="-4342.34" font-family="Times,serif" font-size="14.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge174" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3604.6,-4340.79C3650.95,-4337.92 3707.88,-4334.39 3752.48,-4331.63"/>
<polygon fill="black" stroke="black" points="3752.9,-4335.11 3762.66,-4331 3752.46,-4328.12 3752.9,-4335.11"/>
</g>
<!-- build_site._render_site -->
<g id="node141" class="node">
<title>build_site._render_site</title>
<g id="a_node141"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.">
<polygon fill="none" stroke="black" points="3300.53,-4276.04 3122.53,-4276.04 3122.53,-4240.04 3300.53,-4240.04 3300.53,-4276.04"/>
<text text-anchor="middle" x="3211.53" y="-4254.34" font-family="Times,serif" font-size="14.00">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge176" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3300.85,-4261.81C3390.52,-4263.88 3532.95,-4262.29 3653.53,-4239.04 3918.12,-4188.02 4059.34,-4250.15 4225.53,-4038.04 4307.07,-3933.97 4344.43,-2943.35 4350.6,-2762.35"/>
<polygon fill="black" stroke="black" points="4354.1,-2762.4 4350.94,-2752.29 4347.11,-2762.16 4354.1,-2762.4"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge175" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M3300.83,-4267.96C3422.43,-4281.62 3639.25,-4305.99 3752.71,-4318.74"/>
<polygon fill="black" stroke="black" points="3752.36,-4322.22 3762.69,-4319.86 3753.15,-4315.27 3752.36,-4322.22"/>
</g>
<!-- build_site.build_page -->
<g id="node142" class="node">
<title>build_site.build_page</title>
<g id="a_node142"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="3602.53,-2870.04 3435.53,-2870.04 3435.53,-2834.04 3602.53,-2834.04 3602.53,-2870.04"/>
<text text-anchor="middle" x="3519.03" y="-2848.34" font-family="Times,serif" font-size="14.00">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge177" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M3300.79,-4257.84C3319.07,-4253.5 3336.43,-4245.39 3348.53,-4231.04 3445.42,-4116.17 3287.84,-2994.08 3384.53,-2879.04 3395.11,-2866.44 3409.8,-2858.7 3425.59,-2854.1"/>
<polygon fill="black" stroke="black" points="3426.67,-2857.44 3435.53,-2851.63 3424.98,-2850.65 3426.67,-2857.44"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node143" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node143"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="3935.03,-3621.04 3720.03,-3621.04 3720.03,-3585.04 3935.03,-3585.04 3935.03,-3621.04"/>
<text text-anchor="middle" x="3827.53" y="-3599.34" font-family="Times,serif" font-size="14.00">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge178" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M3300.73,-4253.36C3422.42,-4246.04 3629.61,-4230.04 3653.53,-4205.04 3726.87,-4128.39 3643.26,-3824.49 3689.53,-3729.04 3710.95,-3684.86 3755.19,-3648.74 3787.63,-3626.67"/>
<polygon fill="black" stroke="black" points="3789.63,-3629.55 3796.02,-3621.1 3785.75,-3623.72 3789.63,-3629.55"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge180" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3590.58,-2833.99C3614.62,-2824.16 3639.06,-2809.29 3653.53,-2787.04 3714.87,-2692.71 3629.92,-1870.46 3689.53,-1775.04 3704.09,-1751.73 3728.79,-1735.41 3753.24,-1724.2"/>
<polygon fill="black" stroke="black" points="3754.79,-1727.34 3762.58,-1720.16 3752.01,-1720.92 3754.79,-1727.34"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge179" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3591.06,-2833.93C3615,-2824.12 3639.25,-2809.27 3653.53,-2787.04 3742.08,-2649.2 3624.99,-1463.62 3689.53,-1313.04 3710.21,-1264.79 3756.59,-1224.46 3789.65,-1200.32"/>
<polygon fill="black" stroke="black" points="3792.06,-1202.9 3798.16,-1194.24 3787.99,-1197.2 3792.06,-1202.9"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge183" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3587.3,-2834.02C3611.85,-2824.1 3637.49,-2809.16 3653.53,-2787.04 3722.27,-2692.24 3622.26,-2621.88 3689.53,-2526.04 3705.48,-2503.32 3730.86,-2487.21 3755.47,-2476.08"/>
<polygon fill="black" stroke="black" points="3757.04,-2479.21 3764.85,-2472.05 3754.28,-2472.78 3757.04,-2479.21"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge181" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M3602.58,-2851.6C3622.03,-2855.66 3640.78,-2863.8 3653.53,-2879.04 3710.67,-2947.3 3661.54,-4396.53 3689.53,-4481.04 3712.12,-4549.21 3767.72,-4614.26 3800.73,-4648.67"/>
<polygon fill="black" stroke="black" points="3798.33,-4651.22 3807.81,-4655.94 3803.34,-4646.33 3798.33,-4651.22"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge182" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M3602.63,-2851.92C3621.96,-2856.01 3640.64,-2864.08 3653.53,-2879.04 3754.8,-2996.51 3587.98,-3458.81 3689.53,-3576.04 3695.53,-3582.96 3702.74,-3588.43 3710.68,-3592.72"/>
<polygon fill="black" stroke="black" points="3709.38,-3595.98 3719.92,-3597.08 3712.37,-3589.64 3709.38,-3595.98"/>
</g>
<!-- build_site.main -->
<g id="node144" class="node">
<title>build_site.main</title>
<g id="a_node144"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="2713.53,-4337.04 2588.53,-4337.04 2588.53,-4301.04 2713.53,-4301.04 2713.53,-4337.04"/>
<text text-anchor="middle" x="2651.03" y="-4315.34" font-family="Times,serif" font-size="14.00">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge184" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M2670.48,-4337.24C2696.55,-4361.7 2746.76,-4404.36 2798.53,-4424.04 2919.88,-4470.17 3849.63,-4539.52 3965.53,-4481.04 4182.63,-4371.5 4307.28,-4075.8 4341.68,-3983.76"/>
<polygon fill="black" stroke="black" points="4345,-3984.89 4345.17,-3974.29 4338.43,-3982.47 4345,-3984.89"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge185" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M2655.9,-4337.15C2668.1,-4390.4 2710.26,-4548.77 2798.53,-4645.04 2893.47,-4748.57 2938.59,-4763.68 3074.53,-4799.04 3323.58,-4863.82 3408.69,-4878.24 3653.53,-4799.04 3713.98,-4779.48 3771.07,-4730.04 3802.17,-4699.53"/>
<polygon fill="black" stroke="black" points="3804.9,-4701.75 3809.51,-4692.21 3799.96,-4696.79 3804.9,-4701.75"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge186" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M2662.8,-4337.25C2684.16,-4371.76 2735.33,-4446.71 2798.53,-4486.04 2805.58,-4490.42 2813.23,-4494.22 2821.13,-4497.49"/>
<polygon fill="black" stroke="black" points="2819.91,-4500.78 2830.5,-4501.11 2822.43,-4494.24 2819.91,-4500.78"/>
</g>
<!-- build_site.main&#45;&gt;build_site._convert_prices -->
<g id="edge187" class="edge">
<title>build_site.main&#45;&gt;build_site._convert_prices</title>
<path fill="none" stroke="black" d="M2679.29,-4337.19C2707.73,-4355.09 2754.26,-4381.53 2798.53,-4394.04 2898.21,-4422.2 3016.51,-4428.77 3100.71,-4429.15"/>
<polygon fill="black" stroke="black" points="3100.8,-4432.65 3110.81,-4429.17 3100.81,-4425.65 3100.8,-4432.65"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge196" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M2713.57,-4329.22C2739.71,-4333.3 2770.56,-4337.79 2798.53,-4341.04 3006.28,-4365.13 3248.9,-4382.88 3392.66,-4392.32"/>
<polygon fill="black" stroke="black" points="3392.63,-4395.83 3402.84,-4392.99 3393.09,-4388.84 3392.63,-4395.83"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge188" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M2659.65,-4300.81C2678.77,-4254.62 2729.61,-4128.97 2762.53,-4021.04 2782.41,-3955.87 2754.19,-3923.76 2798.53,-3872.04 2808.1,-3860.87 2820.62,-3852.21 2833.93,-3845.5"/>
<polygon fill="black" stroke="black" points="2835.66,-3848.56 2843.24,-3841.16 2832.7,-3842.21 2835.66,-3848.56"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge189" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M2713.62,-4320.96C2862.87,-4325.61 3244.74,-4337.52 3423.31,-4343.08"/>
<polygon fill="black" stroke="black" points="3423.37,-4346.59 3433.47,-4343.4 3423.59,-4339.59 3423.37,-4346.59"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge190" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M2693.76,-4301.02C2722.6,-4289.51 2762.16,-4275.57 2798.53,-4269.04 2904.44,-4250.01 3028.1,-4249.54 3112.1,-4252.39"/>
<polygon fill="black" stroke="black" points="3112.02,-4255.89 3122.14,-4252.75 3112.28,-4248.89 3112.02,-4255.89"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node145" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node145"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="3621.03,-3254.04 3417.03,-3254.04 3417.03,-3218.04 3621.03,-3218.04 3621.03,-3254.04"/>
<text text-anchor="middle" x="3519.03" y="-3232.34" font-family="Times,serif" font-size="14.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge191" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M2660.17,-4300.96C2680.48,-4255.11 2733.86,-4130.17 2762.53,-4021.04 2788.26,-3923.09 2764.08,-3891.27 2798.53,-3796.04 2880.3,-3570.04 2879.71,-3471.76 3074.53,-3331.04 3101.37,-3311.65 3284.28,-3276.75 3406.67,-3255.07"/>
<polygon fill="black" stroke="black" points="3407.6,-3258.46 3416.84,-3253.28 3406.39,-3251.57 3407.6,-3258.46"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node146" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node146"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="3025.53,-4314.04 2811.53,-4314.04 2811.53,-4278.04 3025.53,-4278.04 3025.53,-4314.04"/>
<text text-anchor="middle" x="2918.53" y="-4292.34" font-family="Times,serif" font-size="14.00">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge192" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M2713.61,-4313.7C2739.69,-4311.44 2770.97,-4308.73 2801.12,-4306.12"/>
<polygon fill="black" stroke="black" points="2801.63,-4309.59 2811.29,-4305.24 2801.02,-4302.62 2801.63,-4309.59"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node147" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node147"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="3323.53,-4130.04 3099.53,-4130.04 3099.53,-4094.04 3323.53,-4094.04 3323.53,-4130.04"/>
<text text-anchor="middle" x="3211.53" y="-4108.34" font-family="Times,serif" font-size="14.00">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge193" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M2659.04,-4300.92C2675.87,-4260.25 2722.89,-4162.2 2798.53,-4123.04 2898.1,-4071.47 3030.16,-4078.92 3117.61,-4092.45"/>
<polygon fill="black" stroke="black" points="3117.09,-4095.91 3127.52,-4094.04 3118.2,-4089 3117.09,-4095.91"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node148" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node148"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="3640.03,-4088.04 3398.03,-4088.04 3398.03,-4052.04 3640.03,-4052.04 3640.03,-4088.04"/>
<text text-anchor="middle" x="3519.03" y="-4066.34" font-family="Times,serif" font-size="14.00">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge194" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M2656.64,-4300.92C2669.63,-4254.16 2711.4,-4129.62 2798.53,-4080.04 2895.63,-4024.77 3208.3,-4041.85 3387.89,-4057.16"/>
<polygon fill="black" stroke="black" points="3387.67,-4060.66 3397.93,-4058.03 3388.27,-4053.68 3387.67,-4060.66"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node149" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node149"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="3032.03,-4168.04 2805.03,-4168.04 2805.03,-4132.04 3032.03,-4132.04 3032.03,-4168.04"/>
<text text-anchor="middle" x="2918.53" y="-4146.34" font-family="Times,serif" font-size="14.00">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge195" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M2665.16,-4301.02C2688.42,-4270.47 2739.98,-4208.75 2798.53,-4177.04 2801.85,-4175.24 2805.28,-4173.56 2808.79,-4172"/>
<polygon fill="black" stroke="black" points="2810.33,-4175.15 2818.25,-4168.11 2807.67,-4168.67 2810.33,-4175.15"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node150" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node150"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="3326.03,-4920.04 3097.03,-4920.04 3097.03,-4884.04 3326.03,-4884.04 3326.03,-4920.04"/>
<text text-anchor="middle" x="3211.53" y="-4898.34" font-family="Times,serif" font-size="14.00">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge197" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M2654.09,-4337.3C2664.32,-4424.67 2712.66,-4798.55 2798.53,-4870.04 2888.88,-4945.25 3032.36,-4937.29 3123.94,-4921.81"/>
<polygon fill="black" stroke="black" points="3124.77,-4925.22 3134.02,-4920.05 3123.56,-4918.33 3124.77,-4925.22"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node151" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node151"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="3032.03,-4636.04 2805.03,-4636.04 2805.03,-4600.04 3032.03,-4600.04 3032.03,-4636.04"/>
<text text-anchor="middle" x="2918.53" y="-4614.34" font-family="Times,serif" font-size="14.00">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge198" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M2660.24,-4337.07C2679.57,-4378.02 2731.42,-4479.57 2798.53,-4545.04 2819.29,-4565.28 2846.63,-4582.55 2869.87,-4595.19"/>
<polygon fill="black" stroke="black" points="2868.41,-4598.38 2878.88,-4599.98 2871.69,-4592.2 2868.41,-4598.38"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge205" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3621.24,-3218.21C3656.63,-3211.97 3696.22,-3204.99 3731.13,-3198.85"/>
<polygon fill="black" stroke="black" points="3732.07,-3202.23 3741.32,-3197.05 3730.86,-3195.34 3732.07,-3202.23"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge204" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3559.06,-3217.92C3590.73,-3200.9 3633.31,-3172.18 3653.53,-3133.04 3699.46,-3044.12 3634.36,-2316.54 3689.53,-2233.04 3702.36,-2213.62 3722.67,-2199.86 3743.77,-2190.17"/>
<polygon fill="black" stroke="black" points="3745.36,-2193.29 3753.16,-2186.12 3742.59,-2186.86 3745.36,-2193.29"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node153" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node153"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="3929.53,-3254.04 3725.53,-3254.04 3725.53,-3218.04 3929.53,-3218.04 3929.53,-3254.04"/>
<text text-anchor="middle" x="3827.53" y="-3232.34" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge206" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M3621.24,-3236.04C3651.32,-3236.04 3684.43,-3236.04 3715.12,-3236.04"/>
<polygon fill="black" stroke="black" points="3715.43,-3239.54 3725.43,-3236.04 3715.43,-3232.54 3715.43,-3239.54"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node154" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node154"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="3640.53,-4142.04 3397.53,-4142.04 3397.53,-4106.04 3640.53,-4106.04 3640.53,-4142.04"/>
<text text-anchor="middle" x="3519.03" y="-4120.34" font-family="Times,serif" font-size="14.00">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge207" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M3323.69,-4116.4C3344.38,-4117.22 3366.18,-4118.07 3387.39,-4118.9"/>
<polygon fill="black" stroke="black" points="3387.29,-4122.4 3397.42,-4119.3 3387.56,-4115.41 3387.29,-4122.4"/>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge208" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M3032.1,-4155.3C3145.11,-4160.59 3317.26,-4168.64 3423.43,-4173.61"/>
<polygon fill="black" stroke="black" points="3423.34,-4177.11 3433.49,-4174.08 3423.67,-4170.12 3423.34,-4177.11"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node169" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node169"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="3339.03,-4590.04 3084.03,-4590.04 3084.03,-4554.04 3339.03,-4554.04 3339.03,-4590.04"/>
<text text-anchor="middle" x="3211.53" y="-4568.34" font-family="Times,serif" font-size="14.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge264" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M3032.04,-4600.25C3049.85,-4597.44 3068.36,-4594.51 3086.42,-4591.66"/>
<polygon fill="black" stroke="black" points="3087.07,-4595.1 3096.4,-4590.08 3085.98,-4588.18 3087.07,-4595.1"/>
</g>
<!-- price_utils.predict_price -->
<g id="node170" class="node">
<title>price_utils.predict_price</title>
<g id="a_node170"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="3613.53,-4628.04 3424.53,-4628.04 3424.53,-4592.04 3613.53,-4592.04 3613.53,-4628.04"/>
<text text-anchor="middle" x="3519.03" y="-4606.34" font-family="Times,serif" font-size="14.00">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge265" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M3032.1,-4616.53C3141.83,-4615.07 3307.31,-4612.85 3414.02,-4611.43"/>
<polygon fill="black" stroke="black" points="3414.21,-4614.92 3424.16,-4611.29 3414.11,-4607.93 3414.21,-4614.92"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node171" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node171"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="3928.53,-4874.04 3726.53,-4874.04 3726.53,-4838.04 3928.53,-4838.04 3928.53,-4874.04"/>
<text text-anchor="middle" x="3827.53" y="-4852.34" font-family="Times,serif" font-size="14.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge266" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M2928.7,-4636.28C2948.97,-4674.42 3001.65,-4762.09 3074.53,-4799.04 3183.78,-4854.41 3534.98,-4859.29 3716.14,-4857.91"/>
<polygon fill="black" stroke="black" points="3716.26,-4861.41 3726.23,-4857.82 3716.2,-4854.41 3716.26,-4861.41"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node173" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node173"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="3348.53,-4682.04 3074.53,-4682.04 3074.53,-4646.04 3348.53,-4646.04 3348.53,-4682.04"/>
<text text-anchor="middle" x="3211.53" y="-4660.34" font-family="Times,serif" font-size="14.00">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge267" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M3032.04,-4635.82C3049.85,-4638.64 3068.36,-4641.56 3086.42,-4644.42"/>
<polygon fill="black" stroke="black" points="3085.98,-4647.89 3096.4,-4646 3087.07,-4640.98 3085.98,-4647.89"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node152" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node152"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="3646.03,-2556.04 3392.03,-2556.04 3392.03,-2520.04 3646.03,-2520.04 3646.03,-2556.04"/>
<text text-anchor="middle" x="3519.03" y="-2534.34" font-family="Times,serif" font-size="14.00">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge199" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3644.53,-2519.85C3647.77,-2517.22 3650.79,-2514.29 3653.53,-2511.04 3739.39,-2409.24 3636.73,-1435.29 3689.53,-1313.04 3710.41,-1264.71 3756.97,-1224.26 3790,-1200.13"/>
<polygon fill="black" stroke="black" points="3792.4,-1202.72 3798.5,-1194.06 3788.33,-1197.02 3792.4,-1202.72"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge200" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M3646.47,-2544.22C3667.06,-2545.23 3688.33,-2546.27 3708.7,-2547.27"/>
<polygon fill="black" stroke="black" points="3708.79,-2550.78 3718.95,-2547.77 3709.13,-2543.79 3708.79,-2550.78"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge201" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3616.24,-2520C3628.84,-2517.23 3641.53,-2514.21 3653.53,-2511.04 3691.93,-2500.87 3734.29,-2486.96 3767.49,-2475.42"/>
<polygon fill="black" stroke="black" points="3768.75,-2478.69 3777.04,-2472.08 3766.44,-2472.08 3768.75,-2478.69"/>
</g>
<!-- embed.main -->
<g id="node155" class="node">
<title>embed.main</title>
<g id="a_node155"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="779,-3153.04 675,-3153.04 675,-3117.04 779,-3117.04 779,-3153.04"/>
<text text-anchor="middle" x="727" y="-3131.34" font-family="Times,serif" font-size="14.00">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge212" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M779.15,-3131.93C983.89,-3119.76 1764.25,-3076.04 2407.03,-3076.04 2407.03,-3076.04 2407.03,-3076.04 2919.53,-3076.04 3104.01,-3076.04 3320.21,-3064.51 3435.58,-3057.44"/>
<polygon fill="black" stroke="black" points="3435.98,-3060.92 3445.75,-3056.81 3435.55,-3053.93 3435.98,-3060.92"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge213" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M4122.42,-3430.14C4157.25,-3510.08 4297.44,-3831.87 4339.53,-3928.48"/>
<polygon fill="black" stroke="black" points="4336.41,-3930.1 4343.62,-3937.87 4342.83,-3927.3 4336.41,-3930.1"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node157" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node157"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="3608.53,-1858.04 3429.53,-1858.04 3429.53,-1822.04 3608.53,-1822.04 3608.53,-1858.04"/>
<text text-anchor="middle" x="3519.03" y="-1836.34" font-family="Times,serif" font-size="14.00">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node158" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node158"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="3964.53,-2418.04 3690.53,-2418.04 3690.53,-2382.04 3964.53,-2382.04 3964.53,-2418.04"/>
<text text-anchor="middle" x="3827.53" y="-2396.34" font-family="Times,serif" font-size="14.00">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node159" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node159"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="3634.03,-2334.04 3404.03,-2334.04 3404.03,-2298.04 3634.03,-2298.04 3634.03,-2334.04"/>
<text text-anchor="middle" x="3519.03" y="-2312.34" font-family="Times,serif" font-size="14.00">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge226" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3634.26,-2323.3C3758.58,-2332.35 3942.81,-2349.52 3965.53,-2373.04 4025.69,-2435.32 3972,-2679.64 4001.53,-2761.04 4020.88,-2814.36 4062.25,-2866.65 4088.66,-2896.55"/>
<polygon fill="black" stroke="black" points="4086.07,-2898.91 4095.35,-2904.02 4091.28,-2894.23 4086.07,-2898.91"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge225" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3557.49,-2297.93C3584.28,-2284.95 3621.17,-2267.01 3653.53,-2251.04 3669.57,-2243.12 3673.45,-2240.87 3689.53,-2233.04 3719.04,-2218.66 3752.31,-2202.87 3778.67,-2190.45"/>
<polygon fill="black" stroke="black" points="3780.49,-2193.46 3788.05,-2186.04 3777.51,-2187.13 3780.49,-2193.46"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node160" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node160"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="4214.53,-2429.04 4012.53,-2429.04 4012.53,-2393.04 4214.53,-2393.04 4214.53,-2429.04"/>
<text text-anchor="middle" x="4113.53" y="-2407.34" font-family="Times,serif" font-size="14.00">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge227" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4127.95,-2429.33C4167.79,-2483.63 4285.5,-2644.04 4332.16,-2707.64"/>
<polygon fill="black" stroke="black" points="4329.52,-2709.95 4338.26,-2715.95 4335.16,-2705.81 4329.52,-2709.95"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node161" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node161"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="3616.53,-2080.04 3421.53,-2080.04 3421.53,-2044.04 3616.53,-2044.04 3616.53,-2080.04"/>
<text text-anchor="middle" x="3519.03" y="-2058.34" font-family="Times,serif" font-size="14.00">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge230" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3616.68,-2065.59C3733.62,-2072.11 3920.49,-2090.36 3965.53,-2141.04 4011.38,-2192.61 3979.12,-2695.77 4001.53,-2761.04 4019.85,-2814.39 4061.15,-2866.31 4087.88,-2896.18"/>
<polygon fill="black" stroke="black" points="4085.35,-2898.6 4094.67,-2903.64 4090.53,-2893.89 4085.35,-2898.6"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge232" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3616.55,-2059.43C3719.26,-2056.66 3881.92,-2052.26 3992.75,-2049.27"/>
<polygon fill="black" stroke="black" points="3993.07,-2052.76 4002.97,-2049 3992.88,-2045.77 3993.07,-2052.76"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge233" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3616.55,-2057.86C3630.58,-2053.21 3643.62,-2046 3653.53,-2035.04 3707.47,-1975.42 3670.11,-1753.06 3689.53,-1675.04 3719.23,-1555.72 3783.57,-1423.08 3812.24,-1367.2"/>
<polygon fill="black" stroke="black" points="3815.37,-1368.78 3816.85,-1358.29 3809.15,-1365.56 3815.37,-1368.78"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge231" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3616.54,-2057.43C3630.48,-2052.81 3643.49,-2045.72 3653.53,-2035.04 3733.43,-1950.03 3622.76,-1870.69 3689.53,-1775.04 3705.67,-1751.91 3731.51,-1735.5 3756.41,-1724.17"/>
<polygon fill="black" stroke="black" points="3758.1,-1727.25 3765.89,-1720.07 3755.32,-1720.83 3758.1,-1727.25"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge229" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M3616.81,-2048.87C3799.28,-2025.09 4180,-1980.83 4225.53,-2019.04 4333.09,-2109.3 4348.87,-2584 4351.15,-2705.62"/>
<polygon fill="black" stroke="black" points="4347.66,-2706.02 4351.33,-2715.96 4354.66,-2705.9 4347.66,-2706.02"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge228" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3616.61,-2078.83C3629.15,-2081.81 3641.72,-2085.2 3653.53,-2089.04 3699.46,-2103.95 3749.37,-2127.61 3783.73,-2145.15"/>
<polygon fill="black" stroke="black" points="3782.5,-2148.45 3792.99,-2149.92 3785.71,-2142.23 3782.5,-2148.45"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge234" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M3616.83,-2066.38C3630.74,-2071.02 3643.66,-2078.2 3653.53,-2089.04 3755.25,-2200.73 3587.54,-2315.59 3689.53,-2427.04 3699.15,-2437.54 3711.56,-2444.65 3724.99,-2449.36"/>
<polygon fill="black" stroke="black" points="3724.33,-2452.82 3734.91,-2452.38 3726.37,-2446.12 3724.33,-2452.82"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node162" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node162"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="3615.53,-2134.04 3422.53,-2134.04 3422.53,-2098.04 3615.53,-2098.04 3615.53,-2134.04"/>
<text text-anchor="middle" x="3519.03" y="-2112.34" font-family="Times,serif" font-size="14.00">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge236" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3615.87,-2126.07C3629.19,-2130.08 3642.18,-2135.56 3653.53,-2143.04 3677.01,-2158.5 3665.58,-2180.32 3689.53,-2195.04 3795.03,-2259.87 3881.04,-2142.52 3965.53,-2233.04 4005.66,-2276.02 3982.15,-2705.52 4001.53,-2761.04 4020.12,-2814.29 4061.34,-2866.24 4087.98,-2896.14"/>
<polygon fill="black" stroke="black" points="4085.44,-2898.55 4094.75,-2903.62 4090.63,-2893.85 4085.44,-2898.55"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge238" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M3615.73,-2106.41C3706.02,-2097.12 3845.11,-2082.26 3965.53,-2067.04 3974.45,-2065.91 3983.67,-2064.7 3992.94,-2063.45"/>
<polygon fill="black" stroke="black" points="3993.58,-2066.9 4003.01,-2062.08 3992.63,-2059.96 3993.58,-2066.9"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge237" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3615.74,-2111.96C3630.05,-2107.33 3643.38,-2100.1 3653.53,-2089.04 3748.53,-1985.56 3610.49,-1891.15 3689.53,-1775.04 3705.27,-1751.92 3730.75,-1735.55 3755.49,-1724.26"/>
<polygon fill="black" stroke="black" points="3757.13,-1727.36 3764.92,-1720.18 3754.35,-1720.94 3757.13,-1727.36"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge239" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M3615.65,-2102.74C3628.72,-2099.19 3641.7,-2094.71 3653.53,-2089.04 3673.88,-2079.28 3953.09,-1847.86 3965.53,-1829.04 4067.54,-1674.7 4100.92,-1447.04 4109.78,-1368.16"/>
<polygon fill="black" stroke="black" points="4113.28,-1368.36 4110.87,-1358.04 4106.32,-1367.61 4113.28,-1368.36"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge235" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3615.75,-2132.28C3655.74,-2139.06 3701.84,-2146.88 3740.71,-2153.48"/>
<polygon fill="black" stroke="black" points="3740.5,-2156.99 3750.95,-2155.21 3741.67,-2150.09 3740.5,-2156.99"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node163" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node163"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="3945.53,-1820.04 3709.53,-1820.04 3709.53,-1784.04 3945.53,-1784.04 3945.53,-1820.04"/>
<text text-anchor="middle" x="3827.53" y="-1798.34" font-family="Times,serif" font-size="14.00">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge240" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3891.46,-1784.01C3918.9,-1772.78 3948.62,-1755.33 3965.53,-1729.04 4000.46,-1674.73 3993.7,-1213.13 4001.53,-1149.04 4028.99,-924.31 4086.93,-656.91 4106.17,-571.04"/>
<polygon fill="black" stroke="black" points="4109.59,-571.78 4108.37,-561.26 4102.76,-570.25 4109.59,-571.78"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node164" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node164"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="4210.03,-1912.04 4017.03,-1912.04 4017.03,-1876.04 4210.03,-1876.04 4210.03,-1912.04"/>
<text text-anchor="middle" x="4113.53" y="-1890.34" font-family="Times,serif" font-size="14.00">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node165" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node165"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="3653.03,-2026.04 3385.03,-2026.04 3385.03,-1990.04 3653.03,-1990.04 3653.03,-2026.04"/>
<text text-anchor="middle" x="3519.03" y="-2004.34" font-family="Times,serif" font-size="14.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge242" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3610.25,-1990.02C3712.55,-1975.42 3876.62,-1970.73 3965.53,-2067.04 4017.91,-2123.77 3976.68,-2687.93 4001.53,-2761.04 4019.69,-2814.44 4061.03,-2866.35 4087.82,-2896.2"/>
<polygon fill="black" stroke="black" points="4085.3,-2898.63 4094.63,-2903.66 4090.47,-2893.91 4085.3,-2898.63"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge244" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3636.08,-1989.97C3642.47,-1986.1 3648.38,-1981.5 3653.53,-1976.04 3715.82,-1910.03 3636.12,-1848.41 3689.53,-1775.04 3706.34,-1751.94 3732.71,-1735.46 3757.85,-1724.07"/>
<polygon fill="black" stroke="black" points="3759.24,-1727.28 3767.04,-1720.1 3756.47,-1720.86 3759.24,-1727.28"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge243" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3545.95,-1989.83C3577.74,-1965.82 3630.27,-1920.33 3653.53,-1867.04 3752.22,-1640.89 3587.76,-1537.81 3689.53,-1313.04 3711.25,-1265.08 3757.62,-1224.55 3790.38,-1200.3"/>
<polygon fill="black" stroke="black" points="3792.76,-1202.89 3798.81,-1194.19 3788.66,-1197.22 3792.76,-1202.89"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge241" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M3630.24,-2026.1C3638.26,-2028.69 3646.11,-2031.65 3653.53,-2035.04 3712.33,-2061.82 3769.57,-2111.95 3801.23,-2142.43"/>
<polygon fill="black" stroke="black" points="3799.11,-2145.25 3808.71,-2149.73 3803.99,-2140.24 3799.11,-2145.25"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge245" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M3632.75,-1990.02C3640.24,-1986.17 3647.28,-1981.56 3653.53,-1976.04 3687.68,-1945.87 3659.97,-1914.71 3689.53,-1880.04 3710.34,-1855.63 3740.8,-1837.22 3767.73,-1824.44"/>
<polygon fill="black" stroke="black" points="3769.45,-1827.5 3777.08,-1820.15 3766.53,-1821.14 3769.45,-1827.5"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge246" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M3610.11,-1989.99C3624.83,-1986.04 3639.76,-1981.4 3653.53,-1976.04 3670.59,-1969.4 3672.19,-1961.9 3689.53,-1956.04 3794.02,-1920.68 3919.75,-1905.48 4006.84,-1898.95"/>
<polygon fill="black" stroke="black" points="4007.28,-1902.42 4017,-1898.21 4006.77,-1895.44 4007.28,-1902.42"/>
</g>
<!-- debug_dump.main -->
<g id="node166" class="node">
<title>debug_dump.main</title>
<g id="a_node166"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="3285.53,-2265.04 3137.53,-2265.04 3137.53,-2229.04 3285.53,-2229.04 3285.53,-2265.04"/>
<text text-anchor="middle" x="3211.53" y="-2243.34" font-family="Times,serif" font-size="14.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge247" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M3285.59,-2242.02C3309,-2236.7 3332.88,-2226.65 3348.53,-2208.04 3445.19,-2093.08 3285.37,-1984.84 3384.53,-1872.04 3393.9,-1861.38 3406.14,-1853.95 3419.39,-1848.82"/>
<polygon fill="black" stroke="black" points="3420.87,-1852.01 3429.2,-1845.48 3418.61,-1845.39 3420.87,-1852.01"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge248" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M3237.61,-2265.12C3269.89,-2287.39 3328.51,-2324.56 3384.53,-2343.04 3480.04,-2374.55 3592.52,-2388.75 3680.11,-2395.1"/>
<polygon fill="black" stroke="black" points="3679.9,-2398.6 3690.12,-2395.8 3680.39,-2391.62 3679.9,-2398.6"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge249" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M3285.71,-2263.56C3328.55,-2273.24 3382.97,-2285.53 3428.38,-2295.79"/>
<polygon fill="black" stroke="black" points="3427.69,-2299.22 3438.22,-2298.01 3429.23,-2292.39 3427.69,-2299.22"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge250" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M3285.81,-2253.55C3468.82,-2269.93 3933.57,-2312.3 3965.53,-2323.04 4008.72,-2337.54 4052.84,-2366.19 4081.33,-2386.86"/>
<polygon fill="black" stroke="black" points="4079.52,-2389.88 4089.65,-2393 4083.68,-2384.25 4079.52,-2389.88"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge251" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M3285.82,-2239.77C3308.41,-2234.21 3331.74,-2224.59 3348.53,-2208.04 3387.89,-2169.25 3343.66,-2126.23 3384.53,-2089.04 3392.42,-2081.86 3401.67,-2076.37 3411.56,-2072.21"/>
<polygon fill="black" stroke="black" points="3413.06,-2075.38 3421.21,-2068.6 3410.61,-2068.82 3413.06,-2075.38"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge252" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M3285.64,-2237.13C3307.58,-2231.39 3330.56,-2222.34 3348.53,-2208.04 3374.37,-2187.47 3357.89,-2162.55 3384.53,-2143.04 3393.06,-2136.79 3402.68,-2131.9 3412.76,-2128.08"/>
<polygon fill="black" stroke="black" points="3414.2,-2131.29 3422.53,-2124.75 3411.94,-2124.67 3414.2,-2131.29"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge253" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M3285.64,-2240.88C3308.63,-2235.43 3332.24,-2225.59 3348.53,-2208.04 3401.97,-2150.48 3328.84,-2090.41 3384.53,-2035.04 3385.47,-2034.1 3386.44,-2033.19 3387.43,-2032.31"/>
<polygon fill="black" stroke="black" points="3389.68,-2034.99 3395.4,-2026.07 3385.37,-2029.48 3389.68,-2034.99"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node167" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node167"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="3328.53,-2914.04 3094.53,-2914.04 3094.53,-2878.04 3328.53,-2878.04 3328.53,-2914.04"/>
<text text-anchor="middle" x="3211.53" y="-2892.34" font-family="Times,serif" font-size="14.00">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge257" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3222.4,-2877.84C3248.57,-2828.57 3319.69,-2687.73 3348.53,-2561.04 3362.86,-2498.08 3344.26,-2031.5 3384.53,-1981.04 3462.26,-1883.65 3565.84,-1990.56 3653.53,-1902.04 3694.82,-1860.36 3652.7,-1820.7 3689.53,-1775.04 3707.92,-1752.24 3735.37,-1735.65 3760.89,-1724.09"/>
<polygon fill="black" stroke="black" points="3762.4,-1727.25 3770.19,-1720.06 3759.62,-1720.83 3762.4,-1727.25"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge256" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3222.63,-2877.89C3249.38,-2828.74 3321.8,-2688.19 3348.53,-2561.04 3362.85,-2492.94 3341.75,-1363.92 3384.53,-1309.04 3460.91,-1211.05 3534.73,-1269.37 3653.53,-1233.04 3690.25,-1221.8 3731.07,-1208.4 3763.82,-1197.42"/>
<polygon fill="black" stroke="black" points="3765.36,-1200.59 3773.72,-1194.09 3763.12,-1193.96 3765.36,-1200.59"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge255" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3272.49,-2914.11C3300.39,-2925.74 3331.18,-2943.89 3348.53,-2971.04 3409.6,-3066.58 3301.57,-3402.74 3384.53,-3480.04 3436.35,-3528.32 3643.04,-3499.74 3754.46,-3480"/>
<polygon fill="black" stroke="black" points="3755.39,-3483.39 3764.61,-3478.19 3754.15,-3476.5 3755.39,-3483.39"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge254" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M3273.05,-2914.12C3300.91,-2925.73 3331.49,-2943.85 3348.53,-2971.04 3388.83,-3035.34 3334.95,-3595.59 3384.53,-3653.04 3391.87,-3661.53 3401.07,-3667.81 3411.2,-3672.39"/>
<polygon fill="black" stroke="black" points="3410.15,-3675.74 3420.73,-3676.14 3412.71,-3669.23 3410.15,-3675.74"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge258" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M3226.06,-2877.89C3254.43,-2840.07 3322.66,-2750.42 3384.53,-2679.04 3420.66,-2637.36 3465.14,-2591.36 3492.54,-2563.59"/>
<polygon fill="black" stroke="black" points="3495.25,-2565.83 3499.79,-2556.26 3490.27,-2560.9 3495.25,-2565.83"/>
</g>
<!-- scan_ontology.main -->
<g id="node168" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="2996.03,-3140.04 2841.03,-3140.04 2841.03,-3104.04 2996.03,-3104.04 2996.03,-3140.04"/>
<text text-anchor="middle" x="2918.53" y="-3118.34" font-family="Times,serif" font-size="14.00">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge260" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2989.26,-3140.05C3005.48,-3144.44 3022.65,-3149.26 3038.53,-3154.04 3054.68,-3158.9 3057.91,-3163.16 3074.53,-3166.04 3307.78,-3206.44 3587.76,-3197.64 3731.34,-3189.07"/>
<polygon fill="black" stroke="black" points="3731.67,-3192.56 3741.44,-3188.45 3731.24,-3185.57 3731.67,-3192.56"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge259" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M2923.56,-3140.15C2940.72,-3218.15 3008.26,-3533.39 3038.53,-3796.04 3046.9,-3868.67 3033.87,-4392.28 3074.53,-4453.04 3087.53,-4472.45 3108,-4486.23 3129.16,-4495.95"/>
<polygon fill="black" stroke="black" points="3128,-4499.26 3138.57,-4500 3130.77,-4492.83 3128,-4499.26"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge261" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M2935.37,-3103.68C2962.01,-3073.51 3018.41,-3012.66 3074.53,-2971.04 3101.85,-2950.78 3135.26,-2932.28 3162.13,-2918.72"/>
<polygon fill="black" stroke="black" points="3163.95,-2921.72 3171.34,-2914.13 3160.83,-2915.45 3163.95,-2921.72"/>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge262" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M3336.76,-4553.93C3340.93,-4551.3 3344.87,-4548.35 3348.53,-4545.04 3389.19,-4508.25 3343.93,-4463.89 3384.53,-4427.04 3387.55,-4424.3 3390.76,-4421.81 3394.14,-4419.54"/>
<polygon fill="black" stroke="black" points="3396.03,-4422.49 3402.82,-4414.36 3392.44,-4416.48 3396.03,-4422.49"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node172" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node172"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="3622.03,-4682.04 3416.03,-4682.04 3416.03,-4646.04 3622.03,-4646.04 3622.03,-4682.04"/>
<text text-anchor="middle" x="3519.03" y="-4660.34" font-family="Times,serif" font-size="14.00">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge263" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M3348.75,-4664.04C3367.82,-4664.04 3387.23,-4664.04 3405.78,-4664.04"/>
<polygon fill="black" stroke="black" points="3405.99,-4667.54 3415.99,-4664.04 3405.99,-4660.54 3405.99,-4667.54"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node174" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node174"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3965.53,-390.04 3689.53,-390.04 3689.53,-354.04 3965.53,-354.04 3965.53,-390.04"/>
<text text-anchor="middle" x="3827.53" y="-368.34" font-family="Times,serif" font-size="14.00">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node175" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="3298.03,-706.04 3125.03,-706.04 3125.03,-670.04 3298.03,-670.04 3298.03,-706.04"/>
<text text-anchor="middle" x="3211.53" y="-684.34" font-family="Times,serif" font-size="14.00">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge271" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M3298.17,-703.1C3419.74,-725.29 3630.29,-767.07 3653.53,-794.04 3713.1,-863.15 3650.95,-1120.35 3689.53,-1203.04 3711.86,-1250.88 3758.31,-1291.56 3790.91,-1315.88"/>
<polygon fill="black" stroke="black" points="3789.15,-1318.92 3799.29,-1321.99 3793.28,-1313.27 3789.15,-1318.92"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge268" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3254.12,-670C3282.49,-656.51 3319.95,-636.25 3348.53,-612.04 3368.07,-595.48 3362.67,-580.38 3384.53,-567.04 3387.22,-565.4 3389.99,-563.85 3392.83,-562.4"/>
<polygon fill="black" stroke="black" points="3394.51,-565.48 3402.09,-558.07 3391.55,-559.14 3394.51,-565.48"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge269" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3298.09,-681.47C3411.86,-674.75 3604.35,-671.06 3653.53,-718.04 3704.48,-766.7 3659.59,-969.26 3689.53,-1033.04 3712.8,-1082.6 3760.14,-1125.85 3792.6,-1151.45"/>
<polygon fill="black" stroke="black" points="3790.86,-1154.53 3800.92,-1157.88 3795.15,-1148.99 3790.86,-1154.53"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge270" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M3253.2,-669.9C3287.62,-655.11 3338.56,-634.53 3384.53,-621.04 3392.52,-618.69 3400.84,-616.48 3409.25,-614.41"/>
<polygon fill="black" stroke="black" points="3410.23,-617.77 3419.14,-612.05 3408.6,-610.97 3410.23,-617.77"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge272" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M3242.36,-670.02C3273.96,-649.28 3322.77,-612.19 3348.53,-567.04 3389.82,-494.66 3320.86,-436.8 3384.53,-383.04 3427.83,-346.47 3568.25,-348.43 3679.33,-356.64"/>
<polygon fill="black" stroke="black" points="3679.07,-360.13 3689.31,-357.39 3679.6,-353.15 3679.07,-360.13"/>
</g>
<!-- check_translations.parse_po -->
<g id="node176" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="836,-4231.04 618,-4231.04 618,-4195.04 836,-4195.04 836,-4231.04"/>
<text text-anchor="middle" x="727" y="-4209.34" font-family="Times,serif" font-size="14.00">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node177" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="582,-4231.04 295,-4231.04 295,-4195.04 582,-4195.04 582,-4231.04"/>
<text text-anchor="middle" x="438.5" y="-4209.34" font-family="Times,serif" font-size="14.00">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge273" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M582.33,-4213.04C590.8,-4213.04 599.27,-4213.04 607.63,-4213.04"/>
<polygon fill="black" stroke="black" points="607.75,-4216.54 617.75,-4213.04 607.75,-4209.54 607.75,-4216.54"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node178" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node178"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="3653.53,-2924.04 3384.53,-2924.04 3384.53,-2888.04 3653.53,-2888.04 3653.53,-2924.04"/>
<text text-anchor="middle" x="3519.03" y="-2902.34" font-family="Times,serif" font-size="14.00">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge274" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M3653.74,-2909.65C3765.82,-2912.67 3922.85,-2916.91 4021.08,-2919.57"/>
<polygon fill="black" stroke="black" points="4021.19,-2923.07 4031.28,-2919.84 4021.38,-2916.07 4021.19,-2923.07"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge275" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M3581.51,-2924.13C3606.82,-2934.31 3634.59,-2949.42 3653.53,-2971.04 3686.88,-3009.08 3659.97,-3037.97 3689.53,-3079.04 3713.98,-3113 3752.9,-3140.73 3783.03,-3158.82"/>
<polygon fill="black" stroke="black" points="3781.27,-3161.85 3791.67,-3163.9 3784.82,-3155.82 3781.27,-3161.85"/>
</g>
<!-- pending_embed.main -->
<g id="node179" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="3003.03,-2840.04 2834.03,-2840.04 2834.03,-2804.04 3003.03,-2804.04 3003.03,-2840.04"/>
<text text-anchor="middle" x="2918.53" y="-2818.34" font-family="Times,serif" font-size="14.00">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge281" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2919.71,-2804.02C2921.44,-2657.61 2938.12,-1661.56 3074.53,-1401.04 3116.84,-1320.23 3299.08,-1163.94 3384.53,-1132.04 3515.83,-1083.01 3683.48,-1125.77 3769.68,-1154.7"/>
<polygon fill="black" stroke="black" points="3768.69,-1158.06 3779.28,-1157.98 3770.95,-1151.44 3768.69,-1158.06"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge278" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M3003.33,-2839.36C3016.57,-2845.31 3029.01,-2853.3 3038.53,-2864.04 3087.2,-2918.88 3033.15,-2964.51 3074.53,-3025.04 3157.32,-3146.13 3271.88,-3083.97 3348.53,-3209.04 3383.39,-3265.91 3334.62,-3462.79 3384.53,-3507.04 3437.78,-3554.24 3644.22,-3512 3755.12,-3484.8"/>
<polygon fill="black" stroke="black" points="3756.03,-3488.18 3764.9,-3482.38 3754.35,-3481.39 3756.03,-3488.18"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge276" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M2921.27,-2803.66C2932.99,-2678.82 3001.32,-1942.19 3038.53,-1341.04 3041.38,-1295.08 3042.64,-546.24 3074.53,-513.04 3163.75,-420.15 3525.18,-476.35 3653.53,-487.04 3677.17,-489 3702.43,-492.46 3726.15,-496.31"/>
<polygon fill="black" stroke="black" points="3725.77,-499.8 3736.2,-497.98 3726.91,-492.89 3725.77,-499.8"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge277" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M3003.24,-2813.02C3016.66,-2808.07 3029.18,-2800.76 3038.53,-2790.04 3121.88,-2694.49 2991.82,-2603.14 3074.53,-2507.04 3249,-2304.32 3403.38,-2437.67 3653.53,-2343.04 3699.24,-2325.74 3749.38,-2301.01 3783.85,-2283.05"/>
<polygon fill="black" stroke="black" points="3785.92,-2285.92 3793.15,-2278.17 3782.66,-2279.72 3785.92,-2285.92"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge279" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M2973.14,-2803.99C2997.36,-2792.94 3023.8,-2776.18 3038.53,-2752.04 3111.71,-2632.15 2984.23,-2228.61 3074.53,-2121.04 3084.51,-2109.15 3098,-2101.21 3112.61,-2095.98"/>
<polygon fill="black" stroke="black" points="3113.86,-2099.25 3122.36,-2092.92 3111.77,-2092.57 3113.86,-2099.25"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge280" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M3003.04,-2813.58C3016.65,-2808.6 3029.29,-2801.13 3038.53,-2790.04 3101.62,-2714.33 3011.49,-2423.78 3074.53,-2348.04 3155.23,-2251.08 3227.14,-2308.33 3348.53,-2274.04 3381.43,-2264.74 3417.81,-2254.06 3448.4,-2244.97"/>
<polygon fill="black" stroke="black" points="3449.53,-2248.28 3458.12,-2242.08 3447.54,-2241.58 3449.53,-2248.28"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge282" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M2973.11,-2803.97C2997.32,-2792.91 3023.76,-2776.15 3038.53,-2752.04 3108.07,-2638.51 2984.12,-2251.76 3074.53,-2154.04 3158.02,-2063.79 3263.08,-2204.43 3348.53,-2116.04 3402.11,-2060.62 3331.87,-1827.33 3384.53,-1771.04 3386.36,-1769.08 3388.29,-1767.26 3390.31,-1765.55"/>
<polygon fill="black" stroke="black" points="3392.49,-1768.29 3398.5,-1759.56 3388.36,-1762.64 3392.49,-1768.29"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge283" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M3003.17,-2827.18C3090.07,-2833.46 3229.71,-2846.18 3348.53,-2869.04 3364.84,-2872.17 3368.38,-2875.17 3384.53,-2879.04 3394.29,-2881.38 3404.48,-2883.68 3414.7,-2885.9"/>
<polygon fill="black" stroke="black" points="3413.97,-2889.32 3424.48,-2888 3415.44,-2882.48 3413.97,-2889.32"/>
</g>
<!-- pending_chop.main -->
<g id="node180" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="3289.03,-558.04 3134.03,-558.04 3134.03,-522.04 3289.03,-522.04 3289.03,-558.04"/>
<text text-anchor="middle" x="3211.53" y="-536.34" font-family="Times,serif" font-size="14.00">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge284" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3289.23,-540.04C3317.14,-540.04 3349.6,-540.04 3381.14,-540.04"/>
<polygon fill="black" stroke="black" points="3381.35,-543.54 3391.35,-540.04 3381.35,-536.54 3381.35,-543.54"/>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge285" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3289.35,-523.54C3400.45,-501.61 3598.7,-470.3 3653.53,-513.04 3705.22,-553.33 3673.18,-592.57 3689.53,-656.04 3737.91,-843.84 3797.98,-1069.25 3818.92,-1147.58"/>
<polygon fill="black" stroke="black" points="3815.64,-1148.88 3821.6,-1157.63 3822.4,-1147.07 3815.64,-1148.88"/>
</g>
<!-- build_site -->
<g id="node181" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="129.5" cy="-3640.04" rx="55.79" ry="18"/>
<text text-anchor="middle" x="129.5" y="-3636.34" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge286" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M139.36,-3658.04C186.01,-3750 412.97,-4163.04 726,-4163.04 726,-4163.04 726,-4163.04 2167.03,-4163.04 2338.22,-4163.04 2527.73,-4252.87 2609.18,-4296.19"/>
<polygon fill="black" stroke="black" points="2607.64,-4299.34 2618.1,-4300.99 2610.95,-4293.17 2607.64,-4299.34"/>
</g>
<!-- embed -->
<g id="node182" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="438.5" cy="-3135.04" rx="42.49" ry="18"/>
<text text-anchor="middle" x="438.5" y="-3131.34" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- build_site&#45;&gt;embed -->
<!-- embed&#45;&gt;embed.main -->
<g id="edge288" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M480.85,-3135.04C529.14,-3135.04 609.45,-3135.04 664.93,-3135.04"/>
<polygon fill="black" stroke="black" points="664.98,-3138.54 674.98,-3135.04 664.98,-3131.54 664.98,-3138.54"/>
</g>
<!-- caption -->
<g id="node183" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="727" cy="-3081.04" rx="44.69" ry="18"/>
<text text-anchor="middle" x="727" y="-3077.34" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- embed&#45;&gt;caption -->
<!-- caption&#45;&gt;caption.main -->
<g id="edge290" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M772.01,-3081.42C805.69,-3081.72 852.64,-3082.14 890.53,-3082.47"/>
<polygon fill="black" stroke="black" points="890.93,-3085.97 900.96,-3082.56 890.99,-3078.97 890.93,-3085.97"/>
</g>
<!-- tg_client -->
<g id="node184" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="955.84" cy="-2868.04" rx="50.89" ry="18"/>
<text text-anchor="middle" x="955.84" y="-2864.34" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- caption&#45;&gt;tg_client -->
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge292" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M958.61,-2850.05C977.27,-2659.53 1138.38,-1015.32 1161.6,-778.43"/>
<polygon fill="black" stroke="black" points="1165.1,-778.51 1162.6,-768.22 1158.14,-777.83 1165.1,-778.51"/>
</g>
<!-- debug_dump -->
<g id="node185" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="1165.38" cy="-2868.04" rx="70.39" ry="18"/>
<text text-anchor="middle" x="1165.38" y="-2864.34" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- tg_client&#45;&gt;debug_dump -->
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge294" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M1218.4,-2856.11C1304.97,-2837.35 1484.29,-2803.04 1638.04,-2803.04 1638.04,-2803.04 1638.04,-2803.04 2167.03,-2803.04 2634.79,-2803.04 2635.02,-2430.12 3074.53,-2270.04 3091.08,-2264.01 3109.35,-2259.54 3126.99,-2256.25"/>
<polygon fill="black" stroke="black" points="3128.03,-2259.61 3137.28,-2254.43 3126.82,-2252.72 3128.03,-2259.61"/>
</g>
<!-- chop -->
<g id="node186" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="1391.81" cy="-2906.04" rx="32.49" ry="18"/>
<text text-anchor="middle" x="1391.81" y="-2902.34" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- debug_dump&#45;&gt;chop -->
<!-- chop&#45;&gt;chop.main -->
<g id="edge296" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M1424.36,-2906.04C1504.23,-2906.04 1720.92,-2906.04 1901.53,-2906.04 1901.53,-2906.04 1901.53,-2906.04 2409.03,-2906.04 2574.61,-2906.04 2770.38,-2897.99 2863.32,-2893.69"/>
<polygon fill="black" stroke="black" points="2863.51,-2897.18 2873.33,-2893.22 2863.18,-2890.19 2863.51,-2897.18"/>
</g>
<!-- clean_data -->
<g id="node187" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="1639.04" cy="-2952.04" rx="59.59" ry="18"/>
<text text-anchor="middle" x="1639.04" y="-2948.34" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- chop&#45;&gt;clean_data -->
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge298" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M1687.63,-2962.53C1715.93,-2968.35 1752.62,-2975.18 1785.53,-2979.04 1953.26,-2998.71 1996.15,-2998.04 2165.03,-2998.04 2165.03,-2998.04 2165.03,-2998.04 2652.03,-2998.04 2824.87,-2998.04 3027.79,-2998.04 3135.1,-2998.04"/>
<polygon fill="black" stroke="black" points="3135.18,-3001.54 3145.18,-2998.04 3135.18,-2994.54 3135.18,-3001.54"/>
</g>
<!-- moderation -->
<g id="node188" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="1902.53" cy="-2952.04" rx="63.89" ry="18"/>
<text text-anchor="middle" x="1902.53" y="-2948.34" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- clean_data&#45;&gt;moderation -->
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge300" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M1924.33,-2934.95C2075.25,-2810.93 3001.71,-2049.63 3180.64,-1902.6"/>
<polygon fill="black" stroke="black" points="3183.08,-1905.12 3188.59,-1896.07 3178.64,-1899.72 3183.08,-1905.12"/>
</g>
<!-- scan_ontology -->
<g id="node189" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="2166.03" cy="-3122.04" rx="76.09" ry="18"/>
<text text-anchor="middle" x="2166.03" y="-3118.34" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- moderation&#45;&gt;scan_ontology -->
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge302" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M2242.08,-3122.04C2382.02,-3122.04 2682.03,-3122.04 2830.55,-3122.04"/>
<polygon fill="black" stroke="black" points="2830.98,-3125.54 2840.98,-3122.04 2830.98,-3118.54 2830.98,-3125.54"/>
</g>
<!-- telegram_bot -->
<g id="node190" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="2408.03" cy="-3926.04" rx="72.29" ry="18"/>
<text text-anchor="middle" x="2408.03" y="-3922.34" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- scan_ontology&#45;&gt;telegram_bot -->
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge304" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M2456.65,-3939.47C2490.79,-3949.11 2537.44,-3962.27 2576.37,-3973.25"/>
<polygon fill="black" stroke="black" points="2575.51,-3976.65 2586.09,-3975.99 2577.41,-3969.91 2575.51,-3976.65"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge305" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M2480.36,-3926.04C2506.94,-3926.04 2537.37,-3926.04 2565.05,-3926.04"/>
<polygon fill="black" stroke="black" points="2565.12,-3929.54 2575.11,-3926.04 2565.11,-3922.54 2565.12,-3929.54"/>
</g>
<!-- check_translations -->
<g id="node191" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="129.5" cy="-4213.04" rx="96.68" ry="18"/>
<text text-anchor="middle" x="129.5" y="-4209.34" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge317" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M226.37,-4213.04C244.96,-4213.04 264.87,-4213.04 284.76,-4213.04"/>
<polygon fill="black" stroke="black" points="284.83,-4216.54 294.83,-4213.04 284.83,-4209.54 284.83,-4216.54"/>
</g>
<!-- pending_caption -->
<g id="node192" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="2918.53" cy="-693.04" rx="87.18" ry="18"/>
<text text-anchor="middle" x="2918.53" y="-689.34" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge318" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M3005.66,-691.56C3039.9,-690.97 3079.45,-690.29 3114.6,-689.68"/>
<polygon fill="black" stroke="black" points="3114.94,-693.18 3124.88,-689.51 3114.82,-686.18 3114.94,-693.18"/>
</g>
<!-- pending_chop -->
<g id="node193" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="2918.53" cy="-540.04" rx="74.99" ry="18"/>
<text text-anchor="middle" x="2918.53" y="-536.34" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge319" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M2993.34,-540.04C3033.08,-540.04 3082.34,-540.04 3123.9,-540.04"/>
<polygon fill="black" stroke="black" points="3124.01,-543.54 3134.01,-540.04 3124.01,-536.54 3124.01,-543.54"/>
</g>
<!-- pending_embed -->
<g id="node194" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="2651.03" cy="-2822.04" rx="83.69" ry="18"/>
<text text-anchor="middle" x="2651.03" y="-2818.34" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge320" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M2734.95,-2822.04C2763.12,-2822.04 2794.8,-2822.04 2823.76,-2822.04"/>
<polygon fill="black" stroke="black" points="2823.88,-2825.54 2833.88,-2822.04 2823.88,-2818.54 2823.88,-2825.54"/>
</g>
</g>
</svg>
