<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10301pt" height="5722pt"
 viewBox="0.00 0.00 10301.00 5722.37" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5718.37)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5718.37 10297,-5718.37 10297,4 -4,4"/>
<!-- clean_data._parse_date -->
<g id="node1" class="node">
<title>clean_data._parse_date</title>
<g id="a_node1"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8751.5,-827.87 8472.5,-827.87 8472.5,-791.87 8751.5,-791.87 8751.5,-827.87"/>
<text text-anchor="middle" x="8612" y="-804.18" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- notes_utils.read_text -->
<g id="node2" class="node">
<title>notes_utils.read_text</title>
<g id="a_node2"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="10132.5,-3632.87 9918.5,-3632.87 9918.5,-3596.87 10132.5,-3596.87 10132.5,-3632.87"/>
<text text-anchor="middle" x="10025.5" y="-3610.09" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge1" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8751.73,-792.65C9017.58,-762.99 9584.69,-716.89 9722,-843.87 9935.32,-1041.16 10014.63,-3307.11 10023.62,-3586.65"/>
<polygon fill="black" stroke="black" points="10020.13,-3586.9 10023.94,-3596.78 10027.12,-3586.67 10020.13,-3586.9"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge186" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9918.38,-3631.35C9893.57,-3641.38 9929.28,-3650.87 10025.5,-3650.87 10099.17,-3650.87 10137.37,-3645.31 10140.09,-3638.2"/>
<polygon fill="black" stroke="black" points="10142.36,-3635.53 10132.62,-3631.35 10137.63,-3640.69 10142.36,-3635.53"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node3" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node3"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7727.5,-771.87 7420.5,-771.87 7420.5,-735.87 7727.5,-735.87 7727.5,-771.87"/>
<text text-anchor="middle" x="7574" y="-747.71" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge2" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7727.73,-761.07C7836.78,-766.31 7986.93,-773.7 8119,-780.87 8234.22,-787.13 8364.57,-794.84 8462.14,-800.74"/>
<polygon fill="black" stroke="black" points="8462.18,-804.25 8472.38,-801.36 8462.61,-797.26 8462.18,-804.25"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node4" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node4"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8688.5,-1480.87 8535.5,-1480.87 8535.5,-1444.87 8688.5,-1444.87 8688.5,-1480.87"/>
<text text-anchor="middle" x="8612" y="-1459.63" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge3" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7727.83,-739.69C7869.38,-730.27 8065.79,-727.94 8119,-780.87 8222.35,-883.68 8052.14,-1332.58 8155,-1435.87 8256.27,-1537.57 8442.24,-1508.98 8542.55,-1483.48"/>
<polygon fill="black" stroke="black" points="8543.49,-1486.85 8552.28,-1480.95 8541.72,-1480.08 8543.49,-1486.85"/>
</g>
<!-- clean_data._clean_media -->
<g id="node5" class="node">
<title>clean_data._clean_media</title>
<g id="a_node5"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7764,-829.87 7384,-829.87 7384,-789.87 7764,-789.87 7764,-829.87"/>
<text text-anchor="middle" x="7574" y="-802.8" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge4" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7764.11,-809.87C7965.03,-809.87 8278.5,-809.87 8462.43,-809.87"/>
<polygon fill="black" stroke="black" points="8462.45,-813.37 8472.45,-809.87 8462.45,-806.37 8462.45,-813.37"/>
</g>
<!-- caption_io.has_caption -->
<g id="node6" class="node">
<title>caption_io.has_caption</title>
<g id="a_node6"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8689.5,-2329.87 8534.5,-2329.87 8534.5,-2293.87 8689.5,-2293.87 8689.5,-2329.87"/>
<text text-anchor="middle" x="8612" y="-2308.63" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge5" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7764.15,-805.87C7885.65,-814.4 8035.81,-847.95 8119,-952.87 8164.99,-1010.88 8103.5,-2231.69 8155,-2284.87 8204.18,-2335.66 8406.06,-2328.8 8524.08,-2319.96"/>
<polygon fill="black" stroke="black" points="8524.47,-2323.44 8534.18,-2319.18 8523.94,-2316.46 8524.47,-2323.44"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node44" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node44"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9510,-2794.87 9317,-2794.87 9317,-2758.87 9510,-2758.87 9510,-2794.87"/>
<text text-anchor="middle" x="9413.5" y="-2773.63" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge242" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8689.53,-2305.33C8804.8,-2297.24 9015.26,-2289.97 9069,-2338.87 9146.5,-2409.4 9048.63,-2483.54 9105,-2571.87 9164.21,-2664.66 9282.15,-2725.14 9353.52,-2754.96"/>
<polygon fill="black" stroke="black" points="9352.26,-2758.22 9362.84,-2758.79 9354.92,-2751.75 9352.26,-2758.22"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node47" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node47"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9507,-2329.87 9320,-2329.87 9320,-2293.87 9507,-2293.87 9507,-2329.87"/>
<text text-anchor="middle" x="9413.5" y="-2308.63" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge243" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8689.66,-2311.87C8834.27,-2311.87 9147.37,-2311.87 9309.91,-2311.87"/>
<polygon fill="black" stroke="black" points="9309.92,-2315.37 9319.92,-2311.87 9309.92,-2308.37 9309.92,-2315.37"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node7" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node7"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7776,-1007.87 7372,-1007.87 7372,-961.87 7776,-961.87 7776,-1007.87"/>
<text text-anchor="middle" x="7574" y="-976.43" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge6" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7776.06,-970.31C7910.46,-965.35 8071.12,-970.27 8119,-1016.87 8185.97,-1082.06 8088.05,-1370.67 8155,-1435.87 8257.41,-1535.6 8441.67,-1508.28 8541.75,-1483.38"/>
<polygon fill="black" stroke="black" points="8542.63,-1486.76 8551.46,-1480.9 8540.91,-1479.98 8542.63,-1486.76"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node8" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node8"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8701.5,-988.87 8522.5,-988.87 8522.5,-952.87 8701.5,-952.87 8701.5,-988.87"/>
<text text-anchor="middle" x="8612" y="-966.83" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge7" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7776.29,-982.15C7997.47,-979.16 8343.69,-974.49 8512.21,-972.21"/>
<polygon fill="black" stroke="black" points="8512.36,-975.71 8522.31,-972.07 8512.26,-968.71 8512.36,-975.71"/>
</g>
<!-- lot_io.read_lots -->
<g id="node9" class="node">
<title>lot_io.read_lots</title>
<g id="a_node9"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8718,-2275.87 8506,-2275.87 8506,-2239.87 8718,-2239.87 8718,-2275.87"/>
<text text-anchor="middle" x="8612" y="-2251.71" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge8" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7776.01,-969.66C7910.89,-964.33 8072.15,-969.06 8119,-1016.87 8191.84,-1091.21 8104.2,-1862.03 8155,-1952.87 8241.32,-2107.25 8442.36,-2198.15 8546.26,-2236.43"/>
<polygon fill="black" stroke="black" points="8545.1,-2239.73 8555.7,-2239.86 8547.5,-2233.16 8545.1,-2239.73"/>
</g>
<!-- notes_utils.load_json -->
<g id="node51" class="node">
<title>notes_utils.load_json</title>
<g id="a_node51"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9537.5,-3960.87 9289.5,-3960.87 9289.5,-3924.87 9537.5,-3924.87 9537.5,-3960.87"/>
<text text-anchor="middle" x="9413.5" y="-3937.18" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge148" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8718.03,-2248.46C8837.58,-2240.33 9022.36,-2236.48 9069,-2284.87 9131.89,-2350.14 9043.05,-3849.72 9105,-3915.87 9160.6,-3975.24 9258.37,-3973.7 9328.76,-3962.61"/>
<polygon fill="black" stroke="black" points="9329.65,-3966.01 9338.93,-3960.91 9328.49,-3959.11 9329.65,-3966.01"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node113" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node113"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9471,-2562.87 9356,-2562.87 9356,-2526.87 9471,-2526.87 9471,-2562.87"/>
<text text-anchor="middle" x="9413.5" y="-2541.63" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge147" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8710.4,-2239.83C8807.86,-2226.98 8958.77,-2221.62 9069,-2284.87 9094.02,-2299.23 9084.63,-2318.45 9105,-2338.87 9186.11,-2420.17 9303.83,-2488.35 9367.52,-2522.11"/>
<polygon fill="black" stroke="black" points="9366.03,-2525.28 9376.51,-2526.84 9369.29,-2519.09 9366.03,-2525.28"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node10" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node10"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7782,-407.87 7366,-407.87 7366,-371.87 7782,-371.87 7782,-407.87"/>
<text text-anchor="middle" x="7574" y="-383.71" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node11" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node11"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8825.5,-323.87 8398.5,-323.87 8398.5,-287.87 8825.5,-287.87 8825.5,-323.87"/>
<text text-anchor="middle" x="8612" y="-299.71" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node12" class="node">
<title>clean_data.main</title>
<g id="a_node12"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6566,-771.87 6374,-771.87 6374,-735.87 6566,-735.87 6566,-771.87"/>
<text text-anchor="middle" x="6470" y="-748.57" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge9" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6566.39,-753.87C6754.83,-753.87 7176.72,-753.87 7410.06,-753.87"/>
<polygon fill="black" stroke="black" points="7410.34,-757.37 7420.34,-753.87 7410.34,-750.37 7410.34,-757.37"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge10" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6566.39,-758.72C6745.38,-767.82 7135.03,-787.62 7373.61,-799.74"/>
<polygon fill="black" stroke="black" points="7373.63,-803.25 7383.8,-800.26 7373.99,-796.26 7373.63,-803.25"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge11" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6557.01,-771.9C6752.3,-812.84 7229.52,-912.87 7453.38,-959.8"/>
<polygon fill="black" stroke="black" points="7452.69,-963.23 7463.2,-961.86 7454.13,-956.38 7452.69,-963.23"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge12" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6562.4,-771.88C6679.31,-789.09 6880.14,-798.06 6993,-685.87 7076.99,-602.39 6942.11,-502.33 7029,-421.87 7075.98,-378.37 7225.34,-371.92 7355.7,-375.51"/>
<polygon fill="black" stroke="black" points="7355.75,-379.01 7365.85,-375.81 7355.96,-372.02 7355.75,-379.01"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge13" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6560.06,-771.88C6677.01,-789.82 6880.64,-800.33 6993,-685.87 7043.59,-634.33 6976.05,-411.99 7029,-362.87 7126.19,-272.71 7975.55,-286.08 8388.05,-298.13"/>
<polygon fill="black" stroke="black" points="8388.22,-301.64 8398.32,-298.44 8388.43,-294.64 8388.22,-301.64"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node13" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node13"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="5088.5,-1463.87 4902.5,-1463.87 4902.5,-1427.87 5088.5,-1427.87 5088.5,-1463.87"/>
<text text-anchor="middle" x="4995.5" y="-1442.17" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node14" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node14"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-2177.87 1260.5,-2177.87 1260.5,-2141.87 1490.5,-2141.87 1490.5,-2177.87"/>
<text text-anchor="middle" x="1375.5" y="-2154.57" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node15" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node15"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5179,-1195.37 4812,-1195.37 4812,-1158.37 5179,-1158.37 5179,-1195.37"/>
<text text-anchor="middle" x="4995.5" y="-1170.43" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node16" class="node">
<title>tg_client._write_md</title>
<g id="a_node16"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5662,-578.87 5525,-578.87 5525,-542.87 5662,-542.87 5662,-578.87"/>
<text text-anchor="middle" x="5593.5" y="-557.63" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node17" class="node">
<title>post_io.write_post</title>
<g id="a_node17"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6636,-282.87 6304,-282.87 6304,-236.87 6636,-236.87 6636,-282.87"/>
<text text-anchor="middle" x="6470" y="-251.43" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge14" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5629.45,-542.78C5691.31,-509.59 5821.96,-434.11 5911,-344.87 5931.11,-324.72 5922.26,-305.96 5947,-291.87 6060.9,-227.01 6212.35,-225.12 6322.77,-235.82"/>
<polygon fill="black" stroke="black" points="6322.68,-239.33 6332.99,-236.85 6323.39,-232.36 6322.68,-239.33"/>
</g>
<!-- post_io.get_contact -->
<g id="node40" class="node">
<title>post_io.get_contact</title>
<g id="a_node40"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7673.5,-109.87 7474.5,-109.87 7474.5,-73.87 7673.5,-73.87 7673.5,-109.87"/>
<text text-anchor="middle" x="7574" y="-87.09" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge133" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6636.25,-267.4C6767.87,-269.95 6938.75,-264.47 6993,-222.87 7031.82,-193.11 6989.87,-148.22 7029,-118.87 7095.23,-69.19 7325.41,-74.85 7464.24,-83.38"/>
<polygon fill="black" stroke="black" points="7464.29,-86.89 7474.49,-84.02 7464.73,-79.9 7464.29,-86.89"/>
</g>
<!-- notes_utils.write_md -->
<g id="node101" class="node">
<title>notes_utils.write_md</title>
<g id="a_node101"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7687,-277.87 7461,-277.87 7461,-241.87 7687,-241.87 7687,-277.87"/>
<text text-anchor="middle" x="7574" y="-255.08" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge135" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6636.28,-259.87C6859.44,-259.87 7251.99,-259.87 7450.57,-259.87"/>
<polygon fill="black" stroke="black" points="7450.75,-263.37 7460.75,-259.87 7450.75,-256.37 7450.75,-263.37"/>
</g>
<!-- post_io.get_timestamp -->
<g id="node102" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node102"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7745.5,-167.87 7402.5,-167.87 7402.5,-127.87 7745.5,-127.87 7745.5,-167.87"/>
<text text-anchor="middle" x="7574" y="-140.8" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge134" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6636.25,-281.38C6743.92,-287.68 6884.11,-280.78 6993,-222.87 7015.92,-210.68 7005.97,-188.86 7029,-176.87 7090.27,-144.98 7258.73,-140.04 7392.11,-141.68"/>
<polygon fill="black" stroke="black" points="7392.41,-145.18 7402.46,-141.82 7392.51,-138.18 7392.41,-145.18"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node18" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node18"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7813.5,-1237.37 7334.5,-1237.37 7334.5,-1194.37 7813.5,-1194.37 7813.5,-1237.37"/>
<text text-anchor="middle" x="7574" y="-1207.73" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge15" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7813.63,-1203.85C7938.06,-1202.88 8073.62,-1211.92 8119,-1251.87 8181.55,-1306.93 8092.26,-1381.03 8155,-1435.87 8260.49,-1528.09 8437.58,-1505.88 8537.18,-1483.26"/>
<polygon fill="black" stroke="black" points="8538.22,-1486.61 8547.16,-1480.94 8536.63,-1479.8 8538.22,-1486.61"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node19" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node19"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6603,-1236.87 6337,-1236.87 6337,-1200.87 6603,-1200.87 6603,-1236.87"/>
<text text-anchor="middle" x="6470" y="-1214.09" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge16" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6603.11,-1218.51C6780.85,-1218.03 7100.47,-1217.16 7324.06,-1216.55"/>
<polygon fill="black" stroke="black" points="7324.31,-1220.05 7334.3,-1216.52 7324.29,-1213.05 7324.31,-1220.05"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node20" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node20"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3380,-1781.87 3141,-1781.87 3141,-1745.87 3380,-1745.87 3380,-1781.87"/>
<text text-anchor="middle" x="3260.5" y="-1759.83" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge17" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3380.11,-1758.97C3687.57,-1745.84 4535.48,-1706.96 5240,-1649.87 6036.83,-1585.31 6230.64,-1504.49 7029,-1462.87 7599.25,-1433.15 8286.71,-1451.71 8524.86,-1459.73"/>
<polygon fill="black" stroke="black" points="8525.07,-1463.24 8535.19,-1460.08 8525.31,-1456.24 8525.07,-1463.24"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node21" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node21"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5240,-1256.37 4751,-1256.37 4751,-1213.37 5240,-1213.37 5240,-1256.37"/>
<text text-anchor="middle" x="4995.5" y="-1226.73" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node22" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node22"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5805.5,-1003.37 5381.5,-1003.37 5381.5,-958.37 5805.5,-958.37 5805.5,-1003.37"/>
<text text-anchor="middle" x="5593.5" y="-972.49" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node23" class="node">
<title>tg_client._extract_author</title>
<g id="a_node23"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6833,-370.87 6107,-370.87 6107,-300.87 6833,-300.87 6833,-370.87"/>
<text text-anchor="middle" x="6470" y="-322.07" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node24" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node24"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7780,-223.87 7368,-223.87 7368,-185.87 7780,-185.87 7780,-223.87"/>
<text text-anchor="middle" x="7574" y="-198.15" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge18" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6833.34,-349.43C6889.68,-339.38 6945.03,-321.51 6993,-291.87 7019.13,-275.73 7002.61,-248.59 7029,-232.87 7083.49,-200.42 7230.19,-194.29 7357.54,-195.8"/>
<polygon fill="black" stroke="black" points="7357.79,-199.31 7367.84,-195.94 7357.89,-192.31 7357.79,-199.31"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node25" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node25"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5732.5,-1564.87 5454.5,-1564.87 5454.5,-1528.87 5732.5,-1528.87 5732.5,-1564.87"/>
<text text-anchor="middle" x="5593.5" y="-1542.09" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node26" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node26"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8760,-3019.87 8464,-3019.87 8464,-2983.87 8760,-2983.87 8760,-3019.87"/>
<text text-anchor="middle" x="8612" y="-2996.18" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node27" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node27"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5238,-1641.37 4753,-1641.37 4753,-1592.37 5238,-1592.37 5238,-1641.37"/>
<text text-anchor="middle" x="4995.5" y="-1607.25" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge21" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5011.12,-1641.48C5047.57,-1700.46 5148.77,-1850.21 5276,-1920.87 5969.14,-2305.85 6241.11,-2163.05 7029,-2251.87 7596.45,-2315.85 8284.85,-2315.5 8524.11,-2313.1"/>
<polygon fill="black" stroke="black" points="8524.18,-2316.6 8534.14,-2312.99 8524.11,-2309.6 8524.18,-2316.6"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node28" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node28"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5726.5,-2878.87 5460.5,-2878.87 5460.5,-2842.87 5726.5,-2842.87 5726.5,-2878.87"/>
<text text-anchor="middle" x="5593.5" y="-2856.71" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge19" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M5007.53,-1641.41C5047.23,-1731 5183.48,-2049.77 5240,-2327.87 5251.22,-2383.11 5236.43,-2793.74 5276,-2833.87 5335.08,-2893.79 5436.16,-2891.88 5508.19,-2880.55"/>
<polygon fill="black" stroke="black" points="5508.86,-2883.99 5518.15,-2878.9 5507.72,-2877.08 5508.86,-2883.99"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node29" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node29"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8779,-700.87 8445,-700.87 8445,-664.87 8779,-664.87 8779,-700.87"/>
<text text-anchor="middle" x="8612" y="-678.09" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge20" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5230.49,-1592.2C5233.81,-1589.3 5236.99,-1586.19 5240,-1582.87 5303.98,-1512.39 5210.25,-795.71 5276,-726.87 5373.84,-624.43 5783.86,-733.34 5911,-670.87 5932.17,-660.47 5926.37,-643.31 5947,-631.87 6360.8,-402.45 6614.71,-718.06 6993,-433.87 7021.29,-412.62 6998.85,-381.39 7029,-362.87 7132.2,-299.49 8023.66,-288.19 8119,-362.87 8171.61,-404.09 8110.73,-458.81 8155,-508.87 8233.56,-597.72 8362.52,-641.43 8463.29,-662.8"/>
<polygon fill="black" stroke="black" points="8462.76,-666.26 8473.26,-664.86 8464.18,-659.41 8462.76,-666.26"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node30" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node30"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6595.5,-2878.87 6344.5,-2878.87 6344.5,-2842.87 6595.5,-2842.87 6595.5,-2878.87"/>
<text text-anchor="middle" x="6470" y="-2856.08" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge22" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5726.84,-2860.87C5890.88,-2860.87 6168.94,-2860.87 6334.14,-2860.87"/>
<polygon fill="black" stroke="black" points="6334.36,-2864.37 6344.36,-2860.87 6334.36,-2857.37 6334.36,-2864.37"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node107" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node107"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9708.5,-480.37 9118.5,-480.37 9118.5,-435.37 9708.5,-435.37 9708.5,-480.37"/>
<text text-anchor="middle" x="9413.5" y="-449.49" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge139" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8677.07,-664.84C8818.8,-624.95 9159.21,-529.16 9322.35,-483.24"/>
<polygon fill="black" stroke="black" points="9323.68,-486.51 9332.36,-480.43 9321.78,-479.77 9323.68,-486.51"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node31" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node31"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7755.5,-3019.87 7392.5,-3019.87 7392.5,-2983.87 7755.5,-2983.87 7755.5,-3019.87"/>
<text text-anchor="middle" x="7574" y="-2996.18" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge25" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6595.63,-2854.04C6729.38,-2849.2 6931,-2849.83 6993,-2892.87 7025.36,-2915.34 6996.53,-2951.56 7029,-2973.87 7084.83,-3012.24 7248.55,-3016.43 7381.92,-3012.68"/>
<polygon fill="black" stroke="black" points="7382.38,-3016.17 7392.28,-3012.38 7382.18,-3009.17 7382.38,-3016.17"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge24" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7755.53,-3017.39C7893.85,-3024.89 8069.18,-3023.44 8119,-2973.87 8219.2,-2874.19 8055.18,-2438.94 8155,-2338.87 8204.93,-2288.82 8406.52,-2295.39 8524.28,-2303.99"/>
<polygon fill="black" stroke="black" points="8524.13,-2307.49 8534.36,-2304.75 8524.65,-2300.51 8524.13,-2307.49"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge23" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7755.75,-3001.87C7953.05,-3001.87 8265.81,-3001.87 8453.44,-3001.87"/>
<polygon fill="black" stroke="black" points="8453.67,-3005.37 8463.67,-3001.87 8453.67,-2998.37 8453.67,-3005.37"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node32" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node32"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2253,-2630.87 1768,-2630.87 1768,-2586.87 2253,-2586.87 2253,-2630.87"/>
<text text-anchor="middle" x="2010.5" y="-2600.55" font-family="Times,serif" font-size="32.90">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge26" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2064.24,-2630.91C2234.21,-2699.85 2784.19,-2906.87 3259.5,-2906.87 3259.5,-2906.87 3259.5,-2906.87 5594.5,-2906.87 5682.8,-2906.87 6903.2,-2968.04 7382.09,-2992.21"/>
<polygon fill="black" stroke="black" points="7382.06,-2995.71 7392.22,-2992.72 7382.41,-2988.72 7382.06,-2995.71"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node33" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node33"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7746,-543.37 7402,-543.37 7402,-502.37 7746,-502.37 7746,-543.37"/>
<text text-anchor="middle" x="7574" y="-515.63" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge28" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7746.16,-517.42C8025.02,-511.27 8594.01,-510.11 9069,-581.87 9365.98,-626.74 9526.7,-527.69 9722,-755.87 9916.97,-983.67 10012.44,-3302.7 10023.42,-3586.47"/>
<polygon fill="black" stroke="black" points="10019.94,-3586.88 10023.82,-3596.74 10026.93,-3586.61 10019.94,-3586.88"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge27" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7746.25,-505.69C7869.39,-503.72 8029,-524.48 8119,-628.87 8177.61,-696.85 8092,-1371.95 8155,-1435.87 8255.88,-1538.23 8442.43,-1509.21 8542.82,-1483.51"/>
<polygon fill="black" stroke="black" points="8543.77,-1486.88 8552.56,-1480.96 8541.99,-1480.11 8543.77,-1486.88"/>
</g>
<!-- tg_client._load_progress -->
<g id="node34" class="node">
<title>tg_client._load_progress</title>
<g id="a_node34"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2175.5,-808.87 1845.5,-808.87 1845.5,-772.87 2175.5,-772.87 2175.5,-808.87"/>
<text text-anchor="middle" x="2010.5" y="-784.71" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge29" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M2060.65,-772.86C2226.77,-713.67 2783.51,-528.87 3259.5,-528.87 3259.5,-528.87 3259.5,-528.87 4108,-528.87 4639.06,-528.87 4748.94,-715.83 5276,-780.87 6049.67,-876.35 6249.72,-818.72 7029,-838.87 7255.63,-844.73 8845.68,-837.81 9069,-876.87 9370.95,-929.69 9528.93,-860.78 9722,-1098.87 9887.7,-1303.21 10007.84,-3322.13 10022.9,-3586.39"/>
<polygon fill="black" stroke="black" points="10019.42,-3586.9 10023.49,-3596.68 10026.41,-3586.5 10019.42,-3586.9"/>
</g>
<!-- tg_client._save_progress -->
<g id="node35" class="node">
<title>tg_client._save_progress</title>
<g id="a_node35"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2770,-1199.87 2541,-1199.87 2541,-1163.87 2770,-1163.87 2770,-1199.87"/>
<text text-anchor="middle" x="2655.5" y="-1177.71" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node36" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node36"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3394,-1303.87 3127,-1303.87 3127,-1267.87 3394,-1267.87 3394,-1303.87"/>
<text text-anchor="middle" x="3260.5" y="-1280" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge30" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3338.02,-1303.88C3384.32,-1313.9 3444.72,-1325.41 3499,-1330.87 3626.7,-1343.72 8003.38,-1336.15 8119,-1391.87 8141.76,-1402.84 8132.5,-1424.38 8155,-1435.87 8272.33,-1495.78 8429.4,-1489.31 8525.23,-1477.38"/>
<polygon fill="black" stroke="black" points="8525.7,-1480.85 8535.17,-1476.1 8524.8,-1473.91 8525.7,-1480.85"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node37" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node37"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2141,-1153.87 1880,-1153.87 1880,-1117.87 2141,-1117.87 2141,-1153.87"/>
<text text-anchor="middle" x="2010.5" y="-1130" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge31" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2141.31,-1134.84C2368.12,-1133.12 2851.35,-1129.87 3259.5,-1129.87 3259.5,-1129.87 3259.5,-1129.87 4108,-1129.87 4219.43,-1129.87 8035.3,-1111.31 8119,-1184.87 8203.65,-1259.27 8072.06,-1359.57 8155,-1435.87 8259.11,-1531.65 8439.52,-1507.06 8539.36,-1483.35"/>
<polygon fill="black" stroke="black" points="8540.47,-1486.68 8549.36,-1480.91 8538.81,-1479.88 8540.47,-1486.68"/>
</g>
<!-- tg_client._save_message -->
<g id="node38" class="node">
<title>tg_client._save_message</title>
<g id="a_node38"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4715,-1304.37 3499,-1304.37 3499,-1189.37 4715,-1189.37 4715,-1304.37"/>
<text text-anchor="middle" x="4107" y="-1222.76" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge44" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4715.05,-1279.82C4727.13,-1280.2 4739.13,-1280.55 4751,-1280.87 4756.85,-1281.03 8114.41,-1281.25 8119,-1284.87 8173.12,-1327.66 8102.14,-1391.54 8155,-1435.87 8261.47,-1525.18 8435.84,-1504.88 8535.26,-1483.18"/>
<polygon fill="black" stroke="black" points="8536.25,-1486.54 8545.24,-1480.94 8534.71,-1479.71 8536.25,-1486.54"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge32" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4303.91,-1304.47C4430.55,-1340.04 4599.44,-1384.35 4751,-1413.87 4797.11,-1422.85 4848.63,-1430.03 4892.36,-1435.3"/>
<polygon fill="black" stroke="black" points="4892.09,-1438.79 4902.43,-1436.49 4892.91,-1431.84 4892.09,-1438.79"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge33" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4715.22,-1198.93C4745.34,-1196.55 4774.28,-1194.26 4801.37,-1192.12"/>
<polygon fill="black" stroke="black" points="4801.96,-1195.59 4811.66,-1191.31 4801.41,-1188.61 4801.96,-1195.59"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge34" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4150.48,-1189.11C4243.57,-1067.61 4479.05,-786.98 4751,-666.87 4950.76,-578.65 5027.59,-669.59 5240,-618.87 5256.7,-614.89 5259.39,-609.2 5276,-604.87 5356.01,-584.06 5450.12,-572.57 5514.81,-566.6"/>
<polygon fill="black" stroke="black" points="5515.28,-570.07 5524.93,-565.69 5514.65,-563.1 5515.28,-570.07"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge35" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4715.07,-1264.33C4727.15,-1264.52 4739.14,-1264.71 4751,-1264.87 4968.31,-1267.91 5022.7,-1268.94 5240,-1264.87 5633.62,-1257.51 6097.79,-1236.89 6326.68,-1225.93"/>
<polygon fill="black" stroke="black" points="6326.91,-1229.42 6336.73,-1225.45 6326.58,-1222.43 6326.91,-1229.42"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge36" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4715.22,-1238.65C4723.85,-1238.54 4732.37,-1238.42 4740.79,-1238.31"/>
<polygon fill="black" stroke="black" points="4741.04,-1241.8 4751,-1238.17 4740.95,-1234.81 4741.04,-1241.8"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge37" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4358.52,-1189.36C4594.2,-1137 4957.48,-1060.77 5276,-1012.87 5306.81,-1008.24 5339.41,-1004.1 5371.52,-1000.45"/>
<polygon fill="black" stroke="black" points="5371.92,-1003.93 5381.46,-999.33 5371.13,-996.97 5371.92,-1003.93"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge38" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4228.86,-1189.21C4438.42,-1088.06 4881.17,-869.16 5240,-656.87 5256.55,-647.08 5257.8,-639.09 5276,-632.87 5409.86,-587.12 5806.06,-682.75 5911,-587.87 5980.59,-524.95 5877.83,-443.26 5947,-379.87 6035.85,-298.46 6172.56,-289.54 6283.79,-299.87"/>
<polygon fill="black" stroke="black" points="6283.5,-303.36 6293.79,-300.86 6284.18,-296.4 6283.5,-303.36"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge39" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4194.52,-1304.49C4314.18,-1381.21 4539.45,-1515.08 4751,-1582.87 4758.89,-1585.4 4766.98,-1587.74 4775.2,-1589.91"/>
<polygon fill="black" stroke="black" points="4774.35,-1593.3 4784.9,-1592.37 4776.07,-1586.52 4774.35,-1593.3"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge40" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3957.09,-1304.48C3976.06,-1315 4026.04,-1322.37 4107,-1322.37 4177.21,-1322.37 4224.12,-1316.83 4247.71,-1308.49"/>
<polygon fill="black" stroke="black" points="4249.15,-1311.69 4256.91,-1304.48 4246.35,-1305.27 4249.15,-1311.69"/>
</g>
<!-- tg_client._save_media -->
<g id="node39" class="node">
<title>tg_client._save_media</title>
<g id="a_node39"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5236.5,-1573.87 4754.5,-1573.87 4754.5,-1519.87 5236.5,-1519.87 5236.5,-1573.87"/>
<text text-anchor="middle" x="4995.5" y="-1536.27" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge41" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4265.57,-1304.38C4395.35,-1351.23 4584.44,-1418.32 4751,-1472.87 4797.26,-1488.02 4848.8,-1503.84 4892.51,-1516.94"/>
<polygon fill="black" stroke="black" points="4891.7,-1520.35 4902.28,-1519.87 4893.71,-1513.65 4891.7,-1520.35"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge42" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4145.38,-1189.33C4233.02,-1060.1 4466.04,-748.04 4751,-618.87 4949.54,-528.88 5048.42,-684.88 5240,-580.87 5263.12,-568.32 5254.74,-549.38 5276,-533.87 5518.13,-357.24 5690.33,-509.69 5911,-306.87 5939.41,-280.76 5915.63,-250.34 5947,-227.87 6136.91,-91.83 6760.68,-147.44 6993,-122.87 7009.01,-121.18 7012.95,-120.16 7029,-118.87 7179.59,-106.78 7354.09,-99.27 7464.01,-95.33"/>
<polygon fill="black" stroke="black" points="7464.24,-98.82 7474.11,-94.97 7463.99,-91.82 7464.24,-98.82"/>
</g>
<!-- post_io.read_post -->
<g id="node41" class="node">
<title>post_io.read_post</title>
<g id="a_node41"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8891,-1943.87 8333,-1943.87 8333,-1867.87 8891,-1867.87 8891,-1943.87"/>
<text text-anchor="middle" x="8612" y="-1890.71" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge43" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4689.89,-1304.4C4945.9,-1335.33 5198.42,-1375.91 5240,-1418.87 5334.61,-1516.65 5176.81,-1629.75 5276,-1722.87 5331.26,-1774.76 7522.57,-1864.02 8322.52,-1894.95"/>
<polygon fill="black" stroke="black" points="8322.61,-1898.46 8332.74,-1895.34 8322.88,-1891.46 8322.61,-1898.46"/>
</g>
<!-- moderation.should_skip_user -->
<g id="node42" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node42"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="10149.5,-448.87 9901.5,-448.87 9901.5,-412.87 10149.5,-412.87 10149.5,-448.87"/>
<text text-anchor="middle" x="10025.5" y="-426.83" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge45" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4152.81,-1189.15C4250.87,-1065.62 4496.13,-771.42 4751,-580.87 5206.87,-240.04 5385.13,-213.89 5947,-122.87 6900.25,31.54 7157.67,26.61 8119,-64.87 8837.11,-133.21 9687.13,-343.31 9945.92,-410.2"/>
<polygon fill="black" stroke="black" points="9945.41,-413.68 9955.97,-412.8 9947.17,-406.91 9945.41,-413.68"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge49" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5230.62,-1574.27C5233.87,-1576.96 5237,-1579.83 5240,-1582.87 5326.72,-1671.09 5190.77,-1769.21 5276,-1858.87 5810.44,-2421.07 6279.42,-1867.74 6993,-2171.87 7011.16,-2179.61 7010.38,-2191.34 7029,-2197.87 7257.84,-2278.18 7895.22,-2158.39 8119,-2251.87 8139.03,-2260.24 8135.01,-2276.41 8155,-2284.87 8275.31,-2335.82 8429.62,-2332.37 8524.35,-2323.45"/>
<polygon fill="black" stroke="black" points="8524.85,-2326.91 8534.46,-2322.45 8524.16,-2319.95 8524.85,-2326.91"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge46" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5236.77,-1546.87C5306.89,-1546.87 5381.45,-1546.87 5444.1,-1546.87"/>
<polygon fill="black" stroke="black" points="5444.45,-1550.37 5454.45,-1546.87 5444.45,-1543.37 5444.45,-1550.37"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node43" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node43"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6587.5,-424.87 6352.5,-424.87 6352.5,-388.87 6587.5,-388.87 6587.5,-424.87"/>
<text text-anchor="middle" x="6470" y="-402.83" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge47" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5177.84,-1519.84C5201.9,-1508.87 5223.8,-1493.72 5240,-1472.87 5294.05,-1403.31 5214.65,-744.09 5276,-680.87 5374.55,-579.32 5805.68,-727.39 5911,-632.87 5976.27,-574.3 5881.32,-496.98 5947,-438.87 6003.52,-388.88 6206.7,-390.31 6342.27,-397.47"/>
<polygon fill="black" stroke="black" points="6342.14,-400.97 6352.32,-398.02 6342.52,-393.98 6342.14,-400.97"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge48" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5230.81,-1574.09C5234,-1576.83 5237.07,-1579.76 5240,-1582.87 5304.61,-1651.61 5223.26,-1927.65 5276,-2005.87 5452.89,-2268.25 5696.02,-2095.68 5911,-2327.87 5939.43,-2358.58 5912.89,-2390.64 5947,-2414.87 6144.05,-2554.88 7879,-2510.06 8119,-2538.87 8575.98,-2593.74 9115.27,-2709.76 9323.93,-2756.61"/>
<polygon fill="black" stroke="black" points="9323.39,-2760.08 9333.91,-2758.86 9324.92,-2753.25 9323.39,-2760.08"/>
</g>
<!-- notes_utils.read_md -->
<g id="node103" class="node">
<title>notes_utils.read_md</title>
<g id="a_node103"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9483.5,-2098.87 9343.5,-2098.87 9343.5,-2062.87 9483.5,-2062.87 9483.5,-2098.87"/>
<text text-anchor="middle" x="9413.5" y="-2077.63" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge131" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8786.97,-1943.95C8956.48,-1981.06 9206.57,-2035.8 9333.05,-2063.48"/>
<polygon fill="black" stroke="black" points="9332.53,-2066.95 9343.04,-2065.67 9334.02,-2060.11 9332.53,-2066.95"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node104" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node104"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9582.5,-1610.37 9244.5,-1610.37 9244.5,-1573.37 9582.5,-1573.37 9582.5,-1610.37"/>
<text text-anchor="middle" x="9413.5" y="-1585.43" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge132" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8718.96,-1867.73C8811.68,-1834.04 8949.79,-1783.06 9069,-1735.87 9173.01,-1694.7 9293.31,-1643.42 9360.38,-1614.49"/>
<polygon fill="black" stroke="black" points="9362.09,-1617.56 9369.88,-1610.39 9359.32,-1611.14 9362.09,-1617.56"/>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge130" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6587.74,-414.94C6721.47,-421.78 6930.23,-424.41 6993,-379.87 7027.46,-355.42 6994.62,-316.45 7029,-291.87 7094.14,-245.31 7310.96,-246.33 7450.41,-252.37"/>
<polygon fill="black" stroke="black" points="7450.58,-255.88 7460.73,-252.83 7450.89,-248.89 7450.58,-255.88"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node45" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node45"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3463,-1384.87 3058,-1384.87 3058,-1342.87 3463,-1342.87 3463,-1384.87"/>
<text text-anchor="middle" x="3260.5" y="-1355.79" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge50" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3413.46,-1342.82C3489.13,-1332.34 3584.79,-1319.08 3680.66,-1305.8"/>
<polygon fill="black" stroke="black" points="3681.42,-1309.23 3690.84,-1304.39 3680.46,-1302.3 3681.42,-1309.23"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node46" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node46"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7859,-2133.87 7289,-2133.87 7289,-2089.87 7859,-2089.87 7859,-2133.87"/>
<text text-anchor="middle" x="7574" y="-2103.55" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge51" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7859.24,-2107.38C7943.48,-2102.2 8035.5,-2092.75 8119,-2075.87 8260.38,-2047.31 8416.7,-1988.28 8514.39,-1947.88"/>
<polygon fill="black" stroke="black" points="8515.77,-1951.1 8523.66,-1944.03 8513.08,-1944.64 8515.77,-1951.1"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge52" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7715.32,-2089.85C7829.75,-2078.5 7992.55,-2077.8 8119,-2138.87 8140.84,-2149.42 8133.2,-2169.26 8155,-2179.87 8246.45,-2224.39 8995.32,-2160.75 9069,-2230.87 9124.2,-2283.41 9065.56,-2506.67 9105,-2571.87 9161.73,-2665.66 9279.67,-2725.56 9351.88,-2755.04"/>
<polygon fill="black" stroke="black" points="9350.73,-2758.35 9361.31,-2758.83 9353.34,-2751.86 9350.73,-2758.35"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge53" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7859.14,-2103.43C8161.89,-2099.9 8653.78,-2109.95 9069,-2191.87 9177.39,-2213.26 9298.01,-2261.43 9363.55,-2289.81"/>
<polygon fill="black" stroke="black" points="9362.25,-2293.06 9372.82,-2293.85 9365.05,-2286.65 9362.25,-2293.06"/>
</g>
<!-- tg_client._download_messages -->
<g id="node48" class="node">
<title>tg_client._download_messages</title>
<g id="a_node48"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="3010.5,-1356.37 2300.5,-1356.37 2300.5,-1299.37 3010.5,-1299.37 3010.5,-1356.37"/>
<text text-anchor="middle" x="2655.5" y="-1316.53" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge54" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M3010.76,-1349.02C3023.17,-1349.76 3035.47,-1350.5 3047.55,-1351.22"/>
<polygon fill="black" stroke="black" points="3047.46,-1354.72 3057.65,-1351.82 3047.87,-1347.73 3047.46,-1354.72"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node49" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node49"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2826.5,-2970.87 2484.5,-2970.87 2484.5,-2934.87 2826.5,-2934.87 2826.5,-2970.87"/>
<text text-anchor="middle" x="2655.5" y="-2947.18" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node50" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node50"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="3022,-2005.37 2289,-2005.37 2289,-1940.37 3022,-1940.37 3022,-2005.37"/>
<text text-anchor="middle" x="2655.5" y="-1959.82" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge59" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2698.53,-1940.37C2768.7,-1887.99 2916.02,-1785.83 3058,-1736.87 3894.52,-1448.42 6144.17,-1450.23 7029,-1442.87 7513.43,-1438.84 7634.66,-1433.03 8119,-1442.87 8261.4,-1445.77 8426.83,-1453.36 8525.01,-1458.32"/>
<polygon fill="black" stroke="black" points="8525.01,-1461.82 8535.17,-1458.83 8525.36,-1454.83 8525.01,-1461.82"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge55" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2750.39,-1940.33C2875.1,-1897.11 3091.93,-1821.95 3197.79,-1785.26"/>
<polygon fill="black" stroke="black" points="3199.07,-1788.52 3207.37,-1781.94 3196.78,-1781.91 3199.07,-1788.52"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge58" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3022.08,-1961.91C3315.15,-1954.06 3736.95,-1944.87 4106,-1944.87 4106,-1944.87 4106,-1944.87 4996.5,-1944.87 5324.31,-1944.87 7524.92,-1918.89 8322.79,-1909.34"/>
<polygon fill="black" stroke="black" points="8323.02,-1912.84 8332.98,-1909.22 8322.94,-1905.84 8323.02,-1912.84"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge56" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2676.74,-1940.14C2730.41,-1855.34 2884.18,-1624.9 3058,-1477.87 3101.88,-1440.75 3159.62,-1409.53 3202.04,-1389.2"/>
<polygon fill="black" stroke="black" points="3203.57,-1392.34 3211.11,-1384.9 3200.58,-1386.02 3203.57,-1392.34"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge57" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M3022.32,-1981.27C3433.92,-1990.88 4122.47,-2007.41 4715,-2023.87 5651.46,-2049.89 6760.36,-2085.37 7278.57,-2102.22"/>
<polygon fill="black" stroke="black" points="7278.7,-2105.73 7288.81,-2102.56 7278.93,-2098.73 7278.7,-2105.73"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge60" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2668.9,-2005.59C2760.31,-2246.07 3331.02,-3734.71 3499,-3862.87 3715.98,-4028.42 3833.07,-3955.87 4106,-3955.87 4106,-3955.87 4106,-3955.87 5594.5,-3955.87 5905.54,-3955.87 6690.12,-3969.62 6993,-3898.87 7010.05,-3894.89 7011.87,-3886.51 7029,-3882.87 7265.95,-3832.59 7876.83,-3878.03 8119,-3882.87 8541.48,-3891.32 8647.01,-3898.92 9069,-3920.87 9138.39,-3924.48 9215.61,-3929.35 9279.24,-3933.59"/>
<polygon fill="black" stroke="black" points="9279.12,-3937.09 9289.33,-3934.27 9279.58,-3930.11 9279.12,-3937.09"/>
</g>
<!-- notes_utils.write_json -->
<g id="node52" class="node">
<title>notes_utils.write_json</title>
<g id="a_node52"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="8706,-3238.87 8518,-3238.87 8518,-3202.87 8706,-3202.87 8706,-3238.87"/>
<text text-anchor="middle" x="8612" y="-3216.83" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge61" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2824.93,-2005.44C2887.73,-2019.77 2959.03,-2038.68 3022,-2061.87 4074.7,-2449.54 4186.77,-2929.46 5276,-3197.87 5436.38,-3237.4 7961.49,-3224.73 8507.44,-3221.52"/>
<polygon fill="black" stroke="black" points="8507.68,-3225.01 8517.66,-3221.45 8507.64,-3218.01 8507.68,-3225.01"/>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge190" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9537.74,-3951.02C9596.03,-3950.22 9665.14,-3942.31 9722,-3915.87 9857.15,-3853.03 9966.69,-3703.08 10007.41,-3641.73"/>
<polygon fill="black" stroke="black" points="10010.58,-3643.29 10013.14,-3633.01 10004.73,-3639.45 10010.58,-3643.29"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node53" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node53"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-1195.87 1019,-1195.87 1019,-1121.87 1732,-1121.87 1732,-1195.87"/>
<text text-anchor="middle" x="1375.5" y="-1144.05" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge68" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1635.66,-1121.86C1679.74,-1116.69 1725.12,-1112.06 1768,-1108.87 2161.01,-1079.65 2260.41,-1089.87 2654.5,-1089.87 2654.5,-1089.87 2654.5,-1089.87 6471,-1089.87 6562.59,-1089.87 8051.33,-1072.16 8119,-1133.87 8218.87,-1224.96 8056.62,-1343.18 8155,-1435.87 8258.38,-1533.28 8440.3,-1507.61 8540.26,-1483.4"/>
<polygon fill="black" stroke="black" points="8541.4,-1486.72 8550.27,-1480.91 8539.72,-1479.92 8541.4,-1486.72"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge62" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1405.75,-1121.73C1466.58,-1046.36 1613.94,-873.36 1768,-763.87 2104.05,-525.06 2242.24,-490.87 2654.5,-490.87 2654.5,-490.87 2654.5,-490.87 5594.5,-490.87 6256.79,-490.87 7043.62,-509.02 7391.81,-517.98"/>
<polygon fill="black" stroke="black" points="7391.9,-521.49 7401.99,-518.25 7392.08,-514.49 7391.9,-521.49"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge63" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1440.39,-1121.73C1570.48,-1046.1 1862.83,-876.14 1969.54,-814.1"/>
<polygon fill="black" stroke="black" points="1971.5,-817.01 1978.39,-808.96 1967.99,-810.96 1971.5,-817.01"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge64" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1732.07,-1165.27C1998.65,-1170.07 2347.77,-1176.35 2530.59,-1179.64"/>
<polygon fill="black" stroke="black" points="2530.72,-1183.15 2540.78,-1179.83 2530.85,-1176.15 2530.72,-1183.15"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge65" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1732.06,-1182.85C2150.26,-1211.06 2824.47,-1256.53 3116.75,-1276.25"/>
<polygon fill="black" stroke="black" points="3116.77,-1279.75 3126.99,-1276.94 3117.24,-1272.77 3116.77,-1279.75"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge66" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1732.32,-1145.94C1780.94,-1144.18 1828.31,-1142.46 1869.74,-1140.95"/>
<polygon fill="black" stroke="black" points="1869.99,-1144.44 1879.86,-1140.58 1869.74,-1137.45 1869.99,-1144.44"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge67" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1475.07,-1196.01C1553.29,-1223.71 1666.05,-1259.77 1768,-1277.87 1938.13,-1308.08 2129.23,-1321.42 2290.32,-1326.87"/>
<polygon fill="black" stroke="black" points="2290.29,-1330.37 2300.4,-1327.2 2290.52,-1323.38 2290.29,-1330.37"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node54" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node54"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7890.5,-1995.37 7257.5,-1995.37 7257.5,-1934.37 7890.5,-1934.37 7890.5,-1995.37"/>
<text text-anchor="middle" x="7574" y="-1952.62" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge70" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7637.14,-1934.21C7743.19,-1881.93 7966.02,-1772.31 8155,-1680.87 8303.88,-1608.84 8480.72,-1524.7 8563.65,-1485.33"/>
<polygon fill="black" stroke="black" points="8565.28,-1488.43 8572.81,-1480.98 8562.27,-1482.11 8565.28,-1488.43"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge69" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7890.76,-1946.89C8028.37,-1939.05 8188.58,-1929.93 8322.91,-1922.28"/>
<polygon fill="black" stroke="black" points="8323.16,-1925.77 8332.94,-1921.71 8322.76,-1918.78 8323.16,-1925.77"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge71" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7799.53,-1995.39C8213.94,-2051.96 9058.11,-2168.41 9069,-2179.87 9129.25,-2243.3 9060.24,-2496.72 9105,-2571.87 9161.01,-2665.91 9278.92,-2725.65 9351.36,-2755.05"/>
<polygon fill="black" stroke="black" points="9350.25,-2758.37 9360.83,-2758.82 9352.84,-2751.87 9350.25,-2758.37"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge72" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7890.63,-1952.82C8198.94,-1950.46 8677.6,-1972.13 9069,-2101.87 9196.74,-2144.22 9326.63,-2241.65 9383.18,-2287.36"/>
<polygon fill="black" stroke="black" points="9381.02,-2290.11 9390.99,-2293.71 9385.44,-2284.68 9381.02,-2290.11"/>
</g>
<!-- tg_client.main -->
<g id="node55" class="node">
<title>tg_client.main</title>
<g id="a_node55"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-2102.87 366.5,-2102.87 366.5,-2010.87 934.5,-2010.87 934.5,-2102.87"/>
<text text-anchor="middle" x="650.5" y="-2037.83" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge73" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M707.64,-2010.75C885.95,-1869.1 1460.09,-1449.87 2009.5,-1449.87 2009.5,-1449.87 2009.5,-1449.87 3261.5,-1449.87 3880.85,-1449.87 4624.7,-1447.29 4892.35,-1446.27"/>
<polygon fill="black" stroke="black" points="4892.46,-1449.77 4902.44,-1446.24 4892.43,-1442.77 4892.46,-1449.77"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge74" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M870.48,-2102.94C919.22,-2112.14 970.74,-2121.06 1019,-2127.87 1095.46,-2138.67 1181.71,-2146.54 1250.1,-2151.77"/>
<polygon fill="black" stroke="black" points="1250.26,-2155.29 1260.49,-2152.56 1250.78,-2148.31 1250.26,-2155.29"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge75" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M934.83,-2083.15C963.26,-2085.54 991.69,-2087.82 1019,-2089.87 1098.14,-2095.81 1664.41,-2091.28 1732,-2132.87 1902.05,-2237.51 1979.28,-2487.97 2002.01,-2576.89"/>
<polygon fill="black" stroke="black" points="1998.63,-2577.82 2004.45,-2586.67 2005.42,-2576.12 1998.63,-2577.82"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge76" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M662.55,-2010.54C694.03,-1890.1 796.63,-1567.45 1019,-1435.87 1105.3,-1384.81 2505.1,-1369.3 3047.31,-1365.19"/>
<polygon fill="black" stroke="black" points="3047.62,-1368.69 3057.59,-1365.12 3047.56,-1361.69 3047.62,-1368.69"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge77" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M715.61,-2103.05C927.4,-2252.8 1628.77,-2726.42 2289,-2920.87 2347.92,-2938.23 2414.3,-2947.05 2474.17,-2951.3"/>
<polygon fill="black" stroke="black" points="2474.28,-2954.81 2484.5,-2951.99 2474.75,-2947.83 2474.28,-2954.81"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge78" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M934.76,-2044.99C1286.79,-2030.23 1888.64,-2004.99 2278.88,-1988.63"/>
<polygon fill="black" stroke="black" points="2279.08,-1992.12 2288.93,-1988.2 2278.79,-1985.13 2279.08,-1992.12"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge79" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M667.74,-2010.7C710.27,-1894.85 834.54,-1586.98 1019,-1388.87 1095.66,-1306.55 1207.7,-1240.46 1285.43,-1200.61"/>
<polygon fill="black" stroke="black" points="1287.4,-1203.54 1294.73,-1195.89 1284.23,-1197.3 1287.4,-1203.54"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge80" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M934.66,-2063.14C1209.36,-2068.68 1637.99,-2075.87 2009.5,-2075.87 2009.5,-2075.87 2009.5,-2075.87 3261.5,-2075.87 4750.52,-2075.87 6527.84,-2008.89 7247.05,-1978.99"/>
<polygon fill="black" stroke="black" points="7247.46,-1982.48 7257.3,-1978.57 7247.17,-1975.49 7247.46,-1982.48"/>
</g>
<!-- telegram_bot._t -->
<g id="node56" class="node">
<title>telegram_bot._t</title>
<g id="a_node56"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5697.5,-5683.87 5489.5,-5683.87 5489.5,-5647.87 5697.5,-5647.87 5697.5,-5683.87"/>
<text text-anchor="middle" x="5593.5" y="-5660" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node57" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node57"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5744.5,-5629.87 5442.5,-5629.87 5442.5,-5593.87 5744.5,-5593.87 5744.5,-5629.87"/>
<text text-anchor="middle" x="5593.5" y="-5607.08" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node58" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node58"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6574,-5583.87 6366,-5583.87 6366,-5547.87 6574,-5547.87 6574,-5583.87"/>
<text text-anchor="middle" x="6470" y="-5562.17" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge81" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5744.83,-5603.97C5918.29,-5594.84 6199.61,-5580.04 6355.65,-5571.84"/>
<polygon fill="black" stroke="black" points="6355.94,-5575.33 6365.75,-5571.3 6355.58,-5568.33 6355.94,-5575.33"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node59" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node59"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5744.5,-3801.87 5442.5,-3801.87 5442.5,-3765.87 5744.5,-3765.87 5744.5,-3801.87"/>
<text text-anchor="middle" x="5593.5" y="-3778.57" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge82" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5744.66,-3782.81C6135.82,-3779.57 7218.34,-3767.73 8119,-3730.87 8797.47,-3703.11 9610.46,-3645.49 9908.07,-3623.58"/>
<polygon fill="black" stroke="black" points="9908.73,-3627.04 9918.44,-3622.82 9908.21,-3620.06 9908.73,-3627.04"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node60" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node60"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9557,-3807.87 9270,-3807.87 9270,-3771.87 9557,-3771.87 9557,-3807.87"/>
<text text-anchor="middle" x="9413.5" y="-3784.18" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge83" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9492.61,-3771.86C9555,-3757.11 9644.5,-3735.1 9722,-3712.87 9805.95,-3688.8 9901.65,-3657.05 9962.53,-3636.31"/>
<polygon fill="black" stroke="black" points="9964.04,-3639.5 9972.37,-3632.96 9961.77,-3632.87 9964.04,-3639.5"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node61" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6554,-3889.87 6386,-3889.87 6386,-3853.87 6554,-3853.87 6554,-3889.87"/>
<text text-anchor="middle" x="6470" y="-3868.63" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node62" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node62"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7720,-4241.87 7428,-4241.87 7428,-4205.87 7720,-4205.87 7720,-4241.87"/>
<text text-anchor="middle" x="7574" y="-4219.71" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node63" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node63"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8868,-4012.87 8356,-4012.87 8356,-3970.87 8868,-3970.87 8868,-4012.87"/>
<text text-anchor="middle" x="8612" y="-3983.79" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge84" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7720.13,-4235.79C7860.7,-4244.04 8060.88,-4246.04 8119,-4196.87 8175.97,-4148.68 8099,-4082.2 8155,-4032.87 8250.24,-3948.97 8404.08,-3953.79 8506.37,-3969.29"/>
<polygon fill="black" stroke="black" points="8505.99,-3972.77 8516.41,-3970.87 8507.08,-3965.86 8505.99,-3972.77"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge268" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8868.16,-3976.23C9004.77,-3967.86 9167.4,-3957.89 9279.11,-3951.05"/>
<polygon fill="black" stroke="black" points="9279.66,-3954.52 9289.42,-3950.42 9279.23,-3947.53 9279.66,-3954.52"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node64" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="9575,-5549.87 9252,-5549.87 9252,-5513.87 9575,-5513.87 9575,-5549.87"/>
<text text-anchor="middle" x="9413.5" y="-5527.08" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- similar_utils._cos_sim -->
<g id="node65" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node65"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="10142,-5320.87 9909,-5320.87 9909,-5284.87 10142,-5284.87 10142,-5320.87"/>
<text text-anchor="middle" x="10025.5" y="-5298.08" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge85" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9575.01,-5545.69C9625.33,-5543 9678.92,-5532.25 9722,-5504.87 9748.89,-5487.78 9735,-5464.92 9758,-5442.87 9816.79,-5386.52 9902.75,-5346.9 9961.02,-5324.52"/>
<polygon fill="black" stroke="black" points="9962.37,-5327.75 9970.49,-5320.94 9959.9,-5321.2 9962.37,-5327.75"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node66" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5832,-5537.87 5355,-5537.87 5355,-5497.87 5832,-5497.87 5832,-5537.87"/>
<text text-anchor="middle" x="5593.5" y="-5510.8" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge86" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5832.02,-5530.91C6002.21,-5540.25 6223.82,-5552.42 6355.76,-5559.66"/>
<polygon fill="black" stroke="black" points="6355.71,-5563.16 6365.88,-5560.21 6356.09,-5556.17 6355.71,-5563.16"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge87" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5832.25,-5518.75C6541.17,-5521.34 8629.1,-5529 9241.7,-5531.25"/>
<polygon fill="black" stroke="black" points="9241.92,-5534.75 9251.93,-5531.28 9241.95,-5527.75 9241.92,-5534.75"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node67" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node67"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5869,-4682.87 5318,-4682.87 5318,-4630.87 5869,-4630.87 5869,-4682.87"/>
<text text-anchor="middle" x="5593.5" y="-4647.18" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge88" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5838.15,-4682.91C5866.04,-4695.26 5891.44,-4712.37 5911,-4735.87 5993.47,-4834.96 5875.03,-5207.92 5947,-5314.87 6040.33,-5453.57 6232.59,-5517.98 6355.92,-5546.09"/>
<polygon fill="black" stroke="black" points="6355.26,-5549.53 6365.78,-5548.3 6356.79,-5542.7 6355.26,-5549.53"/>
</g>
<!-- lot_io.get_lot -->
<g id="node68" class="node">
<title>lot_io.get_lot</title>
<g id="a_node68"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7646.5,-4501.87 7501.5,-4501.87 7501.5,-4465.87 7646.5,-4465.87 7646.5,-4501.87"/>
<text text-anchor="middle" x="7574" y="-4479.08" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge89" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5869.06,-4653.35C6269.97,-4647.65 6970.76,-4635.37 6993,-4618.87 7033.64,-4588.73 6988.7,-4541.47 7029,-4510.87 7099.42,-4457.41 7357.24,-4467.65 7491.1,-4477.05"/>
<polygon fill="black" stroke="black" points="7491.08,-4480.56 7501.3,-4477.78 7491.58,-4473.58 7491.08,-4480.56"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge154" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7646.53,-4495.35C7765.64,-4509.89 8002.99,-4518.49 8119,-4380.87 8194.06,-4291.83 8074.4,-2368.93 8155,-2284.87 8200.2,-2237.73 8375.98,-2240.07 8495.62,-2247.74"/>
<polygon fill="black" stroke="black" points="8495.72,-2251.25 8505.93,-2248.42 8496.18,-2244.27 8495.72,-2251.25"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node118" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node118"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9538.5,-4179.87 9288.5,-4179.87 9288.5,-4143.87 9538.5,-4143.87 9538.5,-4179.87"/>
<text text-anchor="middle" x="9413.5" y="-4155.71" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge155" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7646.95,-4488.6C7908.11,-4504.81 8804.62,-4551.77 9069,-4451.87 9216.13,-4396.28 9344.48,-4248.51 9392.44,-4188.13"/>
<polygon fill="black" stroke="black" points="9395.24,-4190.23 9398.67,-4180.21 9389.74,-4185.91 9395.24,-4190.23"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node69" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node69"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5160.5,-3818.87 4830.5,-3818.87 4830.5,-3782.87 5160.5,-3782.87 5160.5,-3818.87"/>
<text text-anchor="middle" x="4995.5" y="-3794.71" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge90" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5160.54,-3796.19C5245.23,-3793.78 5348.14,-3790.84 5432.27,-3788.44"/>
<polygon fill="black" stroke="black" points="5432.53,-3791.94 5442.43,-3788.15 5432.33,-3784.94 5432.53,-3791.94"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node70" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node70"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5107.5,-5656.87 4883.5,-5656.87 4883.5,-5620.87 5107.5,-5620.87 5107.5,-5656.87"/>
<text text-anchor="middle" x="4995.5" y="-5634.71" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge91" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5107.55,-5643.9C5213.59,-5648.71 5372.59,-5655.91 5479.32,-5660.75"/>
<polygon fill="black" stroke="black" points="5479.34,-5664.25 5489.49,-5661.21 5479.66,-5657.26 5479.34,-5664.25"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge92" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5107.55,-5633.84C5198.9,-5629.7 5329.55,-5623.79 5432.23,-5619.13"/>
<polygon fill="black" stroke="black" points="5432.56,-5622.62 5442.39,-5618.67 5432.24,-5615.63 5432.56,-5622.62"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node71" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node71"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5170,-5714.37 4821,-5714.37 4821,-5675.37 5170,-5675.37 5170,-5714.37"/>
<text text-anchor="middle" x="4995.5" y="-5687.97" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge93" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5170.09,-5686.43C5269.59,-5681.59 5391.63,-5675.65 5478.91,-5671.4"/>
<polygon fill="black" stroke="black" points="5479.29,-5674.89 5489.11,-5670.9 5478.95,-5667.89 5479.29,-5674.89"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge94" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5170.27,-5685.54C5194.2,-5681 5218.07,-5674.66 5240,-5665.87 5258.57,-5658.44 5257.31,-5646 5276,-5638.87 5324.79,-5620.27 5380.79,-5611.73 5431.99,-5608.36"/>
<polygon fill="black" stroke="black" points="5432.38,-5611.85 5442.16,-5607.76 5431.97,-5604.86 5432.38,-5611.85"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge95" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5170.35,-5705.89C5354.8,-5714.92 5654.45,-5721.98 5911,-5692.87 6090.07,-5672.55 6295.54,-5617.26 6400.08,-5586.77"/>
<polygon fill="black" stroke="black" points="6401.27,-5590.07 6409.88,-5583.89 6399.3,-5583.35 6401.27,-5590.07"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node72" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node72"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5210.5,-5602.37 4780.5,-5602.37 4780.5,-5561.37 5210.5,-5561.37 5210.5,-5602.37"/>
<text text-anchor="middle" x="4995.5" y="-5574.63" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge96" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5210.62,-5601.72C5220.67,-5604.68 5230.52,-5608.05 5240,-5611.87 5258.55,-5619.35 5257.31,-5631.75 5276,-5638.87 5340.31,-5663.4 5417.14,-5670.43 5478.99,-5671.19"/>
<polygon fill="black" stroke="black" points="5479.15,-5674.69 5489.18,-5671.26 5479.2,-5667.69 5479.15,-5674.69"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge97" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5210.83,-5592.66C5283.68,-5596.33 5363.79,-5600.36 5431.72,-5603.78"/>
<polygon fill="black" stroke="black" points="5431.92,-5607.3 5442.09,-5604.3 5432.28,-5600.3 5431.92,-5607.3"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge98" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5210.61,-5579.55C5527.51,-5576.1 6110.31,-5569.77 6355.53,-5567.11"/>
<polygon fill="black" stroke="black" points="6355.93,-5570.6 6365.89,-5566.99 6355.85,-5563.6 6355.93,-5570.6"/>
</g>
<!-- telegram_bot.main -->
<g id="node73" class="node">
<title>telegram_bot.main</title>
<g id="a_node73"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5161,-3893.87 4830,-3893.87 4830,-3849.87 5161,-3849.87 5161,-3893.87"/>
<text text-anchor="middle" x="4995.5" y="-3863.55" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge99" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5137.91,-3849.85C5171.57,-3843.64 5207.22,-3836.25 5240,-3827.87 5256.34,-3823.7 5259.51,-3819.41 5276,-3815.87 5326.25,-3805.1 5381.78,-3797.93 5432.12,-3793.17"/>
<polygon fill="black" stroke="black" points="5432.47,-3796.65 5442.11,-3792.25 5431.83,-3789.68 5432.47,-3796.65"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge100" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5161.31,-3865.77C5350.84,-3859.08 5671.34,-3848.79 5947,-3844.87 6928.24,-3830.94 7173.67,-3846.61 8155,-3847.87 8561.22,-3848.4 8664.2,-3881.81 9069,-3847.87 9154.45,-3840.71 9250.61,-3823.69 9319.4,-3809.93"/>
<polygon fill="black" stroke="black" points="9320.24,-3813.33 9329.35,-3807.93 9318.86,-3806.47 9320.24,-3813.33"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge101" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5161.13,-3871.87C5470.94,-3871.87 6131.41,-3871.87 6375.66,-3871.87"/>
<polygon fill="black" stroke="black" points="6375.93,-3875.37 6385.93,-3871.87 6375.93,-3868.37 6375.93,-3875.37"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge102" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M5023.4,-3893.93C5070.99,-3931.59 5174.6,-4007.52 5276,-4041.87 5430.42,-4094.19 6815.78,-4172.98 6993,-4191.87 7009.06,-4193.59 7012.92,-4195.36 7029,-4196.87 7159.78,-4209.18 7308.81,-4216.08 7417.77,-4219.82"/>
<polygon fill="black" stroke="black" points="7417.75,-4223.32 7427.86,-4220.16 7417.98,-4216.32 7417.75,-4223.32"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge103" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M5007.65,-3893.97C5046.87,-3972.83 5179.44,-4248.64 5240,-4491.87 5274.04,-4628.61 5238.92,-4670.93 5276,-4806.87 5352.05,-5085.67 5521.94,-5394.89 5575.79,-5489.1"/>
<polygon fill="black" stroke="black" points="5572.76,-5490.86 5580.78,-5497.79 5578.83,-5487.38 5572.76,-5490.86"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge104" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M5006.18,-3894.09C5040.76,-3973.89 5160.3,-4253.92 5240,-4491.87 5258.9,-4548.32 5230.7,-4582.26 5276,-4620.87 5286.14,-4629.52 5297.19,-4636.86 5308.86,-4643.06"/>
<polygon fill="black" stroke="black" points="5307.4,-4646.24 5317.91,-4647.58 5310.53,-4639.98 5307.4,-4646.24"/>
</g>
<!-- price_train._iter_lots -->
<g id="node74" class="node">
<title>price_train._iter_lots</title>
<g id="a_node74"><a xlink:title="Return all lots with generated ids.">
<polygon fill="none" stroke="black" points="7729.5,-2641.37 7418.5,-2641.37 7418.5,-2602.37 7729.5,-2602.37 7729.5,-2641.37"/>
<text text-anchor="middle" x="7574" y="-2614.97" font-family="Times,serif" font-size="28.00">price_train._iter_lots</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge105" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7729.51,-2634.88C7870.38,-2643.08 8064.57,-2643.97 8119,-2592.87 8219.48,-2498.54 8054.8,-2379.5 8155,-2284.87 8202.38,-2240.13 8376.84,-2241.71 8495.7,-2248.57"/>
<polygon fill="black" stroke="black" points="8495.75,-2252.08 8505.94,-2249.18 8496.17,-2245.09 8495.75,-2252.08"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node75" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node75"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8740.5,-1727.37 8483.5,-1727.37 8483.5,-1690.37 8740.5,-1690.37 8740.5,-1727.37"/>
<text text-anchor="middle" x="8612" y="-1702.43" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- price_train._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge106" class="edge">
<title>price_train._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7729.61,-2635.63C7871.11,-2644.45 8066.24,-2645.86 8119,-2592.87 8176.61,-2535.01 8105.52,-1923.83 8155,-1858.87 8229.12,-1761.58 8368.13,-1726.54 8473.27,-1714.35"/>
<polygon fill="black" stroke="black" points="8473.77,-1717.82 8483.33,-1713.24 8473.01,-1710.86 8473.77,-1717.82"/>
</g>
<!-- price_train.main -->
<g id="node76" class="node">
<title>price_train.main</title>
<g id="a_node76"><a xlink:title="Train price regression model and save it.">
<polygon fill="none" stroke="black" points="6585,-3527.87 6355,-3527.87 6355,-3491.87 6585,-3491.87 6585,-3527.87"/>
<text text-anchor="middle" x="6470" y="-3503.71" font-family="Times,serif" font-size="25.20">price_train.main</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge110" class="edge">
<title>price_train.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6519.33,-3528.02C6621.6,-3568.83 6861.31,-3677.53 6993,-3844.87 7023.25,-3883.31 6989.55,-3919.96 7029,-3948.87 7055.14,-3968.02 7902.17,-3982.3 8345.8,-3988.49"/>
<polygon fill="black" stroke="black" points="8345.83,-3991.99 8355.88,-3988.63 8345.93,-3984.99 8345.83,-3991.99"/>
</g>
<!-- price_train.main&#45;&gt;price_train._iter_lots -->
<g id="edge107" class="edge">
<title>price_train.main&#45;&gt;price_train._iter_lots</title>
<path fill="none" stroke="black" d="M6543.22,-3491.86C6660.63,-3458.36 6890.1,-3374.33 6993,-3208.87 7058.04,-3104.3 6941.81,-2742.84 7029,-2655.87 7080.73,-2604.28 7267.99,-2602.56 7408.45,-2609.31"/>
<polygon fill="black" stroke="black" points="7408.32,-2612.81 7418.48,-2609.81 7408.67,-2605.82 7408.32,-2612.81"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node77" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node77"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="8119,-5189.37 7029,-5189.37 7029,-5112.37 8119,-5112.37 8119,-5189.37"/>
<text text-anchor="middle" x="7574" y="-5134.97" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.train_price_regression -->
<g id="edge108" class="edge">
<title>price_train.main&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6531.7,-3527.88C6645.98,-3565.42 6890.74,-3663.94 6993,-3844.87 7027.4,-3905.74 6981.05,-5051.99 7029,-5102.87 7118.25,-5197.59 7268.19,-5204.53 7388.08,-5190.6"/>
<polygon fill="black" stroke="black" points="7388.62,-5194.06 7398.12,-5189.38 7387.77,-5187.11 7388.62,-5194.06"/>
</g>
<!-- price_utils.save_price_model -->
<g id="node78" class="node">
<title>price_utils.save_price_model</title>
<g id="a_node78"><a xlink:title="Write ``model`` parameters to ``path`` as JSON.">
<polygon fill="none" stroke="black" points="7786.5,-3337.37 7361.5,-3337.37 7361.5,-3298.37 7786.5,-3298.37 7786.5,-3337.37"/>
<text text-anchor="middle" x="7574" y="-3310.97" font-family="Times,serif" font-size="28.00">price_utils.save_price_model</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;price_utils.save_price_model -->
<g id="edge109" class="edge">
<title>price_train.main&#45;&gt;price_utils.save_price_model</title>
<path fill="none" stroke="black" d="M6519,-3491.74C6614.49,-3456.6 6835.74,-3379.8 7029,-3346.87 7134.01,-3328.98 7251.92,-3321.22 7351.06,-3318.14"/>
<polygon fill="black" stroke="black" points="7351.31,-3321.63 7361.2,-3317.84 7351.1,-3314.64 7351.31,-3321.63"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node79" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node79"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7812.5,-3529.87 7335.5,-3529.87 7335.5,-3489.87 7812.5,-3489.87 7812.5,-3529.87"/>
<text text-anchor="middle" x="7574" y="-3502.8" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- price_train.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge111" class="edge">
<title>price_train.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6585.04,-3509.87C6758.68,-3509.87 7093.57,-3509.87 7324.98,-3509.87"/>
<polygon fill="black" stroke="black" points="7325.23,-3513.37 7335.23,-3509.87 7325.23,-3506.37 7325.23,-3513.37"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node85" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node85"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="8791.5,-5235.87 8432.5,-5235.87 8432.5,-5199.87 8791.5,-5199.87 8791.5,-5235.87"/>
<text text-anchor="middle" x="8612" y="-5212.18" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge117" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8119.17,-5186.07C8228.13,-5193.11 8335.55,-5200.06 8422.06,-5205.65"/>
<polygon fill="black" stroke="black" points="8422.03,-5209.16 8432.24,-5206.31 8422.48,-5202.17 8422.03,-5209.16"/>
</g>
<!-- price_utils.save_price_model&#45;&gt;notes_utils.write_json -->
<g id="edge118" class="edge">
<title>price_utils.save_price_model&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7786.69,-3335.57C7890.35,-3336.63 8014.92,-3326.25 8119,-3283.87 8138.56,-3275.91 8135.47,-3260.91 8155,-3252.87 8268.82,-3206.02 8412.1,-3204.19 8507.37,-3210.03"/>
<polygon fill="black" stroke="black" points="8507.38,-3213.54 8517.59,-3210.7 8507.84,-3206.56 8507.38,-3213.54"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node80" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node80"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7689.5,-4555.87 7458.5,-4555.87 7458.5,-4519.87 7689.5,-4519.87 7689.5,-4555.87"/>
<text text-anchor="middle" x="7574" y="-4533.83" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node81" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node81"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6611.5,-4701.87 6328.5,-4701.87 6328.5,-4665.87 6611.5,-4665.87 6611.5,-4701.87"/>
<text text-anchor="middle" x="6470" y="-4678.28" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge112" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6546.72,-4701.9C6655.91,-4723.28 6859.15,-4745.26 6993,-4651.87 7025.64,-4629.1 6996.33,-4592.61 7029,-4569.87 7094.3,-4524.44 7308.55,-4524.89 7447.89,-4530.54"/>
<polygon fill="black" stroke="black" points="7448.07,-4534.05 7458.2,-4530.98 7448.36,-4527.06 7448.07,-4534.05"/>
</g>
<!-- log_utils.init_logger -->
<g id="node82" class="node">
<title>log_utils.init_logger</title>
<g id="a_node82"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6817.5,-5047.87 6122.5,-5047.87 6122.5,-4965.87 6817.5,-4965.87 6817.5,-5047.87"/>
<text text-anchor="middle" x="6470" y="-4989.89" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge113" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6817.75,-5036.39C6883.3,-5025.37 6945.96,-5000.87 6993,-4953.87 7048.47,-4898.46 6974.02,-4658.78 7029,-4602.87 7085.54,-4545.38 7305.82,-4535.53 7448.15,-4535.44"/>
<polygon fill="black" stroke="black" points="7448.25,-4538.94 7458.25,-4535.45 7448.26,-4531.94 7448.25,-4538.94"/>
</g>
<!-- log_utils.get_logger -->
<g id="node83" class="node">
<title>log_utils.get_logger</title>
<g id="a_node83"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7642.5,-5039.87 7505.5,-5039.87 7505.5,-5003.87 7642.5,-5003.87 7642.5,-5039.87"/>
<text text-anchor="middle" x="7574" y="-5018.63" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge114" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6817.79,-5005.27C7057.09,-5007.48 7356.25,-5012.43 7495.29,-5017.14"/>
<polygon fill="black" stroke="black" points="7495.31,-5020.65 7505.42,-5017.5 7495.55,-5013.65 7495.31,-5020.65"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge115" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7505.42,-5024.41C7373.1,-5025.56 7071.47,-5022.42 6827.88,-5018.09"/>
<polygon fill="black" stroke="black" points="6827.85,-5014.59 6817.79,-5017.91 6827.72,-5021.59 6827.85,-5014.59"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node84" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node84"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6656.5,-4104.87 6283.5,-4104.87 6283.5,-4068.87 6656.5,-4068.87 6656.5,-4104.87"/>
<text text-anchor="middle" x="6470" y="-4080.71" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge116" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6656.61,-4073.49C6770.17,-4076.1 6909.26,-4100.59 6993,-4191.87 7089.45,-4297.01 6924.99,-4413.2 7029,-4510.87 7087.35,-4565.67 7306.47,-4559.8 7448.18,-4549.53"/>
<polygon fill="black" stroke="black" points="7448.53,-4553.02 7458.25,-4548.79 7448.02,-4546.04 7448.53,-4553.02"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node86" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node86"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="5911,-4798.37 5276,-4798.37 5276,-4745.37 5911,-4745.37 5911,-4798.37"/>
<text text-anchor="middle" x="5593.5" y="-4761.67" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.load_price_model -->
<g id="node87" class="node">
<title>price_utils.load_price_model</title>
<g id="a_node87"><a xlink:title="Return ``(model, currencies, counts)`` loaded from ``path``.">
<polygon fill="none" stroke="black" points="6704.5,-4944.87 6235.5,-4944.87 6235.5,-4902.87 6704.5,-4902.87 6704.5,-4944.87"/>
<text text-anchor="middle" x="6470" y="-4915.79" font-family="Times,serif" font-size="31.36">price_utils.load_price_model</text>
</a>
</g>
</g>
<!-- price_utils.load_price_model&#45;&gt;notes_utils.load_json -->
<g id="edge119" class="edge">
<title>price_utils.load_price_model&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6704.62,-4937.76C7311.66,-4971.37 8903.31,-5042.83 9069,-4878.87 9127.83,-4820.66 9063.13,-4206.26 9105,-4134.87 9157.57,-4045.25 9270.22,-3991.37 9343.59,-3964.41"/>
<polygon fill="black" stroke="black" points="9345.01,-3967.62 9353.23,-3960.94 9342.64,-3961.03 9345.01,-3967.62"/>
</g>
<!-- price_utils.predict_price -->
<g id="node88" class="node">
<title>price_utils.predict_price</title>
<g id="a_node88"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="7779,-5289.37 7369,-5289.37 7369,-5246.37 7779,-5246.37 7779,-5289.37"/>
<text text-anchor="middle" x="7574" y="-5259.73" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node89" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node89"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="8805.5,-5327.37 8418.5,-5327.37 8418.5,-5288.37 8805.5,-5288.37 8805.5,-5327.37"/>
<text text-anchor="middle" x="8612" y="-5300.97" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node90" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node90"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="10293,-5501.87 9758,-5501.87 9758,-5451.87 10293,-5451.87 10293,-5501.87"/>
<text text-anchor="middle" x="10025.5" y="-5467.19" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node91" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node91"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="9670,-5495.87 9157,-5495.87 9157,-5457.87 9670,-5457.87 9670,-5495.87"/>
<text text-anchor="middle" x="9413.5" y="-5470.15" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge120" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M9670.1,-5476.87C9695.74,-5476.87 9721.85,-5476.87 9747.69,-5476.87"/>
<polygon fill="black" stroke="black" points="9747.96,-5480.37 9757.96,-5476.87 9747.96,-5473.37 9747.96,-5480.37"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node92" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node92"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6830.5,-5305.37 6109.5,-5305.37 6109.5,-5246.37 6830.5,-5246.37 6830.5,-5305.37"/>
<text text-anchor="middle" x="6470" y="-5264.19" font-family="Times,serif" font-size="46.48">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge121" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6731.11,-5246.37C6878.14,-5229.69 7063.9,-5208.62 7223.5,-5190.52"/>
<polygon fill="black" stroke="black" points="7223.95,-5193.99 7233.49,-5189.38 7223.16,-5187.03 7223.95,-5193.99"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge122" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6830.69,-5273.26C7005.19,-5272 7208.92,-5270.52 7358.76,-5269.43"/>
<polygon fill="black" stroke="black" points="7359.02,-5272.93 7369,-5269.35 7358.97,-5265.93 7359.02,-5272.93"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge123" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6830.76,-5292.58C6896.69,-5295.11 6964.9,-5297.37 7029,-5298.87 7524.31,-5310.49 8107.09,-5310.2 8408.13,-5309.02"/>
<polygon fill="black" stroke="black" points="8408.29,-5312.52 8418.28,-5308.98 8408.26,-5305.52 8408.29,-5312.52"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge124" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6830.74,-5304.17C6896.67,-5309.01 6964.89,-5313.78 7029,-5317.87 7513.12,-5348.75 7634.93,-5343.14 8119,-5374.87 8492.07,-5399.33 8925.08,-5434.95 9183.51,-5456.98"/>
<polygon fill="black" stroke="black" points="9183.51,-5460.49 9193.77,-5457.85 9184.11,-5453.51 9183.51,-5460.49"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node93" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node93"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="7944,-5441.87 7204,-5441.87 7204,-5383.87 7944,-5383.87 7944,-5441.87"/>
<text text-anchor="middle" x="7574" y="-5401.59" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge125" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7779.92,-5383.85C7883.47,-5365.72 8009.96,-5338.2 8119,-5298.87 8136.02,-5292.74 8137.77,-5285.4 8155,-5279.87 8240.53,-5252.44 8338.89,-5237.14 8422.31,-5228.62"/>
<polygon fill="black" stroke="black" points="8422.8,-5232.08 8432.41,-5227.61 8422.11,-5225.12 8422.8,-5232.08"/>
</g>
<!-- config_utils.load_config -->
<g id="node94" class="node">
<title>config_utils.load_config</title>
<g id="a_node94"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10242,-4652.37 9809,-4652.37 9809,-4605.37 10242,-4605.37 10242,-4652.37"/>
<text text-anchor="middle" x="10025.5" y="-4620.37" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- message_utils.build_prompt -->
<g id="node95" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node95"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8761.5,-2876.87 8462.5,-2876.87 8462.5,-2840.87 8761.5,-2840.87 8761.5,-2876.87"/>
<text text-anchor="middle" x="8612" y="-2854.08" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node96" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node96"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7786.5,-2853.87 7361.5,-2853.87 7361.5,-2817.87 7786.5,-2817.87 7786.5,-2853.87"/>
<text text-anchor="middle" x="7574" y="-2830" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge127" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7786.68,-2853.22C7918.96,-2858.96 8072.7,-2854.59 8119,-2808.87 8164.79,-2763.66 8123.76,-2287.13 8155,-2230.87 8232.04,-2092.13 8396.25,-1998.18 8505.13,-1948.31"/>
<polygon fill="black" stroke="black" points="8506.84,-1951.38 8514.5,-1944.06 8503.95,-1945 8506.84,-1951.38"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge126" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7786.52,-2840.57C7983.76,-2844.95 8273.57,-2851.38 8451.86,-2855.34"/>
<polygon fill="black" stroke="black" points="8452.04,-2858.84 8462.11,-2855.57 8452.19,-2851.85 8452.04,-2858.84"/>
</g>
<!-- caption_io.read_caption -->
<g id="node97" class="node">
<title>caption_io.read_caption</title>
<g id="a_node97"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8777.5,-2795.37 8446.5,-2795.37 8446.5,-2758.37 8777.5,-2758.37 8777.5,-2795.37"/>
<text text-anchor="middle" x="8612" y="-2770.43" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge128" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7786.56,-2826.13C7887.26,-2821.3 8009.37,-2815.16 8119,-2808.87 8224.33,-2802.83 8342.29,-2795.19 8436.3,-2788.89"/>
<polygon fill="black" stroke="black" points="8436.73,-2792.37 8446.48,-2788.21 8436.27,-2785.39 8436.73,-2792.37"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge247" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8777.69,-2776.87C8936.29,-2776.87 9171.45,-2776.87 9306.58,-2776.87"/>
<polygon fill="black" stroke="black" points="9306.94,-2780.37 9316.94,-2776.87 9306.94,-2773.37 9306.94,-2780.37"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge248" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8644.83,-2758.36C8770.73,-2685.14 9233.72,-2415.86 9372.76,-2334.99"/>
<polygon fill="black" stroke="black" points="9374.56,-2337.99 9381.44,-2329.94 9371.04,-2331.94 9374.56,-2337.99"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge245" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8696.77,-2758.32C8800.81,-2740.79 8975.91,-2730.33 9069,-2831.87 9150.44,-2920.71 9022.13,-3828.37 9105,-3915.87 9160.76,-3974.75 9258.03,-3973.46 9328.26,-3962.56"/>
<polygon fill="black" stroke="black" points="9329.12,-3965.96 9338.41,-3960.89 9327.98,-3959.06 9329.12,-3965.96"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge244" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8645.59,-2758.31C8728.57,-2709.4 8949.7,-2568.64 9069,-2392.87 9097.42,-2351.01 9074.24,-2325.05 9105,-2284.87 9172.69,-2196.45 9290.23,-2134.05 9358.71,-2103.11"/>
<polygon fill="black" stroke="black" points="9360.33,-2106.22 9368.04,-2098.95 9357.48,-2099.82 9360.33,-2106.22"/>
</g>
<!-- caption_io._get_langs -->
<g id="node152" class="node">
<title>caption_io._get_langs</title>
<g id="a_node152"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9522.5,-3906.87 9304.5,-3906.87 9304.5,-3870.87 9522.5,-3870.87 9522.5,-3906.87"/>
<text text-anchor="middle" x="9413.5" y="-3884.09" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge246" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8697.17,-2758.3C8801.21,-2740.86 8975.88,-2730.63 9069,-2831.87 9143.14,-2912.48 9035.4,-3732.32 9105,-3816.87 9150.07,-3871.64 9228.11,-3889.44 9294.29,-3893.65"/>
<polygon fill="black" stroke="black" points="9294.21,-3897.15 9304.38,-3894.2 9294.59,-3890.16 9294.21,-3897.15"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node98" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node98"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="7692,-2415.87 7456,-2415.87 7456,-2379.87 7692,-2379.87 7692,-2415.87"/>
<text text-anchor="middle" x="7574" y="-2393.83" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta -->
<g id="node99" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node99"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7688.5,-1061.87 7459.5,-1061.87 7459.5,-1025.87 7688.5,-1025.87 7688.5,-1061.87"/>
<text text-anchor="middle" x="7574" y="-1039.83" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node100" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node100"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8695.5,-1426.87 8528.5,-1426.87 8528.5,-1390.87 8695.5,-1390.87 8695.5,-1426.87"/>
<text text-anchor="middle" x="8612" y="-1405.17" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge129" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7688.72,-1034.35C7829.69,-1025.21 8058.75,-1019.97 8119,-1075.87 8207.1,-1157.62 8070.36,-1258.55 8155,-1343.87 8249.02,-1438.65 8414.33,-1437.46 8517.97,-1425.16"/>
<polygon fill="black" stroke="black" points="8518.62,-1428.6 8528.11,-1423.9 8517.76,-1421.66 8518.62,-1428.6"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge188" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8695.7,-1401.47C8812.64,-1392.97 9017.8,-1386 9069,-1435.87 9136.26,-1501.39 9058.89,-1775.08 9105,-1856.87 9162.11,-1958.19 9286.15,-2026.11 9358.02,-2058.64"/>
<polygon fill="black" stroke="black" points="9356.81,-2061.93 9367.37,-2062.81 9359.66,-2055.54 9356.81,-2061.93"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge189" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8695.91,-1404.78C8788.34,-1402.29 8941.6,-1404.33 9069,-1435.87 9185.35,-1464.68 9310.88,-1532.02 9373.02,-1568.08"/>
<polygon fill="black" stroke="black" points="9371.32,-1571.14 9381.72,-1573.17 9374.85,-1565.1 9371.32,-1571.14"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge187" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9462.1,-2098.93C9530.72,-2127.5 9656.38,-2189.85 9722,-2284.87 9877.61,-2510.22 9998.96,-3414.01 10020.94,-3586.39"/>
<polygon fill="black" stroke="black" points="10017.48,-3586.98 10022.21,-3596.46 10024.43,-3586.1 10017.48,-3586.98"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node105" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node105"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7719,-1507.87 7429,-1507.87 7429,-1471.87 7719,-1471.87 7719,-1507.87"/>
<text text-anchor="middle" x="7574" y="-1485.71" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge136" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7719.05,-1486.12C7938.03,-1480.41 8347.91,-1469.73 8525.42,-1465.1"/>
<polygon fill="black" stroke="black" points="8525.58,-1468.6 8535.49,-1464.84 8525.4,-1461.6 8525.58,-1468.6"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node106" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node106"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="10169.5,-502.87 9881.5,-502.87 9881.5,-466.87 10169.5,-466.87 10169.5,-502.87"/>
<text text-anchor="middle" x="10025.5" y="-480.09" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge138" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9708.78,-444.85C9772.61,-442.02 9837.06,-439.17 9890.94,-436.78"/>
<polygon fill="black" stroke="black" points="9891.39,-440.27 9901.22,-436.33 9891.08,-433.28 9891.39,-440.27"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge137" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9708.78,-470.9C9764.93,-473.38 9821.57,-475.89 9871.06,-478.08"/>
<polygon fill="black" stroke="black" points="9871.04,-481.58 9881.19,-478.53 9871.35,-474.59 9871.04,-481.58"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node108" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node108"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9590,-1231.87 9237,-1231.87 9237,-1195.87 9590,-1195.87 9590,-1231.87"/>
<text text-anchor="middle" x="9413.5" y="-1208" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node109" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node109"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8750,-1334.87 8474,-1334.87 8474,-1298.87 8750,-1298.87 8750,-1334.87"/>
<text text-anchor="middle" x="8612" y="-1312.09" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge140" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8750.44,-1299.17C8893.04,-1280.8 9115.39,-1252.15 9262.48,-1233.2"/>
<polygon fill="black" stroke="black" points="9263.03,-1236.66 9272.5,-1231.91 9262.13,-1229.72 9263.03,-1236.66"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node110" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node110"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7792,-3721.87 7356,-3721.87 7356,-3677.87 7792,-3677.87 7792,-3721.87"/>
<text text-anchor="middle" x="7574" y="-3691.55" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node111" class="node">
<title>lot_io.get_seller</title>
<g id="a_node111"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8712.5,-3838.87 8511.5,-3838.87 8511.5,-3802.87 8712.5,-3802.87 8712.5,-3838.87"/>
<text text-anchor="middle" x="8612" y="-3815.28" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge141" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7705.87,-3677.87C7822.18,-3665.11 7992.82,-3663.61 8119,-3735.87 8143.71,-3750.02 8130.32,-3774.67 8155,-3788.87 8260.64,-3849.65 8403.62,-3849.03 8501.14,-3838.8"/>
<polygon fill="black" stroke="black" points="8501.76,-3842.25 8511.32,-3837.68 8500.99,-3835.29 8501.76,-3842.25"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node112" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node112"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7830,-1339.87 7318,-1339.87 7318,-1293.87 7830,-1293.87 7830,-1339.87"/>
<text text-anchor="middle" x="7574" y="-1308.43" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge143" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7682.03,-1293.84C7800.15,-1274.78 7990.52,-1263.6 8119,-1353.87 8151.57,-1376.76 8122.33,-1413.13 8155,-1435.87 8264.49,-1512.09 8426.99,-1499.8 8525.55,-1482.41"/>
<polygon fill="black" stroke="black" points="8526.26,-1485.84 8535.47,-1480.6 8525.01,-1478.95 8526.26,-1485.84"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge146" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7830.08,-1323.15C7935.35,-1339.63 8048.89,-1378.1 8119,-1462.87 8188.58,-1547.01 8100.06,-1858.52 8155,-1952.87 8244.14,-2105.96 8444.47,-2197.6 8547.36,-2236.27"/>
<polygon fill="black" stroke="black" points="8546.41,-2239.65 8557,-2239.85 8548.84,-2233.09 8546.41,-2239.65"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge144" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7693.9,-1339.89C7818.75,-1356.45 8011.55,-1359.08 8119,-1245.87 8190.04,-1171.02 8087.24,-860.71 8155,-782.87 8223.23,-704.49 8337.49,-679.54 8434.57,-674.16"/>
<polygon fill="black" stroke="black" points="8434.99,-677.64 8444.81,-673.66 8434.65,-670.65 8434.99,-677.64"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge142" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7830.25,-1325.49C7934.4,-1342.54 8047.04,-1380.8 8119,-1462.87 8199.68,-1554.89 8078.76,-1640.14 8155,-1735.87 8205.98,-1799.89 8283.66,-1839.8 8360.54,-1864.68"/>
<polygon fill="black" stroke="black" points="8359.8,-1868.12 8370.39,-1867.79 8361.91,-1861.44 8359.8,-1868.12"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge145" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7830.09,-1316.87C8029.18,-1316.87 8298.78,-1316.87 8463.5,-1316.87"/>
<polygon fill="black" stroke="black" points="8463.71,-1320.37 8473.71,-1316.87 8463.71,-1313.37 8463.71,-1320.37"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node114" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node114"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="8714,-2383.87 8510,-2383.87 8510,-2347.87 8714,-2347.87 8714,-2383.87"/>
<text text-anchor="middle" x="8612" y="-2360" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node115" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node115"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8771,-3410.87 8453,-3410.87 8453,-3370.87 8771,-3370.87 8771,-3410.87"/>
<text text-anchor="middle" x="8612" y="-3383.8" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node116" class="node">
<title>lot_io.write_lots</title>
<g id="a_node116"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7675.5,-3471.87 7472.5,-3471.87 7472.5,-3435.87 7675.5,-3435.87 7675.5,-3471.87"/>
<text text-anchor="middle" x="7574" y="-3448.28" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge152" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7675.69,-3461.7C7813.36,-3470.28 8051.01,-3476.88 8119,-3426.87 8156.38,-3399.38 8120.29,-3359.67 8155,-3328.87 8252.23,-3242.62 8405.7,-3221.96 8507.35,-3218.62"/>
<polygon fill="black" stroke="black" points="8507.73,-3222.11 8517.63,-3218.33 8507.54,-3215.11 8507.73,-3222.11"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge150" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7675.58,-3445.47C7813.73,-3436.12 8052.64,-3428.54 8119,-3480.87 8163.72,-3516.15 8118.06,-3560.52 8155,-3603.87 8249.33,-3714.58 8412.9,-3772.94 8516.36,-3800.3"/>
<polygon fill="black" stroke="black" points="8515.62,-3803.72 8526.18,-3802.85 8517.38,-3796.94 8515.62,-3803.72"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge149" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7675.55,-3460.26C7812.14,-3467.04 8047.53,-3471.42 8119,-3426.87 8147.03,-3409.41 8127.64,-3380.37 8155,-3361.87 8494.12,-3132.57 8787.14,-3544.76 9069,-3247.87 9145.39,-3167.41 9049.15,-2845.75 9105,-2749.87 9160.02,-2655.43 9277.98,-2595.9 9350.75,-2566.64"/>
<polygon fill="black" stroke="black" points="9352.25,-2569.81 9360.27,-2562.89 9349.68,-2563.3 9352.25,-2569.81"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge151" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7675.63,-3453.16C7785.09,-3451.39 7965.05,-3445.56 8119,-3426.87 8135.18,-3424.91 8138.83,-3421.95 8155,-3419.87 8249.79,-3407.69 8356.36,-3400.56 8442.62,-3396.41"/>
<polygon fill="black" stroke="black" points="8442.95,-3399.9 8452.77,-3395.93 8442.62,-3392.91 8442.95,-3399.9"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node117" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node117"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8704.5,-2955.87 8519.5,-2955.87 8519.5,-2919.87 8704.5,-2919.87 8704.5,-2955.87"/>
<text text-anchor="middle" x="8612" y="-2933.09" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node119" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node119"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8688.5,-3594.87 8535.5,-3594.87 8535.5,-3558.87 8688.5,-3558.87 8688.5,-3594.87"/>
<text text-anchor="middle" x="8612" y="-3573.17" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge153" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8688.71,-3591.11C8791.46,-3614.56 8973.21,-3671.51 9069,-3793.87 9118.22,-3856.74 9059.44,-3904.3 9105,-3969.87 9165.19,-4056.51 9278.39,-4112.01 9349.37,-4140"/>
<polygon fill="black" stroke="black" points="9348.51,-4143.42 9359.1,-4143.77 9351.04,-4136.89 9348.51,-4143.42"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node120" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node120"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8718.5,-499.87 8505.5,-499.87 8505.5,-463.87 8718.5,-463.87 8718.5,-499.87"/>
<text text-anchor="middle" x="8612" y="-477.71" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node121" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node121"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-4815.87 0,-4815.87 0,-4779.87 282,-4779.87 282,-4815.87"/>
<text text-anchor="middle" x="141" y="-4793.83" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node122" class="node">
<title>clean_data:cli</title>
<g id="a_node122"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4797.87" rx="37.29" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4796.27" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;clean_data:cli -->
<!-- tg_client:cli -->
<g id="node178" class="node">
<title>tg_client:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4797.87" rx="32.86" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4796.27" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;tg_client:cli -->
<!-- debug_dump.parse_url -->
<g id="node123" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node123"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7723.5,-4031.87 7424.5,-4031.87 7424.5,-3995.87 7723.5,-3995.87 7723.5,-4031.87"/>
<text text-anchor="middle" x="7574" y="-4008" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node124" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node124"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8833,-4077.87 8391,-4077.87 8391,-4041.87 8833,-4041.87 8833,-4077.87"/>
<text text-anchor="middle" x="8612" y="-4054.28" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node125" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node125"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7828,-4655.37 7320,-4655.37 7320,-4612.37 7828,-4612.37 7828,-4655.37"/>
<text text-anchor="middle" x="7574" y="-4625.73" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge158" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7828.1,-4620.26C8231.75,-4596.04 8984.65,-4539.61 9069,-4451.87 9118.13,-4400.76 9067.17,-4194.83 9105,-4134.87 9160.84,-4046.36 9273.88,-3991.83 9346.25,-3964.48"/>
<polygon fill="black" stroke="black" points="9347.58,-3967.71 9355.74,-3960.96 9345.15,-3961.15 9347.58,-3967.71"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge157" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7828.11,-4648.49C7949.81,-4649.51 8078.07,-4639.68 8119,-4597.87 8181.55,-4533.97 8105.57,-3868.39 8155,-3793.87 8239.01,-3667.23 8418.31,-3612.6 8525.35,-3590.52"/>
<polygon fill="black" stroke="black" points="8526.04,-3593.96 8535.16,-3588.55 8524.66,-3587.09 8526.04,-3593.96"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node126" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node126"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9639.5,-4570.87 9187.5,-4570.87 9187.5,-4526.87 9639.5,-4526.87 9639.5,-4570.87"/>
<text text-anchor="middle" x="9413.5" y="-4540.55" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge159" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9436.54,-4526.73C9489.86,-4472.42 9628.34,-4326.97 9722,-4188.87 9856.11,-3991.14 9975.64,-3727.04 10012.7,-3642.28"/>
<polygon fill="black" stroke="black" points="10015.92,-3643.63 10016.71,-3633.07 10009.5,-3640.84 10015.92,-3643.63"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node127" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node127"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7821,-3597.37 7327,-3597.37 7327,-3548.37 7821,-3548.37 7821,-3597.37"/>
<text text-anchor="middle" x="7574" y="-3563.69" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge162" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7821.17,-3560.95C7924.29,-3556.52 8045.43,-3552.04 8155,-3549.87 8561.14,-3541.82 8663.01,-3536.08 9069,-3549.87 9372.14,-3560.17 9728.45,-3588.8 9908.21,-3604.4"/>
<polygon fill="black" stroke="black" points="9907.95,-3607.9 9918.22,-3605.28 9908.56,-3600.92 9907.95,-3607.9"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge160" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7821.1,-3588.77C7945.07,-3590.85 8077.72,-3581.97 8119,-3538.87 8190.41,-3464.32 8099.1,-1767.67 8155,-1680.87 8237.46,-1552.81 8417.75,-1498.19 8525.28,-1476.29"/>
<polygon fill="black" stroke="black" points="8526.01,-1479.72 8535.13,-1474.33 8524.64,-1472.85 8526.01,-1479.72"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge165" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7821.3,-3588.61C7945.1,-3590.61 8077.53,-3581.71 8119,-3538.87 8211.78,-3443.03 8062.06,-2434.56 8155,-2338.87 8204.26,-2288.16 8406.11,-2294.99 8524.1,-2303.81"/>
<polygon fill="black" stroke="black" points="8523.96,-2307.31 8534.19,-2304.58 8524.49,-2300.33 8523.96,-2307.31"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge164" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7821.3,-3582.51C7916.21,-3579.79 8024.47,-3568.69 8119,-3538.87 8136.88,-3533.23 8137.07,-3522.37 8155,-3516.87 8252.19,-3487.04 8993.41,-3541.87 9069,-3473.87 9147.23,-3403.5 9067,-3338 9105,-3239.87 9176.49,-3055.26 9330.89,-2869.19 9389.39,-2802.56"/>
<polygon fill="black" stroke="black" points="9392.04,-2804.85 9396.04,-2795.03 9386.8,-2800.21 9392.04,-2804.85"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge163" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7821.14,-3583.66C7914.57,-3588.96 8021.85,-3596.49 8119,-3606.87 8331.31,-3629.55 8913.24,-3604.83 9069,-3750.87 9123.76,-3802.21 9048.66,-3866.28 9105,-3915.87 9160.77,-3964.96 9246.31,-3968.8 9313.03,-3962.01"/>
<polygon fill="black" stroke="black" points="9313.6,-3965.46 9323.15,-3960.88 9312.82,-3958.51 9313.6,-3965.46"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge166" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7821.32,-3588.28C7944.91,-3590.15 8077.13,-3581.23 8119,-3538.87 8174.3,-3482.93 8101.34,-2889.38 8155,-2831.87 8245.65,-2734.73 8411.48,-2740.74 8516.21,-2756.78"/>
<polygon fill="black" stroke="black" points="8515.73,-2760.25 8526.16,-2758.36 8516.83,-2753.34 8515.73,-2760.25"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge161" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7821.17,-3573.82C8048.15,-3574.7 8372.28,-3575.95 8525.06,-3576.54"/>
<polygon fill="black" stroke="black" points="8525.3,-3580.04 8535.32,-3576.58 8525.33,-3573.04 8525.3,-3580.04"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node128" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node128"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7789.5,-3659.87 7358.5,-3659.87 7358.5,-3615.87 7789.5,-3615.87 7789.5,-3659.87"/>
<text text-anchor="middle" x="7574" y="-3629.55" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge167" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7789.62,-3653.87C7921.74,-3658.47 8074.14,-3652.56 8119,-3605.87 8193.1,-3528.74 8097.12,-1770.82 8155,-1680.87 8237.42,-1552.79 8417.72,-1498.17 8525.27,-1476.28"/>
<polygon fill="black" stroke="black" points="8526,-1479.71 8535.12,-1474.33 8524.63,-1472.84 8526,-1479.71"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge170" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7789.61,-3645.27C8191.76,-3658.08 9022.66,-3679.23 9069,-3636.87 9134.39,-3577.11 9075.6,-3323.44 9105,-3239.87 9170.56,-3053.57 9327.85,-2869.2 9388.29,-2802.77"/>
<polygon fill="black" stroke="black" points="9390.99,-2805 9395.16,-2795.26 9385.83,-2800.27 9390.99,-2805"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge171" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7789.54,-3636.76C8197.47,-3634.14 9046.61,-3626.04 9069,-3603.87 9154.81,-3518.95 9046.39,-2623.43 9105,-2517.87 9157.99,-2422.44 9276.05,-2362.95 9349.5,-2333.73"/>
<polygon fill="black" stroke="black" points="9351.07,-2336.87 9359.11,-2329.97 9348.52,-2330.35 9351.07,-2336.87"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge169" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7789.56,-3627.69C7918.14,-3625.82 8066.55,-3632.45 8119,-3668.87 8151.69,-3691.58 8122.2,-3728.33 8155,-3750.87 8238.79,-3808.45 8989.02,-3731.1 9069,-3793.87 9113.47,-3828.78 9061.25,-3880.07 9105,-3915.87 9159.04,-3960.08 9237.71,-3966.29 9301.95,-3961.72"/>
<polygon fill="black" stroke="black" points="9302.45,-3965.19 9312.14,-3960.9 9301.89,-3958.22 9302.45,-3965.19"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge168" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7789.78,-3625.25C7889.84,-3619.36 8010.51,-3612.26 8119,-3605.87 8261.31,-3597.49 8426.77,-3587.74 8524.97,-3581.95"/>
<polygon fill="black" stroke="black" points="8525.37,-3585.43 8535.14,-3581.35 8524.96,-3578.44 8525.37,-3585.43"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node129" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node129"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9686,-1355.37 9141,-1355.37 9141,-1310.37 9686,-1310.37 9686,-1355.37"/>
<text text-anchor="middle" x="9413.5" y="-1324.49" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge172" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9616.94,-1310.3C9657.5,-1296.35 9695.68,-1274.58 9722,-1240.87 9775.6,-1172.23 9698.13,-521.13 9758,-457.87 9799.09,-414.46 9866.1,-407.84 9922.64,-412"/>
<polygon fill="black" stroke="black" points="9922.44,-415.5 9932.71,-412.86 9923.04,-408.52 9922.44,-415.5"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node130" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node130"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9567.5,-3284.87 9259.5,-3284.87 9259.5,-3248.87 9567.5,-3248.87 9567.5,-3284.87"/>
<text text-anchor="middle" x="9413.5" y="-3261.28" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node131" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node131"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="8020.5,-3417.87 7127.5,-3417.87 7127.5,-3355.87 8020.5,-3355.87 8020.5,-3417.87"/>
<text text-anchor="middle" x="7574" y="-3374.67" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge174" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M8020.72,-3385.81C8065.43,-3377.57 8101,-3364.86 8119,-3345.87 8182.65,-3278.72 8104.82,-1758.61 8155,-1680.87 8237.61,-1552.91 8417.84,-1498.25 8525.33,-1476.32"/>
<polygon fill="black" stroke="black" points="8526.05,-1479.74 8535.18,-1474.36 8524.68,-1472.88 8526.05,-1479.74"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge173" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8020.53,-3385.63C8065.27,-3377.42 8100.9,-3364.77 8119,-3345.87 8204.75,-3256.36 8096.45,-2340.13 8155,-2230.87 8229.73,-2091.41 8393.76,-1997.91 8503.33,-1948.31"/>
<polygon fill="black" stroke="black" points="8505.07,-1951.36 8512.76,-1944.08 8502.21,-1944.97 8505.07,-1951.36"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge178" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8020.81,-3364.49C8447.11,-3345.36 9030.82,-3326.09 9069,-3361.87 9159.02,-3446.23 9018.76,-3827.65 9105,-3915.87 9161.06,-3973.22 9256.65,-3972.75 9326.4,-3962.46"/>
<polygon fill="black" stroke="black" points="9327.16,-3965.88 9336.49,-3960.88 9326.07,-3958.97 9327.16,-3965.88"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge175" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M8020.51,-3388.05C8054.89,-3397.55 8088.17,-3410.22 8119,-3426.87 8142.15,-3439.38 8132.84,-3459.68 8155,-3473.87 8269.03,-3546.91 8428.12,-3568.49 8525.09,-3574.67"/>
<polygon fill="black" stroke="black" points="8524.96,-3578.17 8535.15,-3575.27 8525.38,-3571.18 8524.96,-3578.17"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge176" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M8020.78,-3385.87C8065.48,-3377.61 8101.03,-3364.89 8119,-3345.87 8193.94,-3266.54 8078.63,-1459.83 8155,-1381.87 8159.24,-1377.55 8761.35,-1355.69 9130.76,-1342.67"/>
<polygon fill="black" stroke="black" points="9130.93,-1346.17 9140.8,-1342.32 9130.68,-1339.18 9130.93,-1346.17"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge177" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M8020.56,-3387.71C8055.12,-3377.57 8088.41,-3363.93 8119,-3345.87 8144.16,-3331.02 8129.43,-3305.01 8155,-3290.87 8248.24,-3239.31 8930.36,-3252.42 9249.14,-3261.56"/>
<polygon fill="black" stroke="black" points="9249.3,-3265.07 9259.4,-3261.86 9249.5,-3258.07 9249.3,-3265.07"/>
</g>
<!-- debug_dump.main -->
<g id="node132" class="node">
<title>debug_dump.main</title>
<g id="a_node132"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6708,-4045.87 6232,-4045.87 6232,-3983.87 6708,-3983.87 6708,-4045.87"/>
<text text-anchor="middle" x="6470" y="-4002.67" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge179" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6708.08,-4014.66C6921.45,-4014.46 7229.06,-4014.19 7414.14,-4014.02"/>
<polygon fill="black" stroke="black" points="7414.23,-4017.52 7424.23,-4014.01 7414.23,-4010.52 7414.23,-4017.52"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge180" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6708.17,-4027.74C6807.3,-4032.64 6923.7,-4037.79 7029,-4040.87 7509.5,-4054.95 8072.4,-4058.66 8380.46,-4059.6"/>
<polygon fill="black" stroke="black" points="8380.84,-4063.1 8390.85,-4059.63 8380.86,-4056.1 8380.84,-4063.1"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge181" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6602.14,-3983.84C6721.36,-3964.2 6893.41,-3958.79 6993,-4059.87 7071.96,-4140.02 6951.66,-4483.16 7029,-4564.87 7137.63,-4679.65 7334.13,-4674.59 7458.86,-4656.84"/>
<polygon fill="black" stroke="black" points="7459.44,-4660.29 7468.83,-4655.37 7458.43,-4653.37 7459.44,-4660.29"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge182" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6600.69,-3983.86C6720.16,-3963.8 6893.52,-3957.73 6993,-4059.87 7086.81,-4156.2 6931.13,-4571.67 7029,-4663.87 7188.08,-4813.75 8704.5,-4638.39 9232.39,-4572.15"/>
<polygon fill="black" stroke="black" points="9232.9,-4575.61 9242.39,-4570.89 9232.03,-4568.67 9232.9,-4575.61"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge183" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6708.01,-4036.47C6809.39,-4032.31 6920.8,-4007.57 6993,-3931.87 7093.3,-3826.71 6923.81,-3707.15 7029,-3606.87 7070.85,-3566.98 7196.68,-3557.43 7316.79,-3558.34"/>
<polygon fill="black" stroke="black" points="7316.87,-3561.84 7326.91,-3558.44 7316.94,-3554.84 7316.87,-3561.84"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge184" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6708.11,-4035.56C6809.05,-4031.11 6920.07,-4006.39 6993,-3931.87 7075.52,-3847.55 6942.34,-3748.93 7029,-3668.87 7075.13,-3626.25 7219.78,-3619.51 7348.32,-3622.89"/>
<polygon fill="black" stroke="black" points="7348.24,-3626.38 7358.33,-3623.17 7348.44,-3619.39 7348.24,-3626.38"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge185" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6708.32,-4021.46C6810.88,-4011.08 6923.15,-3979.46 6993,-3898.87 7061.9,-3819.38 6954.52,-3501.15 7029,-3426.87 7046,-3409.92 7077.59,-3398.12 7117.34,-3390.08"/>
<polygon fill="black" stroke="black" points="7118.17,-3393.49 7127.34,-3388.17 7116.86,-3386.61 7118.17,-3393.49"/>
</g>
<!-- build_site._load_ontology -->
<g id="node133" class="node">
<title>build_site._load_ontology</title>
<g id="a_node133"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="6626.5,-4463.87 6313.5,-4463.87 6313.5,-4427.87 6626.5,-4427.87 6626.5,-4463.87"/>
<text text-anchor="middle" x="6470" y="-4440.28" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge191" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6626.98,-4446.93C7180.96,-4450.35 9023.22,-4458.64 9069,-4417.87 9116.35,-4375.71 9070.81,-4188.26 9105,-4134.87 9161.52,-4046.61 9274.62,-3991.94 9346.78,-3964.5"/>
<polygon fill="black" stroke="black" points="9348.1,-3967.74 9356.24,-3960.97 9345.65,-3961.18 9348.1,-3967.74"/>
</g>
<!-- build_site._compile_locale -->
<g id="node134" class="node">
<title>build_site._compile_locale</title>
<g id="a_node134"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="6637,-4609.87 6303,-4609.87 6303,-4573.87 6637,-4573.87 6637,-4609.87"/>
<text text-anchor="middle" x="6470" y="-4586" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node135" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node135"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="5782,-4612.37 5405,-4612.37 5405,-4571.37 5782,-4571.37 5782,-4612.37"/>
<text text-anchor="middle" x="5593.5" y="-4584.63" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge192" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M5782.1,-4591.87C5933.33,-4591.87 6144.47,-4591.87 6292.62,-4591.87"/>
<polygon fill="black" stroke="black" points="6292.74,-4595.37 6302.74,-4591.87 6292.74,-4588.37 6292.74,-4595.37"/>
</g>
<!-- build_site._iter_lots -->
<g id="node136" class="node">
<title>build_site._iter_lots</title>
<g id="a_node136"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7800,-1583.37 7348,-1583.37 7348,-1526.37 7800,-1526.37 7800,-1583.37"/>
<text text-anchor="middle" x="7574" y="-1543.98" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge194" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7800.13,-1541.15C7898.16,-1534.66 8014.33,-1526.27 8119,-1516.87 8261.59,-1504.07 8426.96,-1485.06 8525.08,-1473.35"/>
<polygon fill="black" stroke="black" points="8525.72,-1476.79 8535.24,-1472.13 8524.89,-1469.84 8525.72,-1476.79"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge197" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7800.11,-1527C7911.04,-1526.4 8038.04,-1547.66 8119,-1630.87 8169.21,-1682.48 8117.59,-1891.35 8155,-1952.87 8247.28,-2104.63 8447.09,-2197.14 8548.8,-2236.19"/>
<polygon fill="black" stroke="black" points="8547.74,-2239.53 8558.33,-2239.8 8550.22,-2232.98 8547.74,-2239.53"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge195" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7800.2,-1568.13C7929.56,-1570.37 8074.9,-1561.89 8119,-1516.87 8176.14,-1458.54 8102.27,-845.22 8155,-782.87 8222.36,-703.22 8337.24,-678.39 8434.85,-673.38"/>
<polygon fill="black" stroke="black" points="8435,-676.87 8444.84,-672.93 8434.69,-669.88 8435,-676.87"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge193" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7800.08,-1534.83C7907.49,-1537.13 8031.36,-1558.59 8119,-1630.87 8157.06,-1662.26 8120.58,-1700.53 8155,-1735.87 8217.23,-1799.78 8305.68,-1839.88 8388.14,-1864.95"/>
<polygon fill="black" stroke="black" points="8387.33,-1868.36 8397.91,-1867.86 8389.32,-1861.65 8387.33,-1868.36"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge198" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7785.67,-1583.39C7886.59,-1597.28 8009.12,-1614.49 8119,-1630.87 8244.7,-1649.62 8388.21,-1672.54 8487.66,-1688.67"/>
<polygon fill="black" stroke="black" points="8487.32,-1692.16 8497.75,-1690.31 8488.44,-1685.26 8487.32,-1692.16"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge196" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7800.31,-1565.58C7928.11,-1566.68 8071.72,-1557.9 8119,-1516.87 8176.67,-1466.83 8097.33,-1398.93 8155,-1348.87 8259.15,-1258.47 8432.03,-1276.06 8532.34,-1296.68"/>
<polygon fill="black" stroke="black" points="8531.9,-1300.16 8542.41,-1298.81 8533.35,-1293.32 8531.9,-1300.16"/>
</g>
<!-- build_site._copy_images -->
<g id="node137" class="node">
<title>build_site._copy_images</title>
<g id="a_node137"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="7737.5,-5093.87 7410.5,-5093.87 7410.5,-5057.87 7737.5,-5057.87 7737.5,-5093.87"/>
<text text-anchor="middle" x="7574" y="-5069.71" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node138" class="node">
<title>build_site._copy_static</title>
<g id="a_node138"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="6598,-4236.87 6342,-4236.87 6342,-4200.87 6598,-4200.87 6598,-4236.87"/>
<text text-anchor="middle" x="6470" y="-4213.57" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node139" class="node">
<title>build_site._load_state</title>
<g id="a_node139"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="5743,-4418.37 5444,-4418.37 5444,-4381.37 5743,-4381.37 5743,-4418.37"/>
<text text-anchor="middle" x="5593.5" y="-4393.43" font-family="Times,serif" font-size="26.18">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge202" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5743.08,-4387.2C6003.4,-4365.39 6559.02,-4320.5 7029,-4293.87 7089.51,-4290.45 8073.57,-4290.98 8119,-4250.87 8192.62,-4185.88 8083.04,-4099.7 8155,-4032.87 8249.7,-3944.93 8408.04,-3952.16 8510.99,-3969.14"/>
<polygon fill="black" stroke="black" points="8510.64,-3972.63 8521.08,-3970.86 8511.82,-3965.73 8510.64,-3972.63"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge199" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M5743.34,-4407.7C5898.79,-4415.88 6142.02,-4428.67 6303.44,-4437.16"/>
<polygon fill="black" stroke="black" points="6303.3,-4440.66 6313.47,-4437.69 6303.66,-4433.67 6303.3,-4440.66"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge200" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M5620.75,-4381.07C5685.01,-4333.25 5849.44,-4199.52 5911,-4041.87 5946.31,-3951.45 5896.27,-2377.64 5947,-2294.87 6222.59,-1845.3 6669.81,-2151.55 6993,-1734.87 7034.23,-1681.72 6977.36,-1630.98 7029,-1587.87 7075.72,-1548.87 7212.85,-1540.73 7337.73,-1542.29"/>
<polygon fill="black" stroke="black" points="7337.8,-1545.79 7347.85,-1542.44 7337.9,-1538.79 7337.8,-1545.79"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge201" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M5743.4,-4406.84C5804.74,-4417.8 5870.73,-4441.65 5911,-4491.87 5989.69,-4590.03 5855.76,-4970.25 5947,-5056.87 5998.98,-5106.22 6992.04,-5089.22 7400.14,-5080.09"/>
<polygon fill="black" stroke="black" points="7400.34,-5083.59 7410.26,-5079.87 7400.18,-5076.59 7400.34,-5083.59"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node140" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node140"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7823,-3939.87 7325,-3939.87 7325,-3891.87 7823,-3891.87 7823,-3939.87"/>
<text text-anchor="middle" x="7574" y="-3906.75" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge203" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M5640.01,-4381.27C5706.25,-4355.17 5833.71,-4308.68 5947,-4288.87 6004.29,-4278.86 6949.93,-4284.96 6993,-4245.87 7079.07,-4167.78 6946.48,-4068.71 7029,-3986.87 7131.2,-3885.52 7302.32,-3879.09 7425.37,-3890.83"/>
<polygon fill="black" stroke="black" points="7425.33,-3894.34 7435.63,-3891.86 7426.03,-3887.38 7425.33,-3894.34"/>
</g>
<!-- similar_utils._load_more_user -->
<g id="node141" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node141"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8871,-4409.37 8353,-4409.37 8353,-4364.37 8871,-4364.37 8871,-4409.37"/>
<text text-anchor="middle" x="8612" y="-4378.49" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge204" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M5743.06,-4399.23C6221.22,-4397.17 7725.01,-4390.69 8342.4,-4388.03"/>
<polygon fill="black" stroke="black" points="8342.79,-4391.53 8352.77,-4387.99 8342.76,-4384.53 8342.79,-4391.53"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge269" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7823.29,-3919.52C8217.56,-3925.31 8973.42,-3936.42 9279.21,-3940.91"/>
<polygon fill="black" stroke="black" points="9279.4,-3944.42 9289.45,-3941.07 9279.5,-3937.42 9279.4,-3944.42"/>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge270" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8706.45,-4409.44C8808.99,-4428.14 8971.89,-4439.06 9069,-4349.87 9140.36,-4284.34 9051.16,-4215.42 9105,-4134.87 9163.58,-4047.24 9277.12,-3992.09 9348.64,-3964.43"/>
<polygon fill="black" stroke="black" points="9349.91,-3967.7 9358.01,-3960.87 9347.42,-3961.15 9349.91,-3967.7"/>
</g>
<!-- build_site._categorise -->
<g id="node142" class="node">
<title>build_site._categorise</title>
<g id="a_node142"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="8044.5,-4187.87 7103.5,-4187.87 7103.5,-4087.87 8044.5,-4087.87 8044.5,-4187.87"/>
<text text-anchor="middle" x="7574" y="-4116.67" font-family="Times,serif" font-size="84.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge205" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M8040.9,-4087.81C8068.68,-4074.95 8095.03,-4059.47 8119,-4040.87 8149.49,-4017.22 8126.03,-3987.36 8155,-3961.87 8251.99,-3876.54 8399.96,-3842.85 8500.84,-3829.55"/>
<polygon fill="black" stroke="black" points="8501.59,-3832.98 8511.07,-3828.25 8500.71,-3826.04 8501.59,-3832.98"/>
</g>
<!-- build_site._render_site -->
<g id="node143" class="node">
<title>build_site._render_site</title>
<g id="a_node143"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="6993,-4880.37 5947,-4880.37 5947,-4773.37 6993,-4773.37 6993,-4880.37"/>
<text text-anchor="middle" x="6470" y="-4804.25" font-family="Times,serif" font-size="90.16">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge207" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6949.63,-4880.42C6964.35,-4884.58 6978.84,-4889.06 6993,-4893.87 7010.54,-4899.84 7011.12,-4910.04 7029,-4914.87 7466.69,-5033.2 8627.91,-4983.84 9069,-4878.87 9379.53,-4804.97 9510.9,-4819.3 9722,-4579.87 9981.51,-4285.52 10018.46,-3769.58 10023.66,-3643.34"/>
<polygon fill="black" stroke="black" points="10027.17,-3643.12 10024.05,-3633 10020.18,-3642.86 10027.17,-3643.12"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge206" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6993.27,-4878.97C7005.29,-4879.67 7017.21,-4880.3 7029,-4880.87 7149.97,-4886.71 8031.7,-4964.82 8119,-4880.87 8192.66,-4810.04 8092.75,-4042.91 8155,-3961.87 8235.81,-3856.67 8393.87,-3827.91 8500.97,-3821.12"/>
<polygon fill="black" stroke="black" points="8501.38,-3824.6 8511.17,-3820.53 8500.98,-3817.61 8501.38,-3824.6"/>
</g>
<!-- build_site.build_page -->
<g id="node144" class="node">
<title>build_site.build_page</title>
<g id="a_node144"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="8043.5,-2799.87 7104.5,-2799.87 7104.5,-2697.87 8043.5,-2697.87 8043.5,-2799.87"/>
<text text-anchor="middle" x="7574" y="-2727.33" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge208" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6919.82,-4773.37C6947.37,-4756.76 6972.28,-4736.2 6993,-4710.87 7059.91,-4629.06 6957.74,-2886.92 7029,-2808.87 7048.4,-2787.62 7070.82,-2770.56 7095.28,-2757"/>
<polygon fill="black" stroke="black" points="7097.19,-2759.94 7104.38,-2752.15 7093.91,-2753.76 7097.19,-2759.94"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node145" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node145"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8740.5,-3464.87 8483.5,-3464.87 8483.5,-3428.87 8740.5,-3428.87 8740.5,-3464.87"/>
<text text-anchor="middle" x="8612" y="-3442.71" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge209" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6896.36,-4773.23C6931.54,-4757.04 6964.48,-4736.6 6993,-4710.87 7030.57,-4676.99 6988.48,-4633.17 7029,-4602.87 7126.06,-4530.31 8033.28,-4650.54 8119,-4564.87 8198.82,-4485.1 8082.99,-3636.76 8155,-3549.87 8230.68,-3458.56 8368.55,-3437.93 8472.95,-3437.05"/>
<polygon fill="black" stroke="black" points="8473.27,-3440.54 8483.26,-3437.02 8473.25,-3433.54 8473.27,-3440.54"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge211" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M8043.62,-2710.82C8071.78,-2694.84 8097.39,-2674.81 8119,-2649.87 8189.55,-2568.45 8095.87,-1770.94 8155,-1680.87 8238.6,-1553.55 8418.48,-1498.66 8525.63,-1476.52"/>
<polygon fill="black" stroke="black" points="8526.34,-1479.95 8535.45,-1474.54 8524.96,-1473.09 8526.34,-1479.95"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge210" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M8043.52,-2708.94C8071.5,-2693.35 8097.12,-2673.93 8119,-2649.87 8181.89,-2580.75 8108.67,-2312.04 8155,-2230.87 8233.9,-2092.64 8398.4,-1998.28 8506.73,-1948.23"/>
<polygon fill="black" stroke="black" points="8508.42,-1951.3 8516.06,-1943.96 8505.51,-1944.94 8508.42,-1951.3"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge212" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M8043.74,-2761.54C8183.51,-2765.32 8328.11,-2769.23 8436.33,-2772.15"/>
<polygon fill="black" stroke="black" points="8436.27,-2775.65 8446.36,-2772.42 8436.45,-2768.65 8436.27,-2775.65"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge213" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M8043.8,-2753.77C8071.57,-2767.74 8097.07,-2785.8 8119,-2808.87 8212.69,-2907.47 8058.84,-3323.68 8155,-3419.87 8198.31,-3463.2 8355.43,-3464.06 8473.21,-3457.94"/>
<polygon fill="black" stroke="black" points="8473.61,-3461.42 8483.41,-3457.39 8473.23,-3454.43 8473.61,-3461.42"/>
</g>
<!-- build_site.main -->
<g id="node146" class="node">
<title>build_site.main</title>
<g id="a_node146"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5204.5,-4776.37 4786.5,-4776.37 4786.5,-4711.37 5204.5,-4711.37 5204.5,-4776.37"/>
<text text-anchor="middle" x="4995.5" y="-4730.82" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge225" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5061.38,-4711.26C5119.4,-4678.23 5201.09,-4621.29 5240,-4545.87 5268.48,-4490.66 5231.79,-4031.53 5276,-3987.87 5411.93,-3853.65 6854.72,-4030.68 6993,-3898.87 7051.2,-3843.4 6970.85,-3594.39 7029,-3538.87 7071.75,-3498.06 7202.43,-3490.19 7324.99,-3492.82"/>
<polygon fill="black" stroke="black" points="7325.22,-3496.32 7335.3,-3493.06 7325.39,-3489.33 7325.22,-3496.32"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge214" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5067.73,-4776.4C5223.51,-4846 5607.74,-5009.32 5947,-5086.87 6418.3,-5194.61 6546.34,-5171.05 7029,-5198.87 7531.37,-5227.83 8124.91,-5225.07 8421.85,-5221.16"/>
<polygon fill="black" stroke="black" points="8422.33,-5224.66 8432.29,-5221.02 8422.24,-5217.66 8422.33,-5224.66"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge215" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5204.53,-4753.65C5224.45,-4754.58 5244.95,-4755.55 5265.64,-4756.52"/>
<polygon fill="black" stroke="black" points="5265.66,-4760.02 5275.81,-4757 5265.99,-4753.03 5265.66,-4760.02"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.load_price_model -->
<g id="edge216" class="edge">
<title>build_site.main&#45;&gt;price_utils.load_price_model</title>
<path fill="none" stroke="black" d="M5204.82,-4737.25C5228.82,-4736.69 5252.94,-4736.2 5276,-4735.87 5417.1,-4733.85 5800.38,-4648.26 5911,-4735.87 5965.76,-4779.25 5893.72,-4843.69 5947,-4888.87 5989.36,-4924.8 6110.4,-4934.38 6225.27,-4934.6"/>
<polygon fill="black" stroke="black" points="6225.3,-4938.1 6235.3,-4934.59 6225.29,-4931.1 6225.3,-4938.1"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge217" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5003.65,-4776.5C5025.59,-4867.85 5101.38,-5126.3 5276,-5231.87 5409.94,-5312.85 5801.09,-5313.59 6099.33,-5300.59"/>
<polygon fill="black" stroke="black" points="6099.62,-5304.08 6109.46,-5300.14 6099.31,-5297.09 6099.62,-5304.08"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge218" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5002,-4776.43C5020.32,-4873.54 5089.07,-5161.87 5276,-5282.87 5582.78,-5481.45 6624.56,-5462.57 7193.88,-5435.64"/>
<polygon fill="black" stroke="black" points="7194.08,-5439.14 7203.9,-5435.17 7193.74,-5432.15 7194.08,-5439.14"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge219" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5000.15,-4776.5C5013.83,-4882.05 5072.25,-5216.16 5276,-5367.87 5529.47,-5556.61 7803.58,-5470.43 8119,-5450.87 8478.02,-5428.61 9432.42,-5439.27 9722,-5225.87 9920.5,-5079.59 9997.77,-4765.6 10018.4,-4662.46"/>
<polygon fill="black" stroke="black" points="10021.84,-4663.08 10020.33,-4652.59 10014.97,-4661.74 10021.84,-4663.08"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge220" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5055.85,-4711.34C5111.12,-4682.68 5196.68,-4642.38 5276,-4621.87 5313.81,-4612.1 5354.89,-4605.43 5394.56,-4600.91"/>
<polygon fill="black" stroke="black" points="5395.05,-4604.37 5404.61,-4599.8 5394.29,-4597.42 5395.05,-4604.37"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge221" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5056.84,-4711.22C5113.28,-4677.44 5195.36,-4619.33 5240,-4545.87 5281.01,-4478.39 5219.81,-4427.36 5276,-4371.87 5422.4,-4227.31 6050.34,-4214.65 6331.71,-4216.48"/>
<polygon fill="black" stroke="black" points="6331.95,-4219.98 6341.98,-4216.56 6332,-4212.98 6331.95,-4219.98"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge222" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5044.95,-4711.15C5096.85,-4674.65 5179.88,-4611.98 5240,-4545.87 5259.41,-4524.53 5252.74,-4508.93 5276,-4491.87 5324.96,-4455.96 5387.71,-4434.01 5444.41,-4420.62"/>
<polygon fill="black" stroke="black" points="5445.22,-4424.03 5454.18,-4418.39 5443.65,-4417.21 5445.22,-4424.03"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge223" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5059.75,-4711.31C5117.25,-4678.06 5199.15,-4620.72 5240,-4545.87 5274.6,-4482.48 5223.3,-4272.26 5276,-4222.87 5405.15,-4101.84 6458.53,-4107.74 7093.07,-4122.77"/>
<polygon fill="black" stroke="black" points="7093.23,-4126.27 7103.31,-4123.01 7093.39,-4119.28 7093.23,-4126.27"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge224" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5115.94,-4776.46C5165.12,-4788.39 5222.91,-4800.51 5276,-4806.87 5491.26,-4832.66 5729.92,-4840.71 5936.85,-4841.21"/>
<polygon fill="black" stroke="black" points="5936.99,-4844.71 5946.99,-4841.22 5937,-4837.71 5936.99,-4844.71"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node147" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node147"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="9527.5,-1847.87 9299.5,-1847.87 9299.5,-1811.87 9527.5,-1811.87 9527.5,-1847.87"/>
<text text-anchor="middle" x="9413.5" y="-1824.57" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node148" class="node">
<title>chop.process_message</title>
<g id="a_node148"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6971,-2405.87 5969,-2405.87 5969,-2303.87 6971,-2303.87 6971,-2405.87"/>
<text text-anchor="middle" x="6470" y="-2333.55" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge234" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6971.05,-2344.83C7491.82,-2334.36 8266.97,-2318.79 8524.41,-2313.61"/>
<polygon fill="black" stroke="black" points="8524.53,-2317.11 8534.45,-2313.41 8524.39,-2310.11 8524.53,-2317.11"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge231" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6535.93,-2303.67C6652.7,-2207.1 6895.09,-1985.16 6993,-1734.87 7024.69,-1653.87 6966.1,-1012.95 7029,-952.87 7082.69,-901.59 8174.54,-949.79 8512.31,-966"/>
<polygon fill="black" stroke="black" points="8512.16,-969.49 8522.32,-966.48 8512.5,-962.5 8512.16,-969.49"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge229" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6536.18,-2303.76C6653.36,-2207.35 6896.38,-1985.66 6993,-1734.87 7033.29,-1630.29 6949.44,-805.81 7029,-726.87 7041.35,-714.62 8024.56,-694.21 8434.55,-686.22"/>
<polygon fill="black" stroke="black" points="8434.79,-689.72 8444.72,-686.03 8434.66,-682.72 8434.79,-689.72"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge228" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6795.01,-2303.87C6868.3,-2278.65 6940.01,-2241.02 6993,-2184.87 7036.21,-2139.09 6979.93,-2087.32 7029,-2047.87 7076.24,-2009.9 8058.82,-2011.04 8119,-2003.87 8227.8,-1990.92 8348.47,-1967.04 8443.08,-1946.09"/>
<polygon fill="black" stroke="black" points="8444.02,-1949.46 8453.03,-1943.88 8442.5,-1942.63 8444.02,-1949.46"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge226" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6669.78,-2405.94C6782.4,-2445.37 6915.81,-2511.77 6993,-2618.87 7057.1,-2707.8 6946.02,-2791.24 7029,-2862.87 7082.19,-2908.79 8061.67,-2878.73 8452.2,-2864.83"/>
<polygon fill="black" stroke="black" points="8452.58,-2868.32 8462.45,-2864.46 8452.33,-2861.32 8452.58,-2868.32"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge235" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6869.8,-2405.92C6923.3,-2412.47 6977.47,-2418.95 7029,-2424.87 7512.9,-2480.52 7650.53,-2405.49 8119,-2538.87 8298.7,-2590.04 8493.04,-2703.3 8573.19,-2752.87"/>
<polygon fill="black" stroke="black" points="8571.59,-2756 8581.94,-2758.3 8575.29,-2750.05 8571.59,-2756"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge227" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6971.22,-2374.39C7146.35,-2381.23 7328.39,-2388.33 7445.74,-2392.91"/>
<polygon fill="black" stroke="black" points="7445.71,-2396.41 7455.84,-2393.3 7445.98,-2389.41 7445.71,-2396.41"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge230" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6971.05,-2357.44C7476.17,-2360.04 8220.61,-2363.87 8499.82,-2365.3"/>
<polygon fill="black" stroke="black" points="8499.94,-2368.8 8509.96,-2365.35 8499.98,-2361.8 8499.94,-2368.8"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge232" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6601.02,-2303.79C6718.82,-2251.32 6889.37,-2158.91 6993,-2028.87 7023.49,-1990.62 6990,-1954.4 7029,-1924.87 7387.51,-1653.44 8852.97,-1774.16 9289.34,-1817.03"/>
<polygon fill="black" stroke="black" points="9289.16,-1820.53 9299.46,-1818.03 9289.85,-1813.56 9289.16,-1820.53"/>
</g>
<!-- embed.embed_file -->
<g id="node149" class="node">
<title>embed.embed_file</title>
<g id="a_node149"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7779,-2965.37 7369,-2965.37 7369,-2910.37 7779,-2910.37 7779,-2965.37"/>
<text text-anchor="middle" x="7574" y="-2927.33" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge233" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6671.76,-2405.92C6784.34,-2445.23 6917.02,-2511.52 6993,-2618.87 7064.72,-2720.21 6938.95,-2810.41 7029,-2895.87 7075.87,-2940.36 7227.32,-2949.36 7358.55,-2948.06"/>
<polygon fill="black" stroke="black" points="7358.8,-2951.55 7368.76,-2947.94 7358.72,-2944.56 7358.8,-2951.55"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge237" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7745.52,-2965.38C7867.67,-2974.48 8026.35,-2962.73 8119,-2862.87 8206.53,-2768.53 8063.86,-2375.73 8155,-2284.87 8201.18,-2238.83 8376.22,-2240.8 8495.49,-2248.1"/>
<polygon fill="black" stroke="black" points="8495.57,-2251.61 8505.77,-2248.75 8496.01,-2244.63 8495.57,-2251.61"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge239" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7779.02,-2926.31C7912.16,-2923.42 8070.02,-2930.34 8119,-2974.87 8191.98,-3041.23 8081.73,-3127.84 8155,-3193.87 8205.02,-3238.95 8389.3,-3236.11 8507.73,-3229.08"/>
<polygon fill="black" stroke="black" points="8508.14,-3232.56 8517.91,-3228.46 8507.72,-3225.58 8508.14,-3232.56"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge238" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7779.06,-2937.87C7999.02,-2937.87 8340.22,-2937.87 8509.13,-2937.87"/>
<polygon fill="black" stroke="black" points="8509.27,-2941.37 8519.27,-2937.87 8509.27,-2934.37 8509.27,-2941.37"/>
</g>
<!-- chop.main -->
<g id="node150" class="node">
<title>chop.main</title>
<g id="a_node150"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5669,-2372.87 5518,-2372.87 5518,-2336.87 5669,-2336.87 5669,-2372.87"/>
<text text-anchor="middle" x="5593.5" y="-2348.71" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge236" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5669.06,-2354.87C5737.24,-2354.87 5844.6,-2354.87 5958.79,-2354.87"/>
<polygon fill="black" stroke="black" points="5958.79,-2358.37 5968.79,-2354.87 5958.79,-2351.37 5958.79,-2358.37"/>
</g>
<!-- embed.main -->
<g id="node151" class="node">
<title>embed.main</title>
<g id="a_node151"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6558,-2824.87 6382,-2824.87 6382,-2788.87 6558,-2788.87 6558,-2824.87"/>
<text text-anchor="middle" x="6470" y="-2800.71" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge240" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6551.67,-2788.83C6660.52,-2769.14 6856.5,-2750.52 6993,-2833.87 7020.19,-2850.48 7002.02,-2878.92 7029,-2895.87 7127.79,-2957.93 7257.42,-2970 7365.37,-2965.81"/>
<polygon fill="black" stroke="black" points="7365.57,-2969.31 7375.41,-2965.38 7365.27,-2962.31 7365.57,-2969.31"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge241" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9522.59,-3872.35C9586.33,-3868.52 9665.32,-3874.67 9722,-3915.87 9957.2,-4086.85 10010.89,-4477.74 10021.9,-4595.01"/>
<polygon fill="black" stroke="black" points="10018.43,-4595.53 10022.81,-4605.17 10025.4,-4594.9 10018.43,-4595.53"/>
</g>
<!-- caption_io.write_caption -->
<g id="node153" class="node">
<title>caption_io.write_caption</title>
<g id="a_node153"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="7740.5,-4371.87 7407.5,-4371.87 7407.5,-4335.87 7740.5,-4335.87 7740.5,-4371.87"/>
<text text-anchor="middle" x="7574" y="-4347.71" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge252" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7674.78,-4371.9C7789.31,-4387.42 7979.3,-4396.93 8119,-4321.87 8142.49,-4309.25 8131.4,-4286.29 8155,-4273.87 8244.95,-4226.54 8997.32,-4307.94 9069,-4235.87 9108.05,-4196.62 9088.05,-3292.58 9105,-3239.87 9165.47,-3051.85 9325.82,-2868.52 9387.67,-2802.57"/>
<polygon fill="black" stroke="black" points="9390.39,-2804.79 9394.71,-2795.11 9385.3,-2799.98 9390.39,-2804.79"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge249" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7740.74,-4354.69C8119.32,-4355.81 9018.9,-4354 9069,-4311.87 9130.44,-4260.21 9059.23,-4200.83 9105,-4134.87 9165.14,-4048.2 9278.35,-3992.72 9349.36,-3964.74"/>
<polygon fill="black" stroke="black" points="9351.02,-3967.84 9359.09,-3960.97 9348.5,-3961.32 9351.02,-3967.84"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge250" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7735.09,-4371.88C7859.6,-4376.08 8026.28,-4358.29 8119,-4250.87 8183.59,-4176.04 8094.73,-3440.23 8155,-3361.87 8237.59,-3254.5 8400.65,-3226.76 8507.73,-3220.74"/>
<polygon fill="black" stroke="black" points="8508.1,-3224.22 8517.91,-3220.22 8507.75,-3217.23 8508.1,-3224.22"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge251" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M7740.57,-4353.22C7848.89,-4350.57 7993.13,-4342.81 8119,-4321.87 8135.38,-4319.15 8138.6,-4314.46 8155,-4311.87 8205.2,-4303.96 9032.03,-4308.74 9069,-4273.87 9127.17,-4219.02 9048.11,-3972.05 9105,-3915.87 9161.24,-3860.33 9254.75,-3859.83 9323.92,-3869.38"/>
<polygon fill="black" stroke="black" points="9323.53,-3872.86 9333.94,-3870.86 9324.56,-3865.94 9323.53,-3872.86"/>
</g>
<!-- similar._iter_lots -->
<g id="node154" class="node">
<title>similar._iter_lots</title>
<g id="a_node154"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7728,-1687.37 7420,-1687.37 7420,-1640.37 7728,-1640.37 7728,-1687.37"/>
<text text-anchor="middle" x="7574" y="-1655.37" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge254" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7728.18,-1663.36C7837.92,-1660.52 7988.73,-1651.58 8119,-1625.87 8284.24,-1593.27 8470.87,-1521.2 8559.27,-1484.81"/>
<polygon fill="black" stroke="black" points="8560.64,-1488.03 8568.54,-1480.98 8557.96,-1481.57 8560.64,-1488.03"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge257" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7634.31,-1687.4C7736.66,-1729.06 7951.54,-1821.24 8119,-1924.87 8136.24,-1935.54 8138.57,-1941.01 8155,-1952.87 8307.25,-2062.78 8495.45,-2184.3 8573.92,-2234.36"/>
<polygon fill="black" stroke="black" points="8572.19,-2237.4 8582.5,-2239.82 8575.95,-2231.49 8572.19,-2237.4"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge255" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7695.24,-1687.4C7820.75,-1704.22 8013.68,-1706.79 8119,-1591.87 8179.79,-1525.54 8097.06,-851.71 8155,-782.87 8222.24,-703 8337.28,-678.19 8434.99,-673.25"/>
<polygon fill="black" stroke="black" points="8435.15,-676.75 8444.99,-672.81 8434.85,-669.75 8435.15,-676.75"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge253" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7728.12,-1647.71C7840.89,-1642.05 7995.45,-1647.69 8119,-1701.87 8139.15,-1710.71 8136.32,-1724.24 8155,-1735.87 8248.09,-1793.83 8363.99,-1836.71 8455.65,-1864.91"/>
<polygon fill="black" stroke="black" points="8454.7,-1868.28 8465.28,-1867.85 8456.74,-1861.58 8454.7,-1868.28"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge258" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7728.14,-1670.53C7929.36,-1679.27 8279.77,-1694.49 8473.1,-1702.88"/>
<polygon fill="black" stroke="black" points="8473.18,-1706.39 8483.32,-1703.33 8473.48,-1699.4 8473.18,-1706.39"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge256" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7712.18,-1687.38C7835.69,-1700.04 8013.52,-1695.73 8119,-1591.87 8196.8,-1515.27 8074.88,-1423.04 8155,-1348.87 8257.71,-1253.78 8435.35,-1274.53 8535.91,-1296.64"/>
<polygon fill="black" stroke="black" points="8535.17,-1300.06 8545.7,-1298.85 8536.71,-1293.23 8535.17,-1300.06"/>
</g>
<!-- similar.main -->
<g id="node155" class="node">
<title>similar.main</title>
<g id="a_node155"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6575,-3199.87 6365,-3199.87 6365,-3157.87 6575,-3157.87 6575,-3199.87"/>
<text text-anchor="middle" x="6470" y="-3170.79" font-family="Times,serif" font-size="31.36">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge260" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6547.46,-3199.98C6664.41,-3236.57 6885.47,-3323.59 6993,-3482.87 7055.32,-3575.19 6950.02,-3652.34 7029,-3730.87 7202.42,-3903.32 7878.31,-3839.5 8119,-3882.87 8257.81,-3907.89 8416.9,-3944.62 8515.69,-3968.4"/>
<polygon fill="black" stroke="black" points="8515.11,-3971.86 8525.65,-3970.8 8516.75,-3965.05 8515.11,-3971.86"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge266" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6498.95,-3199.98C6577.38,-3257.82 6808.2,-3418.66 7029,-3480.87 7123.53,-3507.51 7230.88,-3517.31 7325.09,-3519.55"/>
<polygon fill="black" stroke="black" points="7325.27,-3523.05 7335.34,-3519.76 7325.42,-3516.05 7325.27,-3523.05"/>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge261" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6548.26,-3199.91C6665.78,-3236.3 6886.95,-3322.91 6993,-3482.87 7062.57,-3587.82 6946.65,-3668.62 7029,-3763.87 7099.98,-3845.98 7211.27,-3885.5 7314.75,-3903.91"/>
<polygon fill="black" stroke="black" points="7314.29,-3907.38 7324.74,-3905.63 7315.47,-3900.49 7314.29,-3907.38"/>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge259" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6561,-3157.86C6683.03,-3124.07 6896.77,-3044.9 6993,-2887.87 7048.95,-2796.58 6970.28,-2014.41 7029,-1924.87 7118.5,-1788.38 7300.59,-1721.35 7429.39,-1689.79"/>
<polygon fill="black" stroke="black" points="7430.44,-1693.14 7439.35,-1687.4 7428.8,-1686.33 7430.44,-1693.14"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node156" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node156"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7722,-3203.87 7426,-3203.87 7426,-3167.87 7722,-3167.87 7722,-3203.87"/>
<text text-anchor="middle" x="7574" y="-3180.57" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge262" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6575.17,-3179.53C6769.19,-3180.77 7186.91,-3183.42 7415.55,-3184.87"/>
<polygon fill="black" stroke="black" points="7415.6,-3188.37 7425.62,-3184.94 7415.64,-3181.37 7415.6,-3188.37"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node157" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node157"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7741.5,-3149.87 7406.5,-3149.87 7406.5,-3113.87 7741.5,-3113.87 7741.5,-3149.87"/>
<text text-anchor="middle" x="7574" y="-3126.57" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge263" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6575.17,-3174.43C6763.77,-3166.39 7163.75,-3149.33 7395.96,-3139.42"/>
<polygon fill="black" stroke="black" points="7396.36,-3142.91 7406.2,-3138.99 7396.06,-3135.92 7396.36,-3142.91"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node158" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node158"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7713,-2583.87 7435,-2583.87 7435,-2547.87 7713,-2547.87 7713,-2583.87"/>
<text text-anchor="middle" x="7574" y="-2561.09" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge264" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6555.15,-3157.85C6674.27,-3123.32 6889.1,-3042.44 6993,-2887.87 7029.84,-2833.06 6980.65,-2637.86 7029,-2592.87 7084.43,-2541.29 7283.42,-2543.68 7424.65,-2552.7"/>
<polygon fill="black" stroke="black" points="7424.51,-2556.2 7434.72,-2553.36 7424.97,-2549.21 7424.51,-2556.2"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node159" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node159"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="9069,-1165.37 8155,-1165.37 8155,-1090.37 9069,-1090.37 9069,-1165.37"/>
<text text-anchor="middle" x="8612" y="-1112.88" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge265" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6562.14,-3157.87C6684.72,-3124.21 6898.25,-3045.34 6993,-2887.87 7041.79,-2806.79 6962.58,-1252.28 7029,-1184.87 7106.26,-1106.46 7706.45,-1103.87 8144.77,-1112.91"/>
<polygon fill="black" stroke="black" points="8144.69,-1116.41 8154.76,-1113.12 8144.84,-1109.41 8144.69,-1116.41"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node160" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node160"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9722,-5216.87 9105,-5216.87 9105,-5164.87 9722,-5164.87 9722,-5216.87"/>
<text text-anchor="middle" x="9413.5" y="-5180.73" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge267" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6554.41,-3199.94C6675.47,-3235.45 6895.97,-3319.88 6993,-3482.87 7060.15,-3595.68 6937.19,-4570.03 7029,-4663.87 7187.73,-4826.12 8866.51,-4668.31 9069,-4770.87 9239.73,-4857.35 9355.82,-5071.1 9396.46,-5155.64"/>
<polygon fill="black" stroke="black" points="9393.37,-5157.3 9400.83,-5164.83 9399.7,-5154.29 9393.37,-5157.3"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge272" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7722.06,-3190.84C7934.7,-3198.03 8322.77,-3211.14 8507.69,-3217.38"/>
<polygon fill="black" stroke="black" points="8507.85,-3220.89 8517.96,-3217.73 8508.08,-3213.89 8507.85,-3220.89"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge271" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7722.24,-3171.98C7845.05,-3169.03 8016.02,-3186.42 8119,-3288.87 8178.38,-3347.95 8096.66,-3413.76 8155,-3473.87 8251.55,-3573.36 8422.27,-3585.94 8525.2,-3583.3"/>
<polygon fill="black" stroke="black" points="8525.36,-3586.79 8535.25,-3582.98 8525.14,-3579.8 8525.36,-3586.79"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node161" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node161"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8714,-3184.87 8510,-3184.87 8510,-3148.87 8714,-3148.87 8714,-3184.87"/>
<text text-anchor="middle" x="8612" y="-3163.17" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge273" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7722.06,-3183.18C7931.66,-3179.33 8311.69,-3172.36 8499.62,-3168.92"/>
<polygon fill="black" stroke="black" points="8499.86,-3172.41 8509.79,-3168.73 8499.73,-3165.41 8499.86,-3172.41"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge275" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7699.46,-3113.85C7813.53,-3102.83 7984.6,-3100.39 8119,-3158.87 8139.46,-3167.78 8134.58,-3184.87 8155,-3193.87 8268.01,-3243.7 8412.29,-3242.89 8507.96,-3234.62"/>
<polygon fill="black" stroke="black" points="8508.29,-3238.1 8517.93,-3233.72 8507.65,-3231.13 8508.29,-3238.1"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge274" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7741.67,-3117.5C7881.32,-3109.41 8066.1,-3109.27 8119,-3158.87 8221.79,-3255.26 8060.9,-3368.98 8155,-3473.87 8247.97,-3577.5 8421.09,-3588.5 8525.2,-3584.48"/>
<polygon fill="black" stroke="black" points="8525.53,-3587.97 8535.37,-3584.03 8525.22,-3580.97 8525.53,-3587.97"/>
</g>
<!-- similar_utils._more_user_path -->
<g id="node162" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node162"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8727,-3130.87 8497,-3130.87 8497,-3094.87 8727,-3094.87 8727,-3130.87"/>
<text text-anchor="middle" x="8612" y="-3109.17" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge276" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7741.74,-3128.82C7949.75,-3125 8300.65,-3118.57 8486.62,-3115.15"/>
<polygon fill="black" stroke="black" points="8486.79,-3118.65 8496.72,-3114.97 8486.66,-3111.65 8486.79,-3118.65"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node163" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node163"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9654.5,-1147.87 9172.5,-1147.87 9172.5,-1107.87 9654.5,-1107.87 9654.5,-1147.87"/>
<text text-anchor="middle" x="9413.5" y="-1120.8" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge277" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M9069.09,-1127.87C9100.89,-1127.87 9132.21,-1127.87 9162.21,-1127.87"/>
<polygon fill="black" stroke="black" points="9162.33,-1131.37 9172.33,-1127.87 9162.33,-1124.37 9162.33,-1131.37"/>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge278" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9556.36,-5216.92C9666.23,-5237.09 9816.1,-5264.61 9916.39,-5283.02"/>
<polygon fill="black" stroke="black" points="9915.77,-5286.47 9926.24,-5284.83 9917.03,-5279.58 9915.77,-5286.47"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node164" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node164"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6928,-2699.37 6012,-2699.37 6012,-2628.37 6928,-2628.37 6928,-2699.37"/>
<text text-anchor="middle" x="6470" y="-2649.23" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge281" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6649.77,-2628.35C6768.31,-2594.7 6915.77,-2531.27 6993,-2414.87 7041.21,-2342.21 6967.03,-1692.22 7029,-1630.87 7072.06,-1588.24 8059.05,-1600.69 8119,-1591.87 8276.2,-1568.74 8455.49,-1514.39 8548.15,-1484.14"/>
<polygon fill="black" stroke="black" points="8549.52,-1487.38 8557.93,-1480.93 8547.34,-1480.73 8549.52,-1487.38"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge283" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6608.58,-2628.37C6720.99,-2600.49 6884.37,-2562.55 7029,-2538.87 7269.34,-2499.52 7934.57,-2583.93 8119,-2424.87 8167.65,-2382.91 8105.41,-2325.73 8155,-2284.87 8205.14,-2243.56 8377.9,-2244.07 8495.77,-2249.79"/>
<polygon fill="black" stroke="black" points="8495.77,-2253.3 8505.94,-2250.3 8496.12,-2246.3 8495.77,-2253.3"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge280" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6642.5,-2628.29C6760.83,-2594.3 6911.07,-2530.48 6993,-2414.87 7036.16,-2353.97 6974.4,-2131.79 7029,-2080.87 7073.32,-2039.54 8059.1,-2049.03 8119,-2039.87 8247.94,-2020.15 8391.44,-1978.74 8490.03,-1947.14"/>
<polygon fill="black" stroke="black" points="8491.28,-1950.42 8499.72,-1944.02 8489.13,-1943.76 8491.28,-1950.42"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge279" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6741.09,-2699.41C6824.55,-2716.76 6914.99,-2742.34 6993,-2779.87 7011.51,-2788.78 7009.8,-2801.56 7029,-2808.87 7145.01,-2853.05 7285.09,-2859.02 7394.05,-2854.35"/>
<polygon fill="black" stroke="black" points="7394.34,-2857.84 7404.16,-2853.88 7394.01,-2850.85 7394.34,-2857.84"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge282" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6883.84,-2699.43C6925.55,-2718.4 6963.38,-2744.44 6993,-2779.87 7056.41,-2855.72 6959.67,-3598.4 7029,-3668.87 7072.92,-3713.53 7216.97,-3720.28 7345.8,-3716.39"/>
<polygon fill="black" stroke="black" points="7345.96,-3719.89 7355.84,-3716.07 7345.73,-3712.89 7345.96,-3719.89"/>
</g>
<!-- scan_ontology.main -->
<g id="node165" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5821,-3302.37 5366,-3302.37 5366,-3245.37 5821,-3245.37 5821,-3302.37"/>
<text text-anchor="middle" x="5593.5" y="-3262.98" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge285" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5821.29,-3274.37C6263.42,-3274.68 7271.55,-3272.09 8119,-3245.87 8253.3,-3241.72 8408.06,-3233.25 8507.58,-3227.32"/>
<polygon fill="black" stroke="black" points="8507.87,-3230.81 8517.64,-3226.72 8507.45,-3223.82 8507.87,-3230.81"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge284" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5674.49,-3302.43C5749.83,-3333.96 5858.69,-3392.56 5911,-3482.87 5974.84,-3593.08 5856.87,-3964.89 5947,-4054.87 5992.09,-4099.89 6144.62,-4105.16 6273.25,-4100.74"/>
<polygon fill="black" stroke="black" points="6273.38,-4104.24 6283.25,-4100.38 6273.13,-4097.25 6273.38,-4104.24"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge286" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5821.34,-3256.15C5855.59,-3243.89 5887.32,-3225.4 5911,-3197.87 5971.81,-3127.2 5885.59,-2850.03 5947,-2779.87 5975.8,-2746.97 6011.67,-2722.25 6051.04,-2703.81"/>
<polygon fill="black" stroke="black" points="6052.9,-2706.81 6060.57,-2699.5 6050.02,-2700.43 6052.9,-2706.81"/>
</g>
<!-- caption._identify_size -->
<g id="node166" class="node">
<title>caption._identify_size</title>
<g id="a_node166"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="8740.5,-4869.87 8483.5,-4869.87 8483.5,-4833.87 8740.5,-4833.87 8740.5,-4869.87"/>
<text text-anchor="middle" x="8612" y="-4846.18" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node167" class="node">
<title>caption._prepare_image</title>
<g id="a_node167"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="7791,-4871.87 7357,-4871.87 7357,-4825.87 7791,-4825.87 7791,-4871.87"/>
<text text-anchor="middle" x="7574" y="-4840.43" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge287" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M7791.23,-4849.5C7996.46,-4850.09 8298.73,-4850.97 8473.12,-4851.47"/>
<polygon fill="black" stroke="black" points="8473.12,-4854.97 8483.13,-4851.5 8473.14,-4847.97 8473.12,-4854.97"/>
</g>
<!-- caption._guess_chat -->
<g id="node168" class="node">
<title>caption._guess_chat</title>
<g id="a_node168"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="8708,-4815.87 8516,-4815.87 8516,-4779.87 8708,-4779.87 8708,-4815.87"/>
<text text-anchor="middle" x="8612" y="-4793.71" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node169" class="node">
<title>caption.caption_file</title>
<g id="a_node169"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="6773,-4555.37 6167,-4555.37 6167,-4482.37 6773,-4482.37 6773,-4555.37"/>
<text text-anchor="middle" x="6470" y="-4503.89" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge290" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6633.8,-4555.38C6751.17,-4571.15 6904.02,-4568.09 6993,-4472.87 7060.68,-4400.44 6959.45,-2759.51 7029,-2688.87 7114.02,-2602.51 8029.97,-2732.09 8119,-2649.87 8221.22,-2555.47 8053.89,-2434.47 8155,-2338.87 8206.31,-2290.37 8406.85,-2296.28 8524.2,-2304.37"/>
<polygon fill="black" stroke="black" points="8524.02,-2307.87 8534.25,-2305.08 8524.52,-2300.88 8524.02,-2307.87"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge289" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6773.18,-4552.64C6852.44,-4546.43 6932.55,-4524.67 6993,-4472.87 7043.75,-4429.39 6977.15,-4369.05 7029,-4326.87 7123.02,-4250.4 8012.44,-4344.59 8119,-4286.87 8143.4,-4273.66 8131.48,-4250.58 8155,-4235.87 8503.96,-4017.64 8795.81,-4394.72 9069,-4086.87 9131.52,-4016.42 9075.87,-3329.45 9105,-3239.87 9166.07,-3052.05 9326.05,-2868.59 9387.74,-2802.59"/>
<polygon fill="black" stroke="black" points="9390.46,-2804.81 9394.77,-2795.13 9385.36,-2800.01 9390.46,-2804.81"/>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge288" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6773.08,-4489.68C6851.22,-4496.27 6930.77,-4517.08 6993,-4564.87 7030.13,-4593.39 6990.65,-4637.01 7029,-4663.87 7215.01,-4794.16 8911.89,-4701.85 9069,-4537.87 9131.2,-4472.95 9057.94,-4211.48 9105,-4134.87 9159.62,-4045.96 9272.48,-3991.68 9345.23,-3964.47"/>
<polygon fill="black" stroke="black" points="9346.59,-3967.69 9354.77,-3960.96 9344.18,-3961.12 9346.59,-3967.69"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge291" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M6773.04,-4509.28C6845.86,-4502.31 6922.87,-4491.01 6993,-4472.87 7009.95,-4468.49 7012.29,-4462.09 7029,-4456.87 7157.57,-4416.73 7308.38,-4389.67 7418.56,-4373.4"/>
<polygon fill="black" stroke="black" points="7419.37,-4376.82 7428.76,-4371.91 7418.35,-4369.89 7419.37,-4376.82"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge292" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M6662.77,-4482.36C6773.25,-4473.02 6906.86,-4483.5 6993,-4564.87 7073.64,-4641.06 6947.6,-4736.5 7029,-4811.87 7074.9,-4854.38 7218.41,-4862.85 7346.51,-4861.11"/>
<polygon fill="black" stroke="black" points="7346.94,-4864.61 7356.88,-4860.95 7346.83,-4857.61 7346.94,-4864.61"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge293" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M6672.87,-4482.35C6780.89,-4474.88 6908.66,-4487.24 6993,-4564.87 7062.35,-4628.71 6957.38,-4712.6 7029,-4773.87 7085.05,-4821.83 8161.09,-4806.2 8505.75,-4799.93"/>
<polygon fill="black" stroke="black" points="8506.05,-4803.43 8515.98,-4799.74 8505.92,-4796.43 8506.05,-4803.43"/>
</g>
<!-- caption.main -->
<g id="node170" class="node">
<title>caption.main</title>
<g id="a_node170"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="5686,-4536.87 5501,-4536.87 5501,-4500.87 5686,-4500.87 5686,-4536.87"/>
<text text-anchor="middle" x="5593.5" y="-4512.71" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge294" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M5686.02,-4518.87C5796.92,-4518.87 5989.62,-4518.87 6156.09,-4518.87"/>
<polygon fill="black" stroke="black" points="6156.51,-4522.37 6166.51,-4518.87 6156.51,-4515.37 6156.51,-4522.37"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node171" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node171"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8762.5,-921.87 8461.5,-921.87 8461.5,-885.87 8762.5,-885.87 8762.5,-921.87"/>
<text text-anchor="middle" x="8612" y="-899.83" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node172" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6704,-1061.87 6236,-1061.87 6236,-1009.87 6704,-1009.87 6704,-1061.87"/>
<text text-anchor="middle" x="6470" y="-1025.73" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge298" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6704.28,-1046.3C6809.39,-1063.94 6924.94,-1104.02 6993,-1191.87 7057.76,-1275.47 6955.6,-2066.76 7029,-2142.87 7197.6,-2317.71 7912.68,-2095.7 8119,-2223.87 8145.74,-2240.49 8128.14,-2268.46 8155,-2284.87 8214.78,-2321.39 8409.22,-2320.37 8523.99,-2316.22"/>
<polygon fill="black" stroke="black" points="8524.3,-2319.71 8534.16,-2315.84 8524.03,-2312.72 8524.3,-2319.71"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge297" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6588.35,-1009.83C6708.19,-977.02 6890.73,-908.79 6993,-780.87 7036.35,-726.65 6974.55,-671.94 7029,-628.87 7218.99,-478.62 7877.14,-615.64 8119,-628.87 8238.66,-635.42 8373.96,-650.86 8472.34,-663.56"/>
<polygon fill="black" stroke="black" points="8471.98,-667.04 8482.35,-664.86 8472.88,-660.1 8471.98,-667.04"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge296" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6704.33,-1047.54C6808.79,-1065.53 6923.77,-1105.54 6993,-1191.87 7063.24,-1279.48 6948.67,-1617.42 7029,-1695.87 7115.74,-1780.59 7999.69,-1726.26 8119,-1747.87 8256.97,-1772.87 8409.86,-1826.24 8508.03,-1864.02"/>
<polygon fill="black" stroke="black" points="8507.06,-1867.39 8517.65,-1867.74 8509.58,-1860.86 8507.06,-1867.39"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge295" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6704.03,-1037.57C6931.54,-1039.22 7269.01,-1041.67 7449.12,-1042.97"/>
<polygon fill="black" stroke="black" points="7449.14,-1046.47 7459.17,-1043.05 7449.19,-1039.47 7449.14,-1046.47"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge299" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6567.36,-1009.86C6677.87,-981.44 6864.96,-937.58 7029,-919.87 7546.66,-863.99 8165.12,-882.09 8451.26,-895.26"/>
<polygon fill="black" stroke="black" points="8451.15,-898.75 8461.3,-895.72 8451.47,-891.76 8451.15,-898.75"/>
</g>
<!-- check_translations.parse_po -->
<g id="node173" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-4885.87 1083.5,-4885.87 1083.5,-4833.87 1667.5,-4833.87 1667.5,-4885.87"/>
<text text-anchor="middle" x="1375.5" y="-4850.18" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node174" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-4882.37 318,-4882.37 318,-4837.37 983,-4837.37 983,-4882.37"/>
<text text-anchor="middle" x="650.5" y="-4851.49" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge300" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-4859.87C1013.14,-4859.87 1043.45,-4859.87 1073.19,-4859.87"/>
<polygon fill="black" stroke="black" points="1073.26,-4863.37 1083.26,-4859.87 1073.26,-4856.37 1073.26,-4863.37"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node175" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node175"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="7983,-3095.37 7165,-3095.37 7165,-3038.37 7983,-3038.37 7983,-3095.37"/>
<text text-anchor="middle" x="7574" y="-3055.53" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge301" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7983.22,-3043.89C8398.73,-3024.91 8992.51,-3011.69 9069,-3085.87 9135.26,-3150.14 9041.19,-3849.17 9105,-3915.87 9160.79,-3974.19 9257.35,-3973.24 9327.41,-3962.57"/>
<polygon fill="black" stroke="black" points="9328.23,-3965.98 9337.55,-3960.93 9327.12,-3959.07 9328.23,-3965.98"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge302" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7716.69,-3038.34C7835.4,-3022.74 8003.52,-3021.01 8119,-3104.87 8153.53,-3129.95 8120.34,-3168.98 8155,-3193.87 8209.46,-3232.98 8390.88,-3232.21 8507.81,-3227.17"/>
<polygon fill="black" stroke="black" points="8508.03,-3230.67 8517.86,-3226.72 8507.72,-3223.68 8508.03,-3230.67"/>
</g>
<!-- pending_embed.main -->
<g id="node176" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6732,-1725.87 6208,-1725.87 6208,-1665.87 6732,-1665.87 6732,-1725.87"/>
<text text-anchor="middle" x="6470" y="-1684.35" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge307" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6605.51,-1725.88C6726.01,-1760 6897.98,-1827.95 6993,-1952.87 7045.03,-2021.28 6964.84,-2085.68 7029,-2142.87 7035.86,-2148.99 8132.88,-2224.98 8495.87,-2249.97"/>
<polygon fill="black" stroke="black" points="8495.66,-2253.46 8505.88,-2250.65 8496.14,-2246.48 8495.66,-2253.46"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge303" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6732.24,-1720.13C7057.28,-1750.49 7629.27,-1804.52 8119,-1853.87 8184.94,-1860.52 8255.83,-1867.88 8322.7,-1874.93"/>
<polygon fill="black" stroke="black" points="8322.65,-1878.44 8332.96,-1876.01 8323.38,-1871.48 8322.65,-1878.44"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge309" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6732.07,-1697.46C7189.88,-1700.24 8122.21,-1705.9 8473.21,-1708.04"/>
<polygon fill="black" stroke="black" points="8473.41,-1711.54 8483.43,-1708.1 8473.45,-1704.54 8473.41,-1711.54"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge304" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6672.95,-1665.84C6773.96,-1644.7 6895.2,-1609.7 6993,-1552.87 7012.56,-1541.5 7008.32,-1526.05 7029,-1516.87 7160.73,-1458.44 7328.41,-1460.01 7442.56,-1470.85"/>
<polygon fill="black" stroke="black" points="7442.45,-1474.36 7452.74,-1471.86 7443.13,-1467.39 7442.45,-1474.36"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge305" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6558.39,-1665.86C6680.43,-1618.74 6897.64,-1514.72 6993,-1343.87 7040.96,-1257.94 6958.13,-527.16 7029,-458.87 7102.6,-387.96 8482.5,-425.92 9108.36,-446.93"/>
<polygon fill="black" stroke="black" points="9108.32,-450.43 9118.44,-447.27 9108.56,-443.43 9108.32,-450.43"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge306" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6557.91,-1665.84C6679.63,-1618.61 6896.75,-1514.37 6993,-1343.87 7032.1,-1274.6 6971.36,-683.69 7029,-628.87 7111.14,-550.77 8987.14,-577.48 9069,-655.87 9149.62,-733.07 9030.6,-1073.67 9105,-1156.87 9136.11,-1191.66 9180.98,-1209.51 9226.88,-1217.88"/>
<polygon fill="black" stroke="black" points="9226.55,-1221.37 9236.99,-1219.57 9227.71,-1214.47 9226.55,-1221.37"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge308" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6558.35,-1665.84C6680.34,-1618.7 6897.5,-1514.64 6993,-1343.87 7039.19,-1261.27 6960.91,-558.6 7029,-492.87 7081.56,-442.14 8139.54,-468.14 8495.38,-478.37"/>
<polygon fill="black" stroke="black" points="8495.35,-481.87 8505.45,-478.66 8495.55,-474.87 8495.35,-481.87"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge310" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6511.56,-1725.91C6614.85,-1805.15 6887.09,-2031.94 6993,-2294.87 7023.51,-2370.61 6971.86,-2970.54 7029,-3028.87 7050.84,-3051.17 7097.52,-3064.5 7154.79,-3072.01"/>
<polygon fill="black" stroke="black" points="7154.48,-3075.5 7164.83,-3073.25 7155.34,-3068.55 7154.48,-3075.5"/>
</g>
<!-- pending_chop.main -->
<g id="node177" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7737.5,-679.87 7410.5,-679.87 7410.5,-637.87 7737.5,-637.87 7737.5,-679.87"/>
<text text-anchor="middle" x="7574" y="-650.79" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge312" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7737.73,-662.64C7927.4,-667.04 8239.69,-674.27 8434.91,-678.79"/>
<polygon fill="black" stroke="black" points="8434.91,-682.29 8444.98,-679.03 8435.07,-675.3 8434.91,-682.29"/>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge311" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7671.48,-637.86C7795.15,-617.24 8006.96,-604.43 8119,-726.87 8194.73,-809.64 8089.38,-1644.88 8155,-1735.87 8201.15,-1799.86 8274.31,-1839.79 8348.62,-1864.7"/>
<polygon fill="black" stroke="black" points="8347.57,-1868.03 8358.17,-1867.81 8349.74,-1861.38 8347.57,-1868.03"/>
</g>
<!-- telegram_bot:cli -->
<g id="node179" class="node">
<title>telegram_bot:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2010.5" cy="-4797.87" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="2010.5" y="-4793.71" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;telegram_bot:cli -->
<!-- price_train:cli -->
<g id="node180" class="node">
<title>price_train:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2655.5" cy="-4797.87" rx="36.68" ry="18"/>
<text text-anchor="middle" x="2655.5" y="-4796.27" font-family="Times,serif" font-size="7.00">price_train:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;price_train:cli -->
<!-- moderation:cli -->
<g id="node181" class="node">
<title>moderation:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3260.5" cy="-4797.87" rx="38.53" ry="18"/>
<text text-anchor="middle" x="3260.5" y="-4796.27" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- price_train:cli&#45;&gt;moderation:cli -->
<!-- debug_dump:cli -->
<g id="node182" class="node">
<title>debug_dump:cli</title>
<g id="a_node182"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4107" cy="-4797.87" rx="41.11" ry="18"/>
<text text-anchor="middle" x="4107" y="-4796.27" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;debug_dump:cli -->
<!-- build_site:cli -->
<g id="node183" class="node">
<title>build_site:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4921.87" rx="34.71" ry="18"/>
<text text-anchor="middle" x="141" y="-4920.27" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- chop:cli -->
<g id="node184" class="node">
<title>chop:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4921.87" rx="27" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4920.27" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;chop:cli -->
<!-- embed:cli -->
<g id="node185" class="node">
<title>embed:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4921.87" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4920.27" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;embed:cli -->
<!-- similar:cli -->
<g id="node186" class="node">
<title>similar:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2010.5" cy="-4921.87" rx="29.05" ry="18"/>
<text text-anchor="middle" x="2010.5" y="-4920.27" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;similar:cli -->
<!-- scan_ontology:cli -->
<g id="node187" class="node">
<title>scan_ontology:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2655.5" cy="-4921.87" rx="44.19" ry="18"/>
<text text-anchor="middle" x="2655.5" y="-4920.27" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;scan_ontology:cli -->
<!-- caption:cli -->
<g id="node188" class="node">
<title>caption:cli</title>
<g id="a_node188"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3260.5" cy="-4921.87" rx="30.28" ry="18"/>
<text text-anchor="middle" x="3260.5" y="-4920.27" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;caption:cli -->
<!-- pending_caption:cli -->
<g id="node189" class="node">
<title>pending_caption:cli</title>
<g id="a_node189"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4107" cy="-4921.87" rx="48.62" ry="18"/>
<text text-anchor="middle" x="4107" y="-4920.27" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;pending_caption:cli -->
<!-- check_translations:cli -->
<g id="node190" class="node">
<title>check_translations:cli</title>
<g id="a_node190"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4975.87" rx="53.05" ry="18"/>
<text text-anchor="middle" x="141" y="-4974.27" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli -->
<g id="node191" class="node">
<title>pending_embed:cli</title>
<g id="a_node191"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4975.87" rx="47.39" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4974.27" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_embed:cli -->
<!-- pending_chop:cli -->
<g id="node192" class="node">
<title>pending_chop:cli</title>
<g id="a_node192"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4975.87" rx="42.96" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4974.27" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli&#45;&gt;pending_chop:cli -->
<!-- build_site -->
<g id="node193" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4107" cy="-4743.87" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4107" y="-4740.17" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge326" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4163.12,-4743.87C4282.9,-4743.87 4572.52,-4743.87 4776.09,-4743.87"/>
<polygon fill="black" stroke="black" points="4776.32,-4747.37 4786.32,-4743.87 4776.32,-4740.37 4776.32,-4747.37"/>
</g>
<!-- caption -->
<g id="node194" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="4995.5" cy="-4518.87" rx="44.69" ry="18"/>
<text text-anchor="middle" x="4995.5" y="-4515.17" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge327" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5040.81,-4518.87C5135.4,-4518.87 5359.15,-4518.87 5490.81,-4518.87"/>
<polygon fill="black" stroke="black" points="5490.91,-4522.37 5500.91,-4518.87 5490.91,-4515.37 5490.91,-4522.37"/>
</g>
<!-- check_translations -->
<g id="node195" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4859.87" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-4856.17" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge328" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-4859.87C259.3,-4859.87 282.99,-4859.87 307.97,-4859.87"/>
<polygon fill="black" stroke="black" points="307.99,-4863.37 317.99,-4859.87 307.99,-4856.37 307.99,-4863.37"/>
</g>
<!-- chop -->
<g id="node196" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4995.5" cy="-2354.87" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4995.5" y="-2351.17" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge329" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M5028.12,-2354.87C5117.31,-2354.87 5373.07,-2354.87 5507.54,-2354.87"/>
<polygon fill="black" stroke="black" points="5507.8,-2358.37 5517.8,-2354.87 5507.8,-2351.37 5507.8,-2358.37"/>
</g>
<!-- clean_data -->
<g id="node197" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5593.5" cy="-753.87" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5593.5" y="-750.17" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge330" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5653.58,-753.87C5799.48,-753.87 6178.43,-753.87 6363.79,-753.87"/>
<polygon fill="black" stroke="black" points="6363.83,-757.37 6373.83,-753.87 6363.83,-750.37 6363.83,-757.37"/>
</g>
<!-- debug_dump -->
<g id="node198" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5593.5" cy="-4014.87" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5593.5" y="-4011.17" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge331" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5663.85,-4014.87C5782.92,-4014.87 6031.7,-4014.87 6221.4,-4014.87"/>
<polygon fill="black" stroke="black" points="6221.53,-4018.37 6231.53,-4014.87 6221.53,-4011.37 6221.53,-4018.37"/>
</g>
<!-- embed -->
<g id="node199" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5593.5" cy="-2806.87" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5593.5" y="-2803.17" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge332" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5635.8,-2806.87C5767.69,-2806.87 6181.27,-2806.87 6371.5,-2806.87"/>
<polygon fill="black" stroke="black" points="6371.77,-2810.37 6381.77,-2806.87 6371.77,-2803.37 6371.77,-2810.37"/>
</g>
<!-- moderation -->
<g id="node200" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6470" cy="-1316.87" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6470" y="-1313.17" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge333" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6533.81,-1316.87C6680.16,-1316.87 7050.91,-1316.87 7307.52,-1316.87"/>
<polygon fill="black" stroke="black" points="7307.74,-1320.37 7317.74,-1316.87 7307.74,-1313.37 7307.74,-1320.37"/>
</g>
<!-- pending_caption -->
<g id="node201" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5593.5" cy="-1039.87" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5593.5" y="-1036.17" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge334" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5680.74,-1039.48C5806.24,-1038.9 6044.02,-1037.82 6225.74,-1036.99"/>
<polygon fill="black" stroke="black" points="6226,-1040.48 6235.98,-1036.94 6225.97,-1033.48 6226,-1040.48"/>
</g>
<!-- pending_chop -->
<g id="node202" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6470" cy="-658.87" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6470" y="-655.17" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge335" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6545.02,-658.87C6718.51,-658.87 7155.21,-658.87 7399.94,-658.87"/>
<polygon fill="black" stroke="black" points="7400,-662.37 7410,-658.87 7400,-655.37 7400,-662.37"/>
</g>
<!-- pending_embed -->
<g id="node203" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5593.5" cy="-1695.87" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5593.5" y="-1692.17" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge336" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5677.56,-1695.87C5795.87,-1695.87 6018.43,-1695.87 6197.48,-1695.87"/>
<polygon fill="black" stroke="black" points="6197.58,-1699.37 6207.58,-1695.87 6197.58,-1692.37 6197.58,-1699.37"/>
</g>
<!-- price_train -->
<g id="node204" class="node">
<title>price_train</title>
<ellipse fill="none" stroke="black" cx="5593.5" cy="-3509.87" rx="61.19" ry="18"/>
<text text-anchor="middle" x="5593.5" y="-3506.17" font-family="Times,serif" font-size="14.00">price_train</text>
</g>
<!-- price_train&#45;&gt;price_train.main -->
<g id="edge337" class="edge">
<title>price_train:cli&#45;&gt;price_train.main</title>
<path fill="none" stroke="black" d="M5654.61,-3509.87C5796.39,-3509.87 6154.08,-3509.87 6344.78,-3509.87"/>
<polygon fill="black" stroke="black" points="6344.86,-3513.37 6354.86,-3509.87 6344.86,-3506.37 6344.86,-3513.37"/>
</g>
<!-- scan_ontology -->
<g id="node205" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4995.5" cy="-3273.87" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4995.5" y="-3270.17" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge338" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M5071.68,-3273.87C5143.08,-3273.87 5254.26,-3273.87 5355.6,-3273.87"/>
<polygon fill="black" stroke="black" points="5355.69,-3277.37 5365.69,-3273.87 5355.69,-3270.37 5355.69,-3277.37"/>
</g>
<!-- similar -->
<g id="node206" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5593.5" cy="-3170.87" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5593.5" y="-3167.17" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge339" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5636.68,-3171.26C5765.7,-3172.44 6158.21,-3176.03 6354.58,-3177.83"/>
<polygon fill="black" stroke="black" points="6354.61,-3181.33 6364.64,-3177.92 6354.68,-3174.33 6354.61,-3181.33"/>
</g>
<!-- telegram_bot -->
<g id="node207" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4107" cy="-3835.87" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4107" y="-3832.17" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge340" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4178.3,-3833.1C4315.87,-3827.67 4624.24,-3815.49 4820.09,-3807.76"/>
<polygon fill="black" stroke="black" points="4820.35,-3811.25 4830.2,-3807.36 4820.07,-3804.26 4820.35,-3811.25"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge341" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4178.3,-3838.73C4315.77,-3844.31 4623.79,-3856.82 4819.66,-3864.77"/>
<polygon fill="black" stroke="black" points="4819.64,-3868.28 4829.77,-3865.18 4819.92,-3861.28 4819.64,-3868.28"/>
</g>
<!-- tg_client -->
<g id="node208" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-2056.87" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-2053.17" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge342" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-2056.87C232.34,-2056.87 292.58,-2056.87 356.22,-2056.87"/>
<polygon fill="black" stroke="black" points="356.46,-2060.37 366.46,-2056.87 356.46,-2053.37 356.46,-2060.37"/>
</g>
</g>
</svg>
