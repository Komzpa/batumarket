<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="2217pt" height="3295pt"
 viewBox="0.00 0.00 2217.00 3295.09" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 3291.09)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-3291.09 2213,-3291.09 2213,4 -4,4"/>
<!-- post_io._parse_block -->
<g id="node1" class="node">
<title>post_io._parse_block</title>
<g id="a_node1"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="1902,-1337.09 1740,-1337.09 1740,-1301.09 1902,-1301.09 1902,-1337.09"/>
<text text-anchor="middle" x="1821" y="-1315.39" font-family="Times,serif" font-size="14.00">post_io._parse_block</text>
</a>
</g>
</g>
<!-- post_io.get_contact -->
<g id="node2" class="node">
<title>post_io.get_contact</title>
<g id="a_node2"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="708,-2875.09 554,-2875.09 554,-2839.09 708,-2839.09 708,-2875.09"/>
<text text-anchor="middle" x="631" y="-2853.39" font-family="Times,serif" font-size="14.00">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node3" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node3"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="1004.5,-2829.09 826.5,-2829.09 826.5,-2793.09 1004.5,-2793.09 1004.5,-2829.09"/>
<text text-anchor="middle" x="915.5" y="-2807.39" font-family="Times,serif" font-size="14.00">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.read_post -->
<g id="node4" class="node">
<title>post_io.read_post</title>
<g id="a_node4"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="1590.5,-1585.09 1449.5,-1585.09 1449.5,-1549.09 1590.5,-1549.09 1590.5,-1585.09"/>
<text text-anchor="middle" x="1520" y="-1563.39" font-family="Times,serif" font-size="14.00">post_io.read_post</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;post_io._parse_block -->
<g id="edge1" class="edge">
<title>post_io.read_post&#45;&gt;post_io._parse_block</title>
<path fill="none" stroke="black" d="M1534.62,-1548.91C1573.37,-1497.24 1682.18,-1352.87 1693,-1346.09 1704.19,-1339.09 1716.91,-1333.87 1729.87,-1330"/>
<polygon fill="black" stroke="black" points="1731.08,-1333.29 1739.8,-1327.29 1729.24,-1326.54 1731.08,-1333.29"/>
</g>
<!-- serde_utils.read_md -->
<g id="node5" class="node">
<title>serde_utils.read_md</title>
<g id="a_node5"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="1901.5,-2866.09 1740.5,-2866.09 1740.5,-2830.09 1901.5,-2830.09 1901.5,-2866.09"/>
<text text-anchor="middle" x="1821" y="-2844.39" font-family="Times,serif" font-size="14.00">serde_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;serde_utils.read_md -->
<g id="edge2" class="edge">
<title>post_io.read_post&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1590.8,-1564.13C1615.36,-1566.94 1640.83,-1574.98 1657,-1594.09 1745.08,-1698.23 1605.62,-2716.36 1693,-2821.09 1702.77,-2832.81 1716.25,-2840.21 1730.8,-2844.77"/>
<polygon fill="black" stroke="black" points="1729.92,-2848.16 1740.48,-2847.37 1731.73,-2841.4 1729.92,-2848.16"/>
</g>
<!-- serde_utils.read_text -->
<g id="node15" class="node">
<title>serde_utils.read_text</title>
<g id="a_node15"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="2180.5,-2747.09 2013.5,-2747.09 2013.5,-2711.09 2180.5,-2711.09 2180.5,-2747.09"/>
<text text-anchor="middle" x="2097" y="-2725.39" font-family="Times,serif" font-size="14.00">serde_utils.read_text</text>
</a>
</g>
</g>
<!-- serde_utils.read_md&#45;&gt;serde_utils.read_text -->
<g id="edge176" class="edge">
<title>serde_utils.read_md&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1901.53,-2835.65C1917.56,-2831.91 1934.06,-2827.14 1949,-2821.09 1991.75,-2803.8 2035.96,-2774.27 2064.59,-2753.34"/>
<polygon fill="black" stroke="black" points="2067,-2755.9 2072.95,-2747.14 2062.83,-2750.28 2067,-2755.9"/>
</g>
<!-- post_io.write_post -->
<g id="node6" class="node">
<title>post_io.write_post</title>
<g id="a_node6"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="439.5,-2875.09 293.5,-2875.09 293.5,-2839.09 439.5,-2839.09 439.5,-2875.09"/>
<text text-anchor="middle" x="366.5" y="-2853.39" font-family="Times,serif" font-size="14.00">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge3" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M439.58,-2857.09C471.76,-2857.09 509.95,-2857.09 543.65,-2857.09"/>
<polygon fill="black" stroke="black" points="543.96,-2860.59 553.96,-2857.09 543.96,-2853.59 543.96,-2860.59"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge4" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M439.69,-2841.38C462.12,-2837.05 486.99,-2832.8 510,-2830.09 614.06,-2817.85 734.05,-2813.42 816.16,-2811.86"/>
<polygon fill="black" stroke="black" points="816.29,-2815.36 826.23,-2811.68 816.17,-2808.36 816.29,-2815.36"/>
</g>
<!-- serde_utils.write_md -->
<g id="node7" class="node">
<title>serde_utils.write_md</title>
<g id="a_node7"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="714,-2929.09 548,-2929.09 548,-2893.09 714,-2893.09 714,-2929.09"/>
<text text-anchor="middle" x="631" y="-2907.39" font-family="Times,serif" font-size="14.00">serde_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;serde_utils.write_md -->
<g id="edge5" class="edge">
<title>post_io.write_post&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M439.58,-2871.92C469.97,-2878.17 505.73,-2885.53 538,-2892.17"/>
<polygon fill="black" stroke="black" points="537.39,-2895.61 547.89,-2894.2 538.8,-2888.76 537.39,-2895.61"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node8" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node8"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="1607.5,-2211.09 1432.5,-2211.09 1432.5,-2175.09 1607.5,-2175.09 1607.5,-2211.09"/>
<text text-anchor="middle" x="1520" y="-2189.39" font-family="Times,serif" font-size="14.00">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node9" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node9"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="1333.5,-2103.09 1092.5,-2103.09 1092.5,-2067.09 1333.5,-2067.09 1333.5,-2103.09"/>
<text text-anchor="middle" x="1213" y="-2081.39" font-family="Times,serif" font-size="14.00">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge6" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1315.96,-2103.17C1326.54,-2105.82 1337.05,-2108.79 1347,-2112.09 1393.25,-2127.43 1443.35,-2152.01 1477.49,-2170.08"/>
<polygon fill="black" stroke="black" points="1476.21,-2173.36 1486.67,-2174.99 1479.5,-2167.19 1476.21,-2173.36"/>
</g>
<!-- telegram_bot._t -->
<g id="node10" class="node">
<title>telegram_bot._t</title>
<g id="a_node10"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="175.5,-3179.09 47.5,-3179.09 47.5,-3143.09 175.5,-3143.09 175.5,-3179.09"/>
<text text-anchor="middle" x="111.5" y="-3157.39" font-family="Times,serif" font-size="14.00">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.save_state -->
<g id="node11" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="462,-3179.09 271,-3179.09 271,-3143.09 462,-3143.09 462,-3179.09"/>
<text text-anchor="middle" x="366.5" y="-3157.39" font-family="Times,serif" font-size="14.00">telegram_bot.save_state</text>
</g>
<!-- telegram_bot._t&#45;&gt;telegram_bot.save_state -->
<!-- phone_utils.format_georgian -->
<g id="node17" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node17"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="741.5,-3179.09 520.5,-3179.09 520.5,-3143.09 741.5,-3143.09 741.5,-3179.09"/>
<text text-anchor="middle" x="631" y="-3157.39" font-family="Times,serif" font-size="14.00">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- telegram_bot.save_state&#45;&gt;phone_utils.format_georgian -->
<!-- telegram_bot.ensure_profile -->
<g id="node12" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node12"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="1024,-799.09 807,-799.09 807,-763.09 1024,-763.09 1024,-799.09"/>
<text text-anchor="middle" x="915.5" y="-777.39" font-family="Times,serif" font-size="14.00">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node13" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node13"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="1317,-799.09 1109,-799.09 1109,-763.09 1317,-763.09 1317,-799.09"/>
<text text-anchor="middle" x="1213" y="-777.39" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge8" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M1024.02,-781.09C1048.38,-781.09 1074.33,-781.09 1098.92,-781.09"/>
<polygon fill="black" stroke="black" points="1099,-784.59 1109,-781.09 1099,-777.59 1099,-784.59"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node14" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node14"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="1924,-1499.09 1718,-1499.09 1718,-1463.09 1924,-1463.09 1924,-1499.09"/>
<text text-anchor="middle" x="1821" y="-1477.39" font-family="Times,serif" font-size="14.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;serde_utils.read_text -->
<g id="edge9" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1924.05,-1490.34C1933.42,-1494.66 1942,-1500.44 1949,-1508.09 2032.47,-1599.41 2085.3,-2526.26 2094.54,-2700.82"/>
<polygon fill="black" stroke="black" points="2091.06,-2701.2 2095.08,-2711 2098.05,-2700.83 2091.06,-2701.2"/>
</g>
<!-- serde_utils.read_text&#45;&gt;serde_utils.read_text -->
<g id="edge175" class="edge">
<title>serde_utils.read_text&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M2047.07,-2747.25C2039.39,-2756.63 2056.03,-2765.09 2097,-2765.09 2122.29,-2765.09 2138.3,-2761.87 2145.06,-2757.2"/>
<polygon fill="black" stroke="black" points="2148.52,-2757.72 2146.93,-2747.25 2141.64,-2756.43 2148.52,-2757.72"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node16" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node16"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="1614,-3125.09 1426,-3125.09 1426,-3089.09 1614,-3089.09 1614,-3125.09"/>
<text text-anchor="middle" x="1520" y="-3103.39" font-family="Times,serif" font-size="14.00">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;serde_utils.read_text -->
<g id="edge10" class="edge">
<title>telegram_bot.load_state&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1614.09,-3111.13C1723.65,-3114.02 1897.22,-3112.2 1949,-3075.09 2056.76,-2997.86 2086.06,-2825.35 2093.57,-2757.39"/>
<polygon fill="black" stroke="black" points="2097.05,-2757.71 2094.6,-2747.41 2090.09,-2757 2097.05,-2757.71"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node82" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node82"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="1004.5,-3179.09 826.5,-3179.09 826.5,-3143.09 1004.5,-3143.09 1004.5,-3179.09"/>
<text text-anchor="middle" x="915.5" y="-3157.39" font-family="Times,serif" font-size="14.00">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian&#45;&gt;lot_io.embedding_path -->
<!-- telegram_bot.scan_embeddings -->
<g id="node18" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node18"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="752,-1628.09 510,-1628.09 510,-1592.09 752,-1592.09 752,-1628.09"/>
<text text-anchor="middle" x="631" y="-1606.39" font-family="Times,serif" font-size="14.00">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node19" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node19"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="1035,-1628.09 796,-1628.09 796,-1592.09 1035,-1592.09 1035,-1628.09"/>
<text text-anchor="middle" x="915.5" y="-1606.39" font-family="Times,serif" font-size="14.00">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge12" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M752.22,-1610.09C763.25,-1610.09 774.47,-1610.09 785.58,-1610.09"/>
<polygon fill="black" stroke="black" points="785.74,-1613.59 795.74,-1610.09 785.74,-1606.59 785.74,-1613.59"/>
</g>
<!-- serde_utils.load_json -->
<g id="node24" class="node">
<title>serde_utils.load_json</title>
<g id="a_node24"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="1903.5,-1840.09 1738.5,-1840.09 1738.5,-1804.09 1903.5,-1804.09 1903.5,-1840.09"/>
<text text-anchor="middle" x="1821" y="-1818.39" font-family="Times,serif" font-size="14.00">serde_utils.load_json</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;serde_utils.load_json -->
<g id="edge101" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1035.22,-1592.3C1125.73,-1584.43 1250.77,-1586.22 1347,-1636.09 1369.74,-1647.88 1360.85,-1668.24 1383,-1681.09 1489.61,-1742.97 1544.71,-1673.24 1657,-1724.09 1675.97,-1732.68 1675.73,-1742.45 1693,-1754.09 1718.19,-1771.08 1748.07,-1787.25 1772.52,-1799.57"/>
<polygon fill="black" stroke="black" points="1771.09,-1802.76 1781.6,-1804.09 1774.21,-1796.5 1771.09,-1802.76"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node20" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="1329.5,-507.09 1096.5,-507.09 1096.5,-471.09 1329.5,-471.09 1329.5,-507.09"/>
<text text-anchor="middle" x="1213" y="-485.39" font-family="Times,serif" font-size="14.00">telegram_bot._should_suggest</text>
</g>
<!-- similar_utils._cos_sim -->
<g id="node21" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node21"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="1605.5,-415.09 1434.5,-415.09 1434.5,-379.09 1605.5,-379.09 1605.5,-415.09"/>
<text text-anchor="middle" x="1520" y="-393.39" font-family="Times,serif" font-size="14.00">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge13" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M1254.99,-471.05C1288.81,-456.73 1338.31,-437.02 1383,-424.09 1396.21,-420.27 1410.3,-416.81 1424.22,-413.74"/>
<polygon fill="black" stroke="black" points="1425.26,-417.1 1434.3,-411.57 1423.79,-410.25 1425.26,-417.1"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node22" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="1035.5,-653.09 795.5,-653.09 795.5,-617.09 1035.5,-617.09 1035.5,-653.09"/>
<text text-anchor="middle" x="915.5" y="-631.39" font-family="Times,serif" font-size="14.00">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge14" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M1030.34,-653.17C1034.81,-655.79 1039.06,-658.75 1043,-662.09 1076.47,-690.51 1045.39,-725.84 1079,-754.09 1085.15,-759.26 1092.02,-763.53 1099.31,-767.06"/>
<polygon fill="black" stroke="black" points="1098.18,-770.38 1108.75,-771.13 1100.96,-763.95 1098.18,-770.38"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge15" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M1029.96,-617.09C1034.57,-614.45 1038.94,-611.47 1043,-608.09 1075.16,-581.32 1047.19,-548.28 1079,-521.09 1082.81,-517.84 1086.89,-514.91 1091.17,-512.26"/>
<polygon fill="black" stroke="black" points="1093.19,-515.14 1100.23,-507.22 1089.79,-509.02 1093.19,-515.14"/>
</g>
<!-- build_site._load_ontology -->
<g id="node23" class="node">
<title>build_site._load_ontology</title>
<polygon fill="none" stroke="black" points="1013,-1567.09 818,-1567.09 818,-1531.09 1013,-1531.09 1013,-1567.09"/>
<text text-anchor="middle" x="915.5" y="-1545.39" font-family="Times,serif" font-size="14.00">build_site._load_ontology</text>
</g>
<!-- build_site._load_ontology&#45;&gt;serde_utils.load_json -->
<g id="edge16" class="edge">
<title>build_site._load_ontology&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1013.09,-1532.92C1106.07,-1522.61 1246.92,-1521.29 1347,-1585.09 1374.19,-1602.43 1356.13,-1630.26 1383,-1648.09 1485.21,-1715.9 1556.91,-1610.2 1657,-1681.09 1686.52,-1702 1667.85,-1728.09 1693,-1754.09 1711.88,-1773.61 1737.59,-1788.81 1760.94,-1799.84"/>
<polygon fill="black" stroke="black" points="1759.55,-1803.05 1770.1,-1804.01 1762.45,-1796.68 1759.55,-1803.05"/>
</g>
<!-- serde_utils.load_json&#45;&gt;serde_utils.read_text -->
<g id="edge178" class="edge">
<title>serde_utils.load_json&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1834.91,-1840.31C1860.53,-1877.3 1917.97,-1964.63 1949,-2046.09 2041.8,-2289.76 2082.4,-2605.8 2093.03,-2700.85"/>
<polygon fill="black" stroke="black" points="2089.56,-2701.28 2094.13,-2710.84 2096.52,-2700.52 2089.56,-2701.28"/>
</g>
<!-- build_site._compile_locale -->
<g id="node25" class="node">
<title>build_site._compile_locale</title>
<polygon fill="none" stroke="black" points="1921,-465.09 1721,-465.09 1721,-429.09 1921,-429.09 1921,-465.09"/>
<text text-anchor="middle" x="1821" y="-443.39" font-family="Times,serif" font-size="14.00">build_site._compile_locale</text>
</g>
<!-- build_site._env_for_lang -->
<g id="node26" class="node">
<title>build_site._env_for_lang</title>
<polygon fill="none" stroke="black" points="1613.5,-469.09 1426.5,-469.09 1426.5,-433.09 1613.5,-433.09 1613.5,-469.09"/>
<text text-anchor="middle" x="1520" y="-447.39" font-family="Times,serif" font-size="14.00">build_site._env_for_lang</text>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge17" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M1613.56,-449.85C1644.28,-449.44 1678.77,-448.98 1710.63,-448.56"/>
<polygon fill="black" stroke="black" points="1710.93,-452.05 1720.88,-448.42 1710.83,-445.05 1710.93,-452.05"/>
</g>
<!-- build_site._iter_lots -->
<g id="node27" class="node">
<title>build_site._iter_lots</title>
<g id="a_node27"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="1290.5,-983.09 1135.5,-983.09 1135.5,-947.09 1290.5,-947.09 1290.5,-983.09"/>
<text text-anchor="middle" x="1213" y="-961.39" font-family="Times,serif" font-size="14.00">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge18" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1290.7,-964.38C1311.75,-968.1 1332.69,-976.12 1347,-992.09 1405.97,-1057.9 1351.03,-1305.72 1383,-1388.09 1407.18,-1450.41 1459.88,-1509.46 1492.11,-1541.73"/>
<polygon fill="black" stroke="black" points="1489.87,-1544.43 1499.45,-1548.96 1494.78,-1539.44 1489.87,-1544.43"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge19" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1290.56,-963.77C1311.87,-967.41 1332.99,-975.55 1347,-992.09 1420.59,-1078.96 1344.48,-1908.96 1383,-2016.09 1405.33,-2078.21 1458.16,-2136.03 1491.01,-2167.77"/>
<polygon fill="black" stroke="black" points="1488.84,-2170.54 1498.5,-2174.89 1493.67,-2165.46 1488.84,-2170.54"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node28" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node28"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="1647.5,-833.09 1392.5,-833.09 1392.5,-797.09 1647.5,-797.09 1647.5,-833.09"/>
<text text-anchor="middle" x="1520" y="-811.39" font-family="Times,serif" font-size="14.00">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge20" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M1290.62,-959.46C1310.81,-954.77 1331.31,-946.72 1347,-933.09 1379.84,-904.57 1349.59,-869.95 1383,-842.09 1384.37,-840.95 1385.77,-839.86 1387.2,-838.8"/>
<polygon fill="black" stroke="black" points="1389.28,-841.62 1395.72,-833.21 1385.44,-835.77 1389.28,-841.62"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node29" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node29"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="1626,-995.09 1414,-995.09 1414,-959.09 1626,-959.09 1626,-995.09"/>
<text text-anchor="middle" x="1520" y="-973.39" font-family="Times,serif" font-size="14.00">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge21" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M1290.57,-968.11C1324.83,-969.45 1365.95,-971.07 1403.81,-972.56"/>
<polygon fill="black" stroke="black" points="1403.74,-976.06 1413.87,-972.96 1404.02,-969.07 1403.74,-976.06"/>
</g>
<!-- lot_io.read_lots -->
<g id="node30" class="node">
<title>lot_io.read_lots</title>
<g id="a_node30"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="1582.5,-1049.09 1457.5,-1049.09 1457.5,-1013.09 1582.5,-1013.09 1582.5,-1049.09"/>
<text text-anchor="middle" x="1520" y="-1027.39" font-family="Times,serif" font-size="14.00">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge22" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1290.68,-979C1309.22,-982.82 1328.9,-987.26 1347,-992.09 1363.29,-996.44 1366.7,-999.78 1383,-1004.09 1403.7,-1009.57 1426.43,-1014.51 1447.28,-1018.61"/>
<polygon fill="black" stroke="black" points="1446.87,-1022.09 1457.35,-1020.55 1448.2,-1015.22 1446.87,-1022.09"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node31" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node31"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="1593,-887.09 1447,-887.09 1447,-851.09 1593,-851.09 1593,-887.09"/>
<text text-anchor="middle" x="1520" y="-865.39" font-family="Times,serif" font-size="14.00">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge23" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M1290.66,-954.37C1309.87,-949.64 1329.87,-942.85 1347,-933.09 1366.94,-921.74 1362.84,-907.04 1383,-896.09 1399.41,-887.18 1418.36,-881.19 1436.8,-877.17"/>
<polygon fill="black" stroke="black" points="1437.56,-880.59 1446.68,-875.19 1436.19,-873.73 1437.56,-880.59"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node97" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node97"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="1949,-519.09 1693,-519.09 1693,-483.09 1949,-483.09 1949,-519.09"/>
<text text-anchor="middle" x="1821" y="-497.39" font-family="Times,serif" font-size="14.00">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge141" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M1632.8,-796.96C1641.4,-793.16 1649.6,-788.59 1657,-783.09 1746.1,-716.91 1794.39,-586.43 1812.07,-529.16"/>
<polygon fill="black" stroke="black" points="1815.5,-529.94 1815.02,-519.35 1808.79,-527.92 1815.5,-529.94"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node98" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node98"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="1927,-995.09 1715,-995.09 1715,-959.09 1927,-959.09 1927,-995.09"/>
<text text-anchor="middle" x="1821" y="-973.39" font-family="Times,serif" font-size="14.00">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge142" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M1626.42,-977.09C1651.72,-977.09 1678.88,-977.09 1704.62,-977.09"/>
<polygon fill="black" stroke="black" points="1704.78,-980.59 1714.78,-977.09 1704.78,-973.59 1704.78,-980.59"/>
</g>
<!-- lot_io.read_lots&#45;&gt;serde_utils.load_json -->
<g id="edge149" class="edge">
<title>lot_io.read_lots&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1582.68,-1045.27C1610.1,-1054.88 1639.97,-1070.65 1657,-1096.09 1738.45,-1217.79 1614.35,-1630.56 1693,-1754.09 1706.1,-1774.68 1727.67,-1789.45 1749.34,-1799.85"/>
<polygon fill="black" stroke="black" points="1748.05,-1803.11 1758.6,-1804.04 1750.94,-1796.73 1748.05,-1803.11"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node100" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node100"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="1885.5,-834.09 1756.5,-834.09 1756.5,-798.09 1885.5,-798.09 1885.5,-834.09"/>
<text text-anchor="middle" x="1821" y="-812.39" font-family="Times,serif" font-size="14.00">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge148" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M1582.8,-1028.99C1607.55,-1025.67 1635.29,-1018.61 1657,-1004.09 1680.98,-988.06 1675.01,-972.64 1693,-950.09 1725.02,-909.95 1766.69,-867.58 1793.4,-841.49"/>
<polygon fill="black" stroke="black" points="1796.11,-843.73 1800.85,-834.25 1791.24,-838.71 1796.11,-843.73"/>
</g>
<!-- build_site._copy_images -->
<g id="node32" class="node">
<title>build_site._copy_images</title>
<polygon fill="none" stroke="black" points="1307,-891.09 1119,-891.09 1119,-855.09 1307,-855.09 1307,-891.09"/>
<text text-anchor="middle" x="1213" y="-869.39" font-family="Times,serif" font-size="14.00">build_site._copy_images</text>
</g>
<!-- build_site._copy_static -->
<g id="node33" class="node">
<title>build_site._copy_static</title>
<g id="a_node33"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="719,-599.09 543,-599.09 543,-563.09 719,-563.09 719,-599.09"/>
<text text-anchor="middle" x="631" y="-577.39" font-family="Times,serif" font-size="14.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node34" class="node">
<title>build_site._load_state</title>
<g id="a_node34"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="716,-1506.09 546,-1506.09 546,-1470.09 716,-1470.09 716,-1506.09"/>
<text text-anchor="middle" x="631" y="-1484.39" font-family="Times,serif" font-size="14.00">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge27" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M659.12,-1506.19C689.43,-1525.73 740.51,-1556.68 788,-1576.09 799.91,-1580.96 812.73,-1585.34 825.49,-1589.2"/>
<polygon fill="black" stroke="black" points="824.63,-1592.6 835.21,-1592.06 826.6,-1585.88 824.63,-1592.6"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge24" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M715.61,-1506.15C748.78,-1513.31 787.07,-1521.58 821.14,-1528.93"/>
<polygon fill="black" stroke="black" points="820.59,-1532.39 831.1,-1531.08 822.07,-1525.55 820.59,-1532.39"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge25" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M716.27,-1472.64C730.08,-1466.52 742.84,-1457.98 752,-1446.09 813.78,-1365.93 715.88,-1063.1 788,-992.09 880.52,-901 1046.26,-922.41 1140.79,-944.68"/>
<polygon fill="black" stroke="black" points="1140.01,-948.09 1150.56,-947.04 1141.66,-941.29 1140.01,-948.09"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge26" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M716.07,-1472.86C729.98,-1466.71 742.83,-1458.12 752,-1446.09 822.76,-1353.27 707.41,-1006.52 788,-922.09 871.89,-834.22 1022.23,-838.8 1119.5,-853.46"/>
<polygon fill="black" stroke="black" points="1119.2,-856.95 1129.62,-855.05 1120.29,-850.04 1119.2,-856.95"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node35" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node35"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="1621,-1639.09 1419,-1639.09 1419,-1603.09 1621,-1603.09 1621,-1639.09"/>
<text text-anchor="middle" x="1520" y="-1617.39" font-family="Times,serif" font-size="14.00">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge28" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M716.13,-1488.1C893.73,-1488.78 1294.93,-1494 1347,-1527.09 1375.53,-1545.22 1355.82,-1573.99 1383,-1594.09 1390.98,-1600 1399.92,-1604.7 1409.31,-1608.44"/>
<polygon fill="black" stroke="black" points="1408.23,-1611.77 1418.82,-1611.86 1410.6,-1605.18 1408.23,-1611.77"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;serde_utils.load_json -->
<g id="edge102" class="edge">
<title>similar_utils._load_similar&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1621.09,-1632.33C1634.24,-1637.18 1646.69,-1643.88 1657,-1653.09 1692.52,-1684.86 1661.91,-1717.98 1693,-1754.09 1710.14,-1774 1734.59,-1789.02 1757.47,-1799.81"/>
<polygon fill="black" stroke="black" points="1756.26,-1803.1 1766.82,-1804.03 1759.14,-1796.72 1756.26,-1803.1"/>
</g>
<!-- build_site._sync_embeddings -->
<g id="node36" class="node">
<title>build_site._sync_embeddings</title>
<g id="a_node36"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="1027,-507.09 804,-507.09 804,-471.09 1027,-471.09 1027,-507.09"/>
<text text-anchor="middle" x="915.5" y="-485.39" font-family="Times,serif" font-size="14.00">build_site._sync_embeddings</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model -->
<g id="node37" class="node">
<title>build_site._apply_price_model</title>
<g id="a_node37"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="745.5,-245.09 516.5,-245.09 516.5,-209.09 745.5,-209.09 745.5,-245.09"/>
<text text-anchor="middle" x="631" y="-223.39" font-family="Times,serif" font-size="14.00">build_site._apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node38" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node38"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="1043,-245.09 788,-245.09 788,-209.09 1043,-209.09 1043,-245.09"/>
<text text-anchor="middle" x="915.5" y="-223.39" font-family="Times,serif" font-size="14.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge29" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M745.68,-227.09C756.14,-227.09 766.81,-227.09 777.44,-227.09"/>
<polygon fill="black" stroke="black" points="777.62,-230.59 787.62,-227.09 777.62,-223.59 777.62,-230.59"/>
</g>
<!-- price_utils.predict_price -->
<g id="node39" class="node">
<title>price_utils.predict_price</title>
<g id="a_node39"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="1307.5,-199.09 1118.5,-199.09 1118.5,-163.09 1307.5,-163.09 1307.5,-199.09"/>
<text text-anchor="middle" x="1213" y="-177.39" font-family="Times,serif" font-size="14.00">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge30" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M724.53,-209.09C745.34,-205.6 767.37,-202.33 788,-200.09 896.87,-188.28 1022.23,-183.78 1108.24,-182.08"/>
<polygon fill="black" stroke="black" points="1108.34,-185.58 1118.27,-181.89 1108.21,-178.58 1108.34,-185.58"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node40" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node40"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="1621,-65.09 1419,-65.09 1419,-29.09 1621,-29.09 1621,-65.09"/>
<text text-anchor="middle" x="1520" y="-43.39" font-family="Times,serif" font-size="14.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge31" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M648.63,-209.04C675.11,-181.67 729.82,-130.49 788,-108.09 996.04,-28.01 1261.36,-28.92 1408.35,-37.51"/>
<polygon fill="black" stroke="black" points="1408.54,-41.03 1418.73,-38.14 1408.96,-34.04 1408.54,-41.03"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node41" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node41"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="1018.5,-299.09 812.5,-299.09 812.5,-263.09 1018.5,-263.09 1018.5,-299.09"/>
<text text-anchor="middle" x="915.5" y="-277.39" font-family="Times,serif" font-size="14.00">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- build_site._apply_price_model&#45;&gt;price_utils.guess_currency -->
<g id="edge32" class="edge">
<title>build_site._apply_price_model&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M726.46,-245.15C753.32,-250.28 782.72,-255.9 810.13,-261.14"/>
<polygon fill="black" stroke="black" points="809.65,-264.61 820.13,-263.05 810.96,-257.74 809.65,-264.61"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node108" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node108"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="1329,-253.09 1097,-253.09 1097,-217.09 1329,-217.09 1329,-253.09"/>
<text text-anchor="middle" x="1213" y="-231.39" font-family="Times,serif" font-size="14.00">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge162" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M1043.1,-230.52C1057.47,-230.91 1072.12,-231.31 1086.47,-231.69"/>
<polygon fill="black" stroke="black" points="1086.78,-235.2 1096.87,-231.98 1086.97,-228.21 1086.78,-235.2"/>
</g>
<!-- build_site._similar_by_user -->
<g id="node42" class="node">
<title>build_site._similar_by_user</title>
<g id="a_node42"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="1317.5,-415.09 1108.5,-415.09 1108.5,-379.09 1317.5,-379.09 1317.5,-415.09"/>
<text text-anchor="middle" x="1213" y="-393.39" font-family="Times,serif" font-size="14.00">build_site._similar_by_user</text>
</a>
</g>
</g>
<!-- build_site._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge33" class="edge">
<title>build_site._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M1317.68,-397.09C1352.12,-397.09 1390.26,-397.09 1424,-397.09"/>
<polygon fill="black" stroke="black" points="1424.32,-400.59 1434.32,-397.09 1424.32,-393.59 1424.32,-400.59"/>
</g>
<!-- build_site._categorise -->
<g id="node43" class="node">
<title>build_site._categorise</title>
<g id="a_node43"><a xlink:title="Return category info and recent lot list.">
<polygon fill="none" stroke="black" points="716.5,-461.09 545.5,-461.09 545.5,-425.09 716.5,-425.09 716.5,-461.09"/>
<text text-anchor="middle" x="631" y="-439.39" font-family="Times,serif" font-size="14.00">build_site._categorise</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node44" class="node">
<title>lot_io.get_seller</title>
<g id="a_node44"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="1584.5,-617.09 1455.5,-617.09 1455.5,-581.09 1584.5,-581.09 1584.5,-617.09"/>
<text text-anchor="middle" x="1520" y="-595.39" font-family="Times,serif" font-size="14.00">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge34" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M716.64,-438.68C880.21,-431.24 1233.62,-420.76 1347,-462.09 1409.76,-484.97 1467.08,-540.58 1497.08,-573.48"/>
<polygon fill="black" stroke="black" points="1494.47,-575.82 1503.75,-580.93 1499.68,-571.15 1494.47,-575.82"/>
</g>
<!-- build_site._render_site -->
<g id="node45" class="node">
<title>build_site._render_site</title>
<polygon fill="none" stroke="black" points="1004.5,-707.09 826.5,-707.09 826.5,-671.09 1004.5,-671.09 1004.5,-707.09"/>
<text text-anchor="middle" x="915.5" y="-685.39" font-family="Times,serif" font-size="14.00">build_site._render_site</text>
</g>
<!-- build_site._render_site&#45;&gt;serde_utils.read_text -->
<g id="edge38" class="edge">
<title>build_site._render_site&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1004.8,-682.08C1018.71,-677.79 1032.08,-671.44 1043,-662.09 1076.99,-633.01 1042.14,-593.45 1079,-568.09 1096.28,-556.21 1636.66,-565.22 1657,-572.09 1810.17,-623.88 1870.96,-647.48 1949,-789.09 1997.34,-876.82 2082.33,-2467.96 2094.53,-2700.76"/>
<polygon fill="black" stroke="black" points="2091.03,-2701.01 2095.05,-2710.81 2098.02,-2700.64 2091.03,-2701.01"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge37" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M1004.63,-680.85C1018.4,-676.69 1031.76,-670.69 1043,-662.09 1070.79,-640.84 1049.14,-610.32 1079,-592.09 1138.45,-555.82 1336.37,-574.76 1445.39,-588.67"/>
<polygon fill="black" stroke="black" points="1444.97,-592.14 1455.33,-589.96 1445.87,-585.2 1444.97,-592.14"/>
</g>
<!-- build_site.build_page -->
<g id="node46" class="node">
<title>build_site.build_page</title>
<g id="a_node46"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="1296.5,-1383.09 1129.5,-1383.09 1129.5,-1347.09 1296.5,-1347.09 1296.5,-1383.09"/>
<text text-anchor="middle" x="1213" y="-1361.39" font-family="Times,serif" font-size="14.00">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge35" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M980.82,-707.18C1004.3,-717.13 1028.61,-732.08 1043,-754.09 1114.13,-862.93 993.65,-1240 1079,-1338.09 1089.63,-1350.31 1104.14,-1357.91 1119.68,-1362.5"/>
<polygon fill="black" stroke="black" points="1118.91,-1365.91 1129.46,-1364.98 1120.63,-1359.13 1118.91,-1365.91"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node47" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node47"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="1627.5,-941.09 1412.5,-941.09 1412.5,-905.09 1627.5,-905.09 1627.5,-941.09"/>
<text text-anchor="middle" x="1520" y="-919.39" font-family="Times,serif" font-size="14.00">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge36" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M965.11,-707.12C990.26,-718.07 1020.34,-733.87 1043,-754.09 1064.52,-773.3 1054.59,-792.73 1079,-808.09 1180.81,-872.18 1244.05,-783.85 1347,-846.09 1370.43,-860.26 1359.97,-881.28 1383,-896.09 1389.19,-900.08 1395.85,-903.49 1402.77,-906.42"/>
<polygon fill="black" stroke="black" points="1401.76,-909.78 1412.35,-910.12 1404.28,-903.25 1401.76,-909.78"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge39" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1296.76,-1368.36C1314.99,-1372.54 1333.01,-1379.81 1347,-1392.09 1384.08,-1424.64 1350.74,-1459.77 1383,-1497.09 1401.4,-1518.38 1427.87,-1534.04 1452.58,-1545.08"/>
<polygon fill="black" stroke="black" points="1451.37,-1548.37 1461.94,-1549.09 1454.12,-1541.93 1451.37,-1548.37"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge40" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1296.58,-1365.17C1315.71,-1369.28 1334.19,-1377.31 1347,-1392.09 1392.48,-1444.58 1358.77,-1951.01 1383,-2016.09 1406.09,-2078.13 1458.91,-2136.18 1491.51,-2167.94"/>
<polygon fill="black" stroke="black" points="1489.3,-2170.67 1498.94,-2175.06 1494.14,-2165.62 1489.3,-2170.67"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge41" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M1296.69,-1365.11C1315.82,-1361 1334.27,-1352.94 1347,-1338.09 1402.46,-1273.41 1346.3,-648.99 1383,-572.09 1403.22,-529.73 1445.76,-495.79 1477.91,-474.76"/>
<polygon fill="black" stroke="black" points="1480.13,-477.5 1486.68,-469.18 1476.36,-471.6 1480.13,-477.5"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge43" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M1296.57,-1364.63C1315.59,-1360.5 1334.02,-1352.56 1347,-1338.09 1404.84,-1273.65 1325.02,-1014.41 1383,-950.09 1388.79,-943.67 1395.64,-938.51 1403.13,-934.4"/>
<polygon fill="black" stroke="black" points="1404.7,-937.53 1412.19,-930.04 1401.66,-931.22 1404.7,-937.53"/>
</g>
<!-- caption_io.read_caption -->
<g id="node48" class="node">
<title>caption_io.read_caption</title>
<g id="a_node48"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="1612.5,-2308.09 1427.5,-2308.09 1427.5,-2272.09 1612.5,-2272.09 1612.5,-2308.09"/>
<text text-anchor="middle" x="1520" y="-2286.39" font-family="Times,serif" font-size="14.00">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge42" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M1296.72,-1365.05C1315.85,-1369.16 1334.3,-1377.22 1347,-1392.09 1406.81,-1462.11 1333.35,-2142.54 1383,-2220.09 1397.03,-2242.01 1420.25,-2257.4 1443.56,-2268.06"/>
<polygon fill="black" stroke="black" points="1442.26,-2271.31 1452.83,-2272.05 1445.03,-2264.88 1442.26,-2271.31"/>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.read_md -->
<g id="edge91" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1612.66,-2291.65C1629.54,-2296.17 1645.45,-2304.01 1657,-2317.09 1731.3,-2401.28 1619.27,-2736.4 1693,-2821.09 1702.8,-2832.35 1716.03,-2839.59 1730.26,-2844.14"/>
<polygon fill="black" stroke="black" points="1729.66,-2847.61 1740.23,-2846.87 1731.51,-2840.86 1729.66,-2847.61"/>
</g>
<!-- caption_io.read_caption&#45;&gt;serde_utils.load_json -->
<g id="edge92" class="edge">
<title>caption_io.read_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1582.16,-2272.05C1608.95,-2261.15 1638.44,-2244.51 1657,-2220.09 1704.78,-2157.21 1665.19,-2120 1693,-2046.09 1721.6,-1970.08 1773.57,-1889.15 1801.33,-1848.55"/>
<polygon fill="black" stroke="black" points="1804.24,-1850.51 1807.03,-1840.29 1798.47,-1846.53 1804.24,-1850.51"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node60" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node60"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="1931.5,-2446.09 1710.5,-2446.09 1710.5,-2410.09 1931.5,-2410.09 1931.5,-2446.09"/>
<text text-anchor="middle" x="1821" y="-2424.39" font-family="Times,serif" font-size="14.00">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge89" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1612.86,-2303.08C1627.92,-2306.69 1643.12,-2311.28 1657,-2317.09 1708.59,-2338.72 1760.73,-2377.96 1791.7,-2403.52"/>
<polygon fill="black" stroke="black" points="1789.56,-2406.29 1799.48,-2410.02 1794.05,-2400.92 1789.56,-2406.29"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node63" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node63"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="1928,-2602.09 1714,-2602.09 1714,-2566.09 1928,-2566.09 1928,-2602.09"/>
<text text-anchor="middle" x="1821" y="-2580.39" font-family="Times,serif" font-size="14.00">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge90" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1612.64,-2293.84C1629.01,-2298.28 1644.74,-2305.54 1657,-2317.09 1703.13,-2360.57 1661.7,-2399.97 1693,-2455.09 1717.11,-2497.56 1758.74,-2536 1787.74,-2559.66"/>
<polygon fill="black" stroke="black" points="1785.57,-2562.4 1795.56,-2565.93 1789.95,-2556.94 1785.57,-2562.4"/>
</g>
<!-- caption_io._get_langs -->
<g id="node69" class="node">
<title>caption_io._get_langs</title>
<g id="a_node69"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="1905,-1391.09 1737,-1391.09 1737,-1355.09 1905,-1355.09 1905,-1391.09"/>
<text text-anchor="middle" x="1821" y="-1369.39" font-family="Times,serif" font-size="14.00">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge88" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M1587.17,-2272.05C1613.42,-2261.37 1641.1,-2244.91 1657,-2220.09 1706.19,-2143.3 1634.07,-1469.69 1693,-1400.09 1701.97,-1389.5 1713.96,-1382.44 1727.02,-1377.83"/>
<polygon fill="black" stroke="black" points="1728.13,-1381.15 1736.68,-1374.89 1726.09,-1374.45 1728.13,-1381.15"/>
</g>
<!-- build_site.main -->
<g id="node49" class="node">
<title>build_site.main</title>
<polygon fill="none" stroke="black" points="429,-530.09 304,-530.09 304,-494.09 429,-494.09 429,-530.09"/>
<text text-anchor="middle" x="366.5" y="-508.39" font-family="Times,serif" font-size="14.00">build_site.main</text>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge44" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M370.56,-493.96C380.48,-440.79 416.67,-283.78 510,-200.09 606.9,-113.21 659.81,-130.56 788,-108.09 1032.74,-65.19 1161.86,65.62 1347,-100.09 1400.98,-148.41 1334.01,-370.73 1383,-424.09 1392.15,-434.05 1403.83,-440.94 1416.49,-445.63"/>
<polygon fill="black" stroke="black" points="1415.75,-449.07 1426.34,-448.8 1417.89,-442.4 1415.75,-449.07"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge45" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M429.04,-528.27C465.65,-537.89 512.43,-550.19 551.65,-560.5"/>
<polygon fill="black" stroke="black" points="550.89,-563.92 561.45,-563.07 552.67,-557.15 550.89,-563.92"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge46" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M370.52,-530.25C383.48,-608.41 435.54,-924.1 474,-1184.09 482.6,-1242.23 472.8,-1400.59 510,-1446.09 517.29,-1455.01 526.6,-1462.04 536.8,-1467.58"/>
<polygon fill="black" stroke="black" points="535.45,-1470.82 545.97,-1472.07 538.53,-1464.53 535.45,-1470.82"/>
</g>
<!-- build_site.main&#45;&gt;build_site._sync_embeddings -->
<g id="edge47" class="edge">
<title>build_site.main&#45;&gt;build_site._sync_embeddings</title>
<path fill="none" stroke="black" d="M429.18,-509.5C517.33,-505.79 681.11,-498.91 793.85,-494.17"/>
<polygon fill="black" stroke="black" points="794.07,-497.66 803.91,-493.74 793.77,-490.67 794.07,-497.66"/>
</g>
<!-- build_site.main&#45;&gt;build_site._apply_price_model -->
<g id="edge48" class="edge">
<title>build_site.main&#45;&gt;build_site._apply_price_model</title>
<path fill="none" stroke="black" d="M384.32,-493.83C429.6,-444.67 554.18,-309.41 606.44,-252.67"/>
<polygon fill="black" stroke="black" points="609.12,-254.93 613.32,-245.2 603.97,-250.19 609.12,-254.93"/>
</g>
<!-- build_site.main&#45;&gt;build_site._similar_by_user -->
<g id="edge49" class="edge">
<title>build_site.main&#45;&gt;build_site._similar_by_user</title>
<path fill="none" stroke="black" d="M429.15,-519.79C575.24,-536.88 938.11,-572.23 1043,-516.09 1068.43,-502.48 1057.29,-481.08 1079,-462.09 1099.66,-444.02 1126.24,-429.71 1150.2,-419.17"/>
<polygon fill="black" stroke="black" points="1151.75,-422.31 1159.58,-415.17 1149.01,-415.87 1151.75,-422.31"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge50" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M429.04,-495.92C465.65,-486.29 512.43,-474 551.65,-463.69"/>
<polygon fill="black" stroke="black" points="552.67,-467.04 561.45,-461.11 550.89,-460.27 552.67,-467.04"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge51" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M388.63,-530.32C415.16,-552.22 462.92,-588.45 510,-608.09 609.72,-649.7 732.39,-670.39 816.33,-680.38"/>
<polygon fill="black" stroke="black" points="816.03,-683.87 826.37,-681.54 816.84,-676.92 816.03,-683.87"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node50" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node50"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="1315,-1183.09 1111,-1183.09 1111,-1147.09 1315,-1147.09 1315,-1183.09"/>
<text text-anchor="middle" x="1213" y="-1161.39" font-family="Times,serif" font-size="14.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge52" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M376.51,-530.22C414.9,-605.6 572.77,-897.27 788,-1046.09 881.65,-1110.85 1009.82,-1140.53 1100.66,-1154.04"/>
<polygon fill="black" stroke="black" points="1100.32,-1157.52 1110.72,-1155.49 1101.32,-1150.6 1100.32,-1157.52"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node51" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node51"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="1022.5,-1383.09 808.5,-1383.09 808.5,-1347.09 1022.5,-1347.09 1022.5,-1383.09"/>
<text text-anchor="middle" x="915.5" y="-1361.39" font-family="Times,serif" font-size="14.00">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge53" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M370.3,-530.17C388.9,-649.85 494.24,-1323.89 510,-1338.09 550.99,-1375.02 693.49,-1376.84 797.78,-1372.71"/>
<polygon fill="black" stroke="black" points="798.23,-1376.2 808.07,-1372.28 797.93,-1369.2 798.23,-1376.2"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node52" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node52"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="1325,-361.09 1101,-361.09 1101,-325.09 1325,-325.09 1325,-361.09"/>
<text text-anchor="middle" x="1213" y="-339.39" font-family="Times,serif" font-size="14.00">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge54" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M387.42,-493.9C413.45,-471.31 461.47,-433.64 510,-416.09 733.92,-335.14 806.25,-387.39 1043,-362.09 1058.44,-360.44 1074.66,-358.67 1090.7,-356.89"/>
<polygon fill="black" stroke="black" points="1091.11,-360.37 1100.66,-355.79 1090.33,-353.41 1091.11,-360.37"/>
</g>
<!-- config_utils.load_config -->
<g id="node53" class="node">
<title>config_utils.load_config</title>
<g id="a_node53"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="2188,-242.09 2006,-242.09 2006,-206.09 2188,-206.09 2188,-242.09"/>
<text text-anchor="middle" x="2097" y="-220.39" font-family="Times,serif" font-size="14.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge55" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M368.25,-493.67C371.87,-430.24 392.63,-218.74 510,-110.09 646.64,16.39 728.31,-1.09 914.5,-1.09 914.5,-1.09 914.5,-1.09 1521,-1.09 1739.68,-1.09 1975.41,-143.03 2061.8,-200.43"/>
<polygon fill="black" stroke="black" points="2059.91,-203.37 2070.17,-206.03 2063.81,-197.56 2059.91,-203.37"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node57" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node57"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="1596.5,-2007.09 1443.5,-2007.09 1443.5,-1971.09 1596.5,-1971.09 1596.5,-2007.09"/>
<text text-anchor="middle" x="1520" y="-1985.39" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge104" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1283.71,-1183.21C1307.75,-1193.06 1332.3,-1207.92 1347,-1230.09 1427.68,-1351.77 1314.46,-1757.19 1383,-1886.09 1402.05,-1921.91 1439.65,-1948.89 1470.49,-1966.23"/>
<polygon fill="black" stroke="black" points="1468.95,-1969.38 1479.41,-1971.08 1472.3,-1963.23 1468.95,-1969.38"/>
</g>
<!-- serde_utils.write_json -->
<g id="node71" class="node">
<title>serde_utils.write_json</title>
<g id="a_node71"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="1606.5,-1195.09 1433.5,-1195.09 1433.5,-1159.09 1606.5,-1159.09 1606.5,-1195.09"/>
<text text-anchor="middle" x="1520" y="-1173.39" font-family="Times,serif" font-size="14.00">serde_utils.write_json</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;serde_utils.write_json -->
<g id="edge105" class="edge">
<title>similar_utils._save_similar&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1315.14,-1169.07C1350.02,-1170.44 1388.95,-1171.98 1423.38,-1173.33"/>
<polygon fill="black" stroke="black" points="1423.3,-1176.83 1433.43,-1173.73 1423.58,-1169.84 1423.3,-1176.83"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node75" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node75"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="1622,-1141.09 1418,-1141.09 1418,-1105.09 1622,-1105.09 1622,-1141.09"/>
<text text-anchor="middle" x="1520" y="-1119.39" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge103" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M1315.14,-1151.17C1344.82,-1147.08 1377.43,-1142.59 1407.71,-1138.42"/>
<polygon fill="black" stroke="black" points="1408.45,-1141.85 1417.88,-1137.02 1407.49,-1134.91 1408.45,-1141.85"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node76" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node76"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="1641.5,-361.09 1398.5,-361.09 1398.5,-325.09 1641.5,-325.09 1641.5,-361.09"/>
<text text-anchor="middle" x="1520" y="-339.39" font-family="Times,serif" font-size="14.00">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge106" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M1325.41,-343.09C1345.81,-343.09 1367.27,-343.09 1388.17,-343.09"/>
<polygon fill="black" stroke="black" points="1388.39,-346.59 1398.39,-343.09 1388.39,-339.59 1388.39,-346.59"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node54" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node54"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="1302.5,-2925.09 1123.5,-2925.09 1123.5,-2889.09 1302.5,-2889.09 1302.5,-2925.09"/>
<text text-anchor="middle" x="1213" y="-2903.39" font-family="Times,serif" font-size="14.00">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node55" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node55"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="1657,-2925.09 1383,-2925.09 1383,-2889.09 1657,-2889.09 1657,-2925.09"/>
<text text-anchor="middle" x="1520" y="-2903.39" font-family="Times,serif" font-size="14.00">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node56" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node56"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="1328,-1957.09 1098,-1957.09 1098,-1921.09 1328,-1921.09 1328,-1957.09"/>
<text text-anchor="middle" x="1213" y="-1935.39" font-family="Times,serif" font-size="14.00">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;serde_utils.load_json -->
<g id="edge57" class="edge">
<title>debug_dump.load_source_info&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1328.34,-1933.44C1418.67,-1927.06 1547.33,-1913.7 1657,-1886.09 1697.08,-1876 1740.55,-1858.58 1772.52,-1844.46"/>
<polygon fill="black" stroke="black" points="1774.35,-1847.48 1782.05,-1840.2 1771.49,-1841.09 1774.35,-1847.48"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge56" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1324.11,-1957.14C1360.14,-1963.05 1399.6,-1969.52 1433.53,-1975.08"/>
<polygon fill="black" stroke="black" points="1432.98,-1978.54 1443.41,-1976.7 1434.11,-1971.63 1432.98,-1978.54"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node104" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node104"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="1893.5,-1745.09 1748.5,-1745.09 1748.5,-1709.09 1893.5,-1709.09 1893.5,-1745.09"/>
<text text-anchor="middle" x="1821" y="-1723.39" font-family="Times,serif" font-size="14.00">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge154" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M1596.56,-1986.29C1618.63,-1981.85 1641.06,-1973.23 1657,-1957.09 1708.83,-1904.62 1648.43,-1853.86 1693,-1795.09 1708.41,-1774.78 1731.69,-1759.86 1754.12,-1749.26"/>
<polygon fill="black" stroke="black" points="1755.64,-1752.41 1763.33,-1745.12 1752.77,-1746.03 1755.64,-1752.41"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node58" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node58"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="1922,-2812.09 1720,-2812.09 1720,-2776.09 1922,-2776.09 1922,-2812.09"/>
<text text-anchor="middle" x="1821" y="-2790.39" font-family="Times,serif" font-size="14.00">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text -->
<g id="edge58" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1897.96,-2776.07C1932.7,-2767.83 1974.03,-2758.03 2009.92,-2749.51"/>
<polygon fill="black" stroke="black" points="2010.97,-2752.86 2019.89,-2747.15 2009.35,-2746.05 2010.97,-2752.86"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node59" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node59"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="1310.5,-2579.09 1115.5,-2579.09 1115.5,-2543.09 1310.5,-2543.09 1310.5,-2579.09"/>
<text text-anchor="middle" x="1213" y="-2557.39" font-family="Times,serif" font-size="14.00">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge59" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1310.53,-2556.36C1324.29,-2551.74 1337.11,-2544.68 1347,-2534.09 1429.94,-2445.3 1313.02,-2362.42 1383,-2263.09 1398.32,-2241.34 1422.49,-2225.89 1446.22,-2215.15"/>
<polygon fill="black" stroke="black" points="1447.82,-2218.27 1455.63,-2211.11 1445.06,-2211.84 1447.82,-2218.27"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.read_text -->
<g id="edge64" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1310.52,-2570.28C1323.57,-2574.41 1336.17,-2580.15 1347,-2588.09 1373.63,-2607.62 1355.48,-2634.84 1383,-2653.09 1482.57,-2719.13 1833.69,-2728.86 2003.15,-2729.6"/>
<polygon fill="black" stroke="black" points="2003.29,-2733.1 2013.3,-2729.64 2003.31,-2726.1 2003.29,-2733.1"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;serde_utils.load_json -->
<g id="edge65" class="edge">
<title>debug_dump.collect_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1310.64,-2550.88C1323.52,-2546.88 1336.05,-2541.45 1347,-2534.09 1370.94,-2518.01 1359.1,-2496.24 1383,-2480.09 1486.08,-2410.48 1574.01,-2515.74 1657,-2423.09 1713.15,-2360.4 1667.69,-2126.35 1693,-2046.09 1717.36,-1968.84 1770.87,-1888.72 1800.05,-1848.5"/>
<polygon fill="black" stroke="black" points="1802.97,-1850.44 1806.06,-1840.31 1797.32,-1846.3 1802.97,-1850.44"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge62" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M1310.57,-2555.97C1324.25,-2551.38 1337.02,-2544.44 1347,-2534.09 1414.88,-2463.73 1314.97,-2387.3 1383,-2317.09 1392.57,-2307.22 1404.64,-2300.4 1417.62,-2295.78"/>
<polygon fill="black" stroke="black" points="1418.71,-2299.1 1427.21,-2292.78 1416.62,-2292.42 1418.71,-2299.1"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge63" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1310.52,-2556.76C1324.37,-2552.12 1337.21,-2544.94 1347,-2534.09 1402.04,-2473.08 1352.8,-2242.51 1383,-2166.09 1407.26,-2104.7 1459.45,-2046.64 1491.66,-2014.66"/>
<polygon fill="black" stroke="black" points="1494.3,-2016.98 1499,-2007.48 1489.4,-2011.97 1494.3,-2016.98"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge60" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1310.68,-2547.07C1400.94,-2533.12 1539.05,-2509.56 1657,-2480.09 1691.32,-2471.52 1728.99,-2459.66 1759.47,-2449.44"/>
<polygon fill="black" stroke="black" points="1760.74,-2452.7 1769.09,-2446.18 1758.5,-2446.07 1760.74,-2452.7"/>
</g>
<!-- caption_io.has_caption -->
<g id="node61" class="node">
<title>caption_io.has_caption</title>
<g id="a_node61"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="1608.5,-2644.09 1431.5,-2644.09 1431.5,-2608.09 1608.5,-2608.09 1608.5,-2644.09"/>
<text text-anchor="middle" x="1520" y="-2622.39" font-family="Times,serif" font-size="14.00">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge61" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1303.83,-2579.11C1318.27,-2582.07 1333.06,-2585.14 1347,-2588.09 1373.53,-2593.72 1402.31,-2600 1428.61,-2605.82"/>
<polygon fill="black" stroke="black" points="1428.04,-2609.28 1438.56,-2608.02 1429.55,-2602.44 1428.04,-2609.28"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge86" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1608.66,-2613.21C1625.36,-2608.64 1642.22,-2602.46 1657,-2594.09 1676.97,-2582.79 1676.95,-2573.49 1693,-2557.09 1728.21,-2521.11 1769.08,-2479.65 1794.74,-2453.66"/>
<polygon fill="black" stroke="black" points="1797.34,-2456.01 1801.88,-2446.43 1792.36,-2451.09 1797.34,-2456.01"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge87" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1608.69,-2613.77C1638.39,-2609.6 1672.04,-2604.88 1703.61,-2600.44"/>
<polygon fill="black" stroke="black" points="1704.36,-2603.87 1713.78,-2599.01 1703.39,-2596.94 1704.36,-2603.87"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node62" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node62"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="1309.5,-2525.09 1116.5,-2525.09 1116.5,-2489.09 1309.5,-2489.09 1309.5,-2525.09"/>
<text text-anchor="middle" x="1213" y="-2503.39" font-family="Times,serif" font-size="14.00">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge66" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1248.76,-2488.97C1279.2,-2471.33 1322.32,-2441.69 1347,-2404.09 1382.49,-2350.02 1342.7,-2313.68 1383,-2263.09 1400.17,-2241.54 1425.76,-2225.97 1450.12,-2215.06"/>
<polygon fill="black" stroke="black" points="1451.56,-2218.25 1459.38,-2211.1 1448.81,-2211.81 1451.56,-2218.25"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;serde_utils.load_json -->
<g id="edge70" class="edge">
<title>debug_dump.delete_files&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1262.14,-2488.98C1295.79,-2476.57 1341.88,-2460.08 1383,-2447.09 1503.51,-2409.04 1575.08,-2467.32 1657,-2371.09 1704.1,-2315.76 1670.62,-2115.23 1693,-2046.09 1717.95,-1969.02 1771.21,-1888.83 1800.2,-1848.55"/>
<polygon fill="black" stroke="black" points="1803.12,-1850.49 1806.17,-1840.34 1797.46,-1846.37 1803.12,-1850.49"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge69" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1250.58,-2489.03C1281.57,-2471.7 1324.45,-2442.5 1347,-2404.09 1401.17,-2311.84 1341.08,-2264.52 1383,-2166.09 1409.01,-2105.03 1461.09,-2046.45 1492.71,-2014.36"/>
<polygon fill="black" stroke="black" points="1495.31,-2016.71 1499.9,-2007.16 1490.36,-2011.76 1495.31,-2016.71"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge67" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1309.69,-2494.62C1415.4,-2480.84 1585.77,-2458.63 1700.25,-2443.7"/>
<polygon fill="black" stroke="black" points="1701,-2447.14 1710.46,-2442.37 1700.1,-2440.19 1701,-2447.14"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge68" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1309.69,-2519.25C1416.45,-2532.82 1589.17,-2554.76 1703.66,-2569.31"/>
<polygon fill="black" stroke="black" points="1703.5,-2572.82 1713.86,-2570.61 1704.38,-2565.87 1703.5,-2572.82"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node64" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node64"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="1939,-1445.09 1703,-1445.09 1703,-1409.09 1939,-1409.09 1939,-1445.09"/>
<text text-anchor="middle" x="1821" y="-1423.39" font-family="Times,serif" font-size="14.00">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node65" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node65"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="2209,-965.09 1985,-965.09 1985,-929.09 2209,-929.09 2209,-965.09"/>
<text text-anchor="middle" x="2097" y="-943.39" font-family="Times,serif" font-size="14.00">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge71" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M1937.11,-1408.98C1941.33,-1406.36 1945.32,-1403.41 1949,-1400.09 2077.5,-1284.35 2094.15,-1055.34 2095.94,-975.41"/>
<polygon fill="black" stroke="black" points="2099.45,-975.21 2096.11,-965.15 2092.45,-975.09 2099.45,-975.21"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node66" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node66"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="1917.5,-2091.09 1724.5,-2091.09 1724.5,-2055.09 1917.5,-2055.09 1917.5,-2091.09"/>
<text text-anchor="middle" x="1821" y="-2069.39" font-family="Times,serif" font-size="14.00">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node67" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node67"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="1347,-2011.09 1079,-2011.09 1079,-1975.09 1347,-1975.09 1347,-2011.09"/>
<text text-anchor="middle" x="1213" y="-1989.39" font-family="Times,serif" font-size="14.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge72" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1337.21,-1975.07C1340.72,-1972.4 1344,-1969.42 1347,-1966.09 1402.6,-1904.4 1327.27,-1655.67 1383,-1594.09 1397.36,-1578.22 1418.16,-1570.12 1439.18,-1566.3"/>
<polygon fill="black" stroke="black" points="1439.79,-1569.75 1449.16,-1564.8 1438.75,-1562.83 1439.79,-1569.75"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge73" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1322.67,-2011.16C1331.32,-2014.97 1339.57,-2019.56 1347,-2025.09 1372.55,-2044.13 1362.05,-2063.08 1383,-2087.09 1411.63,-2119.9 1451.63,-2149.65 1480.84,-2169.22"/>
<polygon fill="black" stroke="black" points="1479.26,-2172.37 1489.53,-2174.96 1483.11,-2166.53 1479.26,-2172.37"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;serde_utils.load_json -->
<g id="edge77" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1328.78,-2011.1C1440.33,-2026.45 1600.85,-2042.25 1657,-2016.09 1731.48,-1981.39 1784.05,-1894.04 1807.03,-1849.35"/>
<polygon fill="black" stroke="black" points="1810.25,-1850.75 1811.61,-1840.24 1803.99,-1847.61 1810.25,-1850.75"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge76" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M1347.33,-1991.34C1376.47,-1990.96 1406.56,-1990.57 1433.25,-1990.22"/>
<polygon fill="black" stroke="black" points="1433.35,-1993.72 1443.3,-1990.09 1433.25,-1986.72 1433.35,-1993.72"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge74" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M1306.07,-1975.05C1319.82,-1972.17 1333.8,-1969.13 1347,-1966.09 1485.66,-1934.15 1565.26,-1994.86 1657,-1886.09 1719.11,-1812.46 1629.32,-1526.37 1693,-1454.09 1693.75,-1453.25 1694.51,-1452.42 1695.29,-1451.62"/>
<polygon fill="black" stroke="black" points="1697.62,-1454.24 1702.8,-1445 1692.99,-1448.99 1697.62,-1454.24"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge75" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M1307.32,-2011.11C1320.89,-2015 1334.49,-2019.62 1347,-2025.09 1364.62,-2032.79 1364.76,-2043.02 1383,-2049.09 1491.64,-2085.27 1623.8,-2087.17 1714.14,-2082.61"/>
<polygon fill="black" stroke="black" points="1714.6,-2086.09 1724.4,-2082.06 1714.23,-2079.1 1714.6,-2086.09"/>
</g>
<!-- debug_dump.main -->
<g id="node68" class="node">
<title>debug_dump.main</title>
<polygon fill="none" stroke="black" points="989.5,-2579.09 841.5,-2579.09 841.5,-2543.09 989.5,-2543.09 989.5,-2579.09"/>
<text text-anchor="middle" x="915.5" y="-2557.39" font-family="Times,serif" font-size="14.00">debug_dump.main</text>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge78" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M927.88,-2579.13C951.19,-2616.49 1005.34,-2705.4 1043,-2784.09 1061.78,-2823.33 1046.16,-2846.57 1079,-2875.09 1089,-2883.78 1100.96,-2890.2 1113.55,-2894.93"/>
<polygon fill="black" stroke="black" points="1112.68,-2898.33 1123.27,-2898.22 1114.93,-2891.7 1112.68,-2898.33"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge79" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M929.2,-2579.29C954.42,-2616.23 1011.15,-2703.35 1043,-2784.09 1068.16,-2847.87 1025.16,-2891.65 1079,-2934.09 1172.54,-3007.84 1228.25,-2943.36 1347,-2934.09 1367.94,-2932.46 1390.19,-2929.72 1411.49,-2926.6"/>
<polygon fill="black" stroke="black" points="1412.16,-2930.04 1421.53,-2925.09 1411.12,-2923.12 1412.16,-2930.04"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge80" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M932.62,-2543.09C960.71,-2510.49 1018.03,-2438.37 1043,-2366.09 1072.14,-2281.74 1019.47,-2032.59 1079,-1966.09 1082.13,-1962.59 1085.59,-1959.47 1089.29,-1956.7"/>
<polygon fill="black" stroke="black" points="1091.32,-1959.55 1097.77,-1951.15 1087.49,-1953.69 1091.32,-1959.55"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge81" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M926.68,-2579.25C961.25,-2640.86 1072.41,-2838.29 1079,-2842.09 1190.26,-2906.28 1533.01,-2875.61 1657,-2842.09 1674.88,-2837.26 1675.72,-2827.77 1693,-2821.09 1698.52,-2818.96 1704.25,-2816.98 1710.08,-2815.14"/>
<polygon fill="black" stroke="black" points="1711.39,-2818.4 1719.97,-2812.19 1709.39,-2811.7 1711.39,-2818.4"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge82" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M989.54,-2561.09C1024.37,-2561.09 1066.72,-2561.09 1105.08,-2561.09"/>
<polygon fill="black" stroke="black" points="1105.26,-2564.59 1115.26,-2561.09 1105.26,-2557.59 1105.26,-2564.59"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge83" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M989.54,-2547.74C1024.69,-2541.32 1067.48,-2533.5 1106.12,-2526.44"/>
<polygon fill="black" stroke="black" points="1107.16,-2529.81 1116.37,-2524.57 1105.9,-2522.92 1107.16,-2529.81"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge84" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M932.42,-2543.02C960.21,-2510.32 1017.07,-2438.03 1043,-2366.09 1089.73,-2236.44 999.34,-2170.56 1079,-2058.09 1092.65,-2038.82 1113.64,-2025.01 1134.94,-2015.22"/>
<polygon fill="black" stroke="black" points="1136.6,-2018.31 1144.4,-2011.13 1133.83,-2011.89 1136.6,-2018.31"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge85" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M1905.02,-1371.4C1921.85,-1367.08 1937.8,-1359.35 1949,-1346.09 2011.57,-1272.01 1962.93,-568.52 1985,-474.09 2005.03,-388.4 2054.23,-295.76 2079.87,-251.14"/>
<polygon fill="black" stroke="black" points="2082.97,-252.78 2084.96,-242.37 2076.91,-249.26 2082.97,-252.78"/>
</g>
<!-- caption_io.write_caption -->
<g id="node70" class="node">
<title>caption_io.write_caption</title>
<g id="a_node70"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="1308,-1329.09 1118,-1329.09 1118,-1293.09 1308,-1293.09 1308,-1329.09"/>
<text text-anchor="middle" x="1213" y="-1307.39" font-family="Times,serif" font-size="14.00">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.load_json -->
<g id="edge95" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1308.04,-1309.54C1430.68,-1308.48 1632.54,-1310.44 1657,-1334.09 1724.34,-1399.21 1641.48,-1675.86 1693,-1754.09 1706.48,-1774.56 1728.25,-1789.33 1749.99,-1799.75"/>
<polygon fill="black" stroke="black" points="1748.73,-1803.02 1759.28,-1803.96 1751.61,-1796.64 1748.73,-1803.02"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge94" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1308.32,-1321.05C1321.96,-1325.05 1335.32,-1330.55 1347,-1338.09 1370,-1352.95 1361.41,-1371.25 1383,-1388.09 1486.32,-1468.73 1580.22,-1390.88 1657,-1497.09 1696.32,-1551.49 1678.71,-2034.51 1693,-2100.09 1718.32,-2216.32 1778.65,-2345.59 1806.04,-2400.75"/>
<polygon fill="black" stroke="black" points="1803,-2402.49 1810.6,-2409.86 1809.26,-2399.36 1803,-2402.49"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge93" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M1308.48,-1299.09C1419.97,-1286.63 1597.72,-1272.6 1657,-1301.09 1680.08,-1312.19 1671.2,-1332.64 1693,-1346.09 1703.45,-1352.54 1715.19,-1357.46 1727.21,-1361.22"/>
<polygon fill="black" stroke="black" points="1726.32,-1364.6 1736.89,-1363.99 1728.24,-1357.87 1726.32,-1364.6"/>
</g>
<!-- caption_io.write_caption&#45;&gt;serde_utils.write_json -->
<g id="edge96" class="edge">
<title>caption_io.write_caption&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1308.06,-1303.68C1322.12,-1299.39 1335.68,-1293.14 1347,-1284.09 1377.46,-1259.76 1352.49,-1228.36 1383,-1204.09 1394.82,-1194.69 1409.02,-1188.27 1423.72,-1183.95"/>
<polygon fill="black" stroke="black" points="1424.65,-1187.32 1433.43,-1181.39 1422.87,-1180.55 1424.65,-1187.32"/>
</g>
<!-- notes_utils.collect_notes -->
<g id="node72" class="node">
<title>notes_utils.collect_notes</title>
<g id="a_node72"><a xlink:title="Return combined notes if ``notes/`` exists.">
<polygon fill="none" stroke="black" points="1615.5,-2979.09 1424.5,-2979.09 1424.5,-2943.09 1615.5,-2943.09 1615.5,-2979.09"/>
<text text-anchor="middle" x="1520" y="-2957.39" font-family="Times,serif" font-size="14.00">notes_utils.collect_notes</text>
</a>
</g>
</g>
<!-- notes_utils.collect_notes&#45;&gt;serde_utils.read_md -->
<g id="edge97" class="edge">
<title>notes_utils.collect_notes&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1615.6,-2946C1629.66,-2942.7 1643.84,-2938.76 1657,-2934.09 1702.62,-2917.92 1751.24,-2890.83 1783.39,-2871.37"/>
<polygon fill="black" stroke="black" points="1785.3,-2874.31 1792,-2866.1 1781.65,-2868.34 1785.3,-2874.31"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node73" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node73"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="1628.5,-1823.09 1411.5,-1823.09 1411.5,-1787.09 1628.5,-1787.09 1628.5,-1823.09"/>
<text text-anchor="middle" x="1520" y="-1801.39" font-family="Times,serif" font-size="14.00">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node74" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node74"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="1340,-1773.09 1086,-1773.09 1086,-1737.09 1340,-1737.09 1340,-1773.09"/>
<text text-anchor="middle" x="1213" y="-1751.39" font-family="Times,serif" font-size="14.00">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge98" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1335.64,-1736.98C1339.67,-1734.35 1343.48,-1731.4 1347,-1728.09 1391.94,-1685.86 1337.97,-1636.22 1383,-1594.09 1398.26,-1579.82 1418.8,-1572.12 1439.3,-1568.18"/>
<polygon fill="black" stroke="black" points="1440.03,-1571.6 1449.33,-1566.53 1438.89,-1564.7 1440.03,-1571.6"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge99" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M1251.68,-1773.22C1282.93,-1790.41 1325.58,-1819.38 1347,-1858.09 1425.29,-1999.56 1292.07,-2086.4 1383,-2220.09 1397.83,-2241.9 1421.63,-2257.32 1445.19,-2268.03"/>
<polygon fill="black" stroke="black" points="1443.98,-2271.32 1454.55,-2272.05 1446.74,-2264.89 1443.98,-2271.32"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge100" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M1324.11,-1773.14C1349.19,-1777.26 1375.94,-1781.64 1401.32,-1785.8"/>
<polygon fill="black" stroke="black" points="1400.91,-1789.28 1411.35,-1787.44 1402.05,-1782.37 1400.91,-1789.28"/>
</g>
<!-- caption._identify_size -->
<g id="node77" class="node">
<title>caption._identify_size</title>
<g id="a_node77"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="1906,-1283.09 1736,-1283.09 1736,-1247.09 1906,-1247.09 1906,-1283.09"/>
<text text-anchor="middle" x="1821" y="-1261.39" font-family="Times,serif" font-size="14.00">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node78" class="node">
<title>caption._prepare_image</title>
<g id="a_node78"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="1613.5,-1379.09 1426.5,-1379.09 1426.5,-1343.09 1613.5,-1343.09 1613.5,-1379.09"/>
<text text-anchor="middle" x="1520" y="-1357.39" font-family="Times,serif" font-size="14.00">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge107" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M1560.27,-1343.08C1594.69,-1327.85 1646.37,-1306.29 1693,-1292.09 1703.59,-1288.87 1714.79,-1285.89 1725.98,-1283.18"/>
<polygon fill="black" stroke="black" points="1726.86,-1286.56 1735.79,-1280.86 1725.26,-1279.75 1726.86,-1286.56"/>
</g>
<!-- caption._guess_chat -->
<g id="node79" class="node">
<title>caption._guess_chat</title>
<g id="a_node79"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="1900.5,-1553.09 1741.5,-1553.09 1741.5,-1517.09 1900.5,-1517.09 1900.5,-1553.09"/>
<text text-anchor="middle" x="1821" y="-1531.39" font-family="Times,serif" font-size="14.00">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node80" class="node">
<title>caption.caption_file</title>
<g id="a_node80"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="1290.5,-1437.09 1135.5,-1437.09 1135.5,-1401.09 1290.5,-1401.09 1290.5,-1437.09"/>
<text text-anchor="middle" x="1213" y="-1415.39" font-family="Times,serif" font-size="14.00">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.load_json -->
<g id="edge112" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.load_json</title>
<path fill="none" stroke="black" d="M1290.93,-1423.83C1404.28,-1432.49 1608.06,-1455.03 1657,-1507.09 1732.98,-1587.93 1629.27,-1663.29 1693,-1754.09 1707.33,-1774.51 1729.78,-1789.34 1751.84,-1799.84"/>
<polygon fill="black" stroke="black" points="1750.69,-1803.16 1761.24,-1804.08 1753.56,-1796.78 1750.69,-1803.16"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge108" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1290.81,-1421.59C1310.34,-1425.02 1330.45,-1431.22 1347,-1442.09 1371.42,-1458.13 1358.46,-1481.24 1383,-1497.09 1486.55,-1563.97 1573.91,-1449.03 1657,-1540.09 1699.03,-1586.15 1679.59,-2039.2 1693,-2100.09 1718.59,-2216.26 1778.77,-2345.56 1806.08,-2400.74"/>
<polygon fill="black" stroke="black" points="1803.04,-2402.47 1810.63,-2409.86 1809.3,-2399.35 1803.04,-2402.47"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge109" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1226.96,-1437.13C1254.99,-1477.32 1320.86,-1578.23 1347,-1674.09 1428.59,-1973.36 1300.03,-2072.2 1383,-2371.09 1407.97,-2461.06 1468.51,-2554.98 1499.7,-2599.56"/>
<polygon fill="black" stroke="black" points="1496.9,-2601.66 1505.53,-2607.8 1502.61,-2597.62 1496.9,-2601.66"/>
</g>
<!-- caption.caption_file&#45;&gt;serde_utils.write_json -->
<g id="edge113" class="edge">
<title>caption.caption_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1290.78,-1418.71C1311.46,-1414.9 1332.17,-1407.09 1347,-1392.09 1406.82,-1331.6 1323.05,-1264.45 1383,-1204.09 1394.06,-1192.95 1408.31,-1185.74 1423.41,-1181.17"/>
<polygon fill="black" stroke="black" points="1424.65,-1184.46 1433.43,-1178.54 1422.87,-1177.69 1424.65,-1184.46"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge110" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M1290.57,-1404.53C1328.64,-1397.29 1375.17,-1388.44 1416.29,-1380.62"/>
<polygon fill="black" stroke="black" points="1417.17,-1384.02 1426.34,-1378.71 1415.86,-1377.14 1417.17,-1384.02"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge111" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M1290.8,-1411.75C1401.43,-1402.73 1598.77,-1392.92 1657,-1431.09 1688.59,-1451.8 1663.42,-1484.59 1693,-1508.09 1704.26,-1517.04 1717.79,-1523.2 1731.76,-1527.41"/>
<polygon fill="black" stroke="black" points="1730.92,-1530.81 1741.48,-1530.03 1732.73,-1524.05 1730.92,-1530.81"/>
</g>
<!-- caption.main -->
<g id="node81" class="node">
<title>caption.main</title>
<polygon fill="none" stroke="black" points="970,-1437.09 861,-1437.09 861,-1401.09 970,-1401.09 970,-1437.09"/>
<text text-anchor="middle" x="915.5" y="-1415.39" font-family="Times,serif" font-size="14.00">caption.main</text>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge114" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M970.01,-1419.09C1013.19,-1419.09 1074.8,-1419.09 1125.04,-1419.09"/>
<polygon fill="black" stroke="black" points="1125.26,-1422.59 1135.26,-1419.09 1125.26,-1415.59 1125.26,-1422.59"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node105" class="node">
<title>testing_mode.apply_testing_mode</title>
<polygon fill="none" stroke="black" points="1342.5,-3179.09 1083.5,-3179.09 1083.5,-3143.09 1342.5,-3143.09 1342.5,-3179.09"/>
<text text-anchor="middle" x="1213" y="-3157.39" font-family="Times,serif" font-size="14.00">testing_mode.apply_testing_mode</text>
</g>
<!-- lot_io.embedding_path&#45;&gt;testing_mode.apply_testing_mode -->
<!-- clean_data._parse_date -->
<g id="node83" class="node">
<title>clean_data._parse_date</title>
<g id="a_node83"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="1611,-2774.09 1429,-2774.09 1429,-2738.09 1611,-2738.09 1611,-2774.09"/>
<text text-anchor="middle" x="1520" y="-2752.39" font-family="Times,serif" font-size="14.00">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;serde_utils.read_text -->
<g id="edge116" class="edge">
<title>clean_data._parse_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1611.16,-2751.86C1718.02,-2746.84 1895.16,-2738.52 2003.18,-2733.45"/>
<polygon fill="black" stroke="black" points="2003.58,-2736.94 2013.41,-2732.97 2003.25,-2729.94 2003.58,-2736.94"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node84" class="node">
<title>clean_data._clean_raw</title>
<polygon fill="none" stroke="black" points="1300.5,-2725.09 1125.5,-2725.09 1125.5,-2689.09 1300.5,-2689.09 1300.5,-2725.09"/>
<text text-anchor="middle" x="1213" y="-2703.39" font-family="Times,serif" font-size="14.00">clean_data._clean_raw</text>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge117" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1282.2,-2689.09C1306.51,-2679.2 1331.64,-2664.28 1347,-2642.09 1443.3,-2502.97 1288.15,-2403.21 1383,-2263.09 1397.78,-2241.25 1421.57,-2225.82 1445.14,-2215.12"/>
<polygon fill="black" stroke="black" points="1446.69,-2218.26 1454.5,-2211.1 1443.93,-2211.83 1446.69,-2218.26"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge118" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M1300.58,-2721C1337.36,-2726.91 1380.48,-2733.84 1418.64,-2739.97"/>
<polygon fill="black" stroke="black" points="1418.32,-2743.46 1428.74,-2741.59 1419.43,-2736.55 1418.32,-2743.46"/>
</g>
<!-- clean_data._clean_media -->
<g id="node85" class="node">
<title>clean_data._clean_media</title>
<polygon fill="none" stroke="black" points="1308.5,-2779.09 1117.5,-2779.09 1117.5,-2743.09 1308.5,-2743.09 1308.5,-2779.09"/>
<text text-anchor="middle" x="1213" y="-2757.39" font-family="Times,serif" font-size="14.00">clean_data._clean_media</text>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge119" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1308.61,-2746.29C1321.73,-2742.97 1334.86,-2738.95 1347,-2734.09 1400.04,-2712.88 1454.84,-2675.26 1487.92,-2650.49"/>
<polygon fill="black" stroke="black" points="1490.4,-2653.01 1496.26,-2644.18 1486.17,-2647.43 1490.4,-2653.01"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge120" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M1308.83,-2759.54C1343.69,-2758.97 1383.26,-2758.32 1418.59,-2757.74"/>
<polygon fill="black" stroke="black" points="1418.98,-2761.23 1428.92,-2757.57 1418.86,-2754.23 1418.98,-2761.23"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node86" class="node">
<title>clean_data._clean_lots</title>
<polygon fill="none" stroke="black" points="1300,-1719.09 1126,-1719.09 1126,-1683.09 1300,-1683.09 1300,-1719.09"/>
<text text-anchor="middle" x="1213" y="-1697.39" font-family="Times,serif" font-size="14.00">clean_data._clean_lots</text>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge121" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1300.05,-1702.72C1317.72,-1707.04 1334.67,-1714.79 1347,-1728.09 1390.84,-1775.4 1358.49,-1956.43 1383,-2016.09 1408.08,-2077.15 1460,-2135.32 1491.94,-2167.41"/>
<polygon fill="black" stroke="black" points="1489.64,-2170.07 1499.21,-2174.62 1494.57,-2165.09 1489.64,-2170.07"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge123" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1226.6,-1682.95C1253.91,-1642.56 1318.43,-1541.26 1347,-1446.09 1369.48,-1371.21 1337.97,-1160.01 1383,-1096.09 1398.43,-1074.18 1423.28,-1059.4 1447.54,-1049.55"/>
<polygon fill="black" stroke="black" points="1449.06,-1052.72 1457.15,-1045.88 1446.56,-1046.18 1449.06,-1052.72"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node87" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node87"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="1602,-1769.09 1438,-1769.09 1438,-1733.09 1602,-1733.09 1602,-1769.09"/>
<text text-anchor="middle" x="1520" y="-1747.39" font-family="Times,serif" font-size="14.00">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge122" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M1300.18,-1715.22C1339.96,-1721.74 1387.23,-1729.49 1427.64,-1736.11"/>
<polygon fill="black" stroke="black" points="1427.32,-1739.61 1437.75,-1737.77 1428.45,-1732.7 1427.32,-1739.61"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node88" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node88"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="1330.5,-1903.09 1095.5,-1903.09 1095.5,-1867.09 1330.5,-1867.09 1330.5,-1903.09"/>
<text text-anchor="middle" x="1213" y="-1881.39" font-family="Times,serif" font-size="14.00">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node89" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node89"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="1641.5,-1877.09 1398.5,-1877.09 1398.5,-1841.09 1641.5,-1841.09 1641.5,-1877.09"/>
<text text-anchor="middle" x="1520" y="-1855.39" font-family="Times,serif" font-size="14.00">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node90" class="node">
<title>clean_data.main</title>
<polygon fill="none" stroke="black" points="981.5,-1903.09 849.5,-1903.09 849.5,-1867.09 981.5,-1867.09 981.5,-1903.09"/>
<text text-anchor="middle" x="915.5" y="-1881.39" font-family="Times,serif" font-size="14.00">clean_data.main</text>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge124" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M924.43,-1903.28C947.29,-1956.59 1013.55,-2117.55 1043,-2258.09 1062.07,-2349.13 1018.34,-2604.58 1079,-2675.09 1088.69,-2686.36 1101.59,-2694.03 1115.54,-2699.19"/>
<polygon fill="black" stroke="black" points="1114.76,-2702.61 1125.35,-2702.37 1116.92,-2695.95 1114.76,-2702.61"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge125" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M924.51,-1903.27C947.56,-1956.53 1014.3,-2117.39 1043,-2258.09 1053.6,-2310.06 1043.91,-2694.32 1079,-2734.09 1086.92,-2743.06 1096.93,-2749.54 1107.89,-2754.15"/>
<polygon fill="black" stroke="black" points="1106.7,-2757.45 1117.29,-2757.61 1109.11,-2750.88 1106.7,-2757.45"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge126" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M981.62,-1867.22C1003.53,-1858.47 1026.56,-1845.86 1043,-1828.09 1075.08,-1793.42 1043.26,-1758.98 1079,-1728.09 1089.61,-1718.92 1102.49,-1712.55 1115.99,-1708.18"/>
<polygon fill="black" stroke="black" points="1117.26,-1711.46 1125.92,-1705.34 1115.34,-1704.73 1117.26,-1711.46"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge127" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M981.71,-1885.09C1012.24,-1885.09 1049.69,-1885.09 1085.45,-1885.09"/>
<polygon fill="black" stroke="black" points="1085.48,-1888.59 1095.48,-1885.09 1085.48,-1881.59 1085.48,-1888.59"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge128" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M981.82,-1871.72C1011.36,-1866.32 1046.79,-1860.75 1079,-1858.09 1182.73,-1849.53 1300.68,-1850.37 1388.33,-1853.02"/>
<polygon fill="black" stroke="black" points="1388.22,-1856.52 1398.33,-1853.34 1388.44,-1849.52 1388.22,-1856.52"/>
</g>
<!-- chop.process_message -->
<g id="node91" class="node">
<title>chop.process_message</title>
<polygon fill="none" stroke="black" points="1005,-1819.09 826,-1819.09 826,-1783.09 1005,-1783.09 1005,-1819.09"/>
<text text-anchor="middle" x="915.5" y="-1797.39" font-family="Times,serif" font-size="14.00">chop.process_message</text>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge129" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M928.27,-1783.01C952.07,-1748.1 1009.61,-1671.72 1079,-1636.09 1194.37,-1576.87 1347.42,-1565.63 1439.26,-1564.92"/>
<polygon fill="black" stroke="black" points="1439.34,-1568.42 1449.33,-1564.88 1439.32,-1561.42 1439.34,-1568.42"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge133" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M936.9,-1782.83C966.54,-1754.84 1020.42,-1698.14 1043,-1637.09 1069.98,-1564.15 1026.52,-995.49 1079,-938.09 1160.18,-849.31 1246.24,-965.83 1347,-900.09 1372.41,-883.51 1358.06,-859.36 1383,-842.09 1385.12,-840.62 1387.3,-839.23 1389.54,-837.91"/>
<polygon fill="black" stroke="black" points="1391.23,-840.97 1398.39,-833.16 1387.93,-834.8 1391.23,-840.97"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge131" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M990.84,-1819.16C1010.91,-1827.68 1030.5,-1840.08 1043,-1858.09 1112.32,-1957.99 990.23,-2320.99 1079,-2404.09 1122.48,-2444.8 1297.49,-2437.19 1347,-2404.09 1381.79,-2380.84 1350.65,-2343.64 1383,-2317.09 1393.08,-2308.82 1404.99,-2302.84 1417.5,-2298.55"/>
<polygon fill="black" stroke="black" points="1418.62,-2301.86 1427.16,-2295.59 1416.57,-2295.17 1418.62,-2301.86"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge130" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M991.39,-1819.15C1011.35,-1827.65 1030.75,-1840.06 1043,-1858.09 1092,-1930.23 1015.94,-2581.86 1079,-2642.09 1126.22,-2687.19 1306.38,-2664.97 1421.01,-2645.2"/>
<polygon fill="black" stroke="black" points="1421.95,-2648.58 1431.2,-2643.42 1420.75,-2641.69 1421.95,-2648.58"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge132" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M1005.08,-1801.68C1109.96,-1802.38 1285.05,-1803.54 1401.26,-1804.31"/>
<polygon fill="black" stroke="black" points="1401.25,-1807.81 1411.27,-1804.38 1401.29,-1800.81 1401.25,-1807.81"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge135" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M932.18,-1782.66C958.78,-1753 1016.03,-1695.78 1079,-1674.09 1191.62,-1635.3 1239.64,-1622.49 1347,-1674.09 1370.08,-1685.19 1361.35,-1705.41 1383,-1719.09 1396.58,-1727.68 1412.25,-1733.96 1428,-1738.56"/>
<polygon fill="black" stroke="black" points="1427.24,-1741.98 1437.8,-1741.21 1429.06,-1735.22 1427.24,-1741.98"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node92" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node92"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="1276.5,-2157.09 1149.5,-2157.09 1149.5,-2121.09 1276.5,-2121.09 1276.5,-2157.09"/>
<text text-anchor="middle" x="1213" y="-2135.39" font-family="Times,serif" font-size="14.00">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge134" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M988.68,-1819.2C1009.17,-1827.76 1029.55,-1840.18 1043,-1858.09 1111.47,-1949.26 1000.81,-2029.11 1079,-2112.09 1094.48,-2128.52 1117.01,-2136.44 1139.14,-2139.91"/>
<polygon fill="black" stroke="black" points="1138.89,-2143.4 1149.25,-2141.2 1139.78,-2136.46 1138.89,-2143.4"/>
</g>
<!-- embed.embed_file -->
<g id="node93" class="node">
<title>embed.embed_file</title>
<g id="a_node93"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="1286,-1275.09 1140,-1275.09 1140,-1239.09 1286,-1239.09 1286,-1275.09"/>
<text text-anchor="middle" x="1213" y="-1253.39" font-family="Times,serif" font-size="14.00">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge136" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M936.51,-1782.68C965.64,-1754.5 1018.9,-1697.55 1043,-1637.09 1072.2,-1563.85 1026.06,-1342.53 1079,-1284.09 1092.13,-1269.59 1110.74,-1261.66 1129.88,-1257.56"/>
<polygon fill="black" stroke="black" points="1130.7,-1260.97 1139.92,-1255.75 1129.46,-1254.08 1130.7,-1260.97"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node94" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node94"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="1627.5,-2362.09 1412.5,-2362.09 1412.5,-2326.09 1627.5,-2326.09 1627.5,-2362.09"/>
<text text-anchor="middle" x="1520" y="-2340.39" font-family="Times,serif" font-size="14.00">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge137" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M990.87,-1819.14C1010.94,-1827.65 1030.53,-1840.06 1043,-1858.09 1115.58,-1963.02 986,-2343.75 1079,-2431.09 1122.41,-2471.86 1294.61,-2459.42 1347,-2431.09 1372.7,-2417.2 1359.07,-2392.86 1383,-2376.09 1389.15,-2371.79 1395.79,-2368.05 1402.73,-2364.82"/>
<polygon fill="black" stroke="black" points="1404.53,-2367.86 1412.35,-2360.71 1401.78,-2361.42 1404.53,-2367.86"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge158" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1273.86,-1239.03C1299.27,-1228.77 1327.47,-1213.59 1347,-1192.09 1377.64,-1158.37 1352.21,-1129.69 1383,-1096.09 1400.48,-1077.02 1424.75,-1062.98 1447.95,-1052.94"/>
<polygon fill="black" stroke="black" points="1449.55,-1056.06 1457.46,-1049.01 1446.88,-1049.59 1449.55,-1056.06"/>
</g>
<!-- embed.embed_file&#45;&gt;serde_utils.write_json -->
<g id="edge160" class="edge">
<title>embed.embed_file&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1286.29,-1243.74C1306.33,-1238.96 1327.83,-1232.8 1347,-1225.09 1364.19,-1218.19 1365.68,-1210.65 1383,-1204.09 1395.77,-1199.26 1409.56,-1195.24 1423.29,-1191.91"/>
<polygon fill="black" stroke="black" points="1424.3,-1195.27 1433.26,-1189.61 1422.73,-1188.45 1424.3,-1195.27"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node103" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node103"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="1591.5,-1249.09 1448.5,-1249.09 1448.5,-1213.09 1591.5,-1213.09 1591.5,-1249.09"/>
<text text-anchor="middle" x="1520" y="-1227.39" font-family="Times,serif" font-size="14.00">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge159" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M1286.28,-1250.93C1331.9,-1247.04 1390.92,-1242.01 1438.1,-1237.99"/>
<polygon fill="black" stroke="black" points="1438.62,-1241.46 1448.29,-1237.12 1438.03,-1234.48 1438.62,-1241.46"/>
</g>
<!-- chop.main -->
<g id="node95" class="node">
<title>chop.main</title>
<g id="a_node95"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="676,-1819.09 586,-1819.09 586,-1783.09 676,-1783.09 676,-1819.09"/>
<text text-anchor="middle" x="631" y="-1797.39" font-family="Times,serif" font-size="14.00">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge138" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M676.14,-1801.09C713.45,-1801.09 768.27,-1801.09 815.93,-1801.09"/>
<polygon fill="black" stroke="black" points="815.99,-1804.59 825.99,-1801.09 815.99,-1797.59 815.99,-1804.59"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node96" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node96"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="2207.5,-519.09 1986.5,-519.09 1986.5,-483.09 2207.5,-483.09 2207.5,-519.09"/>
<text text-anchor="middle" x="2097" y="-497.39" font-family="Times,serif" font-size="14.00">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge140" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M1928.76,-519.17C1936.08,-522.99 1942.95,-527.58 1949,-533.09 2065.68,-639.25 2089.78,-844.11 2094.73,-918.89"/>
<polygon fill="black" stroke="black" points="2091.24,-919.18 2095.33,-928.95 2098.23,-918.76 2091.24,-919.18"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge139" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M1949.37,-501.09C1958.21,-501.09 1967.11,-501.09 1975.91,-501.09"/>
<polygon fill="black" stroke="black" points="1976.18,-504.59 1986.18,-501.09 1976.18,-497.59 1976.18,-504.59"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node99" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node99"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="1323,-1037.09 1103,-1037.09 1103,-1001.09 1323,-1001.09 1323,-1037.09"/>
<text text-anchor="middle" x="1213" y="-1015.39" font-family="Times,serif" font-size="14.00">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge143" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1281.59,-1037.14C1305.97,-1047.05 1331.31,-1061.98 1347,-1084.09 1425.72,-1195.06 1332.05,-1261.94 1383,-1388.09 1408.03,-1450.07 1460.44,-1509.24 1492.39,-1541.62"/>
<polygon fill="black" stroke="black" points="1490.11,-1544.28 1499.66,-1548.87 1495.06,-1539.33 1490.11,-1544.28"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge144" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1284.25,-1037.23C1308.2,-1047.06 1332.55,-1061.91 1347,-1084.09 1403.57,-1170.92 1347.77,-1918.63 1383,-2016.09 1405.44,-2078.17 1458.23,-2136.01 1491.05,-2167.76"/>
<polygon fill="black" stroke="black" points="1488.87,-2170.52 1498.53,-2174.88 1493.7,-2165.45 1488.87,-2170.52"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge145" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M1323.15,-1008.15C1331.91,-1004.05 1340.05,-998.8 1347,-992.09 1396.33,-944.48 1333.57,-889.6 1383,-842.09 1383.98,-841.15 1384.98,-840.24 1386,-839.36"/>
<polygon fill="black" stroke="black" points="1388.37,-841.96 1394.21,-833.12 1384.13,-836.38 1388.37,-841.96"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge146" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M1323.25,-1004.05C1349.4,-1000.45 1377.39,-996.59 1403.8,-992.96"/>
<polygon fill="black" stroke="black" points="1404.4,-996.41 1413.83,-991.57 1403.45,-989.47 1404.4,-996.41"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge147" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1323.25,-1023.39C1364.5,-1025.01 1410.35,-1026.82 1447.3,-1028.27"/>
<polygon fill="black" stroke="black" points="1447.34,-1031.78 1457.47,-1028.67 1447.62,-1024.78 1447.34,-1031.78"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node101" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node101"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="1603,-682.09 1437,-682.09 1437,-646.09 1603,-646.09 1603,-682.09"/>
<text text-anchor="middle" x="1520" y="-660.39" font-family="Times,serif" font-size="14.00">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node102" class="node">
<title>lot_io.write_lots</title>
<g id="a_node102"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="1278,-691.09 1148,-691.09 1148,-655.09 1278,-655.09 1278,-691.09"/>
<text text-anchor="middle" x="1213" y="-669.39" font-family="Times,serif" font-size="14.00">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge151" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M1278.12,-660.97C1300.03,-656.59 1324.65,-651.41 1347,-646.09 1365.94,-641.59 1407.78,-630.17 1445.45,-619.71"/>
<polygon fill="black" stroke="black" points="1446.73,-622.99 1455.43,-616.94 1444.86,-616.24 1446.73,-622.99"/>
</g>
<!-- lot_io.write_lots&#45;&gt;serde_utils.write_json -->
<g id="edge153" class="edge">
<title>lot_io.write_lots&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M1278,-670.53C1303.08,-673.05 1329.89,-680.78 1347,-700.09 1413.54,-775.17 1316.3,-1075.16 1383,-1150.09 1393.74,-1162.15 1408.18,-1169.75 1423.66,-1174.39"/>
<polygon fill="black" stroke="black" points="1422.85,-1177.79 1433.4,-1176.91 1424.6,-1171.02 1422.85,-1177.79"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge150" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M1278.35,-679.92C1392.49,-692.22 1621.73,-717.87 1657,-729.09 1703.8,-743.98 1752.92,-772.18 1784.85,-792.44"/>
<polygon fill="black" stroke="black" points="1783.08,-795.46 1793.39,-797.93 1786.87,-789.58 1783.08,-795.46"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge152" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M1278.31,-671.19C1321.39,-669.92 1378.77,-668.23 1426.69,-666.82"/>
<polygon fill="black" stroke="black" points="1426.88,-670.31 1436.77,-666.52 1426.67,-663.32 1426.88,-670.31"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node112" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node112"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="1613,-3179.09 1427,-3179.09 1427,-3143.09 1613,-3143.09 1613,-3179.09"/>
<text text-anchor="middle" x="1520" y="-3157.39" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;tg_client._mark_activity -->
<!-- lot_io.get_lot -->
<g id="node106" class="node">
<title>lot_io.get_lot</title>
<g id="a_node106"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="1267,-1129.09 1159,-1129.09 1159,-1093.09 1267,-1093.09 1267,-1129.09"/>
<text text-anchor="middle" x="1213" y="-1107.39" font-family="Times,serif" font-size="14.00">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge156" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M1267.06,-1100.65C1291.67,-1095.22 1321.14,-1087.87 1347,-1079.09 1363.58,-1073.47 1366.41,-1068.68 1383,-1063.09 1403.64,-1056.15 1426.53,-1050.14 1447.55,-1045.26"/>
<polygon fill="black" stroke="black" points="1448.41,-1048.66 1457.38,-1043.03 1446.86,-1041.83 1448.41,-1048.66"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge157" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M1267.28,-1100.41C1372.55,-1080.69 1601.8,-1044.99 1657,-1096.09 1733.22,-1166.65 1655.78,-1465.13 1693,-1562.09 1714.62,-1618.4 1762.01,-1671.41 1792.39,-1701.49"/>
<polygon fill="black" stroke="black" points="1790.12,-1704.16 1799.72,-1708.63 1795,-1699.15 1790.12,-1704.16"/>
</g>
<!-- embed.main -->
<g id="node107" class="node">
<title>embed.main</title>
<g id="a_node107"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="967.5,-1329.09 863.5,-1329.09 863.5,-1293.09 967.5,-1293.09 967.5,-1329.09"/>
<text text-anchor="middle" x="915.5" y="-1307.39" font-family="Times,serif" font-size="14.00">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge161" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M967.63,-1301.75C1012.33,-1293.58 1078.03,-1281.58 1130.05,-1272.07"/>
<polygon fill="black" stroke="black" points="1130.72,-1275.5 1139.93,-1270.26 1129.46,-1268.62 1130.72,-1275.5"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node109" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node109"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="1317.5,-3025.09 1108.5,-3025.09 1108.5,-2989.09 1317.5,-2989.09 1317.5,-3025.09"/>
<text text-anchor="middle" x="1213" y="-3003.39" font-family="Times,serif" font-size="14.00">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- serde_utils.parse_md -->
<g id="node110" class="node">
<title>serde_utils.parse_md</title>
<g id="a_node110"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="1604,-3033.09 1436,-3033.09 1436,-2997.09 1604,-2997.09 1604,-3033.09"/>
<text text-anchor="middle" x="1520" y="-3011.39" font-family="Times,serif" font-size="14.00">serde_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;serde_utils.parse_md -->
<g id="edge163" class="edge">
<title>image_io.read_image_meta&#45;&gt;serde_utils.parse_md</title>
<path fill="none" stroke="black" d="M1317.68,-3009.81C1352.59,-3010.73 1391.3,-3011.74 1425.38,-3012.64"/>
<polygon fill="black" stroke="black" points="1425.71,-3016.15 1435.8,-3012.91 1425.89,-3009.15 1425.71,-3016.15"/>
</g>
<!-- serde_utils.parse_md&#45;&gt;serde_utils.read_md -->
<g id="edge177" class="edge">
<title>serde_utils.parse_md&#45;&gt;serde_utils.read_md</title>
<path fill="none" stroke="black" d="M1604.12,-3005.61C1622.13,-3001.65 1640.66,-2996.04 1657,-2988.09 1714.83,-2959.96 1768.69,-2906.23 1797.7,-2874.14"/>
<polygon fill="black" stroke="black" points="1800.49,-2876.27 1804.53,-2866.47 1795.26,-2871.61 1800.49,-2876.27"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node111" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node111"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="474,-2929.09 259,-2929.09 259,-2893.09 474,-2893.09 474,-2929.09"/>
<text text-anchor="middle" x="366.5" y="-2907.39" font-family="Times,serif" font-size="14.00">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;serde_utils.write_md -->
<g id="edge164" class="edge">
<title>image_io.write_image_meta&#45;&gt;serde_utils.write_md</title>
<path fill="none" stroke="black" d="M474.27,-2911.09C495.28,-2911.09 517.15,-2911.09 537.64,-2911.09"/>
<polygon fill="black" stroke="black" points="537.89,-2914.59 547.89,-2911.09 537.89,-2907.59 537.89,-2914.59"/>
</g>
<!-- tg_client._progress_logger -->
<g id="node117" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node117"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="1923.5,-3179.09 1718.5,-3179.09 1718.5,-3143.09 1923.5,-3143.09 1923.5,-3179.09"/>
<text text-anchor="middle" x="1821" y="-3157.39" font-family="Times,serif" font-size="14.00">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._mark_activity&#45;&gt;tg_client._progress_logger -->
<!-- scan_ontology._is_misparsed -->
<g id="node113" class="node">
<title>scan_ontology._is_misparsed</title>
<g id="a_node113"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="1322.5,-637.09 1103.5,-637.09 1103.5,-601.09 1322.5,-601.09 1322.5,-637.09"/>
<text text-anchor="middle" x="1213" y="-615.39" font-family="Times,serif" font-size="14.00">scan_ontology._is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge166" class="edge">
<title>scan_ontology._is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M1322.82,-611.96C1363.32,-609.3 1408.31,-606.35 1444.98,-603.95"/>
<polygon fill="black" stroke="black" points="1445.34,-607.43 1455.09,-603.28 1444.88,-600.45 1445.34,-607.43"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node114" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node114"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="1032.5,-1275.09 798.5,-1275.09 798.5,-1239.09 1032.5,-1239.09 1032.5,-1275.09"/>
<text text-anchor="middle" x="915.5" y="-1253.39" font-family="Times,serif" font-size="14.00">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge167" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1032.12,-1275.18C1036,-1277.81 1039.65,-1280.77 1043,-1284.09 1095.37,-1336.03 1025.32,-1395.52 1079,-1446.09 1166.8,-1528.82 1243.09,-1427.8 1347,-1489.09 1369.36,-1502.28 1361.13,-1521.11 1383,-1535.09 1399.87,-1545.88 1420,-1553.04 1439.54,-1557.78"/>
<polygon fill="black" stroke="black" points="1438.85,-1561.22 1449.37,-1559.99 1440.38,-1554.39 1438.85,-1561.22"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge168" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1032.6,-1274.29C1036.38,-1277.16 1039.87,-1280.41 1043,-1284.09 1096.04,-1346.47 1023.83,-1959.6 1079,-2020.09 1119.53,-2064.54 1291.67,-2034.49 1347,-2058.09 1378.51,-2071.53 1451.07,-2133.11 1491.15,-2168.28"/>
<polygon fill="black" stroke="black" points="1488.89,-2170.96 1498.71,-2174.94 1493.51,-2165.7 1488.89,-2170.96"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge170" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M927.22,-1239.05C949.96,-1202.59 1006.93,-1120.55 1079,-1084.09 1111.07,-1067.87 1330.75,-1047.09 1447.07,-1037.05"/>
<polygon fill="black" stroke="black" points="1447.65,-1040.52 1457.31,-1036.17 1447.05,-1033.54 1447.65,-1040.52"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge169" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M1032.72,-1274.62C1036.44,-1277.41 1039.89,-1280.55 1043,-1284.09 1108.33,-1358.47 1013.3,-1654.04 1079,-1728.09 1079.63,-1728.81 1080.28,-1729.5 1080.94,-1730.19"/>
<polygon fill="black" stroke="black" points="1078.67,-1732.85 1088.45,-1736.91 1083.34,-1727.64 1078.67,-1732.85"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed -->
<g id="edge171" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;scan_ontology._is_misparsed</title>
<path fill="none" stroke="black" d="M931.29,-1239.02C958.84,-1204.18 1017.53,-1124.27 1043,-1046.09 1070.64,-961.23 1019.47,-712.59 1079,-646.09 1083.49,-641.08 1088.63,-636.85 1094.22,-633.29"/>
<polygon fill="black" stroke="black" points="1096.3,-636.14 1103.35,-628.23 1092.9,-630.02 1096.3,-636.14"/>
</g>
<!-- scan_ontology.main -->
<g id="node115" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="708.5,-1229.09 553.5,-1229.09 553.5,-1193.09 708.5,-1193.09 708.5,-1229.09"/>
<text text-anchor="middle" x="631" y="-1207.39" font-family="Times,serif" font-size="14.00">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;serde_utils.write_json -->
<g id="edge173" class="edge">
<title>scan_ontology.main&#45;&gt;serde_utils.write_json</title>
<path fill="none" stroke="black" d="M708.51,-1210.58C839.41,-1209.35 1114.7,-1205.3 1347,-1192.09 1371.72,-1190.69 1398.4,-1188.63 1423.2,-1186.48"/>
<polygon fill="black" stroke="black" points="1423.68,-1189.95 1433.34,-1185.59 1423.07,-1182.98 1423.68,-1189.95"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge172" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M708.82,-1223.6C734.98,-1227.86 764.9,-1232.73 793.66,-1237.42"/>
<polygon fill="black" stroke="black" points="793.34,-1240.91 803.78,-1239.06 794.47,-1234 793.34,-1240.91"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node116" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node116"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="1022,-599.09 809,-599.09 809,-563.09 1022,-563.09 1022,-599.09"/>
<text text-anchor="middle" x="915.5" y="-577.39" font-family="Times,serif" font-size="14.00">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge174" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M634.14,-1192.9C645.26,-1101.45 699.37,-693 788,-608.09 791.66,-604.59 795.66,-601.49 799.9,-598.76"/>
<polygon fill="black" stroke="black" points="801.96,-601.61 808.94,-593.64 798.51,-595.52 801.96,-601.61"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node136" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node136"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="1318.5,-307.09 1107.5,-307.09 1107.5,-271.09 1318.5,-271.09 1318.5,-307.09"/>
<text text-anchor="middle" x="1213" y="-285.39" font-family="Times,serif" font-size="14.00">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge205" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M977.24,-563.09C1001.21,-553 1026.84,-537.92 1043,-516.09 1096.73,-443.49 1015.85,-380.66 1079,-316.09 1084.62,-310.35 1091.1,-305.66 1098.11,-301.84"/>
<polygon fill="black" stroke="black" points="1099.76,-304.93 1107.26,-297.45 1096.73,-298.62 1099.76,-304.93"/>
</g>
<!-- tg_client._write_md -->
<g id="node118" class="node">
<title>tg_client._write_md</title>
<g id="a_node118"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="189.5,-2875.09 33.5,-2875.09 33.5,-2839.09 189.5,-2839.09 189.5,-2875.09"/>
<text text-anchor="middle" x="111.5" y="-2853.39" font-family="Times,serif" font-size="14.00">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge180" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M189.78,-2857.09C219.42,-2857.09 253.33,-2857.09 283.4,-2857.09"/>
<polygon fill="black" stroke="black" points="283.44,-2860.59 293.44,-2857.09 283.44,-2853.59 283.44,-2860.59"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node119" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node119"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="1322,-2341.09 1104,-2341.09 1104,-2305.09 1322,-2305.09 1322,-2341.09"/>
<text text-anchor="middle" x="1213" y="-2319.39" font-family="Times,serif" font-size="14.00">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge181" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1322.3,-2305.11C1331.08,-2301.29 1339.46,-2296.67 1347,-2291.09 1372.31,-2272.37 1357.97,-2249.19 1383,-2230.09 1394.7,-2221.17 1408.4,-2214.4 1422.53,-2209.26"/>
<polygon fill="black" stroke="black" points="1423.99,-2212.46 1432.35,-2205.95 1421.76,-2205.82 1423.99,-2212.46"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node120" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node120"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="1017.5,-2357.09 813.5,-2357.09 813.5,-2321.09 1017.5,-2321.09 1017.5,-2357.09"/>
<text text-anchor="middle" x="915.5" y="-2335.39" font-family="Times,serif" font-size="14.00">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge182" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M1017.78,-2333.61C1042.16,-2332.29 1068.41,-2330.87 1093.49,-2329.51"/>
<polygon fill="black" stroke="black" points="1093.99,-2332.99 1103.79,-2328.95 1093.61,-2326 1093.99,-2332.99"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node121" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node121"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="1026,-2303.09 805,-2303.09 805,-2267.09 1026,-2267.09 1026,-2303.09"/>
<text text-anchor="middle" x="915.5" y="-2281.39" font-family="Times,serif" font-size="14.00">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge183" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1026.42,-2291.54C1115.18,-2293.31 1242.11,-2288.01 1347,-2253.09 1365.01,-2247.1 1365.64,-2237.78 1383,-2230.09 1396.86,-2223.95 1411.97,-2218.62 1426.92,-2214.06"/>
<polygon fill="black" stroke="black" points="1428.1,-2217.36 1436.7,-2211.17 1426.12,-2210.65 1428.1,-2217.36"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node122" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node122"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="223,-3233.09 0,-3233.09 0,-3197.09 223,-3197.09 223,-3233.09"/>
<text text-anchor="middle" x="111.5" y="-3211.39" font-family="Times,serif" font-size="14.00">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node123" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node123"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="459.5,-3233.09 273.5,-3233.09 273.5,-3197.09 459.5,-3197.09 459.5,-3233.09"/>
<text text-anchor="middle" x="366.5" y="-3211.39" font-family="Times,serif" font-size="14.00">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._should_skip_media&#45;&gt;tg_client._allowed_topic -->
<!-- tg_client._schedule_caption -->
<g id="node124" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node124"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="737,-3233.09 525,-3233.09 525,-3197.09 737,-3197.09 737,-3233.09"/>
<text text-anchor="middle" x="631" y="-3211.39" font-family="Times,serif" font-size="14.00">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic&#45;&gt;tg_client._schedule_caption -->
<!-- tg_client._save_progress -->
<g id="node125" class="node">
<title>tg_client._save_progress</title>
<g id="a_node125"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="1011,-3233.09 820,-3233.09 820,-3197.09 1011,-3197.09 1011,-3233.09"/>
<text text-anchor="middle" x="915.5" y="-3211.39" font-family="Times,serif" font-size="14.00">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client._schedule_caption&#45;&gt;tg_client._save_progress -->
<!-- telegram_bot:cli -->
<g id="node132" class="node">
<title>telegram_bot:cli</title>
<g id="a_node132"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1279,-3233.09 1147,-3233.09 1147,-3197.09 1279,-3197.09 1279,-3233.09"/>
<text text-anchor="middle" x="1213" y="-3211.39" font-family="Times,serif" font-size="14.00">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- tg_client._save_progress&#45;&gt;telegram_bot:cli -->
<!-- tg_client._schedule_chop -->
<g id="node126" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node126"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="1616.5,-2833.09 1423.5,-2833.09 1423.5,-2797.09 1616.5,-2797.09 1616.5,-2833.09"/>
<text text-anchor="middle" x="1520" y="-2811.39" font-family="Times,serif" font-size="14.00">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node127" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node127"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="1308.5,-745.09 1117.5,-745.09 1117.5,-709.09 1308.5,-709.09 1308.5,-745.09"/>
<text text-anchor="middle" x="1213" y="-723.39" font-family="Times,serif" font-size="14.00">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge188" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M1308.83,-740.51C1321.98,-744.03 1335.06,-748.48 1347,-754.09 1365.6,-762.83 1364.54,-774.07 1383,-783.09 1391.41,-787.2 1400.38,-790.8 1409.54,-793.95"/>
<polygon fill="black" stroke="black" points="1408.55,-797.31 1419.14,-797.07 1410.71,-790.65 1408.55,-797.31"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge187" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1308.55,-729.92C1323.35,-734.59 1337.03,-742.16 1347,-754.09 1404.64,-823.03 1360.24,-2284.17 1383,-2371.09 1406.65,-2461.42 1467.78,-2555.17 1499.41,-2599.64"/>
<polygon fill="black" stroke="black" points="1496.64,-2601.78 1505.32,-2607.86 1502.32,-2597.7 1496.64,-2601.78"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node128" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node128"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="1630.5,-774.09 1409.5,-774.09 1409.5,-738.09 1630.5,-738.09 1630.5,-774.09"/>
<text text-anchor="middle" x="1520" y="-752.39" font-family="Times,serif" font-size="14.00">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge189" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M1308.83,-736.11C1337.43,-738.83 1369.19,-741.85 1399.19,-744.7"/>
<polygon fill="black" stroke="black" points="1399,-748.2 1409.29,-745.66 1399.66,-741.23 1399,-748.2"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node129" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node129"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="1330.5,-2833.09 1095.5,-2833.09 1095.5,-2797.09 1330.5,-2797.09 1330.5,-2833.09"/>
<text text-anchor="middle" x="1213" y="-2811.39" font-family="Times,serif" font-size="14.00">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge190" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M1330.69,-2797.54C1336.41,-2794.81 1341.89,-2791.68 1347,-2788.09 1372.15,-2770.45 1362.4,-2751.88 1383,-2729.09 1411.63,-2697.44 1451.11,-2668.79 1480.17,-2649.79"/>
<polygon fill="black" stroke="black" points="1482.32,-2652.56 1488.83,-2644.21 1478.52,-2646.68 1482.32,-2652.56"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge191" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M1330.61,-2815.09C1357.75,-2815.09 1386.5,-2815.09 1413.15,-2815.09"/>
<polygon fill="black" stroke="black" points="1413.25,-2818.59 1423.25,-2815.09 1413.25,-2811.59 1413.25,-2818.59"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node130" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node130"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="1298.5,-2395.09 1127.5,-2395.09 1127.5,-2359.09 1298.5,-2359.09 1298.5,-2395.09"/>
<text text-anchor="middle" x="1213" y="-2373.39" font-family="Times,serif" font-size="14.00">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge192" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1298.83,-2373.81C1316.45,-2369.54 1333.69,-2362.24 1347,-2350.09 1388.13,-2312.55 1343.12,-2268.95 1383,-2230.09 1394.07,-2219.31 1407.96,-2211.59 1422.59,-2206.08"/>
<polygon fill="black" stroke="black" points="1423.97,-2209.32 1432.3,-2202.78 1421.71,-2202.69 1423.97,-2209.32"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;serde_utils.read_text -->
<g id="edge193" class="edge">
<title>tg_client._get_id_date&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1298.65,-2372.63C1316.08,-2368.4 1333.27,-2361.41 1347,-2350.09 1379.29,-2323.48 1348.21,-2286.35 1383,-2263.09 1484.24,-2195.42 1538.18,-2236.43 1657,-2263.09 1797.06,-2294.52 1848.53,-2298.58 1949,-2401.09 2036.12,-2489.99 2076.72,-2639.48 2090.4,-2701.17"/>
<polygon fill="black" stroke="black" points="2086.99,-2701.93 2092.51,-2710.97 2093.83,-2700.46 2086.99,-2701.93"/>
</g>
<!-- tg_client._load_progress -->
<g id="node131" class="node">
<title>tg_client._load_progress</title>
<g id="a_node131"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="1307.5,-3079.09 1118.5,-3079.09 1118.5,-3043.09 1307.5,-3043.09 1307.5,-3079.09"/>
<text text-anchor="middle" x="1213" y="-3057.39" font-family="Times,serif" font-size="14.00">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;serde_utils.read_text -->
<g id="edge194" class="edge">
<title>tg_client._load_progress&#45;&gt;serde_utils.read_text</title>
<path fill="none" stroke="black" d="M1307.68,-3069.71C1398.79,-3075.17 1540.15,-3075.84 1657,-3042.09 1800.63,-3000.61 1830.05,-2965.66 1949,-2875.09 1997.6,-2838.09 2046.41,-2785.93 2073.76,-2755.01"/>
<polygon fill="black" stroke="black" points="2076.6,-2757.08 2080.57,-2747.25 2071.34,-2752.46 2076.6,-2757.08"/>
</g>
<!-- build_site:cli -->
<g id="node140" class="node">
<title>build_site:cli</title>
<g id="a_node140"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1573.5,-3233.09 1466.5,-3233.09 1466.5,-3197.09 1573.5,-3197.09 1573.5,-3233.09"/>
<text text-anchor="middle" x="1520" y="-3211.39" font-family="Times,serif" font-size="14.00">build_site:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;build_site:cli -->
<!-- tg_client.get_first_id -->
<g id="node133" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node133"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="712,-2257.09 550,-2257.09 550,-2221.09 712,-2221.09 712,-2257.09"/>
<text text-anchor="middle" x="631" y="-2235.39" font-family="Times,serif" font-size="14.00">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge196" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M712.08,-2240.33C844.51,-2241.62 1117.3,-2241.08 1347,-2220.09 1371.47,-2217.86 1397.75,-2214.32 1422.21,-2210.53"/>
<polygon fill="black" stroke="black" points="1422.88,-2213.97 1432.21,-2208.95 1421.79,-2207.05 1422.88,-2213.97"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node134" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node134"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1292.5,-2211.09 1133.5,-2211.09 1133.5,-2175.09 1292.5,-2175.09 1292.5,-2211.09"/>
<text text-anchor="middle" x="1213" y="-2189.39" font-family="Times,serif" font-size="14.00">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge197" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1292.55,-2193.09C1332.09,-2193.09 1380.38,-2193.09 1422.2,-2193.09"/>
<polygon fill="black" stroke="black" points="1422.4,-2196.59 1432.4,-2193.09 1422.4,-2189.59 1422.4,-2196.59"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node135" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node135"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="1338.5,-2633.09 1087.5,-2633.09 1087.5,-2597.09 1338.5,-2597.09 1338.5,-2633.09"/>
<text text-anchor="middle" x="1213" y="-2611.39" font-family="Times,serif" font-size="14.00">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge198" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M1337.74,-2597.08C1341.07,-2594.4 1344.18,-2591.42 1347,-2588.09 1418.48,-2503.8 1311.34,-1678.23 1383,-1594.09 1397.01,-1577.64 1417.93,-1569.41 1439.17,-1565.65"/>
<polygon fill="black" stroke="black" points="1439.87,-1569.09 1449.27,-1564.19 1438.87,-1562.16 1439.87,-1569.09"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge199" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M1338.72,-2599.3C1429.16,-2585.31 1553.29,-2560.8 1657,-2521.09 1704,-2503.1 1753.63,-2472.96 1785.6,-2451.88"/>
<polygon fill="black" stroke="black" points="1787.76,-2454.65 1794.14,-2446.19 1783.87,-2448.83 1787.76,-2454.65"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge200" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M1278.44,-2633.1C1309.72,-2640.94 1348.03,-2649.21 1383,-2653.09 1504.03,-2666.53 1537.66,-2677.31 1657,-2653.09 1700.58,-2644.25 1746.98,-2623.35 1779.08,-2606.86"/>
<polygon fill="black" stroke="black" points="1780.91,-2609.85 1788.15,-2602.12 1777.67,-2603.65 1780.91,-2609.85"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node137" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node137"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="1004.5,-353.09 826.5,-353.09 826.5,-317.09 1004.5,-317.09 1004.5,-353.09"/>
<text text-anchor="middle" x="915.5" y="-331.39" font-family="Times,serif" font-size="14.00">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge201" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M1004.76,-321.35C1033.84,-316.83 1066.61,-311.73 1097.36,-306.94"/>
<polygon fill="black" stroke="black" points="1097.93,-310.39 1107.27,-305.4 1096.85,-303.48 1097.93,-310.39"/>
</g>
<!-- log_utils.init_logger -->
<g id="node138" class="node">
<title>log_utils.init_logger</title>
<g id="a_node138"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="994.5,-153.09 836.5,-153.09 836.5,-117.09 994.5,-117.09 994.5,-153.09"/>
<text text-anchor="middle" x="915.5" y="-131.39" font-family="Times,serif" font-size="14.00">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge202" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M967.17,-153.22C992.14,-164 1021.43,-179.6 1043,-200.09 1066.1,-222.04 1053.11,-243.51 1079,-262.09 1084.92,-266.34 1091.35,-269.96 1098.09,-273.04"/>
<polygon fill="black" stroke="black" points="1096.86,-276.31 1107.44,-276.9 1099.54,-269.85 1096.86,-276.31"/>
</g>
<!-- log_utils.get_logger -->
<g id="node139" class="node">
<title>log_utils.get_logger</title>
<g id="a_node139"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="1291.5,-145.09 1134.5,-145.09 1134.5,-109.09 1291.5,-109.09 1291.5,-145.09"/>
<text text-anchor="middle" x="1213" y="-123.39" font-family="Times,serif" font-size="14.00">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge203" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M994.53,-126.95C1034.41,-124.98 1083.1,-123.6 1124.28,-123.24"/>
<polygon fill="black" stroke="black" points="1124.33,-126.74 1134.31,-123.17 1124.28,-119.74 1124.33,-126.74"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge204" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M1134.31,-135.22C1094.47,-137.19 1045.79,-138.58 1004.56,-138.94"/>
<polygon fill="black" stroke="black" points="1004.5,-135.44 994.53,-139.01 1004.55,-142.44 1004.5,-135.44"/>
</g>
<!-- debug_dump:cli -->
<g id="node141" class="node">
<title>debug_dump:cli</title>
<g id="a_node141"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1885.5,-3233.09 1756.5,-3233.09 1756.5,-3197.09 1885.5,-3197.09 1885.5,-3233.09"/>
<text text-anchor="middle" x="1821" y="-3211.39" font-family="Times,serif" font-size="14.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;debug_dump:cli -->
<!-- caption:cli -->
<g id="node142" class="node">
<title>caption:cli</title>
<g id="a_node142"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="156.5,-3287.09 66.5,-3287.09 66.5,-3251.09 156.5,-3251.09 156.5,-3287.09"/>
<text text-anchor="middle" x="111.5" y="-3265.39" font-family="Times,serif" font-size="14.00">caption:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node143" class="node">
<title>clean_data:cli</title>
<g id="a_node143"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="423,-3287.09 310,-3287.09 310,-3251.09 423,-3251.09 423,-3287.09"/>
<text text-anchor="middle" x="366.5" y="-3265.39" font-family="Times,serif" font-size="14.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;clean_data:cli -->
<!-- chop:cli -->
<g id="node144" class="node">
<title>chop:cli</title>
<g id="a_node144"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="666.5,-3287.09 595.5,-3287.09 595.5,-3251.09 666.5,-3251.09 666.5,-3287.09"/>
<text text-anchor="middle" x="631" y="-3265.39" font-family="Times,serif" font-size="14.00">chop:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;chop:cli -->
<!-- moderation:cli -->
<g id="node145" class="node">
<title>moderation:cli</title>
<g id="a_node145"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="975,-3287.09 856,-3287.09 856,-3251.09 975,-3251.09 975,-3287.09"/>
<text text-anchor="middle" x="915.5" y="-3265.39" font-family="Times,serif" font-size="14.00">moderation:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;moderation:cli -->
<!-- embed:cli -->
<g id="node146" class="node">
<title>embed:cli</title>
<g id="a_node146"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1256,-3287.09 1170,-3287.09 1170,-3251.09 1256,-3251.09 1256,-3287.09"/>
<text text-anchor="middle" x="1213" y="-3265.39" font-family="Times,serif" font-size="14.00">embed:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;embed:cli -->
<!-- scan_ontology:cli -->
<g id="node147" class="node">
<title>scan_ontology:cli</title>
<g id="a_node147"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1589,-3287.09 1451,-3287.09 1451,-3251.09 1589,-3251.09 1589,-3287.09"/>
<text text-anchor="middle" x="1520" y="-3265.39" font-family="Times,serif" font-size="14.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;scan_ontology:cli -->
<!-- tg_client:cli -->
<g id="node148" class="node">
<title>tg_client:cli</title>
<g id="a_node148"><a xlink:title="Command line entrypoint">
<polygon fill="none" stroke="black" points="1870.5,-3287.09 1771.5,-3287.09 1771.5,-3251.09 1870.5,-3251.09 1870.5,-3287.09"/>
<text text-anchor="middle" x="1821" y="-3265.39" font-family="Times,serif" font-size="14.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;tg_client:cli -->
<!-- build_site -->
<g id="node149" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="111.5" cy="-512.09" rx="55.79" ry="18"/>
<text text-anchor="middle" x="111.5" y="-508.39" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge214" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M167.4,-512.09C204.3,-512.09 253.32,-512.09 293.36,-512.09"/>
<polygon fill="black" stroke="black" points="293.6,-515.59 303.6,-512.09 293.6,-508.59 293.6,-515.59"/>
</g>
<!-- caption -->
<g id="node150" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="631" cy="-1419.09" rx="44.69" ry="18"/>
<text text-anchor="middle" x="631" y="-1415.39" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge215" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M676.14,-1419.09C722.94,-1419.09 797.3,-1419.09 850.52,-1419.09"/>
<polygon fill="black" stroke="black" points="850.53,-1422.59 860.53,-1419.09 850.53,-1415.59 850.53,-1422.59"/>
</g>
<!-- chop -->
<g id="node151" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="366.5" cy="-1801.09" rx="32.49" ry="18"/>
<text text-anchor="middle" x="366.5" y="-1797.39" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge216" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M399.16,-1801.09C442.88,-1801.09 522.37,-1801.09 575.68,-1801.09"/>
<polygon fill="black" stroke="black" points="575.98,-1804.59 585.98,-1801.09 575.98,-1797.59 575.98,-1804.59"/>
</g>
<!-- clean_data -->
<g id="node152" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="631" cy="-1885.09" rx="59.59" ry="18"/>
<text text-anchor="middle" x="631" y="-1881.39" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge217" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M690.88,-1885.09C733.96,-1885.09 792.77,-1885.09 839.26,-1885.09"/>
<polygon fill="black" stroke="black" points="839.29,-1888.59 849.29,-1885.09 839.29,-1881.59 839.29,-1888.59"/>
</g>
<!-- debug_dump -->
<g id="node153" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="631" cy="-2561.09" rx="70.39" ry="18"/>
<text text-anchor="middle" x="631" y="-2557.39" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge218" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M701.47,-2561.09C740.71,-2561.09 790.02,-2561.09 831.31,-2561.09"/>
<polygon fill="black" stroke="black" points="831.35,-2564.59 841.35,-2561.09 831.35,-2557.59 831.35,-2564.59"/>
</g>
<!-- embed -->
<g id="node154" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="631" cy="-1311.09" rx="42.49" ry="18"/>
<text text-anchor="middle" x="631" y="-1307.39" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge219" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M673.38,-1311.09C720.75,-1311.09 798.8,-1311.09 853.22,-1311.09"/>
<polygon fill="black" stroke="black" points="853.43,-1314.59 863.43,-1311.09 853.43,-1307.59 853.43,-1314.59"/>
</g>
<!-- moderation -->
<g id="node155" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="915.5" cy="-1019.09" rx="63.89" ry="18"/>
<text text-anchor="middle" x="915.5" y="-1015.39" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge220" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M979.53,-1019.09C1012.44,-1019.09 1053.82,-1019.09 1092.51,-1019.09"/>
<polygon fill="black" stroke="black" points="1092.81,-1022.59 1102.81,-1019.09 1092.81,-1015.59 1092.81,-1022.59"/>
</g>
<!-- scan_ontology -->
<g id="node156" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="366.5" cy="-1211.09" rx="76.09" ry="18"/>
<text text-anchor="middle" x="366.5" y="-1207.39" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge221" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M442.72,-1211.09C474.03,-1211.09 510.57,-1211.09 543.02,-1211.09"/>
<polygon fill="black" stroke="black" points="543.4,-1214.59 553.4,-1211.09 543.4,-1207.59 543.4,-1214.59"/>
</g>
</g>
</svg>
