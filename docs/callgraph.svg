<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="9933pt" height="5493pt"
 viewBox="0.00 0.00 9933.00 5492.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5488.6)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5488.6 9929,-5488.6 9929,4 -4,4"/>
<!-- post_io.get_contact -->
<g id="node1" class="node">
<title>post_io.get_contact</title>
<g id="a_node1"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7407.5,-3898.45 7208.5,-3898.45 7208.5,-3862.45 7407.5,-3862.45 7407.5,-3898.45"/>
<text text-anchor="middle" x="7308" y="-3875.67" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node2" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node2"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7479.5,-3956.45 7136.5,-3956.45 7136.5,-3916.45 7479.5,-3916.45 7479.5,-3956.45"/>
<text text-anchor="middle" x="7308" y="-3929.38" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.read_post -->
<g id="node3" class="node">
<title>post_io.read_post</title>
<g id="a_node3"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8625,-3872.45 8067,-3872.45 8067,-3796.45 8625,-3796.45 8625,-3872.45"/>
<text text-anchor="middle" x="8346" y="-3819.28" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- notes_utils.read_md -->
<g id="node4" class="node">
<title>notes_utils.read_md</title>
<g id="a_node4"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9217.5,-4018.45 9077.5,-4018.45 9077.5,-3982.45 9217.5,-3982.45 9217.5,-4018.45"/>
<text text-anchor="middle" x="9147.5" y="-3997.21" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge1" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8530.17,-3872.48C8699.6,-3907.66 8943.39,-3958.28 9067.46,-3984.04"/>
<polygon fill="black" stroke="black" points="9066.77,-3987.47 9077.28,-3986.08 9068.2,-3980.62 9066.77,-3987.47"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node5" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node5"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9316.5,-3889.95 8978.5,-3889.95 8978.5,-3852.95 9316.5,-3852.95 9316.5,-3889.95"/>
<text text-anchor="middle" x="9147.5" y="-3865.01" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge2" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8625.22,-3847.33C8738.96,-3852.59 8867.2,-3858.53 8968.03,-3863.19"/>
<polygon fill="black" stroke="black" points="8968.17,-3866.7 8978.32,-3863.67 8968.49,-3859.71 8968.17,-3866.7"/>
</g>
<!-- notes_utils.read_text -->
<g id="node16" class="node">
<title>notes_utils.read_text</title>
<g id="a_node16"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="9815.5,-1834.45 9601.5,-1834.45 9601.5,-1798.45 9815.5,-1798.45 9815.5,-1834.45"/>
<text text-anchor="middle" x="9708.5" y="-1811.67" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge281" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9217.79,-3997.95C9289.17,-3991.37 9397.97,-3969.43 9456,-3898.45 9592.82,-3731.1 9692.22,-2082.58 9705.89,-1844.94"/>
<polygon fill="black" stroke="black" points="9709.4,-1844.88 9706.48,-1834.7 9702.41,-1844.48 9709.4,-1844.88"/>
</g>
<!-- post_io.write_post -->
<g id="node6" class="node">
<title>post_io.write_post</title>
<g id="a_node6"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6383.5,-3961.45 6051.5,-3961.45 6051.5,-3915.45 6383.5,-3915.45 6383.5,-3961.45"/>
<text text-anchor="middle" x="6217.5" y="-3930.01" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge3" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6383.79,-3928.73C6491.72,-3922.46 6635.71,-3914.23 6763,-3907.45 6913.86,-3899.41 7088.29,-3890.89 7198.12,-3885.62"/>
<polygon fill="black" stroke="black" points="7198.4,-3889.11 7208.22,-3885.14 7198.06,-3882.12 7198.4,-3889.11"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge4" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6383.52,-3938.15C6583.58,-3937.78 6919.55,-3937.16 7126.37,-3936.78"/>
<polygon fill="black" stroke="black" points="7126.44,-3940.28 7136.43,-3936.77 7126.42,-3933.28 7126.44,-3940.28"/>
</g>
<!-- notes_utils.write_md -->
<g id="node7" class="node">
<title>notes_utils.write_md</title>
<g id="a_node7"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7421,-4010.45 7195,-4010.45 7195,-3974.45 7421,-3974.45 7421,-4010.45"/>
<text text-anchor="middle" x="7308" y="-3987.66" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge5" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6383.52,-3946.64C6603.83,-3957.57 6988.97,-3976.68 7184.95,-3986.4"/>
<polygon fill="black" stroke="black" points="7184.84,-3989.9 7195,-3986.9 7185.18,-3982.9 7184.84,-3989.9"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node8" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node8"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8422.5,-2735.45 8269.5,-2735.45 8269.5,-2699.45 8422.5,-2699.45 8422.5,-2735.45"/>
<text text-anchor="middle" x="8346" y="-2714.21" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node9" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node9"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7453,-2454.45 7163,-2454.45 7163,-2418.45 7453,-2418.45 7453,-2454.45"/>
<text text-anchor="middle" x="7308" y="-2432.29" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge6" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7453.01,-2429.11C7564.17,-2427.21 7720.79,-2432.77 7853,-2468.45 8037.44,-2518.24 8233.3,-2641.71 8310.7,-2693.74"/>
<polygon fill="black" stroke="black" points="8308.86,-2696.73 8319.11,-2699.43 8312.79,-2690.93 8308.86,-2696.73"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node10" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node10"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7457.5,-3674.45 7158.5,-3674.45 7158.5,-3638.45 7457.5,-3638.45 7457.5,-3674.45"/>
<text text-anchor="middle" x="7308" y="-3650.58" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node11" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node11"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8567,-4606.45 8125,-4606.45 8125,-4570.45 8567,-4570.45 8567,-4606.45"/>
<text text-anchor="middle" x="8346" y="-4582.86" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node12" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node12"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7562,-3237.95 7054,-3237.95 7054,-3194.95 7562,-3194.95 7562,-3237.95"/>
<text text-anchor="middle" x="7308" y="-3208.3" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path -->
<g id="node13" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node13"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8422.5,-3130.45 8269.5,-3130.45 8269.5,-3094.45 8422.5,-3094.45 8422.5,-3130.45"/>
<text text-anchor="middle" x="8346" y="-3108.75" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge7" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7458.18,-3237.97C7572.1,-3247.51 7729.92,-3245.45 7853,-3185.45 7874.8,-3174.83 7867.27,-3155.22 7889,-3144.45 8007,-3085.97 8163.64,-3089.86 8259.23,-3099.84"/>
<polygon fill="black" stroke="black" points="8259.12,-3103.34 8269.44,-3100.95 8259.87,-3096.38 8259.12,-3103.34"/>
</g>
<!-- notes_utils.load_json -->
<g id="node14" class="node">
<title>notes_utils.load_json</title>
<g id="a_node14"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9271.5,-2408.45 9023.5,-2408.45 9023.5,-2372.45 9271.5,-2372.45 9271.5,-2408.45"/>
<text text-anchor="middle" x="9147.5" y="-2384.76" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge8" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7562.33,-3203.4C7653.95,-3198.31 7758.16,-3192.11 7853,-3185.45 7869.02,-3184.33 7872.98,-3183.5 7889,-3182.45 7939.73,-3179.15 8765.74,-3174.04 8803,-3139.45 8851.4,-3094.52 8815.83,-2906.3 8839,-2844.45 8907.35,-2661.98 9062.97,-2481.07 9122.62,-2415.87"/>
<polygon fill="black" stroke="black" points="9125.21,-2418.23 9129.41,-2408.5 9120.06,-2413.49 9125.21,-2418.23"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node52" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node52"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9272.5,-1918.45 9022.5,-1918.45 9022.5,-1882.45 9272.5,-1882.45 9272.5,-1918.45"/>
<text text-anchor="middle" x="9147.5" y="-1894.29" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge58" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8422.74,-3119.55C8538.55,-3128.56 8751.65,-3137.28 8803,-3085.45 8859.53,-3028.39 8813.88,-2439.75 8839,-2363.45 8900.76,-2175.85 9060.33,-1992.26 9121.83,-1926.2"/>
<polygon fill="black" stroke="black" points="9124.54,-1928.42 9128.83,-1918.73 9119.43,-1923.63 9124.54,-1928.42"/>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge284" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9166.15,-2372.33C9247.64,-2288.65 9587.54,-1939.64 9682.66,-1841.96"/>
<polygon fill="black" stroke="black" points="9685.37,-1844.19 9689.84,-1834.58 9680.36,-1839.31 9685.37,-1844.19"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node15" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node15"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9373.5,-3485.45 8921.5,-3485.45 8921.5,-3441.45 9373.5,-3441.45 9373.5,-3485.45"/>
<text text-anchor="middle" x="9147.5" y="-3455.13" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge9" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9303.86,-3441.41C9359.59,-3425.78 9417.98,-3399.08 9456,-3353.45 9657.96,-3111.09 9700.7,-2033.5 9706.69,-1844.72"/>
<polygon fill="black" stroke="black" points="9710.19,-1844.62 9707,-1834.51 9703.19,-1844.4 9710.19,-1844.62"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge280" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9607.19,-1834.61C9591.61,-1843.99 9625.38,-1852.45 9708.5,-1852.45 9760.45,-1852.45 9793.13,-1849.15 9806.52,-1844.38"/>
<polygon fill="black" stroke="black" points="9809.94,-1845.2 9809.81,-1834.61 9803.3,-1842.97 9809.94,-1845.2"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node17" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node17"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7555,-3619.95 7061,-3619.95 7061,-3570.95 7555,-3570.95 7555,-3619.95"/>
<text text-anchor="middle" x="7308" y="-3586.27" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge10" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7441.43,-3619.98C7566.42,-3634.72 7749.64,-3633.05 7853,-3523.45 7928.21,-3443.7 7834.49,-3126.57 7889,-3031.45 7978.71,-2874.92 8182,-2779.13 8284.09,-2739.15"/>
<polygon fill="black" stroke="black" points="8285.59,-2742.33 8293.65,-2735.46 8283.06,-2735.8 8285.59,-2742.33"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge11" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7452.85,-3619.95C7576.28,-3632.05 7750.05,-3626.3 7853,-3523.45 7938.64,-3437.89 7810.85,-3345.91 7889,-3253.45 7980.89,-3144.74 8154.78,-3118.44 8259.25,-3112.89"/>
<polygon fill="black" stroke="black" points="8259.63,-3116.38 8269.45,-3112.41 8259.29,-3109.39 8259.63,-3116.38"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge16" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7555.15,-3577.73C7930.12,-3545.95 8620.22,-3467.11 8803,-3307.45 9089.17,-3057.49 9137.48,-2545.02 9145.13,-2418.94"/>
<polygon fill="black" stroke="black" points="9148.65,-2418.79 9145.72,-2408.6 9141.66,-2418.39 9148.65,-2418.79"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge15" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7555.14,-3601.07C8089.23,-3610.84 9317.77,-3619.29 9456,-3494.45 9712.53,-3262.78 9710.08,-2045.7 9707.9,-1844.6"/>
<polygon fill="black" stroke="black" points="9711.39,-1844.51 9707.78,-1834.55 9704.39,-1844.59 9711.39,-1844.51"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node18" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node18"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9244,-4756.45 9051,-4756.45 9051,-4720.45 9244,-4720.45 9244,-4756.45"/>
<text text-anchor="middle" x="9147.5" y="-4735.21" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge12" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7555.05,-3579.96C7678.77,-3578.03 7811.21,-3586.93 7853,-3629.45 7915.14,-3692.67 7826.41,-4363.68 7889,-4426.45 7960.79,-4498.45 8727.6,-4402.25 8803,-4470.45 8883.32,-4543.1 8760.13,-4637.23 8839,-4711.45 8895.15,-4764.29 8985.3,-4766.27 9053.51,-4757.86"/>
<polygon fill="black" stroke="black" points="9054.38,-4761.28 9063.83,-4756.49 9053.46,-4754.34 9054.38,-4761.28"/>
</g>
<!-- caption_io.has_caption -->
<g id="node19" class="node">
<title>caption_io.has_caption</title>
<g id="a_node19"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8423.5,-4823.45 8268.5,-4823.45 8268.5,-4787.45 8423.5,-4787.45 8423.5,-4823.45"/>
<text text-anchor="middle" x="8346" y="-4802.21" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge13" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7555.22,-3579.79C7679,-3577.81 7811.44,-3586.72 7853,-3629.45 7933.61,-3712.34 7818.31,-4577.95 7889,-4669.45 7975.97,-4782.03 8152.25,-4804.69 8258.35,-4807.46"/>
<polygon fill="black" stroke="black" points="8258.32,-4810.96 8268.4,-4807.67 8258.47,-4803.97 8258.32,-4810.96"/>
</g>
<!-- caption_io.read_caption -->
<g id="node20" class="node">
<title>caption_io.read_caption</title>
<g id="a_node20"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8511.5,-4345.95 8180.5,-4345.95 8180.5,-4308.95 8511.5,-4308.95 8511.5,-4345.95"/>
<text text-anchor="middle" x="8346" y="-4321.01" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge14" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7555.16,-3580.2C7678.71,-3578.38 7810.93,-3587.3 7853,-3629.45 7946.42,-3723.05 7803.45,-4122.61 7889,-4223.45 7956.93,-4303.52 8072.58,-4329.23 8170.41,-4335.08"/>
<polygon fill="black" stroke="black" points="8170.25,-4338.57 8180.42,-4335.61 8170.62,-4331.58 8170.25,-4338.57"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge202" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8423.66,-4799.03C8567.31,-4786.99 8877.23,-4761.02 9040.67,-4747.32"/>
<polygon fill="black" stroke="black" points="9041.06,-4750.8 9050.74,-4746.48 9040.48,-4743.83 9041.06,-4750.8"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node22" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node22"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9241,-4702.45 9054,-4702.45 9054,-4666.45 9241,-4666.45 9241,-4702.45"/>
<text text-anchor="middle" x="9147.5" y="-4681.21" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge203" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8423.72,-4788.3C8520.18,-4767.3 8691.07,-4732.03 8839,-4711.45 8906.86,-4702.01 8983.64,-4695.27 9043.5,-4690.88"/>
<polygon fill="black" stroke="black" points="9043.99,-4694.35 9053.72,-4690.14 9043.49,-4687.37 9043.99,-4694.35"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge207" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8511.53,-4330.6C8608.48,-4323.57 8726.72,-4298.17 8803,-4223.45 8850.13,-4177.29 8792.5,-4126.25 8839,-4079.45 8898.8,-4019.26 8997.86,-4002.89 9067.35,-3999.41"/>
<polygon fill="black" stroke="black" points="9067.54,-4002.9 9077.38,-3998.98 9067.24,-3995.91 9067.54,-4002.9"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge208" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8511.63,-4336.15C8611.83,-4331.75 8733.51,-4307.18 8803,-4223.45 8868.62,-4144.39 8820.35,-3400.49 8839,-3299.45 8905.58,-2938.82 9085.02,-2526.28 9134,-2417.75"/>
<polygon fill="black" stroke="black" points="9137.26,-2419.04 9138.2,-2408.49 9130.88,-2416.15 9137.26,-2419.04"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge205" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8479.7,-4308.95C8582.69,-4302.68 8721.26,-4313.38 8803,-4398.45 8900.02,-4499.43 8738.66,-4613.78 8839,-4711.45 8895.27,-4766.23 8987.88,-4767.14 9056.79,-4757.91"/>
<polygon fill="black" stroke="black" points="9057.37,-4761.36 9066.78,-4756.48 9056.38,-4754.43 9057.37,-4761.36"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge206" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8511.66,-4313.16C8601.33,-4311.72 8712.17,-4320.52 8803,-4360.45 8956.02,-4427.73 9083.21,-4593.39 9128.63,-4658.02"/>
<polygon fill="black" stroke="black" points="9125.91,-4660.24 9134.49,-4666.45 9131.65,-4656.24 9125.91,-4660.24"/>
</g>
<!-- caption_io._get_langs -->
<g id="node134" class="node">
<title>caption_io._get_langs</title>
<g id="a_node134"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9256.5,-4298.45 9038.5,-4298.45 9038.5,-4262.45 9256.5,-4262.45 9256.5,-4298.45"/>
<text text-anchor="middle" x="9147.5" y="-4275.67" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge204" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8511.69,-4317.77C8665.54,-4308.73 8891.45,-4295.45 9028.19,-4287.41"/>
<polygon fill="black" stroke="black" points="9028.5,-4290.9 9038.28,-4286.81 9028.09,-4283.91 9028.5,-4290.9"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node21" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node21"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7523.5,-3456.45 7092.5,-3456.45 7092.5,-3412.45 7523.5,-3412.45 7523.5,-3456.45"/>
<text text-anchor="middle" x="7308" y="-3426.13" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge17" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7523.5,-3448.43C7637.36,-3443.6 7770.44,-3416.29 7853,-3327.45 7943.22,-3230.38 7820.37,-3144.82 7889,-3031.45 7982.68,-2876.72 8185.03,-2779.8 8285.67,-2739.31"/>
<polygon fill="black" stroke="black" points="8287.08,-2742.51 8295.08,-2735.57 8284.5,-2736.01 8287.08,-2742.51"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge18" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7523.53,-3441.14C7633.9,-3433.51 7763.65,-3405.86 7853,-3327.45 7890.71,-3294.36 7851.93,-3254.26 7889,-3220.45 7990.99,-3127.43 8158.1,-3110.28 8259.21,-3109.28"/>
<polygon fill="black" stroke="black" points="8259.4,-3112.78 8269.38,-3109.23 8259.37,-3105.78 8259.4,-3112.78"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge21" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7523.63,-3436.08C7632.04,-3426.75 7759.95,-3399.09 7853,-3327.45 7881.98,-3305.14 7858.44,-3273.54 7889,-3253.45 7973.95,-3197.62 8729.25,-3282.42 8803,-3212.45 8862.61,-3155.9 8811.1,-2921.74 8839,-2844.45 8905,-2661.61 9061.36,-2481.6 9121.93,-2416.24"/>
<polygon fill="black" stroke="black" points="9124.57,-2418.54 9128.83,-2408.84 9119.45,-2413.77 9124.57,-2418.54"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge19" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7523.65,-3418.33C7655.55,-3413.61 7807.68,-3419.31 7853,-3465.45 7925.07,-3538.83 7816.29,-4317.71 7889,-4390.45 7960.85,-4462.34 8728.1,-4357.75 8803,-4426.45 8897.09,-4512.75 8747.02,-4622.91 8839,-4711.45 8895.3,-4765.65 8987.24,-4766.86 9055.95,-4757.87"/>
<polygon fill="black" stroke="black" points="9056.49,-4761.33 9065.91,-4756.47 9055.52,-4754.39 9056.49,-4761.33"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge20" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7523.63,-3418.35C7655.51,-3413.65 7807.64,-3419.34 7853,-3465.45 7922.33,-3535.93 7819.36,-4284.28 7889,-4354.45 7960.62,-4426.62 8708.25,-4361.57 8803,-4398.45 8948.38,-4455.04 9077.27,-4599.14 9125.91,-4658.39"/>
<polygon fill="black" stroke="black" points="9123.21,-4660.62 9132.23,-4666.18 9128.64,-4656.21 9123.21,-4660.62"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node23" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node23"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9420,-4133.95 8875,-4133.95 8875,-4088.95 9420,-4088.95 9420,-4133.95"/>
<text text-anchor="middle" x="9147.5" y="-4103.07" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node24" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node24"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="9832.5,-4196.45 9584.5,-4196.45 9584.5,-4160.45 9832.5,-4160.45 9832.5,-4196.45"/>
<text text-anchor="middle" x="9708.5" y="-4174.41" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge22" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9336.58,-4134C9414.4,-4143.32 9502.84,-4153.92 9573.84,-4162.43"/>
<polygon fill="black" stroke="black" points="9573.84,-4165.96 9584.19,-4163.67 9574.68,-4159.01 9573.84,-4165.96"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node25" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node25"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9301.5,-3344.45 8993.5,-3344.45 8993.5,-3308.45 9301.5,-3308.45 9301.5,-3344.45"/>
<text text-anchor="middle" x="9147.5" y="-3320.86" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node26" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node26"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7754.5,-3318.45 6861.5,-3318.45 6861.5,-3256.45 7754.5,-3256.45 7754.5,-3318.45"/>
<text text-anchor="middle" x="7308" y="-3275.25" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge23" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7754.63,-3297.72C7788.71,-3306.48 7821.9,-3317.85 7853,-3332.45 8073.84,-3436.15 8249.81,-3684.04 8316.31,-3787.67"/>
<polygon fill="black" stroke="black" points="8313.52,-3789.8 8321.84,-3796.36 8319.42,-3786.04 8313.52,-3789.8"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge24" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7439.13,-3318.49C7561.75,-3339.36 7742.67,-3347.2 7853,-3246.45 7924.54,-3181.12 7836.98,-3113.19 7889,-3031.45 7986.5,-2878.27 8188.41,-2780.18 8287.54,-2739.29"/>
<polygon fill="black" stroke="black" points="8288.87,-2742.52 8296.81,-2735.51 8286.23,-2736.04 8288.87,-2742.52"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge27" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7754.55,-3290.94C7789.3,-3280.27 7822.64,-3265.78 7853,-3246.45 7880.53,-3228.93 7862.16,-3201.02 7889,-3182.45 7999.52,-3105.97 8161.09,-3099.68 8259.29,-3104.42"/>
<polygon fill="black" stroke="black" points="8259.3,-3107.93 8269.47,-3104.96 8259.67,-3100.94 8259.3,-3107.93"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge28" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7754.59,-3274.21C7788.37,-3267.06 7821.53,-3257.95 7853,-3246.45 7871.54,-3239.68 7870.38,-3226.98 7889,-3220.45 7984.95,-3186.8 8729.01,-3245.19 8803,-3175.45 8856.84,-3124.7 8813.5,-2913.91 8839,-2844.45 8906.15,-2661.54 9062.49,-2480.9 9122.48,-2415.82"/>
<polygon fill="black" stroke="black" points="9125.07,-2418.18 9129.3,-2408.47 9119.93,-2413.41 9125.07,-2418.18"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge25" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7733.3,-3318.59C7778.97,-3338.08 7820.54,-3365.46 7853,-3403.45 7901.72,-3460.47 7835.28,-4025.13 7889,-4077.45 7923.41,-4110.97 8504.73,-4114.47 8864.79,-4113.39"/>
<polygon fill="black" stroke="black" points="8864.85,-4116.89 8874.84,-4113.36 8864.83,-4109.89 8864.85,-4116.89"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge26" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7754.67,-3303.69C7800.04,-3305.09 7845.44,-3306.37 7889,-3307.45 8281.44,-3317.18 8742.9,-3322.62 8982.87,-3324.99"/>
<polygon fill="black" stroke="black" points="8983.04,-3328.49 8993.07,-3325.09 8983.11,-3321.49 8983.04,-3328.49"/>
</g>
<!-- debug_dump.main -->
<g id="node27" class="node">
<title>debug_dump.main</title>
<g id="a_node27"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6455.5,-3573.45 5979.5,-3573.45 5979.5,-3511.45 6455.5,-3511.45 6455.5,-3573.45"/>
<text text-anchor="middle" x="6217.5" y="-3530.25" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge29" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6385.32,-3573.46C6492.78,-3592.28 6635.69,-3615.16 6763,-3628.45 6892.29,-3641.95 7039.58,-3649.03 7148.26,-3652.69"/>
<polygon fill="black" stroke="black" points="7148.22,-3656.19 7158.33,-3653.02 7148.45,-3649.19 7148.22,-3656.19"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge30" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6455.53,-3570.26C6555.69,-3594.84 6663.62,-3640.98 6727,-3727.45 6781.83,-3802.26 6696.56,-4496.73 6763,-4561.45 6786.84,-4584.68 7681.67,-4588.21 8114.75,-4588.56"/>
<polygon fill="black" stroke="black" points="8114.9,-4592.06 8124.9,-4588.57 8114.9,-4585.06 8114.9,-4592.06"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge31" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6260.13,-3511.41C6347.72,-3448.09 6559.77,-3305.17 6763,-3247.45 6852.36,-3222.08 6953.2,-3211.6 7043.57,-3208.34"/>
<polygon fill="black" stroke="black" points="7043.81,-3211.83 7053.69,-3208 7043.58,-3204.84 7043.81,-3211.83"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge32" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6455.74,-3542.28C6773.81,-3541.45 7356.05,-3537.86 7853,-3523.45 8222.91,-3512.73 8651.93,-3490.99 8911.09,-3476.83"/>
<polygon fill="black" stroke="black" points="8911.6,-3480.31 8921.39,-3476.27 8911.21,-3473.32 8911.6,-3480.31"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge33" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6455.7,-3554C6631.42,-3562.56 6870.61,-3574.2 7050.71,-3582.97"/>
<polygon fill="black" stroke="black" points="7050.71,-3586.48 7060.86,-3583.47 7051.05,-3579.49 7050.71,-3586.48"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge34" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6409.86,-3511.41C6514.02,-3495.51 6645.31,-3477.11 6763,-3465.45 6867.66,-3455.09 6984.02,-3447.88 7082.18,-3443.04"/>
<polygon fill="black" stroke="black" points="7082.41,-3446.53 7092.23,-3442.55 7082.07,-3439.54 7082.41,-3446.53"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge35" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6334.48,-3511.42C6444.49,-3482.32 6614.57,-3438.21 6763,-3403.45 6890.42,-3373.62 7035.38,-3342.86 7143.61,-3320.52"/>
<polygon fill="black" stroke="black" points="7144.55,-3323.9 7153.63,-3318.45 7143.13,-3317.05 7144.55,-3323.9"/>
</g>
<!-- similar._iter_lots -->
<g id="node28" class="node">
<title>similar._iter_lots</title>
<g id="a_node28"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7462,-2286.95 7154,-2286.95 7154,-2239.95 7462,-2239.95 7462,-2286.95"/>
<text text-anchor="middle" x="7308" y="-2254.95" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge36" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7462.15,-2250.54C7603.93,-2242.34 7800.52,-2241.74 7853,-2295.45 7931.63,-2375.93 7847.85,-3202.73 7889,-3307.45 7973.01,-3521.25 8183.22,-3707.79 8286.24,-3789.91"/>
<polygon fill="black" stroke="black" points="8284.35,-3792.88 8294.36,-3796.35 8288.7,-3787.4 8284.35,-3792.88"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge37" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7420.69,-2239.93C7538.11,-2221.62 7723.43,-2211.61 7853,-2295.45 7882.04,-2314.24 7866.81,-2337.92 7889,-2364.45 8015.85,-2516.14 8218.4,-2643.89 8304.33,-2694.35"/>
<polygon fill="black" stroke="black" points="8302.61,-2697.39 8313.01,-2699.41 8306.14,-2691.35 8302.61,-2697.39"/>
</g>
<!-- lot_io.read_lots -->
<g id="node29" class="node">
<title>lot_io.read_lots</title>
<g id="a_node29"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8452,-2191.45 8240,-2191.45 8240,-2155.45 8452,-2155.45 8452,-2191.45"/>
<text text-anchor="middle" x="8346" y="-2167.29" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge38" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7462.06,-2244.76C7578.88,-2230.99 7743.91,-2212.62 7889,-2200.45 8004.78,-2190.74 8137.39,-2183.3 8229.65,-2178.72"/>
<polygon fill="black" stroke="black" points="8230.03,-2182.2 8239.85,-2178.21 8229.69,-2175.21 8230.03,-2182.2"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node30" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node30"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8474.5,-2246.95 8217.5,-2246.95 8217.5,-2209.95 8474.5,-2209.95 8474.5,-2246.95"/>
<text text-anchor="middle" x="8346" y="-2222.01" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge39" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7462.14,-2258.28C7663.36,-2251.48 8013.77,-2239.64 8207.1,-2233.11"/>
<polygon fill="black" stroke="black" points="8207.45,-2236.6 8217.32,-2232.77 8207.21,-2229.61 8207.45,-2236.6"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node31" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node31"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8513,-4160.45 8179,-4160.45 8179,-4124.45 8513,-4124.45 8513,-4160.45"/>
<text text-anchor="middle" x="8346" y="-4137.67" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge40" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7462.33,-2250.37C7604.25,-2242.03 7800.93,-2241.34 7853,-2295.45 7921.66,-2366.81 7823.36,-4003.32 7889,-4077.45 7975.02,-4174.6 8135.2,-4174.71 8240.96,-4161.76"/>
<polygon fill="black" stroke="black" points="8241.55,-4165.22 8251.02,-4160.47 8240.66,-4158.27 8241.55,-4165.22"/>
</g>
<!-- moderation.should_skip_lot -->
<g id="node32" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node32"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8484,-2355.45 8208,-2355.45 8208,-2319.45 8484,-2319.45 8484,-2355.45"/>
<text text-anchor="middle" x="8346" y="-2332.67" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge41" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7462.19,-2258.87C7572.27,-2258.85 7723.48,-2265.57 7853,-2295.45 7869.89,-2299.35 7872.11,-2306.55 7889,-2310.45 7990.39,-2333.87 8107.63,-2340.37 8197.84,-2341.15"/>
<polygon fill="black" stroke="black" points="8197.85,-2344.65 8207.87,-2341.22 8197.89,-2337.65 8197.85,-2344.65"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge53" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8452.46,-2166.64C8546.34,-2163.62 8686.46,-2166.66 8803,-2200.45 8927.46,-2236.54 9056.54,-2323.84 9114.71,-2366.37"/>
<polygon fill="black" stroke="black" points="9112.65,-2369.19 9122.77,-2372.31 9116.8,-2363.56 9112.65,-2369.19"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node44" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node44"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9205,-1308.45 9090,-1308.45 9090,-1272.45 9205,-1272.45 9205,-1308.45"/>
<text text-anchor="middle" x="9147.5" y="-1287.21" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge52" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8435.82,-2191.51C8540,-2206.95 8710.24,-2213.23 8803,-2114.45 8886.24,-2025.81 8786.02,-1677.9 8839,-1568.45 8897.66,-1447.25 9034.83,-1354.72 9104.42,-1313.69"/>
<polygon fill="black" stroke="black" points="9106.49,-1316.53 9113.37,-1308.47 9102.96,-1310.48 9106.49,-1316.53"/>
</g>
<!-- moderation.message_skip_reason -->
<g id="node77" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node77"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9442.5,-4227.95 8852.5,-4227.95 8852.5,-4182.95 9442.5,-4182.95 9442.5,-4227.95"/>
<text text-anchor="middle" x="9147.5" y="-4197.07" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge95" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8513.09,-4150.48C8599.59,-4155.11 8707.06,-4161.59 8803,-4169.45 8846.2,-4172.99 8892.39,-4177.4 8936.43,-4181.91"/>
<polygon fill="black" stroke="black" points="8936.08,-4185.39 8946.39,-4182.94 8936.8,-4178.43 8936.08,-4185.39"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node78" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node78"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9324,-1613.45 8971,-1613.45 8971,-1577.45 9324,-1577.45 9324,-1613.45"/>
<text text-anchor="middle" x="9147.5" y="-1589.58" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge96" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8484.26,-2348.26C8601.91,-2354.24 8759.15,-2353.3 8803,-2310.45 8872.69,-2242.35 8795.83,-1960.81 8839,-1873.45 8898.65,-1752.74 9035.36,-1659.98 9104.63,-1618.79"/>
<polygon fill="black" stroke="black" points="9106.69,-1621.64 9113.54,-1613.56 9103.14,-1615.61 9106.69,-1621.64"/>
</g>
<!-- similar.main -->
<g id="node33" class="node">
<title>similar.main</title>
<g id="a_node33"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6322.5,-1558.45 6112.5,-1558.45 6112.5,-1516.45 6322.5,-1516.45 6322.5,-1558.45"/>
<text text-anchor="middle" x="6217.5" y="-1529.36" font-family="Times,serif" font-size="31.36">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge42" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6322.67,-1553.91C6441.49,-1578.63 6631.61,-1637.51 6727,-1770.45 6817.13,-1896.07 6662.78,-1998.73 6763,-2116.45 6855.68,-2225.32 7019.83,-2257.79 7143.64,-2265.62"/>
<polygon fill="black" stroke="black" points="7143.8,-2269.13 7153.99,-2266.22 7144.21,-2262.14 7143.8,-2269.13"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node34" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node34"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8602,-2105.45 8090,-2105.45 8090,-2063.45 8602,-2063.45 8602,-2105.45"/>
<text text-anchor="middle" x="8346" y="-2076.36" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge43" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6322.54,-1556.06C6439.39,-1582.62 6625.88,-1643.05 6727,-1770.45 6776.91,-1833.33 6701.8,-1895.5 6763,-1947.45 6855.39,-2025.89 7747.49,-1928.82 7853,-1988.45 7878.43,-2002.83 7863.95,-2028.42 7889,-2043.45 7945.73,-2077.49 8013.76,-2093.73 8079.76,-2100.15"/>
<polygon fill="black" stroke="black" points="8079.64,-2103.65 8089.91,-2101.06 8080.26,-2096.68 8079.64,-2103.65"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node35" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node35"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7557,-1751.45 7059,-1751.45 7059,-1703.45 7557,-1703.45 7557,-1751.45"/>
<text text-anchor="middle" x="7308" y="-1718.33" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge44" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6322.87,-1555.67C6517.3,-1589.61 6935.42,-1662.59 7158.95,-1701.61"/>
<polygon fill="black" stroke="black" points="7158.66,-1705.11 7169.11,-1703.38 7159.87,-1698.22 7158.66,-1705.11"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node36" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node36"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7456,-1555.45 7160,-1555.45 7160,-1519.45 7456,-1519.45 7456,-1555.45"/>
<text text-anchor="middle" x="7308" y="-1532.15" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge45" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6322.87,-1537.45C6514.55,-1537.45 6923.63,-1537.45 7149.34,-1537.45"/>
<polygon fill="black" stroke="black" points="7149.62,-1540.95 7159.62,-1537.45 7149.62,-1533.95 7149.62,-1540.95"/>
</g>
<!-- similar_utils._save_more_user -->
<g id="node37" class="node">
<title>similar_utils._save_more_user</title>
<g id="a_node37"><a xlink:title="Write ``more_map`` to ``MORE_USER_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7475.5,-1609.45 7140.5,-1609.45 7140.5,-1573.45 7475.5,-1573.45 7475.5,-1609.45"/>
<text text-anchor="middle" x="7308" y="-1586.15" font-family="Times,serif" font-size="21.00">similar_utils._save_more_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_more_user -->
<g id="edge46" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_more_user</title>
<path fill="none" stroke="black" d="M6322.87,-1542.63C6509.27,-1551.88 6901.26,-1571.32 7130.28,-1582.69"/>
<polygon fill="black" stroke="black" points="7130.23,-1586.19 7140.39,-1583.19 7130.57,-1579.2 7130.23,-1586.19"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node38" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node38"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7447,-1501.45 7169,-1501.45 7169,-1465.45 7447,-1465.45 7447,-1501.45"/>
<text text-anchor="middle" x="7308" y="-1478.67" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge47" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6322.87,-1532.27C6517.17,-1522.64 6934.86,-1501.91 7158.5,-1490.82"/>
<polygon fill="black" stroke="black" points="7158.85,-1494.31 7168.67,-1490.32 7158.51,-1487.31 7158.85,-1494.31"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node39" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node39"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="8803,-1078.95 7889,-1078.95 7889,-1003.95 8803,-1003.95 8803,-1078.95"/>
<text text-anchor="middle" x="8346" y="-1026.46" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge48" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6246.08,-1516.28C6326.31,-1453.9 6564.18,-1263.09 6727,-1071.45 6745.92,-1049.19 6737.3,-1030.35 6763,-1016.45 6859.16,-964.47 7447.42,-986.8 7878.6,-1011.12"/>
<polygon fill="black" stroke="black" points="7878.58,-1014.63 7888.76,-1011.7 7878.97,-1007.64 7878.58,-1014.63"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node40" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node40"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7546.5,-1317.45 7069.5,-1317.45 7069.5,-1277.45 7546.5,-1277.45 7546.5,-1317.45"/>
<text text-anchor="middle" x="7308" y="-1290.38" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge49" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6322.53,-1542.26C6435.22,-1541.82 6614.02,-1523.91 6727,-1426.45 6761.19,-1396.96 6726.66,-1358.25 6763,-1331.45 6810.13,-1296.69 6938.85,-1287.6 7059.24,-1287.47"/>
<polygon fill="black" stroke="black" points="7059.37,-1290.97 7069.38,-1287.48 7059.38,-1283.97 7059.37,-1290.97"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node41" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node41"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="9456,-807.45 8839,-807.45 8839,-755.45 9456,-755.45 9456,-807.45"/>
<text text-anchor="middle" x="9147.5" y="-771.31" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge50" class="edge">
<title>similar.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M6252.35,-1516.31C6346.55,-1455.41 6612.32,-1269.07 6727,-1037.45 6755.33,-980.24 6715.12,-794.67 6763,-752.45 6801.17,-718.8 8188.11,-753.99 8828.4,-772.09"/>
<polygon fill="black" stroke="black" points="8828.61,-775.6 8838.71,-772.39 8828.81,-768.6 8828.61,-775.6"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge82" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8602.22,-2097.24C8669.2,-2106.45 8740.21,-2121.64 8803,-2146.45 8936.25,-2199.11 9066.68,-2314.03 9120.6,-2365.11"/>
<polygon fill="black" stroke="black" points="9118.34,-2367.79 9127.99,-2372.16 9123.18,-2362.73 9118.34,-2367.79"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge83" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7557.26,-1718.32C7957.28,-1706 8709.34,-1693.61 8803,-1770.45 8858.35,-1815.86 8810.74,-1861.68 8839,-1927.45 8917,-2108.97 9066.92,-2296.3 9123.83,-2364.03"/>
<polygon fill="black" stroke="black" points="9121.49,-2366.68 9130.61,-2372.06 9126.83,-2362.16 9121.49,-2366.68"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge85" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7456.2,-1523.32C7598.41,-1513.31 7799.88,-1509.93 7853,-1564.45 7911.99,-1624.99 7830.3,-3024.63 7889,-3085.45 7938.23,-3136.46 8141.11,-3129.39 8259.02,-3120.49"/>
<polygon fill="black" stroke="black" points="8259.4,-3123.97 8269.1,-3119.7 8258.86,-3116.99 8259.4,-3123.97"/>
</g>
<!-- notes_utils.write_json -->
<g id="node50" class="node">
<title>notes_utils.write_json</title>
<g id="a_node50"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="8440,-1678.45 8252,-1678.45 8252,-1642.45 8440,-1642.45 8440,-1678.45"/>
<text text-anchor="middle" x="8346" y="-1656.41" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge87" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7456.28,-1530.15C7593.91,-1525.92 7787.67,-1527.38 7853,-1564.45 7878.09,-1578.69 7864.22,-1603.69 7889,-1618.45 7996.36,-1682.41 8143.79,-1683.66 8241.62,-1675.1"/>
<polygon fill="black" stroke="black" points="8242.18,-1678.56 8251.81,-1674.16 8241.53,-1671.59 8242.18,-1678.56"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node72" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node72"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8448,-1555.45 8244,-1555.45 8244,-1519.45 8448,-1519.45 8448,-1555.45"/>
<text text-anchor="middle" x="8346" y="-1533.75" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge86" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7456.06,-1537.45C7665.66,-1537.45 8045.69,-1537.45 8233.62,-1537.45"/>
<polygon fill="black" stroke="black" points="8233.79,-1540.95 8243.79,-1537.45 8233.79,-1533.95 8233.79,-1540.95"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path -->
<g id="edge88" class="edge">
<title>similar_utils._save_more_user&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7460.4,-1573.45C7586.03,-1567.87 7758.81,-1583.7 7853,-1694.45 7903.08,-1753.34 7835.25,-3029.89 7889,-3085.45 7938.29,-3136.41 8141.15,-3129.36 8259.03,-3120.47"/>
<polygon fill="black" stroke="black" points="8259.42,-3123.95 8269.12,-3119.69 8258.88,-3116.97 8259.42,-3123.95"/>
</g>
<!-- similar_utils._save_more_user&#45;&gt;notes_utils.write_json -->
<g id="edge90" class="edge">
<title>similar_utils._save_more_user&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7475.71,-1600.55C7583.39,-1606.61 7726.51,-1614.98 7853,-1623.45 7987.27,-1632.45 8142.04,-1644.34 8241.57,-1652.18"/>
<polygon fill="black" stroke="black" points="8241.38,-1655.68 8251.63,-1652.98 8241.93,-1648.7 8241.38,-1655.68"/>
</g>
<!-- similar_utils._more_user_path -->
<g id="node73" class="node">
<title>similar_utils._more_user_path</title>
<g id="a_node73"><a xlink:title="Return cache file path for ``lot_path`` under ``MORE_USER_DIR``.">
<polygon fill="none" stroke="black" points="8461,-1609.45 8231,-1609.45 8231,-1573.45 8461,-1573.45 8461,-1609.45"/>
<text text-anchor="middle" x="8346" y="-1587.75" font-family="Times,serif" font-size="14.00">similar_utils._more_user_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path -->
<g id="edge89" class="edge">
<title>similar_utils._save_more_user&#45;&gt;similar_utils._more_user_path</title>
<path fill="none" stroke="black" d="M7475.74,-1591.45C7683.75,-1591.45 8034.65,-1591.45 8220.62,-1591.45"/>
<polygon fill="black" stroke="black" points="8220.72,-1594.95 8230.72,-1591.45 8220.72,-1587.95 8220.72,-1594.95"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node75" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node75"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9388.5,-1061.45 8906.5,-1061.45 8906.5,-1021.45 9388.5,-1021.45 9388.5,-1061.45"/>
<text text-anchor="middle" x="9147.5" y="-1034.38" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge91" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M8803.09,-1041.45C8834.89,-1041.45 8866.21,-1041.45 8896.21,-1041.45"/>
<polygon fill="black" stroke="black" points="8896.33,-1044.95 8906.33,-1041.45 8896.33,-1037.95 8896.33,-1044.95"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node70" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node70"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="9825,-597.45 9592,-597.45 9592,-561.45 9825,-561.45 9825,-597.45"/>
<text text-anchor="middle" x="9708.5" y="-574.66" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge92" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9428.49,-755.43C9437.84,-752.7 9447.04,-749.72 9456,-746.45 9546.16,-713.57 9636.01,-642.29 9679.87,-604.36"/>
<polygon fill="black" stroke="black" points="9682.28,-606.9 9687.51,-597.69 9677.68,-601.63 9682.28,-606.9"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node42" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node42"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-4853.45 0,-4853.45 0,-4817.45 282,-4817.45 282,-4853.45"/>
<text text-anchor="middle" x="141" y="-4831.41" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- debug_dump:cli -->
<g id="node43" class="node">
<title>debug_dump:cli</title>
<g id="a_node43"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4835.45" rx="41.11" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4833.85" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;debug_dump:cli -->
<!-- similar:cli -->
<g id="node174" class="node">
<title>similar:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4835.45" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4833.85" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;similar:cli -->
<!-- lot_io.valid_lots -->
<g id="node45" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node45"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="7410,-4952.45 7206,-4952.45 7206,-4916.45 7410,-4916.45 7410,-4952.45"/>
<text text-anchor="middle" x="7308" y="-4928.58" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node46" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node46"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8435.5,-4214.45 8256.5,-4214.45 8256.5,-4178.45 8435.5,-4178.45 8435.5,-4214.45"/>
<text text-anchor="middle" x="8346" y="-4192.41" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node47" class="node">
<title>lot_io.get_seller</title>
<g id="a_node47"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8446.5,-985.45 8245.5,-985.45 8245.5,-949.45 8446.5,-949.45 8446.5,-985.45"/>
<text text-anchor="middle" x="8346" y="-961.86" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- lot_io.get_timestamp -->
<g id="node48" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node48"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8505,-1213.45 8187,-1213.45 8187,-1173.45 8505,-1173.45 8505,-1213.45"/>
<text text-anchor="middle" x="8346" y="-1186.38" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node49" class="node">
<title>lot_io.write_lots</title>
<g id="a_node49"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7409.5,-1161.45 7206.5,-1161.45 7206.5,-1125.45 7409.5,-1125.45 7409.5,-1161.45"/>
<text text-anchor="middle" x="7308" y="-1137.86" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge54" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7409.66,-1140.47C7699.93,-1132.56 8534.93,-1114.89 8803,-1164.45 8914.03,-1184.98 9036.49,-1237.75 9100.97,-1268.09"/>
<polygon fill="black" stroke="black" points="9099.52,-1271.28 9110.05,-1272.4 9102.52,-1264.95 9099.52,-1271.28"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge55" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7409.66,-1159.35C7527.86,-1172.23 7724.11,-1174.9 7853,-1078.45 7885.52,-1054.12 7855.77,-1017.8 7889,-994.45 7942.83,-956.63 8118.42,-956.49 8235.34,-961.08"/>
<polygon fill="black" stroke="black" points="8235.27,-964.58 8245.41,-961.49 8235.56,-957.58 8235.27,-964.58"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge56" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7409.75,-1148.31C7587.69,-1156.9 7959.3,-1174.84 8176.71,-1185.33"/>
<polygon fill="black" stroke="black" points="8176.79,-1188.84 8186.94,-1185.82 8177.12,-1181.85 8176.79,-1188.84"/>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge57" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7409.73,-1134.39C7549.6,-1124.23 7792.33,-1116.13 7853,-1175.45 7923.62,-1244.51 7819.54,-1548.24 7889,-1618.45 7986.26,-1716.77 8161.9,-1700.86 8264.48,-1680.57"/>
<polygon fill="black" stroke="black" points="8265.38,-1683.96 8274.48,-1678.53 8263.99,-1677.1 8265.38,-1683.96"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node51" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node51"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8438.5,-1815.45 8253.5,-1815.45 8253.5,-1779.45 8438.5,-1779.45 8438.5,-1815.45"/>
<text text-anchor="middle" x="8346" y="-1792.67" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.embedding_path -->
<g id="node53" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node53"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8452.5,-1409.45 8239.5,-1409.45 8239.5,-1373.45 8452.5,-1373.45 8452.5,-1409.45"/>
<text text-anchor="middle" x="8346" y="-1387.29" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node54" class="node">
<title>lot_io.get_lot</title>
<g id="a_node54"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7380.5,-1447.45 7235.5,-1447.45 7235.5,-1411.45 7380.5,-1411.45 7380.5,-1447.45"/>
<text text-anchor="middle" x="7308" y="-1424.66" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge59" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7380.64,-1421.79C7513.04,-1409.36 7788.44,-1392.22 7853,-1456.45 7956.81,-1559.74 7789.35,-2007.14 7889,-2114.45 7933.73,-2162.62 8109.65,-2173.23 8229.44,-2174.67"/>
<polygon fill="black" stroke="black" points="8229.73,-2178.18 8239.77,-2174.78 8229.8,-2171.18 8229.73,-2178.18"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge60" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7380.69,-1428.64C7663.21,-1426.06 8689.73,-1422.85 8803,-1510.45 8844.36,-1542.44 8810.64,-1578.53 8839,-1622.45 8912.64,-1736.49 9044.71,-1833.41 9109.12,-1876.52"/>
<polygon fill="black" stroke="black" points="9107.48,-1879.63 9117.75,-1882.24 9111.35,-1873.8 9107.48,-1879.63"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node55" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node55"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7422.5,-4254.45 7193.5,-4254.45 7193.5,-4218.45 7422.5,-4218.45 7422.5,-4254.45"/>
<text text-anchor="middle" x="7308" y="-4232.41" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node56" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node56"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8429.5,-4068.45 8262.5,-4068.45 8262.5,-4032.45 8429.5,-4032.45 8429.5,-4068.45"/>
<text text-anchor="middle" x="8346" y="-4046.75" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge61" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7380.79,-4254.47C7493.02,-4278.16 7711.78,-4305.83 7853,-4204.45 7887.66,-4179.57 7855.4,-4141.75 7889,-4115.45 7992.81,-4034.22 8151.99,-4030.65 8252.2,-4038.41"/>
<polygon fill="black" stroke="black" points="8252.06,-4041.91 8262.31,-4039.24 8252.64,-4034.93 8252.06,-4041.91"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge282" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8429.55,-4045.29C8584.09,-4035.63 8915.15,-4014.92 9067.19,-4005.41"/>
<polygon fill="black" stroke="black" points="9067.62,-4008.89 9077.38,-4004.78 9067.18,-4001.91 9067.62,-4008.89"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge283" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8429.75,-4063.66C8525.44,-4074.81 8684.93,-4080.38 8803,-4018.45 8825.68,-4006.56 8817.98,-3988.09 8839,-3973.45 8897.06,-3933.03 8972.29,-3907.71 9033.81,-3892.41"/>
<polygon fill="black" stroke="black" points="9034.67,-3895.8 9043.56,-3890.03 9033.01,-3889 9034.67,-3895.8"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node57" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node57"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6335,-4016.45 6100,-4016.45 6100,-3980.45 6335,-3980.45 6335,-4016.45"/>
<text text-anchor="middle" x="6217.5" y="-3994.41" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge62" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6335.25,-3997.81C6542.58,-3996.67 6973.06,-3994.29 7184.47,-3993.13"/>
<polygon fill="black" stroke="black" points="7184.69,-3996.63 7194.67,-3993.07 7184.66,-3989.63 7184.69,-3996.63"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node58" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node58"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6675.5,-2254.95 5759.5,-2254.95 5759.5,-2183.95 6675.5,-2183.95 6675.5,-2254.95"/>
<text text-anchor="middle" x="6217.5" y="-2204.81" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge63" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6379.45,-2183.93C6493.26,-2169.18 6640.44,-2172.95 6727,-2264.45 6810.74,-2352.96 6677.13,-3274.01 6763,-3360.45 6848.42,-3446.44 7740.41,-3358.56 7853,-3403.45 8059.83,-3485.92 8238.46,-3694.91 8310.75,-3788.23"/>
<polygon fill="black" stroke="black" points="8308.13,-3790.56 8317,-3796.35 8313.68,-3786.29 8308.13,-3790.56"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge64" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6675.73,-2228C6694.06,-2238.06 6711.29,-2250.11 6727,-2264.45 6793.37,-2325.06 6695.17,-2404.48 6763,-2463.45 6854.47,-2542.97 7734.78,-2479.73 7853,-2506.45 8030.2,-2546.5 8223.63,-2648.41 8305.21,-2694.36"/>
<polygon fill="black" stroke="black" points="8303.7,-2697.53 8314.13,-2699.41 8307.16,-2691.44 8303.7,-2697.53"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge65" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6675.67,-2209.56C7174.77,-2198.77 7941.4,-2182.18 8229.91,-2175.94"/>
<polygon fill="black" stroke="black" points="8230.05,-2179.44 8239.97,-2175.72 8229.9,-2172.44 8230.05,-2179.44"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node59" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node59"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7526,-1069.45 7090,-1069.45 7090,-1025.45 7526,-1025.45 7526,-1069.45"/>
<text text-anchor="middle" x="7308" y="-1039.13" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge66" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6379.72,-2254.99C6493.47,-2269.67 6640.46,-2265.82 6727,-2174.45 6807.89,-2089.05 6683.75,-1203.37 6763,-1116.45 6869.8,-999.33 7067.77,-1005.37 7193.16,-1023.91"/>
<polygon fill="black" stroke="black" points="7192.77,-1027.39 7203.18,-1025.44 7193.83,-1020.47 7192.77,-1027.39"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node60" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node60"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7520.5,-4552.45 7095.5,-4552.45 7095.5,-4516.45 7520.5,-4516.45 7520.5,-4552.45"/>
<text text-anchor="middle" x="7308" y="-4528.58" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge67" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6376.61,-2183.94C6491.09,-2168.47 6640.38,-2171.34 6727,-2264.45 6811.89,-2355.7 6676.37,-4417.86 6763,-4507.45 6807.16,-4553.12 6954.85,-4558.29 7085.21,-4552.89"/>
<polygon fill="black" stroke="black" points="7085.52,-4556.38 7095.36,-4552.44 7085.22,-4549.38 7085.52,-4556.38"/>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge97" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7526.1,-1025.95C7634.97,-1015.6 7768.89,-1003.49 7889,-994.45 8007.15,-985.56 8142.7,-977.85 8235.1,-972.97"/>
<polygon fill="black" stroke="black" points="8235.51,-976.46 8245.31,-972.44 8235.14,-969.47 8235.51,-976.46"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge194" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7520.5,-4551.62C7652.71,-4557.28 7806.43,-4552.89 7853,-4507.45 7930.2,-4432.13 7825.8,-4110.85 7889,-4023.45 7943.39,-3948.23 8033.39,-3902.83 8119.12,-3875.48"/>
<polygon fill="black" stroke="black" points="8120.24,-3878.8 8128.74,-3872.48 8118.16,-3872.12 8120.24,-3878.8"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge196" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7520.73,-4538.66C7622.15,-4536.95 7744.8,-4529.4 7853,-4507.45 8022.26,-4473.11 8211.11,-4390.69 8297.37,-4350.4"/>
<polygon fill="black" stroke="black" points="8299.06,-4353.47 8306.63,-4346.05 8296.09,-4347.13 8299.06,-4353.47"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node67" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node67"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8495.5,-4552.45 8196.5,-4552.45 8196.5,-4516.45 8495.5,-4516.45 8495.5,-4552.45"/>
<text text-anchor="middle" x="8346" y="-4529.66" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge195" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7520.52,-4534.45C7717.76,-4534.45 8007.57,-4534.45 8185.86,-4534.45"/>
<polygon fill="black" stroke="black" points="8186.11,-4537.95 8196.11,-4534.45 8186.11,-4530.95 8186.11,-4537.95"/>
</g>
<!-- scan_ontology.main -->
<g id="node61" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5624,-1665.95 5169,-1665.95 5169,-1608.95 5624,-1608.95 5624,-1665.95"/>
<text text-anchor="middle" x="5396.5" y="-1626.56" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge70" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5624.2,-1639.22C6221.16,-1643.88 7819.61,-1656.35 8241.64,-1659.65"/>
<polygon fill="black" stroke="black" points="8241.66,-1663.15 8251.69,-1659.72 8241.72,-1656.15 8241.66,-1663.15"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge68" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5517.38,-1666.03C5573.59,-1685.8 5635.97,-1718.27 5672,-1770.45 5723.21,-1844.63 5644.25,-2110.74 5708,-2174.45 5791.28,-2257.68 5925.07,-2266.65 6034.52,-2256.01"/>
<polygon fill="black" stroke="black" points="6035.11,-2259.47 6044.69,-2254.96 6034.39,-2252.51 6035.11,-2259.47"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node62" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node62"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6404,-453.45 6031,-453.45 6031,-417.45 6404,-417.45 6404,-453.45"/>
<text text-anchor="middle" x="6217.5" y="-429.29" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge69" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5615.5,-1608.86C5637.21,-1597.99 5656.8,-1583.55 5672,-1564.45 5745.81,-1471.73 5628.03,-585.92 5708,-498.45 5812.69,-383.94 6010.77,-396.22 6126.38,-415.68"/>
<polygon fill="black" stroke="black" points="6125.83,-419.14 6136.28,-417.4 6127.02,-412.24 6125.83,-419.14"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node121" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node121"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7423.5,-157.45 7192.5,-157.45 7192.5,-121.45 7423.5,-121.45 7423.5,-157.45"/>
<text text-anchor="middle" x="7308" y="-135.41" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge180" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6268.3,-417.43C6363.51,-383.38 6578.32,-308.54 6763,-258.45 6913.65,-217.6 7090.67,-180.94 7200.86,-159.44"/>
<polygon fill="black" stroke="black" points="7201.84,-162.81 7210.98,-157.47 7200.5,-155.94 7201.84,-162.81"/>
</g>
<!-- config_utils.load_config -->
<g id="node63" class="node">
<title>config_utils.load_config</title>
<g id="a_node63"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="9925,-3954.95 9492,-3954.95 9492,-3907.95 9925,-3907.95 9925,-3954.95"/>
<text text-anchor="middle" x="9708.5" y="-3922.95" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- chop.has_misc_deal -->
<g id="node64" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node64"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="8460,-5128.45 8232,-5128.45 8232,-5092.45 8460,-5092.45 8460,-5128.45"/>
<text text-anchor="middle" x="8346" y="-5105.15" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node65" class="node">
<title>chop.process_message</title>
<g id="a_node65"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6718.5,-4863.45 5716.5,-4863.45 5716.5,-4761.45 6718.5,-4761.45 6718.5,-4863.45"/>
<text text-anchor="middle" x="6217.5" y="-4791.13" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge71" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6279.53,-4761.21C6382.22,-4672.58 6591.6,-4481.27 6727,-4285.45 6748.26,-4254.71 6731.79,-4230.01 6763,-4209.45 6864.2,-4142.78 7762.01,-4249.51 7853,-4169.45 7926.4,-4104.88 7823.01,-4024.58 7889,-3952.45 7933.1,-3904.25 7994.1,-3874.64 8057.14,-3856.71"/>
<polygon fill="black" stroke="black" points="8058.14,-3860.07 8066.86,-3854.04 8056.29,-3853.32 8058.14,-3860.07"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge79" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6718.69,-4862.07C6733.62,-4862.96 6748.42,-4863.76 6763,-4864.45 7246.9,-4887.51 7369.42,-4893.34 7853,-4864.45 7995.45,-4855.94 8159.87,-4833.69 8257.97,-4819.08"/>
<polygon fill="black" stroke="black" points="8258.76,-4822.5 8268.13,-4817.55 8257.73,-4815.57 8258.76,-4822.5"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge80" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6718.62,-4820.82C7183.51,-4826.19 7810.69,-4826.24 7853,-4788.45 7946.91,-4704.58 7811.69,-4606.83 7889,-4507.45 7960.82,-4415.13 8086.93,-4370.06 8188.36,-4348.11"/>
<polygon fill="black" stroke="black" points="8189.34,-4351.48 8198.4,-4346 8187.9,-4344.63 8189.34,-4351.48"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge75" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6273.03,-4761.4C6365.39,-4678.66 6562.24,-4518.02 6763,-4453.45 6878.38,-4416.34 7762.76,-4491.37 7853,-4410.45 7933.63,-4338.15 7809.08,-4242.54 7889,-4169.45 7929.29,-4132.6 8058.17,-4127.58 8168.68,-4130.81"/>
<polygon fill="black" stroke="black" points="8168.87,-4134.32 8178.98,-4131.14 8169.09,-4127.32 8168.87,-4134.32"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge72" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6492.28,-4863.47C6578.63,-4878.01 6674.56,-4892.57 6763,-4902.45 6912.3,-4919.14 7085.69,-4927.43 7195.84,-4931.33"/>
<polygon fill="black" stroke="black" points="7195.85,-4934.83 7205.97,-4931.68 7196.1,-4927.84 7195.85,-4934.83"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge73" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6718.59,-4786.93C7195.41,-4762.02 7842.72,-4726.45 7853,-4716.45 7919.67,-4651.59 7827.85,-4369.54 7889,-4299.45 7977,-4198.59 8140.88,-4184.94 8246.34,-4187.99"/>
<polygon fill="black" stroke="black" points="8246.25,-4191.49 8256.36,-4188.33 8246.49,-4184.49 8246.25,-4191.49"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge74" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6404.95,-4863.52C6508.84,-4899.18 6635.33,-4955.31 6727,-5037.45 6750.73,-5058.72 6735.44,-5083.46 6763,-5099.45 6887.64,-5171.78 7871.13,-5132.91 8221.54,-5116.56"/>
<polygon fill="black" stroke="black" points="8221.89,-5120.04 8231.72,-5116.08 8221.57,-5113.05 8221.89,-5120.04"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node66" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node66"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="9265.5,-5174.45 9029.5,-5174.45 9029.5,-5138.45 9265.5,-5138.45 9265.5,-5174.45"/>
<text text-anchor="middle" x="9147.5" y="-5152.41" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge76" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6428.2,-4863.5C6530.11,-4897.76 6647.44,-4952.59 6727,-5037.45 6758.74,-5071.3 6725.07,-5108.73 6763,-5135.45 6809.45,-5168.18 8531.39,-5160.2 9019.01,-5157.28"/>
<polygon fill="black" stroke="black" points="9019.28,-5160.78 9029.25,-5157.22 9019.23,-5153.78 9019.28,-5160.78"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge77" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6718.81,-4825.81C6733.71,-4826.05 6748.46,-4826.27 6763,-4826.45 6884.1,-4828.01 7761.78,-4906.12 7853,-4826.45 7942.52,-4748.27 7801.83,-4642.25 7889,-4561.45 7931.2,-4522.34 8072.09,-4518.89 8186.22,-4523.25"/>
<polygon fill="black" stroke="black" points="8186.35,-4526.75 8196.48,-4523.66 8186.63,-4519.76 8186.35,-4526.75"/>
</g>
<!-- embed.embed_file -->
<g id="node68" class="node">
<title>embed.embed_file</title>
<g id="a_node68"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7513,-1824.95 7103,-1824.95 7103,-1769.95 7513,-1769.95 7513,-1824.95"/>
<text text-anchor="middle" x="7308" y="-1786.9" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge78" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6296.83,-4761.14C6415.95,-4677.9 6638.16,-4500.83 6727,-4285.45 6752.56,-4223.48 6718.58,-1922.66 6763,-1872.45 6854.25,-1769.32 7015.71,-1758.69 7139.1,-1769.01"/>
<polygon fill="black" stroke="black" points="7139.14,-1772.53 7149.41,-1769.93 7139.76,-1765.56 7139.14,-1772.53"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge197" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7513.26,-1770.65C7628.12,-1767.59 7765.57,-1785.95 7853,-1872.45 7930.3,-1948.93 7811.38,-2038.3 7889,-2114.45 7979.71,-2203.46 8133.95,-2204.58 8237.62,-2192.7"/>
<polygon fill="black" stroke="black" points="8238.29,-2196.15 8247.8,-2191.48 8237.46,-2189.2 8238.29,-2196.15"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge199" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7513.08,-1789.99C7615.44,-1784.62 7741.13,-1775.56 7853,-1760.45 7998.1,-1740.86 8164.62,-1703.92 8261.97,-1680.84"/>
<polygon fill="black" stroke="black" points="8262.83,-1684.23 8271.75,-1678.51 8261.21,-1677.42 8262.83,-1684.23"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge198" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7513.06,-1797.45C7733.02,-1797.45 8074.22,-1797.45 8243.13,-1797.45"/>
<polygon fill="black" stroke="black" points="8243.27,-1800.95 8253.27,-1797.45 8243.27,-1793.95 8243.27,-1800.95"/>
</g>
<!-- chop.main -->
<g id="node69" class="node">
<title>chop.main</title>
<g id="a_node69"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5472,-4368.45 5321,-4368.45 5321,-4332.45 5472,-4332.45 5472,-4368.45"/>
<text text-anchor="middle" x="5396.5" y="-4344.29" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge81" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5429.61,-4368.56C5543.6,-4432.87 5931.91,-4651.91 6116.92,-4756.28"/>
<polygon fill="black" stroke="black" points="6115.41,-4759.45 6125.84,-4761.31 6118.85,-4753.35 6115.41,-4759.45"/>
</g>
<!-- similar_utils._format_vector -->
<g id="node71" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node71"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8474.5,-2301.45 8217.5,-2301.45 8217.5,-2265.45 8474.5,-2265.45 8474.5,-2301.45"/>
<text text-anchor="middle" x="8346" y="-2279.29" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- similar_utils._load_more_user -->
<g id="node74" class="node">
<title>similar_utils._load_more_user</title>
<g id="a_node74"><a xlink:title="Return cached per&#45;user lot mapping.">
<polygon fill="none" stroke="black" points="8605,-2034.95 8087,-2034.95 8087,-1989.95 8605,-1989.95 8605,-2034.95"/>
<text text-anchor="middle" x="8346" y="-2004.07" font-family="Times,serif" font-size="33.60">similar_utils._load_more_user</text>
</a>
</g>
</g>
<!-- similar_utils._load_more_user&#45;&gt;notes_utils.load_json -->
<g id="edge84" class="edge">
<title>similar_utils._load_more_user&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8605.25,-2005.84C8672.04,-2012.18 8742.2,-2026.34 8803,-2054.45 8957.76,-2126.01 9084.36,-2297.48 9129.11,-2363.71"/>
<polygon fill="black" stroke="black" points="9126.41,-2365.97 9134.88,-2372.34 9132.23,-2362.08 9126.41,-2365.97"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node76" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node76"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="9852.5,-4250.45 9564.5,-4250.45 9564.5,-4214.45 9852.5,-4214.45 9852.5,-4250.45"/>
<text text-anchor="middle" x="9708.5" y="-4227.67" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge94" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9442.73,-4191.24C9488.8,-4189.02 9534.34,-4186.82 9574.31,-4184.89"/>
<polygon fill="black" stroke="black" points="9574.54,-4188.38 9584.35,-4184.4 9574.2,-4181.39 9574.54,-4188.38"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge93" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9442.73,-4219.66C9481.16,-4221.52 9519.21,-4223.36 9553.97,-4225.04"/>
<polygon fill="black" stroke="black" points="9554.01,-4228.54 9564.17,-4225.53 9554.35,-4221.55 9554.01,-4228.54"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node79" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node79"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7564,-2670.45 7052,-2670.45 7052,-2624.45 7564,-2624.45 7564,-2670.45"/>
<text text-anchor="middle" x="7308" y="-2639.01" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge98" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7564.24,-2634.56C7668.88,-2643.57 7781.89,-2674.37 7853,-2755.45 7934.05,-2847.87 7842.35,-3193.72 7889,-3307.45 7976.28,-3520.25 8185.39,-3707.61 8287.26,-3789.97"/>
<polygon fill="black" stroke="black" points="8285.31,-3792.89 8295.29,-3796.43 8289.69,-3787.44 8285.31,-3792.89"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge99" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7564.09,-2664.69C7790.61,-2679.99 8108.39,-2701.47 8259.14,-2711.65"/>
<polygon fill="black" stroke="black" points="8259.05,-2715.15 8269.27,-2712.34 8259.53,-2708.17 8259.05,-2715.15"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge100" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7544.38,-2624.43C7654.33,-2601.22 7777.37,-2555.03 7853,-2463.45 7928.13,-2372.49 7802.43,-2280.61 7889,-2200.45 7992.94,-2104.21 8173.82,-2129.13 8273.68,-2152.98"/>
<polygon fill="black" stroke="black" points="8273.13,-2156.45 8283.68,-2155.43 8274.8,-2149.65 8273.13,-2156.45"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge101" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7564.3,-2633.18C7669.61,-2641.79 7783.13,-2672.67 7853,-2755.45 7947.78,-2867.74 7791.2,-3967.78 7889,-4077.45 7975.1,-4174.01 8134.49,-4174.49 8240.15,-4161.76"/>
<polygon fill="black" stroke="black" points="8240.72,-4165.21 8250.21,-4160.49 8239.85,-4158.27 8240.72,-4165.21"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge102" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7386.02,-2624.41C7580.32,-2566.27 8088.17,-2414.3 8274.84,-2358.45"/>
<polygon fill="black" stroke="black" points="8275.97,-2361.76 8284.55,-2355.54 8273.97,-2355.05 8275.97,-2361.76"/>
</g>
<!-- telegram_bot._t -->
<g id="node80" class="node">
<title>telegram_bot._t</title>
<g id="a_node80"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5500.5,-134.45 5292.5,-134.45 5292.5,-98.45 5500.5,-98.45 5500.5,-134.45"/>
<text text-anchor="middle" x="5396.5" y="-110.58" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node81" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node81"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5547.5,-188.45 5245.5,-188.45 5245.5,-152.45 5547.5,-152.45 5547.5,-188.45"/>
<text text-anchor="middle" x="5396.5" y="-165.66" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node82" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node82"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6321.5,-211.45 6113.5,-211.45 6113.5,-175.45 6321.5,-175.45 6321.5,-211.45"/>
<text text-anchor="middle" x="6217.5" y="-189.75" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge103" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5547.72,-174.67C5708.04,-179.17 5958.43,-186.21 6103.03,-190.27"/>
<polygon fill="black" stroke="black" points="6103.16,-193.77 6113.26,-190.55 6103.36,-186.77 6103.16,-193.77"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node83" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node83"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5547.5,-1011.45 5245.5,-1011.45 5245.5,-975.45 5547.5,-975.45 5547.5,-1011.45"/>
<text text-anchor="middle" x="5396.5" y="-988.15" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge104" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5445.9,-1011.46C5627.97,-1076.01 6283.85,-1279.39 6727,-1037.45 6752.97,-1023.27 6737.29,-996.1 6763,-981.45 6980.55,-857.49 7638.65,-945.01 7889,-940.45 8295.15,-933.06 8397.39,-918.16 8803,-940.45 9094.54,-956.48 9230.57,-826.88 9456,-1012.45 9582.99,-1116.99 9680.98,-1658.5 9702.9,-1788.41"/>
<polygon fill="black" stroke="black" points="9699.46,-1789.09 9704.56,-1798.37 9706.36,-1787.93 9699.46,-1789.09"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node84" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node84"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="9291,-683.45 9004,-683.45 9004,-647.45 9291,-647.45 9291,-683.45"/>
<text text-anchor="middle" x="9147.5" y="-659.76" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge105" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9238.47,-647.45C9306.34,-639.4 9397.43,-641.18 9456,-692.45 9628.81,-843.75 9693.99,-1628.6 9705.56,-1788.14"/>
<polygon fill="black" stroke="black" points="9702.07,-1788.4 9706.27,-1798.13 9709.05,-1787.9 9702.07,-1788.4"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node85" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6301.5,-2309.45 6133.5,-2309.45 6133.5,-2273.45 6301.5,-2273.45 6301.5,-2309.45"/>
<text text-anchor="middle" x="6217.5" y="-2288.21" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node86" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node86"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7454,-2107.45 7162,-2107.45 7162,-2071.45 7454,-2071.45 7454,-2107.45"/>
<text text-anchor="middle" x="7308" y="-2085.29" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge106" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7454.14,-2088.75C7615.9,-2087.97 7880.85,-2086.69 8079.84,-2085.73"/>
<polygon fill="black" stroke="black" points="8079.88,-2089.23 8089.86,-2085.68 8079.85,-2082.23 8079.88,-2089.23"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node87" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="9309,-395.45 8986,-395.45 8986,-359.45 9309,-359.45 9309,-395.45"/>
<text text-anchor="middle" x="9147.5" y="-372.66" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge107" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M9198.6,-395.56C9301.61,-432.78 9536.8,-517.77 9647.62,-557.82"/>
<polygon fill="black" stroke="black" points="9646.72,-561.21 9657.31,-561.32 9649.1,-554.63 9646.72,-561.21"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node88" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5635,-284.45 5158,-284.45 5158,-244.45 5635,-244.45 5635,-284.45"/>
<text text-anchor="middle" x="5396.5" y="-257.38" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge108" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5562.3,-244.44C5598.46,-239.94 5636.53,-235.11 5672,-230.45 5688.02,-228.35 5691.93,-227.07 5708,-225.45 5843.43,-211.81 5999.77,-203 6102.95,-198.15"/>
<polygon fill="black" stroke="black" points="6103.25,-201.64 6113.08,-197.68 6102.93,-194.65 6103.25,-201.64"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge109" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5635.07,-257.85C6073.55,-247.01 7039.55,-229.38 7853,-258.45 8276.03,-273.57 8382.23,-280.22 8803,-326.45 8878.67,-334.77 8963.26,-347.29 9029.56,-357.84"/>
<polygon fill="black" stroke="black" points="9029.2,-361.33 9039.63,-359.45 9030.3,-354.41 9029.2,-361.33"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node89" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node89"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5672,-699.45 5121,-699.45 5121,-647.45 5672,-647.45 5672,-699.45"/>
<text text-anchor="middle" x="5396.5" y="-663.76" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge110" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5539.25,-699.5C5586.56,-714.33 5636.26,-737.46 5672,-773.45 5705.58,-807.27 5669.57,-846.27 5708,-874.45 5799.36,-941.46 6644.93,-834.34 6727,-912.45 6793.89,-976.12 6701.06,-1257.96 6763,-1326.45 6879.84,-1455.65 7103.86,-1453.55 7224.77,-1441.29"/>
<polygon fill="black" stroke="black" points="7225.5,-1444.74 7235.07,-1440.2 7224.76,-1437.78 7225.5,-1444.74"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge111" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5410.36,-647.41C5446.45,-577.24 5556.1,-383.43 5708,-292.45 5829.77,-219.52 5994.66,-198.88 6103.23,-193.79"/>
<polygon fill="black" stroke="black" points="6103.39,-197.28 6113.23,-193.35 6103.09,-190.29 6103.39,-197.28"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node90" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node90"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5005.5,-1011.45 4675.5,-1011.45 4675.5,-975.45 5005.5,-975.45 5005.5,-1011.45"/>
<text text-anchor="middle" x="4840.5" y="-987.29" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge112" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5005.84,-993.45C5078.36,-993.45 5163.29,-993.45 5235.31,-993.45"/>
<polygon fill="black" stroke="black" points="5235.39,-996.95 5245.39,-993.45 5235.39,-989.95 5235.39,-996.95"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node91" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node91"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="4952.5,-161.45 4728.5,-161.45 4728.5,-125.45 4952.5,-125.45 4952.5,-161.45"/>
<text text-anchor="middle" x="4840.5" y="-139.29" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge113" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4952.61,-138.04C5048.25,-133.38 5185.66,-126.68 5281.99,-121.98"/>
<polygon fill="black" stroke="black" points="5282.24,-125.48 5292.06,-121.49 5281.9,-118.48 5282.24,-125.48"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge114" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4952.61,-148.87C5033.67,-152.82 5144.74,-158.23 5235.37,-162.65"/>
<polygon fill="black" stroke="black" points="5235.31,-166.15 5245.47,-163.14 5235.66,-159.16 5235.31,-166.15"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node92" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node92"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5015,-106.95 4666,-106.95 4666,-67.95 5015,-67.95 5015,-106.95"/>
<text text-anchor="middle" x="4840.5" y="-80.55" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge115" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5015.27,-96.55C5102.28,-101.1 5205.14,-106.49 5281.92,-110.51"/>
<polygon fill="black" stroke="black" points="5281.94,-114.01 5292.11,-111.04 5282.3,-107.02 5281.94,-114.01"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge116" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5015.27,-96.79C5039.2,-101.33 5063.07,-107.67 5085,-116.45 5103.57,-123.89 5102.36,-136.21 5121,-143.45 5156.64,-157.31 5196.76,-165.15 5235.1,-169.38"/>
<polygon fill="black" stroke="black" points="5235.02,-172.89 5245.33,-170.42 5235.74,-165.92 5235.02,-172.89"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge117" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4900.22,-67.92C5044.82,-23.68 5424.34,68.57 5672,-89.45 5703.85,-109.77 5676.68,-145.33 5708,-166.45 5770.2,-208.39 5973.39,-206.59 6103.31,-200.61"/>
<polygon fill="black" stroke="black" points="6103.49,-204.11 6113.31,-200.14 6103.16,-197.12 6103.49,-204.11"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node93" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node93"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5055.5,-220.95 4625.5,-220.95 4625.5,-179.95 5055.5,-179.95 5055.5,-220.95"/>
<text text-anchor="middle" x="4840.5" y="-193.21" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge118" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5055.62,-180.61C5065.67,-177.64 5075.52,-174.27 5085,-170.45 5103.55,-162.98 5102.36,-150.7 5121,-143.45 5171.73,-123.73 5231.53,-116.2 5282.35,-113.92"/>
<polygon fill="black" stroke="black" points="5282.53,-117.42 5292.38,-113.53 5282.26,-110.42 5282.53,-117.42"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge119" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5055.69,-188.85C5115.44,-185.62 5179.3,-182.16 5235.34,-179.13"/>
<polygon fill="black" stroke="black" points="5235.56,-182.62 5245.35,-178.58 5235.18,-175.63 5235.56,-182.62"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge120" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5055.73,-199.9C5223.44,-199.41 5462.57,-198.6 5672,-197.45 5821.08,-196.64 5993.12,-195.31 6103.25,-194.41"/>
<polygon fill="black" stroke="black" points="6103.41,-197.91 6113.38,-194.32 6103.35,-190.91 6103.41,-197.91"/>
</g>
<!-- telegram_bot.main -->
<g id="node94" class="node">
<title>telegram_bot.main</title>
<g id="a_node94"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5006,-957.45 4675,-957.45 4675,-913.45 5006,-913.45 5006,-957.45"/>
<text text-anchor="middle" x="4840.5" y="-927.13" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge121" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5006.22,-952.7C5078.57,-960.27 5163.22,-969.13 5235.07,-976.66"/>
<polygon fill="black" stroke="black" points="5234.81,-980.15 5245.12,-977.71 5235.54,-973.19 5234.81,-980.15"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge122" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M4942.24,-913.44C4989.82,-899.01 5044.83,-876.03 5085,-840.45 5110.31,-818.04 5093.05,-792.47 5121,-773.45 5324.85,-634.71 5449.36,-814.46 5672,-708.45 5692.15,-698.86 5687.33,-681.87 5708,-673.45 5861.8,-610.8 8346.78,-651.03 8993.59,-662.62"/>
<polygon fill="black" stroke="black" points="8993.84,-666.12 9003.9,-662.8 8993.97,-659.12 8993.84,-666.12"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge123" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5006.09,-925.27C5036.09,-931.34 5064.38,-943.73 5085,-966.45 5174.36,-1064.89 5033.81,-2062.09 5121,-2162.45 5380.98,-2461.73 5936.81,-2361.35 6140.05,-2311.97"/>
<polygon fill="black" stroke="black" points="6141.16,-2315.3 6150.04,-2309.52 6139.49,-2308.5 6141.16,-2315.3"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge124" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M5006.19,-925.52C5036.1,-931.61 5064.31,-943.94 5085,-966.45 5149.55,-1036.72 5056.59,-1754.05 5121,-1824.45 5258.16,-1974.37 6675.26,-2058.06 7151.71,-2082.12"/>
<polygon fill="black" stroke="black" points="7151.59,-2085.61 7161.75,-2082.62 7151.94,-2078.62 7151.59,-2085.61"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge125" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M4965.1,-913.42C5009.02,-899.55 5054.98,-877.01 5085,-840.45 5142.88,-769.98 5085.09,-722.28 5121,-638.45 5183.38,-492.85 5311.92,-350.23 5368.15,-291.94"/>
<polygon fill="black" stroke="black" points="5370.82,-294.22 5375.28,-284.61 5365.8,-289.34 5370.82,-294.22"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge126" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M4958.2,-913.38C5003.33,-899.41 5051.97,-876.81 5085,-840.45 5124.45,-797.03 5076.88,-752.12 5121,-713.45 5124.26,-710.6 5127.63,-707.89 5131.1,-705.33"/>
<polygon fill="black" stroke="black" points="5133.13,-708.18 5139.36,-699.61 5129.15,-702.42 5133.13,-708.18"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node95" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node95"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="8525.5,-371.45 8166.5,-371.45 8166.5,-335.45 8525.5,-335.45 8525.5,-371.45"/>
<text text-anchor="middle" x="8346" y="-347.76" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node96" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node96"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6535,-1028.95 5900,-1028.95 5900,-975.95 6535,-975.95 6535,-1028.95"/>
<text text-anchor="middle" x="6217.5" y="-992.25" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node97" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node97"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="7853,-458.95 6763,-458.95 6763,-381.95 7853,-381.95 7853,-458.95"/>
<text text-anchor="middle" x="7308" y="-404.55" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge127" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7853.17,-385.26C7962.13,-378.21 8069.55,-371.27 8156.06,-365.67"/>
<polygon fill="black" stroke="black" points="8156.48,-369.15 8166.24,-365.01 8156.03,-362.17 8156.48,-369.15"/>
</g>
<!-- price_utils.predict_price -->
<g id="node98" class="node">
<title>price_utils.predict_price</title>
<g id="a_node98"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="8551,-484.95 8141,-484.95 8141,-441.95 8551,-441.95 8551,-484.95"/>
<text text-anchor="middle" x="8346" y="-455.3" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node99" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node99"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="9341,-590.95 8954,-590.95 8954,-551.95 9341,-551.95 9341,-590.95"/>
<text text-anchor="middle" x="9147.5" y="-564.55" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node100" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node100"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="8613.5,-553.45 8078.5,-553.45 8078.5,-503.45 8613.5,-503.45 8613.5,-553.45"/>
<text text-anchor="middle" x="8346" y="-518.76" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node101" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node101"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="7564.5,-553.45 7051.5,-553.45 7051.5,-515.45 7564.5,-515.45 7564.5,-553.45"/>
<text text-anchor="middle" x="7308" y="-527.72" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge128" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M7564.76,-532.97C7717.49,-532.09 7911.54,-530.96 8067.91,-530.06"/>
<polygon fill="black" stroke="black" points="8068.17,-533.56 8078.15,-530 8068.13,-526.56 8068.17,-533.56"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node102" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node102"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6532.5,-560.95 5902.5,-560.95 5902.5,-507.95 6532.5,-507.95 6532.5,-560.95"/>
<text text-anchor="middle" x="6217.5" y="-524.25" font-family="Times,serif" font-size="40.88">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge129" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6448.59,-507.93C6545.6,-496.94 6659.76,-484.26 6763,-473.45 6805.66,-468.98 6850.22,-464.44 6894.68,-459.99"/>
<polygon fill="black" stroke="black" points="6895.16,-463.46 6904.76,-458.98 6894.46,-456.49 6895.16,-463.46"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge130" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6532.64,-517C6608.08,-513.17 6688.4,-509.38 6763,-506.45 7251.97,-487.24 7826.28,-473.95 8130.53,-467.64"/>
<polygon fill="black" stroke="black" points="8130.86,-471.13 8140.79,-467.42 8130.72,-464.13 8130.86,-471.13"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge131" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6532.6,-553.16C6608.04,-556.95 6688.37,-560.39 6763,-562.45 7570.35,-584.72 8532.11,-578.27 8943.53,-573.94"/>
<polygon fill="black" stroke="black" points="8943.78,-577.44 8953.74,-573.83 8943.71,-570.44 8943.78,-577.44"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge132" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6532.61,-534.45C6693.6,-534.45 6887.53,-534.45 7041.04,-534.45"/>
<polygon fill="black" stroke="black" points="7041.09,-537.95 7051.09,-534.45 7041.09,-530.95 7041.09,-537.95"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node103" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node103"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="7678,-325.45 6938,-325.45 6938,-267.45 7678,-267.45 7678,-325.45"/>
<text text-anchor="middle" x="7308" y="-285.16" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge133" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7678.27,-316.77C7839.99,-325.67 8022.85,-335.73 8156.11,-343.06"/>
<polygon fill="black" stroke="black" points="8156.25,-346.57 8166.43,-343.63 8156.63,-339.58 8156.25,-346.57"/>
</g>
<!-- build_site._load_ontology -->
<g id="node104" class="node">
<title>build_site._load_ontology</title>
<g id="a_node104"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8502.5,-1876.45 8189.5,-1876.45 8189.5,-1840.45 8502.5,-1840.45 8502.5,-1876.45"/>
<text text-anchor="middle" x="8346" y="-1852.86" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge134" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8502.69,-1853.52C8595.81,-1857.28 8713.11,-1874.34 8803,-1928.45 8983.84,-2037.32 9100.08,-2280.99 9135.23,-2362.95"/>
<polygon fill="black" stroke="black" points="9132.09,-2364.5 9139.21,-2372.34 9138.53,-2361.77 9132.09,-2364.5"/>
</g>
<!-- build_site._compile_locale -->
<g id="node105" class="node">
<title>build_site._compile_locale</title>
<g id="a_node105"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="9314.5,-737.45 8980.5,-737.45 8980.5,-701.45 9314.5,-701.45 9314.5,-737.45"/>
<text text-anchor="middle" x="9147.5" y="-713.58" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node106" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node106"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="8534.5,-726.95 8157.5,-726.95 8157.5,-685.95 8534.5,-685.95 8534.5,-726.95"/>
<text text-anchor="middle" x="8346" y="-699.21" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge135" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M8534.7,-709.5C8666.26,-711.64 8840.95,-714.48 8969.97,-716.58"/>
<polygon fill="black" stroke="black" points="8970.3,-720.09 8980.35,-716.75 8970.41,-713.09 8970.3,-720.09"/>
</g>
<!-- build_site._iter_lots -->
<g id="node107" class="node">
<title>build_site._iter_lots</title>
<g id="a_node107"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7534,-2361.95 7082,-2361.95 7082,-2304.95 7534,-2304.95 7534,-2361.95"/>
<text text-anchor="middle" x="7308" y="-2322.56" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge136" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7491.24,-2304.94C7612.1,-2297.32 7764.25,-2311.48 7853,-2409.45 7920.04,-2483.46 7852.27,-3214.6 7889,-3307.45 7973.49,-3521.06 8183.47,-3707.69 8286.33,-3789.87"/>
<polygon fill="black" stroke="black" points="8284.44,-3792.84 8294.45,-3796.32 8288.79,-3787.36 8284.44,-3792.84"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge137" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7534.14,-2343.63C7634.14,-2353.51 7751.85,-2372.64 7853,-2409.45 8045.85,-2479.64 8243.23,-2633.07 8315.89,-2692.89"/>
<polygon fill="black" stroke="black" points="8313.79,-2695.7 8323.72,-2699.38 8318.25,-2690.3 8313.79,-2695.7"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge138" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7446.45,-2361.99C7565.7,-2378.57 7736.93,-2381.72 7853,-2295.45 7889.24,-2268.52 7852.62,-2227.19 7889,-2200.45 7997.58,-2120.65 8162.91,-2134.88 8261.82,-2153.49"/>
<polygon fill="black" stroke="black" points="8261.29,-2156.95 8271.77,-2155.41 8262.62,-2150.07 8261.29,-2156.95"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge139" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7534.3,-2354.46C7636.14,-2354.91 7755.27,-2342.37 7853,-2295.45 7874.27,-2285.24 7867.69,-2266.57 7889,-2256.45 7988.03,-2209.43 8113.04,-2205.02 8207.12,-2210.92"/>
<polygon fill="black" stroke="black" points="8207.07,-2214.42 8217.28,-2211.6 8207.54,-2207.43 8207.07,-2214.42"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge140" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7484.32,-2304.94C7606.59,-2296.03 7763.34,-2308.61 7853,-2409.45 7914.59,-2478.72 7827.51,-4008.1 7889,-4077.45 7974.96,-4174.4 8134.77,-4174.67 8240.52,-4161.8"/>
<polygon fill="black" stroke="black" points="8241.1,-4165.25 8250.58,-4160.52 8240.21,-4158.31 8241.1,-4165.25"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge141" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7534.12,-2334.32C7735.3,-2335.1 8024.27,-2336.21 8197.42,-2336.88"/>
<polygon fill="black" stroke="black" points="8197.62,-2340.38 8207.63,-2336.92 8197.65,-2333.38 8197.62,-2340.38"/>
</g>
<!-- build_site._copy_images -->
<g id="node108" class="node">
<title>build_site._copy_images</title>
<g id="a_node108"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="9311,-1125.45 8984,-1125.45 8984,-1089.45 9311,-1089.45 9311,-1125.45"/>
<text text-anchor="middle" x="9147.5" y="-1101.29" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node109" class="node">
<title>build_site._copy_static</title>
<g id="a_node109"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="6345.5,-957.45 6089.5,-957.45 6089.5,-921.45 6345.5,-921.45 6345.5,-957.45"/>
<text text-anchor="middle" x="6217.5" y="-934.15" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node110" class="node">
<title>build_site._load_state</title>
<g id="a_node110"><a xlink:title="Return ontology fields, embeddings, lots and similarity caches.">
<polygon fill="none" stroke="black" points="6367,-1871.95 6068,-1871.95 6068,-1834.95 6367,-1834.95 6367,-1871.95"/>
<text text-anchor="middle" x="6217.5" y="-1847.01" font-family="Times,serif" font-size="26.18">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge142" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6328,-1871.95C6432.44,-1891.35 6593.21,-1925.82 6727,-1974.45 6743.81,-1980.56 6745.72,-1987.84 6763,-1992.45 6825.33,-2009.09 7645.74,-2050.74 8079.79,-2071.82"/>
<polygon fill="black" stroke="black" points="8079.81,-2075.32 8089.97,-2072.31 8080.15,-2068.33 8079.81,-2075.32"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge143" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6304.2,-1871.97C6411.69,-1890.28 6597.58,-1905.18 6727,-1824.45 6754.69,-1807.18 6735.34,-1777.77 6763,-1760.45 6886.31,-1683.23 7057.75,-1686.87 7175.02,-1702.09"/>
<polygon fill="black" stroke="black" points="7174.76,-1705.59 7185.13,-1703.45 7175.69,-1698.65 7174.76,-1705.59"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_more_user -->
<g id="edge144" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_more_user</title>
<path fill="none" stroke="black" d="M6305.24,-1872.02C6412.28,-1894.09 6600.12,-1930.12 6763,-1947.45 7222.69,-1996.37 7761.13,-2009.07 8076.48,-2012.02"/>
<polygon fill="black" stroke="black" points="8076.64,-2015.52 8086.67,-2012.11 8076.7,-2008.52 8076.64,-2015.52"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge145" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6367.19,-1853.8C6751.59,-1854.71 7776.32,-1857.12 8179.11,-1858.06"/>
<polygon fill="black" stroke="black" points="8179.38,-1861.56 8189.39,-1858.09 8179.4,-1854.56 8179.38,-1861.56"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge146" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6315.62,-1871.98C6432.42,-1899.62 6625.41,-1963.36 6727,-2096.45 6781.54,-2167.9 6696.07,-2235.46 6763,-2295.45 6808.47,-2336.21 6946.26,-2345.54 7071.78,-2344.77"/>
<polygon fill="black" stroke="black" points="7071.98,-2348.27 7081.95,-2344.68 7071.92,-2341.27 7071.98,-2348.27"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge147" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6277.17,-1871.96C6383.48,-1901.43 6607.94,-1944.24 6727,-1824.45 6782.53,-1768.58 6706.01,-1170.83 6763,-1116.45 6802.93,-1078.36 8432.33,-1097.52 8973.68,-1104.95"/>
<polygon fill="black" stroke="black" points="8973.87,-1108.45 8983.92,-1105.09 8973.97,-1101.45 8973.87,-1108.45"/>
</g>
<!-- build_site._categorise -->
<g id="node111" class="node">
<title>build_site._categorise</title>
<g id="a_node111"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="7747,-855.45 6869,-855.45 6869,-761.45 7747,-761.45 7747,-855.45"/>
<text text-anchor="middle" x="7308" y="-788.84" font-family="Times,serif" font-size="78.26">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge148" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7615.28,-855.46C7824.4,-887.55 8089.12,-928.18 8235.35,-950.62"/>
<polygon fill="black" stroke="black" points="8234.83,-954.08 8245.24,-952.14 8235.89,-947.17 8234.83,-954.08"/>
</g>
<!-- build_site._render_site -->
<g id="node112" class="node">
<title>build_site._render_site</title>
<g id="a_node112"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``envs`` supplies jinja environments for every language so they are&#10;initialised only once. ``rates`` maps currency codes to multipliers relative&#10;to USD. &#160;The values are embedded into the pages so the front&#45;end can&#10;convert prices on the fly.">
<polygon fill="none" stroke="black" points="6727,-865.45 5708,-865.45 5708,-761.45 6727,-761.45 6727,-865.45"/>
<text text-anchor="middle" x="6217.5" y="-791.56" font-family="Times,serif" font-size="87.36">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge152" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6727.07,-862.34C6739.16,-863.1 6751.15,-863.8 6763,-864.45 6837.7,-868.54 9396.82,-861.68 9456,-907.45 9602.89,-1021.09 9686.93,-1647.05 9704.17,-1788.18"/>
<polygon fill="black" stroke="black" points="9700.71,-1788.7 9705.38,-1798.21 9707.66,-1787.86 9700.71,-1788.7"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge149" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6676.42,-865.47C6693.59,-869.76 6710.5,-874.42 6727,-879.45 6744.11,-884.68 6745.69,-892.96 6763,-897.45 7041.74,-969.8 7923.71,-970.61 8234.95,-968.52"/>
<polygon fill="black" stroke="black" points="8235.35,-972.02 8245.33,-968.45 8235.3,-965.02 8235.35,-972.02"/>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge150" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6722.22,-865.83C6723.83,-867.35 6725.42,-868.89 6727,-870.45 6822.33,-965.04 6664.11,-1079.59 6763,-1170.45 6852.24,-1252.44 7767.33,-1122.74 7853,-1208.45 7935.29,-1290.78 7807.81,-2172.04 7889,-2255.45 7931.77,-2299.39 8089.22,-2300.47 8207.22,-2294.43"/>
<polygon fill="black" stroke="black" points="8207.63,-2297.91 8217.43,-2293.88 8207.26,-2290.92 8207.63,-2297.91"/>
</g>
<!-- build_site.build_page -->
<g id="node113" class="node">
<title>build_site.build_page</title>
<g id="a_node113"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion. ``envs`` preloads jinja environments to avoid expensive&#10;reinitialisation for each page.">
<polygon fill="none" stroke="black" points="7777.5,-3030.45 6838.5,-3030.45 6838.5,-2928.45 7777.5,-2928.45 7777.5,-3030.45"/>
<text text-anchor="middle" x="7308" y="-2957.91" font-family="Times,serif" font-size="85.68">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge151" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6674.84,-865.47C6694.08,-878.66 6711.68,-894.2 6727,-912.45 6798.69,-997.87 6687.85,-2837.06 6763,-2919.45 6782.39,-2940.71 6804.8,-2957.78 6829.25,-2971.35"/>
<polygon fill="black" stroke="black" points="6827.88,-2974.59 6838.35,-2976.2 6831.17,-2968.41 6827.88,-2974.59"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge153" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7777.51,-3021.26C7805.21,-3036.23 7830.78,-3054.72 7853,-3077.45 7925.32,-3151.45 7845.47,-3213.59 7889,-3307.45 7986.02,-3516.64 8191.32,-3706.45 8289.9,-3789.79"/>
<polygon fill="black" stroke="black" points="8287.77,-3792.56 8297.67,-3796.32 8292.27,-3787.21 8287.77,-3792.56"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge154" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7777.53,-2936.32C7803.19,-2931.3 7828.49,-2925.7 7853,-2919.45 8025.69,-2875.41 8217.66,-2782.95 8301.67,-2740.12"/>
<polygon fill="black" stroke="black" points="8303.35,-2743.19 8310.65,-2735.52 8300.16,-2736.96 8303.35,-2743.19"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge156" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7777.75,-3016.47C7805.88,-3032.44 7831.45,-3052.48 7853,-3077.45 7936.23,-3173.9 7808.01,-4125.12 7889,-4223.45 7955.94,-4304.73 8072.06,-4330.35 8170.37,-4335.85"/>
<polygon fill="black" stroke="black" points="8170.27,-4339.34 8180.43,-4336.34 8170.62,-4332.35 8170.27,-4339.34"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge155" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7777.8,-2974.55C7805.57,-2960.59 7831.07,-2942.52 7853,-2919.45 7946.4,-2821.19 7793.14,-2406.32 7889,-2310.45 7932.32,-2267.13 8089.43,-2266.27 8207.21,-2272.39"/>
<polygon fill="black" stroke="black" points="8207.23,-2275.9 8217.41,-2272.94 8207.61,-2268.91 8207.23,-2275.9"/>
</g>
<!-- build_site.main -->
<g id="node114" class="node">
<title>build_site.main</title>
<g id="a_node114"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5589.5,-843.95 5203.5,-843.95 5203.5,-782.95 5589.5,-782.95 5589.5,-843.95"/>
<text text-anchor="middle" x="5396.5" y="-801.54" font-family="Times,serif" font-size="48.02">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge158" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5479.75,-843.96C5539.16,-869.35 5618.11,-910.41 5672,-966.45 5696.52,-991.96 5680.01,-1015.81 5708,-1037.45 6087.68,-1330.96 6287.46,-1202.92 6763,-1267.45 6859.31,-1280.52 6965.95,-1287.93 7059.11,-1292.12"/>
<polygon fill="black" stroke="black" points="7059.1,-1295.62 7069.24,-1292.57 7059.41,-1288.63 7059.1,-1295.62"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge157" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5505.47,-844.03C5565.71,-867.19 5635.72,-905.66 5672,-966.45 5709.24,-1028.86 5658.75,-3529.01 5708,-3582.45 5867.6,-3755.65 6528.02,-3667.58 6763,-3683.45 7246.72,-3716.12 7368.83,-3701.36 7853,-3726.45 8275.52,-3748.35 8381.09,-3755.82 8803,-3787.45 9093.47,-3809.23 9171.18,-3782.43 9456,-3843.45 9521.44,-3857.47 9593.24,-3883.75 9643.31,-3903.96"/>
<polygon fill="black" stroke="black" points="9642.13,-3907.26 9652.71,-3907.78 9644.77,-3900.77 9642.13,-3907.26"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge159" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5561.31,-782.89C5603.32,-767.33 5644.38,-743.86 5672,-708.45 5754.59,-602.57 5609.08,-499.27 5708,-408.45 5797.9,-325.92 7567.22,-342.71 8156.16,-350.63"/>
<polygon fill="black" stroke="black" points="8156.4,-354.13 8166.45,-350.77 8156.5,-347.14 8156.4,-354.13"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge160" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5444.65,-843.98C5503.59,-880.36 5608.8,-939.61 5708,-966.45 5765.76,-982.08 5828.48,-991.97 5889.51,-998.05"/>
<polygon fill="black" stroke="black" points="5889.4,-1001.56 5899.69,-999.03 5890.07,-994.59 5889.4,-1001.56"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge161" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5497,-782.88C5550.48,-764.62 5616.61,-739.03 5672,-708.45 5689.51,-698.79 5690.1,-690.38 5708,-681.45 5821.63,-624.8 5960.73,-586.48 6064.7,-563.21"/>
<polygon fill="black" stroke="black" points="6065.65,-566.58 6074.65,-561 6064.13,-559.75 6065.65,-566.58"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge162" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5562.9,-782.88C5604.53,-767.32 5645.01,-743.86 5672,-708.45 5721.95,-642.93 5647.73,-395.63 5708,-339.45 5795.07,-258.3 6482.66,-266.56 6927.39,-280.87"/>
<polygon fill="black" stroke="black" points="6927.41,-284.37 6937.52,-281.19 6927.64,-277.37 6927.41,-284.37"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge163" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5523.55,-782.93C5570.43,-770.91 5623.9,-756.41 5672,-741.45 5688.24,-736.4 5691.26,-731.46 5708,-728.45 6175.5,-644.57 7617.44,-682.21 8147.16,-699.49"/>
<polygon fill="black" stroke="black" points="8147.09,-702.99 8157.2,-699.81 8147.32,-695.99 8147.09,-702.99"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge164" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5479.58,-843.99C5541.45,-865.6 5628.88,-893.18 5708,-907.45 5832.37,-929.88 5976.3,-937.24 6079.21,-939.37"/>
<polygon fill="black" stroke="black" points="6079.29,-942.87 6089.36,-939.56 6079.43,-935.87 6079.29,-942.87"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge165" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5503.81,-844C5564.05,-867.26 5634.66,-905.83 5672,-966.45 5722.05,-1047.69 5641.04,-1756.48 5708,-1824.45 5823.05,-1941.25 6038.17,-1904.08 6148.07,-1874.7"/>
<polygon fill="black" stroke="black" points="6149,-1878.07 6157.72,-1872.06 6147.15,-1871.32 6149,-1878.07"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge166" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5523.58,-782.92C5579.67,-770.83 5646.76,-758.41 5708,-752.45 6095.17,-714.78 6537.25,-735.08 6858.3,-761.2"/>
<polygon fill="black" stroke="black" points="6858.47,-764.73 6868.72,-762.06 6859.04,-757.75 6858.47,-764.73"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge167" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5589.52,-813.45C5623.26,-813.45 5659.78,-813.45 5697.65,-813.45"/>
<polygon fill="black" stroke="black" points="5697.83,-816.95 5707.83,-813.45 5697.83,-809.95 5697.83,-816.95"/>
</g>
<!-- caption._identify_size -->
<g id="node115" class="node">
<title>caption._identify_size</title>
<g id="a_node115"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="8474.5,-5358.45 8217.5,-5358.45 8217.5,-5322.45 8474.5,-5322.45 8474.5,-5358.45"/>
<text text-anchor="middle" x="8346" y="-5334.76" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node116" class="node">
<title>caption._prepare_image</title>
<g id="a_node116"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="7525,-5360.45 7091,-5360.45 7091,-5314.45 7525,-5314.45 7525,-5360.45"/>
<text text-anchor="middle" x="7308" y="-5329.01" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge168" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M7525.23,-5338.08C7730.46,-5338.67 8032.73,-5339.55 8207.12,-5340.05"/>
<polygon fill="black" stroke="black" points="8207.12,-5343.55 8217.13,-5340.08 8207.14,-5336.55 8207.12,-5343.55"/>
</g>
<!-- caption._guess_chat -->
<g id="node117" class="node">
<title>caption._guess_chat</title>
<g id="a_node117"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="8442,-5304.45 8250,-5304.45 8250,-5268.45 8442,-5268.45 8442,-5304.45"/>
<text text-anchor="middle" x="8346" y="-5282.29" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node118" class="node">
<title>caption.caption_file</title>
<g id="a_node118"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="6520.5,-5298.95 5914.5,-5298.95 5914.5,-5225.95 6520.5,-5225.95 6520.5,-5298.95"/>
<text text-anchor="middle" x="6217.5" y="-5247.46" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge174" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6512.56,-5225.93C6594.33,-5201.07 6674.91,-5159.78 6727,-5091.45 6813.09,-4978.52 6668.59,-4559.53 6763,-4453.45 7089.94,-4086.13 7513.38,-4619.08 7853,-4263.45 7940.57,-4171.76 7798.51,-4069.27 7889,-3980.45 8034.8,-3837.34 8661.91,-4029.21 8803,-3881.45 8847.75,-3834.59 8826.51,-3363.03 8839,-3299.45 8909.7,-2939.6 9086.17,-2526.5 9134.24,-2417.8"/>
<polygon fill="black" stroke="black" points="9137.5,-2419.08 9138.36,-2408.52 9131.11,-2416.24 9137.5,-2419.08"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge171" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6363.82,-5298.99C6472.86,-5324.45 6626.24,-5356.14 6763,-5369.45 6875.8,-5380.43 8717.16,-5441.45 8803,-5367.45 8884.03,-5297.61 8796.53,-5227.64 8839,-5129.45 8907.56,-4970.97 9056.61,-4821.53 9118.59,-4763.68"/>
<polygon fill="black" stroke="black" points="9121.1,-4766.14 9126.05,-4756.77 9116.34,-4761 9121.1,-4766.14"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge172" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6520.97,-5260.97C6986.33,-5258.04 7827.39,-5249.94 7853,-5229.45 7905.19,-5187.71 7849.49,-5137.36 7889,-5083.45 7989.26,-4946.67 8179.04,-4863.43 8279.23,-4827.05"/>
<polygon fill="black" stroke="black" points="8280.7,-4830.24 8288.93,-4823.57 8278.34,-4823.65 8280.7,-4830.24"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge169" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M6520.55,-5283.63C6599.46,-5289.13 6684.42,-5295.04 6763,-5300.45 6867.43,-5307.65 6983.14,-5315.53 7080.9,-5322.16"/>
<polygon fill="black" stroke="black" points="7080.7,-5325.66 7090.91,-5322.84 7081.17,-5318.67 7080.7,-5325.66"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge170" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M6520.64,-5265.86C7003.82,-5271.32 7927.72,-5281.74 8239.36,-5285.26"/>
<polygon fill="black" stroke="black" points="8239.7,-5288.76 8249.74,-5285.38 8239.78,-5281.76 8239.7,-5288.76"/>
</g>
<!-- caption_io.write_caption -->
<g id="node119" class="node">
<title>caption_io.write_caption</title>
<g id="a_node119"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="7474.5,-4498.45 7141.5,-4498.45 7141.5,-4462.45 7474.5,-4462.45 7474.5,-4498.45"/>
<text text-anchor="middle" x="7308" y="-4474.29" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge173" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M6512.01,-5225.87C6593.88,-5201.01 6674.66,-5159.74 6727,-5091.45 6806.1,-4988.26 6670.51,-4598.84 6763,-4507.45 6813.53,-4457.53 6992.12,-4456.9 7131.05,-4464.91"/>
<polygon fill="black" stroke="black" points="7131.21,-4468.42 7141.4,-4465.52 7131.63,-4461.43 7131.21,-4468.42"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge211" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7474.73,-4469.76C7598.32,-4452.49 7761.06,-4408.34 7853,-4296.45 7930.7,-4201.9 7798.9,-4106.28 7889,-4023.45 7963.85,-3954.65 8730.9,-4052.13 8803,-3980.45 8856.73,-3927.03 8824.73,-3373.87 8839,-3299.45 8908.08,-2939.29 9085.72,-2526.42 9134.15,-2417.78"/>
<polygon fill="black" stroke="black" points="9137.41,-2419.06 9138.3,-2408.51 9131.02,-2416.2 9137.41,-2419.06"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge210" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7474.79,-4477.86C7853.47,-4472.68 8753.25,-4464.94 8803,-4507.45 8872.99,-4567.26 8771.13,-4649.25 8839,-4711.45 8895.09,-4762.86 8983.53,-4765.55 9051.2,-4757.75"/>
<polygon fill="black" stroke="black" points="9051.96,-4761.19 9061.45,-4756.47 9051.09,-4754.24 9051.96,-4761.19"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge212" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7474.79,-4462.9C7601.46,-4439.85 7768.25,-4386.58 7853,-4263.45 7931.54,-4149.35 7802.52,-1878.66 7889,-1770.45 7971.99,-1666.61 8134.55,-1650.47 8241.46,-1652.41"/>
<polygon fill="black" stroke="black" points="8241.54,-1655.91 8251.63,-1652.65 8241.71,-1648.91 8241.54,-1655.91"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge209" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M7474.68,-4491.59C7613.4,-4497.24 7797.38,-4494.95 7853,-4448.45 7905.27,-4404.76 7835.79,-4341.99 7889,-4299.45 7933,-4264.28 8723.52,-4273.47 9028.16,-4278.35"/>
<polygon fill="black" stroke="black" points="9028.29,-4281.86 9038.35,-4278.52 9028.4,-4274.86 9028.29,-4281.86"/>
</g>
<!-- caption.main -->
<g id="node120" class="node">
<title>caption.main</title>
<g id="a_node120"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="5489,-5280.45 5304,-5280.45 5304,-5244.45 5489,-5244.45 5489,-5280.45"/>
<text text-anchor="middle" x="5396.5" y="-5256.29" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge175" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M5489.07,-5262.45C5589.34,-5262.45 5755.66,-5262.45 5903.97,-5262.45"/>
<polygon fill="black" stroke="black" points="5904.17,-5265.95 5914.17,-5262.45 5904.17,-5258.95 5904.17,-5265.95"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node122" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node122"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6359,-157.45 6076,-157.45 6076,-121.45 6359,-121.45 6359,-157.45"/>
<text text-anchor="middle" x="6217.5" y="-133.86" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge176" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6359.13,-139.45C6573.33,-139.45 6977.96,-139.45 7182.27,-139.45"/>
<polygon fill="black" stroke="black" points="7182.44,-142.95 7192.44,-139.45 7182.44,-135.95 7182.44,-142.95"/>
</g>
<!-- log_utils.init_logger -->
<g id="node123" class="node">
<title>log_utils.init_logger</title>
<g id="a_node123"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6565,-103.45 5870,-103.45 5870,-21.45 6565,-21.45 6565,-103.45"/>
<text text-anchor="middle" x="6217.5" y="-45.47" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge177" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6565.15,-86.97C6776.11,-101.9 7032.89,-120.06 7182.36,-130.64"/>
<polygon fill="black" stroke="black" points="7182.27,-134.14 7192.49,-131.35 7182.76,-127.15 7182.27,-134.14"/>
</g>
<!-- log_utils.get_logger -->
<g id="node124" class="node">
<title>log_utils.get_logger</title>
<g id="a_node124"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7376.5,-80.45 7239.5,-80.45 7239.5,-44.45 7376.5,-44.45 7376.5,-80.45"/>
<text text-anchor="middle" x="7308" y="-59.21" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge178" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6565.15,-56.11C6800.04,-55.09 7091.74,-55.97 7228.86,-58.75"/>
<polygon fill="black" stroke="black" points="7229.19,-62.26 7239.26,-58.97 7229.34,-55.26 7229.19,-62.26"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge179" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7239.26,-65.93C7108.85,-68.84 6814.64,-69.81 6575.43,-68.83"/>
<polygon fill="black" stroke="black" points="6575.17,-65.33 6565.15,-68.79 6575.14,-72.33 6575.17,-65.33"/>
</g>
<!-- clean_data._parse_date -->
<g id="node125" class="node">
<title>clean_data._parse_date</title>
<g id="a_node125"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8485.5,-3298.45 8206.5,-3298.45 8206.5,-3262.45 8485.5,-3262.45 8485.5,-3298.45"/>
<text text-anchor="middle" x="8346" y="-3274.76" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge181" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8483.86,-3298.45C8578.82,-3304.51 8705.3,-3299.34 8803,-3247.45 9403.65,-2928.45 9657.47,-2016.91 9700.69,-1844.71"/>
<polygon fill="black" stroke="black" points="9704.12,-1845.42 9703.13,-1834.87 9697.32,-1843.74 9704.12,-1845.42"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node126" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node126"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7461.5,-3122.45 7154.5,-3122.45 7154.5,-3086.45 7461.5,-3086.45 7461.5,-3122.45"/>
<text text-anchor="middle" x="7308" y="-3098.29" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge182" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7461.64,-3104.73C7573.13,-3100.56 7726.31,-3085.59 7853,-3039.45 8049.27,-2967.98 8246.1,-2805.05 8317.21,-2742.53"/>
<polygon fill="black" stroke="black" points="8319.7,-2745 8324.87,-2735.76 8315.06,-2739.76 8319.7,-2745"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge183" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7461.64,-3102.11C7571.29,-3102.83 7722.22,-3108.76 7853,-3131.45 7895.49,-3138.83 8154.23,-3219.99 8278.5,-3259.32"/>
<polygon fill="black" stroke="black" points="8277.7,-3262.74 8288.29,-3262.42 8279.81,-3256.07 8277.7,-3262.74"/>
</g>
<!-- clean_data._clean_media -->
<g id="node127" class="node">
<title>clean_data._clean_media</title>
<g id="a_node127"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7498,-3514.45 7118,-3514.45 7118,-3474.45 7498,-3474.45 7498,-3514.45"/>
<text text-anchor="middle" x="7308" y="-3487.38" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge185" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7498.05,-3492.53C7635.79,-3495.59 7806.14,-3510.17 7853,-3561.45 7936.09,-3652.38 7813.8,-4571.9 7889,-4669.45 7975.85,-4782.12 8152.18,-4804.75 8258.31,-4807.49"/>
<polygon fill="black" stroke="black" points="8258.29,-4810.99 8268.36,-4807.7 8258.43,-4803.99 8258.29,-4810.99"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge184" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7424.34,-3514.45C7539.55,-3528.65 7718.4,-3534.61 7853,-3465.45 7875.78,-3453.75 7867.82,-3434.85 7889,-3420.45 7984.92,-3355.26 8112.35,-3319.5 8208.12,-3300.47"/>
<polygon fill="black" stroke="black" points="8209.02,-3303.87 8218.17,-3298.52 8207.68,-3296.99 8209.02,-3303.87"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node128" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node128"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7510,-2910.45 7106,-2910.45 7106,-2864.45 7510,-2864.45 7510,-2910.45"/>
<text text-anchor="middle" x="7308" y="-2879.01" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge186" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7510,-2883.18C7613.11,-2878.62 7740.38,-2869.32 7853,-2850.45 8010.19,-2824.12 8189.75,-2769 8282.39,-2738.64"/>
<polygon fill="black" stroke="black" points="8283.48,-2741.96 8291.89,-2735.51 8281.3,-2735.31 8283.48,-2741.96"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge188" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7510.21,-2887.16C7645.44,-2882.29 7807.04,-2865.82 7853,-2816.45 7946.44,-2716.09 7792.08,-2297.45 7889,-2200.45 7990.45,-2098.93 8176.35,-2127.45 8276.6,-2152.89"/>
<polygon fill="black" stroke="black" points="8275.76,-2156.29 8286.32,-2155.42 8277.52,-2149.51 8275.76,-2156.29"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge187" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7510.15,-2872.1C7645.1,-2866.71 7806.38,-2871.42 7853,-2919.45 7949.77,-3019.16 7792.25,-4069.72 7889,-4169.45 7936.62,-4218.54 8127.05,-4213.74 8246.25,-4205.38"/>
<polygon fill="black" stroke="black" points="8246.77,-4208.85 8256.49,-4204.64 8246.26,-4201.87 8246.77,-4208.85"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node129" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node129"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7516,-3176.45 7100,-3176.45 7100,-3140.45 7516,-3140.45 7516,-3176.45"/>
<text text-anchor="middle" x="7308" y="-3152.29" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node130" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node130"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8559.5,-3076.45 8132.5,-3076.45 8132.5,-3040.45 8559.5,-3040.45 8559.5,-3076.45"/>
<text text-anchor="middle" x="8346" y="-3052.29" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node131" class="node">
<title>clean_data.main</title>
<g id="a_node131"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6313.5,-3149.45 6121.5,-3149.45 6121.5,-3113.45 6313.5,-3113.45 6313.5,-3149.45"/>
<text text-anchor="middle" x="6217.5" y="-3126.15" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge189" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6313.67,-3129.09C6499.72,-3124.48 6913.54,-3114.21 7144.03,-3108.49"/>
<polygon fill="black" stroke="black" points="7144.28,-3111.99 7154.19,-3108.24 7144.11,-3104.99 7144.28,-3111.99"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge190" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6239.36,-3149.78C6308.15,-3208.91 6536.4,-3394.92 6763,-3465.45 6873.67,-3499.9 7003.04,-3508.01 7107.85,-3507.11"/>
<polygon fill="black" stroke="black" points="7107.96,-3510.61 7117.92,-3506.99 7107.88,-3503.61 7107.96,-3510.61"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge191" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6313.85,-3139.08C6426.42,-3142.69 6612.72,-3130.95 6727,-3029.45 6765.46,-2995.29 6722.26,-2950.85 6763,-2919.45 6814.17,-2880.02 6965.56,-2873.55 7095.68,-2876.1"/>
<polygon fill="black" stroke="black" points="7095.73,-2879.6 7105.8,-2876.32 7095.88,-2872.6 7095.73,-2879.6"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge192" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6313.67,-3133.81C6485.89,-3138.09 6853.31,-3147.2 7089.79,-3153.06"/>
<polygon fill="black" stroke="black" points="7089.81,-3156.57 7099.9,-3153.32 7089.99,-3149.57 7089.81,-3156.57"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge193" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6313.72,-3119.48C6422.25,-3106.42 6605.08,-3086.22 6763,-3077.45 7247.04,-3050.59 7815.61,-3051.74 8122.08,-3055.04"/>
<polygon fill="black" stroke="black" points="8122.38,-3058.54 8132.42,-3055.15 8122.46,-3051.54 8122.38,-3058.54"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node132" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node132"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7514,-3806.45 7102,-3806.45 7102,-3768.45 7514,-3768.45 7514,-3806.45"/>
<text text-anchor="middle" x="7308" y="-3780.72" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- embed.main -->
<g id="node133" class="node">
<title>embed.main</title>
<g id="a_node133"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6305.5,-1815.45 6129.5,-1815.45 6129.5,-1779.45 6305.5,-1779.45 6305.5,-1815.45"/>
<text text-anchor="middle" x="6217.5" y="-1791.29" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge200" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6305.74,-1797.45C6475.02,-1797.45 6852.48,-1797.45 7092.54,-1797.45"/>
<polygon fill="black" stroke="black" points="7092.79,-1800.95 7102.79,-1797.45 7092.79,-1793.95 7092.79,-1800.95"/>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge201" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9256.81,-4290.05C9320.81,-4290.06 9400.02,-4279.55 9456,-4236.45 9488.51,-4211.42 9469.25,-4185.59 9492,-4151.45 9543.29,-4074.49 9623.67,-4001.08 9670.4,-3961.57"/>
<polygon fill="black" stroke="black" points="9672.75,-3964.17 9678.16,-3955.06 9668.25,-3958.8 9672.75,-3964.17"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node135" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node135"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4933.5,-3333.45 4747.5,-3333.45 4747.5,-3297.45 4933.5,-3297.45 4933.5,-3333.45"/>
<text text-anchor="middle" x="4840.5" y="-3311.75" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node136" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node136"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-2435.45 1260.5,-2435.45 1260.5,-2399.45 1490.5,-2399.45 1490.5,-2435.45"/>
<text text-anchor="middle" x="1375.5" y="-2412.15" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node137" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node137"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5024,-4037.95 4657,-4037.95 4657,-4000.95 5024,-4000.95 5024,-4037.95"/>
<text text-anchor="middle" x="4840.5" y="-4013.01" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node138" class="node">
<title>tg_client._write_md</title>
<g id="a_node138"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5465,-4054.45 5328,-4054.45 5328,-4018.45 5465,-4018.45 5465,-4054.45"/>
<text text-anchor="middle" x="5396.5" y="-4033.21" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge213" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5465.09,-4039.37C5522.56,-4039.33 5606.02,-4033.17 5672,-4003.45 5691.52,-3994.66 5688.25,-3979.7 5708,-3971.45 5812.77,-3927.68 5940.31,-3919.51 6041.45,-3922.24"/>
<polygon fill="black" stroke="black" points="6041.36,-3925.74 6051.46,-3922.54 6041.57,-3918.74 6041.36,-3925.74"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node139" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node139"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7547.5,-2807.95 7068.5,-2807.95 7068.5,-2764.95 7547.5,-2764.95 7547.5,-2807.95"/>
<text text-anchor="middle" x="7308" y="-2778.3" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge214" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7547.66,-2770.7C7642.68,-2764.42 7753.01,-2757.11 7853,-2750.45 7995.31,-2740.97 8160.77,-2729.85 8258.98,-2723.25"/>
<polygon fill="black" stroke="black" points="8259.4,-2726.73 8269.15,-2722.56 8258.93,-2719.74 8259.4,-2726.73"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node140" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node140"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6350.5,-2847.45 6084.5,-2847.45 6084.5,-2811.45 6350.5,-2811.45 6350.5,-2847.45"/>
<text text-anchor="middle" x="6217.5" y="-2824.67" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge215" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6350.61,-2824.23C6525.74,-2817.32 6838.21,-2804.97 7058.24,-2796.28"/>
<polygon fill="black" stroke="black" points="7058.46,-2799.77 7068.31,-2795.88 7058.18,-2792.78 7058.46,-2799.77"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node141" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node141"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3225,-2783.45 2986,-2783.45 2986,-2747.45 3225,-2747.45 3225,-2783.45"/>
<text text-anchor="middle" x="3105.5" y="-2761.41" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge216" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3225.2,-2762.1C3505.87,-2754.46 4232.41,-2736.45 4839.5,-2736.45 4839.5,-2736.45 4839.5,-2736.45 6218.5,-2736.45 7011.25,-2736.45 7970.17,-2723.09 8258.8,-2718.78"/>
<polygon fill="black" stroke="black" points="8259.24,-2722.27 8269.19,-2718.62 8259.14,-2715.27 8259.24,-2722.27"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node142" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node142"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5085,-3943.95 4596,-3943.95 4596,-3900.95 5085,-3900.95 5085,-3943.95"/>
<text text-anchor="middle" x="4840.5" y="-3914.3" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node143" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node143"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5608.5,-3994.95 5184.5,-3994.95 5184.5,-3949.95 5608.5,-3949.95 5608.5,-3994.95"/>
<text text-anchor="middle" x="5396.5" y="-3964.07" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node144" class="node">
<title>tg_client._extract_author</title>
<g id="a_node144"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6580.5,-3806.45 5854.5,-3806.45 5854.5,-3736.45 6580.5,-3736.45 6580.5,-3806.45"/>
<text text-anchor="middle" x="6217.5" y="-3757.65" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge217" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6580.58,-3776.77C6749.86,-3779.26 6945.73,-3782.14 7091.39,-3784.28"/>
<polygon fill="black" stroke="black" points="7091.74,-3787.79 7101.79,-3784.44 7091.84,-3780.79 7091.74,-3787.79"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node145" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node145"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="7447,-4064.45 7169,-4064.45 7169,-4028.45 7447,-4028.45 7447,-4064.45"/>
<text text-anchor="middle" x="7308" y="-4041.67" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node146" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node146"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8494,-5220.45 8198,-5220.45 8198,-5184.45 8494,-5184.45 8494,-5220.45"/>
<text text-anchor="middle" x="8346" y="-5196.76" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node147" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node147"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5083,-4739.95 4598,-4739.95 4598,-4690.95 5083,-4690.95 5083,-4739.95"/>
<text text-anchor="middle" x="4840.5" y="-4705.82" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge219" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4916.08,-4739.98C5064.78,-4787.68 5409.56,-4892.19 5708,-4937.45 5825.86,-4955.33 7760.02,-5065.04 7853,-4990.45 7910.53,-4944.3 7832.65,-4876.04 7889,-4828.45 7996.44,-4737.72 8173.96,-4761.7 8272.83,-4784.97"/>
<polygon fill="black" stroke="black" points="8272.19,-4788.42 8282.74,-4787.36 8273.84,-4781.61 8272.19,-4788.42"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge218" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4976.78,-4690.92C5290.01,-4634.78 6089.83,-4495.29 6763,-4410.45 7004.37,-4380.03 7667.77,-4466.17 7853,-4308.45 7901.59,-4267.08 7839.71,-4209.99 7889,-4169.45 7931.02,-4134.89 8059.01,-4129.62 8168.72,-4132.17"/>
<polygon fill="black" stroke="black" points="8168.86,-4135.68 8178.94,-4132.44 8169.04,-4128.68 8168.86,-4135.68"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node148" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node148"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5529.5,-5082.45 5263.5,-5082.45 5263.5,-5046.45 5529.5,-5046.45 5529.5,-5082.45"/>
<text text-anchor="middle" x="5396.5" y="-5060.29" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge220" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4881.46,-4739.97C4935.11,-4774.84 5030.03,-4843.68 5085,-4925.45 5112.99,-4967.09 5082.02,-5000.86 5121,-5032.45 5157.63,-5062.15 5206.6,-5073.76 5253.03,-5076.79"/>
<polygon fill="black" stroke="black" points="5253.04,-5080.3 5263.21,-5077.32 5253.4,-5073.31 5253.04,-5080.3"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node149" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node149"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6343,-5082.45 6092,-5082.45 6092,-5046.45 6343,-5046.45 6343,-5082.45"/>
<text text-anchor="middle" x="6217.5" y="-5059.66" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge221" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5529.54,-5064.45C5681.14,-5064.45 5928.5,-5064.45 6081.38,-5064.45"/>
<polygon fill="black" stroke="black" points="6081.77,-5067.95 6091.77,-5064.45 6081.77,-5060.95 6081.77,-5067.95"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node150" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node150"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7489.5,-5220.45 7126.5,-5220.45 7126.5,-5184.45 7489.5,-5184.45 7489.5,-5220.45"/>
<text text-anchor="middle" x="7308" y="-5196.76" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge224" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6294.18,-5082.51C6398.88,-5106.73 6594.12,-5149.14 6763,-5170.45 6879.85,-5185.2 7011.69,-5193.17 7116.31,-5197.47"/>
<polygon fill="black" stroke="black" points="7116.22,-5200.97 7126.35,-5197.87 7116.5,-5193.97 7116.22,-5200.97"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge222" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7489.41,-5184.44C7597.45,-5169.73 7736.07,-5143.85 7853,-5099.45 7901.8,-5080.92 8201.2,-4895.22 8307.56,-4828.86"/>
<polygon fill="black" stroke="black" points="8309.43,-4831.82 8316.06,-4823.56 8305.72,-4825.88 8309.43,-4831.82"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge223" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7489.75,-5202.45C7687.05,-5202.45 7999.81,-5202.45 8187.44,-5202.45"/>
<polygon fill="black" stroke="black" points="8187.67,-5205.95 8197.67,-5202.45 8187.67,-5198.95 8187.67,-5205.95"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node151" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node151"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="4170,-4797.95 3734,-4797.95 3734,-4756.95 4170,-4756.95 4170,-4797.95"/>
<text text-anchor="middle" x="3952" y="-4770.21" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge225" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M4022.87,-4756.86C4146.55,-4725.07 4405.49,-4680.14 4560,-4807.45 4611.58,-4849.95 4550.5,-4904.5 4596,-4953.45 4763.06,-5133.2 4879.36,-5081.66 5121,-5124.45 5501.25,-5191.79 6656.96,-5201.36 7116.05,-5202.46"/>
<polygon fill="black" stroke="black" points="7116.09,-5205.96 7126.1,-5202.48 7116.11,-5198.96 7116.09,-5205.96"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node152" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node152"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7480,-1258.95 7136,-1258.95 7136,-1217.95 7480,-1217.95 7480,-1258.95"/>
<text text-anchor="middle" x="7308" y="-1231.21" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge226" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7480.17,-1223.86C7620.08,-1216.12 7802.7,-1217.02 7853,-1268.45 7938.19,-1355.56 7833.55,-2255.96 7889,-2364.45 7977.05,-2536.75 8192.05,-2650.09 8292.13,-2695.29"/>
<polygon fill="black" stroke="black" points="8290.89,-2698.57 8301.45,-2699.45 8293.75,-2692.17 8290.89,-2698.57"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge227" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7480.13,-1235.47C7974.33,-1227.52 9373.81,-1209.86 9456,-1263.45 9646.13,-1387.42 9694.33,-1693.76 9704.86,-1788.25"/>
<polygon fill="black" stroke="black" points="9701.38,-1788.63 9705.92,-1798.2 9708.34,-1787.89 9701.38,-1788.63"/>
</g>
<!-- tg_client._load_progress -->
<g id="node153" class="node">
<title>tg_client._load_progress</title>
<g id="a_node153"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="2098,-1010.45 1768,-1010.45 1768,-974.45 2098,-974.45 2098,-1010.45"/>
<text text-anchor="middle" x="1933" y="-986.29" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge228" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1965.85,-974.21C2099.7,-899.32 2631.55,-619.45 3104.5,-619.45 3104.5,-619.45 3104.5,-619.45 8347,-619.45 8408.62,-619.45 9408.43,-599.29 9456,-638.45 9642.03,-791.61 9696.94,-1623.65 9706.04,-1788.18"/>
<polygon fill="black" stroke="black" points="9702.56,-1788.65 9706.6,-1798.45 9709.55,-1788.27 9702.56,-1788.65"/>
</g>
<!-- tg_client._save_progress -->
<g id="node154" class="node">
<title>tg_client._save_progress</title>
<g id="a_node154"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2615,-2416.45 2386,-2416.45 2386,-2380.45 2615,-2380.45 2615,-2416.45"/>
<text text-anchor="middle" x="2500.5" y="-2394.29" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node155" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node155"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3239,-2508.45 2972,-2508.45 2972,-2472.45 3239,-2472.45 3239,-2508.45"/>
<text text-anchor="middle" x="3105.5" y="-2484.58" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge229" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3239.02,-2497.14C3590.42,-2514.29 4575.26,-2558.45 5395.5,-2558.45 5395.5,-2558.45 5395.5,-2558.45 6218.5,-2558.45 6581.76,-2558.45 7493.36,-2531.32 7853,-2582.45 8012.91,-2605.19 8194.65,-2664.03 8285.98,-2696.01"/>
<polygon fill="black" stroke="black" points="8285,-2699.38 8295.6,-2699.39 8287.33,-2692.77 8285,-2699.38"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node156" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node156"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2063.5,-2462.45 1802.5,-2462.45 1802.5,-2426.45 2063.5,-2426.45 2063.5,-2462.45"/>
<text text-anchor="middle" x="1933" y="-2438.58" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge230" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2063.91,-2444.45C2279.9,-2444.45 2726.53,-2444.45 3104.5,-2444.45 3104.5,-2444.45 3104.5,-2444.45 3953,-2444.45 4169.74,-2444.45 7639.74,-2508.75 7853,-2547.45 8021.63,-2578.06 8210.41,-2656.61 8296.95,-2695.28"/>
<polygon fill="black" stroke="black" points="8295.69,-2698.55 8306.25,-2699.45 8298.56,-2692.16 8295.69,-2698.55"/>
</g>
<!-- tg_client._save_message -->
<g id="node157" class="node">
<title>tg_client._save_message</title>
<g id="a_node157"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4560,-3954.95 3344,-3954.95 3344,-3839.95 4560,-3839.95 4560,-3954.95"/>
<text text-anchor="middle" x="3952" y="-3873.34" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge231" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4560.08,-3891.7C4572.15,-3891.62 4584.14,-3891.53 4596,-3891.45 5607.55,-3884.68 6831.44,-3881.53 7198.14,-3880.69"/>
<polygon fill="black" stroke="black" points="7198.23,-3884.19 7208.22,-3880.67 7198.21,-3877.19 7198.23,-3884.19"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge232" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4560.29,-3859.15C4817.77,-3845.97 5121.17,-3834.45 5395.5,-3834.45 5395.5,-3834.45 5395.5,-3834.45 6218.5,-3834.45 6875.91,-3834.45 7647.65,-3834.45 8056.57,-3834.45"/>
<polygon fill="black" stroke="black" points="8056.77,-3837.95 8066.77,-3834.45 8056.77,-3830.95 8056.77,-3837.95"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge233" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4093.5,-3839.85C4503.56,-3671.72 5670.12,-3193.33 5672,-3191.45 5701.63,-3161.9 5676.13,-3131.57 5708,-3104.45 6074.89,-2792.21 6285.53,-2919.71 6763,-2855.45 7243.42,-2790.8 7371.57,-2873.12 7853,-2816.45 7999.61,-2799.2 8167.67,-2761.42 8264.56,-2737.84"/>
<polygon fill="black" stroke="black" points="8265.41,-2741.24 8274.29,-2735.46 8263.75,-2734.44 8265.41,-2741.24"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge234" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4012.3,-3955.05C4139.89,-4083.33 4438.71,-4408.07 4560,-4747.45 4600.62,-4861.12 4517.24,-5197.97 4596,-5289.45 4833.33,-5565.11 5031.75,-5464.45 5395.5,-5464.45 5395.5,-5464.45 5395.5,-5464.45 8347,-5464.45 8855.47,-5464.45 9159.05,-5596.2 9456,-5183.45 9519.5,-5095.18 9418.56,-4285.65 9492,-4205.45 9513.14,-4182.37 9543.23,-4171.42 9574.24,-4167.16"/>
<polygon fill="black" stroke="black" points="9574.8,-4170.62 9584.34,-4166 9574,-4163.66 9574.8,-4170.62"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge235" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4050.65,-3839.86C4180.55,-3759.32 4411.09,-3602.21 4560,-3419.45 4582.6,-3391.72 4566.86,-3368.21 4596,-3347.45 4636.36,-3318.7 4690.26,-3309.46 4737.09,-3307.94"/>
<polygon fill="black" stroke="black" points="4737.35,-3311.44 4747.28,-3307.73 4737.21,-3304.44 4737.35,-3311.44"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge236" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4367.18,-3954.96C4443.28,-3965.47 4522.03,-3976.32 4596,-3986.45 4627.08,-3990.71 4660.4,-3995.24 4692.11,-3999.55"/>
<polygon fill="black" stroke="black" points="4691.96,-4003.06 4702.34,-4000.93 4692.9,-3996.12 4691.96,-4003.06"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge237" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4148.68,-3955.02C4275.05,-3989.15 4443.73,-4029.04 4596,-4046.45 4811.93,-4071.14 4867.69,-4049.95 5085,-4046.45 5164.31,-4045.18 5254.96,-4042.07 5317.76,-4039.65"/>
<polygon fill="black" stroke="black" points="5318.12,-4043.14 5327.98,-4039.25 5317.85,-4036.14 5318.12,-4043.14"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge238" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4030.96,-3839.62C4148.24,-3751.82 4375.94,-3578.28 4560,-3419.45 4576.66,-3405.07 4575.93,-3394.47 4596,-3385.45 4795.01,-3296.04 4876.21,-3405.73 5085,-3342.45 5387.09,-3250.9 5418.95,-3128.28 5708,-3001.45 5857.7,-2935.77 6040.98,-2879.34 6141.55,-2850.33"/>
<polygon fill="black" stroke="black" points="6142.67,-2853.65 6151.32,-2847.52 6140.74,-2846.92 6142.67,-2853.65"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge239" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4560.22,-3914.58C4568.85,-3914.82 4577.37,-3915.06 4585.79,-3915.3"/>
<polygon fill="black" stroke="black" points="4585.9,-3918.8 4596,-3915.59 4586.1,-3911.8 4585.9,-3918.8"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge240" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4560.01,-3950.37C4572.11,-3951.1 4584.11,-3951.8 4596,-3952.45 4791.2,-3963.23 5013.53,-3968.2 5174.1,-3970.5"/>
<polygon fill="black" stroke="black" points="5174.06,-3974 5184.11,-3970.64 5174.16,-3967 5174.06,-3974"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge241" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4389.16,-3839.92C4458.26,-3832.33 4529.01,-3825.47 4596,-3820.45 5023.29,-3788.47 5515.45,-3777.2 5844.22,-3773.31"/>
<polygon fill="black" stroke="black" points="5844.43,-3776.81 5854.39,-3773.2 5844.35,-3769.81 5844.43,-3776.81"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge242" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4323.01,-3954.99C4412.7,-3986.11 4499.93,-4033.95 4560,-4107.45 4636.61,-4201.19 4551.27,-4264.96 4596,-4377.45 4646.15,-4503.58 4753.63,-4626.43 4807.44,-4683.03"/>
<polygon fill="black" stroke="black" points="4805.22,-4685.77 4814.66,-4690.57 4810.27,-4680.92 4805.22,-4685.77"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge243" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3802.09,-3955.06C3821.06,-3965.58 3871.04,-3972.95 3952,-3972.95 4022.21,-3972.95 4069.12,-3967.41 4092.71,-3959.07"/>
<polygon fill="black" stroke="black" points="4094.15,-3962.27 4101.91,-3955.06 4091.35,-3955.85 4094.15,-3962.27"/>
</g>
<!-- tg_client._save_media -->
<g id="node158" class="node">
<title>tg_client._save_media</title>
<g id="a_node158"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5637.5,-4131.45 5155.5,-4131.45 5155.5,-4077.45 5637.5,-4077.45 5637.5,-4131.45"/>
<text text-anchor="middle" x="5396.5" y="-4093.85" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge244" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4131.04,-3955.01C4258.95,-3993.7 4436.28,-4041.94 4596,-4066.45 4778.45,-4094.45 4986.81,-4103.62 5145.08,-4105.97"/>
<polygon fill="black" stroke="black" points="5145.38,-4109.47 5155.43,-4106.11 5145.48,-4102.47 5145.38,-4109.47"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge246" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5535.73,-4131.52C5587.15,-4148.91 5640.59,-4177.29 5672,-4223.45 5739.79,-4323.09 5625.11,-5219.98 5708,-5307.45 5874.84,-5483.51 7646.45,-5400.34 7889,-5400.45 7990.56,-5400.5 8726.61,-5467.37 8803,-5400.45 8848.7,-5360.42 8815.38,-5185.43 8839,-5129.45 8906.12,-4970.36 9055.98,-4821.26 9118.38,-4763.6"/>
<polygon fill="black" stroke="black" points="9120.89,-4766.04 9125.9,-4756.71 9116.16,-4760.89 9120.89,-4766.04"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge247" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5534.14,-4131.51C5585.81,-4148.92 5639.86,-4177.32 5672,-4223.45 5713.29,-4282.71 5657.67,-4820.66 5708,-4872.45 5791.12,-4957.99 7758.29,-5033.94 7853,-4961.45 7901.63,-4924.23 7841.32,-4866.88 7889,-4828.45 7997.59,-4740.92 8172.33,-4762.85 8270.99,-4785.12"/>
<polygon fill="black" stroke="black" points="8270.35,-4788.56 8280.88,-4787.41 8271.93,-4781.75 8270.35,-4788.56"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge245" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5636.15,-4077.39C5648.47,-4073.34 5660.5,-4068.72 5672,-4063.45 5691.2,-4054.66 5688.46,-4040.46 5708,-4032.45 5830.64,-3982.21 5983.86,-3979.12 6089.88,-3985.21"/>
<polygon fill="black" stroke="black" points="6089.8,-3988.71 6099.99,-3985.82 6090.22,-3981.72 6089.8,-3988.71"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge248" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5637.66,-4081.09C5661.41,-4079.29 5685.17,-4077.69 5708,-4076.45 6241.34,-4047.44 6876.05,-4045.09 7158.61,-4045.71"/>
<polygon fill="black" stroke="black" points="7158.91,-4049.21 7168.92,-4045.74 7158.93,-4042.21 7158.91,-4049.21"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node159" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node159"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3308,-3377.45 2903,-3377.45 2903,-3335.45 3308,-3335.45 3308,-3377.45"/>
<text text-anchor="middle" x="3105.5" y="-3348.36" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge249" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3139.35,-3377.49C3257.4,-3453.12 3663.19,-3713.08 3852.41,-3834.29"/>
<polygon fill="black" stroke="black" points="3850.67,-3837.34 3860.98,-3839.78 3854.45,-3831.44 3850.67,-3837.34"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node160" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node160"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7593,-5090.45 7023,-5090.45 7023,-5046.45 7593,-5046.45 7593,-5090.45"/>
<text text-anchor="middle" x="7308" y="-5060.13" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge250" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7593.11,-5079.93C7689.63,-5068.29 7789.11,-5036.16 7853,-4961.45 7920.79,-4882.18 7829.41,-4109.05 7889,-4023.45 7941.38,-3948.2 8029.63,-3902.84 8114.61,-3875.53"/>
<polygon fill="black" stroke="black" points="8115.66,-3878.86 8124.15,-3872.53 8113.56,-3872.19 8115.66,-3878.86"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge251" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7593.26,-5062.13C7897.96,-5049.03 8393.16,-5009.41 8803,-4890.45 8916.42,-4857.53 9041.26,-4795.13 9104.61,-4761.42"/>
<polygon fill="black" stroke="black" points="9106.34,-4764.47 9113.51,-4756.67 9103.04,-4758.3 9106.34,-4764.47"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge252" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7593.07,-5079.29C7703.05,-5077.5 7812.27,-5066.37 7853,-5032.45 7903.04,-4990.79 7838.91,-4932.04 7889,-4890.45 8045.58,-4760.44 8643.79,-4959.23 8803,-4832.45 8846.89,-4797.5 8795.54,-4746.93 8839,-4711.45 8895.16,-4665.61 8977.82,-4660.68 9043.3,-4666.22"/>
<polygon fill="black" stroke="black" points="9043.37,-4669.74 9053.65,-4667.19 9044.02,-4662.77 9043.37,-4669.74"/>
</g>
<!-- tg_client._download_messages -->
<g id="node161" class="node">
<title>tg_client._download_messages</title>
<g id="a_node161"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2855.5,-2938.95 2145.5,-2938.95 2145.5,-2881.95 2855.5,-2881.95 2855.5,-2938.95"/>
<text text-anchor="middle" x="2500.5" y="-2899.11" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge253" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2551.69,-2939.01C2630.1,-2986.11 2781.53,-3087.42 2867,-3212.45 2895.79,-3254.57 2864.37,-3288.12 2903,-3321.45 2906.5,-3324.47 2910.16,-3327.27 2913.96,-3329.87"/>
<polygon fill="black" stroke="black" points="2912.17,-3332.88 2922.49,-3335.24 2915.89,-3326.95 2912.17,-3332.88"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node162" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node162"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2671.5,-591.45 2329.5,-591.45 2329.5,-555.45 2671.5,-555.45 2671.5,-591.45"/>
<text text-anchor="middle" x="2500.5" y="-567.76" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node163" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node163"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2867,-2808.95 2134,-2808.95 2134,-2743.95 2867,-2743.95 2867,-2808.95"/>
<text text-anchor="middle" x="2500.5" y="-2763.4" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge254" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2867.1,-2797.56C3506.49,-2842.48 4788.21,-2970.69 5085,-3288.45 5170.94,-3380.47 5032.48,-3479.92 5121,-3569.45 5306.21,-3756.78 5445.94,-3624.74 5708,-3651.45 6175.44,-3699.1 6293.74,-3695.72 6763,-3719.45 7005.08,-3731.69 7615.05,-3713.29 7853,-3759.45 7869.7,-3762.69 7872.48,-3768.4 7889,-3772.45 7942.71,-3785.64 8000.71,-3796.23 8056.75,-3804.66"/>
<polygon fill="black" stroke="black" points="8056.42,-3808.15 8066.83,-3806.16 8057.45,-3801.23 8056.42,-3808.15"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge255" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2828.69,-2743.95C2853.82,-2741.92 2878.81,-2740.06 2903,-2738.45 3368.09,-2707.59 3484.88,-2698.45 3951,-2698.45 3951,-2698.45 3951,-2698.45 6218.5,-2698.45 7011.25,-2698.45 7970.17,-2711.82 8258.8,-2716.13"/>
<polygon fill="black" stroke="black" points="8259.14,-2719.64 8269.19,-2716.29 8259.24,-2712.64 8259.14,-2719.64"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge259" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2675.92,-2743.92C2746.26,-2731.7 2828.29,-2718.57 2903,-2709.45 4611.05,-2500.97 5043.84,-2483.02 6763,-2409.45 7619.62,-2372.79 8650.95,-2383.03 9013.05,-2388.26"/>
<polygon fill="black" stroke="black" points="9013.26,-2391.77 9023.31,-2388.41 9013.36,-2384.77 9013.26,-2391.77"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge260" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2569.79,-2743.83C2648.62,-2707.16 2782.89,-2647.77 2903,-2609.45 3078.86,-2553.36 3132.05,-2573.25 3308,-2517.45 4138.72,-2254 4270.23,-1959.4 5121,-1770.45 5834.18,-1612.06 6032.86,-1719.19 6763,-1694.45 7320.52,-1675.56 7988.94,-1665.25 8241.55,-1661.79"/>
<polygon fill="black" stroke="black" points="8241.86,-1665.29 8251.81,-1661.65 8241.76,-1658.29 8241.86,-1665.29"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge256" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2867.04,-2769.78C2905.6,-2769.08 2942.68,-2768.4 2975.62,-2767.8"/>
<polygon fill="black" stroke="black" points="2975.78,-2771.3 2985.71,-2767.62 2975.65,-2764.3 2975.78,-2771.3"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge257" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2779,-2809.1C2812.66,-2823.84 2843.42,-2844.28 2867,-2872.45 2931.25,-2949.21 2835.55,-3247.49 2903,-3321.45 2905.39,-3324.08 2907.91,-3326.55 2910.53,-3328.88"/>
<polygon fill="black" stroke="black" points="2908.71,-3331.91 2918.7,-3335.44 2913.09,-3326.45 2908.71,-3331.91"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge258" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2778.36,-2809.06C2812.22,-2823.79 2843.21,-2844.24 2867,-2872.45 2926.11,-2942.54 2838.77,-3218.03 2903,-3283.45 2966.41,-3348.04 3245.65,-3260.85 3308,-3326.45 3358.21,-3379.29 3306.65,-3918.86 3344,-3981.45 3678.4,-4541.82 4015.18,-4450.99 4596,-4748.45 4805.75,-4855.87 4930.59,-4775.43 5085,-4953.45 5126.53,-5001.34 5070.84,-5052.7 5121,-5091.45 5194.48,-5148.22 6433.36,-5104.74 7012.7,-5081.12"/>
<polygon fill="black" stroke="black" points="7013.03,-5084.61 7022.88,-5080.7 7012.74,-5077.62 7013.03,-5084.61"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node164" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node164"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-2527.45 1019,-2527.45 1019,-2453.45 1732,-2453.45 1732,-2527.45"/>
<text text-anchor="middle" x="1375.5" y="-2475.63" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge261" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1732.21,-2508.52C2359.57,-2538.79 3703.8,-2596.45 4839.5,-2596.45 4839.5,-2596.45 4839.5,-2596.45 6218.5,-2596.45 6581.75,-2596.45 7491.87,-2576.29 7853,-2615.45 8001.88,-2631.6 8172.34,-2671.96 8268.48,-2696.8"/>
<polygon fill="black" stroke="black" points="8267.85,-2700.25 8278.41,-2699.37 8269.61,-2693.47 8267.85,-2700.25"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge262" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1719.39,-2453.27C1723.69,-2450.48 1727.9,-2447.54 1732,-2444.45 1764.13,-2420.27 1747.57,-2396.08 1768,-2361.45 2038.58,-1902.78 1966.96,-1412.45 2499.5,-1412.45 2499.5,-1412.45 2499.5,-1412.45 5397.5,-1412.45 6007.75,-1412.45 6154.7,-1317.27 6763,-1268.45 6883.8,-1258.76 7019.93,-1251.25 7125.8,-1246.17"/>
<polygon fill="black" stroke="black" points="7126.13,-1249.66 7135.95,-1245.69 7125.8,-1242.67 7126.13,-1249.66"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge263" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1723.23,-2453.38C1726.25,-2450.53 1729.17,-2447.56 1732,-2444.45 1771.13,-2401.45 1755.93,-1455.33 1768,-1398.45 1799.75,-1248.85 1882.88,-1083.66 1917.02,-1019.76"/>
<polygon fill="black" stroke="black" points="1920.22,-1021.2 1921.88,-1010.73 1914.06,-1017.88 1920.22,-1021.2"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge264" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1708.19,-2453.34C1716.27,-2450.57 1724.22,-2447.62 1732,-2444.45 1750.53,-2436.92 1749.11,-2424.02 1768,-2417.45 1971.65,-2346.62 2226.8,-2361.36 2375.64,-2379.34"/>
<polygon fill="black" stroke="black" points="2375.38,-2382.83 2385.73,-2380.58 2376.24,-2375.88 2375.38,-2382.83"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge265" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1732.19,-2490.45C2111.85,-2490.45 2694.73,-2490.45 2961.85,-2490.45"/>
<polygon fill="black" stroke="black" points="2962,-2493.95 2972,-2490.45 2962,-2486.95 2962,-2493.95"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge266" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1732.24,-2460.99C1753.08,-2459.27 1773.28,-2457.6 1792.33,-2456.02"/>
<polygon fill="black" stroke="black" points="1792.8,-2459.49 1802.48,-2455.18 1792.22,-2452.52 1792.8,-2459.49"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge267" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1451.27,-2527.47C1585.44,-2592.8 1877.06,-2729.92 2134,-2817.45 2206.07,-2842 2288.08,-2863.44 2356.13,-2879.52"/>
<polygon fill="black" stroke="black" points="2355.53,-2882.98 2366.06,-2881.86 2357.13,-2876.16 2355.53,-2882.98"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node165" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node165"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7624.5,-4707.95 6991.5,-4707.95 6991.5,-4646.95 7624.5,-4646.95 7624.5,-4707.95"/>
<text text-anchor="middle" x="7308" y="-4665.2" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge268" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7624.66,-4677.66C7710.57,-4661.55 7795.63,-4627.7 7853,-4561.45 7931.45,-4470.88 7819.15,-4120.81 7889,-4023.45 7942.99,-3948.2 8032.66,-3902.8 8118.27,-3875.46"/>
<polygon fill="black" stroke="black" points="8119.38,-3878.78 8127.88,-3872.46 8117.29,-3872.1 8119.38,-3878.78"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge269" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7624.7,-4679.52C7711.27,-4663.6 7796.69,-4629.39 7853,-4561.45 7907.26,-4495.99 7848.56,-3106.24 7889,-3031.45 7974.56,-2873.2 8178.74,-2778.51 8282.37,-2739.03"/>
<polygon fill="black" stroke="black" points="8283.65,-2742.29 8291.77,-2735.49 8281.18,-2735.74 8283.65,-2742.29"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge270" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7624.62,-4687.93C8045.75,-4701.91 8769.79,-4725.95 9040.38,-4734.93"/>
<polygon fill="black" stroke="black" points="9040.48,-4738.43 9050.6,-4735.27 9040.72,-4731.44 9040.48,-4738.43"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge271" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7624.62,-4678.65C8047.52,-4680.27 8775.89,-4683.04 9043.78,-4684.06"/>
<polygon fill="black" stroke="black" points="9043.87,-4687.56 9053.88,-4684.1 9043.89,-4680.56 9043.87,-4687.56"/>
</g>
<!-- tg_client.main -->
<g id="node166" class="node">
<title>tg_client.main</title>
<g id="a_node166"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-3053.45 366.5,-3053.45 366.5,-2961.45 934.5,-2961.45 934.5,-3053.45"/>
<text text-anchor="middle" x="650.5" y="-2988.41" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge272" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M736.36,-3053.5C937.65,-3158.26 1462.33,-3405.45 1932,-3405.45 1932,-3405.45 1932,-3405.45 3106.5,-3405.45 3726.31,-3405.45 4469.13,-3347.33 4736.97,-3324.5"/>
<polygon fill="black" stroke="black" points="4737.4,-3327.98 4747.06,-3323.64 4736.8,-3321 4737.4,-3327.98"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge273" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M665.73,-2961.39C702.92,-2849.81 814.55,-2565.38 1019,-2444.45 1087.94,-2403.67 1178.03,-2397.22 1250.27,-2400.82"/>
<polygon fill="black" stroke="black" points="1250.15,-2404.31 1260.34,-2401.39 1250.55,-2397.33 1250.15,-2404.31"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge274" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M651.58,-3053.55C654.27,-3236.02 687.07,-3917.36 1019,-4318.45 1307.93,-4667.58 1478.82,-4772.45 1932,-4772.45 1932,-4772.45 1932,-4772.45 2501.5,-4772.45 2933.77,-4772.45 3438.56,-4774.7 3723.92,-4776.18"/>
<polygon fill="black" stroke="black" points="3723.96,-4779.69 3733.98,-4776.24 3724,-4772.69 3723.96,-4779.69"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge275" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M934.69,-3047.74C1453.44,-3121.55 2540.2,-3276.17 2946.63,-3333.99"/>
<polygon fill="black" stroke="black" points="2946.3,-3337.48 2956.69,-3335.42 2947.29,-3330.55 2946.3,-3337.48"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge276" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M670.58,-2961.44C766.85,-2732.24 1216.34,-1695.65 1768,-965.45 1905.54,-783.4 1926.82,-701.03 2134,-605.45 2190.84,-579.23 2257.91,-568.42 2318.97,-565.06"/>
<polygon fill="black" stroke="black" points="2319.29,-568.55 2329.11,-564.57 2318.95,-561.56 2319.29,-568.55"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge277" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M934.69,-2972.05C1286.73,-2928.05 1883.31,-2853.48 2229.24,-2810.23"/>
<polygon fill="black" stroke="black" points="2229.92,-2813.68 2239.4,-2808.96 2229.05,-2806.73 2229.92,-2813.68"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge278" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M715.98,-2961.34C854.63,-2862.2 1179.47,-2629.91 1314.25,-2533.54"/>
<polygon fill="black" stroke="black" points="1316.36,-2536.33 1322.46,-2527.67 1312.29,-2530.64 1316.36,-2536.33"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge279" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M669.42,-3053.61C762.44,-3284.66 1213.72,-4304.45 1932,-4304.45 1932,-4304.45 1932,-4304.45 5397.5,-4304.45 6021.34,-4304.45 6149.32,-4517.32 6763,-4629.45 6833.15,-4642.27 6909.03,-4651.7 6981.23,-4658.63"/>
<polygon fill="black" stroke="black" points="6981.11,-4662.13 6991.39,-4659.59 6981.77,-4655.16 6981.11,-4662.13"/>
</g>
<!-- pending_chop.main -->
<g id="node167" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7471.5,-4124.45 7144.5,-4124.45 7144.5,-4082.45 7471.5,-4082.45 7471.5,-4124.45"/>
<text text-anchor="middle" x="7308" y="-4095.36" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge285" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7471.7,-4114.44C7610.29,-4120.28 7795.79,-4118.62 7853,-4073.45 7897.04,-4038.68 7848.62,-3991.41 7889,-3952.45 7934.95,-3908.13 7995.28,-3879.86 8056.96,-3861.99"/>
<polygon fill="black" stroke="black" points="8058.18,-3865.28 8066.86,-3859.2 8056.29,-3858.54 8058.18,-3865.28"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge286" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7471.73,-4109.58C7661.4,-4116.72 7973.69,-4128.47 8168.91,-4135.82"/>
<polygon fill="black" stroke="black" points="8168.86,-4139.32 8178.98,-4136.2 8169.12,-4132.33 8168.86,-4139.32"/>
</g>
<!-- check_translations.parse_po -->
<g id="node168" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-4923.45 1083.5,-4923.45 1083.5,-4871.45 1667.5,-4871.45 1667.5,-4923.45"/>
<text text-anchor="middle" x="1375.5" y="-4887.76" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node169" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-4919.95 318,-4919.95 318,-4874.95 983,-4874.95 983,-4919.95"/>
<text text-anchor="middle" x="650.5" y="-4889.07" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge287" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-4897.45C1013.14,-4897.45 1043.45,-4897.45 1073.19,-4897.45"/>
<polygon fill="black" stroke="black" points="1073.26,-4900.95 1083.26,-4897.45 1073.26,-4893.95 1073.26,-4900.95"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node170" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node170"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="7717,-1938.95 6899,-1938.95 6899,-1881.95 7717,-1881.95 7717,-1938.95"/>
<text text-anchor="middle" x="7308" y="-1899.11" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge288" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7717.39,-1893.33C8093.19,-1884.05 8619.2,-1889.36 8803,-1980.45 8977.34,-2066.86 9096.41,-2286.5 9133.89,-2363.38"/>
<polygon fill="black" stroke="black" points="9130.76,-2364.94 9138.25,-2372.44 9137.07,-2361.91 9130.76,-2364.94"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge289" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7717.29,-1894.55C7765.59,-1880.82 7812.15,-1861.17 7853,-1833.45 7879.69,-1815.35 7863.21,-1789.82 7889,-1770.45 7992.09,-1693.03 8142.06,-1669.3 8241.51,-1662.46"/>
<polygon fill="black" stroke="black" points="8241.82,-1665.95 8251.57,-1661.81 8241.37,-1658.96 8241.82,-1665.95"/>
</g>
<!-- pending_embed.main -->
<g id="node171" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6479.5,-2165.45 5955.5,-2165.45 5955.5,-2105.45 6479.5,-2105.45 6479.5,-2165.45"/>
<text text-anchor="middle" x="6217.5" y="-2123.93" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge290" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6333.75,-2105.42C6450.59,-2082.68 6627.9,-2070.76 6727,-2174.45 6815.55,-2267.12 6672.32,-3236.86 6763,-3327.45 6805.86,-3370.27 7797.16,-3336.94 7853,-3360.45 8070.48,-3452.02 8247.08,-3687.55 8314.99,-3787.97"/>
<polygon fill="black" stroke="black" points="8312.17,-3790.05 8320.65,-3796.4 8317.98,-3786.14 8312.17,-3790.05"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge291" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6349.47,-2105.43C6463.55,-2087.62 6626.06,-2083.6 6727,-2174.45 6792.83,-2233.7 6698.49,-2309.76 6763,-2370.45 6882.2,-2482.61 7086.87,-2473.83 7208.3,-2456"/>
<polygon fill="black" stroke="black" points="7208.98,-2459.44 7218.34,-2454.48 7207.93,-2452.52 7208.98,-2459.44"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge292" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6479.67,-2138.18C6802.35,-2141.81 7368.17,-2149 7853,-2159.45 7982.05,-2162.24 8130.12,-2166.61 8229.82,-2169.73"/>
<polygon fill="black" stroke="black" points="8229.81,-2173.23 8239.92,-2170.04 8230.03,-2166.23 8229.81,-2173.23"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge294" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6479.84,-2150.66C6569.58,-2155.67 6670.68,-2161.07 6763,-2165.45 7296.94,-2190.79 7932.6,-2213.99 8207.3,-2223.68"/>
<polygon fill="black" stroke="black" points="8207.2,-2227.17 8217.32,-2224.03 8207.45,-2220.18 8207.2,-2227.17"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge293" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6359.81,-2105.37C6479.01,-2071.99 6643.2,-2005.45 6727,-1880.45 6786.32,-1791.97 6685.15,-1475.16 6763,-1402.45 6816.37,-1352.61 7873.2,-1378 8229.14,-1388.01"/>
<polygon fill="black" stroke="black" points="8229.11,-1391.51 8239.21,-1388.3 8229.31,-1384.52 8229.11,-1391.51"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge295" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6332.69,-2105.41C6449.76,-2082.27 6628.25,-2069.66 6727,-2174.45 6806.61,-2258.93 6680.22,-4182.09 6763,-4263.45 6843.84,-4342.91 8689.77,-4228.8 8803,-4223.45 8815.83,-4222.85 8828.94,-4222.21 8842.17,-4221.57"/>
<polygon fill="black" stroke="black" points="8842.5,-4225.05 8852.32,-4221.07 8842.16,-4218.06 8842.5,-4225.05"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge296" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6360.26,-2105.39C6479.52,-2072.04 6643.58,-2005.55 6727,-1880.45 6790.16,-1785.74 6679.9,-1447.25 6763,-1369.45 6804.37,-1330.72 8748.8,-1347.92 8803,-1364.45 8937.97,-1405.61 9067.96,-1519.52 9121.22,-1570.37"/>
<polygon fill="black" stroke="black" points="9118.88,-1572.98 9128.51,-1577.4 9123.74,-1567.94 9118.88,-1572.98"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge297" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6363.89,-2105.4C6571.37,-2062.51 6950.35,-1984.17 7159.17,-1941.01"/>
<polygon fill="black" stroke="black" points="7159.9,-1944.43 7168.98,-1938.98 7158.48,-1937.58 7159.9,-1944.43"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node172" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node172"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8496.5,-4660.45 8195.5,-4660.45 8195.5,-4624.45 8496.5,-4624.45 8496.5,-4660.45"/>
<text text-anchor="middle" x="8346" y="-4638.41" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node173" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6451.5,-4276.45 5983.5,-4276.45 5983.5,-4224.45 6451.5,-4224.45 6451.5,-4276.45"/>
<text text-anchor="middle" x="6217.5" y="-4240.31" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge298" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6379.76,-4224.41C6487.89,-4207.97 6633.63,-4187.77 6763,-4176.45 6823.37,-4171.17 7806.92,-4172.81 7853,-4133.45 7915.36,-4080.18 7832.68,-4012.08 7889,-3952.45 7933.6,-3905.24 7994.42,-3875.96 8057.1,-3858.04"/>
<polygon fill="black" stroke="black" points="8058.06,-3861.41 8066.76,-3855.37 8056.19,-3854.66 8058.06,-3861.41"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge301" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6238.16,-4276.53C6302.44,-4359.45 6516.5,-4617.42 6763,-4716.45 7037.65,-4826.8 7968.45,-4814.52 8258.18,-4807.8"/>
<polygon fill="black" stroke="black" points="8258.3,-4811.3 8268.21,-4807.56 8258.13,-4804.3 8258.3,-4811.3"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge300" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6451.65,-4257.24C6548.02,-4259.73 6660.88,-4262.23 6763,-4263.45 7005.2,-4266.34 7653.43,-4400.73 7853,-4263.45 7889.86,-4238.1 7852.91,-4195.88 7889,-4169.45 7932.74,-4137.42 8059.84,-4131.9 8168.78,-4133.71"/>
<polygon fill="black" stroke="black" points="8168.86,-4137.22 8178.92,-4133.9 8168.99,-4130.22 8168.86,-4137.22"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge299" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6451.68,-4247.45C6675.78,-4244.57 7005.81,-4240.33 7183.26,-4238.04"/>
<polygon fill="black" stroke="black" points="7183.47,-4241.54 7193.42,-4237.91 7183.38,-4234.54 7183.47,-4241.54"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge302" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6321.49,-4224.43C6436.48,-4202.17 6620.39,-4187.96 6727,-4290.45 6825.08,-4384.75 6662.68,-4502.55 6763,-4594.45 6788.97,-4618.25 7788.85,-4634.73 8185.37,-4640.34"/>
<polygon fill="black" stroke="black" points="8185.44,-4643.84 8195.49,-4640.48 8185.54,-4636.84 8185.44,-4643.84"/>
</g>
<!-- scan_ontology:cli -->
<g id="node175" class="node">
<title>scan_ontology:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1933" cy="-4835.45" rx="44.19" ry="18"/>
<text text-anchor="middle" x="1933" y="-4833.85" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;scan_ontology:cli -->
<!-- chop:cli -->
<g id="node176" class="node">
<title>chop:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2500.5" cy="-4835.45" rx="27" ry="18"/>
<text text-anchor="middle" x="2500.5" y="-4833.85" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;chop:cli -->
<!-- moderation:cli -->
<g id="node177" class="node">
<title>moderation:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3105.5" cy="-4835.45" rx="38.53" ry="18"/>
<text text-anchor="middle" x="3105.5" y="-4833.85" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;moderation:cli -->
<!-- telegram_bot:cli -->
<g id="node178" class="node">
<title>telegram_bot:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3952" cy="-4835.45" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="3952" y="-4831.29" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;telegram_bot:cli -->
<!-- build_site:cli -->
<g id="node179" class="node">
<title>build_site:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4959.45" rx="34.71" ry="18"/>
<text text-anchor="middle" x="141" y="-4957.85" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- caption:cli -->
<g id="node180" class="node">
<title>caption:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4959.45" rx="30.28" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4957.85" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;caption:cli -->
<!-- clean_data:cli -->
<g id="node181" class="node">
<title>clean_data:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4959.45" rx="37.29" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4957.85" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;clean_data:cli -->
<!-- embed:cli -->
<g id="node182" class="node">
<title>embed:cli</title>
<g id="a_node182"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1933" cy="-4959.45" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1933" y="-4957.85" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;embed:cli -->
<!-- tg_client:cli -->
<g id="node183" class="node">
<title>tg_client:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2500.5" cy="-4959.45" rx="32.86" ry="18"/>
<text text-anchor="middle" x="2500.5" y="-4957.85" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;tg_client:cli -->
<!-- pending_chop:cli -->
<g id="node184" class="node">
<title>pending_chop:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3105.5" cy="-4959.45" rx="42.96" ry="18"/>
<text text-anchor="middle" x="3105.5" y="-4957.85" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;pending_chop:cli -->
<!-- check_translations:cli -->
<g id="node185" class="node">
<title>check_translations:cli</title>
<g id="a_node185"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3952" cy="-4959.45" rx="53.05" ry="18"/>
<text text-anchor="middle" x="3952" y="-4957.85" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;check_translations:cli -->
<!-- pending_embed:cli -->
<g id="node186" class="node">
<title>pending_embed:cli</title>
<g id="a_node186"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-5013.45" rx="47.39" ry="18"/>
<text text-anchor="middle" x="141" y="-5011.85" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli -->
<g id="node187" class="node">
<title>pending_caption:cli</title>
<g id="a_node187"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-5013.45" rx="48.62" ry="18"/>
<text text-anchor="middle" x="650.5" y="-5011.85" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli&#45;&gt;pending_caption:cli -->
<!-- build_site -->
<g id="node188" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-813.45" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-809.75" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge315" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M4896.65,-813.45C4965.51,-813.45 5087.18,-813.45 5193.12,-813.45"/>
<polygon fill="black" stroke="black" points="5193.32,-816.95 5203.32,-813.45 5193.32,-809.95 5193.32,-816.95"/>
</g>
<!-- caption -->
<g id="node189" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-5262.45" rx="44.69" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-5258.75" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge316" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M4885.43,-5262.45C4973.12,-5262.45 5171.86,-5262.45 5293.75,-5262.45"/>
<polygon fill="black" stroke="black" points="5293.85,-5265.95 5303.85,-5262.45 5293.85,-5258.95 5293.85,-5265.95"/>
</g>
<!-- check_translations -->
<g id="node190" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4897.45" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-4893.75" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge317" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-4897.45C259.3,-4897.45 282.99,-4897.45 307.97,-4897.45"/>
<polygon fill="black" stroke="black" points="307.99,-4900.95 317.99,-4897.45 307.99,-4893.95 307.99,-4900.95"/>
</g>
<!-- chop -->
<g id="node191" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-4350.45" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-4346.75" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge318" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4873.28,-4350.45C4956.91,-4350.45 5185.32,-4350.45 5310.56,-4350.45"/>
<polygon fill="black" stroke="black" points="5310.88,-4353.95 5320.88,-4350.45 5310.88,-4346.95 5310.88,-4353.95"/>
</g>
<!-- clean_data -->
<g id="node192" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-3445.45" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-3441.75" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge319" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5456.32,-3444.7C5512.77,-3442.56 5599.86,-3435.53 5672,-3413.45 5877.98,-3350.42 6098.51,-3210.86 6181.91,-3155.12"/>
<polygon fill="black" stroke="black" points="6183.89,-3158.01 6190.24,-3149.53 6179.99,-3152.19 6183.89,-3158.01"/>
</g>
<!-- debug_dump -->
<g id="node193" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-3542.45" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-3538.75" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge320" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5466.97,-3542.45C5576.85,-3542.45 5796.02,-3542.45 5969.11,-3542.45"/>
<polygon fill="black" stroke="black" points="5969.13,-3545.95 5979.13,-3542.45 5969.13,-3538.95 5969.13,-3545.95"/>
</g>
<!-- embed -->
<g id="node194" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-1797.45" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-1793.75" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge321" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5438.96,-1797.45C5564,-1797.45 5939.8,-1797.45 6119.17,-1797.45"/>
<polygon fill="black" stroke="black" points="6119.39,-1800.95 6129.39,-1797.45 6119.39,-1793.95 6119.39,-1800.95"/>
</g>
<!-- moderation -->
<g id="node195" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6217.5" cy="-2647.45" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6217.5" y="-2643.75" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge322" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6281.33,-2647.45C6425.86,-2647.45 6788.9,-2647.45 7041.78,-2647.45"/>
<polygon fill="black" stroke="black" points="7041.85,-2650.95 7051.85,-2647.45 7041.85,-2643.95 7041.85,-2650.95"/>
</g>
<!-- pending_caption -->
<g id="node196" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-4250.45" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-4246.75" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge323" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5483.6,-4250.45C5598.75,-4250.45 5807.57,-4250.45 5972.94,-4250.45"/>
<polygon fill="black" stroke="black" points="5973.26,-4253.95 5983.26,-4250.45 5973.26,-4246.95 5973.26,-4253.95"/>
</g>
<!-- pending_chop -->
<g id="node197" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6217.5" cy="-4103.45" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6217.5" y="-4099.75" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge324" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6292.46,-4103.45C6463.93,-4103.45 6892.37,-4103.45 7134.07,-4103.45"/>
<polygon fill="black" stroke="black" points="7134.37,-4106.95 7144.37,-4103.45 7134.37,-4099.95 7134.37,-4106.95"/>
</g>
<!-- pending_embed -->
<g id="node198" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-2135.45" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-2131.75" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge325" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5480.54,-2135.45C5588.78,-2135.45 5783.39,-2135.45 5945.31,-2135.45"/>
<polygon fill="black" stroke="black" points="5945.43,-2138.95 5955.43,-2135.45 5945.43,-2131.95 5945.43,-2138.95"/>
</g>
<!-- scan_ontology -->
<g id="node199" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4840.5" cy="-1637.45" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4840.5" y="-1633.75" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge326" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M4916.79,-1637.45C4979.32,-1637.45 5071.8,-1637.45 5158.85,-1637.45"/>
<polygon fill="black" stroke="black" points="5158.88,-1640.95 5168.88,-1637.45 5158.88,-1633.95 5158.88,-1640.95"/>
</g>
<!-- similar -->
<g id="node200" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5396.5" cy="-1537.45" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5396.5" y="-1533.75" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge327" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5439.52,-1537.45C5561.29,-1537.45 5917.39,-1537.45 6102.22,-1537.45"/>
<polygon fill="black" stroke="black" points="6102.24,-1540.95 6112.24,-1537.45 6102.24,-1533.95 6102.24,-1540.95"/>
</g>
<!-- telegram_bot -->
<g id="node201" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="3952" cy="-964.45" rx="72.29" ry="18"/>
<text text-anchor="middle" x="3952" y="-960.75" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge328" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4023.67,-966.76C4161.46,-971.27 4469.61,-981.35 4665.27,-987.75"/>
<polygon fill="black" stroke="black" points="4665.27,-991.25 4675.37,-988.08 4665.49,-984.26 4665.27,-991.25"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge329" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4023.67,-962.14C4161.36,-957.64 4469.16,-947.57 4664.84,-941.17"/>
<polygon fill="black" stroke="black" points="4665.07,-944.66 4674.95,-940.84 4664.84,-937.66 4665.07,-944.66"/>
</g>
<!-- tg_client -->
<g id="node202" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-3007.45" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-3003.75" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge330" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-3007.45C232.34,-3007.45 292.58,-3007.45 356.22,-3007.45"/>
<polygon fill="black" stroke="black" points="356.46,-3010.95 366.46,-3007.45 356.46,-3003.95 356.46,-3010.95"/>
</g>
</g>
</svg>
