<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="8018pt" height="5337pt"
 viewBox="0.00 0.00 8018.00 5336.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5332.6)">
<title>callgraph</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-5332.6 8014,-5332.6 8014,4 -4,4"/>
<!-- moderation.should_skip_text -->
<g id="node1" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node1"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="7944,-1613.6 7716,-1613.6 7716,-1577.6 7944,-1577.6 7944,-1613.6"/>
<text text-anchor="middle" x="7830" y="-1589.13" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node2" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node2"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="7930.5,-4131.6 7729.5,-4131.6 7729.5,-4095.6 7930.5,-4095.6 7930.5,-4131.6"/>
<text text-anchor="middle" x="7830" y="-4108.11" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason -->
<g id="node3" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node3"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="7614,-1619.76 7146,-1619.76 7146,-1571.44 7614,-1571.44 7614,-1619.76"/>
<text text-anchor="middle" x="7380" y="-1583.84" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge1" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M7614.19,-1595.6C7645.2,-1595.6 7675.99,-1595.6 7704.15,-1595.6"/>
<polygon fill="black" stroke="black" points="7704.13,-1599.1 7714.13,-1595.6 7704.13,-1592.1 7704.13,-1599.1"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge2" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M7570.39,-1620.17C7587.12,-1629.03 7602.17,-1640.59 7614,-1655.6 7688.31,-1749.84 7616.97,-3700.21 7650,-3815.6 7681.6,-3925.98 7765.08,-4036.87 7805.89,-4086.56"/>
<polygon fill="black" stroke="black" points="7803.17,-4088.76 7812.25,-4094.22 7808.56,-4084.29 7803.17,-4088.76"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node4" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node4"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="6811.5,-1613.6 6548.5,-1613.6 6548.5,-1577.6 6811.5,-1577.6 6811.5,-1613.6"/>
<text text-anchor="middle" x="6680" y="-1589.13" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge3" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6811.88,-1595.6C6902.43,-1595.6 7025.67,-1595.6 7134.14,-1595.6"/>
<polygon fill="black" stroke="black" points="7134.09,-1599.1 7144.09,-1595.6 7134.09,-1592.1 7134.09,-1599.1"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node5" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node5"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7522,-1702.13 7238,-1702.13 7238,-1665.06 7522,-1665.06 7522,-1702.13"/>
<text text-anchor="middle" x="7380" y="-1675.12" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node6" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node6"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="6790,-1727.6 6570,-1727.6 6570,-1691.6 6790,-1691.6 6790,-1727.6"/>
<text text-anchor="middle" x="6680" y="-1703.13" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge4" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6790.45,-1705.52C6907.69,-1701.15 7094.65,-1694.19 7226.33,-1689.28"/>
<polygon fill="black" stroke="black" points="7226.33,-1692.79 7236.19,-1688.92 7226.07,-1685.79 7226.33,-1692.79"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node7" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node7"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="6013,-994.34 5667,-994.34 5667,-946.86 6013,-946.86 6013,-994.34"/>
<text text-anchor="middle" x="5840" y="-959.08" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node8" class="node">
<title>lot_io.get_seller</title>
<g id="a_node8"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="6763,-812.6 6597,-812.6 6597,-776.6 6763,-776.6 6763,-812.6"/>
<text text-anchor="middle" x="6680" y="-786.46" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge5" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6013.17,-991.5C6082.29,-990.8 6158.55,-977.38 6214,-932.6 6254.35,-900.01 6209.03,-853.39 6250,-821.6 6347.72,-745.75 6498.76,-756.81 6593.09,-774.02"/>
<polygon fill="black" stroke="black" points="6592.35,-777.44 6602.82,-775.87 6593.65,-770.57 6592.35,-777.44"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node9" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node9"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="6046,-1846.18 5634,-1846.18 5634,-1797.02 6046,-1797.02 6046,-1846.18"/>
<text text-anchor="middle" x="5840" y="-1809.59" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge6" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6046.11,-1821.74C6106.52,-1812.08 6168.53,-1791.25 6214,-1749.6 6256.95,-1710.26 6204.67,-1660.16 6250,-1623.6 6292.92,-1588.97 6429.23,-1584.99 6536.82,-1587.81"/>
<polygon fill="black" stroke="black" points="6536.52,-1591.3 6546.61,-1588.09 6536.72,-1584.31 6536.52,-1591.3"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge7" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M6028.54,-1796.53C6190.6,-1774.87 6419.99,-1744.21 6558.61,-1725.69"/>
<polygon fill="black" stroke="black" points="6558.72,-1729.2 6568.17,-1724.41 6557.79,-1722.26 6558.72,-1729.2"/>
</g>
<!-- post_io.read_post -->
<g id="node10" class="node">
<title>post_io.read_post</title>
<g id="a_node10"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="6905.5,-2270.47 6454.5,-2270.47 6454.5,-2188.72 6905.5,-2188.72 6905.5,-2270.47"/>
<text text-anchor="middle" x="6680" y="-2208.08" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge8" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6046.42,-1825.59C6105.63,-1835.63 6166.88,-1855.63 6214,-1893.6 6245.63,-1919.08 6223.15,-1947.12 6250,-1977.6 6334.35,-2073.33 6464.19,-2142.48 6558.94,-2183.86"/>
<polygon fill="black" stroke="black" points="6557.48,-2187.04 6568.05,-2187.8 6560.26,-2180.62 6557.48,-2187.04"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node11" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node11"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="6743,-3203.6 6617,-3203.6 6617,-3167.6 6743,-3167.6 6743,-3203.6"/>
<text text-anchor="middle" x="6680" y="-3181.33" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge9" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6046.47,-1814.07C6109.31,-1822.82 6172.68,-1844.97 6214,-1893.6 6304.27,-1999.81 6154.42,-3046.14 6250,-3147.6 6296.86,-3197.33 6495.5,-3195.42 6605.29,-3190.25"/>
<polygon fill="black" stroke="black" points="6605.28,-3193.76 6615.09,-3189.77 6604.93,-3186.77 6605.28,-3193.76"/>
</g>
<!-- lot_io.read_lots -->
<g id="node12" class="node">
<title>lot_io.read_lots</title>
<g id="a_node12"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="6766,-1876.72 6594,-1876.72 6594,-1838.48 6766,-1838.48 6766,-1876.72"/>
<text text-anchor="middle" x="6680" y="-1848.78" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge10" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6046.27,-1830.41C6216.95,-1837.75 6452.25,-1847.85 6582.48,-1853.45"/>
<polygon fill="black" stroke="black" points="6581.94,-1856.93 6592.08,-1853.86 6582.24,-1849.94 6581.94,-1856.93"/>
</g>
<!-- notes_utils.read_md -->
<g id="node50" class="node">
<title>notes_utils.read_md</title>
<g id="a_node50"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="7437,-2494.6 7323,-2494.6 7323,-2458.6 7437,-2458.6 7437,-2494.6"/>
<text text-anchor="middle" x="7380" y="-2472.33" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge97" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M6905.93,-2233.97C6973.32,-2241.03 7046.22,-2254.56 7110,-2279.6 7162.17,-2300.08 7289.33,-2402.29 7348.18,-2450.87"/>
<polygon fill="black" stroke="black" points="7345.91,-2453.54 7355.85,-2457.22 7350.38,-2448.15 7345.91,-2453.54"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node74" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node74"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="7517.5,-2288.3 7242.5,-2288.3 7242.5,-2248.89 7517.5,-2248.89 7517.5,-2288.3"/>
<text text-anchor="middle" x="7380" y="-2259.43" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge98" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M6905.69,-2242.15C7012.16,-2248.1 7136.37,-2255.04 7230.83,-2260.32"/>
<polygon fill="black" stroke="black" points="7230.51,-2263.8 7240.69,-2260.87 7230.9,-2256.82 7230.51,-2263.8"/>
</g>
<!-- notes_utils.load_json -->
<g id="node14" class="node">
<title>notes_utils.load_json</title>
<g id="a_node14"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="7481.5,-3133.6 7278.5,-3133.6 7278.5,-3097.6 7481.5,-3097.6 7481.5,-3133.6"/>
<text text-anchor="middle" x="7380" y="-3107.85" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge177" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6766.21,-1842.36C6865.06,-1830.14 7025.27,-1828.27 7110,-1923.6 7185.78,-2008.86 7091.97,-2849.13 7146,-2949.6 7183.57,-3019.46 7264.95,-3066.76 7320.85,-3092.46"/>
<polygon fill="black" stroke="black" points="7319.38,-3095.64 7329.94,-3096.54 7322.25,-3089.25 7319.38,-3095.64"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node117" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node117"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="7428.5,-1069.6 7331.5,-1069.6 7331.5,-1033.6 7428.5,-1033.6 7428.5,-1069.6"/>
<text text-anchor="middle" x="7380" y="-1047.33" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge176" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M6766.16,-1860.44C6865.74,-1858.64 7027.43,-1838.76 7110,-1736.6 7189.08,-1638.75 7077.11,-1276.87 7146,-1171.6 7185.39,-1111.4 7265,-1079.78 7320.13,-1064.41"/>
<polygon fill="black" stroke="black" points="7320.93,-1067.82 7329.69,-1061.85 7319.12,-1061.06 7320.93,-1067.82"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node13" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node13"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="6887.5,-3138.41 6472.5,-3138.41 6472.5,-3092.78 6887.5,-3092.78 6887.5,-3138.41"/>
<text text-anchor="middle" x="6680" y="-3104.62" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge11" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6887.59,-3115.6C7011.78,-3115.6 7165,-3115.6 7267.01,-3115.6"/>
<polygon fill="black" stroke="black" points="7266.75,-3119.1 7276.75,-3115.6 7266.75,-3112.1 7266.75,-3119.1"/>
</g>
<!-- notes_utils.read_text -->
<g id="node31" class="node">
<title>notes_utils.read_text</title>
<g id="a_node31"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="7913.5,-3788.6 7746.5,-3788.6 7746.5,-3752.6 7913.5,-3752.6 7913.5,-3788.6"/>
<text text-anchor="middle" x="7830" y="-3764.13" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge189" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7482,-3104.41C7526.81,-3104.78 7577.53,-3113.22 7614,-3142.6 7808.03,-3298.91 7827.68,-3639.14 7829.09,-3741.13"/>
<polygon fill="black" stroke="black" points="7825.59,-3740.87 7829.18,-3750.84 7832.59,-3740.81 7825.59,-3740.87"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node15" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node15"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="5937,-3361.6 5743,-3361.6 5743,-3325.6 5937,-3325.6 5937,-3361.6"/>
<text text-anchor="middle" x="5840" y="-3336.69" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._format_vector -->
<g id="node16" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node16"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="6786,-1558.6 6574,-1558.6 6574,-1522.6 6786,-1522.6 6786,-1558.6"/>
<text text-anchor="middle" x="6680" y="-1534.62" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- similar_utils._similar_path -->
<g id="node17" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node17"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="6762.5,-1140.6 6597.5,-1140.6 6597.5,-1104.6 6762.5,-1104.6 6762.5,-1140.6"/>
<text text-anchor="middle" x="6680" y="-1117.7" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar -->
<g id="node18" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node18"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="6882.5,-2448.44 6477.5,-2448.44 6477.5,-2396.76 6882.5,-2396.76 6882.5,-2448.44"/>
<text text-anchor="middle" x="6680" y="-2409.86" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge12" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6882.73,-2414.71C6977.95,-2415.67 7077.74,-2425.06 7110,-2457.6 7187.19,-2535.44 7092.25,-2854.05 7146,-2949.6 7185,-3018.93 7266.42,-3066.49 7321.9,-3092.38"/>
<polygon fill="black" stroke="black" points="7320.36,-3095.52 7330.91,-3096.49 7323.26,-3089.15 7320.36,-3095.52"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node19" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node19"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="5961,-1140.6 5719,-1140.6 5719,-1104.6 5961,-1104.6 5961,-1140.6"/>
<text text-anchor="middle" x="5840" y="-1115.25" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge13" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M5961.06,-1122.6C6129.72,-1122.6 6433.22,-1122.6 6585.91,-1122.6"/>
<polygon fill="black" stroke="black" points="6585.57,-1126.1 6595.57,-1122.6 6585.57,-1119.1 6585.57,-1126.1"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node20" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node20"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="6743.5,-3848.6 6616.5,-3848.6 6616.5,-3812.6 6743.5,-3812.6 6743.5,-3848.6"/>
<text text-anchor="middle" x="6680" y="-3825.7" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge14" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M5871.89,-1140.93C5947.5,-1187.85 6141.04,-1320.69 6214,-1491.6 6262.65,-1605.55 6173.15,-3624.4 6250,-3721.6 6334.13,-3827.99 6506.2,-3839.49 6604.94,-3836.37"/>
<polygon fill="black" stroke="black" points="6604.94,-3839.87 6614.8,-3835.99 6604.67,-3832.88 6604.94,-3839.87"/>
</g>
<!-- notes_utils.write_json -->
<g id="node21" class="node">
<title>notes_utils.write_json</title>
<g id="a_node21"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="7457,-1216.6 7303,-1216.6 7303,-1180.6 7457,-1180.6 7457,-1216.6"/>
<text text-anchor="middle" x="7380" y="-1193.11" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge15" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5961.25,-1112.57C6042.68,-1106.29 6152.74,-1098.8 6250,-1095.6 6632.01,-1083 6734.15,-1026.1 7110,-1095.6 7191.89,-1110.74 7281.07,-1149.76 7333.4,-1175.19"/>
<polygon fill="black" stroke="black" points="7331.8,-1178.31 7342.32,-1179.58 7334.89,-1172.03 7331.8,-1178.31"/>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node120" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node120"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="7482,-3693.72 7278,-3693.72 7278,-3655.48 7482,-3655.48 7482,-3693.72"/>
<text text-anchor="middle" x="7380" y="-3665.78" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge182" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M6743.87,-3816.55C6865.6,-3789.34 7134.34,-3729.28 7280.19,-3696.68"/>
<polygon fill="black" stroke="black" points="7280.86,-3700.12 7289.85,-3694.52 7279.33,-3693.29 7280.86,-3700.12"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node22" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node22"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="6872.5,-538.9 6487.5,-538.9 6487.5,-496.29 6872.5,-496.29 6872.5,-538.9"/>
<text text-anchor="middle" x="6680" y="-507.5" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._prune_similar -->
<g id="node23" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node23"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="5146.5,-106.6 4923.5,-106.6 4923.5,-70.6 5146.5,-70.6 5146.5,-106.6"/>
<text text-anchor="middle" x="5035" y="-82.13" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node24" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node24"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="6214,-557.97 5466,-557.97 5466,-477.22 6214,-477.22 6214,-557.97"/>
<text text-anchor="middle" x="5840" y="-496.38" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge16" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M6214.35,-517.6C6304.43,-517.6 6397.35,-517.6 6476.2,-517.6"/>
<polygon fill="black" stroke="black" points="6475.72,-521.1 6485.72,-517.6 6475.72,-514.1 6475.72,-521.1"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node25" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node25"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="6873,-427.9 6487,-427.9 6487,-385.29 6873,-385.29 6873,-427.9"/>
<text text-anchor="middle" x="6680" y="-396.5" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node26" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node26"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="5288,-3251.7 4782,-3251.7 4782,-3195.49 5288,-3195.49 5288,-3251.7"/>
<text text-anchor="middle" x="5035" y="-3209.53" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge17" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M5227.32,-3252.19C5384.97,-3275.75 5602.83,-3308.3 5731.51,-3327.53"/>
<polygon fill="black" stroke="black" points="5730.63,-3330.94 5741.03,-3328.96 5731.66,-3324.02 5730.63,-3330.94"/>
</g>
<!-- telegram_bot._t -->
<g id="node27" class="node">
<title>telegram_bot._t</title>
<g id="a_node27"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="4467,-5222.13 4299,-5222.13 4299,-5185.06 4467,-5185.06 4467,-5222.13"/>
<text text-anchor="middle" x="4383" y="-5195.12" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node28" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node28"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="4502.5,-5166.6 4263.5,-5166.6 4263.5,-5130.6 4502.5,-5130.6 4502.5,-5166.6"/>
<text text-anchor="middle" x="4383" y="-5141.69" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node29" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node29"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="5118.5,-5128.6 4951.5,-5128.6 4951.5,-5092.6 5118.5,-5092.6 5118.5,-5128.6"/>
<text text-anchor="middle" x="5035" y="-5105.7" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge18" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4502.84,-5141.65C4628.52,-5134.3 4824.26,-5122.86 4939.74,-5116.11"/>
<polygon fill="black" stroke="black" points="4939.71,-5119.61 4949.49,-5115.54 4939.3,-5112.63 4939.71,-5119.61"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node30" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node30"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="4504.5,-3891.6 4261.5,-3891.6 4261.5,-3855.6 4504.5,-3855.6 4504.5,-3891.6"/>
<text text-anchor="middle" x="4383" y="-3866.25" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge19" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4425.52,-3891.93C4475.66,-3913.62 4562.88,-3949.88 4640,-3974.6 5156.8,-4140.2 5296.31,-4205.6 5839,-4205.6 5839,-4205.6 5839,-4205.6 6681,-4205.6 6888.75,-4205.6 7438.57,-4257.88 7614,-4146.6 7618.22,-4143.92 7763.75,-3886.29 7812.94,-3799.08"/>
<polygon fill="black" stroke="black" points="7815.97,-3800.84 7817.83,-3790.41 7809.87,-3797.4 7815.97,-3800.84"/>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge185" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7748.59,-3788.75C7736.07,-3798.14 7763.2,-3806.6 7830,-3806.6 7869.66,-3806.6 7895.34,-3803.61 7907.04,-3799.22"/>
<polygon fill="black" stroke="black" points="7910.2,-3800.72 7910.83,-3790.15 7903.74,-3798.03 7910.2,-3800.72"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node32" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node32"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="4497,-3649.6 4269,-3649.6 4269,-3613.6 4497,-3613.6 4497,-3649.6"/>
<text text-anchor="middle" x="4383" y="-3623.85" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge20" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4497.07,-3634.6C4750.24,-3640.6 5347.02,-3650.46 5430,-3612.6 5451.76,-3602.67 5444.15,-3582.33 5466,-3572.6 5632.92,-3498.25 6927.54,-3605.61 7110,-3615.6 7334.09,-3627.86 7399.1,-3581.93 7614,-3646.6 7684.29,-3667.75 7756.23,-3715.65 7796.5,-3745.34"/>
<polygon fill="black" stroke="black" points="7794.24,-3748.02 7804.35,-3751.2 7798.43,-3742.41 7794.24,-3748.02"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node33" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="5101.5,-3549.6 4968.5,-3549.6 4968.5,-3513.6 5101.5,-3513.6 5101.5,-3549.6"/>
<text text-anchor="middle" x="5035" y="-3527.33" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node34" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node34"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="5956.5,-3193.6 5723.5,-3193.6 5723.5,-3157.6 5956.5,-3157.6 5956.5,-3193.6"/>
<text text-anchor="middle" x="5840" y="-3169.62" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge21" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5956.64,-3167.32C6086.45,-3158.02 6299.98,-3142.73 6461.3,-3131.18"/>
<polygon fill="black" stroke="black" points="6461.1,-3134.71 6470.82,-3130.5 6460.6,-3127.72 6461.1,-3134.71"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node35" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="5163,-3603.6 4907,-3603.6 4907,-3567.6 5163,-3567.6 5163,-3603.6"/>
<text text-anchor="middle" x="5035" y="-3578.69" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge22" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M5109.77,-3604.05C5196.88,-3621.1 5341.12,-3633.74 5430,-3558.6 5482.36,-3514.33 5416.02,-3455.52 5466,-3408.6 5536.33,-3342.57 5648.6,-3330.88 5731.62,-3332.93"/>
<polygon fill="black" stroke="black" points="5731.25,-3336.42 5741.36,-3333.25 5731.48,-3329.42 5731.25,-3336.42"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node36" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="4573,-3709.9 4193,-3709.9 4193,-3667.29 4573,-3667.29 4573,-3709.9"/>
<text text-anchor="middle" x="4383" y="-3678.5" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge23" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4573.38,-3695.02C4584.78,-3701.04 4595.18,-3708.77 4604,-3718.6 4698.99,-3824.37 4552.86,-4885.27 4640,-4997.6 4710.03,-5087.87 4847.19,-5109.35 4939.74,-5112.83"/>
<polygon fill="black" stroke="black" points="4939.46,-5116.32 4949.56,-5113.13 4939.67,-5109.33 4939.46,-5116.32"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge24" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M4548.07,-3666.82C4566.94,-3664.14 4585.9,-3661.37 4604,-3658.6 4711.2,-3642.19 4833.04,-3621.29 4919.59,-3606.06"/>
<polygon fill="black" stroke="black" points="4920.03,-3609.54 4929.27,-3604.36 4918.81,-3602.65 4920.03,-3609.54"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node37" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node37"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="4604,-3837.37 4162,-3837.37 4162,-3781.82 4604,-3781.82 4604,-3837.37"/>
<text text-anchor="middle" x="4383" y="-3795.73" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge25" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4595.12,-3837.58C4598.23,-3840.38 4601.2,-3843.39 4604,-3846.6 4688.15,-3942.98 4561.41,-4896.62 4640,-4997.6 4710.17,-5087.76 4847.3,-5109.27 4939.8,-5112.78"/>
<polygon fill="black" stroke="black" points="4939.51,-5116.28 4949.62,-5113.09 4939.73,-5109.28 4939.51,-5116.28"/>
</g>
<!-- lot_io.get_lot -->
<g id="node38" class="node">
<title>lot_io.get_lot</title>
<g id="a_node38"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="5901,-3617.6 5779,-3617.6 5779,-3581.6 5901,-3581.6 5901,-3617.6"/>
<text text-anchor="middle" x="5840" y="-3592.69" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge26" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M4604.3,-3796.22C4819.47,-3778.26 5153.93,-3737.26 5430,-3645.6 5447.17,-3639.9 5448.61,-3631.58 5466,-3626.6 5567.67,-3597.48 5690.97,-3594.48 5767.21,-3596.16"/>
<polygon fill="black" stroke="black" points="5766.97,-3599.65 5777.06,-3596.41 5767.15,-3592.65 5766.97,-3599.65"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge183" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M5901.47,-3609.75C5985.91,-3620.05 6137.38,-3623.68 6214,-3534.6 6272.37,-3466.72 6190.95,-1990.88 6250,-1923.6 6331,-1831.29 6482.73,-1829.76 6582.3,-1840.84"/>
<polygon fill="black" stroke="black" points="6581.73,-1844.3 6592.08,-1841.99 6582.56,-1837.34 6581.73,-1844.3"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge184" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M5901.29,-3602.54C6132.14,-3613.79 6962.07,-3654.26 7266.24,-3669.1"/>
<polygon fill="black" stroke="black" points="7266.04,-3672.59 7276.2,-3669.58 7266.38,-3665.6 7266.04,-3672.59"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node39" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node39"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="4054.5,-3830.72 3796.5,-3830.72 3796.5,-3792.48 4054.5,-3792.48 4054.5,-3830.72"/>
<text text-anchor="middle" x="3925.5" y="-3802.78" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge27" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4054.44,-3831.22C4089.3,-3836.4 4127.08,-3841.86 4162,-3846.6 4190.49,-3850.46 4221.08,-3854.37 4250.13,-3857.97"/>
<polygon fill="black" stroke="black" points="4249.32,-3861.39 4259.68,-3859.14 4250.18,-3854.45 4249.32,-3861.39"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node40" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node40"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="4015,-5194.6 3836,-5194.6 3836,-5158.6 4015,-5158.6 4015,-5194.6"/>
<text text-anchor="middle" x="3925.5" y="-5170.62" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge28" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4015.41,-5181.87C4093.79,-5186.51 4207.66,-5193.26 4287.64,-5198"/>
<polygon fill="black" stroke="black" points="4286.99,-5201.47 4297.18,-5198.57 4287.41,-5194.48 4286.99,-5201.47"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge29" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4015.41,-5171.13C4082.77,-5166.99 4176.35,-5161.24 4252.1,-5156.58"/>
<polygon fill="black" stroke="black" points="4251.86,-5160.1 4261.63,-5156 4251.43,-5153.12 4251.86,-5160.1"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node41" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node41"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="4065.5,-5254.4 3785.5,-5254.4 3785.5,-5212.8 4065.5,-5212.8 4065.5,-5254.4"/>
<text text-anchor="middle" x="3925.5" y="-5223.8" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge30" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4065.95,-5224.41C4137.76,-5219.68 4223.42,-5214.04 4287.44,-5209.82"/>
<polygon fill="black" stroke="black" points="4287.47,-5213.33 4297.22,-5209.18 4287.01,-5206.34 4287.47,-5213.33"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge31" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4065.88,-5222C4086.53,-5217.62 4107.17,-5211.67 4126,-5203.6 4144.63,-5195.61 4143.26,-5183.33 4162,-5175.6 4190.04,-5164.02 4221.66,-5157.01 4252.01,-5152.86"/>
<polygon fill="black" stroke="black" points="4252.14,-5156.37 4261.62,-5151.64 4251.26,-5149.43 4252.14,-5156.37"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge32" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4065.79,-5244.14C4203.3,-5251.98 4419.21,-5257.38 4604,-5231.6 4739.62,-5212.67 4892.72,-5162.29 4974.67,-5132.85"/>
<polygon fill="black" stroke="black" points="4975.64,-5136.22 4983.85,-5129.53 4973.25,-5129.64 4975.64,-5136.22"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node42" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node42"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="4097.5,-5140.4 3753.5,-5140.4 3753.5,-5096.79 4097.5,-5096.79 4097.5,-5140.4"/>
<text text-anchor="middle" x="3925.5" y="-5108.21" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge33" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M4097.76,-5139.69C4107.44,-5142.58 4116.92,-5145.87 4126,-5149.6 4144.26,-5157.1 4143.64,-5168.35 4162,-5175.6 4201.36,-5191.14 4247.48,-5198.49 4287.29,-5201.83"/>
<polygon fill="black" stroke="black" points="4286.87,-5205.31 4297.1,-5202.57 4287.4,-5198.33 4286.87,-5205.31"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge34" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M4097.73,-5129.87C4148.77,-5133.24 4203.85,-5136.86 4251.82,-5140.02"/>
<polygon fill="black" stroke="black" points="4251.49,-5143.51 4261.7,-5140.67 4251.95,-5136.52 4251.49,-5143.51"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge35" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M4097.73,-5117.36C4334.27,-5115.65 4752.94,-5112.63 4939.6,-5111.28"/>
<polygon fill="black" stroke="black" points="4939.53,-5114.78 4949.51,-5111.21 4939.48,-5107.78 4939.53,-5114.78"/>
</g>
<!-- telegram_bot.main -->
<g id="node43" class="node">
<title>telegram_bot.main</title>
<g id="a_node43"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="4057.5,-3712.34 3793.5,-3712.34 3793.5,-3664.86 4057.5,-3664.86 4057.5,-3712.34"/>
<text text-anchor="middle" x="3925.5" y="-3677.08" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge36" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M4003.6,-3712.7C4043.62,-3728.13 4091.27,-3751.37 4126,-3783.6 4149.64,-3805.53 4135.15,-3828.74 4162,-3846.6 4187.76,-3863.72 4219.03,-3872.76 4249.81,-3877.09"/>
<polygon fill="black" stroke="black" points="4249.26,-3880.55 4259.61,-3878.3 4250.12,-3873.6 4249.26,-3880.55"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge37" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M4057.9,-3671.75C4091.81,-3667.43 4128.26,-3662.82 4162,-3658.6 4192.86,-3654.74 4226.17,-3650.62 4257.29,-3646.8"/>
<polygon fill="black" stroke="black" points="4257.65,-3650.28 4267.15,-3645.59 4256.8,-3643.33 4257.65,-3650.28"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge38" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M3981.97,-3664.41C4028.98,-3644.99 4098.66,-3618.71 4162,-3604.6 4450.24,-3540.36 4803.51,-3531.59 4956.87,-3531.08"/>
<polygon fill="black" stroke="black" points="4956.49,-3534.58 4966.49,-3531.06 4956.48,-3527.58 4956.49,-3534.58"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge39" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M3949.06,-3664.5C4031.32,-3578.62 4326.76,-3287.33 4640,-3186.6 4836.1,-3123.53 5445.58,-3151.4 5712.09,-3167.3"/>
<polygon fill="black" stroke="black" points="5711.66,-3170.78 5721.85,-3167.88 5712.08,-3163.79 5711.66,-3170.78"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge40" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M4057.94,-3688.6C4096.46,-3688.6 4139.48,-3688.6 4181.26,-3688.6"/>
<polygon fill="black" stroke="black" points="4181.21,-3692.1 4191.21,-3688.6 4181.21,-3685.1 4181.21,-3692.1"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge41" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M3985.12,-3712.76C4032.23,-3731.38 4100.46,-3756.58 4162,-3772.6 4170.43,-3774.79 4179.08,-3776.89 4187.85,-3778.88"/>
<polygon fill="black" stroke="black" points="4187,-3782.28 4197.52,-3781.03 4188.52,-3775.45 4187,-3782.28"/>
</g>
<!-- caption_io._get_langs -->
<g id="node44" class="node">
<title>caption_io._get_langs</title>
<g id="a_node44"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="7468,-3187.6 7292,-3187.6 7292,-3151.6 7468,-3151.6 7468,-3187.6"/>
<text text-anchor="middle" x="7380" y="-3163.13" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- config_utils.load_config -->
<g id="node45" class="node">
<title>config_utils.load_config</title>
<g id="a_node45"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="8010,-2443.6 7650,-2443.6 7650,-2393.6 8010,-2393.6 8010,-2443.6"/>
<text text-anchor="middle" x="7830" y="-2406.35" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge42" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M7468.42,-3181.27C7516.52,-3182.8 7574.32,-3175.93 7614,-3142.6 7723.51,-3050.59 7802.52,-2589.59 7823.48,-2455.33"/>
<polygon fill="black" stroke="black" points="7826.91,-2456 7824.98,-2445.59 7820,-2454.93 7826.91,-2456"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node46" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node46"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="7459.5,-3783.6 7300.5,-3783.6 7300.5,-3747.6 7459.5,-3747.6 7459.5,-3783.6"/>
<text text-anchor="middle" x="7380" y="-3761.33" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.caption_md_path -->
<g id="node47" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node47"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="7457,-2940.6 7303,-2940.6 7303,-2904.6 7457,-2904.6 7457,-2940.6"/>
<text text-anchor="middle" x="7380" y="-2918.33" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption -->
<g id="node48" class="node">
<title>caption_io.has_caption</title>
<g id="a_node48"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="6744,-4177.6 6616,-4177.6 6616,-4141.6 6744,-4141.6 6744,-4177.6"/>
<text text-anchor="middle" x="6680" y="-4155.33" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge43" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6744.27,-4143.81C6836.08,-4117.93 7006.52,-4058.26 7110,-3950.6 7137.58,-3921.9 7117.89,-3896.78 7146,-3868.6 7185.64,-3828.86 7243.23,-3803.21 7291.24,-3787.44"/>
<polygon fill="black" stroke="black" points="7292.05,-3790.86 7300.52,-3784.49 7289.92,-3784.19 7292.05,-3790.86"/>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge44" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M6732.25,-4141.15C6826.61,-4104.12 7025.84,-4010.89 7110,-3857.6 7192.33,-3707.64 7064.09,-3238.79 7146,-3088.6 7184.09,-3018.75 7265.73,-2971.32 7321.51,-2945.6"/>
<polygon fill="black" stroke="black" points="7322.9,-2948.82 7330.58,-2941.52 7320.02,-2942.43 7322.9,-2948.82"/>
</g>
<!-- caption_io.read_caption -->
<g id="node49" class="node">
<title>caption_io.read_caption</title>
<g id="a_node49"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="6814,-2942.3 6546,-2942.3 6546,-2902.89 6814,-2902.89 6814,-2942.3"/>
<text text-anchor="middle" x="6680" y="-2913.43" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge49" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6814.04,-2914.99C6900.34,-2913.98 7014.15,-2920.14 7110,-2950.6 7205.21,-2980.85 7301.26,-3051.72 7348.65,-3089.99"/>
<polygon fill="black" stroke="black" points="7346.34,-3092.62 7356.3,-3096.23 7350.76,-3087.2 7346.34,-3092.62"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge45" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M6814.32,-2914.09C6923.8,-2910.14 7067.48,-2912.9 7110,-2950.6 7174.97,-3008.19 7082.5,-3083.39 7146,-3142.6 7181.36,-3175.56 7234.03,-3183.76 7280.35,-3183.07"/>
<polygon fill="black" stroke="black" points="7280.26,-3186.58 7290.15,-3182.78 7280.05,-3179.58 7280.26,-3186.58"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge46" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6814.29,-2912.76C6924.8,-2907.83 7070.01,-2909.91 7110,-2950.6 7168.64,-3010.26 7093.58,-3637.41 7146,-3702.6 7179.87,-3744.72 7238.77,-3760.39 7288.87,-3765.57"/>
<polygon fill="black" stroke="black" points="7288.29,-3769.03 7298.56,-3766.43 7288.92,-3762.06 7288.29,-3769.03"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge47" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M6814.34,-2922.6C6954.64,-2922.6 7171.41,-2922.6 7291.46,-2922.6"/>
<polygon fill="black" stroke="black" points="7291.26,-2926.1 7301.26,-2922.6 7291.26,-2919.1 7291.26,-2926.1"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge48" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M6710.65,-2902.48C6783.89,-2852.91 6979.54,-2721.32 7146,-2616.6 7212.43,-2574.81 7290.87,-2528.23 7337.69,-2500.72"/>
<polygon fill="black" stroke="black" points="7339.31,-2503.83 7346.17,-2495.75 7335.77,-2497.8 7339.31,-2503.83"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge186" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7437.32,-2495.02C7491.43,-2515.76 7571.13,-2554.87 7614,-2616.6 7746.97,-2808.08 7813.99,-3579.02 7826.74,-3740.74"/>
<polygon fill="black" stroke="black" points="7823.24,-3740.92 7827.5,-3750.61 7830.22,-3740.37 7823.24,-3740.92"/>
</g>
<!-- caption_io.write_caption -->
<g id="node51" class="node">
<title>caption_io.write_caption</title>
<g id="a_node51"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="6813,-3449.72 6547,-3449.72 6547,-3411.48 6813,-3411.48 6813,-3449.72"/>
<text text-anchor="middle" x="6680" y="-3421.78" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge52" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6813.49,-3437.87C6923.47,-3440.84 7068.36,-3436.67 7110,-3397.6 7193.46,-3319.27 7064.07,-3222.52 7146,-3142.6 7177.44,-3111.93 7223.75,-3102.31 7266.82,-3101.45"/>
<polygon fill="black" stroke="black" points="7266.77,-3104.95 7276.76,-3101.42 7266.75,-3097.95 7266.77,-3104.95"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge53" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M6780.08,-3411.07C6882.47,-3385.09 7037.3,-3328.24 7110,-3212.6 7158.8,-3134.97 7119.29,-1650.31 7146,-1562.6 7189.05,-1421.22 7303.78,-1281.92 7354.41,-1225.19"/>
<polygon fill="black" stroke="black" points="7356.86,-1227.7 7360.95,-1217.93 7351.66,-1223.01 7356.86,-1227.7"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge50" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M6813.48,-3441.1C6900.83,-3443.11 7016.03,-3436.21 7110,-3397.6 7219.01,-3352.79 7316.19,-3246.43 7357.69,-3196.44"/>
<polygon fill="black" stroke="black" points="7360.19,-3198.91 7363.82,-3188.96 7354.77,-3194.47 7360.19,-3198.91"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge51" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6813.4,-3423.42C6923.33,-3420.5 7068.18,-3424.72 7110,-3463.6 7188.67,-3536.74 7074.52,-3622.41 7146,-3702.6 7181.57,-3742.5 7239.55,-3758.27 7288.77,-3764.06"/>
<polygon fill="black" stroke="black" points="7288.28,-3767.53 7298.59,-3765.09 7289,-3760.57 7288.28,-3767.53"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node52" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node52"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="232,-5144.6 0,-5144.6 0,-5108.6 232,-5108.6 232,-5144.6"/>
<text text-anchor="middle" x="116" y="-5121.11" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- moderation:cli -->
<g id="node53" class="node">
<title>moderation:cli</title>
<g id="a_node53"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="530" cy="-5126.6" rx="32.02" ry="18"/>
<text text-anchor="middle" x="530" y="-5124.15" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;moderation:cli -->
<!-- telegram_bot:cli -->
<g id="node169" class="node">
<title>telegram_bot:cli</title>
<g id="a_node169"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1116" cy="-5126.6" rx="91.22" ry="20.15"/>
<text text-anchor="middle" x="1116" y="-5120.62" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;telegram_bot:cli -->
<!-- build_site._load_ontology -->
<g id="node54" class="node">
<title>build_site._load_ontology</title>
<g id="a_node54"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="6809,-2378.6 6551,-2378.6 6551,-2342.6 6809,-2342.6 6809,-2378.6"/>
<text text-anchor="middle" x="6680" y="-2352.46" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge55" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6809.26,-2350.81C6920.2,-2345.44 7069.05,-2346.69 7110,-2387.6 7198.54,-2476.04 7085.14,-2840.25 7146,-2949.6 7184.69,-3019.11 7266.18,-3066.62 7321.77,-3092.45"/>
<polygon fill="black" stroke="black" points="7320.24,-3095.6 7330.79,-3096.55 7323.13,-3089.23 7320.24,-3095.6"/>
</g>
<!-- build_site._compile_locale -->
<g id="node55" class="node">
<title>build_site._compile_locale</title>
<g id="a_node55"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="7518,-865.13 7242,-865.13 7242,-828.06 7518,-828.06 7518,-865.13"/>
<text text-anchor="middle" x="7380" y="-838.12" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node56" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node56"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="6836.5,-874.4 6523.5,-874.4 6523.5,-830.79 6836.5,-830.79 6836.5,-874.4"/>
<text text-anchor="middle" x="6680" y="-842.21" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge56" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M6836.78,-851.26C6954.3,-850.25 7114.52,-848.87 7230.29,-847.87"/>
<polygon fill="black" stroke="black" points="7230.22,-851.38 7240.19,-847.79 7230.16,-844.38 7230.22,-851.38"/>
</g>
<!-- build_site._iter_lots -->
<g id="node57" class="node">
<title>build_site._iter_lots</title>
<g id="a_node57"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="6024,-1740.14 5656,-1740.14 5656,-1679.05 6024,-1679.05 6024,-1740.14"/>
<text text-anchor="middle" x="5840" y="-1694.11" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge57" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5965.5,-1678.61C6046.13,-1659.74 6153.67,-1636.8 6250,-1623.6 6345.09,-1610.56 6452.89,-1603.56 6536.64,-1599.81"/>
<polygon fill="black" stroke="black" points="6536.68,-1603.32 6546.52,-1599.38 6536.38,-1596.32 6536.68,-1603.32"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge58" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M6024.38,-1709.6C6186.66,-1709.6 6418.78,-1709.6 6558.59,-1709.6"/>
<polygon fill="black" stroke="black" points="6558.23,-1713.1 6568.23,-1709.6 6558.23,-1706.1 6558.23,-1713.1"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge59" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6024.04,-1706.94C6092.15,-1715.46 6164.77,-1737.42 6214,-1787.6 6274.2,-1848.94 6200.52,-1907.32 6250,-1977.6 6320.77,-2078.11 6445.44,-2144.75 6542.2,-2184.11"/>
<polygon fill="black" stroke="black" points="6540.68,-2187.27 6551.26,-2187.74 6543.28,-2180.77 6540.68,-2187.27"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge60" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6024.46,-1702.61C6094.33,-1710.19 6168.11,-1732.62 6214,-1787.6 6310.87,-1903.64 6146.47,-3037.45 6250,-3147.6 6296.8,-3197.39 6495.47,-3195.45 6605.28,-3190.27"/>
<polygon fill="black" stroke="black" points="6605.27,-3193.77 6615.08,-3189.78 6604.92,-3186.78 6605.27,-3193.77"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge61" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6024.12,-1728.07C6084.74,-1735.15 6152.44,-1744.09 6214,-1754.6 6346.17,-1777.15 6497.47,-1812.46 6590.64,-1835.31"/>
<polygon fill="black" stroke="black" points="6589.69,-1838.69 6600.24,-1837.68 6591.36,-1831.89 6589.69,-1838.69"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node58" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node58"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="6788,-1672.3 6572,-1672.3 6572,-1632.89 6788,-1632.89 6788,-1672.3"/>
<text text-anchor="middle" x="6680" y="-1643.43" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge62" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6024.38,-1697.12C6187.36,-1686.04 6420.8,-1670.16 6560.4,-1660.66"/>
<polygon fill="black" stroke="black" points="6560.29,-1664.18 6570.03,-1660.01 6559.81,-1657.2 6560.29,-1664.18"/>
</g>
<!-- build_site._copy_images -->
<g id="node59" class="node">
<title>build_site._copy_images</title>
<g id="a_node59"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="7513,-921.72 7247,-921.72 7247,-883.48 7513,-883.48 7513,-921.72"/>
<text text-anchor="middle" x="7380" y="-893.78" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node60" class="node">
<title>build_site._copy_static</title>
<g id="a_node60"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="5945,-814.6 5735,-814.6 5735,-778.6 5945,-778.6 5945,-814.6"/>
<text text-anchor="middle" x="5840" y="-789.25" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._convert_prices -->
<g id="node61" class="node">
<title>build_site._convert_prices</title>
<g id="a_node61"><a xlink:title="Add `_display_price` and `_price_class` fields converted to `cur`.">
<polygon fill="none" stroke="black" points="6887,-53.19 6473,-53.19 6473,0 6887,0 6887,-53.19"/>
<text text-anchor="middle" x="6680" y="-13.41" font-family="Times,serif" font-size="37.66">build_site._convert_prices</text>
</a>
</g>
</g>
<!-- price_utils.canonical_currency -->
<g id="node62" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node62"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="7524,-203.6 7236,-203.6 7236,-167.6 7524,-167.6 7524,-203.6"/>
<text text-anchor="middle" x="7380" y="-177.85" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- build_site._convert_prices&#45;&gt;price_utils.canonical_currency -->
<g id="edge63" class="edge">
<title>build_site._convert_prices&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M6887.47,-29.52C6958.86,-34.3 7038.78,-43.93 7110,-62.6 7195.22,-84.93 7287.03,-132.57 7338.33,-161.57"/>
<polygon fill="black" stroke="black" points="7336.3,-164.44 7346.72,-166.36 7339.76,-158.36 7336.3,-164.44"/>
</g>
<!-- build_site._load_state -->
<g id="node63" class="node">
<title>build_site._load_state</title>
<g id="a_node63"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="5148,-2037.13 4922,-2037.13 4922,-2000.06 5148,-2000.06 5148,-2037.13"/>
<text text-anchor="middle" x="5035" y="-2010.12" font-family="Times,serif" font-size="24.22">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge64" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M5121.27,-1999.63C5211.48,-1985.11 5351.42,-1979.41 5430,-2060.6 5505.63,-2138.73 5392.15,-2468.78 5466,-2548.6 5694.38,-2795.43 5981.86,-2419.29 6214,-2662.6 6267.06,-2718.21 6199.72,-2948.46 6250,-3006.6 6302.52,-3067.31 6383.6,-3096.62 6461.2,-3110.05"/>
<polygon fill="black" stroke="black" points="6460.2,-3113.44 6470.63,-3111.6 6461.33,-3106.53 6460.2,-3113.44"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge65" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M5133.57,-1999.61C5222.24,-1988.42 5350.94,-1988.28 5430,-2060.6 5490.84,-2116.25 5407.33,-2184.65 5466,-2242.6 5718.11,-2491.6 5898.74,-2340.91 6250,-2387.6 6319.99,-2396.9 6396.76,-2404.1 6465.77,-2409.49"/>
<polygon fill="black" stroke="black" points="6465.47,-2412.98 6475.71,-2410.26 6466.01,-2406 6465.47,-2412.98"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge66" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M5148.37,-2003.71C5232.91,-1998.46 5347.85,-2004.63 5430,-2060.6 5458.59,-2080.07 5438.94,-2108.06 5466,-2129.6 5747.71,-2353.81 5894.48,-2276.69 6250,-2333.6 6345.81,-2348.93 6454.97,-2355.65 6539.19,-2358.56"/>
<polygon fill="black" stroke="black" points="6539.02,-2362.05 6549.13,-2358.88 6539.25,-2355.06 6539.02,-2362.05"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge67" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M5148.34,-2033.87C5236.3,-2039.15 5355.79,-2030.55 5430,-1960.6 5487.15,-1906.73 5410.49,-1843.16 5466,-1787.6 5512.85,-1740.7 5580.17,-1718.56 5644.76,-1708.99"/>
<polygon fill="black" stroke="black" points="5645.01,-1712.49 5654.44,-1707.66 5644.06,-1705.55 5645.01,-1712.49"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge68" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M5148.42,-2036.8C5238.57,-2044.33 5361.04,-2037.36 5430,-1960.6 5498.29,-1884.58 5394.16,-1114.27 5466,-1041.6 5524.5,-982.41 6143.95,-1048.53 6214,-1003.6 6243.11,-984.92 6220.68,-952.94 6250,-934.6 6331.45,-883.63 6950.02,-891.95 7235.47,-898.65"/>
<polygon fill="black" stroke="black" points="7235.13,-902.14 7245.22,-898.88 7235.3,-895.14 7235.13,-902.14"/>
</g>
<!-- build_site._categorise -->
<g id="node64" class="node">
<title>build_site._categorise</title>
<g id="a_node64"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="5371,-757.62 4699,-757.62 4699,-659.57 5371,-659.57 5371,-757.62"/>
<text text-anchor="middle" x="5035" y="-682.33" font-family="Times,serif" font-size="75.04">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge69" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M5371.24,-707.63C5607.21,-709.14 5930.29,-715.58 6214,-736.6 6343.22,-746.17 6491.65,-766.28 6585.36,-780.11"/>
<polygon fill="black" stroke="black" points="6584.61,-783.54 6595.01,-781.54 6585.64,-776.61 6584.61,-783.54"/>
</g>
<!-- build_site._render_site -->
<g id="node65" class="node">
<title>build_site._render_site</title>
<g id="a_node65"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.">
<polygon fill="none" stroke="black" points="5385.5,-1332.62 4684.5,-1332.62 4684.5,-1234.57 5385.5,-1234.57 5385.5,-1332.62"/>
<text text-anchor="middle" x="5035" y="-1257.33" font-family="Times,serif" font-size="75.04">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge72" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M5235.92,-1234.12C5306.77,-1207.12 5380.99,-1166.35 5430,-1105.6 5477.94,-1046.16 5407.85,-987.09 5466,-937.6 5529.37,-883.65 6145.06,-946.21 6214,-899.6 6245.63,-878.21 6218.5,-843.17 6250,-821.6 6348.8,-753.91 6492.31,-760.48 6585.65,-774.8"/>
<polygon fill="black" stroke="black" points="6584.86,-778.22 6595.29,-776.34 6585.96,-771.3 6584.86,-778.22"/>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge70" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M5386,-1270.29C5687.09,-1266.35 6091.7,-1281.4 6214,-1382.6 6259.86,-1420.54 6203.83,-1474.03 6250,-1511.6 6296.25,-1549.23 6451.86,-1551.19 6562.31,-1547.34"/>
<polygon fill="black" stroke="black" points="6562.15,-1550.85 6572.01,-1546.98 6561.89,-1543.85 6562.15,-1550.85"/>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge73" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5385.94,-1272.14C5413.03,-1271.52 5439.96,-1270.99 5466,-1270.6 5585.28,-1268.79 7108.31,-1271.14 7110,-1271.6 7359.8,-1338.68 7480.17,-1341.25 7614,-1562.6 7665.21,-1647.29 7641.33,-2354.01 7650,-2452.6 7695.65,-2971.72 7799.92,-3599.81 7823.98,-3741.34"/>
<polygon fill="black" stroke="black" points="7820.49,-3741.7 7825.62,-3750.97 7827.39,-3740.53 7820.49,-3741.7"/>
</g>
<!-- build_site.build_page -->
<g id="node66" class="node">
<title>build_site.build_page</title>
<g id="a_node66"><a xlink:title="Render ``lot`` into separate HTML files for every language.">
<polygon fill="none" stroke="black" points="6206.5,-2087.49 5473.5,-2087.49 5473.5,-1979.7 6206.5,-1979.7 6206.5,-2087.49"/>
<text text-anchor="middle" x="5840" y="-2004.49" font-family="Times,serif" font-size="83.16">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge71" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M5206.68,-1333.07C5288.17,-1365.86 5378.85,-1417.74 5430,-1496.6 5485.75,-1582.55 5400.39,-1873.86 5466.4,-1970.36"/>
<polygon fill="black" stroke="black" points="5463.62,-1972.48 5472.57,-1978.15 5469.11,-1968.13 5463.62,-1972.48"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge77" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6151.06,-2087.96C6172.4,-2092.36 6193.54,-2096.93 6214,-2101.6 6320.58,-2125.93 6439.41,-2158.74 6530.26,-2185.05"/>
<polygon fill="black" stroke="black" points="6529.16,-2188.37 6539.74,-2187.8 6531.11,-2181.65 6529.16,-2188.37"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge78" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5925.67,-2087.88C6015.51,-2150.87 6152.76,-2263.78 6214,-2400.6 6247.95,-2476.44 6192.43,-3087.67 6250,-3147.6 6297.34,-3196.88 6495.77,-3195.16 6605.41,-3190.14"/>
<polygon fill="black" stroke="black" points="6605.38,-3193.65 6615.2,-3189.67 6605.04,-3186.66 6605.38,-3193.65"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge74" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6206.44,-1979.29C6209.02,-1976.81 6211.55,-1974.24 6214,-1971.6 6275.13,-1905.66 6185.67,-1631.41 6250,-1568.6 6292.85,-1526.76 6450.58,-1526.37 6562.31,-1531.91"/>
<polygon fill="black" stroke="black" points="6561.97,-1535.39 6572.14,-1532.42 6562.33,-1528.4 6561.97,-1535.39"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge75" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M5919.11,-2087.73C6005.48,-2151.99 6141.91,-2267.36 6214,-2400.6 6252.62,-2471.97 6207.76,-2510.31 6250,-2579.6 6344.5,-2734.64 6535.76,-2848.8 6627.56,-2897.12"/>
<polygon fill="black" stroke="black" points="6625.89,-2900.2 6636.38,-2901.71 6629.12,-2893.99 6625.89,-2900.2"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge76" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M6206.64,-1979.47C6209.16,-1976.93 6211.62,-1974.31 6214,-1971.6 6285.53,-1890.29 6185.25,-1084.4 6250,-997.6 6310.64,-916.3 6419.11,-880.12 6511.8,-864.22"/>
<polygon fill="black" stroke="black" points="6512.22,-867.7 6521.53,-862.63 6511.09,-860.79 6512.22,-867.7"/>
</g>
<!-- build_site.main -->
<g id="node67" class="node">
<title>build_site.main</title>
<g id="a_node67"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="4551.5,-743.76 4214.5,-743.76 4214.5,-673.43 4551.5,-673.43 4551.5,-743.76"/>
<text text-anchor="middle" x="4383" y="-690.42" font-family="Times,serif" font-size="51.94">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._save_similar -->
<g id="edge79" class="edge">
<title>build_site.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M4429.46,-744.19C4478.69,-781.04 4560.82,-837.72 4640,-870.6 4972.5,-1008.64 5125.9,-856.91 5430,-1049.6 5451.93,-1063.49 5443.09,-1083.39 5466,-1095.6 5539.31,-1134.65 5632.5,-1141.41 5707.39,-1138.41"/>
<polygon fill="black" stroke="black" points="5707.44,-1141.91 5717.26,-1137.94 5707.11,-1134.92 5707.44,-1141.91"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge80" class="edge">
<title>build_site.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M4387.23,-673.14C4398.9,-568.07 4448.88,-257.21 4640,-120.6 4721.22,-62.54 4837.35,-60.13 4922.5,-68.87"/>
<polygon fill="black" stroke="black" points="4921.95,-72.33 4932.27,-69.95 4922.71,-65.38 4921.95,-72.33"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge81" class="edge">
<title>build_site.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M4430.46,-673.13C4479.53,-637.95 4560.65,-586.14 4640,-563.6 4716.99,-541.72 5133.62,-529.53 5454.37,-523.28"/>
<polygon fill="black" stroke="black" points="5454.3,-526.79 5464.23,-523.09 5454.16,-519.79 5454.3,-526.79"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge82" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M4401.71,-673.05C4436.7,-607.37 4521.68,-468.74 4640,-414.6 4803.53,-339.76 5992.25,-378.69 6475.52,-397.93"/>
<polygon fill="black" stroke="black" points="6475.16,-401.42 6485.3,-398.32 6475.44,-394.42 6475.16,-401.42"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge83" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M4410.06,-744.15C4459.28,-813.72 4564.52,-974.5 4604,-1128.6 4630.01,-1230.11 4585.13,-2925.31 4640,-3014.6 4697.37,-3107.94 4811.69,-3161.95 4902.48,-3191.59"/>
<polygon fill="black" stroke="black" points="4901.39,-3194.91 4911.98,-3194.62 4903.52,-3188.24 4901.39,-3194.91"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge93" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M4445.49,-673.05C4495.9,-646.08 4570.08,-611.22 4640,-596.6 4983.67,-524.71 5078.89,-594.8 5430,-596.6 5917.83,-599.08 7287.98,-455.7 7614,-818.6 7673.76,-885.12 7638.14,-1533.96 7650,-1622.6 7689.77,-1919.89 7786.22,-2269.99 7818.37,-2382.13"/>
<polygon fill="black" stroke="black" points="7814.99,-2383.03 7821.12,-2391.67 7821.72,-2381.09 7814.99,-2383.03"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge84" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M4515.59,-744.25C4555.26,-753.42 4599.13,-761.98 4640,-766.6 4650.86,-767.82 6204.32,-764.51 6214,-769.6 6238.89,-782.67 6225.59,-807.66 6250,-821.6 6328.28,-866.28 6428.11,-875.72 6511.77,-873.21"/>
<polygon fill="black" stroke="black" points="6511.82,-876.71 6521.69,-872.85 6511.56,-869.72 6511.82,-876.71"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge85" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M4461.97,-744.16C4511.75,-764.88 4578.29,-788.95 4640,-799.6 4845.66,-835.06 5464.76,-813.13 5723.44,-801.96"/>
<polygon fill="black" stroke="black" points="5723.39,-805.46 5733.23,-801.53 5723.08,-798.47 5723.39,-805.46"/>
</g>
<!-- build_site.main&#45;&gt;build_site._convert_prices -->
<g id="edge86" class="edge">
<title>build_site.main&#45;&gt;build_site._convert_prices</title>
<path fill="none" stroke="black" d="M4390.82,-673.26C4410.61,-581.3 4477.34,-334.05 4640,-224.6 4714.83,-174.24 5951.64,-79.35 6461.71,-42.13"/>
<polygon fill="black" stroke="black" points="6461.65,-45.64 6471.37,-41.43 6461.14,-38.66 6461.65,-45.64"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge90" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M4397.85,-673.17C4428.59,-600.07 4510.23,-433.74 4640,-366.6 4883.84,-240.43 6841.8,-359.26 7110,-300.6 7194.48,-282.12 7285.58,-237.34 7337.13,-209.43"/>
<polygon fill="black" stroke="black" points="7338.78,-212.52 7345.87,-204.64 7335.42,-206.38 7338.78,-212.52"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge87" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M4409.72,-744.24C4458.37,-813.96 4562.66,-974.99 4604,-1128.6 4628.05,-1217.95 4578.02,-1891.89 4640,-1960.6 4706.28,-2034.08 4821.61,-2043.52 4910.42,-2037.57"/>
<polygon fill="black" stroke="black" points="4910.44,-2041.07 4920.15,-2036.84 4909.92,-2034.09 4910.44,-2041.07"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge88" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M4551.81,-708.6C4593.69,-708.6 4640.15,-708.6 4687.22,-708.6"/>
<polygon fill="black" stroke="black" points="4687.04,-712.1 4697.04,-708.6 4687.04,-705.1 4687.04,-712.1"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge89" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M4398.52,-744.17C4431.12,-820.08 4516.98,-999.6 4640,-1105.6 4703.81,-1160.58 4787.39,-1201.56 4861.15,-1230.25"/>
<polygon fill="black" stroke="black" points="4859.48,-1233.36 4870.07,-1233.68 4861.99,-1226.83 4859.48,-1233.36"/>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node68" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node68"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="6098,-890.12 5582,-890.12 5582,-833.07 6098,-833.07 6098,-890.12"/>
<text text-anchor="middle" x="5840" y="-847.29" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge91" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M4444.99,-744.21C4495.41,-771.59 4569.86,-807.4 4640,-823.6 4953.27,-895.94 5324.73,-894.85 5570.28,-882.58"/>
<polygon fill="black" stroke="black" points="5570.19,-886.09 5580,-882.09 5569.84,-879.1 5570.19,-886.09"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node69" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node69"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="5292,-291.12 4778,-291.12 4778,-234.07 5292,-234.07 5292,-291.12"/>
<text text-anchor="middle" x="5035" y="-248.29" font-family="Times,serif" font-size="40.88">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge92" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M4394.79,-672.98C4421.41,-591.87 4498.56,-393.64 4640,-305.6 4677.83,-282.05 4721.74,-267.66 4766.22,-259.31"/>
<polygon fill="black" stroke="black" points="4766.81,-262.76 4776.05,-257.58 4765.59,-255.86 4766.81,-262.76"/>
</g>
<!-- price_utils.train_price_regression -->
<g id="node89" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node89"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="7110,-227.4 6250,-227.4 6250,-143.8 7110,-143.8 7110,-227.4"/>
<text text-anchor="middle" x="6680" y="-163.55" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge123" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M5292.26,-252.43C5530.92,-242.75 5896.59,-227.34 6214,-211.6 6221.96,-211.2 6229.99,-210.8 6238.09,-210.39"/>
<polygon fill="black" stroke="black" points="6238.25,-213.88 6248.06,-209.88 6237.89,-206.89 6238.25,-213.88"/>
</g>
<!-- price_utils.predict_price -->
<g id="node90" class="node">
<title>price_utils.predict_price</title>
<g id="a_node90"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="6843.5,-291.83 6516.5,-291.83 6516.5,-245.36 6843.5,-245.36 6843.5,-291.83"/>
<text text-anchor="middle" x="6680" y="-257.37" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge124" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M5292.27,-263.53C5629.71,-264.76 6214.12,-266.9 6504.63,-267.96"/>
<polygon fill="black" stroke="black" points="6504.59,-271.46 6514.6,-268 6504.61,-264.46 6504.59,-271.46"/>
</g>
<!-- price_utils.currency_rates -->
<g id="node91" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node91"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="7532.5,-378.4 7227.5,-378.4 7227.5,-336.8 7532.5,-336.8 7532.5,-378.4"/>
<text text-anchor="middle" x="7380" y="-347.8" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge125" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M5292.32,-272.99C5776.88,-292.64 6814.59,-334.71 7215.88,-350.98"/>
<polygon fill="black" stroke="black" points="7215.63,-354.47 7225.77,-351.38 7215.92,-347.48 7215.63,-354.47"/>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node93" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node93"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="6049,-202.89 5631,-202.89 5631,-162.3 6049,-162.3 6049,-202.89"/>
<text text-anchor="middle" x="5840" y="-173.09" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge126" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M5292.3,-234.51C5349.46,-228.43 5409.78,-222.17 5466,-216.6 5515.63,-211.68 5569,-206.66 5619.42,-202.03"/>
<polygon fill="black" stroke="black" points="5619.66,-205.53 5629.3,-201.13 5619.02,-198.56 5619.66,-205.53"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node70" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node70"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="6799.5,-2570.6 6560.5,-2570.6 6560.5,-2534.6 6799.5,-2534.6 6799.5,-2570.6"/>
<text text-anchor="middle" x="6680" y="-2545.69" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node71" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node71"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="6009,-2539.13 5671,-2539.13 5671,-2502.06 6009,-2502.06 6009,-2539.13"/>
<text text-anchor="middle" x="5840" y="-2512.12" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge96" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6009.32,-2530.39C6081.11,-2525.51 6160.49,-2506.64 6214,-2454.6 6270.92,-2399.23 6191.47,-2333.25 6250,-2279.6 6301.81,-2232.1 6373.2,-2212.68 6442.87,-2207.15"/>
<polygon fill="black" stroke="black" points="6442.79,-2210.66 6452.53,-2206.48 6442.31,-2203.68 6442.79,-2210.66"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge94" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6009.38,-2536.98C6075.09,-2547.36 6149.88,-2564.23 6214,-2591.6 6397.98,-2670.11 6580.94,-2830.62 6650.1,-2894.99"/>
<polygon fill="black" stroke="black" points="6647.54,-2897.39 6657.23,-2901.67 6652.33,-2892.28 6647.54,-2897.39"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge95" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6009.32,-2527.02C6168.49,-2533.1 6403.97,-2542.09 6549.12,-2547.64"/>
<polygon fill="black" stroke="black" points="6548.64,-2551.12 6558.77,-2548 6548.91,-2544.13 6548.64,-2551.12"/>
</g>
<!-- post_io.get_contact -->
<g id="node72" class="node">
<title>post_io.get_contact</title>
<g id="a_node72"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="5919,-4613.6 5761,-4613.6 5761,-4577.6 5919,-4577.6 5919,-4613.6"/>
<text text-anchor="middle" x="5840" y="-4589.13" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node73" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node73"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="5978,-4673.9 5702,-4673.9 5702,-4631.29 5978,-4631.29 5978,-4673.9"/>
<text text-anchor="middle" x="5840" y="-4642.5" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.write_post -->
<g id="node75" class="node">
<title>post_io.write_post</title>
<g id="a_node75"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="5170,-4672.18 4900,-4672.18 4900,-4623.02 5170,-4623.02 5170,-4672.18"/>
<text text-anchor="middle" x="5035" y="-4635.59" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge99" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M5170.4,-4638.89C5334.83,-4628.24 5608.63,-4610.51 5749.4,-4601.4"/>
<polygon fill="black" stroke="black" points="5749.27,-4604.91 5759.02,-4600.78 5748.82,-4597.93 5749.27,-4604.91"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge100" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M5170.4,-4648.43C5314.11,-4649.33 5541.36,-4650.74 5690.32,-4651.67"/>
<polygon fill="black" stroke="black" points="5690.27,-4655.17 5700.29,-4651.73 5690.31,-4648.17 5690.27,-4655.17"/>
</g>
<!-- notes_utils.write_md -->
<g id="node76" class="node">
<title>notes_utils.write_md</title>
<g id="a_node76"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="5931,-4727.6 5749,-4727.6 5749,-4691.6 5931,-4691.6 5931,-4727.6"/>
<text text-anchor="middle" x="5840" y="-4702.69" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge101" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M5170.1,-4658.82C5254.92,-4665.84 5366.86,-4674.97 5466,-4682.6 5557.75,-4689.65 5662.23,-4697.17 5737.23,-4702.48"/>
<polygon fill="black" stroke="black" points="5736.8,-4705.95 5747.03,-4703.17 5737.3,-4698.97 5736.8,-4705.95"/>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node77" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node77"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="5960.5,-2707.6 5719.5,-2707.6 5719.5,-2671.6 5960.5,-2671.6 5960.5,-2707.6"/>
<text text-anchor="middle" x="5840" y="-2683.62" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge102" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5914.82,-2671.1C5999.5,-2654.76 6136.61,-2644.11 6214,-2721.6 6281.14,-2788.82 6182.96,-3080.28 6250,-3147.6 6298.22,-3196.01 6496.28,-3194.66 6605.63,-3189.93"/>
<polygon fill="black" stroke="black" points="6605.55,-3193.44 6615.38,-3189.49 6605.23,-3186.44 6605.55,-3193.44"/>
</g>
<!-- image_io.read_image_meta -->
<g id="node78" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node78"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="5935,-2445.6 5745,-2445.6 5745,-2409.6 5935,-2409.6 5935,-2445.6"/>
<text text-anchor="middle" x="5840" y="-2422.11" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node79" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node79"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="6747,-2324.6 6613,-2324.6 6613,-2288.6 6747,-2288.6 6747,-2324.6"/>
<text text-anchor="middle" x="6680" y="-2301.7" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge103" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M5935.15,-2442.31C6015.48,-2449.86 6130.84,-2448.33 6214,-2395.6 6240.91,-2378.53 6222.9,-2350.35 6250,-2333.6 6357.39,-2267.19 6510.22,-2276.77 6601.52,-2290.9"/>
<polygon fill="black" stroke="black" points="6600.69,-2294.31 6611.12,-2292.44 6601.8,-2287.4 6600.69,-2294.31"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge187" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M6747.5,-2302.2C6833.09,-2298.47 6985.59,-2298.4 7110,-2333.6 7200.41,-2359.18 7294.89,-2418.12 7344.24,-2451.8"/>
<polygon fill="black" stroke="black" points="7342.03,-2454.53 7352.25,-2457.33 7346.01,-2448.77 7342.03,-2454.53"/>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge188" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M6747.3,-2302.99C6857.68,-2296.98 7081.76,-2284.78 7231.16,-2276.64"/>
<polygon fill="black" stroke="black" points="7230.93,-2280.16 7240.72,-2276.12 7230.55,-2273.17 7230.93,-2280.16"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node80" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node80"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="5132.5,-4726.6 4937.5,-4726.6 4937.5,-4690.6 5132.5,-4690.6 5132.5,-4726.6"/>
<text text-anchor="middle" x="5035" y="-4703.11" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge104" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M5132.86,-4708.72C5285.67,-4708.91 5581.31,-4709.28 5737.16,-4709.47"/>
<polygon fill="black" stroke="black" points="5737.07,-4712.97 5747.08,-4709.48 5737.08,-4705.97 5737.07,-4712.97"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node81" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node81"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="5411,-2147.2 4659,-2147.2 4659,-2069.99 5411,-2069.99 5411,-2147.2"/>
<text text-anchor="middle" x="5035" y="-2088.41" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge105" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M5405.4,-2069.79C5414.18,-2062.85 5422.42,-2055.15 5430,-2046.6 5504.12,-1962.98 5393.23,-1126.39 5466,-1041.6 5512.35,-987.58 5585.96,-966.5 5655.58,-960.18"/>
<polygon fill="black" stroke="black" points="5655.52,-963.7 5665.21,-959.41 5654.96,-956.72 5655.52,-963.7"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge107" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5411.41,-2128.43C5696.26,-2143.88 6063.65,-2164.79 6214,-2177.6 6288.58,-2183.95 6369.72,-2192.46 6443.03,-2200.76"/>
<polygon fill="black" stroke="black" points="6442.42,-2204.21 6452.75,-2201.87 6443.21,-2197.26 6442.42,-2204.21"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge108" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5280.4,-2147.68C5337.79,-2168.45 5392.95,-2200.17 5430,-2248.6 5493.38,-2331.44 5391.29,-2643.81 5466,-2716.6 5525.6,-2774.67 6153.97,-2696.96 6214,-2754.6 6277.26,-2815.34 6187.89,-3085.68 6250,-3147.6 6298.33,-3195.78 6495.85,-3194.57 6605.24,-3189.91"/>
<polygon fill="black" stroke="black" points="6605.16,-3193.41 6615,-3189.47 6604.85,-3186.42 6605.16,-3193.41"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge109" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M5400.31,-2069.73C5410.79,-2062.87 5420.74,-2055.19 5430,-2046.6 5481.21,-1999.09 5411.89,-1937.78 5466,-1893.6 5508.98,-1858.5 6302.94,-1856.79 6582.55,-1857.28"/>
<polygon fill="black" stroke="black" points="6582.36,-1860.78 6592.37,-1857.3 6582.37,-1853.78 6582.36,-1860.78"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge106" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M5270.12,-2147.63C5330.03,-2168.35 5389.02,-2200.06 5430,-2248.6 5489.96,-2319.61 5400.35,-2388.81 5466,-2454.6 5516.16,-2504.87 5590.38,-2524.47 5659.43,-2530.33"/>
<polygon fill="black" stroke="black" points="5659.16,-2533.82 5669.39,-2531.07 5659.68,-2526.84 5659.16,-2533.82"/>
</g>
<!-- scan_ontology.main -->
<g id="node82" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="4568.5,-1199.14 4197.5,-1199.14 4197.5,-1138.05 4568.5,-1138.05 4568.5,-1199.14"/>
<text text-anchor="middle" x="4383" y="-1153.11" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge112" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M4568.7,-1169.36C5008.75,-1171.38 6153.79,-1177.72 7110,-1192.6 7170.59,-1193.54 7238.86,-1195.07 7291.45,-1196.34"/>
<polygon fill="black" stroke="black" points="7291.17,-1199.84 7301.26,-1196.58 7291.34,-1192.84 7291.17,-1199.84"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge110" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M4405.62,-1199.63C4451.62,-1267.52 4558.7,-1435.92 4604,-1594.6 4631.66,-1691.49 4571.53,-1972.67 4640,-2046.6 4645.3,-2052.31 4650.89,-2057.65 4656.74,-2062.62"/>
<polygon fill="black" stroke="black" points="4654.32,-2065.17 4664.31,-2068.71 4658.71,-2059.71 4654.32,-2065.17"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node83" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node83"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="5184.5,-1096.72 4885.5,-1096.72 4885.5,-1058.48 5184.5,-1058.48 5184.5,-1096.72"/>
<text text-anchor="middle" x="5035" y="-1068.78" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge111" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M4568.96,-1142.7C4668.22,-1128.8 4789.03,-1111.89 4882.64,-1098.79"/>
<polygon fill="black" stroke="black" points="4883,-1102.27 4892.42,-1097.42 4882.03,-1095.34 4883,-1102.27"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node113" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node113"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="5936,-649.6 5744,-649.6 5744,-613.6 5936,-613.6 5936,-649.6"/>
<text text-anchor="middle" x="5840" y="-626.11" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge175" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M5058.33,-1058.24C5119.72,-1005.8 5297.7,-858.93 5466,-769.6 5563.86,-717.66 5685.58,-676.61 5762.8,-653.21"/>
<polygon fill="black" stroke="black" points="5763.38,-656.69 5771.95,-650.46 5761.36,-649.99 5763.38,-656.69"/>
</g>
<!-- caption._identify_size -->
<g id="node84" class="node">
<title>caption._identify_size</title>
<g id="a_node84"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="7486,-5003.6 7274,-5003.6 7274,-4967.6 7486,-4967.6 7486,-5003.6"/>
<text text-anchor="middle" x="7380" y="-4977.85" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node85" class="node">
<title>caption._prepare_image</title>
<g id="a_node85"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="6852.5,-5009.18 6507.5,-5009.18 6507.5,-4960.02 6852.5,-4960.02 6852.5,-5009.18"/>
<text text-anchor="middle" x="6680" y="-4972.59" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge113" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M6852.64,-4984.84C6980.06,-4985.02 7150.43,-4985.27 7262.37,-4985.43"/>
<polygon fill="black" stroke="black" points="7262.17,-4988.93 7272.17,-4985.44 7262.18,-4981.93 7262.17,-4988.93"/>
</g>
<!-- caption._guess_chat -->
<g id="node86" class="node">
<title>caption._guess_chat</title>
<g id="a_node86"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="7457.5,-4949.6 7302.5,-4949.6 7302.5,-4913.6 7457.5,-4913.6 7457.5,-4949.6"/>
<text text-anchor="middle" x="7380" y="-4925.62" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node87" class="node">
<title>caption.caption_file</title>
<g id="a_node87"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="6084.5,-5009.21 5595.5,-5009.21 5595.5,-4929.98 6084.5,-4929.98 6084.5,-5009.21"/>
<text text-anchor="middle" x="5840" y="-4948.82" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge119" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6047.96,-4929.54C6102.61,-4916.74 6161.1,-4901.02 6214,-4882.6 6230.71,-4876.78 6232.9,-4870.14 6250,-4865.6 6342.64,-4841.01 7044.15,-4868.24 7110,-4798.6 7173.22,-4731.73 7084.05,-3210.64 7146,-3142.6 7176.01,-3109.63 7222.96,-3099.92 7266.88,-3099.61"/>
<polygon fill="black" stroke="black" points="7266.71,-3103.11 7276.75,-3099.72 7266.79,-3096.11 7266.71,-3103.11"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge114" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6084.75,-4944.63C6139.11,-4939.38 6196.5,-4934.08 6250,-4929.6 6345.45,-4921.6 7043.42,-4938.46 7110,-4869.6 7187.36,-4789.58 7083.6,-3960.75 7146,-3868.6 7178.35,-3820.83 7238.21,-3795 7289.16,-3781.15"/>
<polygon fill="black" stroke="black" points="7289.95,-3784.57 7298.76,-3778.67 7288.2,-3777.79 7289.95,-3784.57"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge115" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6084.53,-4958.78C6133.98,-4945.1 6180.91,-4921.67 6214,-4882.6 6295.03,-4786.93 6175.25,-4420.24 6250,-4319.6 6333.55,-4207.11 6505.43,-4173.67 6604.4,-4163.76"/>
<polygon fill="black" stroke="black" points="6604.66,-4167.25 6614.29,-4162.83 6604.01,-4160.28 6604.66,-4167.25"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge116" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M6084.55,-4959.87C6134.31,-4946.19 6181.37,-4922.48 6214,-4882.6 6299.51,-4778.06 6179.65,-3782.89 6250,-3667.6 6323.44,-3547.23 6481.56,-3483.39 6583.96,-3453.33"/>
<polygon fill="black" stroke="black" points="6584.82,-3456.72 6593.47,-3450.59 6582.89,-3449.99 6584.82,-3456.72"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge117" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M6084.79,-4973.96C6216.11,-4976.31 6375.44,-4979.16 6496.04,-4981.32"/>
<polygon fill="black" stroke="black" points="6495.64,-4984.81 6505.71,-4981.49 6495.77,-4977.82 6495.64,-4984.81"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge118" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M6084.8,-4957.09C6139.16,-4954.63 6196.54,-4952.29 6250,-4950.6 6637.87,-4938.33 7100.96,-4933.67 7291.02,-4932.19"/>
<polygon fill="black" stroke="black" points="7290.83,-4935.69 7300.81,-4932.12 7290.78,-4928.69 7290.83,-4935.69"/>
</g>
<!-- caption.main -->
<g id="node88" class="node">
<title>caption.main</title>
<g id="a_node88"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="5108,-4988.72 4962,-4988.72 4962,-4950.48 5108,-4950.48 5108,-4988.72"/>
<text text-anchor="middle" x="5035" y="-4960.78" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge120" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M5108.32,-4969.6C5214.69,-4969.6 5418.6,-4969.6 5584.04,-4969.6"/>
<polygon fill="black" stroke="black" points="5583.87,-4973.1 5593.87,-4969.6 5583.87,-4966.1 5583.87,-4973.1"/>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge121" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M7110.13,-185.6C7150.5,-185.6 7189.36,-185.6 7224.38,-185.6"/>
<polygon fill="black" stroke="black" points="7224.1,-189.1 7234.1,-185.6 7224.1,-182.1 7224.1,-189.1"/>
</g>
<!-- price_utils.guess_currency -->
<g id="node92" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node92"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="6892.5,-125.61 6467.5,-125.61 6467.5,-71.58 6892.5,-71.58 6892.5,-125.61"/>
<text text-anchor="middle" x="6680" y="-85.17" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge122" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M6049.33,-173.97C6103.43,-168.91 6161.3,-160.98 6214,-148.6 6230.71,-144.67 6233.27,-138.46 6250,-134.6 6316.05,-119.32 6389.14,-110.35 6456.01,-105.13"/>
<polygon fill="black" stroke="black" points="6455.89,-108.65 6465.6,-104.41 6455.37,-101.67 6455.89,-108.65"/>
</g>
<!-- chop.has_misc_deal -->
<g id="node94" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node94"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="5933,-3025.6 5747,-3025.6 5747,-2989.6 5933,-2989.6 5933,-3025.6"/>
<text text-anchor="middle" x="5840" y="-3000.25" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node95" class="node">
<title>chop.process_message</title>
<g id="a_node95"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="5430,-3005.84 4640,-3005.84 4640,-2895.36 5430,-2895.36 5430,-3005.84"/>
<text text-anchor="middle" x="5035" y="-2920.71" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge127" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5084.9,-2895.01C5172.87,-2791.15 5355.55,-2556.88 5430,-2322.6 5452.01,-2253.34 5414.77,-1721.13 5466,-1669.6 5540.06,-1595.1 6233.06,-1591.73 6537.13,-1593.9"/>
<polygon fill="black" stroke="black" points="6536.68,-1597.4 6546.71,-1593.97 6536.74,-1590.4 6536.68,-1597.4"/>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge131" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5061.38,-2895.23C5116.78,-2781.29 5260.27,-2521.19 5466,-2400.6 5548.52,-2352.23 6114.05,-2287.4 6443,-2253.12"/>
<polygon fill="black" stroke="black" points="6443.03,-2256.64 6452.62,-2252.13 6442.31,-2249.68 6443.03,-2256.64"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge128" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5202.07,-3006.26C5285.63,-3043.48 5379.65,-3101.51 5430,-3186.6 5484.19,-3278.17 5389.85,-4069.28 5466,-4143.6 5547.32,-4222.96 6353.55,-4179.89 6604.7,-4164.41"/>
<polygon fill="black" stroke="black" points="6604.61,-4167.92 6614.38,-4163.81 6604.18,-4160.93 6604.61,-4167.92"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge129" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M5430.32,-2943.88C5785.93,-2937.82 6289.5,-2929.23 6534.24,-2925.06"/>
<polygon fill="black" stroke="black" points="6534.24,-2928.56 6544.18,-2924.89 6534.12,-2921.56 6534.24,-2928.56"/>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge130" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M5088.4,-2894.97C5163.68,-2819.28 5310.58,-2686.74 5466,-2629.6 5661.61,-2557.67 6277.58,-2550.9 6548.72,-2551.56"/>
<polygon fill="black" stroke="black" points="6548.66,-2555.06 6558.67,-2551.58 6548.68,-2548.06 6548.66,-2555.06"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge132" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M5430.44,-2978.6C5543.29,-2986.61 5656.88,-2994.67 5735.54,-3000.25"/>
<polygon fill="black" stroke="black" points="5735.15,-3003.73 5745.37,-3000.95 5735.65,-2996.75 5735.15,-3003.73"/>
</g>
<!-- embed.embed_file -->
<g id="node96" class="node">
<title>embed.embed_file</title>
<g id="a_node96"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="6006,-1962.13 5674,-1962.13 5674,-1903.06 6006,-1903.06 6006,-1962.13"/>
<text text-anchor="middle" x="5840" y="-1917.7" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge133" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M5083.51,-2895.07C5169.62,-2790.85 5349.97,-2555.38 5430,-2322.6 5455.56,-2248.24 5410.39,-2026.19 5466,-1970.6 5516.58,-1920.04 5592.45,-1905.87 5662.59,-1906.18"/>
<polygon fill="black" stroke="black" points="5662.22,-1909.68 5672.28,-1906.33 5662.33,-1902.68 5662.22,-1909.68"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node97" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node97"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="6766.5,-2997.13 6593.5,-2997.13 6593.5,-2960.06 6766.5,-2960.06 6766.5,-2997.13"/>
<text text-anchor="middle" x="6680" y="-2970.12" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge134" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M5430.32,-2957.32C5811.07,-2963.8 6361.42,-2973.18 6582.11,-2976.94"/>
<polygon fill="black" stroke="black" points="6581.75,-2980.44 6591.8,-2977.11 6581.87,-2973.44 6581.75,-2980.44"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node98" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node98"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="6754.5,-3712.6 6605.5,-3712.6 6605.5,-3676.6 6754.5,-3676.6 6754.5,-3712.6"/>
<text text-anchor="middle" x="6680" y="-3689.11" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge135" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M5199.44,-3006.26C5283.05,-3043.65 5377.93,-3101.84 5430,-3186.6 5489.24,-3283.02 5383.2,-3617.45 5466,-3694.6 5507.16,-3732.94 6324.71,-3707.27 6593.89,-3697.74"/>
<polygon fill="black" stroke="black" points="6593.76,-3701.25 6603.63,-3697.39 6593.51,-3694.25 6593.76,-3701.25"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node99" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node99"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="7475,-2661.6 7285,-2661.6 7285,-2625.6 7475,-2625.6 7475,-2661.6"/>
<text text-anchor="middle" x="7380" y="-2638.11" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge136" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M5094.12,-2895.1C5171.67,-2825.25 5316.65,-2708.8 5466,-2662.6 5638.43,-2609.25 6897.29,-2632.8 7273.26,-2641.12"/>
<polygon fill="black" stroke="black" points="7273.07,-2644.62 7283.15,-2641.34 7273.23,-2637.62 7273.07,-2644.62"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge138" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6006.08,-1914.67C6080.56,-1906.84 6169.66,-1897.81 6250,-1890.6 6364.1,-1880.35 6495.46,-1870.54 6582.44,-1864.32"/>
<polygon fill="black" stroke="black" points="6582.65,-1867.81 6592.38,-1863.61 6582.15,-1860.83 6582.65,-1867.81"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge140" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M6006.33,-1927.85C6347.77,-1917.87 7100.01,-1894.87 7110,-1885.6 7162.92,-1836.45 7121.9,-1630.68 7146,-1562.6 7195.31,-1423.28 7306.67,-1282.87 7355.41,-1225.52"/>
<polygon fill="black" stroke="black" points="7357.84,-1228.06 7361.69,-1218.19 7352.52,-1223.5 7357.84,-1228.06"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node101" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node101"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="6757,-1968.6 6603,-1968.6 6603,-1932.6 6757,-1932.6 6757,-1968.6"/>
<text text-anchor="middle" x="6680" y="-1944.13" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge139" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M6006.06,-1936.14C6181.72,-1939.91 6452.98,-1945.74 6591.33,-1948.71"/>
<polygon fill="black" stroke="black" points="6591.1,-1952.21 6601.17,-1948.92 6591.25,-1945.21 6591.1,-1952.21"/>
</g>
<!-- chop.main -->
<g id="node100" class="node">
<title>chop.main</title>
<g id="a_node100"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="4443.5,-2969.72 4322.5,-2969.72 4322.5,-2931.48 4443.5,-2931.48 4443.5,-2969.72"/>
<text text-anchor="middle" x="4383" y="-2941.78" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge137" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M4443.99,-2950.6C4489.35,-2950.6 4556.03,-2950.6 4628.4,-2950.6"/>
<polygon fill="black" stroke="black" points="4628.07,-2954.1 4638.07,-2950.6 4628.07,-2947.1 4628.07,-2954.1"/>
</g>
<!-- embed.main -->
<g id="node102" class="node">
<title>embed.main</title>
<g id="a_node102"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="5104.5,-1951.72 4965.5,-1951.72 4965.5,-1913.48 5104.5,-1913.48 5104.5,-1951.72"/>
<text text-anchor="middle" x="5035" y="-1923.78" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge141" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M5104.81,-1932.6C5227.38,-1932.6 5487.05,-1932.6 5662.34,-1932.6"/>
<polygon fill="black" stroke="black" points="5662.25,-1936.1 5672.25,-1932.6 5662.25,-1929.1 5662.25,-1936.1"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node103" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node103"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="5958.5,-3844.13 5721.5,-3844.13 5721.5,-3807.06 5958.5,-3807.06 5958.5,-3844.13"/>
<text text-anchor="middle" x="5840" y="-3817.12" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node104" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node104"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="6859,-4462.6 6501,-4462.6 6501,-4426.6 6859,-4426.6 6859,-4462.6"/>
<text text-anchor="middle" x="6680" y="-4436.46" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node105" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node105"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="6047,-3993.83 5633,-3993.83 5633,-3947.36 6047,-3947.36 6047,-3993.83"/>
<text text-anchor="middle" x="5840" y="-3959.37" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge143" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M5945.29,-3994.28C6029.94,-4006.74 6146.03,-4007.29 6214,-3937.6 6302.31,-3847.06 6160.23,-3458.69 6250,-3369.6 6385.86,-3234.76 6965.35,-3446.95 7110,-3321.6 7171.33,-3268.45 7086.29,-3197.54 7146,-3142.6 7178.12,-3113.04 7224.18,-3103.5 7266.88,-3102.4"/>
<polygon fill="black" stroke="black" points="7266.75,-3105.9 7276.72,-3102.31 7266.69,-3098.9 7266.75,-3105.9"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge142" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M6047.1,-3963.7C6101.9,-3958.8 6160.66,-3950.73 6214,-3937.6 6230.83,-3933.45 6233.46,-3927.77 6250,-3922.6 6372.11,-3884.42 6518.65,-3856.73 6605.01,-3842.21"/>
<polygon fill="black" stroke="black" points="6605.49,-3845.68 6614.77,-3840.58 6604.34,-3838.77 6605.49,-3845.68"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node106" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node106"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="7562.5,-4068.34 7197.5,-4068.34 7197.5,-4020.86 7562.5,-4020.86 7562.5,-4068.34"/>
<text text-anchor="middle" x="7380" y="-4033.08" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge144" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7562.76,-4022.1C7580.63,-4016.43 7598.04,-4009.38 7614,-4000.6 7705.18,-3950.44 7779.65,-3847.68 7811.84,-3798.3"/>
<polygon fill="black" stroke="black" points="7814.6,-3800.46 7817.06,-3790.16 7808.71,-3796.68 7814.6,-3800.46"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node107" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node107"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="6040,-4063.86 5640,-4063.86 5640,-4011.34 6040,-4011.34 6040,-4063.86"/>
<text text-anchor="middle" x="5840" y="-4024.61" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge148" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5975.91,-4064.34C6056.37,-4071.84 6154.19,-4064.64 6214,-4002.6 6311.78,-3901.16 6169.15,-3484.98 6250,-3369.6 6332.4,-3252.01 6506.22,-3209.05 6605.46,-3193.74"/>
<polygon fill="black" stroke="black" points="6605.71,-3197.24 6615.09,-3192.32 6604.69,-3190.32 6605.71,-3197.24"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge151" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M5976.3,-4064.32C6056.65,-4071.72 6154.21,-4064.43 6214,-4002.6 6306.85,-3906.57 6155.08,-3496.57 6250,-3402.6 6317.99,-3335.28 7038.59,-3423.27 7110,-3359.6 7182.97,-3294.53 7075.2,-3210.01 7146,-3142.6 7177.68,-3112.44 7223.78,-3102.83 7266.64,-3101.84"/>
<polygon fill="black" stroke="black" points="7266.55,-3105.34 7276.52,-3101.78 7266.5,-3098.34 7266.55,-3105.34"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge149" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M6040.31,-4056.01C6100.77,-4052.32 6164.27,-4038.16 6214,-4002.6 6245.72,-3979.92 6219.67,-3947.1 6250,-3922.6 6352.38,-3839.87 6512,-3826.91 6604.95,-3827.22"/>
<polygon fill="black" stroke="black" points="6604.67,-3830.72 6614.7,-3827.31 6604.74,-3823.72 6604.67,-3830.72"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge150" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6040.18,-4038.22C6440.55,-4037.28 7328.93,-4023.46 7614,-3922.6 7690.92,-3895.38 7765.1,-3832.22 7802.97,-3796.47"/>
<polygon fill="black" stroke="black" points="7805.02,-3799.35 7809.83,-3789.9 7800.18,-3794.29 7805.02,-3799.35"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge145" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6040.42,-4040.85C6098.15,-4036.01 6160.1,-4025.01 6214,-4002.6 6233.23,-3994.6 6230.93,-3980.97 6250,-3972.6 6603.07,-3817.53 6734.64,-3945.97 7110,-3857.6 7185.51,-3839.82 7269.7,-3809.19 7323.44,-3788.19"/>
<polygon fill="black" stroke="black" points="7324.67,-3791.47 7332.7,-3784.55 7322.11,-3784.96 7324.67,-3791.47"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge146" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5988.08,-4064.28C6057.1,-4077.84 6140.23,-4095.66 6214,-4115.6 6230.28,-4120 6233.46,-4124.28 6250,-4127.6 6372.51,-4152.19 6518.13,-4158.3 6604.32,-4159.59"/>
<polygon fill="black" stroke="black" points="6604.26,-4163.09 6614.31,-4159.72 6604.35,-4156.09 6604.26,-4163.09"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge147" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M5971.4,-4064.31C6052.97,-4072.76 6153.67,-4066.62 6214,-4002.6 6294.21,-3917.48 6168.59,-3034.57 6250,-2950.6 6288.35,-2911.03 6425.17,-2907.79 6534.12,-2912.14"/>
<polygon fill="black" stroke="black" points="6533.92,-2915.63 6544.06,-2912.56 6534.22,-2908.64 6533.92,-2915.63"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node108" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node108"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="6014,-3789.34 5666,-3789.34 5666,-3741.86 6014,-3741.86 6014,-3789.34"/>
<text text-anchor="middle" x="5840" y="-3754.08" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge154" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6014.16,-3775.85C6086.24,-3770.41 6164.49,-3750.03 6214,-3694.6 6284.81,-3615.31 6174.8,-3292.73 6250,-3217.6 6342.62,-3125.05 6509.57,-3144.25 6605.61,-3165.55"/>
<polygon fill="black" stroke="black" points="6604.67,-3168.92 6615.2,-3167.74 6606.23,-3162.1 6604.67,-3168.92"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge156" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6014.27,-3775.49C6086.15,-3769.92 6164.21,-3749.55 6214,-3694.6 6274.07,-3628.29 6185.68,-3355.78 6250,-3293.6 6387.61,-3160.55 6957.06,-3360.69 7110,-3245.6 7148.75,-3216.44 7108.14,-3172.9 7146,-3142.6 7179.49,-3115.79 7224.87,-3106.47 7266.69,-3104.79"/>
<polygon fill="black" stroke="black" points="7266.66,-3108.29 7276.57,-3104.55 7266.49,-3101.3 7266.66,-3108.29"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge155" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M6014.38,-3779.04C6196.26,-3793.15 6473.58,-3814.66 6604.99,-3824.86"/>
<polygon fill="black" stroke="black" points="6604.35,-3828.32 6614.6,-3825.6 6604.9,-3821.34 6604.35,-3828.32"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge152" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6014.44,-3765.6C6341.75,-3765.6 7039.95,-3765.6 7288.68,-3765.6"/>
<polygon fill="black" stroke="black" points="7288.67,-3769.1 7298.67,-3765.6 7288.67,-3762.1 7288.67,-3769.1"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge153" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M6014.04,-3775.74C6086.09,-3770.28 6164.36,-3749.91 6214,-3694.6 6280.85,-3620.1 6177.76,-3314.89 6250,-3245.6 6319.01,-3179.4 7034.65,-3271.47 7110,-3212.6 7155.22,-3177.26 7112.79,-3135.4 7146,-3088.6 7192.89,-3022.52 7274.63,-2973.25 7327.76,-2946.2"/>
<polygon fill="black" stroke="black" points="7329.26,-2949.37 7336.64,-2941.76 7326.13,-2943.1 7329.26,-2949.37"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node109" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node109"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="7597,-4137.76 7163,-4137.76 7163,-4089.44 7597,-4089.44 7597,-4137.76"/>
<text text-anchor="middle" x="7380" y="-4101.84" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge157" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M7597.45,-4113.6C7639.19,-4113.6 7681.27,-4113.6 7717.9,-4113.6"/>
<polygon fill="black" stroke="black" points="7717.57,-4117.1 7727.57,-4113.6 7717.57,-4110.1 7717.57,-4117.1"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node110" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node110"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="7505,-3913.6 7255,-3913.6 7255,-3877.6 7505,-3877.6 7505,-3913.6"/>
<text text-anchor="middle" x="7380" y="-3887.46" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node111" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node111"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="6196.5,-3929 5483.5,-3929 5483.5,-3862.2 6196.5,-3862.2 6196.5,-3929"/>
<text text-anchor="middle" x="5840" y="-3878.45" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge158" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6196.87,-3869.9C6202.89,-3864.91 6208.61,-3859.49 6214,-3853.6 6273.03,-3789.05 6191.1,-2344.26 6250,-2279.6 6298.47,-2226.39 6370.91,-2206.05 6442.52,-2201.42"/>
<polygon fill="black" stroke="black" points="6442.69,-2204.91 6452.49,-2200.88 6442.32,-2197.92 6442.69,-2204.91"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge159" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6196.91,-3869.29C6202.9,-3864.48 6208.6,-3859.26 6214,-3853.6 6300.04,-3763.33 6170.22,-3389.44 6250,-3293.6 6336.61,-3189.55 6507.34,-3177.58 6605.29,-3180.22"/>
<polygon fill="black" stroke="black" points="6604.95,-3183.71 6615.06,-3180.55 6605.18,-3176.71 6604.95,-3183.71"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge163" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6196.88,-3869.26C6202.87,-3864.45 6208.59,-3859.24 6214,-3853.6 6294.42,-3769.62 6167.24,-3413.27 6250,-3331.6 6386.23,-3197.14 6962.17,-3405.18 7110,-3283.6 7159.95,-3242.51 7097.29,-3185.15 7146,-3142.6 7178.65,-3114.07 7224.46,-3104.6 7266.82,-3103.27"/>
<polygon fill="black" stroke="black" points="7266.62,-3106.78 7276.57,-3103.13 7266.52,-3099.78 7266.62,-3106.78"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge162" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M6196.99,-3867.98C6349.18,-3856.18 6512.72,-3843.49 6604.81,-3836.35"/>
<polygon fill="black" stroke="black" points="6605.02,-3839.85 6614.72,-3835.58 6604.48,-3832.87 6605.02,-3839.85"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge160" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M6142.66,-3929.48C6166.81,-3932.46 6190.82,-3935.52 6214,-3938.6 6402.73,-3963.64 6933.08,-4044.81 7208.37,-4087.23"/>
<polygon fill="black" stroke="black" points="7207.75,-4090.67 7218.17,-4088.74 7208.82,-4083.76 7207.75,-4090.67"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge161" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M6196.75,-3895.6C6530.22,-3895.6 7011.18,-3895.6 7243.39,-3895.6"/>
<polygon fill="black" stroke="black" points="7243.09,-3899.1 7253.09,-3895.6 7243.09,-3892.1 7243.09,-3899.1"/>
</g>
<!-- debug_dump.main -->
<g id="node112" class="node">
<title>debug_dump.main</title>
<g id="a_node112"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="5225.5,-3966 4844.5,-3966 4844.5,-3899.2 5225.5,-3899.2 5225.5,-3966"/>
<text text-anchor="middle" x="5035" y="-3915.45" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge164" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M5197.43,-3898.72C5277.83,-3882.92 5376.7,-3865.12 5466,-3853.6 5546.7,-3843.18 5637.76,-3836.26 5709.7,-3831.9"/>
<polygon fill="black" stroke="black" points="5709.79,-3835.4 5719.57,-3831.31 5709.38,-3828.41 5709.79,-3835.4"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge165" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M5083.41,-3966.48C5165.76,-4027.74 5335.46,-4165 5430,-4319.6 5457.94,-4365.29 5422.97,-4402.71 5466,-4434.6 5506.29,-4464.46 6158.47,-4455.41 6489.45,-4448.83"/>
<polygon fill="black" stroke="black" points="6489.16,-4452.34 6499.08,-4448.64 6489.02,-4445.34 6489.16,-4452.34"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge166" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M5225.79,-3941.58C5344.4,-3947.19 5497.53,-3954.44 5621.09,-3960.28"/>
<polygon fill="black" stroke="black" points="5620.91,-3963.78 5631.06,-3960.76 5621.24,-3956.79 5620.91,-3963.78"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge167" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M5114.19,-3966.34C5198.99,-4000.95 5339.22,-4052.48 5466,-4072.6 6088.33,-4171.35 6838.81,-4108.37 7185.78,-4069.13"/>
<polygon fill="black" stroke="black" points="7186.15,-4072.61 7195.69,-4068 7185.35,-4065.65 7186.15,-4072.61"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge168" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M5225.84,-3966.35C5300.53,-3978.88 5387.13,-3992.49 5466,-4002.6 5518.55,-4009.33 5575.42,-4015.32 5628.55,-4020.36"/>
<polygon fill="black" stroke="black" points="5628.03,-4023.83 5638.32,-4021.28 5628.69,-4016.86 5628.03,-4023.83"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge169" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M5123.88,-3898.77C5209.77,-3867.21 5344.9,-3821.5 5466,-3797.6 5526.78,-3785.6 5594.01,-3778.1 5654.46,-3773.41"/>
<polygon fill="black" stroke="black" points="5654.44,-3776.92 5664.15,-3772.68 5653.92,-3769.94 5654.44,-3776.92"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge170" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M5225.79,-3923.85C5299.57,-3920.45 5386.72,-3916.44 5471.79,-3912.52"/>
<polygon fill="black" stroke="black" points="5471.9,-3916.01 5481.72,-3912.06 5471.57,-3909.02 5471.9,-3916.01"/>
</g>
<!-- log_utils._add_exc_line -->
<g id="node114" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node114"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="5153.5,-641.6 4916.5,-641.6 4916.5,-605.6 5153.5,-605.6 5153.5,-641.6"/>
<text text-anchor="middle" x="5035" y="-615.46" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge171" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M5153.62,-624.77C5309.44,-626.32 5582.04,-629.04 5732.21,-630.53"/>
<polygon fill="black" stroke="black" points="5732.15,-634.03 5742.18,-630.63 5732.22,-627.03 5732.15,-634.03"/>
</g>
<!-- log_utils.init_logger -->
<g id="node115" class="node">
<title>log_utils.init_logger</title>
<g id="a_node115"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="5317,-512.08 4753,-512.08 4753,-423.11 5317,-423.11 5317,-512.08"/>
<text text-anchor="middle" x="5035" y="-443.98" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge172" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M5221.25,-512.54C5296.94,-530.31 5385.47,-550.32 5466,-566.6 5555.48,-584.68 5657.64,-602.27 5732.39,-614.58"/>
<polygon fill="black" stroke="black" points="5731.76,-618.02 5742.19,-616.19 5732.89,-611.12 5731.76,-618.02"/>
</g>
<!-- log_utils.get_logger -->
<g id="node116" class="node">
<title>log_utils.get_logger</title>
<g id="a_node116"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="5896.5,-459.6 5783.5,-459.6 5783.5,-423.6 5896.5,-423.6 5896.5,-459.6"/>
<text text-anchor="middle" x="5840" y="-437.33" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge173" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M5317.41,-452.01C5480.49,-445.96 5672.68,-440.58 5772.01,-439.82"/>
<polygon fill="black" stroke="black" points="5771.87,-443.32 5781.85,-439.76 5771.83,-436.32 5771.87,-443.32"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge174" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M5783.37,-447.04C5690.08,-452.69 5495.92,-459.94 5328.88,-464.64"/>
<polygon fill="black" stroke="black" points="5328.83,-461.14 5318.93,-464.92 5329.02,-468.14 5328.83,-461.14"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node118" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node118"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="6809.5,-1048.9 6550.5,-1048.9 6550.5,-1006.29 6809.5,-1006.29 6809.5,-1048.9"/>
<text text-anchor="middle" x="6680" y="-1017.5" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node119" class="node">
<title>lot_io.write_lots</title>
<g id="a_node119"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="5924,-1086.6 5756,-1086.6 5756,-1050.6 5924,-1050.6 5924,-1086.6"/>
<text text-anchor="middle" x="5840" y="-1060.46" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge179" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M5924.14,-1078.85C6008.71,-1084.29 6137.85,-1078.03 6214,-1003.6 6272.96,-945.96 6187.96,-875.92 6250,-821.6 6346,-737.54 6505.13,-753.72 6600.24,-773.74"/>
<polygon fill="black" stroke="black" points="6599.24,-777.1 6609.75,-775.81 6600.72,-770.26 6599.24,-777.1"/>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge181" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5924.47,-1078.1C6003.21,-1083.34 6122.51,-1081.41 6214,-1036.6 6235.18,-1026.22 6228.39,-1007.06 6250,-997.6 6293.77,-978.43 7069.94,-971.56 7110,-997.6 7143.03,-1019.06 7118.95,-1049.95 7146,-1078.6 7190.33,-1125.54 7257.11,-1157.32 7307.83,-1176.31"/>
<polygon fill="black" stroke="black" points="7306.38,-1179.51 7316.97,-1179.65 7308.78,-1172.93 7306.38,-1179.51"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge178" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M5924.25,-1083.29C6005.32,-1092.92 6128.5,-1094.64 6214,-1036.6 6243.6,-1016.5 6219.57,-983.41 6250,-964.6 6331.28,-914.36 7015.61,-949.71 7110,-964.6 7187.11,-976.76 7272.23,-1007.39 7325.65,-1028.84"/>
<polygon fill="black" stroke="black" points="7324.24,-1032.05 7334.83,-1032.57 7326.88,-1025.56 7324.24,-1032.05"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge180" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M5924.41,-1064.51C6067.92,-1057.49 6362.99,-1043.06 6538.62,-1034.46"/>
<polygon fill="black" stroke="black" points="6538.68,-1037.97 6548.5,-1033.98 6538.34,-1030.97 6538.68,-1037.97"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node121" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node121"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="6767.5,-1502.6 6592.5,-1502.6 6592.5,-1466.6 6767.5,-1466.6 6767.5,-1502.6"/>
<text text-anchor="middle" x="6680" y="-1478.62" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- phone_utils.format_georgian -->
<g id="node122" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node122"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="6005.5,-4559.89 5674.5,-4559.89 5674.5,-4519.3 6005.5,-4519.3 6005.5,-4559.89"/>
<text text-anchor="middle" x="5840" y="-4530.09" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- clean_data._parse_date -->
<g id="node123" class="node">
<title>clean_data._parse_date</title>
<g id="a_node123"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="6791,-4364.6 6569,-4364.6 6569,-4328.6 6791,-4328.6 6791,-4364.6"/>
<text text-anchor="middle" x="6680" y="-4338.85" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge190" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6779.28,-4365.09C6966.52,-4394.23 7376.83,-4427.98 7614,-4219.6 7660,-4179.18 7626.73,-4143.24 7650,-4086.6 7696.15,-3974.28 7774.17,-3852.11 7809.99,-3798.48"/>
<polygon fill="black" stroke="black" points="7812.85,-3800.5 7815.52,-3790.24 7807.04,-3796.59 7812.85,-3800.5"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node124" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node124"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="5963,-4365.72 5717,-4365.72 5717,-4327.48 5963,-4327.48 5963,-4365.72"/>
<text text-anchor="middle" x="5840" y="-4337.78" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge191" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5963.45,-4354.23C6058.75,-4357.21 6180.29,-4353.53 6214,-4318.6 6284.73,-4245.3 6194.96,-3488.3 6250,-3402.6 6330.13,-3277.83 6505.64,-3221.73 6605.57,-3199.07"/>
<polygon fill="black" stroke="black" points="6606.28,-3202.5 6615.29,-3196.93 6604.78,-3195.66 6606.28,-3202.5"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge192" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M5963.3,-4346.6C6122.45,-4346.6 6398.9,-4346.6 6557.61,-4346.6"/>
<polygon fill="black" stroke="black" points="6557.31,-4350.1 6567.31,-4346.6 6557.31,-4343.1 6557.31,-4350.1"/>
</g>
<!-- clean_data._clean_media -->
<g id="node125" class="node">
<title>clean_data._clean_media</title>
<g id="a_node125"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="5992.5,-4425.9 5687.5,-4425.9 5687.5,-4383.29 5992.5,-4383.29 5992.5,-4425.9"/>
<text text-anchor="middle" x="5840" y="-4394.5" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge193" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5992.76,-4421.97C6064.4,-4423.08 6148.36,-4413.56 6214,-4374.6 6239.12,-4359.68 6227.18,-4337.83 6250,-4319.6 6356.56,-4234.45 6513.01,-4191.57 6604.6,-4172.54"/>
<polygon fill="black" stroke="black" points="6605.12,-4176 6614.23,-4170.58 6603.73,-4169.14 6605.12,-4176"/>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge194" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M5992.76,-4394.09C6154.68,-4382.89 6407.99,-4365.35 6557.33,-4355.02"/>
<polygon fill="black" stroke="black" points="6557.55,-4358.51 6567.28,-4354.33 6557.06,-4351.53 6557.55,-4358.51"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node126" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node126"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="6003,-3685.18 5677,-3685.18 5677,-3636.02 6003,-3636.02 6003,-3685.18"/>
<text text-anchor="middle" x="5840" y="-3648.59" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge195" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5961.32,-3685.64C6043.82,-3695.21 6149.61,-3691.18 6214,-3626.6 6278.42,-3561.98 6185.05,-3281.68 6250,-3217.6 6343.2,-3125.63 6509.93,-3144.62 6605.78,-3165.72"/>
<polygon fill="black" stroke="black" points="6604.82,-3169.09 6615.35,-3167.89 6606.37,-3162.26 6604.82,-3169.09"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge197" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M5952.99,-3685.68C6037.42,-3697.32 6149.36,-3695.91 6214,-3626.6 6278.54,-3557.39 6187.63,-1994.76 6250,-1923.6 6330.94,-1831.24 6482.69,-1829.72 6582.28,-1840.82"/>
<polygon fill="black" stroke="black" points="6581.71,-1844.28 6592.06,-1841.98 6582.54,-1837.33 6581.71,-1844.28"/>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge196" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6003.07,-3667.17C6179.62,-3674.33 6455.3,-3685.52 6593.69,-3691.13"/>
<polygon fill="black" stroke="black" points="6593.38,-3694.62 6603.51,-3691.53 6593.66,-3687.63 6593.38,-3694.62"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node127" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node127"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="6004.5,-4309.72 5675.5,-4309.72 5675.5,-4271.48 6004.5,-4271.48 6004.5,-4309.72"/>
<text text-anchor="middle" x="5840" y="-4281.78" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node128" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node128"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="6851.5,-4518.72 6508.5,-4518.72 6508.5,-4480.48 6851.5,-4480.48 6851.5,-4518.72"/>
<text text-anchor="middle" x="6680" y="-4490.78" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node129" class="node">
<title>clean_data.main</title>
<g id="a_node129"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="5111.5,-4364.6 4958.5,-4364.6 4958.5,-4328.6 5111.5,-4328.6 5111.5,-4364.6"/>
<text text-anchor="middle" x="5035" y="-4339.25" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge198" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M5111.91,-4346.6C5248.12,-4346.6 5535.66,-4346.6 5705.49,-4346.6"/>
<polygon fill="black" stroke="black" points="5705.24,-4350.1 5715.24,-4346.6 5705.24,-4343.1 5705.24,-4350.1"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge199" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M5111.91,-4352.08C5240.48,-4361.37 5503.85,-4380.39 5675.82,-4392.81"/>
<polygon fill="black" stroke="black" points="5675.53,-4396.3 5685.76,-4393.53 5676.04,-4389.32 5675.53,-4396.3"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge200" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M5066.62,-4328.2C5142.77,-4280.6 5341.01,-4145.16 5430,-3974.6 5480.3,-3878.19 5390.78,-3811.12 5466,-3732.6 5516.88,-3679.48 5594.23,-3658.98 5665.32,-3652.75"/>
<polygon fill="black" stroke="black" points="5665.46,-3656.25 5675.16,-3651.99 5664.92,-3649.27 5665.46,-3656.25"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge201" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M5111.91,-4341.3C5237.51,-4332.54 5491.78,-4314.81 5663.78,-4302.82"/>
<polygon fill="black" stroke="black" points="5664.01,-4306.31 5673.74,-4302.12 5663.52,-4299.33 5664.01,-4306.31"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge202" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M5086.07,-4365.08C5165.37,-4393.35 5325.3,-4446.28 5466,-4467.6 5658.95,-4496.82 6207.96,-4500.51 6496.59,-4500.31"/>
<polygon fill="black" stroke="black" points="6496.51,-4503.81 6506.5,-4500.3 6496.5,-4496.81 6496.51,-4503.81"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node130" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node130"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="4001.5,-4856.6 3849.5,-4856.6 3849.5,-4820.6 4001.5,-4820.6 4001.5,-4856.6"/>
<text text-anchor="middle" x="3925.5" y="-4833.7" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node131" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node131"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1207,-4625.6 1025,-4625.6 1025,-4589.6 1207,-4589.6 1207,-4625.6"/>
<text text-anchor="middle" x="1116" y="-4600.25" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node132" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node132"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="4073,-4435.3 3778,-4435.3 3778,-4395.89 4073,-4395.89 4073,-4435.3"/>
<text text-anchor="middle" x="3925.5" y="-4406.43" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node133" class="node">
<title>tg_client._write_md</title>
<g id="a_node133"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="4440,-4658.6 4326,-4658.6 4326,-4622.6 4440,-4622.6 4440,-4658.6"/>
<text text-anchor="middle" x="4383" y="-4636.33" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge203" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M4440.26,-4641.2C4539.05,-4642.27 4746.63,-4644.5 4888.2,-4646.03"/>
<polygon fill="black" stroke="black" points="4888.01,-4649.52 4898.04,-4646.13 4888.08,-4642.52 4888.01,-4649.52"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node134" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node134"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="6034,-3463.83 5646,-3463.83 5646,-3417.36 6034,-3417.36 6034,-3463.83"/>
<text text-anchor="middle" x="5840" y="-3429.37" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge204" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5983.62,-3464.32C6061.01,-3468.78 6153.05,-3459.17 6214,-3403.6 6276.22,-3346.87 6187.09,-3273.56 6250,-3217.6 6347.19,-3131.14 6510.71,-3147.51 6605.31,-3166.81"/>
<polygon fill="black" stroke="black" points="6604.51,-3170.22 6615.02,-3168.86 6605.96,-3163.37 6604.51,-3170.22"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node135" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node135"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="5142.5,-3457.6 4927.5,-3457.6 4927.5,-3421.6 5142.5,-3421.6 5142.5,-3457.6"/>
<text text-anchor="middle" x="5035" y="-3433.13" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge205" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M5142.63,-3439.73C5267.62,-3439.88 5477.57,-3440.15 5634.33,-3440.34"/>
<polygon fill="black" stroke="black" points="5634.01,-3443.84 5644.01,-3440.35 5634.02,-3436.84 5634.01,-3443.84"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node136" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node136"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="2613,-3101.6 2416,-3101.6 2416,-3065.6 2613,-3065.6 2613,-3101.6"/>
<text text-anchor="middle" x="2514.5" y="-3078.11" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge206" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2613.29,-3084.53C2842.43,-3086.65 3431.89,-3091.6 3924.5,-3091.6 3924.5,-3091.6 3924.5,-3091.6 5036,-3091.6 5166.92,-3091.6 6092.11,-3067.83 6214,-3115.6 6233.93,-3123.41 6230.35,-3139.11 6250,-3147.6 6366.57,-3197.91 6517.25,-3198.2 6605.5,-3192.69"/>
<polygon fill="black" stroke="black" points="6605.48,-3196.19 6615.22,-3192.03 6605.01,-3189.21 6605.48,-3196.19"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node137" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node137"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="4126,-4377.83 3725,-4377.83 3725,-4331.36 4126,-4331.36 4126,-4377.83"/>
<text text-anchor="middle" x="3925.5" y="-4343.37" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node138" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node138"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="4557.5,-4487.76 4208.5,-4487.76 4208.5,-4439.44 4557.5,-4439.44 4557.5,-4487.76"/>
<text text-anchor="middle" x="4383" y="-4451.84" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node139" class="node">
<title>tg_client._extract_author</title>
<g id="a_node139"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="5324.5,-4554.2 4745.5,-4554.2 4745.5,-4479 5324.5,-4479 5324.5,-4554.2"/>
<text text-anchor="middle" x="5035" y="-4497" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge207" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M5324.77,-4524.87C5437.77,-4528.1 5563.73,-4531.71 5662.71,-4534.55"/>
<polygon fill="black" stroke="black" points="5662.42,-4538.04 5672.51,-4534.83 5662.62,-4531.04 5662.42,-4538.04"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node140" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node140"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="5950,-4873.6 5730,-4873.6 5730,-4837.6 5950,-4837.6 5950,-4873.6"/>
<text text-anchor="middle" x="5840" y="-4849.13" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node141" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node141"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="6800.5,-4789.6 6559.5,-4789.6 6559.5,-4753.6 6800.5,-4753.6 6800.5,-4789.6"/>
<text text-anchor="middle" x="6680" y="-4763.85" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node142" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node142"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="4122,-4291.19 3729,-4291.19 3729,-4238 4122,-4238 4122,-4291.19"/>
<text text-anchor="middle" x="3925.5" y="-4251.41" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge208" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M3944.12,-4237.74C3985.61,-4172.73 4088.78,-4000.4 4126,-3839.6 4140.06,-3778.83 4122.19,-1642.61 4162,-1594.6 4300.43,-1427.66 4424.31,-1519.14 4640,-1496.6 4987.88,-1460.24 5918.43,-1304.55 6214,-1491.6 6245.58,-1511.58 6219.09,-1546.59 6250,-1567.6 6295.43,-1598.46 6430.4,-1603.09 6536.95,-1601.45"/>
<polygon fill="black" stroke="black" points="6536.7,-1604.96 6546.64,-1601.28 6536.58,-1597.96 6536.7,-1604.96"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge209" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4122.36,-4257.96C4517.76,-4244.44 5439.71,-4212.3 6214,-4180.6 6351.83,-4174.95 6512.6,-4167.5 6604.43,-4163.16"/>
<polygon fill="black" stroke="black" points="6604.49,-4166.66 6614.32,-4162.69 6604.16,-4159.67 6604.49,-4166.66"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node143" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node143"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="4492,-4419.6 4274,-4419.6 4274,-4383.6 4492,-4383.6 4492,-4419.6"/>
<text text-anchor="middle" x="4383" y="-4395.62" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge210" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4065.2,-4291.67C4086.7,-4299.51 4107.79,-4309.61 4126,-4322.6 4148.59,-4338.71 4138.22,-4359.3 4162,-4373.6 4191.85,-4391.54 4228.07,-4400.3 4262.44,-4404.13"/>
<polygon fill="black" stroke="black" points="4261.72,-4407.57 4272.02,-4405.06 4262.4,-4400.61 4261.72,-4407.57"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node144" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node144"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="5137,-4818.6 4933,-4818.6 4933,-4782.6 5137,-4782.6 5137,-4818.6"/>
<text text-anchor="middle" x="5035" y="-4793.69" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge211" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M4492.26,-4389.84C4532.47,-4391.51 4575.25,-4401.46 4604,-4430.6 4699.86,-4527.77 4545.73,-4636.88 4640,-4735.6 4711.06,-4810 4832.13,-4819.98 4921.36,-4815.23"/>
<polygon fill="black" stroke="black" points="4921.35,-4818.74 4931.12,-4814.64 4920.92,-4811.75 4921.35,-4818.74"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node145" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node145"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="5987,-4819.6 5693,-4819.6 5693,-4783.6 5987,-4783.6 5987,-4819.6"/>
<text text-anchor="middle" x="5840" y="-4793.85" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge214" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M5137.29,-4800.72C5274.3,-4800.89 5520.05,-4801.2 5681.33,-4801.4"/>
<polygon fill="black" stroke="black" points="5681.27,-4804.9 5691.27,-4801.41 5681.28,-4797.9 5681.27,-4804.9"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge212" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5987.02,-4807.74C6077.61,-4808.14 6182.55,-4801.23 6214,-4769.6 6284.73,-4698.46 6189.54,-4399.65 6250,-4319.6 6334.33,-4207.93 6505.52,-4174.18 6604.25,-4163.99"/>
<polygon fill="black" stroke="black" points="6604.51,-4167.48 6614.12,-4163.04 6603.83,-4160.52 6604.51,-4167.48"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge213" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M5987.45,-4796.35C6145.82,-4790.68 6395.95,-4781.73 6548.02,-4776.29"/>
<polygon fill="black" stroke="black" points="6547.87,-4779.79 6557.73,-4775.94 6547.62,-4772.8 6547.87,-4779.79"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node146" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node146"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="3381,-4751.4 3022,-4751.4 3022,-4707.79 3381,-4707.79 3381,-4751.4"/>
<text text-anchor="middle" x="3201.5" y="-4719.21" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge215" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M3266.22,-4751.82C3363.61,-4784.5 3556.02,-4843.96 3725,-4865.6 4103.06,-4913.99 5258.24,-4841.8 5681.47,-4812.78"/>
<polygon fill="black" stroke="black" points="5681.61,-4816.28 5691.35,-4812.1 5681.13,-4809.3 5681.61,-4816.28"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node147" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node147"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="5980,-3525.4 5700,-3525.4 5700,-3481.79 5980,-3481.79 5980,-3525.4"/>
<text text-anchor="middle" x="5840" y="-3493.21" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge216" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M5939.28,-3525.85C6023.38,-3538.61 6141.95,-3540.63 6214,-3472.6 6297.22,-3394.02 6166.45,-3295.82 6250,-3217.6 6345.32,-3128.35 6510.52,-3146.08 6605.71,-3166.29"/>
<polygon fill="black" stroke="black" points="6604.68,-3169.65 6615.2,-3168.37 6606.18,-3162.81 6604.68,-3169.65"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge217" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5980.32,-3500.22C6372.48,-3491.57 7466.77,-3473.71 7614,-3539.6 7709.91,-3582.52 7782.78,-3690.78 7813.31,-3742.39"/>
<polygon fill="black" stroke="black" points="7810.2,-3744.01 7818.25,-3750.9 7816.25,-3740.49 7810.2,-3744.01"/>
</g>
<!-- tg_client._load_progress -->
<g id="node148" class="node">
<title>tg_client._load_progress</title>
<g id="a_node148"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="1703,-4492.72 1440,-4492.72 1440,-4454.48 1703,-4454.48 1703,-4492.72"/>
<text text-anchor="middle" x="1571.5" y="-4464.78" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge218" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M1589.15,-4492.95C1675.27,-4590.83 2082.88,-5026.6 2513.5,-5026.6 2513.5,-5026.6 2513.5,-5026.6 4384,-5026.6 4473.72,-5026.6 7549.71,-5075.18 7614,-5012.6 7650.89,-4976.69 7635.91,-4136.12 7650,-4086.6 7683.21,-3969.84 7767.7,-3849.98 7807.56,-3797.72"/>
<polygon fill="black" stroke="black" points="7810.21,-3800.02 7813.54,-3789.96 7804.67,-3795.74 7810.21,-3800.02"/>
</g>
<!-- tg_client._save_progress -->
<g id="node149" class="node">
<title>tg_client._save_progress</title>
<g id="a_node149"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2120.5,-3515.6 1933.5,-3515.6 1933.5,-3479.6 2120.5,-3479.6 2120.5,-3515.6"/>
<text text-anchor="middle" x="2027" y="-3491.62" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node150" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node150"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2623,-3289.13 2406,-3289.13 2406,-3252.06 2623,-3252.06 2623,-3289.13"/>
<text text-anchor="middle" x="2514.5" y="-3262.12" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge219" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2623.33,-3271.75C2859.24,-3274.18 3438.92,-3279.6 3924.5,-3279.6 3924.5,-3279.6 3924.5,-3279.6 4384,-3279.6 4616.48,-3279.6 5202.46,-3308.26 5430,-3260.6 5446.97,-3257.04 5449.09,-3249.41 5466,-3245.6 5521.67,-3233.02 6351.09,-3198.79 6605.42,-3188.54"/>
<polygon fill="black" stroke="black" points="6605.37,-3192.04 6615.22,-3188.14 6605.09,-3185.05 6605.37,-3192.04"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node151" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node151"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="1677.5,-3403.13 1465.5,-3403.13 1465.5,-3366.06 1677.5,-3366.06 1677.5,-3403.13"/>
<text text-anchor="middle" x="1571.5" y="-3376.12" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge220" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1677.96,-3379.23C1851.95,-3370.84 2210.1,-3355.6 2513.5,-3355.6 2513.5,-3355.6 2513.5,-3355.6 4384,-3355.6 4849.01,-3355.6 4975.09,-3428.02 5430,-3331.6 5446.96,-3328 5449.11,-3320.48 5466,-3316.6 5628.26,-3279.27 6073.04,-3362.21 6214,-3273.6 6241.96,-3256.02 6222.01,-3226.12 6250,-3208.6 6358.53,-3140.66 6514.4,-3153.49 6605.33,-3169.32"/>
<polygon fill="black" stroke="black" points="6604.68,-3172.76 6615.14,-3171.09 6605.92,-3165.87 6604.68,-3172.76"/>
</g>
<!-- tg_client._save_message -->
<g id="node152" class="node">
<title>tg_client._save_message</title>
<g id="a_node152"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="3689,-4477.81 2714,-4477.81 2714,-4353.38 3689,-4353.38 3689,-4477.81"/>
<text text-anchor="middle" x="3201.5" y="-4381.64" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge221" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M3635.18,-4478.25C3654.69,-4490.57 3672.83,-4504.92 3689,-4521.6 3750.04,-4584.56 3664.61,-4652.01 3725,-4715.6 3851.2,-4848.47 3999.22,-4679.27 4126,-4811.6 4183.95,-4872.08 4098.5,-4941.97 4162,-4996.6 4251.24,-5073.36 7514.08,-5131.21 7614,-5051.6 7762.07,-4933.63 7816.47,-4289.41 7827.01,-4143.15"/>
<polygon fill="black" stroke="black" points="7830.47,-4143.74 7827.69,-4133.52 7823.49,-4143.25 7830.47,-4143.74"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge223" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M3271.98,-4353.23C3384.02,-4247.64 3600.94,-4021.26 3689,-3777.6 3753.56,-3598.96 3666.74,-3104.39 3725,-2923.6 3833.48,-2586.98 3852.51,-2429.75 4162,-2258.6 4260.66,-2204.03 5836.21,-2218.6 6443.17,-2226.29"/>
<polygon fill="black" stroke="black" points="6442.68,-2229.79 6452.73,-2226.42 6442.77,-2222.79 6442.68,-2229.79"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge224" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3268.63,-4353.13C3376.84,-4246.53 3589.63,-4017.62 3689,-3777.6 3711.98,-3722.08 3682.29,-3551.86 3725,-3509.6 3864.11,-3371.95 3967.41,-3476.37 4162,-3455.6 4374.1,-3432.96 4427.06,-3425 4640,-3412.6 4683.66,-3410.05 6180.25,-3398.42 6214,-3370.6 6270.91,-3323.68 6193.72,-3256.27 6250,-3208.6 6301.87,-3164.65 6497.41,-3171.63 6605.7,-3179.29"/>
<polygon fill="black" stroke="black" points="6605.12,-3182.76 6615.35,-3179.99 6605.63,-3175.78 6605.12,-3182.76"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge222" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M3602.21,-4478.27C3643.62,-4483.86 3685.13,-4489.1 3725,-4493.6 4505.98,-4581.65 5457.68,-4593.77 5749.62,-4595.37"/>
<polygon fill="black" stroke="black" points="5749.44,-4598.87 5759.45,-4595.42 5749.47,-4591.87 5749.44,-4598.87"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge225" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M3653.73,-4478.14C3666.33,-4487.5 3678.15,-4497.95 3689,-4509.6 3779.66,-4606.86 3632.8,-4710.79 3725,-4806.6 3753.62,-4836.34 3798.07,-4845.5 3837.76,-4846.72"/>
<polygon fill="black" stroke="black" points="3837.53,-4850.21 3847.57,-4846.84 3837.62,-4843.21 3837.53,-4850.21"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge226" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M3689.09,-4415.6C3716.19,-4415.6 3742.21,-4415.6 3766.43,-4415.6"/>
<polygon fill="black" stroke="black" points="3766.28,-4419.1 3776.28,-4415.6 3766.28,-4412.1 3766.28,-4419.1"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge227" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M3643.73,-4478.16C3659.67,-4487.42 3674.85,-4497.86 3689,-4509.6 3722.48,-4537.36 3689.79,-4575.06 3725,-4600.6 3903.47,-4730.03 4186.08,-4687.09 4314.51,-4658.08"/>
<polygon fill="black" stroke="black" points="4315.28,-4661.49 4324.23,-4655.83 4313.7,-4654.67 4315.28,-4661.49"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge228" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M3262.99,-4353.04C3364.82,-4244.51 3570.9,-4010.54 3689,-3777.6 3714.56,-3727.17 3684.4,-3694.93 3725,-3655.6 3893.92,-3491.96 4626.28,-3451.94 4915.69,-3442.45"/>
<polygon fill="black" stroke="black" points="4915.66,-3445.95 4925.54,-3442.13 4915.43,-3438.96 4915.66,-3445.95"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge229" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M3689.09,-4374.49C3697.3,-4373.79 3705.4,-4373.11 3713.39,-4372.43"/>
<polygon fill="black" stroke="black" points="3713.43,-4375.94 3723.1,-4371.61 3712.84,-4368.97 3713.43,-4375.94"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge230" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M3689.2,-4443.03C3701.25,-4443.58 3713.2,-4444.1 3725,-4444.6 3884.11,-4451.31 4064.99,-4456.35 4196.63,-4459.55"/>
<polygon fill="black" stroke="black" points="4196.41,-4463.04 4206.49,-4459.79 4196.58,-4456.04 4196.41,-4463.04"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge231" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M3689.19,-4461.57C3701.24,-4462.6 3713.2,-4463.61 3725,-4464.6 3919.07,-4480.8 3967.48,-4487.25 4162,-4496.6 4352.09,-4505.73 4565.7,-4510.72 4733.92,-4513.43"/>
<polygon fill="black" stroke="black" points="4733.62,-4516.92 4743.68,-4513.58 4733.73,-4509.92 4733.62,-4516.92"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge232" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M3502.16,-4352.92C3599.88,-4332.49 3703.78,-4310.76 3784.07,-4293.97"/>
<polygon fill="black" stroke="black" points="3784.69,-4297.41 3793.76,-4291.94 3783.26,-4290.56 3784.69,-4297.41"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge233" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3081.78,-4478.15C3098.53,-4488.6 3138.44,-4495.81 3201.5,-4495.81 3254.22,-4495.81 3290.75,-4490.77 3311.11,-4483.01"/>
<polygon fill="black" stroke="black" points="3312.36,-4486.29 3319.86,-4478.81 3309.33,-4479.98 3312.36,-4486.29"/>
</g>
<!-- tg_client._save_media -->
<g id="node153" class="node">
<title>tg_client._save_media</title>
<g id="a_node153"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="4580,-4783.8 4186,-4783.8 4186,-4725.4 4580,-4725.4 4580,-4783.8"/>
<text text-anchor="middle" x="4383" y="-4739.9" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge234" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M3649.63,-4478.2C3663.59,-4487.51 3676.79,-4497.94 3689,-4509.6 3738.27,-4556.64 3674.66,-4612.69 3725,-4658.6 3789.42,-4717.35 4007.12,-4740.19 4174.45,-4749.04"/>
<polygon fill="black" stroke="black" points="4174.23,-4752.53 4184.39,-4749.55 4174.59,-4745.54 4174.23,-4752.53"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge235" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M4436.95,-4784.21C4487.39,-4810.69 4566.34,-4847.68 4640,-4863.6 4810.96,-4900.53 6041.72,-4912.75 6214,-4882.6 6230.76,-4879.66 6233.38,-4873.22 6250,-4869.6 6343.68,-4849.19 7043.7,-4867.86 7110,-4798.6 7181.51,-4723.89 7087.9,-3954.14 7146,-3868.6 7178.41,-3820.88 7238.28,-3795.05 7289.21,-3781.19"/>
<polygon fill="black" stroke="black" points="7289.99,-3784.6 7298.8,-3778.7 7288.24,-3777.82 7289.99,-3784.6"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge236" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M4580.08,-4759.67C5040.18,-4770.63 6154.9,-4791.36 6214,-4736.6 6282.23,-4673.38 6193.71,-4393.64 6250,-4319.6 6334.68,-4208.2 6505.74,-4174.35 6604.36,-4164.07"/>
<polygon fill="black" stroke="black" points="6604.6,-4167.56 6614.21,-4163.1 6603.92,-4160.6 6604.6,-4167.56"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge237" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M4580.34,-4740.7C4693.83,-4732.67 4832.27,-4722.87 4926.15,-4716.23"/>
<polygon fill="black" stroke="black" points="4926.14,-4719.74 4935.87,-4715.54 4925.64,-4712.76 4926.14,-4719.74"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge238" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M4467.56,-4784.25C4517.01,-4800.33 4581.28,-4818.69 4640,-4827.6 5030.83,-4886.89 5501.41,-4873.64 5718.5,-4862.83"/>
<polygon fill="black" stroke="black" points="5718.58,-4866.33 5728.39,-4862.33 5718.23,-4859.34 5718.58,-4866.33"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node154" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node154"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="2678,-4209.41 2351,-4209.41 2351,-4163.78 2678,-4163.78 2678,-4209.41"/>
<text text-anchor="middle" x="2514.5" y="-4175.62" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge239" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M2584.95,-4209.81C2681.91,-4242.23 2861.73,-4302.34 3002.07,-4349.26"/>
<polygon fill="black" stroke="black" points="3000.93,-4352.57 3011.52,-4352.42 3003.15,-4345.93 3000.93,-4352.57"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node155" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node155"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="6072,-2895.34 5608,-2895.34 5608,-2847.86 6072,-2847.86 6072,-2895.34"/>
<text text-anchor="middle" x="5840" y="-2860.08" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge242" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5949.11,-2895.81C6033.39,-2907.71 6147.01,-2907.21 6214,-2838.6 6300.96,-2749.53 6164.28,-2369.86 6250,-2279.6 6299.32,-2227.66 6371.55,-2207.52 6442.74,-2202.68"/>
<polygon fill="black" stroke="black" points="6442.86,-2206.18 6452.64,-2202.11 6442.46,-2199.19 6442.86,-2206.18"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge240" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6072.2,-2893.48C6126.36,-2909.73 6178.54,-2936.61 6214,-2980.6 6285.44,-3069.23 6174.97,-3405.99 6250,-3491.6 6507.15,-3785 6765.14,-3485.16 7110,-3667.6 7129.73,-3678.03 7126.61,-3691.55 7146,-3702.6 7189.81,-3727.54 7243.9,-3742.96 7288.93,-3752.29"/>
<polygon fill="black" stroke="black" points="7288.2,-3755.71 7298.69,-3754.23 7289.57,-3748.85 7288.2,-3755.71"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge241" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M6072.23,-2869.36C6326.78,-2868.36 6747.96,-2870.99 7110,-2893.6 7170.71,-2897.39 7238.83,-2904.76 7291.33,-2911.13"/>
<polygon fill="black" stroke="black" points="7290.78,-2914.59 7301.13,-2912.33 7291.63,-2907.64 7290.78,-2914.59"/>
</g>
<!-- tg_client._download_messages -->
<g id="node156" class="node">
<title>tg_client._download_messages</title>
<g id="a_node156"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2314,-3988.48 1740,-3988.48 1740,-3926.72 2314,-3926.72 2314,-3988.48"/>
<text text-anchor="middle" x="2027" y="-3941.92" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge243" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2094.49,-3988.96C2189.64,-4033.84 2363.17,-4115.69 2454.19,-4158.62"/>
<polygon fill="black" stroke="black" points="2452.43,-4161.66 2462.96,-4162.76 2455.41,-4155.33 2452.43,-4161.66"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node157" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node157"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2163,-5090.6 1891,-5090.6 1891,-5054.6 2163,-5054.6 2163,-5090.6"/>
<text text-anchor="middle" x="2027" y="-5064.85" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node158" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node158"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2315,-3095.76 1739,-3095.76 1739,-3025.43 2315,-3025.43 2315,-3095.76"/>
<text text-anchor="middle" x="2027" y="-3042.42" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge244" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2050.51,-3025.18C2157.23,-2862.13 2630.73,-2191.6 3200.5,-2191.6 3200.5,-2191.6 3200.5,-2191.6 5036,-2191.6 5537.04,-2191.6 6123.79,-2209.48 6442.9,-2220.71"/>
<polygon fill="black" stroke="black" points="6442.51,-2224.2 6452.63,-2221.05 6442.76,-2217.2 6442.51,-2224.2"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge245" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2231.25,-3096.21C2270.86,-3101.98 2312.14,-3107.17 2351,-3110.6 2727.19,-3143.78 2822.85,-3129.6 3200.5,-3129.6 3200.5,-3129.6 3200.5,-3129.6 5036,-3129.6 5559.62,-3129.6 5690.97,-3123.59 6214,-3148.6 6352.47,-3155.22 6513.67,-3169.53 6605.29,-3178.28"/>
<polygon fill="black" stroke="black" points="6604.86,-3181.76 6615.15,-3179.23 6605.53,-3174.79 6604.86,-3181.76"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge246" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2315.5,-3056.85C2327.49,-3056.75 2339.36,-3056.67 2351,-3056.6 2496.33,-3055.7 2532.67,-3056.15 2678,-3056.6 3662.9,-3059.6 6127,-3022.33 7110,-3083.6 7161.6,-3086.81 7218.49,-3093.17 7266.61,-3099.37"/>
<polygon fill="black" stroke="black" points="7266.14,-3102.84 7276.51,-3100.66 7267.05,-3095.9 7266.14,-3102.84"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge247" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2036.11,-3025.02C2062.79,-2915.16 2157.38,-2576.57 2351,-2375.6 2646.18,-2069.21 1901.52,-1885.73 4640,-1225.6 4771.63,-1193.86 6837.56,-1197.23 7291.33,-1198.35"/>
<polygon fill="black" stroke="black" points="7291.18,-1201.85 7301.18,-1198.38 7291.19,-1194.85 7291.18,-1201.85"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge248" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2315.33,-3074.21C2346.68,-3075.69 2377,-3077.13 2404.11,-3078.41"/>
<polygon fill="black" stroke="black" points="2403.86,-3081.91 2414.01,-3078.88 2404.19,-3074.91 2403.86,-3081.91"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge249" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2059.28,-3096.1C2117.66,-3164.12 2243.76,-3319.51 2315,-3470.6 2431.53,-3717.76 2491.13,-4046.14 2508.22,-4152.09"/>
<polygon fill="black" stroke="black" points="2504.74,-4152.51 2509.77,-4161.83 2511.66,-4151.41 2504.74,-4152.51"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge250" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2157.85,-3024.97C2372.9,-2969.21 2817.3,-2867.6 3200.5,-2867.6 3200.5,-2867.6 3200.5,-2867.6 4384,-2867.6 4810.57,-2867.6 5307.49,-2869.34 5596.33,-2870.52"/>
<polygon fill="black" stroke="black" points="5596.27,-2874.02 5606.28,-2870.56 5596.29,-2867.02 5596.27,-2874.02"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node159" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node159"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1404,-3514.46 828,-3514.46 828,-3434.73 1404,-3434.73 1404,-3514.46"/>
<text text-anchor="middle" x="1116" y="-3453.67" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge251" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1206.17,-3434.23C1269.93,-3407.31 1358.52,-3373.82 1440,-3356.6 1695.38,-3302.6 1764.98,-3317.6 2026,-3317.6 2026,-3317.6 2026,-3317.6 4384,-3317.6 4616.53,-3317.6 5202.64,-3337.36 5430,-3288.6 5446.95,-3284.96 5449.08,-3277.38 5466,-3273.6 5628.38,-3237.27 6059.36,-3301.03 6214,-3239.6 6233.62,-3231.8 6230.41,-3216.47 6250,-3208.6 6367.35,-3161.42 6517.46,-3166.65 6605.44,-3175.56"/>
<polygon fill="black" stroke="black" points="6604.83,-3179.01 6615.14,-3176.59 6605.57,-3172.05 6604.83,-3179.01"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge252" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1404.3,-3463.61C1583.13,-3457.69 1817.92,-3451.6 2026,-3451.6 2026,-3451.6 2026,-3451.6 3926.5,-3451.6 4100.28,-3451.6 5268.06,-3486.35 5688.52,-3499.03"/>
<polygon fill="black" stroke="black" points="5688.21,-3502.52 5698.32,-3499.33 5688.43,-3495.53 5688.21,-3502.52"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge253" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1135.2,-3514.68C1209.92,-3679.28 1492.23,-4301.18 1557.14,-4444.16"/>
<polygon fill="black" stroke="black" points="1553.81,-4445.31 1561.14,-4452.97 1560.19,-4442.41 1553.81,-4445.31"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge254" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1404.3,-3481.87C1580.73,-3486.33 1796.23,-3491.78 1921.61,-3494.95"/>
<polygon fill="black" stroke="black" points="1921.49,-3498.45 1931.57,-3495.21 1921.66,-3491.45 1921.49,-3498.45"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge255" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1173.47,-3434.34C1235.46,-3392.73 1339.56,-3330.19 1440,-3303.6 1776.62,-3214.48 2193.39,-3237.82 2394.23,-3256.97"/>
<polygon fill="black" stroke="black" points="2393.89,-3260.45 2404.18,-3257.93 2394.56,-3253.49 2393.89,-3260.45"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge256" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1320.2,-3434.27C1369.74,-3424.44 1420.79,-3414.31 1463.76,-3405.78"/>
<polygon fill="black" stroke="black" points="1464.18,-3409.26 1473.31,-3403.88 1462.82,-3402.4 1464.18,-3409.26"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge257" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1192.94,-3514.95C1366.49,-3607.16 1790.03,-3832.21 1956.85,-3920.85"/>
<polygon fill="black" stroke="black" points="1955.17,-3923.93 1965.65,-3925.53 1958.46,-3917.74 1955.17,-3923.93"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node160" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node160"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="6093.5,-2829.66 5586.5,-2829.66 5586.5,-2763.53 6093.5,-2763.53 6093.5,-2829.66"/>
<text text-anchor="middle" x="5840" y="-2779.64" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge260" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6093.78,-2787.4C6139.55,-2774.27 6182.64,-2752.29 6214,-2716.6 6278.31,-2643.4 6182.27,-2349.65 6250,-2279.6 6299.66,-2228.23 6371.77,-2208.17 6442.76,-2203.24"/>
<polygon fill="black" stroke="black" points="6442.84,-2206.74 6452.62,-2202.66 6442.44,-2199.75 6442.84,-2206.74"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge261" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6093.93,-2779.81C6138.85,-2788.55 6181.57,-2806.29 6214,-2838.6 6311.95,-2936.17 6150.89,-3051.19 6250,-3147.6 6298.92,-3195.18 6496.19,-3194.23 6605.38,-3189.76"/>
<polygon fill="black" stroke="black" points="6605.28,-3193.27 6615.12,-3189.34 6604.98,-3186.27 6605.28,-3193.27"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge258" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M6093.99,-2778.07C6139.32,-2786.82 6182.18,-2805.01 6214,-2838.6 6308.91,-2938.79 6151.46,-3361.97 6250,-3458.6 6318.28,-3525.55 7038.11,-3428.54 7110,-3491.6 7181.52,-3554.33 7082,-3632.21 7146,-3702.6 7181.89,-3742.08 7239.72,-3757.87 7288.79,-3763.77"/>
<polygon fill="black" stroke="black" points="7288.26,-3767.23 7298.58,-3764.81 7289,-3760.27 7288.26,-3767.23"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge259" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M6093.97,-2798.87C6350.86,-2803.87 6759.62,-2819.23 7110,-2865.6 7172.85,-2873.91 7242.88,-2888.94 7295.73,-2901.48"/>
<polygon fill="black" stroke="black" points="7294.73,-2904.84 7305.27,-2903.76 7296.36,-2898.03 7294.73,-2904.84"/>
</g>
<!-- tg_client.main -->
<g id="node161" class="node">
<title>tg_client.main</title>
<g id="a_node161"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="757,-4526.38 303,-4526.38 303,-4426.82 757,-4426.82 757,-4526.38"/>
<text text-anchor="middle" x="530" y="-4449.89" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge262" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M757.47,-4492.74C967.96,-4506.34 1290.26,-4523.6 1570.5,-4523.6 1570.5,-4523.6 1570.5,-4523.6 2515.5,-4523.6 2779.16,-4523.6 3487.09,-4529.04 3689,-4698.6 3727.75,-4731.13 3686.43,-4773.84 3725,-4806.6 3755.91,-4832.84 3799.58,-4841.91 3838.18,-4843.96"/>
<polygon fill="black" stroke="black" points="3837.81,-4847.45 3847.94,-4844.32 3838.07,-4840.46 3837.81,-4847.45"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge263" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M661.65,-4526.76C712.85,-4544.67 772.53,-4563.4 828,-4575.6 888.81,-4588.96 958.17,-4596.89 1013.46,-4601.51"/>
<polygon fill="black" stroke="black" points="1012.93,-4604.98 1023.18,-4602.3 1013.49,-4598.01 1012.93,-4604.98"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge264" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M754.94,-4526.81C779.5,-4531.05 804.21,-4534.79 828,-4537.6 1155.9,-4576.28 1240.33,-4561.6 1570.5,-4561.6 1570.5,-4561.6 1570.5,-4561.6 2028,-4561.6 2427.05,-4561.6 2894.84,-4658.13 3097.86,-4704.85"/>
<polygon fill="black" stroke="black" points="3096.79,-4708.19 3107.32,-4707.03 3098.37,-4701.37 3096.79,-4708.19"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge265" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M757.45,-4443.47C1158.69,-4384.78 1985.77,-4263.79 2343,-4211.54"/>
<polygon fill="black" stroke="black" points="2343.33,-4215.03 2352.71,-4210.12 2342.31,-4208.1 2343.33,-4215.03"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge266" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M612.5,-4526.84C802,-4640.87 1290.31,-4918.76 1739,-5040.6 1783.92,-5052.79 1834.01,-5060.35 1879.61,-5065.03"/>
<polygon fill="black" stroke="black" points="1878.99,-5068.49 1889.28,-5065.99 1879.67,-5061.52 1878.99,-5068.49"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge267" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M538.71,-4426.37C568.64,-4237.61 682.69,-3573.89 828,-3425.6 1064.96,-3183.77 1456.89,-3101.09 1727.6,-3073.42"/>
<polygon fill="black" stroke="black" points="1727.68,-3076.93 1737.28,-3072.45 1726.98,-3069.96 1727.68,-3076.93"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge268" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M560.16,-4426.56C659.81,-4255.59 986.15,-3695.67 1085.82,-3524.65"/>
<polygon fill="black" stroke="black" points="1088.73,-3526.61 1090.75,-3516.21 1082.69,-3523.09 1088.73,-3526.61"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge269" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M534.53,-4426.44C548.88,-4244.1 612.79,-3602.12 828,-3126.6 1057.87,-2618.7 1013.01,-2115.6 1570.5,-2115.6 1570.5,-2115.6 1570.5,-2115.6 2028,-2115.6 3581.76,-2115.6 3930.59,-2511.49 5466,-2749.6 5501.14,-2755.05 5538.23,-2760.31 5574.83,-2765.21"/>
<polygon fill="black" stroke="black" points="5574.29,-2768.67 5584.67,-2766.52 5575.22,-2761.73 5574.29,-2768.67"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node162" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node162"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="6804,-2502.6 6556,-2502.6 6556,-2466.6 6804,-2466.6 6804,-2502.6"/>
<text text-anchor="middle" x="6680" y="-2479.11" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node163" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="5222.5,-2313.7 4847.5,-2313.7 4847.5,-2257.49 5222.5,-2257.49 5222.5,-2313.7"/>
<text text-anchor="middle" x="5035" y="-2271.53" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge270" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5222.87,-2269.54C5299.03,-2252.96 5380.61,-2220.31 5430,-2156.6 5506.13,-2058.39 5375.46,-1683.7 5466,-1598.6 5542.38,-1526.81 6233.68,-1564.87 6537.19,-1585.34"/>
<polygon fill="black" stroke="black" points="6536.54,-1588.8 6546.76,-1585.98 6537.02,-1581.82 6536.54,-1588.8"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge272" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5222.87,-2279.23C5523.51,-2268.98 6114.07,-2248.85 6443.22,-2237.63"/>
<polygon fill="black" stroke="black" points="6442.95,-2241.14 6452.82,-2237.31 6442.71,-2234.15 6442.95,-2241.14"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge271" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5063.31,-2314.07C5139.12,-2395.28 5351.71,-2638.2 5430,-2886.6 5449.81,-2949.47 5420.36,-4025.03 5466,-4072.6 5505.57,-4113.83 6346.13,-4147.56 6604.27,-4156.97"/>
<polygon fill="black" stroke="black" points="6604.12,-4160.47 6614.24,-4157.33 6604.37,-4153.47 6604.12,-4160.47"/>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge273" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M5222.55,-2283.25C5290.08,-2288.08 5365.54,-2300.31 5430,-2327.6 5449.18,-2335.72 5447.16,-2348.72 5466,-2357.6 5550.65,-2397.46 5656.17,-2414.64 5733.36,-2422.03"/>
<polygon fill="black" stroke="black" points="5732.75,-2425.49 5743.03,-2422.92 5733.39,-2418.52 5732.75,-2425.49"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge274" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M5222.84,-2263.48C5294.93,-2264.9 5373.46,-2279.93 5430,-2327.6 5474.86,-2365.41 5419.64,-2418.64 5466,-2454.6 5507.98,-2487.15 6237.21,-2487.03 6544.35,-2485.51"/>
<polygon fill="black" stroke="black" points="6544.05,-2489.01 6554.03,-2485.46 6544.02,-2482.01 6544.05,-2489.01"/>
</g>
<!-- check_translations.parse_po -->
<g id="node164" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1348,-5220.37 884,-5220.37 884,-5164.82 1348,-5164.82 1348,-5220.37"/>
<text text-anchor="middle" x="1116" y="-5178.73" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node165" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="792,-5216.76 268,-5216.76 268,-5168.44 792,-5168.44 792,-5216.76"/>
<text text-anchor="middle" x="530" y="-5180.84" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge275" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M792.25,-5192.6C818.96,-5192.6 846.01,-5192.6 872.51,-5192.6"/>
<polygon fill="black" stroke="black" points="872.31,-5196.1 882.31,-5192.6 872.31,-5189.1 872.31,-5196.1"/>
</g>
<!-- pending_chop.main -->
<g id="node166" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="5971.5,-1546.41 5708.5,-1546.41 5708.5,-1500.78 5971.5,-1500.78 5971.5,-1546.41"/>
<text text-anchor="middle" x="5840" y="-1512.62" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge276" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M5971.69,-1533.56C6043.43,-1539.78 6133.84,-1548.85 6214,-1560.6 6230.13,-1562.96 6233.83,-1565.51 6250,-1567.6 6345.18,-1579.91 6452.99,-1586.91 6536.71,-1590.84"/>
<polygon fill="black" stroke="black" points="6536.44,-1594.33 6546.59,-1591.29 6536.76,-1587.34 6536.44,-1594.33"/>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge277" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5971.96,-1540.4C6054.58,-1558.19 6156.24,-1594.71 6214,-1669.6 6298.18,-1778.72 6174.7,-1862.16 6250,-1977.6 6316.37,-2079.33 6439.27,-2145.34 6536.57,-2184.17"/>
<polygon fill="black" stroke="black" points="6535.11,-2187.36 6545.7,-2187.75 6537.67,-2180.84 6535.11,-2187.36"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node167" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node167"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="7009,-1448.48 6351,-1448.48 6351,-1386.72 7009,-1386.72 7009,-1448.48"/>
<text text-anchor="middle" x="6680" y="-1401.92" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge278" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M6834.09,-1386.24C6927.48,-1376.81 7041.67,-1384.39 7110,-1457.6 7166.58,-1518.21 7107.13,-2876.36 7146,-2949.6 7183.19,-3019.66 7264.66,-3066.91 7320.69,-3092.54"/>
<polygon fill="black" stroke="black" points="7319.24,-3095.73 7329.8,-3096.61 7322.1,-3089.34 7319.24,-3095.73"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge279" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M6781.01,-1386.22C6924.45,-1341.21 7184.97,-1259.47 7309.32,-1220.46"/>
<polygon fill="black" stroke="black" points="7310.27,-1223.83 7318.76,-1217.5 7308.17,-1217.15 7310.27,-1223.83"/>
</g>
<!-- pending_embed.main -->
<g id="node168" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="5245.5,-1653.74 4824.5,-1653.74 4824.5,-1589.46 5245.5,-1589.46 5245.5,-1653.74"/>
<text text-anchor="middle" x="5035" y="-1605.18" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge280" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M5245.84,-1629.06C5312.79,-1620.67 5381.9,-1598.95 5430,-1550.6 5495.55,-1484.7 5394.85,-1404.39 5466,-1344.6 5605.84,-1227.07 6940.05,-1277.62 7110,-1344.6 7222.07,-1388.76 7315.01,-1504.07 7356.18,-1561.74"/>
<polygon fill="black" stroke="black" points="7353.31,-1563.74 7361.93,-1569.9 7359.03,-1559.71 7353.31,-1563.74"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge281" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M5245.88,-1628.23C5312.53,-1619.71 5381.45,-1598.12 5430,-1550.6 5487.68,-1494.13 5403.53,-1423.7 5466,-1372.6 5532.49,-1318.21 7045.04,-1320.97 7110,-1377.6 7194.95,-1451.65 7069.95,-1545.43 7146,-1628.6 7167.26,-1651.85 7196.37,-1666.15 7226.8,-1674.77"/>
<polygon fill="black" stroke="black" points="7225.59,-1678.07 7236.15,-1677.2 7227.35,-1671.3 7225.59,-1678.07"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge282" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M5202.98,-1654.22C5284.27,-1678.92 5375.89,-1721.6 5430,-1794.6 5470.25,-1848.89 5416.46,-2050.62 5466,-2096.6 5496.49,-2124.89 6172.74,-2124.29 6214,-2129.6 6312.27,-2142.24 6420.58,-2165 6507.93,-2185.62"/>
<polygon fill="black" stroke="black" points="6507.01,-2189 6517.54,-2187.9 6508.62,-2182.18 6507.01,-2189"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge284" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M5123.07,-1654.21C5208.91,-1684.75 5344.52,-1728.74 5466,-1749.6 5794.07,-1805.93 5882.79,-1754.34 6214,-1787.6 6342.01,-1800.45 6488.64,-1824.01 6582.44,-1840.22"/>
<polygon fill="black" stroke="black" points="6581.67,-1843.64 6592.12,-1841.9 6582.87,-1836.74 6581.67,-1843.64"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge286" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M5245.76,-1625.55C5594.96,-1632.14 6284.39,-1645.15 6560.53,-1650.36"/>
<polygon fill="black" stroke="black" points="6560.2,-1653.86 6570.26,-1650.54 6560.33,-1646.86 6560.2,-1653.86"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge283" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M5210.21,-1654.19C5290.76,-1678.72 5379.58,-1721.27 5430,-1794.6 5525.05,-1932.82 5367.37,-2412.91 5466,-2548.6 5521.71,-2625.23 5624.45,-2660.23 5708.02,-2676.2"/>
<polygon fill="black" stroke="black" points="5707.2,-2679.61 5717.67,-2677.97 5708.46,-2672.72 5707.2,-2679.61"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge285" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M5245.91,-1616.49C5309.38,-1606.69 5376.39,-1587.32 5430,-1550.6 5455.34,-1533.24 5439.26,-1506.71 5466,-1491.6 5561.8,-1437.46 6309.65,-1467.05 6581.03,-1479.74"/>
<polygon fill="black" stroke="black" points="6580.76,-1483.23 6590.92,-1480.21 6581.09,-1476.24 6580.76,-1483.23"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge287" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M5245.88,-1622.83C5310.89,-1613.62 5378.81,-1592.99 5430,-1550.6 5464.46,-1522.06 5429.55,-1482.54 5466,-1456.6 5601.28,-1360.31 6029.78,-1367.8 6339.17,-1387.78"/>
<polygon fill="black" stroke="black" points="6338.87,-1391.27 6349.07,-1388.43 6339.32,-1384.29 6338.87,-1391.27"/>
</g>
<!-- build_site:cli -->
<g id="node170" class="node">
<title>build_site:cli</title>
<g id="a_node170"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1571.5" cy="-5126.6" rx="29.21" ry="18"/>
<text text-anchor="middle" x="1571.5" y="-5124.15" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;build_site:cli -->
<!-- scan_ontology:cli -->
<g id="node171" class="node">
<title>scan_ontology:cli</title>
<g id="a_node171"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2027" cy="-5126.6" rx="37.07" ry="18"/>
<text text-anchor="middle" x="2027" y="-5124.15" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- build_site:cli&#45;&gt;scan_ontology:cli -->
<!-- caption:cli -->
<g id="node172" class="node">
<title>caption:cli</title>
<g id="a_node172"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2514.5" cy="-5126.6" rx="27" ry="18"/>
<text text-anchor="middle" x="2514.5" y="-5124.15" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;caption:cli -->
<!-- chop:cli -->
<g id="node173" class="node">
<title>chop:cli</title>
<g id="a_node173"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3201.5" cy="-5126.6" rx="27" ry="18"/>
<text text-anchor="middle" x="3201.5" y="-5124.15" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;chop:cli -->
<!-- embed:cli -->
<g id="node174" class="node">
<title>embed:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="116" cy="-5256.6" rx="27" ry="18"/>
<text text-anchor="middle" x="116" y="-5254.15" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli -->
<g id="node175" class="node">
<title>debug_dump:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="530" cy="-5256.6" rx="34.82" ry="18"/>
<text text-anchor="middle" x="530" y="-5254.15" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;debug_dump:cli -->
<!-- clean_data:cli -->
<g id="node176" class="node">
<title>clean_data:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1116" cy="-5256.6" rx="30.89" ry="18"/>
<text text-anchor="middle" x="1116" y="-5254.15" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;clean_data:cli -->
<!-- tg_client:cli -->
<g id="node177" class="node">
<title>tg_client:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1571.5" cy="-5256.6" rx="27.52" ry="18"/>
<text text-anchor="middle" x="1571.5" y="-5254.15" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;tg_client:cli -->
<!-- pending_caption:cli -->
<g id="node178" class="node">
<title>pending_caption:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2027" cy="-5256.6" rx="40.44" ry="18"/>
<text text-anchor="middle" x="2027" y="-5254.15" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;pending_caption:cli -->
<!-- check_translations:cli -->
<g id="node179" class="node">
<title>check_translations:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2514.5" cy="-5256.6" rx="43.25" ry="18"/>
<text text-anchor="middle" x="2514.5" y="-5254.15" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_caption:cli&#45;&gt;check_translations:cli -->
<!-- pending_chop:cli -->
<g id="node180" class="node">
<title>pending_chop:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3201.5" cy="-5256.6" rx="36.51" ry="18"/>
<text text-anchor="middle" x="3201.5" y="-5254.15" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli&#45;&gt;pending_chop:cli -->
<!-- pending_embed:cli -->
<g id="node181" class="node">
<title>pending_embed:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="116" cy="-5310.6" rx="39.32" ry="18"/>
<text text-anchor="middle" x="116" y="-5308.15" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- build_site -->
<g id="node182" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="3925.5" cy="-708.6" rx="48.28" ry="18"/>
<text text-anchor="middle" x="3925.5" y="-703.7" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge299" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M3973.96,-708.6C4028.09,-708.6 4119.85,-708.6 4202.65,-708.6"/>
<polygon fill="black" stroke="black" points="4202.49,-712.1 4212.49,-708.6 4202.49,-705.1 4202.49,-712.1"/>
</g>
<!-- caption -->
<g id="node183" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="4383" cy="-4969.6" rx="39.32" ry="18"/>
<text text-anchor="middle" x="4383" y="-4964.7" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge300" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M4422.71,-4969.6C4525.76,-4969.6 4808.54,-4969.6 4950.45,-4969.6"/>
<polygon fill="black" stroke="black" points="4950.15,-4973.1 4960.15,-4969.6 4950.15,-4966.1 4950.15,-4973.1"/>
</g>
<!-- check_translations -->
<g id="node184" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="116" cy="-5192.6" rx="82.08" ry="18"/>
<text text-anchor="middle" x="116" y="-5187.7" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge301" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M198.4,-5192.6C216.09,-5192.6 235.75,-5192.6 256.4,-5192.6"/>
<polygon fill="black" stroke="black" points="256.12,-5196.1 266.12,-5192.6 256.12,-5189.1 256.12,-5196.1"/>
</g>
<!-- chop -->
<g id="node185" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="3925.5" cy="-2950.6" rx="29.66" ry="18"/>
<text text-anchor="middle" x="3925.5" y="-2945.7" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge302" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M3955.34,-2950.6C4025.86,-2950.6 4208.69,-2950.6 4310.64,-2950.6"/>
<polygon fill="black" stroke="black" points="4310.55,-2954.1 4320.55,-2950.6 4310.55,-2947.1 4310.55,-2954.1"/>
</g>
<!-- clean_data -->
<g id="node186" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="4383" cy="-4346.6" rx="51.73" ry="18"/>
<text text-anchor="middle" x="4383" y="-4341.7" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge303" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M4435,-4346.6C4545.69,-4346.6 4809.03,-4346.6 4946.72,-4346.6"/>
<polygon fill="black" stroke="black" points="4946.52,-4350.1 4956.52,-4346.6 4946.52,-4343.1 4946.52,-4350.1"/>
</g>
<!-- debug_dump -->
<g id="node187" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="4383" cy="-3745.6" rx="60.7" ry="18"/>
<text text-anchor="middle" x="4383" y="-3740.7" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge304" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M4443.04,-3749.08C4487.72,-3752.61 4550.35,-3759.51 4604,-3772.6 4727.32,-3802.67 4863.72,-3857.3 4949.14,-3894.26"/>
<polygon fill="black" stroke="black" points="4947.61,-3897.41 4958.17,-3898.19 4950.4,-3890.99 4947.61,-3897.41"/>
</g>
<!-- embed -->
<g id="node188" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="4383" cy="-1932.6" rx="36.56" ry="18"/>
<text text-anchor="middle" x="4383" y="-1927.7" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge305" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M4419.87,-1932.6C4521.26,-1932.6 4811.73,-1932.6 4953.8,-1932.6"/>
<polygon fill="black" stroke="black" points="4953.5,-1936.1 4963.5,-1932.6 4953.5,-1929.1 4953.5,-1936.1"/>
</g>
<!-- moderation -->
<g id="node189" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="5035" cy="-1821.6" rx="54.49" ry="18"/>
<text text-anchor="middle" x="5035" y="-1816.7" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge306" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M5089.93,-1821.6C5197.05,-1821.6 5441.86,-1821.6 5622.61,-1821.6"/>
<polygon fill="black" stroke="black" points="5622.36,-1825.1 5632.36,-1821.6 5622.36,-1818.1 5622.36,-1825.1"/>
</g>
<!-- pending_caption -->
<g id="node190" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="4383" cy="-2285.6" rx="74.5" ry="18"/>
<text text-anchor="middle" x="4383" y="-2280.7" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge307" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M4457.93,-2285.6C4549.18,-2285.6 4707.93,-2285.6 4835.71,-2285.6"/>
<polygon fill="black" stroke="black" points="4835.68,-2289.1 4845.68,-2285.6 4835.68,-2282.1 4835.68,-2289.1"/>
</g>
<!-- pending_chop -->
<g id="node191" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="5035" cy="-1523.6" rx="64.84" ry="18"/>
<text text-anchor="middle" x="5035" y="-1518.7" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge308" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M5100.02,-1523.6C5228.54,-1523.6 5520.7,-1523.6 5696.73,-1523.6"/>
<polygon fill="black" stroke="black" points="5696.64,-1527.1 5706.64,-1523.6 5696.64,-1520.1 5696.64,-1527.1"/>
</g>
<!-- pending_embed -->
<g id="node192" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="4383" cy="-1621.6" rx="72.43" ry="18"/>
<text text-anchor="middle" x="4383" y="-1616.7" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge309" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M4455.73,-1621.6C4541.3,-1621.6 4688.42,-1621.6 4812.84,-1621.6"/>
<polygon fill="black" stroke="black" points="4812.53,-1625.1 4822.53,-1621.6 4812.53,-1618.1 4812.53,-1625.1"/>
</g>
<!-- scan_ontology -->
<g id="node193" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="3925.5" cy="-1168.6" rx="66.91" ry="18"/>
<text text-anchor="middle" x="3925.5" y="-1163.7" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge310" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M3992.73,-1168.6C4043.57,-1168.6 4116.53,-1168.6 4185.57,-1168.6"/>
<polygon fill="black" stroke="black" points="4185.54,-1172.1 4195.54,-1168.6 4185.54,-1165.1 4185.54,-1172.1"/>
</g>
<!-- telegram_bot -->
<g id="node194" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="3201.5" cy="-3750.6" rx="61.39" ry="18"/>
<text text-anchor="middle" x="3201.5" y="-3745.7" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge311" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M3260.97,-3755.54C3374.16,-3765.1 3626.01,-3786.38 3784.81,-3799.79"/>
<polygon fill="black" stroke="black" points="3784.32,-3803.26 3794.58,-3800.62 3784.91,-3796.29 3784.32,-3803.26"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge312" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M3260.97,-3745.57C3373.5,-3735.91 3623.09,-3714.48 3782.05,-3700.83"/>
<polygon fill="black" stroke="black" points="3782.16,-3704.33 3791.82,-3699.99 3781.56,-3697.36 3782.16,-3704.33"/>
</g>
<!-- tg_client -->
<g id="node195" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="116" cy="-4476.6" rx="44.15" ry="18"/>
<text text-anchor="middle" x="116" y="-4471.7" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge313" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M160.31,-4476.6C193.06,-4476.6 240.87,-4476.6 291.28,-4476.6"/>
<polygon fill="black" stroke="black" points="291.24,-4480.1 301.24,-4476.6 291.24,-4473.1 291.24,-4480.1"/>
</g>
</g>
</svg>
