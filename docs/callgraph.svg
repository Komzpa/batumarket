<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: callgraph Pages: 1 -->
<svg width="10018pt" height="5206pt"
 viewBox="0.00 0.00 10018.00 5205.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5201.8)">
<title>callgraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-5201.8 10014,-5201.8 10014,4 -4,4"/>
<!-- image_io.read_image_meta -->
<g id="node1" class="node">
<title>image_io.read_image_meta</title>
<g id="a_node1"><a xlink:title="Return metadata from ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="7437.5,-4378.14 7208.5,-4378.14 7208.5,-4342.14 7437.5,-4342.14 7437.5,-4378.14"/>
<text text-anchor="middle" x="7323" y="-4356.09" font-family="Times,serif" font-size="15.68">image_io.read_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md -->
<g id="node2" class="node">
<title>notes_utils.parse_md</title>
<g id="a_node2"><a xlink:title="Return metadata dictionary and body text from ``path``.">
<polygon fill="none" stroke="black" points="8453.5,-4137.14 8286.5,-4137.14 8286.5,-4101.14 8453.5,-4101.14 8453.5,-4137.14"/>
<text text-anchor="middle" x="8370" y="-4115.44" font-family="Times,serif" font-size="14.00">notes_utils.parse_md</text>
</a>
</g>
</g>
<!-- image_io.read_image_meta&#45;&gt;notes_utils.parse_md -->
<g id="edge1" class="edge">
<title>image_io.read_image_meta&#45;&gt;notes_utils.parse_md</title>
<path fill="none" stroke="black" d="M7437.53,-4375.59C7541.96,-4383.08 7694.52,-4375.99 7789,-4290.14 7837.82,-4245.77 7774.02,-4188.01 7825,-4146.14 7891.61,-4091.42 8139.24,-4100.95 8276.29,-4110.96"/>
<polygon fill="black" stroke="black" points="8276.13,-4114.46 8286.36,-4111.71 8276.65,-4107.48 8276.13,-4114.46"/>
</g>
<!-- notes_utils.read_md -->
<g id="node6" class="node">
<title>notes_utils.read_md</title>
<g id="a_node6"><a xlink:title="Alias for :func:`read_text` used for Markdown files.">
<polygon fill="none" stroke="black" points="9316,-3375.14 9176,-3375.14 9176,-3339.14 9316,-3339.14 9316,-3375.14"/>
<text text-anchor="middle" x="9246" y="-3353.89" font-family="Times,serif" font-size="12.18">notes_utils.read_md</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils.read_md -->
<g id="edge5" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8453.63,-4126.37C8588.22,-4136.32 8846.68,-4147.18 8915,-4091.14 8965.34,-4049.85 8928.39,-4010.19 8951,-3949.14 9035.22,-3721.69 9180.77,-3466.29 9228.98,-3384.12"/>
<polygon fill="black" stroke="black" points="9232.05,-3385.8 9234.11,-3375.4 9226.02,-3382.25 9232.05,-3385.8"/>
</g>
<!-- notes_utils._parse_block -->
<g id="node7" class="node">
<title>notes_utils._parse_block</title>
<g id="a_node7"><a xlink:title="Return metadata dict and remaining body from ``text``.">
<polygon fill="none" stroke="black" points="9415,-3995.64 9077,-3995.64 9077,-3958.64 9415,-3958.64 9415,-3995.64"/>
<text text-anchor="middle" x="9246" y="-3970.69" font-family="Times,serif" font-size="26.18">notes_utils._parse_block</text>
</a>
</g>
</g>
<!-- notes_utils.parse_md&#45;&gt;notes_utils._parse_block -->
<g id="edge6" class="edge">
<title>notes_utils.parse_md&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8453.75,-4123.97C8586.31,-4130.21 8839.09,-4135.56 8915,-4091.14 8940.86,-4076 8926.26,-4051.04 8951,-4034.14 8985.01,-4010.9 9026.12,-3996.58 9066.68,-3987.9"/>
<polygon fill="black" stroke="black" points="9067.6,-3991.28 9076.7,-3985.86 9066.2,-3984.42 9067.6,-3991.28"/>
</g>
<!-- image_io.write_image_meta -->
<g id="node3" class="node">
<title>image_io.write_image_meta</title>
<g id="a_node3"><a xlink:title="Write ``meta`` to ``path.with_suffix(&#39;.md&#39;)``.">
<polygon fill="none" stroke="black" points="6435,-2013.14 6200,-2013.14 6200,-1977.14 6435,-1977.14 6435,-2013.14"/>
<text text-anchor="middle" x="6317.5" y="-1991.09" font-family="Times,serif" font-size="15.68">image_io.write_image_meta</text>
</a>
</g>
</g>
<!-- notes_utils.write_md -->
<g id="node4" class="node">
<title>notes_utils.write_md</title>
<g id="a_node4"><a xlink:title="Write ``text`` to ``path`` ensuring a trailing newline.">
<polygon fill="none" stroke="black" points="7436,-1830.14 7210,-1830.14 7210,-1794.14 7436,-1794.14 7436,-1830.14"/>
<text text-anchor="middle" x="7323" y="-1807.35" font-family="Times,serif" font-size="19.74">notes_utils.write_md</text>
</a>
</g>
</g>
<!-- image_io.write_image_meta&#45;&gt;notes_utils.write_md -->
<g id="edge2" class="edge">
<title>image_io.write_image_meta&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6435.15,-2009.96C6545.79,-2017.5 6711.04,-2011.03 6821,-1926.14 6854.12,-1900.57 6822.9,-1863.39 6857,-1839.14 6910.07,-1801.4 7080.41,-1800.46 7199.46,-1804.95"/>
<polygon fill="black" stroke="black" points="7199.6,-1808.46 7209.73,-1805.36 7199.88,-1801.46 7199.6,-1808.46"/>
</g>
<!-- notes_utils.read_text -->
<g id="node5" class="node">
<title>notes_utils.read_text</title>
<g id="a_node5"><a xlink:title="Return file contents as UTF&#45;8 or empty string when missing.">
<polygon fill="none" stroke="black" points="9900.5,-1685.14 9686.5,-1685.14 9686.5,-1649.14 9900.5,-1649.14 9900.5,-1685.14"/>
<text text-anchor="middle" x="9793.5" y="-1662.35" font-family="Times,serif" font-size="18.48">notes_utils.read_text</text>
</a>
</g>
</g>
<!-- notes_utils.read_text&#45;&gt;notes_utils.read_text -->
<g id="edge3" class="edge">
<title>notes_utils.read_text&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9694.72,-1685.29C9679.53,-1694.68 9712.45,-1703.14 9793.5,-1703.14 9844.15,-1703.14 9876.01,-1699.83 9889.07,-1695.06"/>
<polygon fill="black" stroke="black" points="9892.48,-1695.88 9892.28,-1685.29 9885.83,-1693.7 9892.48,-1695.88"/>
</g>
<!-- notes_utils.read_md&#45;&gt;notes_utils.read_text -->
<g id="edge4" class="edge">
<title>notes_utils.read_md&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9256.9,-3339.13C9297.42,-3264.75 9452.67,-2973.47 9541,-2718.14 9677.79,-2322.71 9767.12,-1818.61 9787.86,-1695.29"/>
<polygon fill="black" stroke="black" points="9791.36,-1695.61 9789.55,-1685.17 9784.45,-1694.46 9791.36,-1695.61"/>
</g>
<!-- notes_utils.load_json -->
<g id="node8" class="node">
<title>notes_utils.load_json</title>
<g id="a_node8"><a xlink:title="Return parsed JSON or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="9370,-1917.14 9122,-1917.14 9122,-1881.14 9370,-1881.14 9370,-1917.14"/>
<text text-anchor="middle" x="9246" y="-1893.44" font-family="Times,serif" font-size="22.12">notes_utils.load_json</text>
</a>
</g>
</g>
<!-- notes_utils.load_json&#45;&gt;notes_utils.read_text -->
<g id="edge7" class="edge">
<title>notes_utils.load_json&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9370.21,-1900.95C9424.33,-1897.94 9487.58,-1889.1 9541,-1867.14 9638.59,-1827.01 9729.26,-1737 9769.97,-1692.72"/>
<polygon fill="black" stroke="black" points="9772.61,-1695.02 9776.75,-1685.26 9767.43,-1690.31 9772.61,-1695.02"/>
</g>
<!-- notes_utils.write_json -->
<g id="node9" class="node">
<title>notes_utils.write_json</title>
<g id="a_node9"><a xlink:title="Serialise ``data`` to ``path`` with standard options.">
<polygon fill="none" stroke="black" points="9340,-4670.14 9152,-4670.14 9152,-4634.14 9340,-4634.14 9340,-4670.14"/>
<text text-anchor="middle" x="9246" y="-4648.09" font-family="Times,serif" font-size="15.68">notes_utils.write_json</text>
</a>
</g>
</g>
<!-- post_io.get_contact -->
<g id="node10" class="node">
<title>post_io.get_contact</title>
<g id="a_node10"><a xlink:title="Return a contact identifier from ``meta`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7422.5,-1608.14 7223.5,-1608.14 7223.5,-1572.14 7422.5,-1572.14 7422.5,-1608.14"/>
<text text-anchor="middle" x="7323" y="-1585.35" font-family="Times,serif" font-size="18.48">post_io.get_contact</text>
</a>
</g>
</g>
<!-- post_io.get_timestamp -->
<g id="node11" class="node">
<title>post_io.get_timestamp</title>
<g id="a_node11"><a xlink:title="Return ``meta[&#39;date&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="7494.5,-1666.14 7151.5,-1666.14 7151.5,-1626.14 7494.5,-1626.14 7494.5,-1666.14"/>
<text text-anchor="middle" x="7323" y="-1639.07" font-family="Times,serif" font-size="28.84">post_io.get_timestamp</text>
</a>
</g>
</g>
<!-- post_io.read_post -->
<g id="node12" class="node">
<title>post_io.read_post</title>
<g id="a_node12"><a xlink:title="Return metadata dictionary and body text for ``path``.">
<polygon fill="none" stroke="black" points="8649,-4007.14 8091,-4007.14 8091,-3931.14 8649,-3931.14 8649,-4007.14"/>
<text text-anchor="middle" x="8370" y="-3953.97" font-family="Times,serif" font-size="61.46">post_io.read_post</text>
</a>
</g>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils.read_md -->
<g id="edge8" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8649.27,-3993.58C8739.89,-3989.26 8837.11,-3970.48 8915,-3921.14 9121.68,-3790.2 9214.33,-3479.6 9238.4,-3384.98"/>
<polygon fill="black" stroke="black" points="9241.8,-3385.82 9240.82,-3375.27 9235,-3384.12 9241.8,-3385.82"/>
</g>
<!-- post_io.read_post&#45;&gt;notes_utils._parse_block -->
<g id="edge9" class="edge">
<title>post_io.read_post&#45;&gt;notes_utils._parse_block</title>
<path fill="none" stroke="black" d="M8649.04,-3971.68C8785.88,-3972.94 8946.8,-3974.41 9066.91,-3975.51"/>
<polygon fill="black" stroke="black" points="9066.91,-3979.01 9076.94,-3975.6 9066.97,-3972.01 9066.91,-3979.01"/>
</g>
<!-- post_io.write_post -->
<g id="node13" class="node">
<title>post_io.write_post</title>
<g id="a_node13"><a xlink:title="Write metadata and body as a Markdown post.">
<polygon fill="none" stroke="black" points="6483.5,-1674.14 6151.5,-1674.14 6151.5,-1628.14 6483.5,-1628.14 6483.5,-1674.14"/>
<text text-anchor="middle" x="6317.5" y="-1642.7" font-family="Times,serif" font-size="34.30">post_io.write_post</text>
</a>
</g>
</g>
<!-- post_io.write_post&#45;&gt;notes_utils.write_md -->
<g id="edge10" class="edge">
<title>post_io.write_post&#45;&gt;notes_utils.write_md</title>
<path fill="none" stroke="black" d="M6483.8,-1642.58C6609.52,-1639.52 6769.41,-1644.12 6821,-1683.14 6859.34,-1712.14 6818.58,-1756.25 6857,-1785.14 6909.12,-1824.33 7080.17,-1824.86 7199.58,-1819.88"/>
<polygon fill="black" stroke="black" points="7200.05,-1823.36 7209.88,-1819.43 7199.74,-1816.37 7200.05,-1823.36"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_contact -->
<g id="edge11" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M6483.76,-1640.49C6590.3,-1633.67 6731.82,-1624.72 6857,-1617.14 6978.88,-1609.75 7118.76,-1601.69 7213,-1596.31"/>
<polygon fill="black" stroke="black" points="7213.33,-1599.8 7223.12,-1595.73 7212.93,-1592.81 7213.33,-1599.8"/>
</g>
<!-- post_io.write_post&#45;&gt;post_io.get_timestamp -->
<g id="edge12" class="edge">
<title>post_io.write_post&#45;&gt;post_io.get_timestamp</title>
<path fill="none" stroke="black" d="M6483.65,-1650.31C6664.61,-1649.41 6954,-1647.97 7141.01,-1647.04"/>
<polygon fill="black" stroke="black" points="7141.24,-1650.54 7151.23,-1646.99 7141.21,-1643.54 7141.24,-1650.54"/>
</g>
<!-- post_io.raw_post_path -->
<g id="node14" class="node">
<title>post_io.raw_post_path</title>
<g id="a_node14"><a xlink:title="Return absolute message path for ``rel`` under ``root``.">
<polygon fill="none" stroke="black" points="8446.5,-3178.14 8293.5,-3178.14 8293.5,-3142.14 8446.5,-3142.14 8446.5,-3178.14"/>
<text text-anchor="middle" x="8370" y="-3156.89" font-family="Times,serif" font-size="12.18">post_io.raw_post_path</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot -->
<g id="node15" class="node">
<title>post_io.raw_post_path_from_lot</title>
<g id="a_node15"><a xlink:title="Return raw post path referenced by ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="7468,-3520.14 7178,-3520.14 7178,-3484.14 7468,-3484.14 7468,-3520.14"/>
<text text-anchor="middle" x="7323" y="-3497.97" font-family="Times,serif" font-size="17.08">post_io.raw_post_path_from_lot</text>
</a>
</g>
</g>
<!-- post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path -->
<g id="edge13" class="edge">
<title>post_io.raw_post_path_from_lot&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7419.61,-3520.17C7518.84,-3533.76 7675.16,-3540.38 7789,-3475.14 7814.03,-3460.8 7803.22,-3440.05 7825,-3421.14 7969.34,-3295.8 8184.33,-3216.53 8295.9,-3181.33"/>
<polygon fill="black" stroke="black" points="8297.22,-3184.59 8305.72,-3178.27 8295.13,-3177.91 8297.22,-3184.59"/>
</g>
<!-- log_utils._extract_tb_lineno -->
<g id="node16" class="node">
<title>log_utils._extract_tb_lineno</title>
<g id="a_node16"><a xlink:title="Return the last line number from a traceback.">
<polygon fill="none" stroke="black" points="7438.5,-305.14 7207.5,-305.14 7207.5,-269.14 7438.5,-269.14 7438.5,-305.14"/>
<text text-anchor="middle" x="7323" y="-283.09" font-family="Times,serif" font-size="15.68">log_utils._extract_tb_lineno</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line -->
<g id="node17" class="node">
<title>log_utils._add_exc_line</title>
<g id="a_node17"><a xlink:title="Attach ``line`` from traceback to structured log events.">
<polygon fill="none" stroke="black" points="6459,-305.14 6176,-305.14 6176,-269.14 6459,-269.14 6459,-305.14"/>
<text text-anchor="middle" x="6317.5" y="-281.55" font-family="Times,serif" font-size="23.24">log_utils._add_exc_line</text>
</a>
</g>
</g>
<!-- log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge14" class="edge">
<title>log_utils._add_exc_line&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6459.09,-287.14C6655.59,-287.14 7009.32,-287.14 7197.06,-287.14"/>
<polygon fill="black" stroke="black" points="7197.25,-290.64 7207.25,-287.14 7197.25,-283.64 7197.25,-290.64"/>
</g>
<!-- log_utils.init_logger -->
<g id="node18" class="node">
<title>log_utils.init_logger</title>
<g id="a_node18"><a xlink:title="Initialize logger writing to ``LOGFILE``.&#10;&#10;``LOG_LEVEL`` may be set in ``config.py`` or via an environment&#10;variable. &#160;The level accepts ``DEBUG``, ``INFO`` or ``ERROR`` and&#10;defaults to ``INFO``. &#160;The function falls back to the standard&#10;``logging`` module if ``structlog`` isn&#39;t available so the scripts&#10;can still run in minimal environments.">
<polygon fill="none" stroke="black" points="6665,-168.14 5970,-168.14 5970,-86.14 6665,-86.14 6665,-168.14"/>
<text text-anchor="middle" x="6317.5" y="-110.15" font-family="Times,serif" font-size="67.48">log_utils.init_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge15" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6575.95,-168.19C6775.97,-200.08 7044.51,-242.89 7198.85,-267.5"/>
<polygon fill="black" stroke="black" points="7198.43,-270.98 7208.85,-269.1 7199.53,-264.07 7198.43,-270.98"/>
</g>
<!-- log_utils.get_logger -->
<g id="node19" class="node">
<title>log_utils.get_logger</title>
<g id="a_node19"><a xlink:title="Return the singleton logger instance.">
<polygon fill="none" stroke="black" points="7391.5,-145.14 7254.5,-145.14 7254.5,-109.14 7391.5,-109.14 7391.5,-145.14"/>
<text text-anchor="middle" x="7323" y="-123.89" font-family="Times,serif" font-size="12.18">log_utils.get_logger</text>
</a>
</g>
</g>
<!-- log_utils.init_logger&#45;&gt;log_utils.get_logger -->
<g id="edge16" class="edge">
<title>log_utils.init_logger&#45;&gt;log_utils.get_logger</title>
<path fill="none" stroke="black" d="M6665.25,-120.68C6873.27,-119.87 7120.69,-120.74 7244.02,-123.31"/>
<polygon fill="black" stroke="black" points="7244.05,-126.81 7254.12,-123.53 7244.2,-119.81 7244.05,-126.81"/>
</g>
<!-- log_utils.get_logger&#45;&gt;log_utils.init_logger -->
<g id="edge17" class="edge">
<title>log_utils.get_logger&#45;&gt;log_utils.init_logger</title>
<path fill="none" stroke="black" d="M7254.12,-130.74C7136.5,-133.44 6887.07,-134.4 6675.31,-133.63"/>
<polygon fill="black" stroke="black" points="6675.27,-130.13 6665.25,-133.59 6675.24,-137.13 6675.27,-130.13"/>
</g>
<!-- log_utils.install_excepthook -->
<g id="node20" class="node">
<title>log_utils.install_excepthook</title>
<g id="a_node20"><a xlink:title="Redirect uncaught exceptions to ``logger.exception``.">
<polygon fill="none" stroke="black" points="6504,-453.14 6131,-453.14 6131,-417.14 6504,-417.14 6504,-453.14"/>
<text text-anchor="middle" x="6317.5" y="-428.98" font-family="Times,serif" font-size="25.20">log_utils.install_excepthook</text>
</a>
</g>
</g>
<!-- log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno -->
<g id="edge18" class="edge">
<title>log_utils.install_excepthook&#45;&gt;log_utils._extract_tb_lineno</title>
<path fill="none" stroke="black" d="M6461.6,-417.13C6562.23,-404.21 6699.97,-385.99 6821,-368.14 6953.02,-348.67 7104.19,-323.88 7205.64,-306.89"/>
<polygon fill="black" stroke="black" points="7206.32,-310.32 7215.6,-305.22 7205.16,-303.42 7206.32,-310.32"/>
</g>
<!-- clean_data._parse_date -->
<g id="node21" class="node">
<title>clean_data._parse_date</title>
<g id="a_node21"><a xlink:title="Return the ``date`` field from a markdown file if present.">
<polygon fill="none" stroke="black" points="8509.5,-2726.14 8230.5,-2726.14 8230.5,-2690.14 8509.5,-2690.14 8509.5,-2726.14"/>
<text text-anchor="middle" x="8370" y="-2702.44" font-family="Times,serif" font-size="22.12">clean_data._parse_date</text>
</a>
</g>
</g>
<!-- clean_data._parse_date&#45;&gt;notes_utils.read_text -->
<g id="edge19" class="edge">
<title>clean_data._parse_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M8422.71,-2726.18C8601.14,-2784.84 9198.87,-2951.07 9541,-2676.14 9701.63,-2547.06 9775.77,-1845.82 9789.94,-1695.51"/>
<polygon fill="black" stroke="black" points="9793.45,-1695.56 9790.89,-1685.28 9786.48,-1694.91 9793.45,-1695.56"/>
</g>
<!-- clean_data._clean_raw -->
<g id="node22" class="node">
<title>clean_data._clean_raw</title>
<g id="a_node22"><a xlink:title="Delete raw posts older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7476.5,-2996.14 7169.5,-2996.14 7169.5,-2960.14 7476.5,-2960.14 7476.5,-2996.14"/>
<text text-anchor="middle" x="7323" y="-2971.98" font-family="Times,serif" font-size="25.20">clean_data._clean_raw</text>
</a>
</g>
</g>
<!-- clean_data._clean_raw&#45;&gt;post_io.raw_post_path -->
<g id="edge20" class="edge">
<title>clean_data._clean_raw&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7476.65,-2970.4C7593.46,-2967.75 7742.22,-2972.51 7789,-3010.14 7833.38,-3045.84 7780.28,-3097.86 7825,-3133.14 7893.79,-3187.39 8148,-3177.25 8283.18,-3167.51"/>
<polygon fill="black" stroke="black" points="8283.78,-3170.98 8293.49,-3166.75 8283.26,-3164 8283.78,-3170.98"/>
</g>
<!-- clean_data._clean_raw&#45;&gt;clean_data._parse_date -->
<g id="edge21" class="edge">
<title>clean_data._clean_raw&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7476.6,-2979.87C7568.24,-2977.9 7686.55,-2970.02 7789,-2946.14 8000.07,-2896.93 8233.69,-2780.28 8327.08,-2730.88"/>
<polygon fill="black" stroke="black" points="8328.75,-2733.95 8335.94,-2726.17 8325.47,-2727.77 8328.75,-2733.95"/>
</g>
<!-- clean_data._clean_media -->
<g id="node23" class="node">
<title>clean_data._clean_media</title>
<g id="a_node23"><a xlink:title="Remove unused media files older than ``cutoff``.">
<polygon fill="none" stroke="black" points="7513,-2728.14 7133,-2728.14 7133,-2688.14 7513,-2688.14 7513,-2728.14"/>
<text text-anchor="middle" x="7323" y="-2701.07" font-family="Times,serif" font-size="28.84">clean_data._clean_media</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;clean_data._parse_date -->
<g id="edge22" class="edge">
<title>clean_data._clean_media&#45;&gt;clean_data._parse_date</title>
<path fill="none" stroke="black" d="M7513.24,-2708.14C7716.25,-2708.14 8034.44,-2708.14 8220.27,-2708.14"/>
<polygon fill="black" stroke="black" points="8220.39,-2711.64 8230.39,-2708.14 8220.39,-2704.64 8220.39,-2711.64"/>
</g>
<!-- caption_io.has_caption -->
<g id="node24" class="node">
<title>caption_io.has_caption</title>
<g id="a_node24"><a xlink:title="Return ``True`` when any caption exists for ``image``.">
<polygon fill="none" stroke="black" points="8447.5,-2498.14 8292.5,-2498.14 8292.5,-2462.14 8447.5,-2462.14 8447.5,-2498.14"/>
<text text-anchor="middle" x="8370" y="-2476.89" font-family="Times,serif" font-size="12.18">caption_io.has_caption</text>
</a>
</g>
</g>
<!-- clean_data._clean_media&#45;&gt;caption_io.has_caption -->
<g id="edge23" class="edge">
<title>clean_data._clean_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7513.21,-2716.58C7623.29,-2717.33 7748.19,-2709.62 7789,-2674.14 7846.3,-2624.32 7767.13,-2556.29 7825,-2507.14 7891.71,-2450.48 8146.4,-2461.65 8282.32,-2472.17"/>
<polygon fill="black" stroke="black" points="8282.05,-2475.66 8292.3,-2472.96 8282.6,-2468.68 8282.05,-2475.66"/>
</g>
<!-- caption_io.caption_json_path -->
<g id="node54" class="node">
<title>caption_io.caption_json_path</title>
<g id="a_node54"><a xlink:title="Return new&#45;style caption path for ``image``.">
<polygon fill="none" stroke="black" points="9342.5,-2452.14 9149.5,-2452.14 9149.5,-2416.14 9342.5,-2416.14 9342.5,-2452.14"/>
<text text-anchor="middle" x="9246" y="-2430.89" font-family="Times,serif" font-size="12.18">caption_io.caption_json_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge57" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8447.8,-2476.1C8604.4,-2467.85 8960.85,-2449.09 9139.22,-2439.71"/>
<polygon fill="black" stroke="black" points="9139.6,-2443.19 9149.41,-2439.17 9139.23,-2436.2 9139.6,-2443.19"/>
</g>
<!-- caption_io.caption_md_path -->
<g id="node55" class="node">
<title>caption_io.caption_md_path</title>
<g id="a_node55"><a xlink:title="Return legacy Markdown caption path for ``image``.">
<polygon fill="none" stroke="black" points="9339.5,-2600.14 9152.5,-2600.14 9152.5,-2564.14 9339.5,-2564.14 9339.5,-2600.14"/>
<text text-anchor="middle" x="9246" y="-2578.89" font-family="Times,serif" font-size="12.18">caption_io.caption_md_path</text>
</a>
</g>
</g>
<!-- caption_io.has_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge58" class="edge">
<title>caption_io.has_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8447.52,-2479.76C8553.16,-2480.18 8749.42,-2484.39 8915,-2507.14 9004.14,-2519.38 9104.72,-2543.82 9171.15,-2561.47"/>
<polygon fill="black" stroke="black" points="9170.55,-2564.93 9181.11,-2564.14 9172.35,-2558.17 9170.55,-2564.93"/>
</g>
<!-- clean_data._clean_lots -->
<g id="node25" class="node">
<title>clean_data._clean_lots</title>
<g id="a_node25"><a xlink:title="Drop lots missing translations or source posts.">
<polygon fill="none" stroke="black" points="7525,-3584.14 7121,-3584.14 7121,-3538.14 7525,-3538.14 7525,-3584.14"/>
<text text-anchor="middle" x="7323" y="-3552.7" font-family="Times,serif" font-size="34.30">clean_data._clean_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge24" class="edge">
<title>clean_data._clean_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7525.17,-3568.92C7631.35,-3568.88 7747.97,-3560.91 7789,-3529.14 7829.01,-3498.16 7791.54,-3459.09 7825,-3421.14 7948.65,-3280.9 8164.31,-3209.34 8283.58,-3178.86"/>
<polygon fill="black" stroke="black" points="8284.56,-3182.22 8293.41,-3176.39 8282.86,-3175.44 8284.56,-3182.22"/>
</g>
<!-- lot_io.needs_cleanup -->
<g id="node26" class="node">
<title>lot_io.needs_cleanup</title>
<g id="a_node26"><a xlink:title="Return ``True`` when ``clean_data`` would drop ``lots``.">
<polygon fill="none" stroke="black" points="8459.5,-4424.14 8280.5,-4424.14 8280.5,-4388.14 8459.5,-4388.14 8459.5,-4424.14"/>
<text text-anchor="middle" x="8370" y="-4402.09" font-family="Times,serif" font-size="15.68">lot_io.needs_cleanup</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup -->
<g id="edge25" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M7525.27,-3549.41C7633.59,-3547.9 7752.34,-3555.63 7789,-3593.14 7850.11,-3655.66 7763.3,-4317.2 7825,-4379.14 7885.14,-4439.51 8130.26,-4428.26 8270.07,-4416.31"/>
<polygon fill="black" stroke="black" points="8270.71,-4419.76 8280.36,-4415.41 8270.1,-4412.79 8270.71,-4419.76"/>
</g>
<!-- lot_io.read_lots -->
<g id="node27" class="node">
<title>lot_io.read_lots</title>
<g id="a_node27"><a xlink:title="Return a list of lots from ``path`` or ``None`` when invalid.">
<polygon fill="none" stroke="black" points="8476,-3759.14 8264,-3759.14 8264,-3723.14 8476,-3723.14 8476,-3759.14"/>
<text text-anchor="middle" x="8370" y="-3734.98" font-family="Times,serif" font-size="25.20">lot_io.read_lots</text>
</a>
</g>
</g>
<!-- clean_data._clean_lots&#45;&gt;lot_io.read_lots -->
<g id="edge26" class="edge">
<title>clean_data._clean_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7525.18,-3567.02C7607.36,-3571.49 7703.11,-3579.34 7789,-3593.14 7978.3,-3623.55 8195.98,-3686.99 8302.83,-3720.06"/>
<polygon fill="black" stroke="black" points="8301.92,-3723.45 8312.5,-3723.07 8303.99,-3716.76 8301.92,-3723.45"/>
</g>
<!-- lot_io.read_lots&#45;&gt;notes_utils.load_json -->
<g id="edge135" class="edge">
<title>lot_io.read_lots&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8476.17,-3723.29C8604.72,-3695.28 8817.2,-3627.54 8915,-3475.14 9001.14,-3340.91 8864.35,-2174.04 8951,-2040.14 8993.21,-1974.91 9074.67,-1939.09 9141.15,-1919.9"/>
<polygon fill="black" stroke="black" points="9142.16,-1923.26 9150.85,-1917.19 9140.28,-1916.51 9142.16,-1923.26"/>
</g>
<!-- lot_io._clean_lot -->
<g id="node94" class="node">
<title>lot_io._clean_lot</title>
<g id="a_node94"><a xlink:title="Return ``lot`` without empty or null fields.">
<polygon fill="none" stroke="black" points="9303.5,-4148.14 9188.5,-4148.14 9188.5,-4112.14 9303.5,-4112.14 9303.5,-4148.14"/>
<text text-anchor="middle" x="9246" y="-4126.89" font-family="Times,serif" font-size="12.18">lot_io._clean_lot</text>
</a>
</g>
</g>
<!-- lot_io.read_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge136" class="edge">
<title>lot_io.read_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M8460.9,-3723.11C8581.98,-3704.59 8795.97,-3693.09 8915,-3812.14 9002.47,-3899.61 8864.06,-4000.13 8951,-4088.14 9009.51,-4147.36 9111.16,-4148.59 9178.27,-4141.41"/>
<polygon fill="black" stroke="black" points="9178.79,-4144.88 9188.32,-4140.25 9177.98,-4137.92 9178.79,-4144.88"/>
</g>
<!-- clean_data._clean_embeddings -->
<g id="node28" class="node">
<title>clean_data._clean_embeddings</title>
<g id="a_node28"><a xlink:title="Delete embedding files when the matching lot JSON is absent.">
<polygon fill="none" stroke="black" points="7531,-3088.14 7115,-3088.14 7115,-3052.14 7531,-3052.14 7531,-3088.14"/>
<text text-anchor="middle" x="7323" y="-3063.98" font-family="Times,serif" font-size="25.20">clean_data._clean_embeddings</text>
</a>
</g>
</g>
<!-- clean_data._remove_empty_dirs -->
<g id="node29" class="node">
<title>clean_data._remove_empty_dirs</title>
<g id="a_node29"><a xlink:title="Recursively remove empty folders under ``root``.">
<polygon fill="none" stroke="black" points="8583.5,-3124.14 8156.5,-3124.14 8156.5,-3088.14 8583.5,-3088.14 8583.5,-3124.14"/>
<text text-anchor="middle" x="8370" y="-3099.98" font-family="Times,serif" font-size="25.20">clean_data._remove_empty_dirs</text>
</a>
</g>
</g>
<!-- clean_data.main -->
<g id="node30" class="node">
<title>clean_data.main</title>
<g id="a_node30"><a xlink:title="Clean up old or inconsistent files across data directories.">
<polygon fill="none" stroke="black" points="6413.5,-3088.14 6221.5,-3088.14 6221.5,-3052.14 6413.5,-3052.14 6413.5,-3088.14"/>
<text text-anchor="middle" x="6317.5" y="-3064.84" font-family="Times,serif" font-size="21.00">clean_data.main</text>
</a>
</g>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_raw -->
<g id="edge27" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_raw</title>
<path fill="none" stroke="black" d="M6413.81,-3061.4C6585.29,-3045.68 6947.62,-3012.46 7159.12,-2993.07"/>
<polygon fill="black" stroke="black" points="7159.75,-2996.53 7169.39,-2992.13 7159.11,-2989.56 7159.75,-2996.53"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_media -->
<g id="edge28" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_media</title>
<path fill="none" stroke="black" d="M6383.3,-3052.05C6485.8,-3020.86 6687.38,-2948.73 6821,-2831.14 6843.21,-2811.59 6832.11,-2791.14 6857,-2775.14 6934.96,-2725.03 7035.31,-2706.2 7122.83,-2700.76"/>
<polygon fill="black" stroke="black" points="7123.1,-2704.25 7132.89,-2700.19 7122.71,-2697.26 7123.1,-2704.25"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_lots -->
<g id="edge29" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_lots</title>
<path fill="none" stroke="black" d="M6357.92,-3088.16C6451.57,-3132.88 6689.37,-3257.96 6821,-3431.14 6849.08,-3468.08 6819.89,-3501.29 6857,-3529.14 6897.13,-3559.25 7007.47,-3567.7 7110.6,-3568.41"/>
<polygon fill="black" stroke="black" points="7110.86,-3571.91 7120.88,-3568.45 7110.89,-3564.91 7110.86,-3571.91"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._clean_embeddings -->
<g id="edge30" class="edge">
<title>clean_data.main&#45;&gt;clean_data._clean_embeddings</title>
<path fill="none" stroke="black" d="M6413.81,-3070.14C6571.29,-3070.14 6889.73,-3070.14 7104.49,-3070.14"/>
<polygon fill="black" stroke="black" points="7104.63,-3073.64 7114.63,-3070.14 7104.63,-3066.64 7104.63,-3073.64"/>
</g>
<!-- clean_data.main&#45;&gt;clean_data._remove_empty_dirs -->
<g id="edge31" class="edge">
<title>clean_data.main&#45;&gt;clean_data._remove_empty_dirs</title>
<path fill="none" stroke="black" d="M6413.78,-3076.19C6521.36,-3082.72 6701.67,-3092.78 6857,-3097.14 7314.87,-3109.97 7851.03,-3109.49 8146.03,-3107.88"/>
<polygon fill="black" stroke="black" points="8146.44,-3111.38 8156.42,-3107.83 8146.4,-3104.38 8146.44,-3111.38"/>
</g>
<!-- moderation.should_skip_text -->
<g id="node31" class="node">
<title>moderation.should_skip_text</title>
<g id="a_node31"><a xlink:title="Return ``True`` if ``text`` contains banned phrases.">
<polygon fill="none" stroke="black" points="9937.5,-4857.14 9649.5,-4857.14 9649.5,-4821.14 9937.5,-4821.14 9937.5,-4857.14"/>
<text text-anchor="middle" x="9793.5" y="-4834.35" font-family="Times,serif" font-size="18.48">moderation.should_skip_text</text>
</a>
</g>
</g>
<!-- moderation.should_skip_user -->
<g id="node32" class="node">
<title>moderation.should_skip_user</title>
<g id="a_node32"><a xlink:title="Return ``True`` if ``username`` is blacklisted.">
<polygon fill="none" stroke="black" points="9917.5,-4803.14 9669.5,-4803.14 9669.5,-4767.14 9917.5,-4767.14 9917.5,-4803.14"/>
<text text-anchor="middle" x="9793.5" y="-4781.09" font-family="Times,serif" font-size="15.68">moderation.should_skip_user</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason -->
<g id="node33" class="node">
<title>moderation.message_skip_reason</title>
<g id="a_node33"><a xlink:title="Return the moderation reason for ``meta`` and ``text`` or ``None``.">
<polygon fill="none" stroke="black" points="9541,-4860.64 8951,-4860.64 8951,-4815.64 9541,-4815.64 9541,-4860.64"/>
<text text-anchor="middle" x="9246" y="-4829.76" font-family="Times,serif" font-size="33.60">moderation.message_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_text -->
<g id="edge32" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_text</title>
<path fill="none" stroke="black" d="M9541.3,-4838.68C9574.99,-4838.74 9608.23,-4838.8 9638.96,-4838.86"/>
<polygon fill="black" stroke="black" points="9639.27,-4842.36 9649.28,-4838.88 9639.28,-4835.36 9639.27,-4842.36"/>
</g>
<!-- moderation.message_skip_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge33" class="edge">
<title>moderation.message_skip_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9478.74,-4815.62C9540.34,-4809.64 9604.8,-4803.37 9659.15,-4798.09"/>
<polygon fill="black" stroke="black" points="9659.57,-4801.57 9669.18,-4797.12 9658.89,-4794.6 9659.57,-4801.57"/>
</g>
<!-- moderation.should_skip_message -->
<g id="node34" class="node">
<title>moderation.should_skip_message</title>
<g id="a_node34"><a xlink:title="Return ``True`` when the raw Telegram message should be ignored.">
<polygon fill="none" stroke="black" points="8537,-4532.14 8203,-4532.14 8203,-4496.14 8537,-4496.14 8537,-4532.14"/>
<text text-anchor="middle" x="8370" y="-4509.35" font-family="Times,serif" font-size="18.48">moderation.should_skip_message</text>
</a>
</g>
</g>
<!-- moderation.should_skip_message&#45;&gt;moderation.message_skip_reason -->
<g id="edge34" class="edge">
<title>moderation.should_skip_message&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M8537.07,-4501.57C8675.52,-4494.77 8858.87,-4495.51 8915,-4541.14 8964.18,-4581.12 8911.88,-4629.26 8951,-4679.14 9003.22,-4745.72 9091.35,-4788.04 9157.53,-4812.14"/>
<polygon fill="black" stroke="black" points="9156.53,-4815.5 9167.13,-4815.56 9158.88,-4808.9 9156.53,-4815.5"/>
</g>
<!-- moderation.lot_skip_reason -->
<g id="node35" class="node">
<title>moderation.lot_skip_reason</title>
<g id="a_node35"><a xlink:title="Return the moderation reason for ``lot`` or ``None``.">
<polygon fill="none" stroke="black" points="9422.5,-4079.14 9069.5,-4079.14 9069.5,-4043.14 9422.5,-4043.14 9422.5,-4079.14"/>
<text text-anchor="middle" x="9246" y="-4055.26" font-family="Times,serif" font-size="24.22">moderation.lot_skip_reason</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot -->
<g id="node36" class="node">
<title>moderation.should_skip_lot</title>
<g id="a_node36"><a xlink:title="Return ``True`` when the lot fails additional checks.">
<polygon fill="none" stroke="black" points="8508,-3857.14 8232,-3857.14 8232,-3821.14 8508,-3821.14 8508,-3857.14"/>
<text text-anchor="middle" x="8370" y="-3834.35" font-family="Times,serif" font-size="18.48">moderation.should_skip_lot</text>
</a>
</g>
</g>
<!-- moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason -->
<g id="edge35" class="edge">
<title>moderation.should_skip_lot&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M8432.6,-3821.11C8542.85,-3792.93 8775.41,-3752.65 8915,-3866.14 8964.18,-3906.12 8904.78,-3960.77 8951,-4004.14 8980.69,-4031.99 9019.71,-4048.14 9059.59,-4057.14"/>
<polygon fill="black" stroke="black" points="9058.96,-4060.58 9069.47,-4059.22 9060.41,-4053.73 9058.96,-4060.58"/>
</g>
<!-- moderation.is_misparsed -->
<g id="node37" class="node">
<title>moderation.is_misparsed</title>
<g id="a_node37"><a xlink:title="Return ``True`` for obviously invalid lots or source posts.">
<polygon fill="none" stroke="black" points="7541,-1365.14 7105,-1365.14 7105,-1321.14 7541,-1321.14 7541,-1365.14"/>
<text text-anchor="middle" x="7323" y="-1334.82" font-family="Times,serif" font-size="32.90">moderation.is_misparsed</text>
</a>
</g>
</g>
<!-- lot_io.get_seller -->
<g id="node38" class="node">
<title>lot_io.get_seller</title>
<g id="a_node38"><a xlink:title="Return the seller identifier or ``None`` when missing.">
<polygon fill="none" stroke="black" points="8470.5,-1281.14 8269.5,-1281.14 8269.5,-1245.14 8470.5,-1245.14 8470.5,-1281.14"/>
<text text-anchor="middle" x="8370" y="-1257.55" font-family="Times,serif" font-size="23.24">lot_io.get_seller</text>
</a>
</g>
</g>
<!-- moderation.is_misparsed&#45;&gt;lot_io.get_seller -->
<g id="edge36" class="edge">
<title>moderation.is_misparsed&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7541.16,-1326.51C7760.19,-1309.75 8089.49,-1284.54 8259.21,-1271.54"/>
<polygon fill="black" stroke="black" points="8259.7,-1275.02 8269.41,-1270.76 8259.17,-1268.04 8259.7,-1275.02"/>
</g>
<!-- moderation.apply_to_history -->
<g id="node39" class="node">
<title>moderation.apply_to_history</title>
<g id="a_node39"><a xlink:title="Remove processed lots now failing moderation.">
<polygon fill="none" stroke="black" points="7579,-3862.14 7067,-3862.14 7067,-3816.14 7579,-3816.14 7579,-3862.14"/>
<text text-anchor="middle" x="7323" y="-3830.7" font-family="Times,serif" font-size="34.30">moderation.apply_to_history</text>
</a>
</g>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.read_post -->
<g id="edge37" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7579.13,-3817.52C7650.69,-3821.59 7726.07,-3836.12 7789,-3871.14 7812.93,-3884.45 7801.2,-3907.59 7825,-3921.14 7901.47,-3964.66 7993.98,-3982.93 8080.86,-3988.55"/>
<polygon fill="black" stroke="black" points="8080.69,-3992.04 8090.87,-3989.14 8081.1,-3985.05 8080.69,-3992.04"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;post_io.raw_post_path -->
<g id="edge38" class="edge">
<title>moderation.apply_to_history&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7579.22,-3849.44C7670.11,-3847.34 7757.75,-3836.69 7789,-3806.14 7850.44,-3746.06 7775.89,-3491.65 7825,-3421.14 7933.12,-3265.89 8159.45,-3199.79 8283.38,-3174.32"/>
<polygon fill="black" stroke="black" points="8284.11,-3177.74 8293.22,-3172.34 8282.73,-3170.88 8284.11,-3177.74"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;lot_io.read_lots -->
<g id="edge41" class="edge">
<title>moderation.apply_to_history&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7579.07,-3822.92C7647.31,-3818.06 7721,-3812.36 7789,-3806.14 7950.53,-3791.36 8136.84,-3769.65 8253.78,-3755.45"/>
<polygon fill="black" stroke="black" points="8254.32,-3758.91 8263.82,-3754.23 8253.47,-3751.96 8254.32,-3758.91"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_message -->
<g id="edge39" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7579.1,-3827.7C7670.29,-3829.48 7758.19,-3840.01 7789,-3871.14 7885.46,-3968.6 7727.61,-4390.6 7825,-4487.14 7875.37,-4537.06 8053.47,-4537.75 8192.33,-4529.76"/>
<polygon fill="black" stroke="black" points="8192.9,-4533.24 8202.68,-4529.15 8192.49,-4526.25 8192.9,-4533.24"/>
</g>
<!-- moderation.apply_to_history&#45;&gt;moderation.should_skip_lot -->
<g id="edge40" class="edge">
<title>moderation.apply_to_history&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7579.3,-3839.14C7780.82,-3839.14 8054.89,-3839.14 8221.48,-3839.14"/>
<polygon fill="black" stroke="black" points="8221.8,-3842.64 8231.8,-3839.14 8221.8,-3835.64 8221.8,-3842.64"/>
</g>
<!-- testing_mode.apply_testing_mode -->
<g id="node40" class="node">
<title>testing_mode.apply_testing_mode</title>
<g id="a_node40"><a xlink:title="Tweak environment variables when ``TEST_MODE`` is set.">
<polygon fill="none" stroke="black" points="282,-4302.14 0,-4302.14 0,-4266.14 282,-4266.14 282,-4302.14"/>
<text text-anchor="middle" x="141" y="-4280.09" font-family="Times,serif" font-size="15.68">testing_mode.apply_testing_mode</text>
</a>
</g>
</g>
<!-- clean_data:cli -->
<g id="node41" class="node">
<title>clean_data:cli</title>
<g id="a_node41"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4284.14" rx="37.29" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4282.54" font-family="Times,serif" font-size="7.00">clean_data:cli</text>
</a>
</g>
</g>
<!-- testing_mode.apply_testing_mode&#45;&gt;clean_data:cli -->
<!-- moderation:cli -->
<g id="node171" class="node">
<title>moderation:cli</title>
<g id="a_node171"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4284.14" rx="38.53" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4282.54" font-family="Times,serif" font-size="7.00">moderation:cli</text>
</a>
</g>
</g>
<!-- clean_data:cli&#45;&gt;moderation:cli -->
<!-- similar._iter_lots -->
<g id="node42" class="node">
<title>similar._iter_lots</title>
<g id="a_node42"><a xlink:title="Return lots filtered by moderation rules.">
<polygon fill="none" stroke="black" points="7477,-3927.64 7169,-3927.64 7169,-3880.64 7477,-3880.64 7477,-3927.64"/>
<text text-anchor="middle" x="7323" y="-3895.64" font-family="Times,serif" font-size="35.00">similar._iter_lots</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge43" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7477.07,-3913.66C7635.11,-3923.49 7885.48,-3939.06 8080.78,-3951.21"/>
<polygon fill="black" stroke="black" points="8080.71,-3954.71 8090.91,-3951.84 8081.15,-3947.73 8080.71,-3954.71"/>
</g>
<!-- similar._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge44" class="edge">
<title>similar._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7477.05,-3913.9C7595.42,-3917.8 7746.14,-3913.62 7789,-3871.14 7860.25,-3800.52 7768.22,-3503.84 7825,-3421.14 7932.23,-3264.96 8159.45,-3199.19 8283.61,-3174.03"/>
<polygon fill="black" stroke="black" points="8284.34,-3177.45 8293.47,-3172.08 8282.98,-3170.59 8284.34,-3177.45"/>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge47" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7477.05,-3927.22C7573.31,-3933.93 7696.37,-3927.53 7789,-3871.14 7815.24,-3855.16 7799.24,-3828.88 7825,-3812.14 7953.91,-3728.35 8136.54,-3722 8253.89,-3728.74"/>
<polygon fill="black" stroke="black" points="8253.79,-3732.24 8263.98,-3729.36 8254.22,-3725.25 8253.79,-3732.24"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge45" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7477.22,-3894.22C7595.68,-3890.21 7746.45,-3894.35 7789,-3937.14 7875.37,-4023.98 7737.71,-4401.21 7825,-4487.14 7875.54,-4536.89 8053.61,-4537.61 8192.42,-4529.67"/>
<polygon fill="black" stroke="black" points="8192.99,-4533.15 8202.76,-4529.06 8192.58,-4526.16 8192.99,-4533.15"/>
</g>
<!-- similar._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge46" class="edge">
<title>similar._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7477.11,-3895.87C7567.9,-3890.31 7685.17,-3882.02 7789,-3871.14 7805.07,-3869.45 7808.92,-3867.65 7825,-3866.14 7958.98,-3853.53 8112.1,-3846.6 8221.69,-3842.93"/>
<polygon fill="black" stroke="black" points="8221.94,-3846.42 8231.82,-3842.59 8221.71,-3839.42 8221.94,-3846.42"/>
</g>
<!-- lot_io.iter_lot_files -->
<g id="node43" class="node">
<title>lot_io.iter_lot_files</title>
<g id="a_node43"><a xlink:title="Return ``*.json`` files under ``root``.&#10;&#10;When ``newest_first`` is ``True`` the result is ordered by modification&#10;time with the most recently changed files first. &#160;Both ``build_site.py`` and&#10;``pending_embed.py`` rely on this helper so they scan the lot directory in&#10;the same order.">
<polygon fill="none" stroke="black" points="8498.5,-3912.64 8241.5,-3912.64 8241.5,-3875.64 8498.5,-3875.64 8498.5,-3912.64"/>
<text text-anchor="middle" x="8370" y="-3887.69" font-family="Times,serif" font-size="26.18">lot_io.iter_lot_files</text>
</a>
</g>
</g>
<!-- similar._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge48" class="edge">
<title>similar._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7477.07,-3902.67C7680.32,-3900.73 8036.26,-3897.32 8231.39,-3895.45"/>
<polygon fill="black" stroke="black" points="8231.46,-3898.95 8241.42,-3895.36 8231.39,-3891.95 8231.46,-3898.95"/>
</g>
<!-- similar.main -->
<g id="node44" class="node">
<title>similar.main</title>
<g id="a_node44"><a xlink:title="Update ``data/similar`` using available embeddings.">
<polygon fill="none" stroke="black" points="6414.5,-3480.14 6220.5,-3480.14 6220.5,-3440.14 6414.5,-3440.14 6414.5,-3480.14"/>
<text text-anchor="middle" x="6317.5" y="-3453.07" font-family="Times,serif" font-size="28.84">similar.main</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar._iter_lots -->
<g id="edge49" class="edge">
<title>similar.main&#45;&gt;similar._iter_lots</title>
<path fill="none" stroke="black" d="M6414.74,-3463.77C6529.98,-3473.64 6720.04,-3508.55 6821,-3629.14 6890.8,-3712.51 6777.21,-3797.26 6857,-3871.14 6899.92,-3910.88 7042.6,-3916.26 7158.71,-3913.42"/>
<polygon fill="black" stroke="black" points="7158.89,-3916.91 7168.8,-3913.15 7158.71,-3909.92 7158.89,-3916.91"/>
</g>
<!-- similar_utils._load_embeddings -->
<g id="node45" class="node">
<title>similar_utils._load_embeddings</title>
<g id="a_node45"><a xlink:title="Return mapping of lot id to embedding vector.">
<polygon fill="none" stroke="black" points="8626,-1177.14 8114,-1177.14 8114,-1135.14 8626,-1135.14 8626,-1177.14"/>
<text text-anchor="middle" x="8370" y="-1148.05" font-family="Times,serif" font-size="31.36">similar_utils._load_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_embeddings -->
<g id="edge50" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6373.07,-3440.12C6481.79,-3396.92 6723.34,-3283.5 6821,-3097.14 6867.04,-3009.28 6787.59,-1382.99 6857,-1312.14 6929.53,-1238.1 7694.65,-1317.02 7789,-1274.14 7810.18,-1264.51 7804.36,-1246.86 7825,-1236.14 7909.79,-1192.08 8011.45,-1170.24 8103.82,-1159.99"/>
<polygon fill="black" stroke="black" points="8104.31,-1163.46 8113.88,-1158.91 8103.57,-1156.5 8104.31,-1163.46"/>
</g>
<!-- similar_utils._load_similar -->
<g id="node46" class="node">
<title>similar_utils._load_similar</title>
<g id="a_node46"><a xlink:title="Return cached similar lots mapping.">
<polygon fill="none" stroke="black" points="7572,-1211.14 7074,-1211.14 7074,-1163.14 7572,-1163.14 7572,-1211.14"/>
<text text-anchor="middle" x="7323" y="-1178.02" font-family="Times,serif" font-size="36.40">similar_utils._load_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._load_similar -->
<g id="edge51" class="edge">
<title>similar.main&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6373.08,-3440.13C6481.83,-3396.95 6723.43,-3283.55 6821,-3097.14 6869.36,-3004.73 6785.18,-1295.77 6857,-1220.14 6886.88,-1188.67 6973.31,-1177.78 7063.68,-1175.74"/>
<polygon fill="black" stroke="black" points="7063.92,-1179.24 7073.86,-1175.55 7063.79,-1172.24 7063.92,-1179.24"/>
</g>
<!-- similar_utils._save_similar -->
<g id="node47" class="node">
<title>similar_utils._save_similar</title>
<g id="a_node47"><a xlink:title="Write ``sim_map`` to ``SIMILAR_DIR`` mirroring ``LOTS_DIR`` layout.">
<polygon fill="none" stroke="black" points="7471,-3466.14 7175,-3466.14 7175,-3430.14 7471,-3430.14 7471,-3466.14"/>
<text text-anchor="middle" x="7323" y="-3442.84" font-family="Times,serif" font-size="21.00">similar_utils._save_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._save_similar -->
<g id="edge52" class="edge">
<title>similar.main&#45;&gt;similar_utils._save_similar</title>
<path fill="none" stroke="black" d="M6414.72,-3458.99C6588.11,-3456.91 6954.5,-3452.53 7164.78,-3450.02"/>
<polygon fill="black" stroke="black" points="7165.02,-3453.52 7174.98,-3449.9 7164.94,-3446.52 7165.02,-3453.52"/>
</g>
<!-- similar_utils._prune_similar -->
<g id="node48" class="node">
<title>similar_utils._prune_similar</title>
<g id="a_node48"><a xlink:title="Drop cache entries referring to ids not in ``valid_ids``.">
<polygon fill="none" stroke="black" points="7462,-3374.14 7184,-3374.14 7184,-3338.14 7462,-3338.14 7462,-3374.14"/>
<text text-anchor="middle" x="7323" y="-3351.35" font-family="Times,serif" font-size="18.48">similar_utils._prune_similar</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._prune_similar -->
<g id="edge53" class="edge">
<title>similar.main&#45;&gt;similar_utils._prune_similar</title>
<path fill="none" stroke="black" d="M6414.84,-3473.64C6519.97,-3483.96 6690.66,-3487.5 6821,-3426.14 6842.05,-3416.23 6835.96,-3398.06 6857,-3388.14 6955.43,-3341.73 7078.76,-3335.25 7173.67,-3339.55"/>
<polygon fill="black" stroke="black" points="7173.76,-3343.06 7183.93,-3340.06 7174.11,-3336.07 7173.76,-3343.06"/>
</g>
<!-- similar_utils._calc_similar_nn -->
<g id="node49" class="node">
<title>similar_utils._calc_similar_nn</title>
<g id="a_node49"><a xlink:title="Fill ``sim_map`` for ``new_ids`` using a nearest neighbour search.&#10;&#10;``vec_ids`` lists all lots that have an embedding. &#160;``new_ids`` is a subset&#10;for which we still need recommendations. &#160;We gather vectors for&#10;``vec_ids`` and use ``NearestNeighbors`` from scikit&#45;learn to find the&#10;closest items. &#160;Embeddings of lots without a vector are skipped.">
<polygon fill="none" stroke="black" points="8827,-4230.64 7913,-4230.64 7913,-4155.64 8827,-4155.64 8827,-4230.64"/>
<text text-anchor="middle" x="8370" y="-4178.14" font-family="Times,serif" font-size="60.62">similar_utils._calc_similar_nn</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._calc_similar_nn -->
<g id="edge54" class="edge">
<title>similar.main&#45;&gt;similar_utils._calc_similar_nn</title>
<path fill="none" stroke="black" d="M6414.71,-3462.89C6530.83,-3471.84 6722.71,-3505.77 6821,-3629.14 6871.37,-3692.36 6801.57,-3932.29 6857,-3991.14 6996.37,-4139.08 7512.15,-4182.23 7902.88,-4193.07"/>
<polygon fill="black" stroke="black" points="7902.86,-4196.57 7912.95,-4193.34 7903.05,-4189.57 7902.86,-4196.57"/>
</g>
<!-- similar_utils._sync_embeddings -->
<g id="node50" class="node">
<title>similar_utils._sync_embeddings</title>
<g id="a_node50"><a xlink:title="Drop lots or vectors that do not match and return cleaned data.">
<polygon fill="none" stroke="black" points="7561.5,-2540.14 7084.5,-2540.14 7084.5,-2500.14 7561.5,-2500.14 7561.5,-2540.14"/>
<text text-anchor="middle" x="7323" y="-2513.07" font-family="Times,serif" font-size="28.84">similar_utils._sync_embeddings</text>
</a>
</g>
</g>
<!-- similar.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge55" class="edge">
<title>similar.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M6371.54,-3440.08C6478.57,-3396.44 6718.87,-3281.7 6821,-3097.14 6880.09,-2990.35 6770.56,-2635.29 6857,-2549.14 6888.82,-2517.42 6980.57,-2507.77 7074.25,-2507.01"/>
<polygon fill="black" stroke="black" points="7074.51,-2510.51 7084.5,-2506.96 7074.48,-2503.51 7074.51,-2510.51"/>
</g>
<!-- similar_utils._load_embeddings&#45;&gt;notes_utils.load_json -->
<g id="edge68" class="edge">
<title>similar_utils._load_embeddings&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8491.92,-1135.12C8617.06,-1121.02 8808.8,-1122.25 8915,-1236.14 8986.74,-1313.07 8897.33,-1617.66 8951,-1708.14 9002.68,-1795.26 9111.41,-1849.83 9181.18,-1877.35"/>
<polygon fill="black" stroke="black" points="9180.17,-1880.71 9190.76,-1881.05 9182.7,-1874.18 9180.17,-1880.71"/>
</g>
<!-- similar_utils._load_similar&#45;&gt;notes_utils.load_json -->
<g id="edge69" class="edge">
<title>similar_utils._load_similar&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7572.27,-1178.8C7664.63,-1180.97 7755.23,-1191.14 7789,-1220.14 7843.97,-1267.34 7769.81,-1332.2 7825,-1379.14 8009.86,-1536.36 8737.07,-1281.11 8915,-1446.14 9001.18,-1526.07 8888.01,-1608.9 8951,-1708.14 9005.68,-1794.27 9114.79,-1849.49 9183.62,-1877.36"/>
<polygon fill="black" stroke="black" points="9182.47,-1880.67 9193.05,-1881.11 9185.05,-1874.16 9182.47,-1880.67"/>
</g>
<!-- similar_utils._save_similar&#45;&gt;notes_utils.write_json -->
<g id="edge70" class="edge">
<title>similar_utils._save_similar&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7471.07,-3436.22C7590.47,-3430.12 7745.85,-3431.52 7789,-3475.14 7848.76,-3535.56 7765.87,-4178.1 7825,-4239.14 7994.07,-4413.64 8694.12,-4223.9 8915,-4325.14 9064.51,-4393.67 9185.21,-4560.49 9228.14,-4625.54"/>
<polygon fill="black" stroke="black" points="9225.28,-4627.56 9233.68,-4634.03 9231.14,-4623.74 9225.28,-4627.56"/>
</g>
<!-- similar_utils._similar_path -->
<g id="node60" class="node">
<title>similar_utils._similar_path</title>
<g id="a_node60"><a xlink:title="Return cache file path for ``lot_path`` under ``SIMILAR_DIR``.">
<polygon fill="none" stroke="black" points="8472,-3466.14 8268,-3466.14 8268,-3430.14 8472,-3430.14 8472,-3466.14"/>
<text text-anchor="middle" x="8370" y="-3444.44" font-family="Times,serif" font-size="14.00">similar_utils._similar_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;similar_utils._similar_path -->
<g id="edge71" class="edge">
<title>similar_utils._save_similar&#45;&gt;similar_utils._similar_path</title>
<path fill="none" stroke="black" d="M7471.23,-3448.14C7682.73,-3448.14 8067.91,-3448.14 8257.5,-3448.14"/>
<polygon fill="black" stroke="black" points="8257.77,-3451.64 8267.77,-3448.14 8257.77,-3444.64 8257.77,-3451.64"/>
</g>
<!-- lot_io.lot_json_path -->
<g id="node61" class="node">
<title>lot_io.lot_json_path</title>
<g id="a_node61"><a xlink:title="Return full JSON path for ``lot_id`` given ``root`` directory.">
<polygon fill="none" stroke="black" points="8446.5,-1955.14 8293.5,-1955.14 8293.5,-1919.14 8446.5,-1919.14 8446.5,-1955.14"/>
<text text-anchor="middle" x="8370" y="-1933.44" font-family="Times,serif" font-size="14.00">lot_io.lot_json_path</text>
</a>
</g>
</g>
<!-- similar_utils._save_similar&#45;&gt;lot_io.lot_json_path -->
<g id="edge72" class="edge">
<title>similar_utils._save_similar&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7415.85,-3466.17C7522.93,-3481.25 7696.93,-3486.16 7789,-3383.14 7888.48,-3271.84 7728.24,-2153.81 7825,-2040.14 7937.12,-1908.43 8160.39,-1910.99 8283.17,-1924.13"/>
<polygon fill="black" stroke="black" points="8282.95,-1927.63 8293.28,-1925.26 8283.73,-1920.67 8282.95,-1927.63"/>
</g>
<!-- similar_utils._update_reciprocal -->
<g id="node62" class="node">
<title>similar_utils._update_reciprocal</title>
<g id="a_node62"><a xlink:title="Insert ``lot_id`` into caches of lots listed in ``sims`` if closer.">
<polygon fill="none" stroke="black" points="9487,-4213.14 9005,-4213.14 9005,-4173.14 9487,-4173.14 9487,-4213.14"/>
<text text-anchor="middle" x="9246" y="-4186.07" font-family="Times,serif" font-size="28.84">similar_utils._update_reciprocal</text>
</a>
</g>
</g>
<!-- similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal -->
<g id="edge73" class="edge">
<title>similar_utils._calc_similar_nn&#45;&gt;similar_utils._update_reciprocal</title>
<path fill="none" stroke="black" d="M8827.2,-4193.14C8884.84,-4193.14 8942.04,-4193.14 8994.77,-4193.14"/>
<polygon fill="black" stroke="black" points="8994.91,-4196.64 9004.91,-4193.14 8994.91,-4189.64 8994.91,-4196.64"/>
</g>
<!-- phone_utils.format_georgian -->
<g id="node51" class="node">
<title>phone_utils.format_georgian</title>
<g id="a_node51"><a xlink:title="Return ``phone`` in ``+995...`` format if possible.">
<polygon fill="none" stroke="black" points="7529,-1722.14 7117,-1722.14 7117,-1684.14 7529,-1684.14 7529,-1722.14"/>
<text text-anchor="middle" x="7323" y="-1696.41" font-family="Times,serif" font-size="27.16">phone_utils.format_georgian</text>
</a>
</g>
</g>
<!-- caption_io._get_langs -->
<g id="node52" class="node">
<title>caption_io._get_langs</title>
<g id="a_node52"><a xlink:title="Return configured languages, caching the result.">
<polygon fill="none" stroke="black" points="9355,-2085.14 9137,-2085.14 9137,-2049.14 9355,-2049.14 9355,-2085.14"/>
<text text-anchor="middle" x="9246" y="-2062.35" font-family="Times,serif" font-size="18.48">caption_io._get_langs</text>
</a>
</g>
</g>
<!-- config_utils.load_config -->
<g id="node53" class="node">
<title>config_utils.load_config</title>
<g id="a_node53"><a xlink:title="Return the ``config`` module or exit with a helpful message.&#10;&#10;When running the scripts directly from ``src/`` the repository root isn&#39;t on&#10;``sys.path`` and ``config.py`` can&#39;t be imported. &#160;Try adding the parent&#10;directory before failing so the configuration can live alongside&#10;``config.example.py`` in the project root.">
<polygon fill="none" stroke="black" points="10010,-947.64 9577,-947.64 9577,-900.64 10010,-900.64 10010,-947.64"/>
<text text-anchor="middle" x="9793.5" y="-915.64" font-family="Times,serif" font-size="35.00">config_utils.load_config</text>
</a>
</g>
</g>
<!-- caption_io._get_langs&#45;&gt;config_utils.load_config -->
<g id="edge56" class="edge">
<title>caption_io._get_langs&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M9334.36,-2049.13C9402.02,-2030.37 9492.19,-1993.88 9541,-1926.14 9578.45,-1874.17 9563.72,-1702.8 9577,-1640.14 9633.84,-1371.87 9743.61,-1058.8 9780.26,-957.54"/>
<polygon fill="black" stroke="black" points="9783.64,-958.46 9783.77,-947.87 9777.06,-956.07 9783.64,-958.46"/>
</g>
<!-- caption_io.read_caption -->
<g id="node56" class="node">
<title>caption_io.read_caption</title>
<g id="a_node56"><a xlink:title="Return caption for ``image`` in ``lang`` or empty string when missing.">
<polygon fill="none" stroke="black" points="8535.5,-2553.64 8204.5,-2553.64 8204.5,-2516.64 8535.5,-2516.64 8535.5,-2553.64"/>
<text text-anchor="middle" x="8370" y="-2528.69" font-family="Times,serif" font-size="26.18">caption_io.read_caption</text>
</a>
</g>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.read_md -->
<g id="edge59" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.read_md</title>
<path fill="none" stroke="black" d="M8535.74,-2543.77C8653.02,-2557.74 8808.14,-2593.04 8915,-2681.14 9134.71,-2862.27 9219.55,-3225.22 9239.88,-3328.89"/>
<polygon fill="black" stroke="black" points="9236.48,-3329.75 9241.79,-3338.91 9243.35,-3328.43 9236.48,-3329.75"/>
</g>
<!-- caption_io.read_caption&#45;&gt;notes_utils.load_json -->
<g id="edge60" class="edge">
<title>caption_io.read_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8535.75,-2549.51C8675.98,-2557.77 8862.77,-2558.05 8915,-2507.14 8989.53,-2434.48 8892.21,-2126.03 8951,-2040.14 8995.42,-1975.25 9078.2,-1939.26 9144.64,-1919.92"/>
<polygon fill="black" stroke="black" points="9145.64,-1923.27 9154.31,-1917.18 9143.74,-1916.54 9145.64,-1923.27"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io._get_langs -->
<g id="edge61" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8535.59,-2549.35C8675.72,-2557.51 8862.45,-2557.71 8915,-2507.14 8979.31,-2445.25 8889.34,-2171.66 8951,-2107.14 8995.24,-2060.83 9065.86,-2050.07 9126.79,-2051.25"/>
<polygon fill="black" stroke="black" points="9126.77,-2054.75 9136.87,-2051.55 9126.98,-2047.75 9126.77,-2054.75"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge62" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8535.62,-2533.77C8643.86,-2531.13 8788.37,-2524.28 8915,-2507.14 9003.08,-2495.21 9102.46,-2471.84 9168.93,-2454.75"/>
<polygon fill="black" stroke="black" points="9170.1,-2458.06 9178.9,-2452.16 9168.34,-2451.28 9170.1,-2458.06"/>
</g>
<!-- caption_io.read_caption&#45;&gt;caption_io.caption_md_path -->
<g id="edge63" class="edge">
<title>caption_io.read_caption&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M8535.65,-2543.99C8713.93,-2553.58 8992.78,-2568.57 9142.22,-2576.61"/>
<polygon fill="black" stroke="black" points="9142.14,-2580.11 9152.32,-2577.15 9142.52,-2573.12 9142.14,-2580.11"/>
</g>
<!-- caption_io.write_caption -->
<g id="node57" class="node">
<title>caption_io.write_caption</title>
<g id="a_node57"><a xlink:title="Write ``text`` as ``lang`` caption for ``image``.">
<polygon fill="none" stroke="black" points="8536.5,-2085.14 8203.5,-2085.14 8203.5,-2049.14 8536.5,-2049.14 8536.5,-2085.14"/>
<text text-anchor="middle" x="8370" y="-2060.98" font-family="Times,serif" font-size="25.20">caption_io.write_caption</text>
</a>
</g>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.load_json -->
<g id="edge64" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8536.66,-2071.54C8645.49,-2070.98 8790.26,-2063.66 8915,-2035.14 9023.02,-2010.43 9141.15,-1953.88 9202.56,-1922.03"/>
<polygon fill="black" stroke="black" points="9204.31,-1925.06 9211.56,-1917.33 9201.07,-1918.86 9204.31,-1925.06"/>
</g>
<!-- caption_io.write_caption&#45;&gt;notes_utils.write_json -->
<g id="edge65" class="edge">
<title>caption_io.write_caption&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8530.66,-2085.19C8658.01,-2108.87 8828.84,-2163.46 8915,-2289.14 8975.73,-2377.73 8918.32,-4119.82 8951,-4222.14 9006.68,-4396.45 9158.02,-4563.85 9219.01,-4626.36"/>
<polygon fill="black" stroke="black" points="9216.82,-4629.12 9226.32,-4633.8 9221.81,-4624.21 9216.82,-4629.12"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io._get_langs -->
<g id="edge66" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io._get_langs</title>
<path fill="none" stroke="black" d="M8536.68,-2067.14C8708.93,-2067.14 8974.26,-2067.14 9126.56,-2067.14"/>
<polygon fill="black" stroke="black" points="9126.88,-2070.64 9136.88,-2067.14 9126.88,-2063.64 9126.88,-2070.64"/>
</g>
<!-- caption_io.write_caption&#45;&gt;caption_io.caption_json_path -->
<g id="edge67" class="edge">
<title>caption_io.write_caption&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M8536.69,-2054.5C8676.49,-2047.75 8862.07,-2049.26 8915,-2099.14 9013.7,-2192.14 8854.64,-2306.72 8951,-2402.14 8999.31,-2449.97 9076.3,-2456.89 9139.38,-2452.41"/>
<polygon fill="black" stroke="black" points="9139.69,-2455.9 9149.38,-2451.6 9139.13,-2448.92 9139.69,-2455.9"/>
</g>
<!-- similar_utils._cos_sim -->
<g id="node58" class="node">
<title>similar_utils._cos_sim</title>
<g id="a_node58"><a xlink:title="Return cosine similarity between two embeddings.">
<polygon fill="none" stroke="black" points="7439.5,-1265.14 7206.5,-1265.14 7206.5,-1229.14 7439.5,-1229.14 7439.5,-1265.14"/>
<text text-anchor="middle" x="7323" y="-1242.35" font-family="Times,serif" font-size="19.74">similar_utils._cos_sim</text>
</a>
</g>
</g>
<!-- similar_utils._format_vector -->
<g id="node59" class="node">
<title>similar_utils._format_vector</title>
<g id="a_node59"><a xlink:title="Return compact JSON representation for ``vec``.">
<polygon fill="none" stroke="black" points="8498.5,-1016.14 8241.5,-1016.14 8241.5,-980.14 8498.5,-980.14 8498.5,-1016.14"/>
<text text-anchor="middle" x="8370" y="-993.97" font-family="Times,serif" font-size="17.08">similar_utils._format_vector</text>
</a>
</g>
</g>
<!-- lot_io.parse_lot_id -->
<g id="node97" class="node">
<title>lot_io.parse_lot_id</title>
<g id="a_node97"><a xlink:title="Return ``(relative_path, index)`` extracted from ``lot_id``.">
<polygon fill="none" stroke="black" points="9371,-1699.14 9121,-1699.14 9121,-1663.14 9371,-1663.14 9371,-1699.14"/>
<text text-anchor="middle" x="9246" y="-1674.98" font-family="Times,serif" font-size="25.20">lot_io.parse_lot_id</text>
</a>
</g>
</g>
<!-- lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id -->
<g id="edge141" class="edge">
<title>lot_io.lot_json_path&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M8446.78,-1919.57C8552.39,-1894.61 8749.51,-1846.33 8915,-1796.14 9011.5,-1766.87 9121.81,-1727.13 9187.31,-1702.85"/>
<polygon fill="black" stroke="black" points="9188.88,-1706 9197.04,-1699.24 9186.44,-1699.44 9188.88,-1706"/>
</g>
<!-- similar_utils._similar_by_user -->
<g id="node63" class="node">
<title>similar_utils._similar_by_user</title>
<g id="a_node63"><a xlink:title="Return map of lot id to other lots from the same user.">
<polygon fill="none" stroke="black" points="6626,-1057.14 6009,-1057.14 6009,-1005.14 6626,-1005.14 6626,-1057.14"/>
<text text-anchor="middle" x="6317.5" y="-1020.99" font-family="Times,serif" font-size="40.18">similar_utils._similar_by_user</text>
</a>
</g>
</g>
<!-- similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim -->
<g id="edge74" class="edge">
<title>similar_utils._similar_by_user&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6626.23,-1023.25C6711.41,-1027.35 6789.25,-1039.1 6821,-1066.14 6874.52,-1111.71 6803.22,-1174.88 6857,-1220.14 6906.57,-1261.86 7076.28,-1261.93 7196.3,-1256.14"/>
<polygon fill="black" stroke="black" points="7196.49,-1259.64 7206.3,-1255.64 7196.14,-1252.65 7196.49,-1259.64"/>
</g>
<!-- token_utils.estimate_tokens -->
<g id="node64" class="node">
<title>token_utils.estimate_tokens</title>
<g id="a_node64"><a xlink:title="Return a naive token count approximation.">
<polygon fill="none" stroke="black" points="7441,-4888.14 7205,-4888.14 7205,-4852.14 7441,-4852.14 7441,-4888.14"/>
<text text-anchor="middle" x="7323" y="-4866.09" font-family="Times,serif" font-size="15.68">token_utils.estimate_tokens</text>
</a>
</g>
</g>
<!-- chop.has_misc_deal -->
<g id="node65" class="node">
<title>chop.has_misc_deal</title>
<g id="a_node65"><a xlink:title="Return True when any lot is classified as misc or announcement.">
<polygon fill="none" stroke="black" points="8484,-4850.14 8256,-4850.14 8256,-4814.14 8484,-4814.14 8484,-4850.14"/>
<text text-anchor="middle" x="8370" y="-4826.84" font-family="Times,serif" font-size="21.00">chop.has_misc_deal</text>
</a>
</g>
</g>
<!-- chop.process_message -->
<g id="node66" class="node">
<title>chop.process_message</title>
<g id="a_node66"><a xlink:title="Extract lots from ``msg_path`` and save them under ``LOTS_DIR``.">
<polygon fill="none" stroke="black" points="6818.5,-4916.14 5816.5,-4916.14 5816.5,-4814.14 6818.5,-4814.14 6818.5,-4916.14"/>
<text text-anchor="middle" x="6317.5" y="-4843.82" font-family="Times,serif" font-size="85.40">chop.process_message</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;post_io.read_post -->
<g id="edge75" class="edge">
<title>chop.process_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6433.23,-4814.08C6542.27,-4761.45 6706.21,-4671.23 6821,-4558.14 6842.34,-4537.11 6831.69,-4517.17 6857,-4501.14 7033.27,-4389.49 7643.31,-4536.51 7789,-4387.14 7846.83,-4327.84 7766.12,-4074.4 7825,-4016.14 7915.11,-3926.97 8059.52,-3918.14 8176.91,-3930.04"/>
<polygon fill="black" stroke="black" points="8176.79,-3933.55 8187.11,-3931.13 8177.54,-3926.59 8176.79,-3933.55"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.has_caption -->
<g id="edge77" class="edge">
<title>chop.process_message&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6479.51,-4814.03C6596.73,-4767.49 6747.33,-4686.18 6821,-4558.14 6866.72,-4478.66 6793.98,-2974.74 6857,-2908.14 6999.77,-2757.25 7639.79,-2980.66 7789,-2836.14 7894.66,-2733.8 7717.95,-2608.02 7825,-2507.14 7888.83,-2447 8145.74,-2459.83 8282.44,-2471.46"/>
<polygon fill="black" stroke="black" points="8282.21,-2474.96 8292.47,-2472.33 8282.81,-2467.98 8282.21,-2474.96"/>
</g>
<!-- chop.process_message&#45;&gt;lot_io.needs_cleanup -->
<g id="edge84" class="edge">
<title>chop.process_message&#45;&gt;lot_io.needs_cleanup</title>
<path fill="none" stroke="black" d="M6410.5,-4814.03C6515.15,-4758.62 6692.84,-4672.69 6857,-4632.14 7058.65,-4582.32 7628.32,-4692.76 7789,-4561.14 7834.72,-4523.69 7778.79,-4469.98 7825,-4433.14 7891.36,-4380.23 8132.13,-4388.24 8270.09,-4397.76"/>
<polygon fill="black" stroke="black" points="8270.03,-4401.26 8280.25,-4398.47 8270.52,-4394.28 8270.03,-4401.26"/>
</g>
<!-- chop.process_message&#45;&gt;moderation.should_skip_message -->
<g id="edge76" class="edge">
<title>chop.process_message&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6818.66,-4909.28C7216.25,-4938.92 7717.31,-4961.94 7789,-4897.14 7847.99,-4843.82 7767.35,-4595.91 7825,-4541.14 7876.37,-4492.33 8054.05,-4491.42 8192.53,-4499.05"/>
<polygon fill="black" stroke="black" points="8192.67,-4502.56 8202.85,-4499.64 8193.07,-4495.57 8192.67,-4502.56"/>
</g>
<!-- chop.process_message&#45;&gt;caption_io.read_caption -->
<g id="edge78" class="edge">
<title>chop.process_message&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M6479.19,-4814.13C6596.43,-4767.61 6747.23,-4686.27 6821,-4558.14 6865.56,-4480.75 6794.61,-3015.03 6857,-2951.14 6929.43,-2876.97 7711.74,-2977.25 7789,-2908.14 7865.13,-2840.03 7756.66,-2757.06 7825,-2681.14 7917.27,-2578.64 8072.99,-2544.76 8194.23,-2535.01"/>
<polygon fill="black" stroke="black" points="8194.67,-2538.49 8204.37,-2534.24 8194.14,-2531.51 8194.67,-2538.49"/>
</g>
<!-- chop.process_message&#45;&gt;token_utils.estimate_tokens -->
<g id="edge79" class="edge">
<title>chop.process_message&#45;&gt;token_utils.estimate_tokens</title>
<path fill="none" stroke="black" d="M6818.78,-4867.63C6958.42,-4868.33 7098.22,-4869.02 7194.9,-4869.5"/>
<polygon fill="black" stroke="black" points="7194.98,-4873 7205,-4869.55 7195.01,-4866 7194.98,-4873"/>
</g>
<!-- chop.process_message&#45;&gt;chop.has_misc_deal -->
<g id="edge80" class="edge">
<title>chop.process_message&#45;&gt;chop.has_misc_deal</title>
<path fill="none" stroke="black" d="M6818.67,-4844.13C6831.58,-4843.77 6844.37,-4843.44 6857,-4843.14 7372.68,-4830.73 7987.54,-4830.89 8245.5,-4831.63"/>
<polygon fill="black" stroke="black" points="8245.64,-4835.13 8255.65,-4831.66 8245.66,-4828.13 8245.64,-4835.13"/>
</g>
<!-- message_utils.build_prompt -->
<g id="node67" class="node">
<title>message_utils.build_prompt</title>
<g id="a_node67"><a xlink:title="Return prompt combining message text with captioned file names.">
<polygon fill="none" stroke="black" points="8519.5,-4586.14 8220.5,-4586.14 8220.5,-4550.14 8519.5,-4550.14 8519.5,-4586.14"/>
<text text-anchor="middle" x="8370" y="-4563.35" font-family="Times,serif" font-size="19.74">message_utils.build_prompt</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;message_utils.build_prompt -->
<g id="edge81" class="edge">
<title>chop.process_message&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M6432.1,-4814.04C6539.25,-4768.52 6705.57,-4704.68 6857,-4675.14 7060.5,-4635.44 7596.95,-4710.27 7789,-4632.14 7808.83,-4624.07 7805.22,-4608.33 7825,-4600.14 7947.28,-4549.49 8098.38,-4544.64 8210.28,-4550.66"/>
<polygon fill="black" stroke="black" points="8210.12,-4554.16 8220.3,-4551.23 8210.52,-4547.17 8210.12,-4554.16"/>
</g>
<!-- embed.embed_file -->
<g id="node68" class="node">
<title>embed.embed_file</title>
<g id="a_node68"><a xlink:title="Embed ``path`` and write the result beside it under ``EMBED_DIR``.">
<polygon fill="none" stroke="black" points="7528,-5037.64 7118,-5037.64 7118,-4982.64 7528,-4982.64 7528,-5037.64"/>
<text text-anchor="middle" x="7323" y="-4999.59" font-family="Times,serif" font-size="42.56">embed.embed_file</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;embed.embed_file -->
<g id="edge82" class="edge">
<title>chop.process_message&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6671.59,-4916.16C6822.48,-4937.96 6993.08,-4962.61 7121.69,-4981.19"/>
<polygon fill="black" stroke="black" points="7121.26,-4984.67 7131.66,-4982.63 7122.26,-4977.74 7121.26,-4984.67"/>
</g>
<!-- lot_io.valid_lots -->
<g id="node69" class="node">
<title>lot_io.valid_lots</title>
<g id="a_node69"><a xlink:title="Return ``True`` when every lot contains the required translations.">
<polygon fill="none" stroke="black" points="9348,-5160.14 9144,-5160.14 9144,-5124.14 9348,-5124.14 9348,-5160.14"/>
<text text-anchor="middle" x="9246" y="-5136.26" font-family="Times,serif" font-size="24.22">lot_io.valid_lots</text>
</a>
</g>
</g>
<!-- chop.process_message&#45;&gt;lot_io.valid_lots -->
<g id="edge83" class="edge">
<title>chop.process_message&#45;&gt;lot_io.valid_lots</title>
<path fill="none" stroke="black" d="M6720.9,-4916.25C6757.77,-4933.2 6792.06,-4955.05 6821,-4983.14 6865.56,-5026.38 6807.95,-5080.06 6857,-5118.14 7038,-5258.65 8687.1,-5174.38 9133.83,-5148.77"/>
<polygon fill="black" stroke="black" points="9134.06,-5152.26 9143.84,-5148.19 9133.66,-5145.27 9134.06,-5152.26"/>
</g>
<!-- embed.embed_file&#45;&gt;notes_utils.write_json -->
<g id="edge96" class="edge">
<title>embed.embed_file&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7528.33,-5007.99C7951.89,-5003.11 8888.62,-4989.88 8915,-4968.14 8971.92,-4921.23 8906.16,-4864.7 8951,-4806.14 9004.25,-4736.59 9097.94,-4695.33 9165.25,-4673.3"/>
<polygon fill="black" stroke="black" points="9166.53,-4676.56 9174.99,-4670.18 9164.39,-4669.9 9166.53,-4676.56"/>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.read_lots -->
<g id="edge97" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7528.28,-5013.49C7622.42,-5003.46 7726.82,-4973.6 7789,-4897.14 7865.11,-4803.56 7743.93,-3901.45 7825,-3812.14 7937.94,-3687.73 8153.56,-3701.07 8276.71,-3721.39"/>
<polygon fill="black" stroke="black" points="8276.43,-3724.89 8286.87,-3723.11 8277.6,-3717.99 8276.43,-3724.89"/>
</g>
<!-- lot_io.make_lot_id -->
<g id="node81" class="node">
<title>lot_io.make_lot_id</title>
<g id="a_node81"><a xlink:title="Return lot id string for ``rel`` and ``index``.&#10;&#10;``rel`` is the JSON file path relative to the ``data/lots`` directory&#10;without the ``.json`` suffix.">
<polygon fill="none" stroke="black" points="8462.5,-5056.14 8277.5,-5056.14 8277.5,-5020.14 8462.5,-5020.14 8462.5,-5056.14"/>
<text text-anchor="middle" x="8370" y="-5033.35" font-family="Times,serif" font-size="18.48">lot_io.make_lot_id</text>
</a>
</g>
</g>
<!-- embed.embed_file&#45;&gt;lot_io.make_lot_id -->
<g id="edge98" class="edge">
<title>embed.embed_file&#45;&gt;lot_io.make_lot_id</title>
<path fill="none" stroke="black" d="M7528.28,-5015.61C7750.53,-5021.57 8096.85,-5030.85 8267.27,-5035.41"/>
<polygon fill="black" stroke="black" points="8267.4,-5038.92 8277.49,-5035.69 8267.59,-5031.92 8267.4,-5038.92"/>
</g>
<!-- chop.main -->
<g id="node70" class="node">
<title>chop.main</title>
<g id="a_node70"><a xlink:title="Process a single message file passed on the command line.">
<polygon fill="none" stroke="black" points="5578,-4883.14 5427,-4883.14 5427,-4847.14 5578,-4847.14 5578,-4883.14"/>
<text text-anchor="middle" x="5502.5" y="-4858.98" font-family="Times,serif" font-size="25.20">chop.main</text>
</a>
</g>
</g>
<!-- chop.main&#45;&gt;chop.process_message -->
<g id="edge85" class="edge">
<title>chop.main&#45;&gt;chop.process_message</title>
<path fill="none" stroke="black" d="M5578.17,-4865.14C5634.26,-4865.14 5716.55,-4865.14 5806.05,-4865.14"/>
<polygon fill="black" stroke="black" points="5806.14,-4868.64 5816.14,-4865.14 5806.14,-4861.64 5806.14,-4868.64"/>
</g>
<!-- price_utils.canonical_currency -->
<g id="node71" class="node">
<title>price_utils.canonical_currency</title>
<g id="a_node71"><a xlink:title="Return canonical currency code or ``None`` when unknown.">
<polygon fill="none" stroke="black" points="9425.5,-267.14 9066.5,-267.14 9066.5,-231.14 9425.5,-231.14 9425.5,-267.14"/>
<text text-anchor="middle" x="9246" y="-243.44" font-family="Times,serif" font-size="22.12">price_utils.canonical_currency</text>
</a>
</g>
</g>
<!-- price_utils.fetch_official_rates -->
<g id="node72" class="node">
<title>price_utils.fetch_official_rates</title>
<g id="a_node72"><a xlink:title="Return currency multipliers relative to USD from NBG.">
<polygon fill="none" stroke="black" points="7640.5,-636.64 7005.5,-636.64 7005.5,-583.64 7640.5,-583.64 7640.5,-636.64"/>
<text text-anchor="middle" x="7323" y="-599.93" font-family="Times,serif" font-size="40.88">price_utils.fetch_official_rates</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression -->
<g id="node73" class="node">
<title>price_utils.train_price_regression</title>
<g id="a_node73"><a xlink:title="Return ``(model, currency_map, counts)`` trained on ``lots``.&#10;&#10;``lots`` must contain ``price`` and ``price:currency`` fields. Only lots with&#10;embeddings present in ``id_to_vec`` are considered. Prices are regressed on&#10;the logarithm scale so coefficients are interpretable as multiplicative&#10;factors. ``USD`` is treated as the base currency so coefficients can be&#10;interpreted as exchange rate multipliers. The returned ``counts`` dictionary&#10;maps each currency to the number of training samples observed.">
<polygon fill="none" stroke="black" points="8915,-373.64 7825,-373.64 7825,-296.64 8915,-296.64 8915,-373.64"/>
<text text-anchor="middle" x="8370" y="-319.24" font-family="Times,serif" font-size="63.00">price_utils.train_price_regression</text>
</a>
</g>
</g>
<!-- price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency -->
<g id="edge86" class="edge">
<title>price_utils.train_price_regression&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8818.25,-296.63C8851,-293.52 8883.52,-290.34 8915,-287.14 8970.77,-281.47 9031.76,-274.62 9085.97,-268.32"/>
<polygon fill="black" stroke="black" points="9086.48,-271.78 9096.01,-267.15 9085.67,-264.83 9086.48,-271.78"/>
</g>
<!-- price_utils.predict_price -->
<g id="node74" class="node">
<title>price_utils.predict_price</title>
<g id="a_node74"><a xlink:title="Return predicted price for ``vec`` in ``currency``.&#10;&#10;When ``model`` is ``None`` or ``vec`` is missing, ``None`` is returned.">
<polygon fill="none" stroke="black" points="8575,-532.64 8165,-532.64 8165,-489.64 8575,-489.64 8575,-532.64"/>
<text text-anchor="middle" x="8370" y="-502.99" font-family="Times,serif" font-size="32.06">price_utils.predict_price</text>
</a>
</g>
</g>
<!-- price_utils.currency_rates -->
<g id="node75" class="node">
<title>price_utils.currency_rates</title>
<g id="a_node75"><a xlink:title="Return estimated currency multipliers relative to the base.&#10;&#10;The regression model learns one coefficient per currency dummy feature. &#160;The&#10;coefficient is the logarithm of the multiplier relative to USD.">
<polygon fill="none" stroke="black" points="9439.5,-480.64 9052.5,-480.64 9052.5,-441.64 9439.5,-441.64 9439.5,-480.64"/>
<text text-anchor="middle" x="9246" y="-454.24" font-family="Times,serif" font-size="28.00">price_utils.currency_rates</text>
</a>
</g>
</g>
<!-- price_utils.guess_currency -->
<g id="node76" class="node">
<title>price_utils.guess_currency</title>
<g id="a_node76"><a xlink:title="Return currency with multiplier closest to ``price/pred_usd``.&#10;&#10;``pred_usd`` is the predicted price in USD. &#160;``price`` is the numeric value&#10;provided by the user without a currency. &#160;The function compares the implied&#10;multiplier ``price / pred_usd`` against the learnt exchange rates and picks&#10;the closest match. &#160;``counts`` may be provided to ignore rarely seen&#10;currencies when guessing. &#160;Any currency with fewer than ``min_samples``&#10;samples in the training set is skipped.">
<polygon fill="none" stroke="black" points="8637.5,-601.14 8102.5,-601.14 8102.5,-551.14 8637.5,-551.14 8637.5,-601.14"/>
<text text-anchor="middle" x="8370" y="-566.45" font-family="Times,serif" font-size="38.36">price_utils.guess_currency</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified -->
<g id="node77" class="node">
<title>price_utils._guess_currency_verified</title>
<g id="a_node77"><a xlink:title="Return currency when both AI and official rates agree.">
<polygon fill="none" stroke="black" points="7579.5,-565.14 7066.5,-565.14 7066.5,-527.14 7579.5,-527.14 7579.5,-565.14"/>
<text text-anchor="middle" x="7323" y="-539.41" font-family="Times,serif" font-size="27.16">price_utils._guess_currency_verified</text>
</a>
</g>
</g>
<!-- price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency -->
<g id="edge87" class="edge">
<title>price_utils._guess_currency_verified&#45;&gt;price_utils.guess_currency</title>
<path fill="none" stroke="black" d="M7579.64,-553.48C7734.84,-557.93 7932.99,-563.62 8091.93,-568.18"/>
<polygon fill="black" stroke="black" points="8092.25,-571.69 8102.34,-568.48 8092.45,-564.7 8092.25,-571.69"/>
</g>
<!-- price_utils.apply_price_model -->
<g id="node78" class="node">
<title>price_utils.apply_price_model</title>
<g id="a_node78"><a xlink:title="Predict prices in USD and guess missing currencies.">
<polygon fill="none" stroke="black" points="6632.5,-525.64 6002.5,-525.64 6002.5,-472.64 6632.5,-472.64 6632.5,-525.64"/>
<text text-anchor="middle" x="6317.5" y="-488.93" font-family="Times,serif" font-size="40.88">price_utils.apply_price_model</text>
</a>
</g>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression -->
<g id="edge88" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.train_price_regression</title>
<path fill="none" stroke="black" d="M6632.5,-491.61C6695.49,-485.74 6760.8,-476.5 6821,-462.14 6837.86,-458.12 6840.14,-451.16 6857,-447.14 7168.53,-372.76 7525.52,-343.78 7814.36,-333.85"/>
<polygon fill="black" stroke="black" points="7814.73,-337.34 7824.6,-333.51 7814.49,-330.35 7814.73,-337.34"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.predict_price -->
<g id="edge89" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.predict_price</title>
<path fill="none" stroke="black" d="M6632.72,-500.98C7054.25,-503.44 7791.74,-507.76 8154.75,-509.88"/>
<polygon fill="black" stroke="black" points="8154.82,-513.38 8164.84,-509.94 8154.86,-506.38 8154.82,-513.38"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils.currency_rates -->
<g id="edge90" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils.currency_rates</title>
<path fill="none" stroke="black" d="M6632.73,-495.06C7235.7,-487.23 8539.76,-470.3 9042.05,-463.77"/>
<polygon fill="black" stroke="black" points="9042.36,-467.27 9052.31,-463.64 9042.27,-460.27 9042.36,-467.27"/>
</g>
<!-- price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified -->
<g id="edge91" class="edge">
<title>price_utils.apply_price_model&#45;&gt;price_utils._guess_currency_verified</title>
<path fill="none" stroke="black" d="M6632.57,-513.85C6768.59,-520.22 6926.12,-527.6 7056.23,-533.69"/>
<polygon fill="black" stroke="black" points="7056.18,-537.19 7066.34,-534.16 7056.51,-530.2 7056.18,-537.19"/>
</g>
<!-- price_utils.prepare_price_fields -->
<g id="node79" class="node">
<title>price_utils.prepare_price_fields</title>
<g id="a_node79"><a xlink:title="Add display price helpers to ``lots``.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD and&#10;``cur`` is the display currency. ``_display_price`` is a formatted&#10;string in ``cur``. ``_usd_value`` stores the numeric USD value so&#10;the front&#45;end can switch currencies without rebuilding the site.&#10;Prices predicted by AI get ``_price_class`` set to ``ai&#45;price`` for&#10;styling.">
<polygon fill="none" stroke="black" points="8740,-278.14 8000,-278.14 8000,-220.14 8740,-220.14 8740,-278.14"/>
<text text-anchor="middle" x="8370" y="-237.85" font-family="Times,serif" font-size="45.36">price_utils.prepare_price_fields</text>
</a>
</g>
</g>
<!-- price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency -->
<g id="edge92" class="edge">
<title>price_utils.prepare_price_fields&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M8740.07,-249.14C8849,-249.14 8963.7,-249.14 9056.21,-249.14"/>
<polygon fill="black" stroke="black" points="9056.23,-252.64 9066.23,-249.14 9056.23,-245.64 9056.23,-252.64"/>
</g>
<!-- message_utils.gather_chop_input -->
<g id="node80" class="node">
<title>message_utils.gather_chop_input</title>
<g id="a_node80"><a xlink:title="Return the exact text fed to the lot parser for ``msg_path``.">
<polygon fill="none" stroke="black" points="7535.5,-3982.14 7110.5,-3982.14 7110.5,-3946.14 7535.5,-3946.14 7535.5,-3982.14"/>
<text text-anchor="middle" x="7323" y="-3958.26" font-family="Times,serif" font-size="24.22">message_utils.gather_chop_input</text>
</a>
</g>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;post_io.read_post -->
<g id="edge93" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7535.79,-3965.15C7692.52,-3965.9 7907.84,-3966.93 8080.32,-3967.76"/>
<polygon fill="black" stroke="black" points="8080.56,-3971.26 8090.58,-3967.81 8080.6,-3964.26 8080.56,-3971.26"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;caption_io.read_caption -->
<g id="edge94" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7535.78,-3978.14C7641.24,-3980.02 7753.68,-3972.58 7789,-3936.14 7886.08,-3835.96 7738.52,-2790.6 7825,-2681.14 7911.38,-2571.8 8070.14,-2538.95 8193.95,-2531.31"/>
<polygon fill="black" stroke="black" points="8194.52,-2534.78 8204.3,-2530.72 8194.12,-2527.79 8194.52,-2534.78"/>
</g>
<!-- message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt -->
<g id="edge95" class="edge">
<title>message_utils.gather_chop_input&#45;&gt;message_utils.build_prompt</title>
<path fill="none" stroke="black" d="M7362.48,-3982.24C7453.52,-4027.24 7682.47,-4153.68 7789,-4333.14 7836.89,-4413.81 7754.75,-4478.96 7825,-4541.14 7880.28,-4590.06 8070.47,-4589.35 8210.45,-4581.35"/>
<polygon fill="black" stroke="black" points="8210.67,-4584.85 8220.44,-4580.77 8210.25,-4577.86 8210.67,-4584.85"/>
</g>
<!-- embed.main -->
<g id="node82" class="node">
<title>embed.main</title>
<g id="a_node82"><a xlink:title="Embed the file given on the command line.">
<polygon fill="none" stroke="black" points="6405.5,-5028.14 6229.5,-5028.14 6229.5,-4992.14 6405.5,-4992.14 6405.5,-5028.14"/>
<text text-anchor="middle" x="6317.5" y="-5003.98" font-family="Times,serif" font-size="25.20">embed.main</text>
</a>
</g>
</g>
<!-- embed.main&#45;&gt;embed.embed_file -->
<g id="edge99" class="edge">
<title>embed.main&#45;&gt;embed.embed_file</title>
<path fill="none" stroke="black" d="M6405.8,-5010.14C6560.93,-5010.14 6888.84,-5010.14 7107.32,-5010.14"/>
<polygon fill="black" stroke="black" points="7107.64,-5013.64 7117.64,-5010.14 7107.64,-5006.64 7107.64,-5013.64"/>
</g>
<!-- build_site._load_ontology -->
<g id="node83" class="node">
<title>build_site._load_ontology</title>
<g id="a_node83"><a xlink:title="Return sorted field list from ``ONTOLOGY`` or empty list when missing.">
<polygon fill="none" stroke="black" points="8526.5,-955.14 8213.5,-955.14 8213.5,-919.14 8526.5,-919.14 8526.5,-955.14"/>
<text text-anchor="middle" x="8370" y="-931.55" font-family="Times,serif" font-size="23.24">build_site._load_ontology</text>
</a>
</g>
</g>
<!-- build_site._load_ontology&#45;&gt;notes_utils.load_json -->
<g id="edge100" class="edge">
<title>build_site._load_ontology&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8429.01,-919.04C8540.78,-888.19 8786.24,-840.62 8915,-971.14 8972.58,-1029.5 8910.14,-1637.06 8951,-1708.14 9001.34,-1795.71 9109.95,-1850 9180.14,-1877.37"/>
<polygon fill="black" stroke="black" points="9179.19,-1880.75 9189.78,-1881.05 9181.69,-1874.21 9179.19,-1880.75"/>
</g>
<!-- build_site._compile_locale -->
<g id="node84" class="node">
<title>build_site._compile_locale</title>
<g id="a_node84"><a xlink:title="Compile ``lang`` gettext catalogue when out of date.">
<polygon fill="none" stroke="black" points="9413,-423.14 9079,-423.14 9079,-387.14 9413,-387.14 9413,-423.14"/>
<text text-anchor="middle" x="9246" y="-399.26" font-family="Times,serif" font-size="24.22">build_site._compile_locale</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang -->
<g id="node85" class="node">
<title>build_site._env_for_lang</title>
<g id="a_node85"><a xlink:title="Return Jinja environment configured for ``lang``.">
<polygon fill="none" stroke="black" points="8558.5,-432.64 8181.5,-432.64 8181.5,-391.64 8558.5,-391.64 8558.5,-432.64"/>
<text text-anchor="middle" x="8370" y="-404.89" font-family="Times,serif" font-size="29.68">build_site._env_for_lang</text>
</a>
</g>
</g>
<!-- build_site._env_for_lang&#45;&gt;build_site._compile_locale -->
<g id="edge101" class="edge">
<title>build_site._env_for_lang&#45;&gt;build_site._compile_locale</title>
<path fill="none" stroke="black" d="M8558.76,-410.63C8709.92,-409.42 8920.85,-407.73 9068.83,-406.55"/>
<polygon fill="black" stroke="black" points="9068.96,-410.05 9078.93,-406.47 9068.91,-403.05 9068.96,-410.05"/>
</g>
<!-- build_site._iter_lots -->
<g id="node86" class="node">
<title>build_site._iter_lots</title>
<g id="a_node86"><a xlink:title="Return all lots ready for rendering.">
<polygon fill="none" stroke="black" points="7549,-3797.64 7097,-3797.64 7097,-3740.64 7549,-3740.64 7549,-3797.64"/>
<text text-anchor="middle" x="7323" y="-3758.25" font-family="Times,serif" font-size="44.24">build_site._iter_lots</text>
</a>
</g>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.read_post -->
<g id="edge102" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7483.18,-3740.62C7581.41,-3732.26 7704.38,-3739.65 7789,-3807.14 7830.54,-3840.27 7783.57,-3887.87 7825,-3921.14 7896.08,-3978.21 7990.51,-3999.18 8080.71,-4003.12"/>
<polygon fill="black" stroke="black" points="8080.71,-4006.62 8090.84,-4003.49 8080.97,-3999.63 8080.71,-4006.62"/>
</g>
<!-- build_site._iter_lots&#45;&gt;post_io.raw_post_path -->
<g id="edge103" class="edge">
<title>build_site._iter_lots&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7549.16,-3765.36C7635.71,-3752.11 7728.23,-3721.49 7789,-3655.14 7860.07,-3577.54 7762.33,-3505.66 7825,-3421.14 7937.27,-3269.73 8160.48,-3202.22 8283.21,-3175.47"/>
<polygon fill="black" stroke="black" points="8284.27,-3178.82 8293.31,-3173.31 8282.8,-3171.98 8284.27,-3178.82"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.read_lots -->
<g id="edge106" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7549.14,-3763.11C7765.79,-3757.3 8084.68,-3748.76 8253.82,-3744.22"/>
<polygon fill="black" stroke="black" points="8254.09,-3747.72 8263.99,-3743.95 8253.9,-3740.72 8254.09,-3747.72"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_message -->
<g id="edge104" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7440.61,-3740.61C7547.04,-3722.25 7700.8,-3716.37 7789,-3807.14 7841.73,-3861.4 7771.41,-4433.73 7825,-4487.14 7875.27,-4537.24 8053.65,-4537.87 8192.6,-4529.82"/>
<polygon fill="black" stroke="black" points="8193.18,-4533.29 8202.95,-4529.2 8192.76,-4526.3 8193.18,-4533.29"/>
</g>
<!-- build_site._iter_lots&#45;&gt;moderation.should_skip_lot -->
<g id="edge105" class="edge">
<title>build_site._iter_lots&#45;&gt;moderation.should_skip_lot</title>
<path fill="none" stroke="black" d="M7549.14,-3784.22C7752.77,-3797.86 8046.71,-3817.55 8221.74,-3829.27"/>
<polygon fill="black" stroke="black" points="8221.59,-3832.77 8231.8,-3829.95 8222.05,-3825.79 8221.59,-3832.77"/>
</g>
<!-- build_site._iter_lots&#45;&gt;lot_io.iter_lot_files -->
<g id="edge107" class="edge">
<title>build_site._iter_lots&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M7549.12,-3746.77C7629.91,-3748.85 7718.4,-3763.64 7789,-3807.14 7815.15,-3823.25 7798.61,-3850.42 7825,-3866.14 7891.09,-3905.5 8092.86,-3906.14 8231.18,-3901.38"/>
<polygon fill="black" stroke="black" points="8231.57,-3904.87 8241.44,-3901.01 8231.32,-3897.87 8231.57,-3904.87"/>
</g>
<!-- build_site._copy_images -->
<g id="node87" class="node">
<title>build_site._copy_images</title>
<g id="a_node87"><a xlink:title="Copy media referenced by ``lots`` into ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="8533.5,-873.14 8206.5,-873.14 8206.5,-837.14 8533.5,-837.14 8533.5,-873.14"/>
<text text-anchor="middle" x="8370" y="-848.98" font-family="Times,serif" font-size="25.20">build_site._copy_images</text>
</a>
</g>
</g>
<!-- build_site._copy_static -->
<g id="node88" class="node">
<title>build_site._copy_static</title>
<g id="a_node88"><a xlink:title="Copy CSS and JS so generated pages are standalone.">
<polygon fill="none" stroke="black" points="6445.5,-359.14 6189.5,-359.14 6189.5,-323.14 6445.5,-323.14 6445.5,-359.14"/>
<text text-anchor="middle" x="6317.5" y="-335.84" font-family="Times,serif" font-size="21.00">build_site._copy_static</text>
</a>
</g>
</g>
<!-- build_site._load_state -->
<g id="node89" class="node">
<title>build_site._load_state</title>
<g id="a_node89"><a xlink:title="Return ontology fields, embeddings, lots and similarity cache.">
<polygon fill="none" stroke="black" points="6457,-949.14 6178,-949.14 6178,-913.14 6457,-913.14 6457,-949.14"/>
<text text-anchor="middle" x="6317.5" y="-925.26" font-family="Times,serif" font-size="24.22">build_site._load_state</text>
</a>
</g>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_embeddings -->
<g id="edge108" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M6457.18,-935.84C6820.62,-948.26 7773.89,-981.41 7789,-988.14 7809.96,-997.47 7805.06,-1013.78 7825,-1025.14 7926.4,-1082.89 8052.42,-1115.29 8157.63,-1133.41"/>
<polygon fill="black" stroke="black" points="8157.3,-1136.9 8167.74,-1135.12 8158.47,-1130 8157.3,-1136.9"/>
</g>
<!-- build_site._load_state&#45;&gt;similar_utils._load_similar -->
<g id="edge109" class="edge">
<title>build_site._load_state&#45;&gt;similar_utils._load_similar</title>
<path fill="none" stroke="black" d="M6421.59,-913.11C6534.27,-899.74 6713.1,-898.07 6821,-996.14 6874.3,-1044.58 6802.33,-1107.26 6857,-1154.14 6889.57,-1182.07 6974.92,-1192.52 7063.75,-1195.19"/>
<polygon fill="black" stroke="black" points="7063.66,-1198.68 7073.75,-1195.45 7063.85,-1191.69 7063.66,-1198.68"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._load_ontology -->
<g id="edge110" class="edge">
<title>build_site._load_state&#45;&gt;build_site._load_ontology</title>
<path fill="none" stroke="black" d="M6457.02,-931.54C6822.07,-932.61 7809.31,-935.5 8203.33,-936.65"/>
<polygon fill="black" stroke="black" points="8203.37,-940.15 8213.38,-936.68 8203.39,-933.15 8203.37,-940.15"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._iter_lots -->
<g id="edge111" class="edge">
<title>build_site._load_state&#45;&gt;build_site._iter_lots</title>
<path fill="none" stroke="black" d="M6400.53,-913.09C6514.02,-893.51 6716.69,-879.07 6821,-996.14 6919.28,-1106.44 6765.03,-3539.52 6857,-3655.14 6911.93,-3724.19 7001.27,-3755.58 7087.03,-3768.67"/>
<polygon fill="black" stroke="black" points="7086.52,-3772.13 7096.92,-3770.1 7087.53,-3765.2 7086.52,-3772.13"/>
</g>
<!-- build_site._load_state&#45;&gt;build_site._copy_images -->
<g id="edge112" class="edge">
<title>build_site._load_state&#45;&gt;build_site._copy_images</title>
<path fill="none" stroke="black" d="M6457.02,-926C6819.84,-912.56 7797.28,-876.33 8196.04,-861.55"/>
<polygon fill="black" stroke="black" points="8196.36,-865.04 8206.22,-861.17 8196.1,-858.04 8196.36,-865.04"/>
</g>
<!-- build_site._categorise -->
<g id="node90" class="node">
<title>build_site._categorise</title>
<g id="a_node90"><a xlink:title="Return category info and recent lot list.&#10;&#10;Categories are split by ``market:deal`` and ``sell_item`` lots are further&#10;grouped by ``item:type``.&#10;Stats include price range, last timestamp and embedding centroid so the&#10;sorting logic used on item pages also works for categories.">
<polygon fill="none" stroke="black" points="7762,-1091.14 6884,-1091.14 6884,-997.14 7762,-997.14 7762,-1091.14"/>
<text text-anchor="middle" x="7323" y="-1024.53" font-family="Times,serif" font-size="78.26">build_site._categorise</text>
</a>
</g>
</g>
<!-- build_site._categorise&#45;&gt;lot_io.get_seller -->
<g id="edge113" class="edge">
<title>build_site._categorise&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7762.2,-1082.18C7771.45,-1087.67 7780.4,-1093.64 7789,-1100.14 7822.06,-1125.12 7792.2,-1160.82 7825,-1186.14 7949.63,-1282.36 8139.7,-1286.51 8259.02,-1277.32"/>
<polygon fill="black" stroke="black" points="8259.58,-1280.78 8269.26,-1276.48 8259.01,-1273.8 8259.58,-1280.78"/>
</g>
<!-- build_site._render_site -->
<g id="node91" class="node">
<title>build_site._render_site</title>
<g id="a_node91"><a xlink:title="Render all HTML pages for ``lots`` using cached templates.&#10;&#10;``rates`` maps currency codes to multipliers relative to USD. &#160;The values&#10;are embedded into the pages so the front&#45;end can convert prices on the fly.">
<polygon fill="none" stroke="black" points="6821,-872.64 5814,-872.64 5814,-769.64 6821,-769.64 6821,-872.64"/>
<text text-anchor="middle" x="6317.5" y="-799.42" font-family="Times,serif" font-size="86.52">build_site._render_site</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;notes_utils.read_text -->
<g id="edge114" class="edge">
<title>build_site._render_site&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M6821.15,-804.63C7520.74,-784.38 8724.03,-760.46 8915,-828.14 9362.23,-986.64 9701.46,-1515.16 9776.8,-1640.37"/>
<polygon fill="black" stroke="black" points="9773.82,-1642.21 9781.95,-1649 9779.83,-1638.62 9773.82,-1642.21"/>
</g>
<!-- build_site._render_site&#45;&gt;lot_io.get_seller -->
<g id="edge117" class="edge">
<title>build_site._render_site&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M6821.14,-863.96C7232.75,-901.26 7753.04,-954.5 7789,-988.14 7854.32,-1049.24 7760.53,-1124.15 7825,-1186.14 7939.86,-1296.58 8136.47,-1295.67 8259.22,-1281.71"/>
<polygon fill="black" stroke="black" points="8259.88,-1285.16 8269.39,-1280.5 8259.05,-1278.2 8259.88,-1285.16"/>
</g>
<!-- build_site._render_site&#45;&gt;similar_utils._format_vector -->
<g id="edge115" class="edge">
<title>build_site._render_site&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M6821.1,-814.72C7215.18,-814.03 7709.89,-824.46 7789,-879.14 7822.75,-902.47 7791.52,-940.42 7825,-964.14 7961.56,-1060.87 8169.05,-1040.18 8284.3,-1018.14"/>
<polygon fill="black" stroke="black" points="8285,-1021.57 8294.14,-1016.21 8283.66,-1014.7 8285,-1021.57"/>
</g>
<!-- build_site.build_page -->
<g id="node92" class="node">
<title>build_site.build_page</title>
<g id="a_node92"><a xlink:title="Render ``lot`` into separate HTML files for every language.&#10;&#10;``rates`` provides currency multipliers used by the front&#45;end for dynamic&#10;conversion.">
<polygon fill="none" stroke="black" points="7789,-2172.14 6857,-2172.14 6857,-2070.14 7789,-2070.14 7789,-2172.14"/>
<text text-anchor="middle" x="7323" y="-2100.04" font-family="Times,serif" font-size="85.12">build_site.build_page</text>
</a>
</g>
</g>
<!-- build_site._render_site&#45;&gt;build_site.build_page -->
<g id="edge116" class="edge">
<title>build_site._render_site&#45;&gt;build_site.build_page</title>
<path fill="none" stroke="black" d="M6787.74,-872.71C6799.66,-882.06 6810.81,-892.5 6821,-904.14 6905.65,-1000.82 6770.75,-1964.87 6857,-2060.14 6857.75,-2060.97 6858.51,-2061.79 6859.27,-2062.61"/>
<polygon fill="black" stroke="black" points="6856.77,-2065.06 6866.27,-2069.76 6861.78,-2060.16 6856.77,-2065.06"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.read_post -->
<g id="edge118" class="edge">
<title>build_site.build_page&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7780.63,-2172.34C7783.49,-2175.18 7786.28,-2178.11 7789,-2181.14 7853.59,-2253.08 7758.97,-3850.51 7825,-3921.14 7915.21,-4017.64 8068.38,-4023.31 8189.24,-4008.44"/>
<polygon fill="black" stroke="black" points="8189.88,-4011.89 8199.35,-4007.14 8188.99,-4004.95 8189.88,-4011.89"/>
</g>
<!-- build_site.build_page&#45;&gt;post_io.raw_post_path -->
<g id="edge119" class="edge">
<title>build_site.build_page&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7780.56,-2172.4C7783.44,-2175.22 7786.26,-2178.13 7789,-2181.14 7860.39,-2259.3 7750.59,-3057.85 7825,-3133.14 7886.85,-3195.72 8146.24,-3181.58 8283.29,-3169.2"/>
<polygon fill="black" stroke="black" points="8283.71,-3172.67 8293.35,-3168.27 8283.07,-3165.7 8283.71,-3172.67"/>
</g>
<!-- build_site.build_page&#45;&gt;caption_io.read_caption -->
<g id="edge120" class="edge">
<title>build_site.build_page&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7779.8,-2172.29C7782.94,-2175.14 7786.01,-2178.09 7789,-2181.14 7840.06,-2233.15 7771.98,-2457.13 7825,-2507.14 7876.72,-2555.92 8055.36,-2557.06 8193.98,-2549.69"/>
<polygon fill="black" stroke="black" points="8194.51,-2553.16 8204.31,-2549.12 8194.13,-2546.17 8194.51,-2553.16"/>
</g>
<!-- build_site.build_page&#45;&gt;similar_utils._format_vector -->
<g id="edge121" class="edge">
<title>build_site.build_page&#45;&gt;similar_utils._format_vector</title>
<path fill="none" stroke="black" d="M7779.7,-2069.72C7782.88,-2066.64 7785.98,-2063.45 7789,-2060.14 7858.99,-1983.41 7758.96,-1206.29 7825,-1126.14 7921.86,-1008.57 8104.52,-987.06 8231.31,-988.01"/>
<polygon fill="black" stroke="black" points="8231.44,-991.51 8241.48,-988.14 8231.53,-984.52 8231.44,-991.51"/>
</g>
<!-- build_site.build_page&#45;&gt;build_site._env_for_lang -->
<g id="edge122" class="edge">
<title>build_site.build_page&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M7779.77,-2069.79C7782.93,-2066.69 7786.01,-2063.47 7789,-2060.14 7847.65,-1994.8 7766.15,-545.29 7825,-480.14 7870.59,-429.66 8034.84,-414.35 8171.04,-410.68"/>
<polygon fill="black" stroke="black" points="8171.3,-414.17 8181.21,-410.42 8171.12,-407.17 8171.3,-414.17"/>
</g>
<!-- build_site.main -->
<g id="node93" class="node">
<title>build_site.main</title>
<g id="a_node93"><a xlink:title="Build the static site under ``VIEWS_DIR``.">
<polygon fill="none" stroke="black" points="5698.5,-582.64 5306.5,-582.64 5306.5,-521.64 5698.5,-521.64 5698.5,-582.64"/>
<text text-anchor="middle" x="5502.5" y="-539.89" font-family="Times,serif" font-size="48.44">build_site.main</text>
</a>
</g>
</g>
<!-- build_site.main&#45;&gt;similar_utils._sync_embeddings -->
<g id="edge123" class="edge">
<title>build_site.main&#45;&gt;similar_utils._sync_embeddings</title>
<path fill="none" stroke="black" d="M5532.8,-582.65C5592.48,-647.12 5726.82,-804.59 5778,-966.14 5799.52,-1034.06 5767.55,-2194.11 5814,-2248.14 5899.21,-2347.23 6742.15,-2454.46 7129.33,-2498.95"/>
<polygon fill="black" stroke="black" points="7129.19,-2502.46 7139.53,-2500.12 7129.99,-2495.5 7129.19,-2502.46"/>
</g>
<!-- build_site.main&#45;&gt;config_utils.load_config -->
<g id="edge125" class="edge">
<title>build_site.main&#45;&gt;config_utils.load_config</title>
<path fill="none" stroke="black" d="M5512.31,-521.6C5539.67,-433.17 5632.44,-176.85 5814,-77.14 6107.75,84.19 6986.86,-58.14 7322,-58.14 7322,-58.14 7322,-58.14 8371,-58.14 8896.08,-58.14 9133.71,109.26 9541,-222.14 9757.45,-398.26 9787.7,-775.47 9791.86,-890.28"/>
<polygon fill="black" stroke="black" points="9788.37,-890.68 9792.19,-900.56 9795.37,-890.45 9788.37,-890.68"/>
</g>
<!-- build_site.main&#45;&gt;similar_utils._similar_by_user -->
<g id="edge124" class="edge">
<title>build_site.main&#45;&gt;similar_utils._similar_by_user</title>
<path fill="none" stroke="black" d="M5520.61,-582.9C5572.24,-674.52 5728.2,-942.32 5814,-991.14 5869.6,-1022.77 5934.41,-1039.6 5998.64,-1047.5"/>
<polygon fill="black" stroke="black" points="5998.6,-1051.02 6008.94,-1048.7 5999.41,-1044.07 5998.6,-1051.02"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.canonical_currency -->
<g id="edge126" class="edge">
<title>build_site.main&#45;&gt;price_utils.canonical_currency</title>
<path fill="none" stroke="black" d="M5519.5,-521.42C5558.48,-450.37 5666.12,-275.78 5814,-210.14 5892.73,-175.19 8829.01,-206.09 8915,-211.14 8978.4,-214.86 9048.33,-222.41 9107.43,-229.81"/>
<polygon fill="black" stroke="black" points="9107.21,-233.31 9117.57,-231.09 9108.09,-226.37 9107.21,-233.31"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.fetch_official_rates -->
<g id="edge127" class="edge">
<title>build_site.main&#45;&gt;price_utils.fetch_official_rates</title>
<path fill="none" stroke="black" d="M5698.54,-558.36C6008.57,-568.25 6617.28,-587.66 6994.87,-599.7"/>
<polygon fill="black" stroke="black" points="6995.03,-603.21 7005.14,-600.03 6995.26,-596.21 6995.03,-603.21"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.apply_price_model -->
<g id="edge128" class="edge">
<title>build_site.main&#45;&gt;price_utils.apply_price_model</title>
<path fill="none" stroke="black" d="M5698.75,-539.41C5786.64,-533.68 5892.78,-526.76 5992.09,-520.29"/>
<polygon fill="black" stroke="black" points="5992.55,-523.76 6002.3,-519.62 5992.09,-516.78 5992.55,-523.76"/>
</g>
<!-- build_site.main&#45;&gt;price_utils.prepare_price_fields -->
<g id="edge129" class="edge">
<title>build_site.main&#45;&gt;price_utils.prepare_price_fields</title>
<path fill="none" stroke="black" d="M5523.8,-521.36C5567.72,-457.95 5678.59,-314.14 5814,-260.14 6010.05,-181.95 7326.9,-213.94 7989.59,-235.5"/>
<polygon fill="black" stroke="black" points="7989.67,-239.01 7999.78,-235.83 7989.9,-232.01 7989.67,-239.01"/>
</g>
<!-- build_site.main&#45;&gt;build_site._env_for_lang -->
<g id="edge130" class="edge">
<title>build_site.main&#45;&gt;build_site._env_for_lang</title>
<path fill="none" stroke="black" d="M5551.94,-521.51C5611.11,-486.09 5715.5,-429.87 5814,-408.14 6041.1,-358.04 7610.71,-392.71 8170.89,-406.88"/>
<polygon fill="black" stroke="black" points="8171.01,-410.38 8181.09,-407.14 8171.19,-403.39 8171.01,-410.38"/>
</g>
<!-- build_site.main&#45;&gt;build_site._copy_static -->
<g id="edge131" class="edge">
<title>build_site.main&#45;&gt;build_site._copy_static</title>
<path fill="none" stroke="black" d="M5542.88,-521.33C5599.28,-479.19 5707.97,-405.16 5814,-373.14 5933.66,-337 6076.41,-331.25 6179.14,-333.21"/>
<polygon fill="black" stroke="black" points="6179.19,-336.72 6189.26,-333.44 6179.34,-329.72 6179.19,-336.72"/>
</g>
<!-- build_site.main&#45;&gt;build_site._load_state -->
<g id="edge132" class="edge">
<title>build_site.main&#45;&gt;build_site._load_state</title>
<path fill="none" stroke="black" d="M5521.49,-582.79C5563.08,-650.43 5673.2,-811.95 5814,-881.14 5923.94,-935.16 6063.56,-945.11 6167.71,-943"/>
<polygon fill="black" stroke="black" points="6168.08,-946.49 6178,-942.75 6167.91,-939.49 6168.08,-946.49"/>
</g>
<!-- build_site.main&#45;&gt;build_site._categorise -->
<g id="edge133" class="edge">
<title>build_site.main&#45;&gt;build_site._categorise</title>
<path fill="none" stroke="black" d="M5515.71,-582.64C5549.29,-661.9 5651.48,-873.98 5814,-958.14 5913.43,-1009.62 6709.28,-988.68 6821,-996.14 6838.22,-997.29 6855.76,-998.54 6873.48,-999.89"/>
<polygon fill="black" stroke="black" points="6873.69,-1003.41 6883.93,-1000.69 6874.22,-996.43 6873.69,-1003.41"/>
</g>
<!-- build_site.main&#45;&gt;build_site._render_site -->
<g id="edge134" class="edge">
<title>build_site.main&#45;&gt;build_site._render_site</title>
<path fill="none" stroke="black" d="M5595.97,-582.73C5730.73,-627.32 5983.22,-710.86 6150.63,-766.26"/>
<polygon fill="black" stroke="black" points="6149.94,-769.71 6160.54,-769.53 6152.14,-763.07 6149.94,-769.71"/>
</g>
<!-- lot_io.get_timestamp -->
<g id="node95" class="node">
<title>lot_io.get_timestamp</title>
<g id="a_node95"><a xlink:title="Return ``lot[&#39;timestamp&#39;]`` as a timezone&#45;aware ``datetime``.">
<polygon fill="none" stroke="black" points="8529,-4720.14 8211,-4720.14 8211,-4680.14 8529,-4680.14 8529,-4720.14"/>
<text text-anchor="middle" x="8370" y="-4693.07" font-family="Times,serif" font-size="28.84">lot_io.get_timestamp</text>
</a>
</g>
</g>
<!-- lot_io.write_lots -->
<g id="node96" class="node">
<title>lot_io.write_lots</title>
<g id="a_node96"><a xlink:title="Write lots to ``path`` using consistent JSON formatting.">
<polygon fill="none" stroke="black" points="7424.5,-4720.14 7221.5,-4720.14 7221.5,-4684.14 7424.5,-4684.14 7424.5,-4720.14"/>
<text text-anchor="middle" x="7323" y="-4696.55" font-family="Times,serif" font-size="23.24">lot_io.write_lots</text>
</a>
</g>
</g>
<!-- lot_io.write_lots&#45;&gt;notes_utils.write_json -->
<g id="edge137" class="edge">
<title>lot_io.write_lots&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M7424.69,-4694.47C7525.8,-4687.11 7686.1,-4676.36 7825,-4671.14 8317.82,-4652.6 8907.43,-4651.43 9141.71,-4651.81"/>
<polygon fill="black" stroke="black" points="9141.91,-4655.31 9151.92,-4651.83 9141.93,-4648.31 9141.91,-4655.31"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_seller -->
<g id="edge139" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_seller</title>
<path fill="none" stroke="black" d="M7424.84,-4703.64C7534.38,-4699.18 7704.95,-4673.15 7789,-4561.14 7843.12,-4489.01 7763.98,-1381.53 7825,-1315.14 7943.34,-1186.39 8173.28,-1216.08 8292.77,-1242.8"/>
<polygon fill="black" stroke="black" points="8292.05,-1246.23 8302.58,-1245.05 8293.61,-1239.4 8292.05,-1246.23"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io._clean_lot -->
<g id="edge138" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io._clean_lot</title>
<path fill="none" stroke="black" d="M7424.66,-4707.13C7520.39,-4709.02 7667.42,-4704.42 7789,-4668.14 7806.54,-4662.9 7807.4,-4653.16 7825,-4648.14 7941.6,-4614.88 8827.78,-4679.37 8915,-4595.14 8984.13,-4528.37 8884.13,-4233.17 8951,-4164.14 9008.81,-4104.46 9110.88,-4106.61 9178.24,-4116.29"/>
<polygon fill="black" stroke="black" points="9177.92,-4119.78 9188.33,-4117.83 9178.98,-4112.86 9177.92,-4119.78"/>
</g>
<!-- lot_io.write_lots&#45;&gt;lot_io.get_timestamp -->
<g id="edge140" class="edge">
<title>lot_io.write_lots&#45;&gt;lot_io.get_timestamp</title>
<path fill="none" stroke="black" d="M7424.67,-4701.95C7604.15,-4701.6 7981.1,-4700.88 8200.59,-4700.46"/>
<polygon fill="black" stroke="black" points="8200.61,-4703.96 8210.6,-4700.44 8200.59,-4696.96 8200.61,-4703.96"/>
</g>
<!-- lot_io.embedding_path -->
<g id="node98" class="node">
<title>lot_io.embedding_path</title>
<g id="a_node98"><a xlink:title="Return embedding file path for ``lot_path``.">
<polygon fill="none" stroke="black" points="8476.5,-4370.14 8263.5,-4370.14 8263.5,-4334.14 8476.5,-4334.14 8476.5,-4370.14"/>
<text text-anchor="middle" x="8370" y="-4347.97" font-family="Times,serif" font-size="17.08">lot_io.embedding_path</text>
</a>
</g>
</g>
<!-- lot_io.get_lot -->
<g id="node99" class="node">
<title>lot_io.get_lot</title>
<g id="a_node99"><a xlink:title="Return the lot identified by ``lot_id`` or ``None`` when missing.">
<polygon fill="none" stroke="black" points="7395.5,-1776.14 7250.5,-1776.14 7250.5,-1740.14 7395.5,-1740.14 7395.5,-1776.14"/>
<text text-anchor="middle" x="7323" y="-1753.35" font-family="Times,serif" font-size="19.74">lot_io.get_lot</text>
</a>
</g>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.read_lots -->
<g id="edge142" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M7395.7,-1751.1C7512.6,-1741.39 7736.53,-1730.7 7789,-1785.14 7854.17,-1852.75 7774.43,-3396.01 7825,-3475.14 7920.04,-3623.85 8124.37,-3691.91 8253.78,-3721.14"/>
<polygon fill="black" stroke="black" points="8253.22,-3724.6 8263.74,-3723.35 8254.73,-3717.77 8253.22,-3724.6"/>
</g>
<!-- lot_io.get_lot&#45;&gt;lot_io.parse_lot_id -->
<g id="edge143" class="edge">
<title>lot_io.get_lot&#45;&gt;lot_io.parse_lot_id</title>
<path fill="none" stroke="black" d="M7395.51,-1755.27C7680.08,-1743.86 8734.81,-1701.59 9110.79,-1686.52"/>
<polygon fill="black" stroke="black" points="9111.05,-1690.01 9120.9,-1686.11 9110.77,-1683.02 9111.05,-1690.01"/>
</g>
<!-- caption._identify_size -->
<g id="node100" class="node">
<title>caption._identify_size</title>
<g id="a_node100"><a xlink:title="Return ``(width, height)`` for ``path`` using ImageMagick.">
<polygon fill="none" stroke="black" points="9374.5,-1365.14 9117.5,-1365.14 9117.5,-1329.14 9374.5,-1329.14 9374.5,-1365.14"/>
<text text-anchor="middle" x="9246" y="-1341.44" font-family="Times,serif" font-size="22.12">caption._identify_size</text>
</a>
</g>
</g>
<!-- caption._prepare_image -->
<g id="node101" class="node">
<title>caption._prepare_image</title>
<g id="a_node101"><a xlink:title="Resize ``path`` and return the processed JPEG bytes.">
<polygon fill="none" stroke="black" points="8587,-1370.14 8153,-1370.14 8153,-1324.14 8587,-1324.14 8587,-1370.14"/>
<text text-anchor="middle" x="8370" y="-1338.7" font-family="Times,serif" font-size="34.30">caption._prepare_image</text>
</a>
</g>
</g>
<!-- caption._prepare_image&#45;&gt;caption._identify_size -->
<g id="edge144" class="edge">
<title>caption._prepare_image&#45;&gt;caption._identify_size</title>
<path fill="none" stroke="black" d="M8587.04,-1347.14C8749.54,-1347.14 8967.35,-1347.14 9106.96,-1347.14"/>
<polygon fill="black" stroke="black" points="9107.3,-1350.64 9117.3,-1347.14 9107.3,-1343.64 9107.3,-1350.64"/>
</g>
<!-- caption._guess_chat -->
<g id="node102" class="node">
<title>caption._guess_chat</title>
<g id="a_node102"><a xlink:title="Return chat name for ``path`` relative to ``MEDIA_DIR``.">
<polygon fill="none" stroke="black" points="9342,-1454.14 9150,-1454.14 9150,-1418.14 9342,-1418.14 9342,-1454.14"/>
<text text-anchor="middle" x="9246" y="-1431.97" font-family="Times,serif" font-size="17.08">caption._guess_chat</text>
</a>
</g>
</g>
<!-- caption.caption_file -->
<g id="node103" class="node">
<title>caption.caption_file</title>
<g id="a_node103"><a xlink:title="Caption ``path`` with GPT&#45;4o and save ``.caption.json`` beside it.">
<polygon fill="none" stroke="black" points="7626,-1456.64 7020,-1456.64 7020,-1383.64 7626,-1383.64 7626,-1456.64"/>
<text text-anchor="middle" x="7323" y="-1405.15" font-family="Times,serif" font-size="59.36">caption.caption_file</text>
</a>
</g>
</g>
<!-- caption.caption_file&#45;&gt;notes_utils.load_json -->
<g id="edge145" class="edge">
<title>caption.caption_file&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7626.41,-1435.69C8060.18,-1460.65 8817.75,-1515.09 8915,-1595.14 8955.7,-1628.63 8919.04,-1666.23 8951,-1708.14 9013.88,-1790.6 9123.28,-1847.89 9189.43,-1877"/>
<polygon fill="black" stroke="black" points="9188.3,-1880.33 9198.87,-1881.09 9191.08,-1873.9 9188.3,-1880.33"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.has_caption -->
<g id="edge147" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7626.06,-1388.96C7687.49,-1397.84 7746.29,-1419.99 7789,-1465.14 7856.1,-1536.07 7763.41,-2267.37 7825,-2343.14 7935.39,-2478.94 8158.85,-2491.6 8282.25,-2487.07"/>
<polygon fill="black" stroke="black" points="8282.57,-2490.56 8292.41,-2486.65 8282.28,-2483.57 8282.57,-2490.56"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.caption_json_path -->
<g id="edge146" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7626.12,-1389.56C7687.36,-1398.47 7746.07,-1420.48 7789,-1465.14 7886.04,-1566.06 7726.21,-1994.93 7825,-2094.14 7996.24,-2266.1 8736.11,-1997.15 8915,-2161.14 8994.83,-2234.32 8872.91,-2327.1 8951,-2402.14 8999.83,-2449.06 9076.4,-2456.13 9139.15,-2451.95"/>
<polygon fill="black" stroke="black" points="9139.8,-2455.41 9149.5,-2451.15 9139.26,-2448.43 9139.8,-2455.41"/>
</g>
<!-- caption.caption_file&#45;&gt;caption_io.write_caption -->
<g id="edge148" class="edge">
<title>caption.caption_file&#45;&gt;caption_io.write_caption</title>
<path fill="none" stroke="black" d="M7626.23,-1390.12C7687.29,-1399.06 7745.88,-1420.95 7789,-1465.14 7866.65,-1544.71 7751.04,-1881.13 7825,-1964.14 7915.27,-2065.44 8071.38,-2086.34 8193.29,-2084.71"/>
<polygon fill="black" stroke="black" points="8193.55,-2088.21 8203.48,-2084.52 8193.42,-2081.21 8193.55,-2088.21"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._prepare_image -->
<g id="edge149" class="edge">
<title>caption.caption_file&#45;&gt;caption._prepare_image</title>
<path fill="none" stroke="black" d="M7626.26,-1399.02C7790.95,-1387.52 7991.38,-1373.52 8142.51,-1362.96"/>
<polygon fill="black" stroke="black" points="8143.12,-1366.43 8152.85,-1362.24 8142.63,-1359.44 8143.12,-1366.43"/>
</g>
<!-- caption.caption_file&#45;&gt;caption._guess_chat -->
<g id="edge150" class="edge">
<title>caption.caption_file&#45;&gt;caption._guess_chat</title>
<path fill="none" stroke="black" d="M7626.01,-1422.65C8064.29,-1426.3 8855.3,-1432.89 9139.64,-1435.26"/>
<polygon fill="black" stroke="black" points="9139.91,-1438.76 9149.94,-1435.35 9139.97,-1431.76 9139.91,-1438.76"/>
</g>
<!-- caption.main -->
<g id="node104" class="node">
<title>caption.main</title>
<g id="a_node104"><a xlink:title="Caption a single image provided on the command line.">
<polygon fill="none" stroke="black" points="6410,-1324.14 6225,-1324.14 6225,-1288.14 6410,-1288.14 6410,-1324.14"/>
<text text-anchor="middle" x="6317.5" y="-1299.98" font-family="Times,serif" font-size="25.20">caption.main</text>
</a>
</g>
</g>
<!-- caption.main&#45;&gt;caption.caption_file -->
<g id="edge151" class="edge">
<title>caption.main&#45;&gt;caption.caption_file</title>
<path fill="none" stroke="black" d="M6410.29,-1291.13C6515.14,-1278.4 6689.21,-1270.99 6821,-1334.14 6842.57,-1344.47 6835.66,-1363.34 6857,-1374.14 6903.94,-1397.88 6956.93,-1412.55 7009.89,-1421.21"/>
<polygon fill="black" stroke="black" points="7009.36,-1424.67 7019.78,-1422.76 7010.44,-1417.75 7009.36,-1424.67"/>
</g>
<!-- tg_client._mark_activity -->
<g id="node105" class="node">
<title>tg_client._mark_activity</title>
<g id="a_node105"><a xlink:title="Update ``_last_event`` to the current time.">
<polygon fill="none" stroke="black" points="5039.5,-1623.14 4853.5,-1623.14 4853.5,-1587.14 5039.5,-1587.14 5039.5,-1623.14"/>
<text text-anchor="middle" x="4946.5" y="-1601.44" font-family="Times,serif" font-size="14.00">tg_client._mark_activity</text>
</a>
</g>
</g>
<!-- tg_client._heartbeat -->
<g id="node106" class="node">
<title>tg_client._heartbeat</title>
<g id="a_node106"><a xlink:title="Periodically log a heartbeat and warn if idle for too long.">
<polygon fill="none" stroke="black" points="1490.5,-1957.14 1260.5,-1957.14 1260.5,-1921.14 1490.5,-1921.14 1490.5,-1957.14"/>
<text text-anchor="middle" x="1375.5" y="-1933.84" font-family="Times,serif" font-size="21.00">tg_client._heartbeat</text>
</a>
</g>
</g>
<!-- tg_client._progress_logger -->
<g id="node107" class="node">
<title>tg_client._progress_logger</title>
<g id="a_node107"><a xlink:title="Return a progress callback that logs received bytes.">
<polygon fill="none" stroke="black" points="5130,-2231.64 4763,-2231.64 4763,-2194.64 5130,-2194.64 5130,-2231.64"/>
<text text-anchor="middle" x="4946.5" y="-2206.69" font-family="Times,serif" font-size="26.18">tg_client._progress_logger</text>
</a>
</g>
</g>
<!-- tg_client._write_md -->
<g id="node108" class="node">
<title>tg_client._write_md</title>
<g id="a_node108"><a xlink:title="Helper to store a raw post in Markdown format.">
<polygon fill="none" stroke="black" points="5571,-1684.14 5434,-1684.14 5434,-1648.14 5571,-1648.14 5571,-1684.14"/>
<text text-anchor="middle" x="5502.5" y="-1662.89" font-family="Times,serif" font-size="12.18">tg_client._write_md</text>
</a>
</g>
</g>
<!-- tg_client._write_md&#45;&gt;post_io.write_post -->
<g id="edge152" class="edge">
<title>tg_client._write_md&#45;&gt;post_io.write_post</title>
<path fill="none" stroke="black" d="M5571.07,-1664.89C5695.13,-1662.6 5962.86,-1657.66 6141.36,-1654.37"/>
<polygon fill="black" stroke="black" points="6141.45,-1657.87 6151.39,-1654.18 6141.32,-1650.87 6141.45,-1657.87"/>
</g>
<!-- tg_client._scan_group_cache -->
<g id="node109" class="node">
<title>tg_client._scan_group_cache</title>
<g id="a_node109"><a xlink:title="Build group_id &#45;&gt; Path mapping for ``chat`` quickly.">
<polygon fill="none" stroke="black" points="7562.5,-2827.64 7083.5,-2827.64 7083.5,-2784.64 7562.5,-2784.64 7562.5,-2827.64"/>
<text text-anchor="middle" x="7323" y="-2797.99" font-family="Times,serif" font-size="32.06">tg_client._scan_group_cache</text>
</a>
</g>
</g>
<!-- tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path -->
<g id="edge153" class="edge">
<title>tg_client._scan_group_cache&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7562.74,-2797.63C7659.13,-2799.56 7755.52,-2810.15 7789,-2842.14 7883.24,-2932.15 7729.53,-3044.44 7825,-3133.14 7889.37,-3192.95 8146.99,-3180.15 8283.34,-3168.64"/>
<polygon fill="black" stroke="black" points="8283.68,-3172.12 8293.35,-3167.78 8283.08,-3165.15 8283.68,-3172.12"/>
</g>
<!-- tg_client._find_group_path -->
<g id="node110" class="node">
<title>tg_client._find_group_path</title>
<g id="a_node110"><a xlink:title="Return stored message path for ``group_id`` if known.">
<polygon fill="none" stroke="black" points="6450.5,-2822.14 6184.5,-2822.14 6184.5,-2786.14 6450.5,-2786.14 6450.5,-2822.14"/>
<text text-anchor="middle" x="6317.5" y="-2799.35" font-family="Times,serif" font-size="18.48">tg_client._find_group_path</text>
</a>
</g>
</g>
<!-- tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache -->
<g id="edge154" class="edge">
<title>tg_client._find_group_path&#45;&gt;tg_client._scan_group_cache</title>
<path fill="none" stroke="black" d="M6450.72,-2804.4C6608.57,-2804.72 6875.92,-2805.25 7072.93,-2805.64"/>
<polygon fill="black" stroke="black" points="7073.13,-2809.14 7083.14,-2805.66 7073.15,-2802.14 7073.13,-2809.14"/>
</g>
<!-- tg_client._get_message_path -->
<g id="node111" class="node">
<title>tg_client._get_message_path</title>
<g id="a_node111"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="3331,-3256.14 3092,-3256.14 3092,-3220.14 3331,-3220.14 3331,-3256.14"/>
<text text-anchor="middle" x="3211.5" y="-3234.09" font-family="Times,serif" font-size="15.68">tg_client._get_message_path</text>
</a>
</g>
</g>
<!-- tg_client._get_message_path&#45;&gt;post_io.raw_post_path -->
<g id="edge155" class="edge">
<title>tg_client._get_message_path&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3331.21,-3237.21C3611.9,-3235.11 4338.49,-3230.14 4945.5,-3230.14 4945.5,-3230.14 4945.5,-3230.14 6318.5,-3230.14 6481.91,-3230.14 7632.53,-3253.24 7789,-3206.14 7807.18,-3200.66 7806.89,-3188.85 7825,-3183.14 7980.84,-3134.01 8174.24,-3140.74 8283.44,-3150.29"/>
<polygon fill="black" stroke="black" points="8283.14,-3153.78 8293.41,-3151.19 8283.77,-3146.81 8283.14,-3153.78"/>
</g>
<!-- tg_client._should_skip_media -->
<g id="node112" class="node">
<title>tg_client._should_skip_media</title>
<g id="a_node112"><a xlink:title="Return reason string if ``msg`` media should be skipped.">
<polygon fill="none" stroke="black" points="5191,-1831.64 4702,-1831.64 4702,-1788.64 5191,-1788.64 5191,-1831.64"/>
<text text-anchor="middle" x="4946.5" y="-1801.99" font-family="Times,serif" font-size="32.06">tg_client._should_skip_media</text>
</a>
</g>
</g>
<!-- tg_client._allowed_topic -->
<g id="node113" class="node">
<title>tg_client._allowed_topic</title>
<g id="a_node113"><a xlink:title="Return ``True`` if ``msg`` belongs to an allowed forum topic.">
<polygon fill="none" stroke="black" points="5714.5,-1870.64 5290.5,-1870.64 5290.5,-1825.64 5714.5,-1825.64 5714.5,-1870.64"/>
<text text-anchor="middle" x="5502.5" y="-1839.76" font-family="Times,serif" font-size="33.60">tg_client._allowed_topic</text>
</a>
</g>
</g>
<!-- tg_client._extract_author -->
<g id="node114" class="node">
<title>tg_client._extract_author</title>
<g id="a_node114"><a xlink:title="Return a metadata dictionary describing the message author.">
<polygon fill="none" stroke="black" points="6680.5,-1762.14 5954.5,-1762.14 5954.5,-1692.14 6680.5,-1692.14 6680.5,-1762.14"/>
<text text-anchor="middle" x="6317.5" y="-1713.34" font-family="Times,serif" font-size="56.00">tg_client._extract_author</text>
</a>
</g>
</g>
<!-- tg_client._extract_author&#45;&gt;phone_utils.format_georgian -->
<g id="edge156" class="edge">
<title>tg_client._extract_author&#45;&gt;phone_utils.format_georgian</title>
<path fill="none" stroke="black" d="M6680.79,-1718.47C6823.59,-1715.06 6982.76,-1711.25 7106.79,-1708.28"/>
<polygon fill="black" stroke="black" points="7106.88,-1711.78 7116.79,-1708.05 7106.71,-1704.79 7106.88,-1711.78"/>
</g>
<!-- tg_client._schedule_caption -->
<g id="node115" class="node">
<title>tg_client._schedule_caption</title>
<g id="a_node115"><a xlink:title="Run captioning in a separate process so downloads continue.">
<polygon fill="none" stroke="black" points="7462,-2594.14 7184,-2594.14 7184,-2558.14 7462,-2558.14 7462,-2594.14"/>
<text text-anchor="middle" x="7323" y="-2571.35" font-family="Times,serif" font-size="18.48">tg_client._schedule_caption</text>
</a>
</g>
</g>
<!-- tg_client._schedule_chop -->
<g id="node116" class="node">
<title>tg_client._schedule_chop</title>
<g id="a_node116"><a xlink:title="Run lot extraction in a separate process.">
<polygon fill="none" stroke="black" points="8518,-1787.14 8222,-1787.14 8222,-1751.14 8518,-1751.14 8518,-1787.14"/>
<text text-anchor="middle" x="8370" y="-1763.44" font-family="Times,serif" font-size="22.12">tg_client._schedule_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop -->
<g id="node117" class="node">
<title>tg_client._enqueue_chop</title>
<g id="a_node117"><a xlink:title="Queue ``path`` for chopping once captions are available.">
<polygon fill="none" stroke="black" points="5189,-2521.64 4704,-2521.64 4704,-2472.64 5189,-2472.64 5189,-2521.64"/>
<text text-anchor="middle" x="4946.5" y="-2487.51" font-family="Times,serif" font-size="37.66">tg_client._enqueue_chop</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;caption_io.has_caption -->
<g id="edge158" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5189.24,-2513.99C5856.71,-2559.5 7683.01,-2676.59 7789,-2603.14 7826.45,-2577.18 7788.2,-2534.01 7825,-2507.14 7895.47,-2455.67 8147.09,-2464.38 8282.03,-2473.25"/>
<polygon fill="black" stroke="black" points="8282.12,-2476.76 8292.33,-2473.94 8282.59,-2469.78 8282.12,-2476.76"/>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message -->
<g id="edge157" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M4954.52,-2521.94C4988.58,-2643.52 5137.03,-3189.09 5191,-3647.14 5200.04,-3723.86 5171.84,-4983.06 5227,-5037.14 5430.27,-5236.43 7580.69,-5241.16 7789,-5047.14 7871.49,-4970.31 7744.44,-4619.99 7825,-4541.14 7875.68,-4491.53 8053.73,-4490.79 8192.49,-4498.68"/>
<polygon fill="black" stroke="black" points="8192.65,-4502.19 8202.83,-4499.28 8193.06,-4495.2 8192.65,-4502.19"/>
</g>
<!-- tg_client._start_chop_worker -->
<g id="node118" class="node">
<title>tg_client._start_chop_worker</title>
<g id="a_node118"><a xlink:title="Ensure the chop queue worker task is running.">
<polygon fill="none" stroke="black" points="5635.5,-2162.14 5369.5,-2162.14 5369.5,-2126.14 5635.5,-2126.14 5635.5,-2162.14"/>
<text text-anchor="middle" x="5502.5" y="-2139.97" font-family="Times,serif" font-size="17.08">tg_client._start_chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker -->
<g id="edge159" class="edge">
<title>tg_client._enqueue_chop&#45;&gt;tg_client._start_chop_worker</title>
<path fill="none" stroke="black" d="M4974.3,-2472.5C5021.33,-2428.51 5120.41,-2332.4 5191,-2240.14 5209.67,-2215.74 5201.28,-2197.93 5227,-2181.14 5265.65,-2155.9 5313.91,-2144.39 5359.14,-2139.85"/>
<polygon fill="black" stroke="black" points="5359.69,-2143.32 5369.34,-2138.94 5359.07,-2136.35 5359.69,-2143.32"/>
</g>
<!-- tg_client._chop_worker -->
<g id="node119" class="node">
<title>tg_client._chop_worker</title>
<g id="a_node119"><a xlink:title="Background task processing ``_CHOP_QUEUE``.">
<polygon fill="none" stroke="black" points="6443,-2151.14 6192,-2151.14 6192,-2115.14 6443,-2115.14 6443,-2151.14"/>
<text text-anchor="middle" x="6317.5" y="-2128.35" font-family="Times,serif" font-size="19.74">tg_client._chop_worker</text>
</a>
</g>
</g>
<!-- tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker -->
<g id="edge160" class="edge">
<title>tg_client._start_chop_worker&#45;&gt;tg_client._chop_worker</title>
<path fill="none" stroke="black" d="M5635.93,-2142.35C5786.25,-2140.31 6030.15,-2137.01 6181.52,-2134.96"/>
<polygon fill="black" stroke="black" points="6181.85,-2138.46 6191.8,-2134.82 6181.75,-2131.46 6181.85,-2138.46"/>
</g>
<!-- tg_client._process_chop_queue -->
<g id="node120" class="node">
<title>tg_client._process_chop_queue</title>
<g id="a_node120"><a xlink:title="Check queued posts and chop cooled down ones.">
<polygon fill="none" stroke="black" points="7504.5,-1884.14 7141.5,-1884.14 7141.5,-1848.14 7504.5,-1848.14 7504.5,-1884.14"/>
<text text-anchor="middle" x="7323" y="-1860.44" font-family="Times,serif" font-size="22.12">tg_client._process_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue -->
<g id="edge163" class="edge">
<title>tg_client._chop_worker&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M6443.23,-2141.03C6573.86,-2146.45 6767.37,-2145.5 6821,-2097.14 6889.37,-2035.48 6788.21,-1954.33 6857,-1893.14 6897.21,-1857.37 7021.29,-1851.49 7131.18,-1854.1"/>
<polygon fill="black" stroke="black" points="7131.33,-1857.6 7141.42,-1854.37 7131.52,-1850.61 7131.33,-1857.6"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;caption_io.has_caption -->
<g id="edge161" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7504.5,-1853.17C7617.59,-1849.34 7749.19,-1854.19 7789,-1893.14 7860.71,-1963.3 7760.22,-2266.54 7825,-2343.14 7937.7,-2476.41 8159.21,-2490.23 8281.95,-2486.53"/>
<polygon fill="black" stroke="black" points="8282.19,-2490.02 8292.06,-2486.18 8281.95,-2483.02 8282.19,-2490.02"/>
</g>
<!-- tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop -->
<g id="edge162" class="edge">
<title>tg_client._process_chop_queue&#45;&gt;tg_client._schedule_chop</title>
<path fill="none" stroke="black" d="M7464.03,-1884.15C7559.9,-1890.38 7687.53,-1886.31 7789,-1839.14 7810.1,-1829.33 7803.91,-1810.95 7825,-1801.14 7953.53,-1741.32 8117.99,-1740.57 8232.27,-1750.23"/>
<polygon fill="black" stroke="black" points="8232.21,-1753.73 8242.48,-1751.13 8232.83,-1746.76 8232.21,-1753.73"/>
</g>
<!-- tg_client._flush_chop_queue -->
<g id="node121" class="node">
<title>tg_client._flush_chop_queue</title>
<g id="a_node121"><a xlink:title="Run the chop worker until the queue is empty and cancel it.">
<polygon fill="none" stroke="black" points="2204,-2092.64 1768,-2092.64 1768,-2051.64 2204,-2051.64 2204,-2092.64"/>
<text text-anchor="middle" x="1986" y="-2064.89" font-family="Times,serif" font-size="29.68">tg_client._flush_chop_queue</text>
</a>
</g>
</g>
<!-- tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue -->
<g id="edge164" class="edge">
<title>tg_client._flush_chop_queue&#45;&gt;tg_client._process_chop_queue</title>
<path fill="none" stroke="black" d="M2204.14,-2075.27C2448.73,-2078.52 2858.15,-2083.14 3210.5,-2083.14 3210.5,-2083.14 3210.5,-2083.14 5503.5,-2083.14 5650.05,-2083.14 6706.36,-2113.42 6821,-2022.14 6867.57,-1985.06 6810.65,-1930.49 6857,-1893.14 6898.75,-1859.49 7022.02,-1853.46 7131.15,-1855.46"/>
<polygon fill="black" stroke="black" points="7131.26,-1858.96 7141.33,-1855.67 7131.4,-1851.96 7131.26,-1858.96"/>
</g>
<!-- tg_client._get_id_date -->
<g id="node122" class="node">
<title>tg_client._get_id_date</title>
<g id="a_node122"><a xlink:title="Return the stored date for ``msg_id`` in ``chat`` if available.">
<polygon fill="none" stroke="black" points="7495,-1515.64 7151,-1515.64 7151,-1474.64 7495,-1474.64 7495,-1515.64"/>
<text text-anchor="middle" x="7323" y="-1487.89" font-family="Times,serif" font-size="29.68">tg_client._get_id_date</text>
</a>
</g>
</g>
<!-- tg_client._get_id_date&#45;&gt;notes_utils.read_text -->
<g id="edge165" class="edge">
<title>tg_client._get_id_date&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7495.13,-1507.06C7967.05,-1539.94 9278.29,-1631.31 9676.4,-1659.05"/>
<polygon fill="black" stroke="black" points="9676.27,-1662.55 9686.49,-1659.75 9676.76,-1655.56 9676.27,-1662.55"/>
</g>
<!-- tg_client._get_id_date&#45;&gt;post_io.raw_post_path -->
<g id="edge166" class="edge">
<title>tg_client._get_id_date&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7441.79,-1474.63C7549.45,-1463.38 7704.4,-1467.5 7789,-1563.14 7846.81,-1628.48 7764.14,-3070.63 7825,-3133.14 7886.38,-3196.18 8145.98,-3181.83 8283.19,-3169.3"/>
<polygon fill="black" stroke="black" points="8283.62,-3172.77 8293.25,-3168.36 8282.97,-3165.8 8283.62,-3172.77"/>
</g>
<!-- tg_client._load_progress -->
<g id="node123" class="node">
<title>tg_client._load_progress</title>
<g id="a_node123"><a xlink:title="Return saved resume timestamp for ``chat`` if available.">
<polygon fill="none" stroke="black" points="4223,-880.14 3893,-880.14 3893,-844.14 4223,-844.14 4223,-880.14"/>
<text text-anchor="middle" x="4058" y="-855.98" font-family="Times,serif" font-size="25.20">tg_client._load_progress</text>
</a>
</g>
</g>
<!-- tg_client._load_progress&#45;&gt;notes_utils.read_text -->
<g id="edge167" class="edge">
<title>tg_client._load_progress&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M4135.9,-844.13C4350.57,-795.5 4975.13,-665.14 5501.5,-665.14 5501.5,-665.14 5501.5,-665.14 8371,-665.14 8631.02,-665.14 9346.68,-506.37 9541,-679.14 9587.39,-720.38 9563.95,-895.45 9577,-956.14 9635.34,-1227.49 9747.86,-1545.02 9782.26,-1639.37"/>
<polygon fill="black" stroke="black" points="9779.07,-1640.84 9785.79,-1649.03 9785.65,-1638.43 9779.07,-1640.84"/>
</g>
<!-- tg_client._save_progress -->
<g id="node124" class="node">
<title>tg_client._save_progress</title>
<g id="a_node124"><a xlink:title="Persist resume timestamp for ``chat`` to ``STATE_DIR``.">
<polygon fill="none" stroke="black" points="2721,-2299.14 2492,-2299.14 2492,-2263.14 2721,-2263.14 2721,-2299.14"/>
<text text-anchor="middle" x="2606.5" y="-2276.97" font-family="Times,serif" font-size="17.08">tg_client._save_progress</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id -->
<g id="node125" class="node">
<title>tg_client.get_first_id</title>
<g id="a_node125"><a xlink:title="Return the smallest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="3345,-2288.14 3078,-2288.14 3078,-2252.14 3345,-2252.14 3345,-2288.14"/>
<text text-anchor="middle" x="3211.5" y="-2264.26" font-family="Times,serif" font-size="24.22">tg_client.get_first_id</text>
</a>
</g>
</g>
<!-- tg_client.get_first_id&#45;&gt;post_io.raw_post_path -->
<g id="edge168" class="edge">
<title>tg_client.get_first_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M3241.73,-2288.16C3404.47,-2386.72 4217.79,-2856.14 4945.5,-2856.14 4945.5,-2856.14 4945.5,-2856.14 6318.5,-2856.14 6482.23,-2856.14 7665.91,-2843.18 7789,-2951.14 7850.99,-3005.51 7762.61,-3079.23 7825,-3133.14 7891.34,-3190.45 8146.96,-3178.91 8282.88,-3168.18"/>
<polygon fill="black" stroke="black" points="8283.56,-3171.64 8293.25,-3167.35 8283,-3164.66 8283.56,-3171.64"/>
</g>
<!-- tg_client.get_last_id -->
<g id="node126" class="node">
<title>tg_client.get_last_id</title>
<g id="a_node126"><a xlink:title="Return the highest saved message id for ``chat``.">
<polygon fill="none" stroke="black" points="2116.5,-3130.14 1855.5,-3130.14 1855.5,-3094.14 2116.5,-3094.14 2116.5,-3130.14"/>
<text text-anchor="middle" x="1986" y="-3106.26" font-family="Times,serif" font-size="24.22">tg_client.get_last_id</text>
</a>
</g>
</g>
<!-- tg_client.get_last_id&#45;&gt;post_io.raw_post_path -->
<g id="edge169" class="edge">
<title>tg_client.get_last_id&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2116.88,-3119.53C2340.27,-3131.58 2811.72,-3154.14 3210.5,-3154.14 3210.5,-3154.14 3210.5,-3154.14 6318.5,-3154.14 7080.25,-3154.14 8001.18,-3158.33 8282.97,-3159.71"/>
<polygon fill="black" stroke="black" points="8283.11,-3163.21 8293.13,-3159.76 8283.14,-3156.21 8283.11,-3163.21"/>
</g>
<!-- tg_client._save_message -->
<g id="node127" class="node">
<title>tg_client._save_message</title>
<g id="a_node127"><a xlink:title="Write ``msg`` to disk with metadata and any media references.&#10;&#10;Returns the path of the stored message or ``None`` when skipped.">
<polygon fill="none" stroke="black" points="4666,-2270.64 3450,-2270.64 3450,-2155.64 4666,-2155.64 4666,-2270.64"/>
<text text-anchor="middle" x="4058" y="-2189.02" font-family="Times,serif" font-size="97.02">tg_client._save_message</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.get_contact -->
<g id="edge170" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.get_contact</title>
<path fill="none" stroke="black" d="M4648.92,-2155.6C4654.8,-2150.38 4660.5,-2144.89 4666,-2139.14 4738.98,-2062.76 4626.33,-1738.84 4702,-1665.14 4743.84,-1624.39 5168.65,-1641.58 5227,-1639.14 5986.71,-1607.39 6902.32,-1594.82 7212.91,-1591.28"/>
<polygon fill="black" stroke="black" points="7213.3,-1594.77 7223.26,-1591.16 7213.22,-1587.77 7213.3,-1594.77"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.read_post -->
<g id="edge171" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M4064.48,-2270.72C4089.2,-2495.93 4211.58,-3323.24 4702,-3701.14 5248.42,-4122.18 7106.75,-4129.04 7789,-4027.14 7805.55,-4024.67 7808.58,-4019.32 7825,-4016.14 7907.28,-4000.2 7997.6,-3989.66 8080.61,-3982.7"/>
<polygon fill="black" stroke="black" points="8081.01,-3986.18 8090.69,-3981.87 8080.44,-3979.2 8081.01,-3986.18"/>
</g>
<!-- tg_client._save_message&#45;&gt;post_io.raw_post_path -->
<g id="edge172" class="edge">
<title>tg_client._save_message&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M4145,-2270.73C4362.28,-2410.48 4954.95,-2756.14 5501.5,-2756.14 5501.5,-2756.14 5501.5,-2756.14 6318.5,-2756.14 6400.2,-2756.14 7728.76,-2719.94 7789,-2775.14 7847.95,-2829.15 7767.05,-3078.05 7825,-3133.14 7888.73,-3193.72 8146.95,-3180.53 8283.46,-3168.78"/>
<polygon fill="black" stroke="black" points="8283.81,-3172.26 8293.47,-3167.9 8283.2,-3165.29 8283.81,-3172.26"/>
</g>
<!-- tg_client._save_message&#45;&gt;moderation.should_skip_user -->
<g id="edge173" class="edge">
<title>tg_client._save_message&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M4073.81,-2270.66C4131,-2486.43 4351.87,-3263.53 4702,-3818.14 4885.68,-4109.1 4950.76,-4181.98 5227,-4387.14 5459.83,-4560.05 5534.35,-4595.32 5814,-4672.14 6462.13,-4850.18 6649.87,-4786.14 7322,-4786.14 7322,-4786.14 7322,-4786.14 8371,-4786.14 8844.74,-4786.14 9407.3,-4785.58 9659.09,-4785.29"/>
<polygon fill="black" stroke="black" points="9659.39,-4788.79 9669.38,-4785.28 9659.38,-4781.79 9659.39,-4788.79"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._mark_activity -->
<g id="edge174" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M4648.95,-2155.63C4654.82,-2150.4 4660.51,-2144.91 4666,-2139.14 4743.09,-2058.11 4625.29,-1718.52 4702,-1637.14 4737.36,-1599.62 4793.65,-1590.41 4843.2,-1591.13"/>
<polygon fill="black" stroke="black" points="4843.24,-1594.63 4853.33,-1591.41 4843.43,-1587.63 4843.24,-1594.63"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._progress_logger -->
<g id="edge175" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._progress_logger</title>
<path fill="none" stroke="black" d="M4666.22,-2213.14C4696.34,-2213.14 4725.28,-2213.14 4752.37,-2213.14"/>
<polygon fill="black" stroke="black" points="4752.66,-2216.64 4762.66,-2213.14 4752.66,-2209.64 4752.66,-2216.64"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._write_md -->
<g id="edge176" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._write_md</title>
<path fill="none" stroke="black" d="M4648.85,-2155.53C4654.75,-2150.33 4660.48,-2144.87 4666,-2139.14 4731.92,-2070.73 4633.97,-1779.45 4702,-1713.14 4752.9,-1663.52 5232.6,-1663.18 5423.6,-1665.05"/>
<polygon fill="black" stroke="black" points="5423.81,-1668.56 5433.84,-1665.16 5423.88,-1661.56 5423.81,-1668.56"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._find_group_path -->
<g id="edge177" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._find_group_path</title>
<path fill="none" stroke="black" d="M4101.74,-2270.69C4194.88,-2390.73 4429.78,-2665.35 4702,-2770.14 4968.29,-2872.64 5831.86,-2833.63 6174.51,-2813.35"/>
<polygon fill="black" stroke="black" points="6174.72,-2816.84 6184.5,-2812.75 6174.31,-2809.85 6174.72,-2816.84"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._should_skip_media -->
<g id="edge178" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._should_skip_media</title>
<path fill="none" stroke="black" d="M4648.24,-2155.49C4654.35,-2150.31 4660.27,-2144.86 4666,-2139.14 4758.82,-2046.41 4610.37,-1940.04 4702,-1846.14 4704.86,-1843.21 4707.84,-1840.45 4710.94,-1837.85"/>
<polygon fill="black" stroke="black" points="4713.09,-1840.61 4718.86,-1831.72 4708.81,-1835.07 4713.09,-1840.61"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._allowed_topic -->
<g id="edge179" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._allowed_topic</title>
<path fill="none" stroke="black" d="M4647.81,-2155.61C4654.07,-2150.39 4660.13,-2144.91 4666,-2139.14 4748.87,-2057.65 4615.89,-1958.19 4702,-1880.14 4744.07,-1842.01 5058.47,-1839.53 5280.21,-1842.72"/>
<polygon fill="black" stroke="black" points="5280.32,-1846.22 5290.37,-1842.87 5280.42,-1839.22 5280.32,-1846.22"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._extract_author -->
<g id="edge180" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._extract_author</title>
<path fill="none" stroke="black" d="M4648.73,-2155.41C4654.67,-2150.25 4660.43,-2144.83 4666,-2139.14 4722.23,-2081.68 4644.11,-1834.93 4702,-1779.14 4789.27,-1695.03 5494.87,-1700.8 5943.93,-1713.42"/>
<polygon fill="black" stroke="black" points="5944.07,-1716.93 5954.16,-1713.71 5944.26,-1709.93 5944.07,-1716.93"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._enqueue_chop -->
<g id="edge181" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._enqueue_chop</title>
<path fill="none" stroke="black" d="M4238.66,-2270.69C4427.37,-2331.15 4716.18,-2423.67 4859.15,-2469.47"/>
<polygon fill="black" stroke="black" points="4858.18,-2472.84 4868.77,-2472.56 4860.32,-2466.17 4858.18,-2472.84"/>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_message -->
<g id="edge182" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3908.09,-2270.74C3927.06,-2281.26 3977.04,-2288.64 4058,-2288.64 4128.21,-2288.64 4175.12,-2283.09 4198.71,-2274.76"/>
<polygon fill="black" stroke="black" points="4200.15,-2277.95 4207.91,-2270.74 4197.35,-2271.54 4200.15,-2277.95"/>
</g>
<!-- tg_client._save_media -->
<g id="node128" class="node">
<title>tg_client._save_media</title>
<g id="a_node128"><a xlink:title="Store ``data`` and return relative file path.">
<polygon fill="none" stroke="black" points="5743.5,-2423.14 5261.5,-2423.14 5261.5,-2369.14 5743.5,-2369.14 5743.5,-2423.14"/>
<text text-anchor="middle" x="5502.5" y="-2385.54" font-family="Times,serif" font-size="42.00">tg_client._save_media</text>
</a>
</g>
</g>
<!-- tg_client._save_message&#45;&gt;tg_client._save_media -->
<g id="edge183" class="edge">
<title>tg_client._save_message&#45;&gt;tg_client._save_media</title>
<path fill="none" stroke="black" d="M4512.45,-2270.66C4767.64,-2303.04 5074.97,-2342.03 5278.61,-2367.86"/>
<polygon fill="black" stroke="black" points="5278.17,-2371.33 5288.53,-2369.12 5279.05,-2364.39 5278.17,-2371.33"/>
</g>
<!-- tg_client._save_media&#45;&gt;image_io.write_image_meta -->
<g id="edge184" class="edge">
<title>tg_client._save_media&#45;&gt;image_io.write_image_meta</title>
<path fill="none" stroke="black" d="M5581.89,-2369.07C5643.88,-2343.76 5728.03,-2300.03 5778,-2235.14 5814.32,-2187.98 5770.77,-2147.06 5814,-2106.14 5914.37,-2011.11 6076.95,-1990.4 6189.88,-1988.89"/>
<polygon fill="black" stroke="black" points="6190,-1992.39 6199.97,-1988.8 6189.94,-1985.39 6190,-1992.39"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.has_caption -->
<g id="edge186" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M5743.78,-2407.18C5767.5,-2408.21 5791.22,-2409.21 5814,-2410.14 6277.48,-2429.03 6393.33,-2434.79 6857,-2448.14 7399.1,-2463.75 8050.74,-2475 8282.24,-2478.76"/>
<polygon fill="black" stroke="black" points="8282.23,-2482.26 8292.29,-2478.93 8282.34,-2475.27 8282.23,-2482.26"/>
</g>
<!-- tg_client._save_media&#45;&gt;caption_io.caption_json_path -->
<g id="edge185" class="edge">
<title>tg_client._save_media&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M5743.7,-2389.53C6008.09,-2384.39 6445.47,-2382.18 6821,-2410.14 6837.11,-2411.34 6840.89,-2413.96 6857,-2415.14 7310.13,-2448.27 8737.74,-2438.6 9139.1,-2435.13"/>
<polygon fill="black" stroke="black" points="9139.28,-2438.63 9149.25,-2435.04 9139.22,-2431.63 9139.28,-2438.63"/>
</g>
<!-- tg_client._save_media&#45;&gt;tg_client._schedule_caption -->
<g id="edge187" class="edge">
<title>tg_client._save_media&#45;&gt;tg_client._schedule_caption</title>
<path fill="none" stroke="black" d="M5579.27,-2423.23C5641.47,-2444.21 5732.29,-2472.01 5814,-2486.14 6306.61,-2571.32 6901.67,-2579.55 7173.52,-2578.19"/>
<polygon fill="black" stroke="black" points="7173.87,-2581.69 7183.85,-2578.14 7173.83,-2574.69 7173.87,-2581.69"/>
</g>
<!-- tg_client._save_bounded -->
<g id="node129" class="node">
<title>tg_client._save_bounded</title>
<g id="a_node129"><a xlink:title="Run ``_save_message`` under the global semaphore and return path.">
<polygon fill="none" stroke="black" points="3414,-2234.14 3009,-2234.14 3009,-2192.14 3414,-2192.14 3414,-2234.14"/>
<text text-anchor="middle" x="3211.5" y="-2205.05" font-family="Times,serif" font-size="31.36">tg_client._save_bounded</text>
</a>
</g>
</g>
<!-- tg_client._save_bounded&#45;&gt;tg_client._save_message -->
<g id="edge188" class="edge">
<title>tg_client._save_bounded&#45;&gt;tg_client._save_message</title>
<path fill="none" stroke="black" d="M3414.24,-2213.14C3422.57,-2213.14 3431.06,-2213.14 3439.69,-2213.14"/>
<polygon fill="black" stroke="black" points="3439.88,-2216.64 3449.88,-2213.14 3439.88,-2209.64 3439.88,-2216.64"/>
</g>
<!-- tg_client._remove_local_message -->
<g id="node130" class="node">
<title>tg_client._remove_local_message</title>
<g id="a_node130"><a xlink:title="Delete ``path`` and related media if the post no longer exists.">
<polygon fill="none" stroke="black" points="7608,-3646.14 7038,-3646.14 7038,-3602.14 7608,-3602.14 7608,-3646.14"/>
<text text-anchor="middle" x="7323" y="-3615.82" font-family="Times,serif" font-size="32.90">tg_client._remove_local_message</text>
</a>
</g>
</g>
<!-- tg_client._remove_local_message&#45;&gt;post_io.read_post -->
<g id="edge189" class="edge">
<title>tg_client._remove_local_message&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7608.15,-3636.65C7675.31,-3652.74 7741.19,-3681.43 7789,-3731.14 7848.58,-3793.08 7761.29,-3863.45 7825,-3921.14 7908.66,-3996.88 8032.14,-4012.57 8140.31,-4007.67"/>
<polygon fill="black" stroke="black" points="8140.59,-4011.16 8150.4,-4007.15 8140.23,-4004.17 8140.59,-4011.16"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path -->
<g id="edge190" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7449.91,-3646.16C7549.4,-3656.79 7687.87,-3655.93 7789,-3593.14 7816.07,-3576.33 7797.8,-3547.74 7825,-3531.14 7928.51,-3467.95 8829.77,-3561.41 8915,-3475.14 8986.89,-3402.36 8892.42,-2639 8951,-2555.14 8993.84,-2493.81 9073.73,-2463.5 9139.43,-2448.56"/>
<polygon fill="black" stroke="black" points="9140.41,-2451.93 9149.43,-2446.38 9138.92,-2445.09 9140.41,-2451.93"/>
</g>
<!-- tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path -->
<g id="edge191" class="edge">
<title>tg_client._remove_local_message&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7549.63,-3646.16C7943.18,-3679.09 8730.87,-3718.84 8915,-3531.14 8986.48,-3458.27 8881.24,-2687.66 8951,-2613.14 8999.7,-2561.12 9082.03,-2556.41 9147.21,-2562.98"/>
<polygon fill="black" stroke="black" points="9147.19,-2566.5 9157.51,-2564.13 9147.96,-2559.55 9147.19,-2566.5"/>
</g>
<!-- tg_client._download_messages -->
<g id="node131" class="node">
<title>tg_client._download_messages</title>
<g id="a_node131"><a xlink:title="Save ``messages`` with a progress bar and return count saved.">
<polygon fill="none" stroke="black" points="2961.5,-2244.64 2251.5,-2244.64 2251.5,-2187.64 2961.5,-2187.64 2961.5,-2244.64"/>
<text text-anchor="middle" x="2606.5" y="-2204.8" font-family="Times,serif" font-size="44.80">tg_client._download_messages</text>
</a>
</g>
</g>
<!-- tg_client._download_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge192" class="edge">
<title>tg_client._download_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2961.76,-2214.38C2974.17,-2214.31 2986.47,-2214.25 2998.55,-2214.19"/>
<polygon fill="black" stroke="black" points="2998.67,-2217.69 3008.65,-2214.14 2998.63,-2210.69 2998.67,-2217.69"/>
</g>
<!-- tg_client.ensure_chat_access -->
<g id="node132" class="node">
<title>tg_client.ensure_chat_access</title>
<g id="a_node132"><a xlink:title="Join chats listed in ``CHATS`` if not already joined.">
<polygon fill="none" stroke="black" points="2777.5,-1911.14 2435.5,-1911.14 2435.5,-1875.14 2777.5,-1875.14 2777.5,-1911.14"/>
<text text-anchor="middle" x="2606.5" y="-1887.44" font-family="Times,serif" font-size="22.12">tg_client.ensure_chat_access</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages -->
<g id="node133" class="node">
<title>tg_client.refetch_messages</title>
<g id="a_node133"><a xlink:title="Re&#45;fetch posts that failed parsing or are empty.">
<polygon fill="none" stroke="black" points="2973,-3259.64 2240,-3259.64 2240,-3194.64 2973,-3194.64 2973,-3259.64"/>
<text text-anchor="middle" x="2606.5" y="-3214.09" font-family="Times,serif" font-size="51.94">tg_client.refetch_messages</text>
</a>
</g>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.load_json -->
<g id="edge193" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M2647.25,-3194.28C2778.93,-3083.16 3204.42,-2705.44 3414,-2297.14 3445.5,-2235.76 3403.81,-2197.38 3450,-2146.14 3833.5,-1720.67 4279.12,-2141.54 4666,-1719.14 4709.68,-1671.44 4651.06,-1617.99 4702,-1578.14 4769.54,-1525.3 7703.52,-1556.39 7789,-1563.14 8294.16,-1603.04 8431.03,-1591.97 8915,-1742.14 9025.37,-1776.38 9145.75,-1841.38 9206.01,-1876.03"/>
<polygon fill="black" stroke="black" points="9204.4,-1879.14 9214.81,-1881.12 9207.91,-1873.08 9204.4,-1879.14"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;notes_utils.write_json -->
<g id="edge194" class="edge">
<title>tg_client.refetch_messages&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M2622.83,-3259.65C2669.49,-3356.04 2818.34,-3644.88 3009,-3828.14 3174.69,-3987.39 3233.32,-4021.56 3450,-4098.14 3706.95,-4188.94 4480.5,-4057.5 4666,-4257.14 4762.21,-4360.68 4600.72,-4793.55 4702,-4892.14 4824.9,-5011.77 7617.58,-4937.69 7789,-4932.14 8039.62,-4924.02 8697.33,-4983.61 8915,-4859.14 8939.72,-4845 8929.75,-4825.09 8951,-4806.14 9020.84,-4743.85 9120.4,-4698.61 9183.85,-4673.86"/>
<polygon fill="black" stroke="black" points="9185.26,-4677.07 9193.33,-4670.21 9182.74,-4670.54 9185.26,-4677.07"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.read_post -->
<g id="edge195" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M2632.49,-3259.87C2761.94,-3425.35 3376.47,-4162.14 4057,-4162.14 4057,-4162.14 4057,-4162.14 6318.5,-4162.14 6482.22,-4162.14 7646.81,-4150.29 7789,-4069.14 7813.73,-4055.02 7800.43,-4030.54 7825,-4016.14 7901.09,-3971.54 7993.73,-3953.15 8080.83,-3947.81"/>
<polygon fill="black" stroke="black" points="8081.09,-3951.3 8090.88,-3947.25 8080.7,-3944.31 8081.09,-3951.3"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;post_io.raw_post_path -->
<g id="edge196" class="edge">
<title>tg_client.refetch_messages&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M2973.2,-3212.23C2985.27,-3211.84 2997.23,-3211.48 3009,-3211.14 3474.66,-3197.64 3591.15,-3192.14 4057,-3192.14 4057,-3192.14 4057,-3192.14 6318.5,-3192.14 7080.34,-3192.14 8001.21,-3169.78 8282.98,-3162.44"/>
<polygon fill="black" stroke="black" points="8283.23,-3165.94 8293.13,-3162.18 8283.04,-3158.94 8283.23,-3165.94"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._get_message_path -->
<g id="edge197" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._get_message_path</title>
<path fill="none" stroke="black" d="M2973.04,-3233.81C3011.6,-3234.51 3048.68,-3235.19 3081.62,-3235.79"/>
<polygon fill="black" stroke="black" points="3081.65,-3239.29 3091.71,-3235.97 3081.78,-3232.29 3081.65,-3239.29"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._save_bounded -->
<g id="edge198" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M2620.33,-3194.43C2686.66,-3025.53 2988.34,-2259.36 3009,-2243.14 3010.39,-2242.05 3011.8,-2240.99 3013.23,-2239.96"/>
<polygon fill="black" stroke="black" points="3015.22,-2242.84 3021.64,-2234.4 3011.36,-2237 3015.22,-2242.84"/>
</g>
<!-- tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message -->
<g id="edge199" class="edge">
<title>tg_client.refetch_messages&#45;&gt;tg_client._remove_local_message</title>
<path fill="none" stroke="black" d="M2690.96,-3259.79C2910.8,-3342.75 3525.5,-3555.14 4057,-3555.14 4057,-3555.14 4057,-3555.14 5503.5,-3555.14 6041.48,-3555.14 6668.35,-3585.67 7027.83,-3606.11"/>
<polygon fill="black" stroke="black" points="7027.67,-3609.61 7037.86,-3606.68 7028.07,-3602.62 7027.67,-3609.61"/>
</g>
<!-- tg_client.fetch_missing -->
<g id="node134" class="node">
<title>tg_client.fetch_missing</title>
<g id="a_node134"><a xlink:title="Pull new messages and back&#45;fill history until fully synced.">
<polygon fill="none" stroke="black" points="1732,-2292.14 1019,-2292.14 1019,-2218.14 1732,-2218.14 1732,-2292.14"/>
<text text-anchor="middle" x="1375.5" y="-2240.31" font-family="Times,serif" font-size="59.78">tg_client.fetch_missing</text>
</a>
</g>
</g>
<!-- tg_client.fetch_missing&#45;&gt;post_io.raw_post_path -->
<g id="edge200" class="edge">
<title>tg_client.fetch_missing&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M1420.99,-2292.23C1607.06,-2445.84 2326.12,-3024.14 2605.5,-3024.14 2605.5,-3024.14 2605.5,-3024.14 6318.5,-3024.14 6400.2,-3024.14 7721.64,-2996.9 7789,-3043.14 7824.52,-3067.52 7789.94,-3108.11 7825,-3133.14 7896.21,-3183.97 8148.73,-3175.42 8283.22,-3166.78"/>
<polygon fill="black" stroke="black" points="8283.74,-3170.25 8293.49,-3166.1 8283.28,-3163.27 8283.74,-3170.25"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._get_id_date -->
<g id="edge201" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._get_id_date</title>
<path fill="none" stroke="black" d="M1624.77,-2218.11C1939.67,-2169.79 2498.82,-2079.49 2973,-1979.14 3748.11,-1815.1 3916.66,-1649.81 4702,-1545.14 5611.18,-1423.96 6713.32,-1462.64 7140.59,-1484.54"/>
<polygon fill="black" stroke="black" points="7140.7,-1488.05 7150.87,-1485.07 7141.06,-1481.06 7140.7,-1488.05"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._load_progress -->
<g id="edge202" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._load_progress</title>
<path fill="none" stroke="black" d="M1428.24,-2218.09C1500.44,-2168.56 1637.28,-2082.33 1768,-2042.14 2025.26,-1963.04 2749.58,-2070.22 2973,-1920.14 3346.84,-1669.01 3097.64,-1306.6 3450,-1026.14 3573.61,-927.75 3751.46,-888.19 3882.72,-872.39"/>
<polygon fill="black" stroke="black" points="3883.36,-875.84 3892.88,-871.2 3882.54,-868.89 3883.36,-875.84"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._save_progress -->
<g id="edge203" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._save_progress</title>
<path fill="none" stroke="black" d="M1732.39,-2262.67C1984.51,-2268 2307.68,-2274.84 2481.52,-2278.51"/>
<polygon fill="black" stroke="black" points="2481.66,-2282.02 2491.73,-2278.73 2481.81,-2275.02 2481.66,-2282.02"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_first_id -->
<g id="edge204" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_first_id</title>
<path fill="none" stroke="black" d="M1732.04,-2279.87C1744.17,-2280.65 1756.19,-2281.4 1768,-2282.14 2302.65,-2315.3 2439.15,-2352.32 2973,-2308.14 2989.17,-2306.8 2992.99,-2304.74 3009,-2302.14 3033.85,-2298.09 3060.43,-2293.83 3085.86,-2289.78"/>
<polygon fill="black" stroke="black" points="3086.6,-2293.21 3095.92,-2288.18 3085.5,-2286.29 3086.6,-2293.21"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client.get_last_id -->
<g id="edge205" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client.get_last_id</title>
<path fill="none" stroke="black" d="M1384.47,-2292.42C1413.03,-2417.01 1521.89,-2823.19 1768,-3038.14 1797.03,-3063.49 1835.16,-3080.26 1871.34,-3091.3"/>
<polygon fill="black" stroke="black" points="1870.4,-3094.67 1880.98,-3094.12 1872.37,-3087.95 1870.4,-3094.67"/>
</g>
<!-- tg_client.fetch_missing&#45;&gt;tg_client._download_messages -->
<g id="edge206" class="edge">
<title>tg_client.fetch_missing&#45;&gt;tg_client._download_messages</title>
<path fill="none" stroke="black" d="M1732.39,-2243.84C1892.17,-2238.77 2080.49,-2232.8 2241.25,-2227.7"/>
<polygon fill="black" stroke="black" points="2241.43,-2231.19 2251.31,-2227.38 2241.21,-2224.2 2241.43,-2231.19"/>
</g>
<!-- tg_client.remove_deleted -->
<g id="node135" class="node">
<title>tg_client.remove_deleted</title>
<g id="a_node135"><a xlink:title="Delete locally stored messages removed from Telegram recently.">
<polygon fill="none" stroke="black" points="7639.5,-3319.64 7006.5,-3319.64 7006.5,-3258.64 7639.5,-3258.64 7639.5,-3319.64"/>
<text text-anchor="middle" x="7323" y="-3276.89" font-family="Times,serif" font-size="48.44">tg_client.remove_deleted</text>
</a>
</g>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.read_post -->
<g id="edge207" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7458.01,-3258.61C7563.18,-3243.33 7705.34,-3243.36 7789,-3329.14 7881.02,-3423.49 7733.08,-3826.68 7825,-3921.14 7914.96,-4013.58 8062.95,-4021.33 8181.88,-4008.29"/>
<polygon fill="black" stroke="black" points="8182.3,-4011.76 8191.83,-4007.14 8181.5,-4004.81 8182.3,-4011.76"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;post_io.raw_post_path -->
<g id="edge208" class="edge">
<title>tg_client.remove_deleted&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7639.62,-3292.82C7691.67,-3283.96 7743.44,-3268.81 7789,-3244.14 7811.52,-3231.94 7802.33,-3211.05 7825,-3199.14 7971.25,-3122.29 8170.85,-3132.08 8283.14,-3146.11"/>
<polygon fill="black" stroke="black" points="8282.7,-3149.58 8293.06,-3147.39 8283.59,-3142.64 8282.7,-3149.58"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path -->
<g id="edge209" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7639.66,-3273.42C7690.14,-3266.67 7741.4,-3257.25 7789,-3244.14 7806.06,-3239.44 7807.81,-3231.33 7825,-3227.14 7883.87,-3212.8 8871.72,-3229.55 8915,-3187.14 8965.24,-3137.91 8910.21,-2612.44 8951,-2555.14 8994.31,-2494.3 9073.97,-2463.97 9139.45,-2448.89"/>
<polygon fill="black" stroke="black" points="9140.41,-2452.27 9149.42,-2446.69 9138.9,-2445.43 9140.41,-2452.27"/>
</g>
<!-- tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path -->
<g id="edge210" class="edge">
<title>tg_client.remove_deleted&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7639.75,-3299.06C8077.78,-3309.51 8826.31,-3314.11 8915,-3227.14 9012.59,-3131.44 8856.63,-2712 8951,-2613.14 8999.61,-2562.22 9080.53,-2556.96 9145.18,-2563.06"/>
<polygon fill="black" stroke="black" points="9145.1,-2566.57 9155.41,-2564.13 9145.83,-2559.6 9145.1,-2566.57"/>
</g>
<!-- tg_client.main -->
<g id="node136" class="node">
<title>tg_client.main</title>
<g id="a_node136"><a xlink:title="Synchronize configured chats and optional live updates.">
<polygon fill="none" stroke="black" points="934.5,-2148.14 366.5,-2148.14 366.5,-2056.14 934.5,-2056.14 934.5,-2148.14"/>
<text text-anchor="middle" x="650.5" y="-2083.1" font-family="Times,serif" font-size="76.30">tg_client.main</text>
</a>
</g>
</g>
<!-- tg_client.main&#45;&gt;tg_client._mark_activity -->
<g id="edge211" class="edge">
<title>tg_client.main&#45;&gt;tg_client._mark_activity</title>
<path fill="none" stroke="black" d="M934.74,-2062.81C1204.25,-2028.83 1621.44,-1985.14 1985,-1985.14 1985,-1985.14 1985,-1985.14 3212.5,-1985.14 3892.63,-1985.14 4032.25,-1752.54 4702,-1634.14 4748.09,-1625.99 4799.5,-1619.49 4843.16,-1614.73"/>
<polygon fill="black" stroke="black" points="4843.65,-1618.2 4853.22,-1613.65 4842.9,-1611.24 4843.65,-1618.2"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._heartbeat -->
<g id="edge212" class="edge">
<title>tg_client.main&#45;&gt;tg_client._heartbeat</title>
<path fill="none" stroke="black" d="M757.94,-2056.11C830.21,-2026.89 928.69,-1990.96 1019,-1971.14 1094.72,-1954.52 1181.33,-1946.5 1250.1,-1942.64"/>
<polygon fill="black" stroke="black" points="1250.31,-1946.14 1260.11,-1942.1 1249.94,-1939.15 1250.31,-1946.14"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._flush_chop_queue -->
<g id="edge213" class="edge">
<title>tg_client.main&#45;&gt;tg_client._flush_chop_queue</title>
<path fill="none" stroke="black" d="M934.71,-2095.77C1180.04,-2090.25 1530.35,-2082.37 1757.73,-2077.25"/>
<polygon fill="black" stroke="black" points="1757.87,-2080.75 1767.78,-2077.02 1757.71,-2073.75 1757.87,-2080.75"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client._save_bounded -->
<g id="edge214" class="edge">
<title>tg_client.main&#45;&gt;tg_client._save_bounded</title>
<path fill="none" stroke="black" d="M934.9,-2101.06C1372.88,-2101.74 2240.26,-2112.37 2973,-2178.14 3006.63,-2181.16 3042.75,-2185.77 3076.43,-2190.66"/>
<polygon fill="black" stroke="black" points="3075.92,-2194.13 3086.32,-2192.12 3076.94,-2187.2 3075.92,-2194.13"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.ensure_chat_access -->
<g id="edge215" class="edge">
<title>tg_client.main&#45;&gt;tg_client.ensure_chat_access</title>
<path fill="none" stroke="black" d="M717.44,-2055.93C788.2,-2009.34 905.76,-1940.4 1019,-1912.14 1540.88,-1781.89 2189.7,-1839.29 2468.14,-1873.85"/>
<polygon fill="black" stroke="black" points="2467.93,-1877.35 2478.29,-1875.12 2468.8,-1870.41 2467.93,-1877.35"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.refetch_messages -->
<g id="edge216" class="edge">
<title>tg_client.main&#45;&gt;tg_client.refetch_messages</title>
<path fill="none" stroke="black" d="M683.5,-2148.42C803,-2316.98 1243.27,-2900.65 1768,-3139.14 1910.47,-3203.89 2080.22,-3229.88 2229.53,-3238.2"/>
<polygon fill="black" stroke="black" points="2229.61,-3241.71 2239.78,-3238.74 2229.98,-3234.72 2229.61,-3241.71"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.fetch_missing -->
<g id="edge217" class="edge">
<title>tg_client.main&#45;&gt;tg_client.fetch_missing</title>
<path fill="none" stroke="black" d="M868.91,-2148.15C971.14,-2169.78 1091.74,-2195.3 1189.51,-2215.99"/>
<polygon fill="black" stroke="black" points="1189,-2219.46 1199.5,-2218.11 1190.44,-2212.61 1189,-2219.46"/>
</g>
<!-- tg_client.main&#45;&gt;tg_client.remove_deleted -->
<g id="edge218" class="edge">
<title>tg_client.main&#45;&gt;tg_client.remove_deleted</title>
<path fill="none" stroke="black" d="M656.87,-2148.24C695.88,-2459.2 963.67,-4238.14 1985,-4238.14 1985,-4238.14 1985,-4238.14 3212.5,-4238.14 4176.67,-4238.14 4287,-3647.68 5227,-3433.14 5840.91,-3293.02 6580.09,-3276.42 6996.04,-3280.46"/>
<polygon fill="black" stroke="black" points="6996.08,-3283.96 7006.11,-3280.56 6996.15,-3276.96 6996.08,-3283.96"/>
</g>
<!-- debug_dump.parse_url -->
<g id="node137" class="node">
<title>debug_dump.parse_url</title>
<g id="a_node137"><a xlink:title="Return ``(lot_id, lang)`` extracted from ``url``.">
<polygon fill="none" stroke="black" points="7472.5,-2226.14 7173.5,-2226.14 7173.5,-2190.14 7472.5,-2190.14 7472.5,-2226.14"/>
<text text-anchor="middle" x="7323" y="-2202.26" font-family="Times,serif" font-size="24.22">debug_dump.parse_url</text>
</a>
</g>
</g>
<!-- debug_dump.guess_source_from_lot -->
<g id="node138" class="node">
<title>debug_dump.guess_source_from_lot</title>
<g id="a_node138"><a xlink:title="Guess ``(chat, message_id)`` directly from ``lot_id``.">
<polygon fill="none" stroke="black" points="8591,-2334.14 8149,-2334.14 8149,-2298.14 8591,-2298.14 8591,-2334.14"/>
<text text-anchor="middle" x="8370" y="-2310.55" font-family="Times,serif" font-size="23.24">debug_dump.guess_source_from_lot</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info -->
<g id="node139" class="node">
<title>debug_dump.load_source_info</title>
<g id="a_node139"><a xlink:title="Return ``(chat, message_id)`` for ``lot_id`` if available.">
<polygon fill="none" stroke="black" points="7577,-1945.64 7069,-1945.64 7069,-1902.64 7577,-1902.64 7577,-1945.64"/>
<text text-anchor="middle" x="7323" y="-1915.99" font-family="Times,serif" font-size="32.06">debug_dump.load_source_info</text>
</a>
</g>
</g>
<!-- debug_dump.load_source_info&#45;&gt;notes_utils.load_json -->
<g id="edge219" class="edge">
<title>debug_dump.load_source_info&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7577.16,-1923.4C7646.59,-1918.84 7721.35,-1909.86 7789,-1893.14 7806,-1888.93 7807.87,-1880.77 7825,-1877.14 8298.89,-1776.57 8430.82,-1861.02 8915,-1877.14 8979.69,-1879.29 9051.4,-1883.81 9111.4,-1888.2"/>
<polygon fill="black" stroke="black" points="9111.46,-1891.72 9121.69,-1888.96 9111.97,-1884.74 9111.46,-1891.72"/>
</g>
<!-- debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path -->
<g id="edge220" class="edge">
<title>debug_dump.load_source_info&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7577.3,-1927.29C7806.41,-1930.14 8130.54,-1934.17 8283.18,-1936.07"/>
<polygon fill="black" stroke="black" points="8283.38,-1939.57 8293.42,-1936.2 8283.47,-1932.57 8283.38,-1939.57"/>
</g>
<!-- debug_dump.run_tg_fetch -->
<g id="node140" class="node">
<title>debug_dump.run_tg_fetch</title>
<g id="a_node140"><a xlink:title="Run ``tg_client.py &#45;&#45;fetch`` and return combined logs.">
<polygon fill="none" stroke="black" points="9472,-2160.14 9020,-2160.14 9020,-2116.14 9472,-2116.14 9472,-2160.14"/>
<text text-anchor="middle" x="9246" y="-2129.82" font-family="Times,serif" font-size="32.90">debug_dump.run_tg_fetch</text>
</a>
</g>
</g>
<!-- debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text -->
<g id="edge221" class="edge">
<title>debug_dump.run_tg_fetch&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M9472.07,-2125.98C9496.57,-2118.52 9520.14,-2108.21 9541,-2094.14 9689.83,-1993.72 9763.14,-1773.27 9785.15,-1695.21"/>
<polygon fill="black" stroke="black" points="9788.64,-1695.74 9787.92,-1685.17 9781.89,-1693.88 9788.64,-1695.74"/>
</g>
<!-- debug_dump.collect_files -->
<g id="node141" class="node">
<title>debug_dump.collect_files</title>
<g id="a_node141"><a xlink:title="Return ``[(name, content), ...]`` for files related to ``lot_id``.">
<polygon fill="none" stroke="black" points="7570,-2051.64 7076,-2051.64 7076,-2002.64 7570,-2002.64 7570,-2051.64"/>
<text text-anchor="middle" x="7323" y="-2017.96" font-family="Times,serif" font-size="37.10">debug_dump.collect_files</text>
</a>
</g>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.read_text -->
<g id="edge222" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M7570.12,-2033.03C7646.63,-2023.84 7727.07,-2001.62 7789,-1954.14 7820.26,-1930.17 7792.74,-1895.76 7825,-1873.14 7924.41,-1803.43 8794.26,-1808.87 8915,-1796.14 9194.41,-1766.67 9263.22,-1750.3 9541,-1708.14 9585.24,-1701.42 9633.78,-1693.61 9676.31,-1686.62"/>
<polygon fill="black" stroke="black" points="9677.13,-1690.04 9686.42,-1684.96 9675.99,-1683.13 9677.13,-1690.04"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;notes_utils.load_json -->
<g id="edge223" class="edge">
<title>debug_dump.collect_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7570.19,-2021.88C7644.31,-2011.73 7723.33,-1991.77 7789,-1954.14 7810.92,-1941.57 7802.21,-1921.05 7825,-1910.14 7938.93,-1855.61 8780.49,-1881.33 9111.66,-1893.77"/>
<polygon fill="black" stroke="black" points="9111.66,-1897.27 9121.79,-1894.15 9111.93,-1890.28 9111.66,-1897.27"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;post_io.raw_post_path -->
<g id="edge224" class="edge">
<title>debug_dump.collect_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7570.05,-2016.29C7664.65,-2017.87 7757.59,-2028.46 7789,-2061.14 7871.59,-2147.05 7741.41,-3048.19 7825,-3133.14 7886.71,-3195.85 8146.17,-3181.65 8283.26,-3169.23"/>
<polygon fill="black" stroke="black" points="8283.69,-3172.7 8293.32,-3168.3 8283.04,-3165.73 8283.69,-3172.7"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.has_caption -->
<g id="edge226" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M7570.21,-2017.75C7664.01,-2019.67 7756.28,-2030.14 7789,-2061.14 7880.72,-2148.04 7741.16,-2248.61 7825,-2343.14 7940.66,-2473.54 8160.48,-2488.57 8282.29,-2485.81"/>
<polygon fill="black" stroke="black" points="8282.43,-2489.31 8292.33,-2485.54 8282.24,-2482.31 8282.43,-2489.31"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge225" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7441.31,-2002.61C7543.65,-1988.27 7690.72,-1985.61 7789,-2061.14 7827.78,-2090.94 7786.05,-2135.56 7825,-2165.14 8018.27,-2311.9 8731.24,-2073.63 8915,-2232.14 8973.48,-2282.58 8893.72,-2350.33 8951,-2402.14 9000.96,-2447.32 9076.93,-2454.6 9139.13,-2450.95"/>
<polygon fill="black" stroke="black" points="9139.64,-2454.43 9149.38,-2450.25 9139.16,-2447.44 9139.64,-2454.43"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;caption_io.read_caption -->
<g id="edge227" class="edge">
<title>debug_dump.collect_files&#45;&gt;caption_io.read_caption</title>
<path fill="none" stroke="black" d="M7570.28,-2017.02C7664.42,-2018.78 7756.93,-2029.31 7789,-2061.14 7859.58,-2131.18 7753.67,-2437.86 7825,-2507.14 7876.04,-2556.71 8055.05,-2557.68 8193.94,-2550.06"/>
<polygon fill="black" stroke="black" points="8194.51,-2553.53 8204.29,-2549.47 8194.11,-2546.54 8194.51,-2553.53"/>
</g>
<!-- debug_dump.collect_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge228" class="edge">
<title>debug_dump.collect_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7513.77,-2002.61C7607.34,-1991.17 7721.96,-1978.13 7825,-1969.14 7986.61,-1955.04 8175.78,-1945.47 8283.09,-1940.69"/>
<polygon fill="black" stroke="black" points="8283.38,-1944.18 8293.22,-1940.24 8283.07,-1937.19 8283.38,-1944.18"/>
</g>
<!-- debug_dump.delete_files -->
<g id="node142" class="node">
<title>debug_dump.delete_files</title>
<g id="a_node142"><a xlink:title="Remove files related to ``lot_id`` from the filesystem.">
<polygon fill="none" stroke="black" points="7538.5,-2288.14 7107.5,-2288.14 7107.5,-2244.14 7538.5,-2244.14 7538.5,-2288.14"/>
<text text-anchor="middle" x="7323" y="-2257.82" font-family="Times,serif" font-size="32.90">debug_dump.delete_files</text>
</a>
</g>
</g>
<!-- debug_dump.delete_files&#45;&gt;notes_utils.load_json -->
<g id="edge229" class="edge">
<title>debug_dump.delete_files&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7538.8,-2276.9C7642.38,-2277.26 7752.08,-2268.87 7789,-2235.14 7864.73,-2165.93 7748.34,-2075.31 7825,-2007.14 7870.29,-1966.87 8854.81,-1971.21 8915,-1964.14 8999.4,-1954.22 9094.48,-1934.57 9160.83,-1919.46"/>
<polygon fill="black" stroke="black" points="9161.85,-1922.82 9170.82,-1917.17 9160.29,-1916 9161.85,-1922.82"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;post_io.raw_post_path -->
<g id="edge230" class="edge">
<title>debug_dump.delete_files&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7467.64,-2244.13C7572.73,-2236.95 7710.18,-2247.82 7789,-2335.14 7848.47,-2401.02 7762.38,-3070.24 7825,-3133.14 7887.07,-3195.49 8146.36,-3181.46 8283.34,-3169.15"/>
<polygon fill="black" stroke="black" points="8283.75,-3172.62 8293.39,-3168.23 8283.12,-3165.65 8283.75,-3172.62"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_json_path -->
<g id="edge231" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_json_path</title>
<path fill="none" stroke="black" d="M7538.64,-2255.54C7947.55,-2237.31 8807.31,-2209.22 8915,-2289.14 8957.33,-2320.55 8910.19,-2368.77 8951,-2402.14 9002.77,-2444.47 9077.97,-2452.01 9139.35,-2449.2"/>
<polygon fill="black" stroke="black" points="9139.68,-2452.69 9149.47,-2448.64 9139.29,-2445.7 9139.68,-2452.69"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;caption_io.caption_md_path -->
<g id="edge232" class="edge">
<title>debug_dump.delete_files&#45;&gt;caption_io.caption_md_path</title>
<path fill="none" stroke="black" d="M7538.51,-2246.04C7627.14,-2249.63 7724.12,-2270.9 7789,-2335.14 7861.59,-2407.01 7747.79,-2495.26 7825,-2562.14 7874.6,-2605.1 8824.15,-2590.43 9142.19,-2584.28"/>
<polygon fill="black" stroke="black" points="9142.4,-2587.77 9152.33,-2584.08 9142.26,-2580.78 9142.4,-2587.77"/>
</g>
<!-- debug_dump.delete_files&#45;&gt;lot_io.lot_json_path -->
<g id="edge233" class="edge">
<title>debug_dump.delete_files&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7538.79,-2277.23C7642.55,-2277.69 7752.42,-2269.31 7789,-2235.14 7876.17,-2153.69 7737.51,-2050.24 7825,-1969.14 7889.47,-1909.37 8147.04,-1919.52 8283.36,-1929.57"/>
<polygon fill="black" stroke="black" points="8283.13,-1933.06 8293.37,-1930.32 8283.66,-1926.08 8283.13,-1933.06"/>
</g>
<!-- debug_dump._message_reason -->
<g id="node143" class="node">
<title>debug_dump._message_reason</title>
<g id="a_node143"><a xlink:title="Return explanation why a message would be skipped.">
<polygon fill="none" stroke="black" points="9518.5,-2667.64 8973.5,-2667.64 8973.5,-2622.64 9518.5,-2622.64 9518.5,-2667.64"/>
<text text-anchor="middle" x="9246" y="-2636.76" font-family="Times,serif" font-size="33.60">debug_dump._message_reason</text>
</a>
</g>
</g>
<!-- debug_dump._message_reason&#45;&gt;moderation.should_skip_user -->
<g id="edge234" class="edge">
<title>debug_dump._message_reason&#45;&gt;moderation.should_skip_user</title>
<path fill="none" stroke="black" d="M9259.05,-2667.77C9303.63,-2752.4 9460.7,-3059.35 9541,-3330.14 9707.21,-3890.6 9776.87,-4607.11 9790.1,-4756.92"/>
<polygon fill="black" stroke="black" points="9786.63,-4757.44 9790.99,-4767.09 9793.61,-4756.83 9786.63,-4757.44"/>
</g>
<!-- debug_dump._lot_reason -->
<g id="node144" class="node">
<title>debug_dump._lot_reason</title>
<g id="a_node144"><a xlink:title="Return explanation why ``lot`` would be skipped.">
<polygon fill="none" stroke="black" points="9400,-2393.14 9092,-2393.14 9092,-2357.14 9400,-2357.14 9400,-2393.14"/>
<text text-anchor="middle" x="9246" y="-2369.55" font-family="Times,serif" font-size="23.24">debug_dump._lot_reason</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary -->
<g id="node145" class="node">
<title>debug_dump.moderation_summary</title>
<g id="a_node145"><a xlink:title="Return a multi&#45;line summary of moderation checks for ``lot_id``.">
<polygon fill="none" stroke="black" points="7769.5,-2406.14 6876.5,-2406.14 6876.5,-2344.14 7769.5,-2344.14 7769.5,-2406.14"/>
<text text-anchor="middle" x="7323" y="-2362.94" font-family="Times,serif" font-size="49.00">debug_dump.moderation_summary</text>
</a>
</g>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;notes_utils.load_json -->
<g id="edge235" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M7726.26,-2344.04C7749.27,-2331.56 7770.52,-2316.13 7789,-2297.14 7869.45,-2214.49 7739.37,-2117.41 7825,-2040.14 7869.99,-1999.54 8855.25,-2010.2 8915,-2000.14 9014.19,-1983.43 9125.2,-1945.2 9189.88,-1920.86"/>
<polygon fill="black" stroke="black" points="9191.35,-1924.05 9199.46,-1917.23 9188.87,-1917.5 9191.35,-1924.05"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.read_post -->
<g id="edge236" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7668.57,-2406.16C7715.12,-2424.78 7757.58,-2451.94 7789,-2491.14 7838.71,-2553.14 7770.6,-3863.21 7825,-3921.14 7915.19,-4017.19 8067.77,-4023.1 8188.42,-4008.43"/>
<polygon fill="black" stroke="black" points="8189.04,-4011.88 8198.52,-4007.15 8188.16,-4004.94 8189.04,-4011.88"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path -->
<g id="edge237" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M7665.48,-2406.22C7712.96,-2424.75 7756.51,-2451.87 7789,-2491.14 7880.08,-2601.24 7723.64,-3032.42 7825,-3133.14 7887.41,-3195.15 8146.55,-3181.27 8283.42,-3169.07"/>
<polygon fill="black" stroke="black" points="8283.82,-3172.55 8293.46,-3168.16 8283.19,-3165.58 8283.82,-3172.55"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path -->
<g id="edge238" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;lot_io.lot_json_path</title>
<path fill="none" stroke="black" d="M7727.13,-2344.08C7749.86,-2331.57 7770.81,-2316.12 7789,-2297.14 7878.86,-2203.36 7733.37,-2099.18 7825,-2007.14 7945.24,-1886.36 8163.23,-1900.24 8283.54,-1919.53"/>
<polygon fill="black" stroke="black" points="8283.01,-1922.99 8293.45,-1921.17 8284.15,-1916.09 8283.01,-1922.99"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason -->
<g id="edge239" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._message_reason</title>
<path fill="none" stroke="black" d="M7631.54,-2406.18C7689.16,-2423.92 7745.01,-2450.77 7789,-2491.14 7825.35,-2524.49 7785.36,-2566.78 7825,-2596.14 7913.88,-2661.97 8575.17,-2659.61 8963.21,-2652.29"/>
<polygon fill="black" stroke="black" points="8963.54,-2655.79 8973.47,-2652.1 8963.41,-2648.79 8963.54,-2655.79"/>
</g>
<!-- debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason -->
<g id="edge240" class="edge">
<title>debug_dump.moderation_summary&#45;&gt;debug_dump._lot_reason</title>
<path fill="none" stroke="black" d="M7769.54,-2375.14C8188.94,-2375.14 8794.3,-2375.14 9081.69,-2375.14"/>
<polygon fill="black" stroke="black" points="9081.78,-2378.64 9091.78,-2375.14 9081.78,-2371.64 9081.78,-2378.64"/>
</g>
<!-- debug_dump.main -->
<g id="node146" class="node">
<title>debug_dump.main</title>
<g id="a_node146"><a xlink:title="Collect log and data files related to a single lot.">
<polygon fill="none" stroke="black" points="6555.5,-2239.14 6079.5,-2239.14 6079.5,-2177.14 6555.5,-2177.14 6555.5,-2239.14"/>
<text text-anchor="middle" x="6317.5" y="-2195.94" font-family="Times,serif" font-size="49.00">debug_dump.main</text>
</a>
</g>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.parse_url -->
<g id="edge241" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.parse_url</title>
<path fill="none" stroke="black" d="M6555.68,-2208.14C6743.14,-2208.14 6999.61,-2208.14 7163.07,-2208.14"/>
<polygon fill="black" stroke="black" points="7163.21,-2211.64 7173.21,-2208.14 7163.21,-2204.64 7163.21,-2211.64"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot -->
<g id="edge242" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.guess_source_from_lot</title>
<path fill="none" stroke="black" d="M6468.31,-2239.15C6575.93,-2259.89 6724.74,-2285.44 6857,-2297.14 7309.81,-2337.17 7841.82,-2331.74 8138.73,-2324.03"/>
<polygon fill="black" stroke="black" points="8138.85,-2327.53 8148.75,-2323.77 8138.66,-2320.53 8138.85,-2327.53"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.load_source_info -->
<g id="edge243" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.load_source_info</title>
<path fill="none" stroke="black" d="M6483.65,-2239.15C6592.95,-2249.59 6732.01,-2242.04 6821,-2160.14 6887.45,-2098.97 6790,-2020.7 6857,-1960.14 6888.34,-1931.81 6971.4,-1920.59 7058.8,-1917.25"/>
<polygon fill="black" stroke="black" points="7059.05,-1920.74 7068.92,-1916.89 7058.8,-1913.74 7059.05,-1920.74"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.run_tg_fetch -->
<g id="edge244" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.run_tg_fetch</title>
<path fill="none" stroke="black" d="M6494.41,-2239.16C6601.42,-2247.54 6733.82,-2237.67 6821,-2160.14 6877.74,-2109.68 6797.92,-2040.84 6857,-1993.14 6897.29,-1960.61 7746.69,-1963.3 7789,-1993.14 7827.95,-2020.6 7786.48,-2066.07 7825,-2094.14 7918.05,-2161.94 8630.78,-2154.24 9009.74,-2145.11"/>
<polygon fill="black" stroke="black" points="9009.83,-2148.61 9019.74,-2144.87 9009.66,-2141.61 9009.83,-2148.61"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.collect_files -->
<g id="edge245" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.collect_files</title>
<path fill="none" stroke="black" d="M6555.66,-2236.61C6646.89,-2235.33 6746.84,-2217.53 6821,-2160.14 6858.03,-2131.48 6819.66,-2089.38 6857,-2061.14 6951.89,-1989.37 7091.1,-1988.81 7192.46,-2001.34"/>
<polygon fill="black" stroke="black" points="7192.09,-2004.82 7202.46,-2002.63 7192.99,-1997.88 7192.09,-2004.82"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.delete_files -->
<g id="edge246" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.delete_files</title>
<path fill="none" stroke="black" d="M6555.68,-2221.85C6719.58,-2231.32 6936.25,-2243.84 7097.36,-2253.15"/>
<polygon fill="black" stroke="black" points="7097.23,-2256.65 7107.41,-2253.73 7097.63,-2249.66 7097.23,-2256.65"/>
</g>
<!-- debug_dump.main&#45;&gt;debug_dump.moderation_summary -->
<g id="edge247" class="edge">
<title>debug_dump.main&#45;&gt;debug_dump.moderation_summary</title>
<path fill="none" stroke="black" d="M6435.58,-2239.16C6544.11,-2266.84 6710.43,-2306.54 6857,-2330.14 6885.78,-2334.77 6915.64,-2338.99 6945.71,-2342.82"/>
<polygon fill="black" stroke="black" points="6945.56,-2346.33 6955.92,-2344.1 6946.43,-2339.38 6945.56,-2346.33"/>
</g>
<!-- scan_ontology.collect_ontology -->
<g id="node147" class="node">
<title>scan_ontology.collect_ontology</title>
<g id="a_node147"><a xlink:title="Return counts per field, value counters, misparsed lots and broken metadata.">
<polygon fill="none" stroke="black" points="6775.5,-3709.64 5859.5,-3709.64 5859.5,-3638.64 6775.5,-3638.64 6775.5,-3709.64"/>
<text text-anchor="middle" x="6317.5" y="-3659.49" font-family="Times,serif" font-size="57.68">scan_ontology.collect_ontology</text>
</a>
</g>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.read_post -->
<g id="edge248" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6649.1,-3709.66C6713.46,-3730.67 6775.1,-3762.93 6821,-3812.14 6876.35,-3871.48 6794.22,-3939.72 6857,-3991.14 6949.02,-4066.49 7668.4,-4024.14 8080.85,-3992.96"/>
<polygon fill="black" stroke="black" points="8081.13,-3996.45 8090.84,-3992.21 8080.6,-3989.47 8081.13,-3996.45"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path -->
<g id="edge249" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;post_io.raw_post_path</title>
<path fill="none" stroke="black" d="M6509.24,-3638.63C6611.16,-3611.7 6733.33,-3565.77 6821,-3489.14 6846.75,-3466.63 6828.07,-3439.37 6857,-3421.14 6944.68,-3365.88 7687.51,-3404.12 7789,-3383.14 7998.08,-3339.9 8230.53,-3230.24 8325.26,-3182.7"/>
<polygon fill="black" stroke="black" points="8326.9,-3185.79 8334.26,-3178.16 8323.75,-3179.54 8326.9,-3185.79"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots -->
<g id="edge252" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6775.75,-3674.82C7066.1,-3676.93 7449.76,-3682.81 7789,-3698.14 7950.47,-3705.43 8136.8,-3720.42 8253.75,-3730.63"/>
<polygon fill="black" stroke="black" points="8253.53,-3734.12 8263.8,-3731.51 8254.15,-3727.15 8253.53,-3734.12"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed -->
<g id="edge250" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;moderation.is_misparsed</title>
<path fill="none" stroke="black" d="M6582.68,-3638.63C6673.16,-3612.51 6765.49,-3567.3 6821,-3489.14 6889.04,-3393.32 6775.99,-1459.27 6857,-1374.14 6890.33,-1339.11 6993.9,-1330.03 7094.85,-1330.31"/>
<polygon fill="black" stroke="black" points="7094.9,-1333.81 7104.92,-1330.37 7094.94,-1326.81 7094.9,-1333.81"/>
</g>
<!-- scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input -->
<g id="edge251" class="edge">
<title>scan_ontology.collect_ontology&#45;&gt;message_utils.gather_chop_input</title>
<path fill="none" stroke="black" d="M6636.58,-3709.67C6704.46,-3730.44 6770.74,-3762.6 6821,-3812.14 6861.87,-3852.42 6812.17,-3900.31 6857,-3936.14 6967.06,-4024.09 7142.65,-4005.31 7243.62,-3984.33"/>
<polygon fill="black" stroke="black" points="7244.41,-3987.74 7253.45,-3982.23 7242.94,-3980.89 7244.41,-3987.74"/>
</g>
<!-- scan_ontology.main -->
<g id="node148" class="node">
<title>scan_ontology.main</title>
<polygon fill="none" stroke="black" points="5730,-3702.64 5275,-3702.64 5275,-3645.64 5730,-3645.64 5730,-3702.64"/>
<text text-anchor="middle" x="5502.5" y="-3663.25" font-family="Times,serif" font-size="44.24">scan_ontology.main</text>
</g>
<!-- scan_ontology.main&#45;&gt;notes_utils.write_json -->
<g id="edge253" class="edge">
<title>scan_ontology.main&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M5523.47,-3702.8C5575.79,-3779.53 5716.97,-3997.71 5778,-4202.14 5800.75,-4278.33 5759.54,-4500.2 5814,-4558.14 6135.75,-4900.39 6388.81,-4691.01 6857,-4729.14 7312.82,-4766.26 8460.67,-4781.44 8915,-4729.14 9006.72,-4718.58 9110.01,-4692.03 9176.21,-4673.06"/>
<polygon fill="black" stroke="black" points="9177.47,-4676.34 9186.11,-4670.2 9175.53,-4669.61 9177.47,-4676.34"/>
</g>
<!-- scan_ontology.main&#45;&gt;log_utils.install_excepthook -->
<g id="edge254" class="edge">
<title>scan_ontology.main&#45;&gt;log_utils.install_excepthook</title>
<path fill="none" stroke="black" d="M5580.48,-3645.58C5646.1,-3616.66 5736.23,-3565.01 5778,-3487.14 5817.71,-3413.11 5755.91,-523.82 5814,-463.14 5855.61,-419.66 5997.94,-414.87 6120.54,-419.71"/>
<polygon fill="black" stroke="black" points="6120.7,-423.22 6130.83,-420.14 6120.99,-416.23 6120.7,-423.22"/>
</g>
<!-- scan_ontology.main&#45;&gt;scan_ontology.collect_ontology -->
<g id="edge255" class="edge">
<title>scan_ontology.main&#45;&gt;scan_ontology.collect_ontology</title>
<path fill="none" stroke="black" d="M5730.24,-3674.14C5767.89,-3674.14 5808.12,-3674.14 5849.19,-3674.14"/>
<polygon fill="black" stroke="black" points="5849.37,-3677.64 5859.37,-3674.14 5849.37,-3670.64 5849.37,-3677.64"/>
</g>
<!-- telegram_bot._t -->
<g id="node149" class="node">
<title>telegram_bot._t</title>
<g id="a_node149"><a xlink:title="Return ``text`` translated to ``lang`` using gettext files.">
<polygon fill="none" stroke="black" points="5606.5,-1963.14 5398.5,-1963.14 5398.5,-1927.14 5606.5,-1927.14 5606.5,-1963.14"/>
<text text-anchor="middle" x="5502.5" y="-1939.26" font-family="Times,serif" font-size="24.22">telegram_bot._t</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile -->
<g id="node150" class="node">
<title>telegram_bot.ensure_profile</title>
<g id="a_node150"><a xlink:title="Return profile for ``uid`` creating one if needed.">
<polygon fill="none" stroke="black" points="5653.5,-2017.14 5351.5,-2017.14 5351.5,-1981.14 5653.5,-1981.14 5653.5,-2017.14"/>
<text text-anchor="middle" x="5502.5" y="-1994.35" font-family="Times,serif" font-size="19.74">telegram_bot.ensure_profile</text>
</a>
</g>
</g>
<!-- telegram_bot.save_profiles -->
<g id="node151" class="node">
<title>telegram_bot.save_profiles</title>
<g id="a_node151"><a xlink:title="Write ``profiles`` to disk.">
<polygon fill="none" stroke="black" points="6421.5,-1917.14 6213.5,-1917.14 6213.5,-1881.14 6421.5,-1881.14 6421.5,-1917.14"/>
<text text-anchor="middle" x="6317.5" y="-1895.44" font-family="Times,serif" font-size="14.00">telegram_bot.save_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles -->
<g id="edge256" class="edge">
<title>telegram_bot.ensure_profile&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5653.55,-1985.38C5693.99,-1981.4 5737.69,-1976.85 5778,-1972.14 5925.21,-1954.93 6094.53,-1931.35 6203.39,-1915.7"/>
<polygon fill="black" stroke="black" points="6204.01,-1919.15 6213.41,-1914.26 6203.01,-1912.22 6204.01,-1919.15"/>
</g>
<!-- telegram_bot.load_profiles -->
<g id="node152" class="node">
<title>telegram_bot.load_profiles</title>
<g id="a_node152"><a xlink:title="Populate the global ``profiles`` mapping.">
<polygon fill="none" stroke="black" points="5653.5,-1011.14 5351.5,-1011.14 5351.5,-975.14 5653.5,-975.14 5653.5,-1011.14"/>
<text text-anchor="middle" x="5502.5" y="-987.84" font-family="Times,serif" font-size="21.00">telegram_bot.load_profiles</text>
</a>
</g>
</g>
<!-- telegram_bot.load_profiles&#45;&gt;notes_utils.read_text -->
<g id="edge257" class="edge">
<title>telegram_bot.load_profiles&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5517.01,-974.77C5556.04,-923.46 5675.08,-778.86 5814,-726.14 5970.67,-666.68 7154.42,-703.14 7322,-703.14 7322,-703.14 7322,-703.14 8371,-703.14 8501.03,-703.14 9443.05,-641.63 9541,-727.14 9579.81,-761.02 9565.5,-905.92 9577,-956.14 9638.95,-1226.68 9749.02,-1544.76 9782.54,-1639.31"/>
<polygon fill="black" stroke="black" points="9779.33,-1640.74 9785.98,-1648.99 9785.93,-1638.39 9779.33,-1640.74"/>
</g>
<!-- telegram_bot.load_state -->
<g id="node153" class="node">
<title>telegram_bot.load_state</title>
<g id="a_node153"><a xlink:title="Populate ``processed_ids`` from ``STATE_PATH``.">
<polygon fill="none" stroke="black" points="5646,-1065.14 5359,-1065.14 5359,-1029.14 5646,-1029.14 5646,-1065.14"/>
<text text-anchor="middle" x="5502.5" y="-1041.44" font-family="Times,serif" font-size="22.12">telegram_bot.load_state</text>
</a>
</g>
</g>
<!-- telegram_bot.load_state&#45;&gt;notes_utils.read_text -->
<g id="edge258" class="edge">
<title>telegram_bot.load_state&#45;&gt;notes_utils.read_text</title>
<path fill="none" stroke="black" d="M5602.91,-1065.15C5661.41,-1069.71 5732.6,-1063.78 5778,-1020.14 5862.1,-939.29 5726.52,-837.31 5814,-760.14 5876.83,-704.71 7238.22,-741.14 7322,-741.14 7322,-741.14 7322,-741.14 8371,-741.14 8632.01,-741.14 9339.38,-678.39 9541,-844.14 9545.1,-847.51 9740.63,-1495.16 9784.03,-1639.04"/>
<polygon fill="black" stroke="black" points="9780.76,-1640.31 9786.99,-1648.88 9787.46,-1638.29 9780.76,-1640.31"/>
</g>
<!-- telegram_bot.save_state -->
<g id="node154" class="node">
<title>telegram_bot.save_state</title>
<polygon fill="none" stroke="black" points="6401.5,-1111.14 6233.5,-1111.14 6233.5,-1075.14 6401.5,-1075.14 6401.5,-1111.14"/>
<text text-anchor="middle" x="6317.5" y="-1089.89" font-family="Times,serif" font-size="12.18">telegram_bot.save_state</text>
</g>
<!-- telegram_bot.scan_embeddings -->
<g id="node155" class="node">
<title>telegram_bot.scan_embeddings</title>
<g id="a_node155"><a xlink:title="Load new embeddings and return list of new lot ids.">
<polygon fill="none" stroke="black" points="7469,-1145.14 7177,-1145.14 7177,-1109.14 7469,-1109.14 7469,-1145.14"/>
<text text-anchor="middle" x="7323" y="-1122.97" font-family="Times,serif" font-size="17.08">telegram_bot.scan_embeddings</text>
</a>
</g>
</g>
<!-- telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings -->
<g id="edge259" class="edge">
<title>telegram_bot.scan_embeddings&#45;&gt;similar_utils._load_embeddings</title>
<path fill="none" stroke="black" d="M7469.03,-1131.16C7632.62,-1135.7 7902.1,-1143.18 8103.61,-1148.77"/>
<polygon fill="black" stroke="black" points="8103.66,-1152.28 8113.76,-1149.05 8103.86,-1145.28 8103.66,-1152.28"/>
</g>
<!-- telegram_bot._should_suggest -->
<g id="node156" class="node">
<title>telegram_bot._should_suggest</title>
<polygon fill="none" stroke="black" points="6479,-1379.14 6156,-1379.14 6156,-1343.14 6479,-1343.14 6479,-1379.14"/>
<text text-anchor="middle" x="6317.5" y="-1356.35" font-family="Times,serif" font-size="19.74">telegram_bot._should_suggest</text>
</g>
<!-- telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim -->
<g id="edge260" class="edge">
<title>telegram_bot._should_suggest&#45;&gt;similar_utils._cos_sim</title>
<path fill="none" stroke="black" d="M6409.69,-1379.16C6515.92,-1395.21 6693.18,-1406.19 6821,-1333.14 6846.04,-1318.82 6832.05,-1293.61 6857,-1279.14 6963.07,-1217.59 7106.51,-1217.7 7205.91,-1228.03"/>
<polygon fill="black" stroke="black" points="7205.67,-1231.53 7215.99,-1229.13 7206.42,-1224.57 7205.67,-1231.53"/>
</g>
<!-- telegram_bot.enqueue_new_ids -->
<g id="node157" class="node">
<title>telegram_bot.enqueue_new_ids</title>
<polygon fill="none" stroke="black" points="5741,-1381.14 5264,-1381.14 5264,-1341.14 5741,-1341.14 5741,-1381.14"/>
<text text-anchor="middle" x="5502.5" y="-1354.07" font-family="Times,serif" font-size="28.84">telegram_bot.enqueue_new_ids</text>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles -->
<g id="edge261" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5531.58,-1381.45C5587.27,-1423.22 5711.98,-1524.53 5778,-1639.14 5808.36,-1691.83 5770.64,-1728.5 5814,-1771.14 5917.44,-1872.85 6089.75,-1897.23 6203.25,-1901.33"/>
<polygon fill="black" stroke="black" points="6203.25,-1904.84 6213.36,-1901.65 6203.47,-1897.84 6203.25,-1904.84"/>
</g>
<!-- telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest -->
<g id="edge262" class="edge">
<title>telegram_bot.enqueue_new_ids&#45;&gt;telegram_bot._should_suggest</title>
<path fill="none" stroke="black" d="M5741.11,-1361.14C5870.78,-1361.14 6028.34,-1361.14 6145.77,-1361.14"/>
<polygon fill="black" stroke="black" points="6145.93,-1364.64 6155.93,-1361.14 6145.93,-1357.64 6145.93,-1364.64"/>
</g>
<!-- telegram_bot._send_queue -->
<g id="node158" class="node">
<title>telegram_bot._send_queue</title>
<g id="a_node158"><a xlink:title="Send next lot from each user queue via ``app``.">
<polygon fill="none" stroke="black" points="5778,-1807.14 5227,-1807.14 5227,-1755.14 5778,-1755.14 5778,-1807.14"/>
<text text-anchor="middle" x="5502.5" y="-1771.44" font-family="Times,serif" font-size="39.62">telegram_bot._send_queue</text>
</a>
</g>
</g>
<!-- telegram_bot._send_queue&#45;&gt;lot_io.get_lot -->
<g id="edge263" class="edge">
<title>telegram_bot._send_queue&#45;&gt;lot_io.get_lot</title>
<path fill="none" stroke="black" d="M5778.25,-1780.52C6044.78,-1779.57 6460.64,-1777.18 6821,-1771.14 6968.67,-1768.66 7140.78,-1763.75 7239.99,-1760.73"/>
<polygon fill="black" stroke="black" points="7240.36,-1764.22 7250.24,-1760.41 7240.14,-1757.22 7240.36,-1764.22"/>
</g>
<!-- telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles -->
<g id="edge264" class="edge">
<title>telegram_bot._send_queue&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5712.28,-1807.18C5734.48,-1810.12 5756.71,-1813.14 5778,-1816.14 5925.15,-1836.86 6094.49,-1863.4 6203.37,-1880.82"/>
<polygon fill="black" stroke="black" points="6202.96,-1884.3 6213.38,-1882.43 6204.06,-1877.39 6202.96,-1884.3"/>
</g>
<!-- telegram_bot.send_alert -->
<g id="node159" class="node">
<title>telegram_bot.send_alert</title>
<g id="a_node159"><a xlink:title="Broadcast ``text`` to all registered users.">
<polygon fill="none" stroke="black" points="5111.5,-1032.14 4781.5,-1032.14 4781.5,-996.14 5111.5,-996.14 5111.5,-1032.14"/>
<text text-anchor="middle" x="4946.5" y="-1007.98" font-family="Times,serif" font-size="25.20">telegram_bot.send_alert</text>
</a>
</g>
</g>
<!-- telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles -->
<g id="edge265" class="edge">
<title>telegram_bot.send_alert&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5111.84,-1007.91C5184.36,-1005.16 5269.29,-1001.94 5341.31,-999.21"/>
<polygon fill="black" stroke="black" points="5341.53,-1002.7 5351.39,-998.83 5341.26,-995.71 5341.53,-1002.7"/>
</g>
<!-- telegram_bot.start_cmd -->
<g id="node160" class="node">
<title>telegram_bot.start_cmd</title>
<g id="a_node160"><a xlink:title="Register the user and confirm startup.">
<polygon fill="none" stroke="black" points="5058.5,-1985.14 4834.5,-1985.14 4834.5,-1949.14 5058.5,-1949.14 5058.5,-1985.14"/>
<text text-anchor="middle" x="4946.5" y="-1962.97" font-family="Times,serif" font-size="17.08">telegram_bot.start_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot._t -->
<g id="edge266" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5058.61,-1962.73C5154.25,-1958.93 5291.66,-1953.47 5387.99,-1949.65"/>
<polygon fill="black" stroke="black" points="5388.21,-1953.14 5398.06,-1949.25 5387.93,-1946.15 5388.21,-1953.14"/>
</g>
<!-- telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge267" class="edge">
<title>telegram_bot.start_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5058.61,-1973.56C5139.67,-1978.24 5250.74,-1984.65 5341.37,-1989.89"/>
<polygon fill="black" stroke="black" points="5341.29,-1993.39 5351.47,-1990.47 5341.69,-1986.4 5341.29,-1993.39"/>
</g>
<!-- telegram_bot.lang_cmd -->
<g id="node161" class="node">
<title>telegram_bot.lang_cmd</title>
<g id="a_node161"><a xlink:title="Set preferred language or list available choices.">
<polygon fill="none" stroke="black" points="5121,-2042.64 4772,-2042.64 4772,-2003.64 5121,-2003.64 5121,-2042.64"/>
<text text-anchor="middle" x="4946.5" y="-2016.24" font-family="Times,serif" font-size="28.00">telegram_bot.lang_cmd</text>
</a>
</g>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot._t -->
<g id="edge268" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5121.19,-2011.76C5145.02,-2007.51 5168.88,-2001.8 5191,-1994.14 5208.72,-1988 5209.22,-1978.09 5227,-1972.14 5278.19,-1954.99 5337.52,-1947.71 5387.91,-1944.93"/>
<polygon fill="black" stroke="black" points="5388.37,-1948.41 5398.19,-1944.42 5388.02,-1941.42 5388.37,-1948.41"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge269" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5121.27,-2015.61C5191.59,-2012.56 5272.27,-2009.07 5341.16,-2006.08"/>
<polygon fill="black" stroke="black" points="5341.4,-2009.58 5351.24,-2005.65 5341.1,-2002.58 5341.4,-2009.58"/>
</g>
<!-- telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles -->
<g id="edge270" class="edge">
<title>telegram_bot.lang_cmd&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5121.19,-2025.29C5156.22,-2025.64 5192.79,-2025.95 5227,-2026.14 5349.44,-2026.79 5671,-2085.66 5778,-2026.14 5804.51,-2011.39 5788.55,-1984.66 5814,-1968.14 5930.74,-1892.34 6094.89,-1883.84 6203.4,-1888.43"/>
<polygon fill="black" stroke="black" points="6203.24,-1891.92 6213.4,-1888.89 6203.57,-1884.93 6203.24,-1891.92"/>
</g>
<!-- telegram_bot.vote_callback -->
<g id="node162" class="node">
<title>telegram_bot.vote_callback</title>
<g id="a_node162"><a xlink:title="Handle inline button presses for lot feedback.">
<polygon fill="none" stroke="black" points="5161.5,-1930.64 4731.5,-1930.64 4731.5,-1889.64 5161.5,-1889.64 5161.5,-1930.64"/>
<text text-anchor="middle" x="4946.5" y="-1902.89" font-family="Times,serif" font-size="29.68">telegram_bot.vote_callback</text>
</a>
</g>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot._t -->
<g id="edge271" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot._t</title>
<path fill="none" stroke="black" d="M5161.69,-1923.67C5238.86,-1928.54 5322.89,-1933.85 5388.09,-1937.97"/>
<polygon fill="black" stroke="black" points="5388.18,-1941.49 5398.39,-1938.62 5388.63,-1934.5 5388.18,-1941.49"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile -->
<g id="edge272" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.ensure_profile</title>
<path fill="none" stroke="black" d="M5161.72,-1928.92C5171.77,-1932.16 5181.59,-1935.88 5191,-1940.14 5210.51,-1948.96 5207.39,-1963.56 5227,-1972.14 5262.24,-1987.55 5302.39,-1995.95 5340.9,-2000.22"/>
<polygon fill="black" stroke="black" points="5340.87,-2003.74 5351.18,-2001.27 5341.58,-1996.77 5340.87,-2003.74"/>
</g>
<!-- telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles -->
<g id="edge273" class="edge">
<title>telegram_bot.vote_callback&#45;&gt;telegram_bot.save_profiles</title>
<path fill="none" stroke="black" d="M5161.78,-1908.42C5455.91,-1906.05 5974.21,-1901.89 6202.77,-1900.05"/>
<polygon fill="black" stroke="black" points="6203.13,-1903.55 6213.1,-1899.97 6203.08,-1896.55 6203.13,-1903.55"/>
</g>
<!-- telegram_bot.main -->
<g id="node163" class="node">
<title>telegram_bot.main</title>
<g id="a_node163"><a xlink:title="Run the Telegram recommendation bot.">
<polygon fill="none" stroke="black" points="5112,-1115.14 4781,-1115.14 4781,-1071.14 5112,-1071.14 5112,-1115.14"/>
<text text-anchor="middle" x="4946.5" y="-1084.82" font-family="Times,serif" font-size="32.90">telegram_bot.main</text>
</a>
</g>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_profiles -->
<g id="edge274" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_profiles</title>
<path fill="none" stroke="black" d="M5087.83,-1071.11C5122.2,-1063.56 5158.45,-1053.74 5191,-1041.14 5208.27,-1034.45 5209.38,-1025.84 5227,-1020.14 5263.07,-1008.46 5303.09,-1001.42 5341.16,-997.28"/>
<polygon fill="black" stroke="black" points="5341.72,-1000.74 5351.31,-996.23 5341.01,-993.77 5341.72,-1000.74"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.load_state -->
<g id="edge275" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.load_state</title>
<path fill="none" stroke="black" d="M5112.22,-1079.46C5187.16,-1073.24 5275.29,-1065.92 5348.73,-1059.82"/>
<polygon fill="black" stroke="black" points="5349.32,-1063.29 5358.99,-1058.97 5348.74,-1056.31 5349.32,-1063.29"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.save_state -->
<g id="edge276" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.save_state</title>
<path fill="none" stroke="black" d="M5112.29,-1093.14C5402.11,-1093.14 5994.02,-1093.14 6223.08,-1093.14"/>
<polygon fill="black" stroke="black" points="6223.38,-1096.64 6233.38,-1093.14 6223.38,-1089.64 6223.38,-1096.64"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings -->
<g id="edge277" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.scan_embeddings</title>
<path fill="none" stroke="black" d="M5112.26,-1102.16C5149.95,-1104.01 5189.86,-1105.8 5227,-1107.14 5952.06,-1133.32 6819.14,-1130.84 7166.72,-1128.47"/>
<polygon fill="black" stroke="black" points="7166.87,-1131.97 7176.85,-1128.4 7166.82,-1124.97 7166.87,-1131.97"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids -->
<g id="edge278" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot.enqueue_new_ids</title>
<path fill="none" stroke="black" d="M4964.93,-1115.2C5005.09,-1164.18 5109.71,-1281.67 5227,-1332.14 5235.74,-1335.9 5244.77,-1339.25 5254.01,-1342.23"/>
<polygon fill="black" stroke="black" points="5253.11,-1345.62 5263.69,-1345.21 5255.16,-1338.93 5253.11,-1345.62"/>
</g>
<!-- telegram_bot.main&#45;&gt;telegram_bot._send_queue -->
<g id="edge279" class="edge">
<title>telegram_bot.main&#45;&gt;telegram_bot._send_queue</title>
<path fill="none" stroke="black" d="M4960.24,-1115.26C4998.82,-1182.87 5116.28,-1393.4 5191,-1578.14 5211.08,-1627.79 5189.26,-1655.14 5227,-1693.14 5253.71,-1720.03 5288.64,-1738.71 5324.58,-1751.69"/>
<polygon fill="black" stroke="black" points="5323.65,-1755.07 5334.24,-1755.03 5325.94,-1748.45 5323.65,-1755.07"/>
</g>
<!-- pending_chop.main -->
<g id="node164" class="node">
<title>pending_chop.main</title>
<polygon fill="none" stroke="black" points="7486.5,-4552.14 7159.5,-4552.14 7159.5,-4510.14 7486.5,-4510.14 7486.5,-4552.14"/>
<text text-anchor="middle" x="7323" y="-4523.05" font-family="Times,serif" font-size="31.36">pending_chop.main</text>
</g>
<!-- pending_chop.main&#45;&gt;post_io.read_post -->
<g id="edge280" class="edge">
<title>pending_chop.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M7486.75,-4540.51C7603.59,-4543.37 7747.47,-4537.68 7789,-4496.14 7864.63,-4420.49 7749.79,-4092.2 7825,-4016.14 7915.6,-3924.51 8063.36,-3916.93 8182.03,-3929.99"/>
<polygon fill="black" stroke="black" points="8181.63,-3933.46 8191.97,-3931.13 8182.44,-3926.51 8181.63,-3933.46"/>
</g>
<!-- pending_chop.main&#45;&gt;moderation.should_skip_message -->
<g id="edge281" class="edge">
<title>pending_chop.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M7486.71,-4528.49C7678.28,-4525.37 7995.29,-4520.22 8192.61,-4517.01"/>
<polygon fill="black" stroke="black" points="8192.85,-4520.5 8202.79,-4516.84 8192.73,-4513.5 8192.85,-4520.5"/>
</g>
<!-- pending_caption._get_message_path -->
<g id="node165" class="node">
<title>pending_caption._get_message_path</title>
<g id="a_node165"><a xlink:title="Return path of stored message ``msg_id`` in ``chat`` if any.">
<polygon fill="none" stroke="black" points="8520.5,-4478.14 8219.5,-4478.14 8219.5,-4442.14 8520.5,-4442.14 8520.5,-4478.14"/>
<text text-anchor="middle" x="8370" y="-4456.09" font-family="Times,serif" font-size="15.68">pending_caption._get_message_path</text>
</a>
</g>
</g>
<!-- pending_caption.main -->
<g id="node166" class="node">
<title>pending_caption.main</title>
<polygon fill="none" stroke="black" points="6551.5,-4386.14 6083.5,-4386.14 6083.5,-4334.14 6551.5,-4334.14 6551.5,-4386.14"/>
<text text-anchor="middle" x="6317.5" y="-4349.99" font-family="Times,serif" font-size="40.18">pending_caption.main</text>
</g>
<!-- pending_caption.main&#45;&gt;image_io.read_image_meta -->
<g id="edge282" class="edge">
<title>pending_caption.main&#45;&gt;image_io.read_image_meta</title>
<path fill="none" stroke="black" d="M6551.56,-4360.14C6753.27,-4360.14 7037.15,-4360.14 7198.01,-4360.14"/>
<polygon fill="black" stroke="black" points="7198.42,-4363.64 7208.42,-4360.14 7198.42,-4356.64 7198.42,-4363.64"/>
</g>
<!-- pending_caption.main&#45;&gt;post_io.read_post -->
<g id="edge283" class="edge">
<title>pending_caption.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6551.59,-4343.5C6954.83,-4313.69 7744.14,-4250.46 7789,-4209.14 7853.18,-4150.02 7760.35,-4074.73 7825,-4016.14 7910.82,-3938.36 8038.65,-3924.11 8148.83,-3930.48"/>
<polygon fill="black" stroke="black" points="8148.89,-3933.99 8159.09,-3931.14 8149.34,-3927.01 8148.89,-3933.99"/>
</g>
<!-- pending_caption.main&#45;&gt;caption_io.has_caption -->
<g id="edge285" class="edge">
<title>pending_caption.main&#45;&gt;caption_io.has_caption</title>
<path fill="none" stroke="black" d="M6551.54,-4377.55C6649.5,-4371.49 6755.68,-4344.73 6821,-4268.14 6878.3,-4200.95 6795.3,-2742.3 6857,-2679.14 6929.44,-2604.98 7707.9,-2700.71 7789,-2636.14 7835.57,-2599.06 7778.5,-2544.29 7825,-2507.14 7893.27,-2452.59 8146.48,-2462.73 8282.03,-2472.59"/>
<polygon fill="black" stroke="black" points="8282.15,-2476.1 8292.38,-2473.36 8282.67,-2469.12 8282.15,-2476.1"/>
</g>
<!-- pending_caption.main&#45;&gt;moderation.should_skip_message -->
<g id="edge284" class="edge">
<title>pending_caption.main&#45;&gt;moderation.should_skip_message</title>
<path fill="none" stroke="black" d="M6532.21,-4386.16C6627.85,-4406.2 6737.59,-4441.61 6821,-4504.14 6844.97,-4522.11 6830.76,-4546.67 6857,-4561.14 7038.38,-4661.11 7588.51,-4613.09 7789,-4561.14 7806.72,-4556.55 7807.4,-4546.17 7825,-4541.14 7944.47,-4507 8084.61,-4500.79 8192.74,-4502.84"/>
<polygon fill="black" stroke="black" points="8192.69,-4506.34 8202.77,-4503.05 8192.84,-4499.34 8192.69,-4506.34"/>
</g>
<!-- pending_caption.main&#45;&gt;pending_caption._get_message_path -->
<g id="edge286" class="edge">
<title>pending_caption.main&#45;&gt;pending_caption._get_message_path</title>
<path fill="none" stroke="black" d="M6515.71,-4386.15C6617.46,-4398.55 6743.68,-4412.34 6857,-4420.14 7349.16,-4454.01 7933.24,-4459.71 8209.29,-4460.34"/>
<polygon fill="black" stroke="black" points="8209.37,-4463.84 8219.38,-4460.36 8209.39,-4456.84 8209.37,-4463.84"/>
</g>
<!-- pending_embed._needs_embedding -->
<g id="node167" class="node">
<title>pending_embed._needs_embedding</title>
<g id="a_node167"><a xlink:title="Return ``True`` when ``emb`` is missing or stale.&#10;&#10;The function also upgrades older vector files stored as a single object and&#10;removes corrupted or mismatched ones so ``embed.py`` always operates on&#10;clean data.">
<polygon fill="none" stroke="black" points="8779,-4082.64 7961,-4082.64 7961,-4025.64 8779,-4025.64 8779,-4082.64"/>
<text text-anchor="middle" x="8370" y="-4042.8" font-family="Times,serif" font-size="44.80">pending_embed._needs_embedding</text>
</a>
</g>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.load_json -->
<g id="edge287" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.load_json</title>
<path fill="none" stroke="black" d="M8779.08,-4061.16C8841.17,-4053.89 8892.18,-4040.16 8915,-4016.14 8990.61,-3936.53 8891.67,-2132.52 8951,-2040.14 8992.91,-1974.88 9074.18,-1939.08 9140.66,-1919.91"/>
<polygon fill="black" stroke="black" points="9141.67,-1923.26 9150.36,-1917.2 9139.79,-1916.52 9141.67,-1923.26"/>
</g>
<!-- pending_embed._needs_embedding&#45;&gt;notes_utils.write_json -->
<g id="edge288" class="edge">
<title>pending_embed._needs_embedding&#45;&gt;notes_utils.write_json</title>
<path fill="none" stroke="black" d="M8779.25,-4052.48C8839.64,-4059.45 8889.98,-4071.69 8915,-4092.14 8961.42,-4130.08 8925.74,-4167.77 8951,-4222.14 9028.47,-4388.88 9168.31,-4561.98 9222.6,-4626.17"/>
<polygon fill="black" stroke="black" points="9219.95,-4628.45 9229.09,-4633.81 9225.28,-4623.92 9219.95,-4628.45"/>
</g>
<!-- pending_embed.main -->
<g id="node168" class="node">
<title>pending_embed.main</title>
<polygon fill="none" stroke="black" points="6579.5,-4259.14 6055.5,-4259.14 6055.5,-4199.14 6579.5,-4199.14 6579.5,-4259.14"/>
<text text-anchor="middle" x="6317.5" y="-4217.62" font-family="Times,serif" font-size="46.90">pending_embed.main</text>
</g>
<!-- pending_embed.main&#45;&gt;post_io.read_post -->
<g id="edge289" class="edge">
<title>pending_embed.main&#45;&gt;post_io.read_post</title>
<path fill="none" stroke="black" d="M6579.73,-4221.72C6999.21,-4209.53 7777.52,-4185.67 7789,-4176.14 7845.09,-4129.59 7770.1,-4064.08 7825,-4016.14 7905.93,-3945.46 8021.84,-3928.16 8125.88,-3930.82"/>
<polygon fill="black" stroke="black" points="8125.81,-3934.32 8135.91,-3931.14 8126.03,-3927.32 8125.81,-3934.32"/>
</g>
<!-- pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot -->
<g id="edge290" class="edge">
<title>pending_embed.main&#45;&gt;post_io.raw_post_path_from_lot</title>
<path fill="none" stroke="black" d="M6393.66,-4198.97C6507.85,-4148.78 6722.15,-4036.48 6821,-3866.14 6858.8,-3801 6802.47,-3581.09 6857,-3529.14 6900.45,-3487.74 7049.82,-3485.27 7167.69,-3490.5"/>
<polygon fill="black" stroke="black" points="7167.76,-3494.01 7177.92,-3490.98 7168.09,-3487.02 7167.76,-3494.01"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.read_lots -->
<g id="edge293" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.read_lots</title>
<path fill="none" stroke="black" d="M6386.08,-4199.12C6494.81,-4147.3 6707.8,-4030.58 6821,-3866.14 6856.21,-3814.99 6807.76,-3768.97 6857,-3731.14 6912.08,-3688.82 7909.79,-3723.32 8253.65,-3736.54"/>
<polygon fill="black" stroke="black" points="8253.75,-3740.04 8263.88,-3736.93 8254.02,-3733.05 8253.75,-3740.04"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.message_skip_reason -->
<g id="edge291" class="edge">
<title>pending_embed.main&#45;&gt;moderation.message_skip_reason</title>
<path fill="none" stroke="black" d="M6579.72,-4217.24C6669.02,-4227.45 6761.32,-4256.53 6821,-4325.14 6873.72,-4385.74 6799.32,-4991.24 6857,-5047.14 6907.53,-5096.12 8857.13,-5083.12 8915,-5065.14 9040.95,-5026 9161.42,-4920.25 9215.39,-4868.07"/>
<polygon fill="black" stroke="black" points="9218.15,-4870.27 9222.86,-4860.78 9213.26,-4865.26 9218.15,-4870.27"/>
</g>
<!-- pending_embed.main&#45;&gt;moderation.lot_skip_reason -->
<g id="edge292" class="edge">
<title>pending_embed.main&#45;&gt;moderation.lot_skip_reason</title>
<path fill="none" stroke="black" d="M6579.65,-4243.12C6667.72,-4247.21 6766.6,-4251.12 6857,-4253.14 7085.62,-4258.23 8734.66,-4379.74 8915,-4239.14 8964.31,-4200.69 8904.28,-4144.69 8951,-4103.14 8980.92,-4076.52 9019.75,-4062.19 9059.32,-4055.14"/>
<polygon fill="black" stroke="black" points="9060.09,-4058.56 9069.4,-4053.5 9058.96,-4051.65 9060.09,-4058.56"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.iter_lot_files -->
<g id="edge295" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.iter_lot_files</title>
<path fill="none" stroke="black" d="M6579.54,-4199.72C6975.56,-4153.19 7692.57,-4060.74 7789,-3991.14 7817.05,-3970.89 7795.89,-3940.82 7825,-3922.14 7889.78,-3880.55 8092.17,-3880.54 8230.95,-3886.03"/>
<polygon fill="black" stroke="black" points="8231.11,-3889.54 8241.25,-3886.46 8231.4,-3882.55 8231.11,-3889.54"/>
</g>
<!-- pending_embed.main&#45;&gt;lot_io.embedding_path -->
<g id="edge294" class="edge">
<title>pending_embed.main&#45;&gt;lot_io.embedding_path</title>
<path fill="none" stroke="black" d="M6579.52,-4236.82C6662.7,-4249.79 6751.17,-4275.63 6821,-4325.14 6846.99,-4343.57 6829.39,-4371.24 6857,-4387.14 6946.75,-4438.8 7686.06,-4398.44 7789,-4387.14 7805.29,-4385.35 7808.76,-4381.33 7825,-4379.14 7971.88,-4359.32 8142.81,-4353.65 8253.3,-4352.23"/>
<polygon fill="black" stroke="black" points="8253.51,-4355.73 8263.47,-4352.11 8253.43,-4348.73 8253.51,-4355.73"/>
</g>
<!-- pending_embed.main&#45;&gt;pending_embed._needs_embedding -->
<g id="edge296" class="edge">
<title>pending_embed.main&#45;&gt;pending_embed._needs_embedding</title>
<path fill="none" stroke="black" d="M6579.79,-4243.05C6976.63,-4261.71 7695.3,-4284.93 7789,-4214.14 7834.11,-4180.06 7780.93,-4127.54 7825,-4092.14 7848.72,-4073.08 7894.81,-4061.2 7950.55,-4054.09"/>
<polygon fill="black" stroke="black" points="7951.18,-4057.54 7960.69,-4052.86 7950.34,-4050.59 7951.18,-4057.54"/>
</g>
<!-- check_translations.parse_po -->
<g id="node169" class="node">
<title>check_translations.parse_po</title>
<polygon fill="none" stroke="black" points="1667.5,-4372.14 1083.5,-4372.14 1083.5,-4320.14 1667.5,-4320.14 1667.5,-4372.14"/>
<text text-anchor="middle" x="1375.5" y="-4336.44" font-family="Times,serif" font-size="39.62">check_translations.parse_po</text>
</g>
<!-- check_translations.check_translations -->
<g id="node170" class="node">
<title>check_translations.check_translations</title>
<polygon fill="none" stroke="black" points="983,-4368.64 318,-4368.64 318,-4323.64 983,-4323.64 983,-4368.64"/>
<text text-anchor="middle" x="650.5" y="-4337.76" font-family="Times,serif" font-size="33.60">check_translations.check_translations</text>
</g>
<!-- check_translations.check_translations&#45;&gt;check_translations.parse_po -->
<g id="edge297" class="edge">
<title>check_translations.check_translations&#45;&gt;check_translations.parse_po</title>
<path fill="none" stroke="black" d="M983.11,-4346.14C1013.14,-4346.14 1043.45,-4346.14 1073.19,-4346.14"/>
<polygon fill="black" stroke="black" points="1073.26,-4349.64 1083.26,-4346.14 1073.26,-4342.64 1073.26,-4349.64"/>
</g>
<!-- similar:cli -->
<g id="node172" class="node">
<title>similar:cli</title>
<g id="a_node172"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-4284.14" rx="29.05" ry="18"/>
<text text-anchor="middle" x="1986" y="-4282.54" font-family="Times,serif" font-size="7.00">similar:cli</text>
</a>
</g>
</g>
<!-- moderation:cli&#45;&gt;similar:cli -->
<!-- chop:cli -->
<g id="node173" class="node">
<title>chop:cli</title>
<g id="a_node173"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-4284.14" rx="27" ry="18"/>
<text text-anchor="middle" x="2606.5" y="-4282.54" font-family="Times,serif" font-size="7.00">chop:cli</text>
</a>
</g>
</g>
<!-- similar:cli&#45;&gt;chop:cli -->
<!-- embed:cli -->
<g id="node174" class="node">
<title>embed:cli</title>
<g id="a_node174"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-4284.14" rx="29.05" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-4282.54" font-family="Times,serif" font-size="7.00">embed:cli</text>
</a>
</g>
</g>
<!-- chop:cli&#45;&gt;embed:cli -->
<!-- build_site:cli -->
<g id="node175" class="node">
<title>build_site:cli</title>
<g id="a_node175"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-4284.14" rx="34.71" ry="18"/>
<text text-anchor="middle" x="4058" y="-4282.54" font-family="Times,serif" font-size="7.00">build_site:cli</text>
</a>
</g>
</g>
<!-- embed:cli&#45;&gt;build_site:cli -->
<!-- caption:cli -->
<g id="node176" class="node">
<title>caption:cli</title>
<g id="a_node176"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4408.14" rx="30.28" ry="18"/>
<text text-anchor="middle" x="141" y="-4406.54" font-family="Times,serif" font-size="7.00">caption:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli -->
<g id="node177" class="node">
<title>tg_client:cli</title>
<g id="a_node177"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4408.14" rx="32.86" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4406.54" font-family="Times,serif" font-size="7.00">tg_client:cli</text>
</a>
</g>
</g>
<!-- caption:cli&#45;&gt;tg_client:cli -->
<!-- debug_dump:cli -->
<g id="node178" class="node">
<title>debug_dump:cli</title>
<g id="a_node178"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1375.5" cy="-4408.14" rx="41.11" ry="18"/>
<text text-anchor="middle" x="1375.5" y="-4406.54" font-family="Times,serif" font-size="7.00">debug_dump:cli</text>
</a>
</g>
</g>
<!-- tg_client:cli&#45;&gt;debug_dump:cli -->
<!-- scan_ontology:cli -->
<g id="node179" class="node">
<title>scan_ontology:cli</title>
<g id="a_node179"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="1986" cy="-4408.14" rx="44.19" ry="18"/>
<text text-anchor="middle" x="1986" y="-4406.54" font-family="Times,serif" font-size="7.00">scan_ontology:cli</text>
</a>
</g>
</g>
<!-- debug_dump:cli&#45;&gt;scan_ontology:cli -->
<!-- telegram_bot:cli -->
<g id="node180" class="node">
<title>telegram_bot:cli</title>
<g id="a_node180"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="2606.5" cy="-4408.14" rx="111.95" ry="19.18"/>
<text text-anchor="middle" x="2606.5" y="-4403.97" font-family="Times,serif" font-size="17.08">telegram_bot:cli</text>
</a>
</g>
</g>
<!-- scan_ontology:cli&#45;&gt;telegram_bot:cli -->
<!-- pending_chop:cli -->
<g id="node181" class="node">
<title>pending_chop:cli</title>
<g id="a_node181"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="3211.5" cy="-4408.14" rx="42.96" ry="18"/>
<text text-anchor="middle" x="3211.5" y="-4406.54" font-family="Times,serif" font-size="7.00">pending_chop:cli</text>
</a>
</g>
</g>
<!-- telegram_bot:cli&#45;&gt;pending_chop:cli -->
<!-- pending_caption:cli -->
<g id="node182" class="node">
<title>pending_caption:cli</title>
<g id="a_node182"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="4058" cy="-4408.14" rx="48.62" ry="18"/>
<text text-anchor="middle" x="4058" y="-4406.54" font-family="Times,serif" font-size="7.00">pending_caption:cli</text>
</a>
</g>
</g>
<!-- pending_chop:cli&#45;&gt;pending_caption:cli -->
<!-- pending_embed:cli -->
<g id="node183" class="node">
<title>pending_embed:cli</title>
<g id="a_node183"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="141" cy="-4462.14" rx="47.39" ry="18"/>
<text text-anchor="middle" x="141" y="-4460.54" font-family="Times,serif" font-size="7.00">pending_embed:cli</text>
</a>
</g>
</g>
<!-- check_translations:cli -->
<g id="node184" class="node">
<title>check_translations:cli</title>
<g id="a_node184"><a xlink:title="Command line entrypoint">
<ellipse fill="none" stroke="black" cx="650.5" cy="-4462.14" rx="53.05" ry="18"/>
<text text-anchor="middle" x="650.5" y="-4460.54" font-family="Times,serif" font-size="7.00">check_translations:cli</text>
</a>
</g>
</g>
<!-- pending_embed:cli&#45;&gt;check_translations:cli -->
<!-- build_site -->
<g id="node185" class="node">
<title>build_site</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-552.14" rx="55.79" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-548.44" font-family="Times,serif" font-size="14.00">build_site</text>
</g>
<!-- build_site&#45;&gt;build_site.main -->
<g id="edge310" class="edge">
<title>build_site:cli&#45;&gt;build_site.main</title>
<path fill="none" stroke="black" d="M5002.65,-552.14C5070.85,-552.14 5190.85,-552.14 5296.06,-552.14"/>
<polygon fill="black" stroke="black" points="5296.19,-555.64 5306.19,-552.14 5296.19,-548.64 5296.19,-555.64"/>
</g>
<!-- caption -->
<g id="node186" class="node">
<title>caption</title>
<ellipse fill="none" stroke="black" cx="5502.5" cy="-1305.14" rx="44.69" ry="18"/>
<text text-anchor="middle" x="5502.5" y="-1301.44" font-family="Times,serif" font-size="14.00">caption</text>
</g>
<!-- caption&#45;&gt;caption.main -->
<g id="edge311" class="edge">
<title>caption:cli&#45;&gt;caption.main</title>
<path fill="none" stroke="black" d="M5547.5,-1305.19C5673.16,-1305.35 6036.1,-1305.79 6214.74,-1306.01"/>
<polygon fill="black" stroke="black" points="6214.92,-1309.51 6224.93,-1306.03 6214.93,-1302.51 6214.92,-1309.51"/>
</g>
<!-- check_translations -->
<g id="node187" class="node">
<title>check_translations</title>
<ellipse fill="none" stroke="black" cx="141" cy="-4346.14" rx="96.68" ry="18"/>
<text text-anchor="middle" x="141" y="-4342.44" font-family="Times,serif" font-size="14.00">check_translations</text>
</g>
<!-- check_translations&#45;&gt;check_translations.check_translations -->
<g id="edge312" class="edge">
<title>check_translations:cli&#45;&gt;check_translations.check_translations</title>
<path fill="none" stroke="black" d="M238.05,-4346.14C259.3,-4346.14 282.99,-4346.14 307.97,-4346.14"/>
<polygon fill="black" stroke="black" points="307.99,-4349.64 317.99,-4346.14 307.99,-4342.64 307.99,-4349.64"/>
</g>
<!-- chop -->
<g id="node188" class="node">
<title>chop</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-4865.14" rx="32.49" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-4861.44" font-family="Times,serif" font-size="14.00">chop</text>
</g>
<!-- chop&#45;&gt;chop.main -->
<g id="edge313" class="edge">
<title>chop:cli&#45;&gt;chop.main</title>
<path fill="none" stroke="black" d="M4979.28,-4865.14C5062.91,-4865.14 5291.32,-4865.14 5416.56,-4865.14"/>
<polygon fill="black" stroke="black" points="5416.88,-4868.64 5426.88,-4865.14 5416.88,-4861.64 5416.88,-4868.64"/>
</g>
<!-- clean_data -->
<g id="node189" class="node">
<title>clean_data</title>
<ellipse fill="none" stroke="black" cx="5502.5" cy="-3070.14" rx="59.59" ry="18"/>
<text text-anchor="middle" x="5502.5" y="-3066.44" font-family="Times,serif" font-size="14.00">clean_data</text>
</g>
<!-- clean_data&#45;&gt;clean_data.main -->
<g id="edge314" class="edge">
<title>clean_data:cli&#45;&gt;clean_data.main</title>
<path fill="none" stroke="black" d="M5562.3,-3070.14C5698.64,-3070.14 6037.91,-3070.14 6211.12,-3070.14"/>
<polygon fill="black" stroke="black" points="6211.27,-3073.64 6221.27,-3070.14 6211.27,-3066.64 6211.27,-3073.64"/>
</g>
<!-- debug_dump -->
<g id="node190" class="node">
<title>debug_dump</title>
<ellipse fill="none" stroke="black" cx="5502.5" cy="-2208.14" rx="70.39" ry="18"/>
<text text-anchor="middle" x="5502.5" y="-2204.44" font-family="Times,serif" font-size="14.00">debug_dump</text>
</g>
<!-- debug_dump&#45;&gt;debug_dump.main -->
<g id="edge315" class="edge">
<title>debug_dump:cli&#45;&gt;debug_dump.main</title>
<path fill="none" stroke="black" d="M5572.82,-2208.14C5681.62,-2208.14 5897.77,-2208.14 6069.13,-2208.14"/>
<polygon fill="black" stroke="black" points="6069.32,-2211.64 6079.32,-2208.14 6069.32,-2204.64 6069.32,-2211.64"/>
</g>
<!-- embed -->
<g id="node191" class="node">
<title>embed</title>
<ellipse fill="none" stroke="black" cx="5502.5" cy="-5010.14" rx="42.49" ry="18"/>
<text text-anchor="middle" x="5502.5" y="-5006.44" font-family="Times,serif" font-size="14.00">embed</text>
</g>
<!-- embed&#45;&gt;embed.main -->
<g id="edge316" class="edge">
<title>embed:cli&#45;&gt;embed.main</title>
<path fill="none" stroke="black" d="M5544.93,-5010.14C5669.2,-5010.14 6041.15,-5010.14 6219.3,-5010.14"/>
<polygon fill="black" stroke="black" points="6219.46,-5013.64 6229.46,-5010.14 6219.46,-5006.64 6219.46,-5013.64"/>
</g>
<!-- moderation -->
<g id="node192" class="node">
<title>moderation</title>
<ellipse fill="none" stroke="black" cx="6317.5" cy="-3839.14" rx="63.89" ry="18"/>
<text text-anchor="middle" x="6317.5" y="-3835.44" font-family="Times,serif" font-size="14.00">moderation</text>
</g>
<!-- moderation&#45;&gt;moderation.apply_to_history -->
<g id="edge317" class="edge">
<title>moderation:cli&#45;&gt;moderation.apply_to_history</title>
<path fill="none" stroke="black" d="M6381.27,-3839.14C6513.56,-3839.14 6827.61,-3839.14 7056.57,-3839.14"/>
<polygon fill="black" stroke="black" points="7056.73,-3842.64 7066.73,-3839.14 7056.73,-3835.64 7056.73,-3842.64"/>
</g>
<!-- pending_caption -->
<g id="node193" class="node">
<title>pending_caption</title>
<ellipse fill="none" stroke="black" cx="5502.5" cy="-4360.14" rx="87.18" ry="18"/>
<text text-anchor="middle" x="5502.5" y="-4356.44" font-family="Times,serif" font-size="14.00">pending_caption</text>
</g>
<!-- pending_caption&#45;&gt;pending_caption.main -->
<g id="edge318" class="edge">
<title>pending_caption:cli&#45;&gt;pending_caption.main</title>
<path fill="none" stroke="black" d="M5589.74,-4360.14C5703.82,-4360.14 5909.54,-4360.14 6073.07,-4360.14"/>
<polygon fill="black" stroke="black" points="6073.28,-4363.64 6083.28,-4360.14 6073.28,-4356.64 6073.28,-4363.64"/>
</g>
<!-- pending_chop -->
<g id="node194" class="node">
<title>pending_chop</title>
<ellipse fill="none" stroke="black" cx="6317.5" cy="-4531.14" rx="74.99" ry="18"/>
<text text-anchor="middle" x="6317.5" y="-4527.44" font-family="Times,serif" font-size="14.00">pending_chop</text>
</g>
<!-- pending_chop&#45;&gt;pending_chop.main -->
<g id="edge319" class="edge">
<title>pending_chop:cli&#45;&gt;pending_chop.main</title>
<path fill="none" stroke="black" d="M6392.29,-4531.14C6550.65,-4531.14 6926.72,-4531.14 7149.01,-4531.14"/>
<polygon fill="black" stroke="black" points="7149.15,-4534.64 7159.15,-4531.14 7149.15,-4527.64 7149.15,-4534.64"/>
</g>
<!-- pending_embed -->
<g id="node195" class="node">
<title>pending_embed</title>
<ellipse fill="none" stroke="black" cx="5502.5" cy="-4229.14" rx="83.69" ry="18"/>
<text text-anchor="middle" x="5502.5" y="-4225.44" font-family="Times,serif" font-size="14.00">pending_embed</text>
</g>
<!-- pending_embed&#45;&gt;pending_embed.main -->
<g id="edge320" class="edge">
<title>pending_embed:cli&#45;&gt;pending_embed.main</title>
<path fill="none" stroke="black" d="M5586.68,-4229.14C5693.81,-4229.14 5885.25,-4229.14 6045.18,-4229.14"/>
<polygon fill="black" stroke="black" points="6045.18,-4232.64 6055.18,-4229.14 6045.18,-4225.64 6045.18,-4232.64"/>
</g>
<!-- scan_ontology -->
<g id="node196" class="node">
<title>scan_ontology</title>
<ellipse fill="none" stroke="black" cx="4946.5" cy="-3674.14" rx="76.09" ry="18"/>
<text text-anchor="middle" x="4946.5" y="-3670.44" font-family="Times,serif" font-size="14.00">scan_ontology</text>
</g>
<!-- scan_ontology&#45;&gt;scan_ontology.main -->
<g id="edge321" class="edge">
<title>scan_ontology:cli&#45;&gt;scan_ontology.main</title>
<path fill="none" stroke="black" d="M5022.79,-3674.14C5085.32,-3674.14 5177.8,-3674.14 5264.85,-3674.14"/>
<polygon fill="black" stroke="black" points="5264.88,-3677.64 5274.88,-3674.14 5264.88,-3670.64 5264.88,-3677.64"/>
</g>
<!-- similar -->
<g id="node197" class="node">
<title>similar</title>
<ellipse fill="none" stroke="black" cx="5502.5" cy="-3460.14" rx="42.79" ry="18"/>
<text text-anchor="middle" x="5502.5" y="-3456.44" font-family="Times,serif" font-size="14.00">similar</text>
</g>
<!-- similar&#45;&gt;similar.main -->
<g id="edge322" class="edge">
<title>similar:cli&#45;&gt;similar.main</title>
<path fill="none" stroke="black" d="M5545.5,-3460.14C5668.28,-3460.14 6029.33,-3460.14 6210.41,-3460.14"/>
<polygon fill="black" stroke="black" points="6210.48,-3463.64 6220.48,-3460.14 6210.48,-3456.64 6210.48,-3463.64"/>
</g>
<!-- telegram_bot -->
<g id="node198" class="node">
<title>telegram_bot</title>
<ellipse fill="none" stroke="black" cx="4058" cy="-1053.14" rx="72.29" ry="18"/>
<text text-anchor="middle" x="4058" y="-1049.44" font-family="Times,serif" font-size="14.00">telegram_bot</text>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.send_alert -->
<g id="edge323" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.send_alert</title>
<path fill="none" stroke="black" d="M4129.3,-1050.04C4266.87,-1043.99 4575.24,-1030.43 4771.09,-1021.81"/>
<polygon fill="black" stroke="black" points="4771.37,-1025.3 4781.2,-1021.37 4771.06,-1018.31 4771.37,-1025.3"/>
</g>
<!-- telegram_bot&#45;&gt;telegram_bot.main -->
<g id="edge324" class="edge">
<title>telegram_bot:cli&#45;&gt;telegram_bot.main</title>
<path fill="none" stroke="black" d="M4129.3,-1056.31C4266.77,-1062.51 4574.79,-1076.41 4770.66,-1085.25"/>
<polygon fill="black" stroke="black" points="4770.63,-1088.75 4780.77,-1085.71 4770.94,-1081.76 4770.63,-1088.75"/>
</g>
<!-- tg_client -->
<g id="node199" class="node">
<title>tg_client</title>
<ellipse fill="none" stroke="black" cx="141" cy="-2102.14" rx="50.89" ry="18"/>
<text text-anchor="middle" x="141" y="-2098.44" font-family="Times,serif" font-size="14.00">tg_client</text>
</g>
<!-- tg_client&#45;&gt;tg_client.main -->
<g id="edge325" class="edge">
<title>tg_client:cli&#45;&gt;tg_client.main</title>
<path fill="none" stroke="black" d="M192.05,-2102.14C232.34,-2102.14 292.58,-2102.14 356.22,-2102.14"/>
<polygon fill="black" stroke="black" points="356.46,-2105.64 366.46,-2102.14 356.46,-2098.64 356.46,-2105.64"/>
</g>
</g>
</svg>
